KISSY.add("redenveloperain/main",function(e,t,n,i){return window.app=window.app||(window.app={}),e.DOM=e.DOM||t,e.UA=e.UA||n,e.Anim=e.Anim||i,app.S=e,function(e,t){function n(e){this.val=e.toString(),this.gt=function(e){return n.compare(this,e)>0},this.gte=function(e){return n.compare(this,e)>=0},this.lt=function(e){return n.compare(this,e)<0},this.lte=function(e){return n.compare(this,e)<=0},this.eq=function(e){return 0===n.compare(this,e)}}t.env=t.env||{},n.prototype.toString=function(){return this.val},n.prototype.valueOf=function(){for(var e=this.val.split("."),t=[],n=0;n<e.length;n++){var i=parseInt(e[n],10);isNaN(i)&&(i=0);var r=i.toString();r.length<5&&(r=Array(6-r.length).join("0")+r),t.push(r),1===t.length&&t.push(".")}return parseFloat(t.join(""))},n.compare=function(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(window.isNaN(i)&&(i=0),window.isNaN(r)&&(r=0),r>i)return-1;if(i>r)return 1}return 0},t.version=function(e){return new n(e)}}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n=e.location.search.replace(/^\?/,"");if(t.env.params={},n)for(var i=n.split("&"),r=0;r<i.length;r++){i[r]=i[r].split("=");try{t.env.params[i[r][0]]=decodeURIComponent(i[r][1])}catch(a){t.env.params[i[r][0]]=i[r][1]}}}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,i=e.navigator.userAgent;if(n=i.match(/Windows\sPhone\s(?:OS\s)?([\d\.]+)/))t.env.os={name:"Windows Phone",isWindowsPhone:!0,version:n[1]};else if(i.match(/Safari/)&&(n=i.match(/Android[\s\/]([\d\.]+)/)))t.env.os={version:n[1]},i.match(/Mobile\s+Safari/)?(t.env.os.name="Android",t.env.os.isAndroid=!0):(t.env.os.name="AndroidPad",t.env.os.isAndroidPad=!0);else if(n=i.match(/(iPhone|iPad|iPod)/)){var r=n[1];n=i.match(/OS ([\d_\.]+) like Mac OS X/),t.env.os={name:r,isIPhone:"iPhone"===r||"iPod"===r,isIPad:"iPad"===r,isIOS:!0,version:n[1].split("_").join(".")}}else t.env.os={name:"unknown",version:"0.0.0"};t.version&&(t.env.os.version=t.version(t.env.os.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,i=e.navigator.userAgent;(n=i.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?t.env.browser={name:"UC",isUC:!0,version:n[1]}:(n=i.match(/MQQBrowser\/([\d\.]+)/))?t.env.browser={name:"QQ",isQQ:!0,version:n[1]}:(n=i.match(/Firefox\/([\d\.]+)/))?t.env.browser={name:"Firefox",isFirefox:!0,version:n[1]}:(n=i.match(/MSIE\s([\d\.]+)/))||(n=i.match(/IEMobile\/([\d\.]+)/))?(t.env.browser={version:n[1]},i.match(/IEMobile/)?(t.env.browser.name="IEMobile",t.env.browser.isIEMobile=!0):(t.env.browser.name="IE",t.env.browser.isIE=!0),i.match(/Android|iPhone/)&&(t.env.browser.isIELikeWebkit=!0)):(n=i.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?(t.env.browser={name:"Chrome",isChrome:!0,version:n[1]},i.match(/Version\/[\d+\.]+\s*Chrome/)&&(t.env.browser.name="Chrome Webview",t.env.browser.isWebview=!0)):i.match(/Safari/)&&(n=i.match(/Android[\s\/]([\d\.]+)/))?t.env.browser={name:"Android",isAndroid:!0,version:n[1]}:i.match(/iPhone|iPad|iPod/)?i.match(/Safari/)?(n=i.match(/Version\/([\d\.]+)/),t.env.browser={name:"Safari",isSafari:!0,version:n[1]}):(n=i.match(/OS ([\d_\.]+) like Mac OS X/),t.env.browser={name:"iOS Webview",isWebview:!0,version:n[1].replace(/\_/g,".")}):t.env.browser={name:"unknown",version:"0.0.0"},t.version&&(t.env.browser.version=t.version(t.env.browser.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n=e.navigator.userAgent;n.match(/Weibo/i)?t.env.thirdapp={appname:"Weibo",isWeibo:!0}:n.match(/MicroMessenger/i)?t.env.thirdapp={appname:"Weixin",isWeixin:!0}:t.env.thirdapp=!1}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,i,r=e.navigator.userAgent;(i=r.match(/WindVane[\/\s]([\d\.\_]+)/))&&(n=i[1]);var a=!1,o="",s="",l="";(i=r.match(/AliApp\(([A-Za-z\-]+)\/([\d\.]+)\)/))&&(a=!0,o=i[1],l=i[2],s=o.indexOf("-PD")>0?t.env.os.isIOS?"iPad":t.env.os.isAndroid?"AndroidPad":t.env.os.name:t.env.os.name),!o&&r.indexOf("TBIOS")>0&&(o="TB"),a?t.env.aliapp={windvane:t.version(n||"0.0.0"),appname:o||"unkown",version:t.version(l||"0.0.0"),platform:s||t.env.os.name}:t.env.aliapp=!1,t.env.taobaoApp=t.env.aliapp}(window,window.lib||(window.lib={})),function r(e,t,n){function i(o,s){if(!t[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return i(n?n:t)},d,d.exports,r,e,t,n)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){function i(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t,n){"use strict";function i(e){function t(e){return null===l?void d.push(e):void o(function(){var t=l?e.onFulfilled:e.onRejected;if(null===t)return void(l?e.resolve:e.reject)(c);var n;try{n=t(c)}catch(i){return void e.reject(i)}e.resolve(n)})}function n(e){try{if(e===u)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void a(t.bind(e),n,i)}l=!0,c=e,s()}catch(r){i(r)}}function i(e){l=!1,c=e,s()}function s(){for(var e=0,n=d.length;n>e;e++)t(d[e]);d=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var l=null,c=null,d=[],u=this;this.then=function(e,n){return new u.constructor(function(i,a){t(new r(e,n,i,a))})},a(e,n,i)}function r(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function a(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}var o=e("asap");t.exports=i},{asap:4}],3:[function(e,t,n){"use strict";function i(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,i){a(function(){try{n(t(e))}catch(r){i(r)}})})}}var r=e("./core.js"),a=e("asap");t.exports=r,i.prototype=r.prototype;var o=new i(!0),s=new i(!1),l=new i(null),c=new i(void 0),d=new i(0),u=new i("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return l;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return s;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(n){return new r(function(e,t){t(n)})}return new i(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(a,e)},n)}t[a]=o,0===--r&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var r=t.length,a=0;a<t.length;a++)i(a,t[a])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":2,asap:4}],4:[function(e,t,n){(function(e){function n(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var t=r.domain;t&&(r.domain=void 0,t.enter());try{e()}catch(i){if(l)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),i;setTimeout(function(){throw i},0)}t&&t.exit()}o=!1}function i(t){a=a.next={task:t,domain:l&&e.domain,next:null},o||(o=!0,s())}var r={task:void 0,next:null},a=r,o=!1,s=void 0,l=!1;if("undefined"!=typeof e&&e.nextTick)l=!0,s=function(){e.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=n,s=function(){c.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};t.exports=i}).call(this,e("_process"))},{_process:1}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap");"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]),function(e){function t(e){var t,n,i=/\/?[^/]+\.(\w+)(\?\S+)?$/i;return(t=e.match(i))&&(n=t[1].toLowerCase()),n||null}var n=function(){var t=e,i=document,r=i.documentElement,a=0;return{getUid:function(e){var t=++a;if(e){var n=e.charCodeAt(e.length-1);return n>=48&&57>=n&&(e+="_"),e+t}return t},viewToString:function(e){for(var t,n=e;n;)t=t?n.id+"."+t:n.id,n=n.parent;return t},copy:function(e,t,n){for(var i in t)(!n||e.hasOwnProperty(i)||void 0!==e[i])&&(e[i]=t[i]);return e},browser:function(){var e=navigator.userAgent,n={iphone:/iphone/i.test(e),ipad:/ipad/i.test(e),ipod:/ipod/i.test(e),ios:/iphone|ipad|ipod/i.test(e),android:/android/i.test(e),webkit:/webkit/i.test(e),chrome:/chrome/i.test(e),safari:/safari/i.test(e),firefox:/firefox/i.test(e),ie:/msie/i.test(e),opera:/opera/i.test(e),supportTouch:"ontouchstart"in t,supportCanvas:null!=i.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in t,supportDeviceMotion:"ondevicemotion"in t};try{var a="hilo";localStorage.setItem(a,a),localStorage.removeItem(a),n.supportStorage=!0}catch(o){}var s=n.jsVendor=n.webkit?"webkit":n.firefox?"Moz":n.opera?"O":n.ie?"ms":"",l=n.cssVendor="-"+s+"-",c=i.createElement("div"),d=c.style,u=void 0!=d[s+"Transform"],h=void 0!=d[s+"Perspective"];return h&&(c.id="test3d",d=i.createElement("style"),d.textContent="@media ("+l+"transform-3d){#test3d{height:3px}}",i.head.appendChild(d),r.appendChild(c),h=3==c.offsetHeight,i.head.removeChild(d),r.removeChild(c)),n.supportTransform=u,n.supportTransform3D=h,n}(),event:function(){var e="ontouchstart"in t;return{POINTER_START:e?"touchstart":"mousedown",POINTER_MOVE:e?"touchmove":"mousemove",POINTER_END:e?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){try{var n=e.getBoundingClientRect()}catch(i){n={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var a=(e.isFixed?0:t.pageXOffset||r.scrollLeft)-(r.clientLeft||0),o=(e.isFixed?0:t.pageYOffset||r.scrollTop)-(r.clientTop||0),s=t.getComputedStyle?getComputedStyle(e):e.currentStyle,l=parseInt,c=l(s.paddingLeft)+l(s.borderLeftWidth)||0,d=l(s.paddingTop)+l(s.borderTopWidth)||0,u=l(s.paddingRight)+l(s.borderRightWidth)||0,h=l(s.paddingBottom)+l(s.borderBottomWidth)||0;return{left:n.left||0+a||0+c||0,top:n.top||0+o||0+d||0,width:n.right-u-n.left-c,height:n.bottom-h-n.top-d}},createElement:function(e,t){var n,r,a,o=i.createElement(e);for(n in t)if(r=t[n],"style"===n)for(a in r)o.style[a]=r[a];else o[n]=r;return o},getElement:function(e){return i.getElementById(e)},setElementStyleByView:function(e){var t=e.drawable,i=t.domElement.style,r=e._stateCache||(e._stateCache={}),a=n.browser.jsVendor,o="px",s=!1;if(this.cacheStateIfChanged(e,["visible"],r)&&(i.display=e.visible?"":"none"),this.cacheStateIfChanged(e,["alpha"],r)&&(i.opacity=e.alpha),e.visible&&!(e.alpha<=0)){this.cacheStateIfChanged(e,["width"],r)&&(i.width=e.width+o),this.cacheStateIfChanged(e,["height"],r)&&(i.height=e.height+o),this.cacheStateIfChanged(e,["depth"],r)&&(i.zIndex=e.depth+1),(s=this.cacheStateIfChanged(e,["pivotX","pivotY"],r))&&(i[a+"TransformOrigin"]=e.pivotX+o+" "+e.pivotY+o),(this.cacheStateIfChanged(e,["x","y","rotation","scaleX","scaleY"],r)||s)&&(i[a+"Transform"]=this.getTransformCSS(e)),this.cacheStateIfChanged(e,["background"],r)&&(i.backgroundColor=e.background),i.pointerEvents||(i.pointerEvents="none");var l=t.image;if(l){var c=l.src;c!==r.image&&(r.image=c,i.backgroundImage="url("+c+")");var d=t.rect;if(d){var u=d[0],h=d[1];u!==r.sx&&(r.sx=u,i.backgroundPositionX=-u+o),h!==r.sy&&(r.sy=h,i.backgroundPositionY=-h+o)}}var p=e.mask;if(p){var f=p.drawable.domElement.style.backgroundImage;f!==r.maskImage&&(r.maskImage=f,i[a+"MaskImage"]=f,i[a+"MaskRepeat"]="no-repeat");var m=p.x,v=p.y;(m!==r.maskX||v!==r.maskY)&&(r.maskX=m,r.maskY=v,i[a+"MaskPosition"]=m+o+" "+v+o)}}},cacheStateIfChanged:function(e,t,n){var i,r,a,o,s=!1;for(i=0,r=t.length;r>i;i++)a=t[i],o=e[a],o!=n[a]&&(n[a]=o,s=!0);return s},getTransformCSS:function(e){var t=this.browser.supportTransform3D,n=t?"3d":"";return"translate"+n+"("+(e.x-e.pivotX)+"px, "+(e.y-e.pivotY)+(t?"px, 0px)":"px)")+"rotate"+n+(t?"(0, 0, 1, ":"(")+e.rotation+"deg)scale"+n+"("+e.scaleX+", "+e.scaleY+(t?", 1)":")")}}}(),i=function(){var e=function(e){e=e||{};var n=e.hasOwnProperty("constructor")?e.constructor:function(){};return t.call(n,e),n},t=function(e){var t,i,a={};for(t in e)i=e[t],n.hasOwnProperty(t)?n[t].call(this,i):a[t]=i;r(this.prototype,a)},n={Extends:function(e){var t=this.prototype,n=i(e.prototype);r(this,e),r(n,t),n.constructor=this,this.prototype=n,this.superclass=e.prototype},Mixes:function(e){e instanceof Array||(e=[e]);for(var t,n=this.prototype;t=e.shift();)r(n,t.prototype||t)},Statics:function(e){r(this,e)}},i=function(){if(Object.__proto__)return function(e){return{__proto__:e}};var e=function(){};return function(t){return e.prototype=t,new e}}(),r=function(e){for(var t=1,n=arguments.length;n>t;t++){var i,r=arguments[t];for(var a in r){var s=r[a];!s||"object"!=typeof s||void 0===s.value&&"function"!=typeof s.get&&"function"!=typeof s.set?e[a]=s:(i=i||{},i[a]=s)}i&&o(e,i)}return e};try{var a=Object.defineProperty,o=Object.defineProperties;a({},"$",{value:0})}catch(s){"__defineGetter__"in Object&&(a=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&a(e,n,t[n]);return e})}return{create:e,mix:r}}(),r={_listeners:null,on:function(e,t,n){for(var i=this._listeners=this._listeners||{},r=i[e]=i[e]||[],a=0,o=r.length;o>a;a++){var s=r[a];if(s.listener===t)return}return r.push({listener:t,once:n}),this},off:function(e,t){if(0==arguments.length)return this._listeners=null,this;var n=this._listeners&&this._listeners[e];if(n){if(1==arguments.length)return delete this._listeners[e],this;for(var i=0,r=n.length;r>i;i++){var a=n[i];if(a.listener===t){n.splice(i,1),0===n.length&&delete this._listeners[e];break}}}return this},fire:function(e,t){var n,i;"string"==typeof e?i=e:(n=e,i=e.type);var r=this._listeners;if(!r)return!1;var o=r[i];if(o){if(o=o.slice(0),n=n||new a(i,this,t),n._stopped)return!1;for(var s=0;s<o.length;s++){var l=o[s];l.listener.call(this,n),l.once&&o.splice(s--,1)}return 0==o.length&&delete r[i],!0}return!1}},a=i.create({constructor:function(e,t,n){this.type=e,this.target=t,this.detail=n,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),o=e.Event;if(o){var s=o.prototype,l=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){l&&l.call(this),this._stopped=!0}}var c=i.create({constructor:function(e){e=e||{},n.copy(this,e,!0)},canvas:null,stage:null,startDraw:function(e){},draw:function(e){},endDraw:function(e){},transform:function(){},hide:function(){},remove:function(e){},clear:function(e,t,n,i){},resize:function(e,t){}}),d=i.create({Extends:c,constructor:function(e){d.superclass.constructor.call(this,e),this.context=this.canvas.getContext("2d")},context:null,startDraw:function(e){return e.visible&&e.alpha>0?(e===this.stage&&this.context.clearRect(0,0,e.width,e.height),this.context.save(),!0):!1},draw:function(e){var t=this.context,n=e.width,i=e.height,r=e.background;r&&(t.fillStyle=r,t.fillRect(0,0,n,i));var a=e.drawable,o=a&&a.image;if(o){var s=a.rect,l=s[2],c=s[3],d=s[4],u=s[5];n||i||(n=e.width=l,i=e.height=c),(d||u)&&t.translate(d-.5*l,u-.5*c),t.drawImage(o,s[0],s[1],l,c,0,0,n,i)}},endDraw:function(e){this.context.restore()},transform:function(e){var t=e.drawable;if(t&&t.domElement)return void n.setElementStyleByView(e);var i=this.context,r=e.scaleX,a=e.scaleY;if(e===this.stage){var o=this.canvas.style,s=e._scaleX,l=e._scaleY;(!s&&1!=r||s&&s!=r)&&(e._scaleX=r,o.width=r*e.width+"px"),(!l&&1!=a||l&&l!=a)&&(e._scaleY=a,o.height=a*e.height+"px")}else{var c=e.x,d=e.y,u=e.pivotX,h=e.pivotY,p=e.rotation%360,f=e.mask;f&&(f._render(this),i.clip());var m=e.align;if(m)if("function"==typeof m)e.align();else{var v=e.parent;if(v){var g=e.width,w=e.height,b=v.width,y=v.height;switch(m){case"TL":c=0,d=0;break;case"T":c=b-g>>1,d=0;break;case"TR":c=b-g,d=0;break;case"L":c=0,d=y-w>>1;break;case"C":c=b-g>>1,d=y-w>>1;break;case"R":c=b-g,d=y-w>>1;break;case"BL":c=0,d=y-w;break;case"B":c=b-g>>1,d=y-w;break;case"BR":c=b-g,d=y-w}}}(0!=c||0!=d)&&i.translate(c,d),0!=p&&i.rotate(p*Math.PI/180),(1!=r||1!=a)&&i.scale(r,a),(0!=u||0!=h)&&i.translate(-u,-h)}e.alpha>0&&(i.globalAlpha*=e.alpha)},remove:function(e){var t=e.drawable,n=t&&t.domElement;if(n){var i=n.parentNode;i&&i.removeChild(n)}},clear:function(e,t,n,i){this.context.clearRect(e,t,n,i)},resize:function(e,t){this.canvas.width=e,this.canvas.height=t}}),u=function(){function e(e,t){var i=e.tagName||"div",r=t.image,a=e.width||r&&r.width,o=e.height||r&&r.height,s=n.createElement(i),l=s.style;if(e.id&&(s.id=e.id),l.position="absolute",l.left=(e.left||0)+"px",l.top=(e.top||0)+"px",l.width=a+"px",l.height=o+"px","canvas"==i){if(s.width=a,s.height=o,r){var c=s.getContext("2d"),d=t.rect||[0,0,a,o];c.drawImage(r,d[0],d[1],d[2],d[3],e.x||0,e.y||0,e.width||d[2],e.height||d[3])}}else if(l.opacity=void 0!=e.alpha?e.alpha:1,(e===this.stage||e.clipChildren)&&(l.overflow="hidden"),r&&r.src){l.backgroundImage="url("+r.src+")";var u=e.rectX||0,h=e.rectY||0;l.backgroundPosition=-u+"px "+-h+"px"}return s}return i.create({Extends:c,constructor:function(e){u.superclass.constructor.call(this,e)},startDraw:function(t){var n=t.drawable=t.drawable||new p;return n.domElement=n.domElement||e(t,n),!0},draw:function(e){var t=e.parent,n=e.drawable.domElement,i=n.parentNode;if(t){var r=t.drawable.domElement;r!=i&&r.appendChild(n)}else e!==this.stage||i||(n.style.overflow="hidden",this.canvas.appendChild(n))},transform:function(e){if(n.setElementStyleByView(e),e===this.stage){var t=this.canvas.style,i=e._scaleX,r=e._scaleY;scaleX=e.scaleX,scaleY=e.scaleY,(!i&&1!=scaleX||i&&i!=scaleX)&&(e._scaleX=scaleX,t.width=scaleX*e.width+"px"),(!r&&1!=scaleY||r&&r!=scaleY)&&(e._scaleY=scaleY,t.height=scaleY*e.height+"px")}},remove:function(e){var t=e.drawable,n=t&&t.domElement;if(n){var i=n.parentNode;i&&i.removeChild(n)}},hide:function(e){var t=e.drawable&&e.drawable.domElement;t&&(t.style.display="none")},resize:function(e,t){var n=this.canvas.style;n.width=e+"px",n.height=t+"px","absolute"!=n.position&&(n.position="relative")}})}(),h=i.create({constructor:function(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=a},concat:function(e){var t=arguments,n=this.a,i=this.b,r=this.c,a=this.d,o=this.tx,s=this.ty;if(t.length>=6)var l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];else l=e.a,c=e.b,d=e.c,u=e.d,h=e.tx,p=e.ty;return this.a=n*l+i*d,this.b=n*c+i*u,this.c=r*l+a*d,this.d=r*c+a*u,this.tx=o*l+s*d+h,this.ty=o*c+s*u+p,this},rotate:function(e){var t=Math.sin(e),n=Math.cos(e),i=this.a,r=this.b,a=this.c,o=this.d,s=this.tx,l=this.ty;return this.a=i*n-r*t,this.b=i*t+r*n,this.c=a*n-o*t,this.d=a*t+o*n,this.tx=s*n-l*t,this.ty=s*t+l*n,this},scale:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},translate:function(e,t){return this.tx+=e,this.ty+=t,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*r)/a,this.ty=-(e*this.ty-t*r)/a,this},transformPoint:function(e,t,n){var i=e.x*this.a+e.y*this.c+this.tx,r=e.x*this.b+e.y*this.d+this.ty;return t&&(i=i+.5>>0,r=r+.5>>0),n?{x:i,y:r}:(e.x=i,e.y=r,e)}}),p=i.create({constructor:function(e){this.init(e)},image:null,rect:null,init:function(e){var t=this,i=t.image;p.isDrawable(e)?t.image=e:n.copy(t,e,!0);var r=t.image;if("string"==typeof r){if(!i||r!==i.getAttribute("src")){t.image=null;var a=new Image;return a.onload=function(){a.onload=null,t.init(a)},void(a.src=r)}r=t.image=i}r&&!t.rect&&(t.rect=[0,0,r.width,r.height])},Statics:{isDrawable:function(e){if(!e||!e.tagName)return!1;var t=e.tagName.toLowerCase();return"img"===t||"canvas"===t||"video"===t}}}),f=function(){function e(e,t,n){for(var i,r,a,o,s=0,l=!1,c=0,d=n.length;d>c;c++){var u=n[c],h=n[(c+1)%d];if(u.y==h.y&&t==u.y&&(u.x>h.x?(i=h.x,r=u.x):(i=u.x,r=h.x),e>=i&&r>=e))l=!0;else if(u.y>h.y?(a=h.y,o=u.y):(a=u.y,o=h.y),!(a>t||t>o)){var p=(t-u.y)*(h.x-u.x)/(h.y-u.y)+u.x;if(p>e?s++:p==e&&(l=!0),u.x>e&&u.y==t){var f=n[(d+c-1)%d];(f.y<t&&h.y>t||f.y>t&&h.y<t)&&s++}}}return l||s%2==1}function t(e,t){var n=a(e,t,{overlap:-(1/0),normal:{x:0,y:0}});return n?a(t,e,n):!1}function a(e,t,n){for(var i,r,a,o,s,l,c,d,u,h=e.length,p=t.length,f={x:0,y:0},m=0;h>m;m++){i=e[m],r=e[h-1>m?m+1:0],f.x=i.y-r.y,f.y=r.x-i.x,a=Math.sqrt(f.x*f.x+f.y*f.y),f.x/=a,f.y/=a,o=s=e[0].x*f.x+e[0].y*f.y;for(var v=1;h>v;v++)d=e[v].x*f.x+e[v].y*f.y,d>s?s=d:o>d&&(o=d);for(l=c=t[0].x*f.x+t[0].y*f.y,v=1;p>v;v++)d=t[v].x*f.x+t[v].y*f.y,d>c?c=d:l>d&&(l=d);if(l>o?(u=l-s,f.x=-f.x,f.y=-f.y):u=o-c,u>=0)return!1;u>n.overlap&&(n.overlap=u,n.normal.x=f.x,n.normal.y=f.y)}return n}return i.create({Mixes:r,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("View"),n.copy(this,e,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var e,t=this;e=t.parent;)t=e;return t.canvas?t:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(e,t){return"number"==typeof t?e.addChildAt(this,t):e.addChild(this),this},removeFromParent:function(){var e=this.parent;return e&&e.removeChild(this),this},getBounds:function(){for(var e,t,n,i,r,a,o,s=this.width,l=this.height,c=this.getConcatenatedMatrix(),d=this.boundsArea||[{x:0,y:0},{x:s,y:0},{x:s,y:l},{x:0,y:l}],u=[],h=0,p=d.length;p>h;h++)e=c.transformPoint(d[h],!0,!0),t=e.x,n=e.y,0==h?(i=r=t,a=o=n):(i>t?i=t:t>r&&(r=t),a>n?a=n:n>o&&(o=n)),u[h]=e;return u.x=i,u.y=a,u.width=r-i,u.height=o-a,u},getConcatenatedMatrix:function(e){for(var t=new h(1,0,0,1,0,0),n=this;n!=e&&n.parent;n=n.parent){var i=1,r=0,a=n.rotation%360,o=n.pivotX,s=n.pivotY,l=n.scaleX,c=n.scaleY;if(a){var d=a*Math.PI/180;i=Math.cos(d),r=Math.sin(d)}0!=o&&(t.tx-=o),0!=s&&(t.ty-=s),t.concat(i*l,r*l,-r*c,i*c,n.x,n.y)}return t},hitTestPoint:function(t,n,i){var r=this.getBounds(),a=t>=r.x&&t<=r.x+r.width&&n>=r.y&&n<=r.y+r.height;return a&&i&&(a=e(t,n,r)),a},hitTestObject:function(e,n){var i=this.getBounds(),r=e.getBounds(),a=i.x<=r.x+r.width&&r.x<=i.x+i.width&&i.y<=r.y+r.height&&r.y<=i.y+i.height;return a&&n&&(a=t(i,r)),!!a},_render:function(e,t){this.onUpdate&&this.onUpdate(t)===!1||!e.startDraw(this)||(e.transform(this),this.render(e,t),e.endDraw(this))},_fireMouseEvent:function(e){if(e.eventCurrentTarget=this,this.fire(e),"mousemove"==e.type){if(!this.__mouseOver){this.__mouseOver=!0;var t=n.copy({},e);t.type="mouseover",this.fire(t)}}else"mouseout"==e.type&&(this.__mouseOver=!1);var i=this.parent;e._stopped||e._stopPropagationed||!i||("mouseout"==e.type||"touchout"==e.type?i.hitTestPoint(e.stageX,e.stageY,!0)||i._fireMouseEvent(e):i._fireMouseEvent(e))},onUpdate:null,render:function(e,t){e.draw(this)},toString:function(){return n.viewToString(this)}})}(),m=i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Container"),m.superclass.constructor.call(this,e),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(e,t){var n=this.children,i=n.length,r=e.parent;t=0>t?0:t>i?i:t;var a=this.getChildIndex(e);if(a==t)return this;if(a>=0?(n.splice(a,1),t=t==i?i-1:t):r&&r.removeChild(e),n.splice(t,0,e),0>a)this._updateChildren(t);else{var o=t>a?a:t,s=t>a?t:a;this._updateChildren(o,s+1)}return this},addChild:function(e){for(var t=this.children.length,n=arguments,i=0,r=n.length;r>i;i++)this.addChildAt(n[i],t+i);return this},removeChildAt:function(e){var t=this.children;if(0>e||e>=t.length)return null;var n=t[e];if(n){if(!n.__renderer)for(var i=n;i=i.parent;){if(i.renderer){n.__renderer=i.renderer;break}if(i.__renderer){n.__renderer=i.__renderer;break}}n.__renderer&&n.__renderer.remove(n),n.parent=null,n.depth=-1}return t.splice(e,1),this._updateChildren(e),n},removeChild:function(e){return this.removeChildAt(this.getChildIndex(e))},removeChildById:function(e){for(var t,n=this.children,i=0,r=n.length;r>i;i++)if(t=n[i],t.id===e)return this.removeChildAt(i),t;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(e){var t=this.children;return 0>e||e>=t.length?null:t[e]},getChildById:function(e){for(var t,n=this.children,i=0,r=n.length;r>i;i++)if(t=n[i],t.id===e)return t;return null},getChildIndex:function(e){return this.children.indexOf(e)},setChildIndex:function(e,t){var n=this.children,i=n.indexOf(e);if(i>=0&&i!=t){var r=n.length;t=0>t?0:t>=r?r-1:t,n.splice(i,1),n.splice(t,0,e),this._updateChildren()}return this},swapChildren:function(e,t){var n=this.children,i=this.getChildIndex(e),r=this.getChildIndex(t);e.depth=r,n[r]=e,t.depth=i,n[i]=t},swapChildrenAt:function(e,t){var n=this.children,i=this.getChildAt(e),r=this.getChildAt(t);i.depth=t,n[t]=i,r.depth=e,n[e]=r},sortChildren:function(e){var t=e,n=this.children;if("string"==typeof t){var i=t;t=function(e,t){return t[i]-e[i]}}n.sort(t),this._updateChildren()},_updateChildren:function(e,t){for(var n,i=this.children,e=e||0,t=t||i.length,r=e;t>r;r++)n=i[r],n.depth=r+1,n.parent=this},contains:function(e){for(;e=e.parent;)if(e===this)return!0;return!1},getViewAtPoint:function(e,t,n,i,r){for(var a,o,s=i?[]:null,l=this.children,c=l.length-1;c>=0;c--)if(a=l[c],!(!a||!a.visible||a.alpha<=0||r&&!a.pointerEnabled))if(a.children&&a.children.length&&(!r||a.pointerChildren)&&(o=a.getViewAtPoint(e,t,n,i,r)),o){if(!i)return o;o.length&&(s=s.concat(o))}else if(a.hitTestPoint(e,t,n)){if(!i)return a;s.push(a)}return i&&s.length?s:null},render:function(e,t){m.superclass.render.call(this,e,t);var n,i,r,a=this.children.slice(0);for(n=0,i=a.length;i>n;n++)r=a[n],r.parent===this&&r._render(e,t)}}),v=i.create({Extends:m,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Stage"),v.superclass.constructor.call(this,e),this._initRenderer(e);var t=this.width,i=this.height,r=this.updateViewport();e.width||(t=r&&r.width||320),e.height||(i=r&&r.height||480),this.resize(t,i,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(e){var t=this.canvas;"string"==typeof t&&(t=n.getElement(t));var i=e.container;"string"==typeof i&&(i=n.getElement(i)),t||(t=n.createElement("canvas",{style:{position:"absolute"}})),this.canvas=t,i&&i.appendChild(t);var r=t.getContext,a={canvas:t,stage:this};this.renderer=r?new d(a):new u(a)},addTo:function(e){var t=this.canvas;return t.parentNode!==e&&e.appendChild(t),this},tick:function(e){this.paused||this._render(this.renderer,e)},enableDOMEvent:function(e,t,n){var i=this,r=i.canvas,a="string"==typeof e?[e]:e,t=t!==!1,o=i._domListener||(i._domListener=function(e){i._onDOMEvent(e)});i.canvas.isFixed=n;for(var s=0;s<a.length;s++){var e=a[s];t?r.addEventListener(e,o,!1):r.removeEventListener(e,o)}return document.addEventListener("scroll",function(e){e.preventDefault(),i.isScrollUpdate=!0},!1),i},isScrollUpdate:!1,_onDOMEvent:function(e){var t=e.type,i=e,r=0==t.indexOf("touch"),a=e;if(r){var o=e.touches,s=e.changedTouches;a=o&&o.length?o[0]:s&&s.length?s[0]:null}var l=a.pageX||a.clientX,c=a.pageY||a.clientY,d=!this.isScrollUpdate&&this.viewport||this.updateViewport();this.isScrollUpdate=!1,i.stageX=l=(l-d.left)/this.scaleX,i.stageY=c=(c-d.top)/this.scaleY,i.stopPropagation=function(){this._stopPropagationed=!0};var u=this.getViewAtPoint(l,c,!0,!1,!0)||this,h=this.canvas,p=this._eventTarget,f="mouseout"===t;if(p&&(p!=u&&(!p.contains||!p.contains(u))||f)){var m="touchmove"===t?"touchout":"mousemove"===t||f||!u?"mouseout":null;if(m){var v=n.copy({},i);v.type=m,v.eventTarget=p,p._fireMouseEvent(v)}i.lastEventTarget=p,this._eventTarget=null}if(u&&u.pointerEnabled&&"mouseout"!==t&&(i.eventTarget=this._eventTarget=u,u._fireMouseEvent(i)),!r){var g=u&&u.pointerEnabled&&u.useHandCursor?"pointer":"";h.style.cursor=g}n.browser.android&&"touchmove"===t&&e.preventDefault()},updateViewport:function(){var e=this.canvas,t=null;return e.parentNode&&(t=this.viewport=n.getElementRect(e)),t},resize:function(e,t,n){(n||this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.renderer.resize(e,t),this.updateViewport())}}),g=i.create({Extends:f,constructor:function(e){if(e=e||{},this.id=this.id||e.id||n.getUid("Bitmap"),g.superclass.constructor.call(this,e),this.drawable=new p(e),!this.width||!this.height){var t=this.drawable.rect;t&&(this.width=t[2],this.height=t[3])}},setImage:function(e,t){return this.drawable.init({image:e,rect:t}),t&&(this.width=t[2],this.height=t[3]),this}}),w=i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Sprite"),w.superclass.constructor.call(this,e),this._frames=[],this._frameNames={},this.drawable=new p,e.frames&&this.addFrame(e.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(e,t){var n=null!=t?t:this._frames.length;if(e instanceof Array)for(var i=0,r=e.length;r>i;i++)this.setFrame(e[i],n+i);else this.setFrame(e,n);return this},setFrame:function(e,t){var n=this._frames,i=n.length;return t=0>t?0:t>i?i:t,n[t]=e,e.name&&(this._frameNames[e.name]=e),(0==t&&!this.width||!this.height)&&(this.width=e.rect[2],this.height=e.rect[3]),this},getFrame:function(e){if("number"==typeof e){var t=this._frames;return 0>e||e>=t.length?null:t[e]}return this._frameNames[e]},getFrameIndex:function(e){var t=this._frames,n=t.length,i=-1;if("number"==typeof e)i=e;else{var r="string"==typeof e?this._frameNames[e]:e;if(r)for(var a=0;n>a;a++)if(r===t[a]){i=a;break}}return i},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},"goto":function(e,t){var n=this._frames.length,i=this.getFrameIndex(e);return this.currentFrame=0>i?0:i>=n?n-1:i,this.paused=t,this._firstRender=!0,this},_render:function(e,t){var n,i=this.currentFrame;if(this._firstRender?(n=i,this._firstRender=!1):n=this._nextFrame(t),n!=i){this.currentFrame=n;var r=this._frames[n].callback;r&&r.call(this)}this.onEnterFrame&&this.onEnterFrame(n),this.drawable.init(this._frames[n]),w.superclass._render.call(this,e,t);
},_nextFrame:function(e){var t=this._frames,n=t.length,i=this.currentFrame,r=t[i],a=r.duration||this.interval,o=this._frameElapsed,s=0!=i||this.drawable?o+(this.timeBased?e:1):0;return o=this._frameElapsed=a>s?s:0,(r.stop||!this.loop&&i>=n-1)&&this.stop(),this.paused||0!=o||(null!=r.next?i=this.getFrameIndex(r.next):i>=n-1?i=0:this.drawable&&i++),i},setFrameCallback:function(e,t){return e=this.getFrame(e),e&&(e.callback=t),this},onEnterFrame:null}),b=i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("DOMElement"),b.superclass.constructor.call(this,e),this.drawable=new p;var t=this.drawable.domElement=e.element||n.createElement("div");t.id=this.id},_render:function(e,t){this.onUpdate&&this.onUpdate(t)===!1||(e.transform(this),this.visible&&this.alpha>0&&this.render(e,t))},render:function(e,t){var n=e.canvas;if(n.getContext){var i,r=this.drawable.domElement,a=this.depth,o=n.nextSibling;if(r.parentNode)return;for(;o&&3!=o.nodeType&&(i=parseInt(o.style.zIndex)||0,!(0>=i||i>a));)o=o.nextSibling;n.parentNode.insertBefore(this.drawable.domElement,o)}else e.draw(this)}}),y=function(){var e=document.createElement("canvas"),t=e.getContext&&e.getContext("2d");return i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Graphics"),y.superclass.constructor.call(this,e),this._actions=[],this._cache=null},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(e,t,n,i,r,a){var o=this,s=o._addAction;return s.call(o,["lineWidth",o.lineWidth=e||1]),s.call(o,["strokeStyle",o.strokeStyle=t||"0"]),s.call(o,["lineAlpha",o.lineAlpha=n||1]),void 0!=i&&s.call(o,["lineCap",o.lineCap=i]),void 0!=r&&s.call(o,["lineJoin",o.lineJoin=r]),void 0!=a&&s.call(o,["miterLimit",o.miterLimit=a]),o.hasStroke=!0,o},beginFill:function(e,t){var n=this,i=n._addAction;return i.call(n,["fillStyle",n.fillStyle=e]),i.call(n,["fillAlpha",n.fillAlpha=t||1]),n.hasFill=!0,n},endFill:function(){var e=this,t=e._addAction;return e.hasStroke&&t.call(e,["stroke"]),e.hasFill&&t.call(e,["fill"]),e},beginLinearGradientFill:function(e,n,i,r,a,o){for(var s=this,l=t.createLinearGradient(e,n,i,r),c=0,d=a.length;d>c;c++)l.addColorStop(o[c],a[c]);return s.hasFill=!0,s._addAction(["fillStyle",s.fillStyle=l])},beginRadialGradientFill:function(e,n,i,r,a,o,s,l){for(var c=this,d=t.createRadialGradient(e,n,i,r,a,o),u=0,h=s.length;h>u;u++)d.addColorStop(l[u],s[u]);return c.hasFill=!0,c._addAction(["fillStyle",c.fillStyle=d])},beginBitmapFill:function(e,n){var i=this,r=t.createPattern(e,n||"");return i.hasFill=!0,i._addAction(["fillStyle",i.fillStyle=r])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(e,t){return this._addAction(["moveTo",e,t])},lineTo:function(e,t){return this._addAction(["lineTo",e,t])},quadraticCurveTo:function(e,t,n,i){return this._addAction(["quadraticCurveTo",e,t,n,i])},bezierCurveTo:function(e,t,n,i,r,a){return this._addAction(["bezierCurveTo",e,t,n,i,r,a])},drawRect:function(e,t,n,i){return this._addAction(["rect",e,t,n,i])},drawRoundRectComplex:function(e,t,n,i,r,a,o,s){var l=this,c=l._addAction;return c.call(l,["moveTo",e+r,t]),c.call(l,["lineTo",e+n-a,t]),c.call(l,["arc",e+n-a,t+a,a,-Math.PI/2,0,!1]),c.call(l,["lineTo",e+n,t+i-o]),c.call(l,["arc",e+n-o,t+i-o,o,0,Math.PI/2,!1]),c.call(l,["lineTo",e+s,t+i]),c.call(l,["arc",e+s,t+i-s,s,Math.PI/2,Math.PI,!1]),c.call(l,["lineTo",e,t+r]),c.call(l,["arc",e+r,t+r,r,Math.PI,3*Math.PI/2,!1]),l},drawRoundRect:function(e,t,n,i,r){return this.drawRoundRectComplex(e,t,n,i,r,r,r,r)},drawCircle:function(e,t,n){return this._addAction(["arc",e+n,t+n,n,0,2*Math.PI,0])},drawEllipse:function(e,t,n,i){var r=this;if(n==i)return r.drawCircle(e,t,n);var a=r._addAction,o=n/2,s=i/2,l=.5522847498307933,c=l*o,d=l*s;return e+=o,t+=s,a.call(r,["moveTo",e+o,t]),a.call(r,["bezierCurveTo",e+o,t-d,e+c,t-s,e,t-s]),a.call(r,["bezierCurveTo",e-c,t-s,e-o,t-d,e-o,t]),a.call(r,["bezierCurveTo",e-o,t+d,e-c,t+s,e,t+s]),a.call(r,["bezierCurveTo",e+c,t+s,e+o,t+d,e+o,t]),r},drawSVGPath:function(e){var t=this,n=t._addAction,i=e.split(/,| (?=[a-zA-Z])/);n.call(t,["beginPath"]);for(var r=0,a=i.length;a>r;r++){var o=i[r],s=o[0].toUpperCase(),l=o.substring(1).split(/,| /);switch(0==l[0].length&&l.shift(),s){case"M":n.call(t,["moveTo",l[0],l[1]]);break;case"L":n.call(t,["lineTo",l[0],l[1]]);break;case"C":n.call(t,["bezierCurveTo",l[0],l[1],l[2],l[3],l[4],l[5]]);break;case"Z":n.call(t,["closePath"])}}return t},_draw:function(e){var t,n=this,i=n._actions,r=i.length;for(e.beginPath(),t=0;r>t;t++){var a=i[t],o=a[0],s=a.length>1?a.slice(1):null;"function"==typeof e[o]?e[o].apply(e,s):e[o]=a[1]}},render:function(e,t){var n=this,i=e.canvas;if(i.getContext)n._draw(e.context);else{var r=n.drawable;r.image||(r.image=n.toImage()),e.draw(n)}},cache:function(e){var t=this,i=t._cache;return i||(i=t._cache=n.createElement("canvas",{width:t.width,height:t.height}),t._draw(i.getContext("2d"))),e&&(i=t._cache=t.toImage()),i},uncache:function(){this._cache=null},toImage:function(e){var t=this,i=t._cache,r=t.width,a=t.height;if(i||(i=n.createElement("canvas",{width:r,height:a}),t._draw(i.getContext("2d"))),!(i instanceof HTMLImageElement)){var o=i.toDataURL(e||"image/png");i=new Image,i.src=o,i.width=r,i.height=a}return i},clear:function(){var e=this;return e._actions.length=0,e._cache=null,e.lineWidth=1,e.lineAlpha=1,e.lineCap=null,e.lineJoin=null,e.miterLimit=10,e.hasStroke=!1,e.strokeStyle="0",e.hasFill=!1,e.fillStyle="0",e.fillAlpha=1,e},_addAction:function(e){var t=this;return t._actions.push(e),t}})}(),_=i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Text"),_.superclass.constructor.call(this,e),e.font||(this.font="12px arial"),this._fontHeight=_.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(e){var t=this;return t.font!==e&&(t.font=e,t._fontHeight=_.measureFontHeight(e)),t},render:function(e,t){var n=this,i=e.canvas;if(i.getContext)n._draw(e.context);else{var r=n.drawable,a=r.domElement,o=a.style;o.font=n.font,o.textAlign=n.textAlign,o.color=n.color,o.width=n.width+"px",o.height=n.height+"px",o.lineHeight=n._fontHeight+n.lineSpacing+"px",a.innerHTML=n.text,e.draw(this)}},_draw:function(e){var t=this,n=t.text.toString();if(n){e.font=t.font,e.textAlign=t.textAlign,e.textBaseline="top";var i,r,a,o=n.split(/\r\n|\r|\n|<br(?:[ \/])*>/),s=0,l=0,c=t._fontHeight+t.lineSpacing,d=[];for(i=0,len=o.length;i<len;i++)if(r=o[i],a=e.measureText(r).width,a<=t.maxWidth)d.push({text:r,y:l}),a>s&&(s=a),l+=c;else{var u,h,p,f="",m=0;for(h=0,wlen=r.length;h<wlen;h++)p=r[h],u=e.measureText(f+p).width,u>t.maxWidth?(d.push({text:f,y:l}),m>s&&(s=m),l+=c,f=p):(m=u,f+=p),h==wlen-1&&(d.push({text:f,y:l}),f!==p&&u>s&&(s=u),l+=c)}t.textWidth=s,t.textHeight=l,t.width||(t.width=s),t.height||(t.height=l);var v=0;switch(t.textVAlign){case"middle":v=t.height-t.textHeight>>1;break;case"bottom":v=t.height-t.textHeight}var g=t.background;g&&(e.fillStyle=g,e.fillRect(0,0,t.width,t.height)),t.outline?e.strokeStyle=t.color:e.fillStyle=t.color;for(var i=0;i<d.length;i++){var r=d[i];t._drawTextLine(e,r.text,v+r.y)}}},_drawTextLine:function(e,t,n){var i=this,r=0,a=i.width;switch(i.textAlign){case"center":r=a>>1;break;case"right":case"end":r=a}i.outline?e.strokeText(t,r,n):e.fillText(t,r,n)},Statics:{measureFontHeight:function(e){var t,i=document.documentElement,r=n.createElement("div",{style:{font:e,position:"absolute"},innerHTML:"M"});return i.appendChild(r),t=r.offsetHeight,i.removeChild(r),t}}}),T=i.create({Extends:m,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("BitmapText"),T.superclass.constructor.call(this,e),e.text&&(this.text="",this.setText(e.text)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(e){var t=this,n=e.toString(),i=n.length;if(t.text!=n){t.text=n;var r,a,o,s,l=0,c=0,d=0;for(r=0;i>r;r++)a=n.charAt(r),o=t.glyphs[a],o&&(d=l+(l>0?t.letterSpacing:0),t.children[r]?(s=t.children[r],s.setImage(o.image,o.rect)):(s=t._createBitmap(o),t.addChild(s)),s.x=d,l=d+o.rect[2],c=Math.max(c,o.rect[3]));for(r=t.children.length-1;r>=i;r--)t._releaseBitmap(t.children[r]),t.children[r].removeFromParent();return t.width=l,t.height=c,this.setTextAlign(),t}},_createBitmap:function(e){var t;return T._pool.length?(t=T._pool.pop(),t.setImage(e.image,e.rect)):t=new g({image:e.image,rect:e.rect}),t},_releaseBitmap:function(e){T._pool.push(e)},setTextAlign:function(e){switch(this.textAlign=e||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0}return this},hasGlyphs:function(e){var t=this.glyphs;if(!t)return!1;var n,e=e.toString(),i=e.length;for(n=0;i>n;n++)if(!t[e.charAt(n)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(e,t,n,i){var r=e.toString();n=n||r.length,i=i||1;for(var a=t.width/n,o=t.height/i,s={},l=0,c=e.length;c>l;l++)charStr=r.charAt(l),s[charStr]={image:t,rect:[a*(l%n),o*Math.floor(l/n),a,o]};return s}}}),x=i.create({Extends:f,constructor:function(e){e=e||{},this.id=this.id||e.id||n.getUid("Button"),x.superclass.constructor.call(this,e),this.drawable=new p(e),this.setState(x.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(e){return this.enabled!=e&&(e?this.setState(x.UP):this.setState(x.DISABLED)),this},setState:function(e){if(this.state!==e){this.state=e,this.pointerEnabled=this.enabled=e!==x.DISABLED;var t;switch(e){case x.UP:t=this.upState;break;case x.OVER:t=this.overState;break;case x.DOWN:t=this.downState;break;case x.DISABLED:t=this.disabledState}t&&(this.drawable.init(t),n.copy(this,t,!0))}return this},fire:function(e,t){if(this.enabled){var n="string"==typeof e?e:e.type;switch(n){case"mousedown":case"touchstart":case"touchmove":this.setState(x.DOWN);break;case"mouseover":this.setState(x.OVER);break;case"mouseup":this.overState?this.setState(x.OVER):this.upState&&this.setState(x.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(x.UP)}return x.superclass.fire.call(this,e,t)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}}),X=function(){function e(e){var t=e.frames;if(!t)return null;var n,i=[];if(t instanceof Array)for(var r=0,a=t.length;a>r;r++)n=t[r],i[r]={image:e.image,rect:n};else for(var o=t.frameWidth,s=t.frameHeight,l=e.width/o|0,c=e.height/s|0,d=t.numFrames||l*c,r=0;d>r;r++)i[r]={image:e.image,rect:[r%l*o,(r/l|0)*s,o,s]};return i}function t(e,t){var i=e.sprites;if(!i)return null;var a,o,s,l={};for(var c in i){if(a=i[c],r(a))o=n(t[a]);else if(a instanceof Array){o=[];for(var d=0,u=a.length;u>d;d++){var h,p=a[d];r(p)?s=n(t[p]):(h=p.rect,r(h)&&(h=t[p.rect]),s=n(h,p)),o[d]=s}}else{o=[];for(var d=a.from;d<=a.to;d++)o[d-a.from]=n(t[d],a[d])}l[c]=o}return l}function n(e,t){var n={image:e.image,rect:e.rect};return t&&(n.name=t.name||null,n.duration=t.duration||0,n.stop=!!t.stop,n.next=t.next||null),n}function r(e){return"number"==typeof e}return i.create({constructor:function(n){this._frames=e(n),this._sprites=t(n,this._frames)},_frames:null,_sprites:null,getFrame:function(e){var t=this._frames;return t&&t[e]},getSprite:function(e){var t=this._sprites;return t&&t[e]},Statics:{createSpriteFrames:function(e,t,n,i,r,a,o){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],s=0,l=e.length;l>s;s++)t=t.concat(this.createSpriteFrames.apply(this,e[s]));return t}if("string"==typeof t){var c=t.split(",");t=[];for(var d=0,u=c.length;u>d;d++){var h=c[d].split("-");if(1==h.length)t.push(parseInt(h[0]));else for(var s=parseInt(h[0]),l=parseInt(h[1]);l>=s;s++)t.push(s)}}for(var p=Math.floor(n.width/i),s=0;s<t.length;s++){var f=t[s];t[s]={rect:[i*(f%p),r*Math.floor(f/p),i,r],image:n,duration:o}}return t[0].name=e,a?t[t.length-1].next=e:t[t.length-1].stop=!0,t}}})}(),E=i.create({constructor:function(e){this._targetFPS=e||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(t){if(!this._intervalId){this._lastTime=+new Date;var i=this,r=this._interval,a=e.requestAnimationFrame||e[n.browser.jsVendor+"RequestAnimationFrame"];if(t&&a)var o=function(){i._tick()},s=function(){i._intervalId=setTimeout(s,r),a(o)};else s=function(){i._intervalId=setTimeout(s,r),i._tick()};s()}},stop:function(){clearTimeout(this._intervalId),this._intervalId=null,this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var e=+new Date,t=e-this._lastTime,n=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=e-this._lastTime,this._lastTime=e;for(var i=0,r=n.length;r>i;i++)n[i].tick(t)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(e){if(!e||"function"!=typeof e.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(e)},removeTick:function(e){var t=this._tickers,n=t.indexOf(e);n>=0&&t.splice(n,1)}}),S=Array.prototype,C=S.slice;S.indexOf=S.indexOf||function(e,t){t=t||0;var n,i=this.length;if(0==i||t>=i)return-1;for(0>t&&(t=i+t),n=t;i>n;n++)if(this[n]===e)return n;return-1};var R=Function.prototype;R.bind=R.bind||function(e){function t(){var r=i.concat(C.call(arguments));return n.apply(this instanceof t?this:e,r)}var n=this,i=C.call(arguments,1),r=function(){};return r.prototype=n.prototype,t.prototype=new r,t};var O={startDrag:function(e){function t(e){e.stopPropagation(),a(e),l.off(n.event.POINTER_START,t),l.fire("dragStart",c),l.__dragX=l.x-c.x,l.__dragY=l.y-c.y,s||(s=this.getStage()),s.on(n.event.POINTER_MOVE,r),document.addEventListener(n.event.POINTER_END,i)}function i(e){document.removeEventListener(n.event.POINTER_END,i),s&&s.off(n.event.POINTER_MOVE,r),l.fire("dragEnd",c),l.on(n.event.POINTER_START,t)}function r(e){a(e),l.fire("dragMove",c);var t=c.x+l.__dragX,n=c.y+l.__dragY;l.x=Math.max(d,Math.min(h,t)),l.y=Math.max(u,Math.min(p,n))}function a(e){c.preX=c.x,c.preY=c.y,c.x=e.stageX,c.y=e.stageY}function o(){document.removeEventListener(n.event.POINTER_END,i),s&&s.off(n.event.POINTER_MOVE,r),l.off(n.event.POINTER_START,t)}var s,l=this,e=e||[-(1/0),-(1/0),1/0,1/0],c={x:0,y:0,preX:0,preY:0},d=e[0],u=e[1],h=e[2]==1/0?1/0:d+e[2],p=e[3]==1/0?1/0:u+e[3];l.on(n.event.POINTER_START,t),l.stopDrag=o},stopDrag:function(){}},A=function(){function e(){return+new Date}return i.create({constructor:function(e,t,n,i){var r=this;r.target=e,r._startTime=0,r._seekTime=0,r._pausedTime=0,r._pausedStartTime=0,r._reverseFlag=1,r._repeatCount=0,3==arguments.length&&(i=n,n=t,t=null);for(var a in i)r[a]=i[a];r.setProps(t,n),!i.duration&&i.time&&(r.duration=i.time||0,r.time=0)},target:null,duration:0,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(e,t){var n=this,i=n.target,r=e||t,a=n._fromProps={},o=n._toProps={};e=e||i,t=t||i;for(var s in r)o[s]=t[s]||0,i[s]=a[s]=e[s]||0;return n},start:function(){var t=this;return t._startTime=e()+t.delay,t._seekTime=0,t._pausedTime=0,t.paused=!1,A.add(t),t},stop:function(){return A.remove(this),this},pause:function(){var t=this;return t.paused=!0,t._pausedStartTime=e(),t},resume:function(){var t=this;return t.paused=!1,t._pausedStartTime&&(t._pausedTime+=e()-t._pausedStartTime),t._pausedStartTime=0,t},seek:function(t,n){var i=this,r=e();return i._startTime=r,i._seekTime=t,i._pausedTime=0,void 0!==n&&(i.paused=n),i._update(r,!0),A.add(i),i},link:function(e){var t=this,n=e.delay,i=t._startTime;if("string"==typeof n){var r=0==n.indexOf("+"),a=0==n.indexOf("-");n=r||a?Number(n.substr(1))*(r?1:-1):Number(n)}return e.delay=n,e._startTime=r||a?i+t.duration+n:i+n,t._next=e,A.remove(e),t},_render:function(e){var t,n=this,i=n.target,r=n._fromProps;for(t in r)i[t]=r[t]+(n._toProps[t]-r[t])*e},_update:function(t,n){var i=this;if(!i.paused||n){var r=t-i._startTime-i._pausedTime+i._seekTime;if(!(0>r)){var a,o=r/i.duration,s=!1;o=0>=o?0:o>=1?1:i.ease?i.ease(o):o,i.reverse&&(i._reverseFlag<0&&(o=1-o),1e-7>o&&(i.repeat>0&&i._repeatCount++>=i.repeat||0==i.repeat&&!i.loop?s=!0:(i._startTime=e(),i._reverseFlag*=-1))),0==i.time&&(a=i.onStart)&&a.call(i,i),i.time=r,i._render(o),(a=i.onUpdate)&&a.call(i,o,i),o>=1&&(i.reverse?(i._startTime=e(),i._reverseFlag*=-1):i.loop||i.repeat>0&&i._repeatCount++<i.repeat?i._startTime=e()+i.repeatDelay:s=!0);var l=i._next;if(l&&l.time<=0){var c=l._startTime;c>0&&t>=c?(l._render(o),l.time=r,A.add(l)):s&&(0>c||c>t)&&l.start()}return s?((a=i.onComplete)&&a.call(i,i),!0):void 0}}},Statics:{_tweens:[],tick:function(){var t,n,i=A._tweens,r=i.length;for(n=0;r>n;n++)t=i[n],t&&t._update(e())&&(i.splice(n,1),n--);return A},add:function(e){var t=A._tweens;return-1==t.indexOf(e)&&t.push(e),A},remove:function(e){if(e instanceof Array){for(var t=0,n=e.length;n>t;t++)A.remove(e[t]);return A}var t,i=A._tweens;if(e instanceof A)t=i.indexOf(e),t>-1&&i.splice(t,1);else for(t=0;t<i.length;t++)i[t].target===e&&(i.splice(t,1),t--);return A},removeAll:function(){return A._tweens.length=0,A},fromTo:function(e,t,n,i){var r=e instanceof Array;e=r?e:[e];var a,o,s=i.stagger,l=[];for(o=0;o<e.length;o++)a=new A(e[o],t,n,i),s&&(a.delay=(i.delay||0)+(o*s||0)),a.start(),l.push(a);return r?l:a},to:function(e,t,n){return A.fromTo(e,null,t,n)},from:function(e,t,n){return A.fromTo(e,t,null,n)}}})}(),P=function(){function e(e,t,n,i,r){return e=e||{},t&&(e.EaseIn=t),n&&(e.EaseOut=n),i&&(e.EaseInOut=i),r&&(e.EaseNone=r),e}var t=e(null,null,null,null,function(e){return e}),n=e(null,function(e){return e*e},function(e){return-e*(e-2)},function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}),i=e(null,function(e){return e*e*e},function(e){return--e*e*e+1},function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}),r=e(null,function(e){return e*e*e*e},function(e){return-(--e*e*e*e-1)},function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}),a=e(null,function(e){return e*e*e*e*e},function(e){return(e-=1)*e*e*e*e+1},function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}),o=Math,s=o.PI,l=.5*s,c=o.sin,d=o.cos,u=o.pow,h=o.sqrt,p=e(null,function(e){return-d(e*l)+1},function(e){return c(e*l)},function(e){return-.5*(d(s*e)-1)}),f=e(null,function(e){return 0==e?0:u(2,10*(e-1))},function(e){return 1==e?1:-u(2,-10*e)+1},function(e){return 0==e||1==e?e:(e*=2)<1?.5*u(2,10*(e-1)):.5*(-u(2,-10*(e-1))+2)}),m=e(null,function(e){return-(h(1-e*e)-1)},function(e){return h(1- --e*e)},function(e){return(e/=.5)<1?-.5*(h(1-e*e)-1):.5*(h(1-(e-=2)*e)+1)}),v=e({a:1,p:.4,s:.1,config:function(e,t){v.a=e,v.p=t,v.s=t/(2*s)*Math.asin(1/e)||0}},function(e){return-(v.a*u(2,10*(e-=1))*c((e-v.s)*(2*s)/v.p))},function(e){return v.a*u(2,-10*e)*c((e-v.s)*(2*s)/v.p)+1},function(e){return(e*=2)<1?-.5*(v.a*u(2,10*(e-=1))*c((e-v.s)*(2*s)/v.p)):v.a*u(2,-10*(e-=1))*c((e-v.s)*(2*s)/v.p)*.5+1}),g=e({o:1.70158,s:2.59491,config:function(e){g.o=e,g.s=1.525*e}},function(e){return e*e*((g.o+1)*e-g.o)},function(e){return(e-=1)*e*((g.o+1)*e+g.o)+1},function(e){return(e*=2)<1?.5*(e*e*((g.s+1)*e-g.s)):.5*((e-=2)*e*((g.s+1)*e+g.s)+2)}),w=e(null,function(e){return 1-w.EaseOut(1-e)},function(e){return(e/=1)<.36364?7.5625*e*e:.72727>e?7.5625*(e-=.54545)*e+.75:.90909>e?7.5625*(e-=.81818)*e+.9375:7.5625*(e-=.95455)*e+.984375},function(e){return.5>e?.5*w.EaseIn(2*e):.5*w.EaseOut(2*e-1)+.5});return{Linear:t,Quad:n,Cubic:i,Quart:r,Quint:a,Sine:p,Expo:f,Circ:m,Elastic:v,Back:g,Bounce:w}}(),D=i.create({Mixes:r,constructor:function(e){this._source=[],this.add(e)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(e){var t=this;return e&&(e=e instanceof Array?e:[e],t._source=t._source.concat(e)),t},get:function(e){if(e)for(var t=this._source,n=0;n<t.length;n++){var i=t[n];if(i.id===e||i.src===e)return i}return null},getContent:function(e){var t=this.get(e);return t&&t.content},start:function(){var e=this;return e._loadNext(),e},_loadNext:function(){var e=this,t=e._source,n=t.length;if(e._loaded>=n)return void e.fire("complete");if(e._currentIndex<n-1&&e._connections<e.maxConnections){var i=++e._currentIndex,r=t[i],a=e._getLoader(r);if(a){var o=a.onLoad,s=a.onError;a.onLoad=function(t){a.onLoad=o,a.onError=s;var n=o&&o.call(a,t)||t.target;e._onItemLoad(i,n)},a.onError=function(t){a.onLoad=o,a.onError=s,s&&s.call(a,t),e._onItemError(i,t)},e._connections++}e._loadNext(),a&&a.load(r)}},_getLoader:function(e){var n=e.loader;if(n)return n;var i=e.type||t(e.src);switch(i){case"png":case"jpg":case"jpeg":case"gif":n=new M;break;case"js":case"jsonp":n=new k}return n},_onItemLoad:function(e,t){var n=this,i=n._source[e];i.loaded=!0,i.content=t,n._connections--,n._loaded++,n.fire("load",i),n._loadNext()},_onItemError:function(e,t){var n=this,i=n._source[e];i.error=t,n._connections--,n._loaded++,n.fire("error",i),n._loadNext()},getSize:function(e){for(var t=0,n=this._source,i=0;i<n.length;i++){var r=n[i];t+=(e?r.loaded&&r.size:r.size)||0}return t},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}}),M=i.create({load:function(e){var t=this,n=new Image;n.onload=function(){t.onLoad(n)},n.onerror=n.onabort=t.onError.bind(n),n.src=e.src+(e.noCache?(-1==e.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(t){t=t||e.event;var n=t;return n.onload=n.onerror=n.onabort=null,n},onError:function(e){var t=e.target;return t.onload=t.onerror=t.onabort=null,e}}),k=i.create({load:function(t){var n=this,i=t.src,r="jsonp"==t.type;if(r){var a=t.callbackName||"callback",o=t.callback||"jsonp"+ ++k._count,s=e;s[o]||(s[o]=function(e){delete s[o]})}r&&(i+=(-1==i.indexOf("?")?"?":"&")+a+"="+o),t.noCache&&(i+=(-1==i.indexOf("?")?"?":"&")+"t="+ +new Date);var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.onload=n.onLoad.bind(n),l.onerror=n.onError.bind(n),l.src=i,t.id&&(l.id=t.id),document.getElementsByTagName("head")[0].appendChild(l)},onLoad:function(e){var t=e.target;return t.onload=t.onerror=null,t},onError:function(e){var t=e.target;return t.onload=t.onerror=null,e},Statics:{_count:0}}),I=i.create({Mixes:r,constructor:function(e){n.copy(this,e,!0),this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){var e=this._element=new Audio;e.addEventListener("canplaythrough",this._onAudioEvent,!1),e.addEventListener("ended",this._onAudioEvent,!1),e.addEventListener("error",this._onAudioEvent,!1),e.src=this.src,e.volume=this.volume,e.load()}return this},_onAudioEvent:function(e){var t=e.type;switch(t){case"canplaythrough":e.target.removeEventListener(t,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(e){return this.volume!=e&&(this.volume=e,this._element.volume=e),this},setMute:function(e){return this.muted!=e&&(this.muted=e,this._element.volume=e?0:this.volume),this},Statics:{isSupported:null!==e.Audio}}),N=function(){var t=e.AudioContext||e.webkitAudioContext,a=t?new t:null;return i.create({Mixes:r,constructor:function(e){n.copy(this,e,!0),this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=a,this._gainNode=a.createGain?a.createGain():a.createGainNode(),this._gainNode.connect(a.destination),this._onAudioEvent=this._onAudioEvent.bind(this),this._onDecodeComplete=this._onDecodeComplete.bind(this),this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var e=new XMLHttpRequest;e.src=this.src,e.open("GET",this.src,!0),e.responseType="arraybuffer",e.onload=this._onAudioEvent,e.onprogress=this._onAudioEvent,e.onerror=this._onAudioEvent,e.send(),this._buffer=!0}return this},_onAudioEvent:function(e){var t=e.type;switch(t){case"load":var n=e.target;n.onload=n.onprogress=n.onerror=null,this._context.decodeAudioData(n.response,this._onDecodeComplete,this._onDecodeError),n=null;break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"progress":this.fire(e);break;case"error":this.fire(e)}},_onDecodeComplete:function(e){this._buffer=e,this.loaded=!0,this.duration=e.duration,this.fire("load"),this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var e=this._context.createBufferSource();e.start||(e.start=e.noteOn,e.stop=e.noteOff),e.buffer=this._buffer,e.onended=this._onAudioEvent,this._gainNode.gain.value=this.muted?0:this.volume,e.connect(this._gainNode),e.start(0,this._offset),this._audioNode=e,this._startTime=this._context.currentTime,this.playing=!0},_clearAudioNode:function(){var e=this._audioNode;e&&(e.onended=null,e.disconnect(this._gainNode),this._audioNode=null)},play:function(){return this.playing&&this.stop(),this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1),this},setVolume:function(e){return this.volume!=e&&(this.volume=e,this._gainNode.gain.value=e),this},setMute:function(e){return this.muted!=e&&(this.muted=e,this._gainNode.gain.value=e?0:this.volume),this},Statics:{isSupported:null!=t,enabled:!1,enable:function(){if(!this.enabled&&a){var e=a.createBufferSource();return e.buffer=a.createBuffer(1,1,22050),e.connect(a.destination),e.start?e.start(0,0,0):e.noteOn(0,0,0),this.enabled=!0,!0}return this.enabled}}})}(),L={_audios:{},enableAudio:function(){N.isSupported&&N.enable()},getAudio:function(e){e=this._normalizeSource(e);var t=this._audios[e.src];return t||(N.isSupported?t=new N(e):I.isSupported&&(t=new I(e)),this._audios[e.src]=t),t},removeAudio:function(e){var t="string"==typeof e?e:e.src,n=this._audios[t];n&&(n.stop(),n.off(),this._audios[t]=null,delete this._audios[t])},_normalizeSource:function(e){var t={};return"string"==typeof e?t={src:e}:n.copy(t,e),t}};n.Class=i,n.EventMixin=r,n.Renderer=c,n.CanvasRenderer=d,n.DOMRenderer=u,n.Matrix=h,n.Drawable=p,n.View=f,n.Container=m,n.Stage=v,n.Bitmap=g,n.Sprite=w,n.DOMElement=b,n.Graphics=y,n.Text=_,n.BitmapText=T,n.Button=x,n.TextureAtlas=X,n.Ticker=E,n.drag=O,n.Tween=A,n.Ease=P,n.LoadQueue=D,n.ImageLoader=M,n.ScriptLoader=k,n.HTMLAudio=I,n.WebAudio=N,n.WebSound=L,e.Hilo=n,e.H||(e.H=n)}(window),function(e,t){function n(e){var t;if("number"==typeof e)t=new Date(1e3*e);else if("string"==typeof e){var n=e.charAt(0),i="+"===n,s="-"===n;if(i||s){for(var l,c=e.substr(1),d=c.split(":"),u=[0,0,0,0],h=4;d.length&&--h>=0;)u[h]=parseInt(d.pop())||0;l=r*u[0]+a*u[1]+o*u[2]+u[3],t=new Date,t.setSeconds(t.getSeconds()+l*(s?-1:1)),t.setMilliseconds(0)}}return t||(t=new Date(e)),t}function i(e,t){return t.replace(FORMATTER_REGEXP,function(t){var n=t.length,i=t.charAt(0);if("\\"===i)return t.replace("\\","");var r=("d"===i?e.days:"h"===i?e.hours:"m"===i?e.minutes:"s"===i?e.seconds:0)+"";return("00000"+r).substr(-Math.max(r.length,n))})}var r=86400,a=3600,o=60,s="dhhmmss";FORMATTER_REGEXP=/(\\)?(dd*|hh?|mm?|ss?)/gi;var l=function(e){e=e||{};var t=this,i=n(e.endDate);if(!i||!i.getTime())throw new Error("Invalid endDate");t.endDate=i,t.onUpdate=e.onUpdate,t.onEnd=e.onEnd,t.interval=e.interval||1e3,t.stringFormatter=e.stringFormatter||s,t.correctDateOffset=e.correctDateOffset||0,t.updateElement=e.updateElement,t._data={days:0,hours:0,minutes:0,seconds:0}};l.prototype={start:function(){var e=this;return e.stop(),e._update()&&(e._intervalId=setInterval(function(){e._update()},e.interval)),e},_update:function(){var e,t=this,n=t._data,s=t.updateElement,l=+new Date+1e3*t.correctDateOffset,c=Math.max(0,Math.round((t.endDate.getTime()-l)/1e3)),d=0>=c;return n.totalSeconds=c,c-=(n.days=Math.floor(c/r))*r,c-=(n.hours=Math.floor(c/a))*a,c-=(n.minutes=Math.floor(c/o))*o,n.seconds=c,n.stringValue=i(n,t.stringFormatter),s&&(s.innerHTML=n.stringValue),(e=t.onUpdate)&&e.call(t,n),d?(t.stop(),(e=t.onEnd)&&e.call(t),!1):!0},stop:function(){var e=this;return e._intervalId&&(clearInterval(e._intervalId),e._intervalId=null),e},setEndDate:function(e){var t=this;return t.endDate=n(e),t}},t.countdown=function(e){return new l(e)}}(window,window.lib||(window.lib={})),function(e,t,n){function i(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,r,a,o;return r=2147483648&e,a=2147483648&t,n=1073741824&e,i=1073741824&t,o=(1073741823&e)+(1073741823&t),n&i?2147483648^o^r^a:n|i?1073741824&o?3221225472^o^r^a:1073741824^o^r^a:o^r^a}function i(e,t,n){return e&t|~e&n}function r(e,t,n){return e&n|t&~n}function a(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function s(e,r,a,o,s,l,c){return e=n(e,n(n(i(r,a,o),s),c)),n(t(e,l),r)}function l(e,i,a,o,s,l,c){return e=n(e,n(n(r(i,a,o),s),c)),n(t(e,l),i)}function c(e,i,r,o,s,l,c){return e=n(e,n(n(a(i,r,o),s),c)),n(t(e,l),i)}function d(e,i,r,a,s,l,c){return e=n(e,n(n(o(i,r,a),s),c)),n(t(e,l),i)}function u(e){for(var t,n=e.length,i=n+8,r=(i-i%64)/64,a=16*(r+1),o=new Array(a-1),s=0,l=0;n>l;)t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|128<<s,o[a-2]=n<<3,o[a-1]=n>>>29,o}function h(e){var t,n,i="",r="";for(n=0;3>=n;n++)t=e>>>8*n&255,r="0"+t.toString(16),i+=r.substr(r.length-2,2);return i}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var f,m,v,g,w,b,y,_,T,x=[],X=7,E=12,S=17,C=22,R=5,O=9,A=14,P=20,D=4,M=11,k=16,I=23,N=6,L=10,F=15,B=21;for(e=p(e),x=u(e),b=1732584193,y=4023233417,_=2562383102,T=271733878,f=0;f<x.length;f+=16)m=b,v=y,g=_,w=T,b=s(b,y,_,T,x[f+0],X,3614090360),T=s(T,b,y,_,x[f+1],E,3905402710),_=s(_,T,b,y,x[f+2],S,606105819),y=s(y,_,T,b,x[f+3],C,3250441966),b=s(b,y,_,T,x[f+4],X,4118548399),T=s(T,b,y,_,x[f+5],E,1200080426),_=s(_,T,b,y,x[f+6],S,2821735955),y=s(y,_,T,b,x[f+7],C,4249261313),b=s(b,y,_,T,x[f+8],X,1770035416),T=s(T,b,y,_,x[f+9],E,2336552879),_=s(_,T,b,y,x[f+10],S,4294925233),y=s(y,_,T,b,x[f+11],C,2304563134),b=s(b,y,_,T,x[f+12],X,1804603682),T=s(T,b,y,_,x[f+13],E,4254626195),_=s(_,T,b,y,x[f+14],S,2792965006),y=s(y,_,T,b,x[f+15],C,1236535329),b=l(b,y,_,T,x[f+1],R,4129170786),T=l(T,b,y,_,x[f+6],O,3225465664),_=l(_,T,b,y,x[f+11],A,643717713),y=l(y,_,T,b,x[f+0],P,3921069994),b=l(b,y,_,T,x[f+5],R,3593408605),T=l(T,b,y,_,x[f+10],O,38016083),_=l(_,T,b,y,x[f+15],A,3634488961),y=l(y,_,T,b,x[f+4],P,3889429448),b=l(b,y,_,T,x[f+9],R,568446438),T=l(T,b,y,_,x[f+14],O,3275163606),_=l(_,T,b,y,x[f+3],A,4107603335),y=l(y,_,T,b,x[f+8],P,1163531501),b=l(b,y,_,T,x[f+13],R,2850285829),
T=l(T,b,y,_,x[f+2],O,4243563512),_=l(_,T,b,y,x[f+7],A,1735328473),y=l(y,_,T,b,x[f+12],P,2368359562),b=c(b,y,_,T,x[f+5],D,4294588738),T=c(T,b,y,_,x[f+8],M,2272392833),_=c(_,T,b,y,x[f+11],k,1839030562),y=c(y,_,T,b,x[f+14],I,4259657740),b=c(b,y,_,T,x[f+1],D,2763975236),T=c(T,b,y,_,x[f+4],M,1272893353),_=c(_,T,b,y,x[f+7],k,4139469664),y=c(y,_,T,b,x[f+10],I,3200236656),b=c(b,y,_,T,x[f+13],D,681279174),T=c(T,b,y,_,x[f+0],M,3936430074),_=c(_,T,b,y,x[f+3],k,3572445317),y=c(y,_,T,b,x[f+6],I,76029189),b=c(b,y,_,T,x[f+9],D,3654602809),T=c(T,b,y,_,x[f+12],M,3873151461),_=c(_,T,b,y,x[f+15],k,530742520),y=c(y,_,T,b,x[f+2],I,3299628645),b=d(b,y,_,T,x[f+0],N,4096336452),T=d(T,b,y,_,x[f+7],L,1126891415),_=d(_,T,b,y,x[f+14],F,2878612391),y=d(y,_,T,b,x[f+5],B,4237533241),b=d(b,y,_,T,x[f+12],N,1700485571),T=d(T,b,y,_,x[f+3],L,2399980690),_=d(_,T,b,y,x[f+10],F,4293915773),y=d(y,_,T,b,x[f+1],B,2240044497),b=d(b,y,_,T,x[f+8],N,1873313359),T=d(T,b,y,_,x[f+15],L,4264355552),_=d(_,T,b,y,x[f+6],F,2734768916),y=d(y,_,T,b,x[f+13],B,1309151649),b=d(b,y,_,T,x[f+4],N,4149444226),T=d(T,b,y,_,x[f+11],L,3174756917),_=d(_,T,b,y,x[f+2],F,718787259),y=d(y,_,T,b,x[f+9],B,3951481745),b=n(b,m),y=n(y,v),_=n(_,g),T=n(T,w);var H=h(b)+h(y)+h(_)+h(T);return H.toLowerCase()}function r(e){var t=S.getElementsByTagName("head")[0]||S.getElementsByTagName("body")[0]||S.firstElementChild||S;t.appendChild(e)}function a(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(S.cookie);return t?t[1]:n}function o(e){var t=new Date;t.setTime(t.getTime()-864e5);var n="/";S.cookie=e+"=;path="+n+";domain=."+B.mainDomain+";expires="+t.toGMTString(),S.cookie=e+"=;path="+n+";domain=."+B.subDomain+"."+B.mainDomain+";expires="+t.toGMTString()}function s(){var e=S.getElementById("J_app_key");return e?e.value:"waptest"===B.subDomain?"4272":"12574478"}function l(t){function n(e){e=e?e.split("_")[0]:"",t(e)}B.useAlipayJSBridge===!0&&!G&&q&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",function(e){n(e&&e.token?e.token:a(U))},function(){n(a(U))}):n(a(U))}function c(){o(U),o(Y)}function d(e,t,n){l(function(r){var a=i(r+"&"+t+"&"+s()+"&"+e);n(a)})}function u(e,t){function n(t){for(var n=0;n<t.length;){var i=t[n];i.match(/^[^=]+$/)?e[i]?t[n++]+="="+encodeURIComponent(e[i]):t.splice(n,1):n++}}var i=b(e.api),r="//"+(i?i+".":"")+(B.prefix?B.prefix+".":"")+(B.subDomain?B.subDomain+".":"")+B.mainDomain+"/h5/"+e.api.toLowerCase()+"/"+e.v.toLowerCase()+"/",a=(new Date).getTime(),o=["v","api","ttid","sprefer","appKey="+s(),"t="+a],l=["data","ua"];e.isRequestJsonpByGet?(o.push("callback=jsonpCallback"),o.push("type=jsonp")):(e.isRequestJsonByGet||e.isRequestJsonByPost)&&o.push("type=originaljson"),d(e.data,a,function(e){o.push("sign="+e),n(o),n(l),t({path:r,querystring:o.join("&"),postdata:l.join("&")})})}function h(e,t,i){function a(e){if(l&&clearTimeout(l),c.parentNode&&c.parentNode.removeChild(c),"TIMEOUT"===e)window[s]=function(){window[s]=n;try{delete window[s]}catch(e){}};else{window[s]=n;try{delete window[s]}catch(t){}}}var o=i.timeout||2e4,s="mtopjsonp"+V++,l=setTimeout(function(){a("TIMEOUT"),t({ret:["TIMEOUT"]})},o),c=S.createElement("script");c.src=(e.path+"?"+e.querystring+"&"+e.postdata).replace("callback=jsonpCallback","callback="+s),c.sync=!0,c.onerror=function(){a("ABORT"),t({ret:["ABORT"]})},window[s]=function(){a(),t.apply(this,arguments)},r(c)}function p(t,n,i){function r(e){s&&clearTimeout(s),"TIMEOUT"===e&&a.abort()}var a=new e.XMLHttpRequest,o=i.timeout||2e4,s=setTimeout(function(){r("TIMEOUT"),n({ret:["TIMEOUT"]})},o);a.onreadystatechange=function(){if(4==a.readyState){var e,t,i,o=a.status;if(o>=200&&300>o||304==o){e=a.responseText,t=a.getAllResponseHeaders()||"";try{e=W.test(e)?null:JSON.parse(e)}catch(s){i=s}i?n({ret:["PARSERERROR"],error:i,responseHeaders:t}):(e.responseHeaders=t,n(e))}else n({ret:["ABORT"]});r()}};var l,c=t.path+"?"+t.querystring;if(i.isRequestJsonByGet?c+="&"+t.postdata:i.isRequestJsonByPost&&(l=t.postdata),a.open(i.type.toUpperCase(),c,!0),a.withCredentials=!0,a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.headers)for(var d in i.headers)a.setRequestHeader(d,i.headers[d]);a.send(l)}function f(e,t,n){n.isRequestJsonByPost||n.isRequestJsonByGet?p(e,t,n):n.isRequestJsonpByGet&&h(e,t,n)}function m(e,n){var i=JSON.parse(n.data||"{}"),r=n.api,a=n.v,o=parseInt("post"===n.type?1:0),s=parseInt(n.ecode||0),l=parseInt(n.isSec||0),c=parseInt(n.timer||3e3),d=parseInt(n.timeout);t.windvane.call("MtopWVPlugin","send",{api:r,v:a,post:o,ecode:s,isSec:l,param:i,timer:c},e,e,d)}function v(e,t){J.push([e,t]),g()}function g(){if(J.length&&!z){z=!0;var e=J.shift(),t=e[0],n=e[1];u(n,function(e){f(e,t,n)})}}function w(e,n,i,r){function a(t){var a=t&&t.ret||[];a instanceof Array&&(a=a.join(","));var l=arguments.callee;a.indexOf("SUCCESS")>-1?(t.retType=H.SUCCESS,n&&n(t,t.retType),r&&r.resolve(t,t.retType),z&&e.H5Request&&(z=!1,g())):a.indexOf("TOKEN_EMPTY")>-1||a.indexOf("TOKEN_EXOIRED")>-1?e.H5Request&&++o<s?u(e,function(t){f(t,l,e)}):(s>0&&c(),t.retType=H.TOKEN_EXPIRED,i&&i(t,t.retType),r&&r.reject(t,t.retType),z&&e.H5Request&&(z=!1,g())):a.indexOf("SESSION_EXPIRED")>-1||a.indexOf("SID_INVALID")>-1||a.indexOf("AUTH_REJECT")>-1||a.indexOf("NEED_LOGIN")>-1?(t.retType=H.SESSION_EXPIRED,i&&i(t,t.retType),r&&r.reject(t,t.retType),z&&e.H5Request&&(z=!1,g())):e.WindVaneRequest&&(!a||a.indexOf("HY_FAILED")>-1||a.indexOf("HY_NO_HANDLER")>-1||a.indexOf("HY_CLOSED")>-1||a.indexOf("HY_EXCEPTION")>-1||a.indexOf("HY_NO_PERMISSION")>-1)?(B.H5Request=!0,e.H5Request=!0,e.WindVaneRequest=!1,u(e,function(t){f(t,l,e)})):(t.retType=H.ERROR,i&&i(t,t.retType),r&&r.reject(t,t.retType),z&&e.H5Request&&(z=!1,g()))}var o=0,s=null!=e.maxRetryTimes?e.maxRetryTimes:5;return t.mtop.middleware?function(n){var i=t.mtop.middleware.pipe(e,n);i.on("reset",function(){var e=this;u(e.request,function(t){f(t,function(t){e.response=t,e.next()},e.request)})}),i.on("end",function(){a(this.response)}),i.next()}:a}function b(e){var t=!1;if(K){var n=a("_m_user_unitinfo_"),i=K.getItem("unitinfo");return n&&n.split("|")[0].indexOf("center")<0&&i&&i.indexOf(e.toLowerCase())>=0&&(t=n.split("|")[1]),t}}function y(){function t(){s||(s=!0,c.onload=c.onerror=null,c.parentNode&&c.parentNode.removeChild(c))}if(K){var n=a("_m_unitapi_v_"),i=K.getItem("unitinfo");if(n){var o=i?JSON.parse(i):{};if(!i||n!==o.version){var s=!1,l="//h5."+B.subDomain+".taobao.com/js/mtop/unit/"+n+"/unitApi.js",c=document.createElement("script");c.src=l,c.onerror=function(){t()},e.jsonp_unitapi||(e.jsonp_unitapi=function(e){t(),K.setItem("unitinfo",JSON.stringify(e))}),r(c)}}}}function _(e,n,i){if(e.v=e.v||"*",e.data=e.data||"{}",e.timeout=e.timeout||2e4,e.type=(e.type||"get").toLowerCase(),e.dataType=e.dataType||"jsonp","get"===e.type&&"jsonp"===e.dataType?e.isRequestJsonpByGet=!0:"get"===e.type&&"json"===e.dataType?e.isRequestJsonByGet=!0:"post"===e.type&&(e.dataType="json",e.isRequestJsonByPost=!0),"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),B.H5Request===!1&&e.WindVaneRequest===!0){if(!(t.windvane&&parseFloat(O)>=5.4))throw new Error("WindVane SDKMtopPlugin SDKlib.windvane");e.WindVaneRequest=!0}else B.H5Request===!0||e.H5Request===!0?e.H5Request=!0:null==e.WindVaneRequest&&(B.H5Request===!1&&t.windvane&&parseFloat(O)>=5.4?e.WindVaneRequest=!0:e.H5Request=!0);if(e.H5Request=!!e.H5Request,e.WindVaneRequest=!!e.WindVaneRequest,e.LoginRequest&&e.WindVaneRequest&&(e.LoginRequest=!1),B.LoginRequest===!0||e.LoginRequest===!0){if(!t.login)throw new Error("lib.login");if(!t.mtop.middleware)throw new Error("lib.mtopmiddleware.js");e.WindVaneRequest}if(B.AntiCreep===!0||e.AntiCreep===!0){if(!t.mtop.middleware)throw new Error("lib.mtopmiddleware.js");e.AntiCreep=!0}if(B.AntiFlood===!0||e.AntiFlood===!0){if(!t.mtop.middleware)throw new Error("lib.mtopmiddleware.js");e.AntiFlood=!0}var r,a=t.promise;a&&a.defer&&(r=a.defer());var o=w(e,n,i||n,r);return e.WindVaneRequest?m(o,e):e.H5Request&&v(o,e),K&&y(),r&&r.promise}function T(e,t,n){return e.H5Request=!0,_(e,t,n)}function x(e,n,i){return e.LoginRequest=!0,t.mtop.request(e,n,i)}function X(e,n,i){return e.AntiCreep=!0,t.mtop.request(e,n,i)}function E(e,n,i){return e.AntiFlood=!0,t.mtop.request(e,n,i)}var S=e.document,C=e.navigator.userAgent,R=e.location.hostname,O=C.match(/WindVane[\/\s]([\d\.\_]+)/);O&&(O=O[1]);var A,P,D=C.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);D&&(A=D[1],P=D[2]);var M=["taobao.net","taobao.com","tmall.com","tmall.hk","etao.com","alibaba.com","alibaba-inc.com","alipay.com","aliyun.com","tdd.la"],k=new RegExp("([^.]*?)\\.?((?:"+M.join(")|(?:").replace(/\./g,"\\.")+"))","i"),I=R.match(k)||[],N=function(){var e=I[2]||"taobao.com";return e}(),L=function(){var e=N,t=I[1]||"m";return"taobao.net"!==e||"x"!==t&&"waptest"!==t&&"daily"!==t?"taobao.net"===e&&"demo"===t?t="demo":"tmall.com"===e&&"www"===t?t="m":"tdd.la"===e&&"m"===t&&(t=""):t="waptest",t}(),F="etao.com"===N?"apie":"api";t.mtop=t.mtop||{};var B={prefix:F,mainDomain:N,subDomain:L,useAlipayJSBridge:!1,H5Request:!("TB"===A||"TM"===A),LoginRequest:!1,AntiCreep:!1,AntiFlood:!1};t.mtop.config=B;var H={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};t.mtop.RESPONSE_TYPE=H;var U="_m_h5_tk",Y="_m_h5_tk_enc",j=C.match(/AliApp\(AP\/([\d\.]+)\)/),G=!!location.protocol.match(/^https?\:$/),q=j&&parseFloat(j[1])>=8.2,V=1,W=/^\s*$/,J=[],z=!1,K=e.localStorage;if(K)try{K.setItem("@private","false")}catch(Q){K=!1}t.mtop.request=_,t.mtop.H5Request=T,t.mtop.loginRequest=x,t.mtop.antiCreepRequest=X,t.mtop.antiFloodRequest=E}(window,window.lib123||(window.lib123={})),function(e){var t={$:function(e){return document.getElementById(e)},addClass:function(e,t){var n=e.className.split(" ");-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" "))},removeClass:function(e,t){var n=e.className.split(" "),i=n.indexOf(t);-1!=i&&(n.splice(i,1),e.className=n.join(" "))},hasClass:function(e,t){var n=e.className.split(" "),i=n.indexOf(t);return i>-1},getUrlParam:function(e){var t=new RegExp("[?|&]"+e+"=([^&]+)"),n=location.search.match(t);return n&&n[1]},template:function(e,t){function n(e){if(!e)return"";var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return(""+e).replace(/[&<>"']/g,function(e){return t[e]})}var i,r={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},a=/'|\\|\r|\n|\t|\u2028|\u2029/g,o=/<%-([\s\S]+?)%>|<%=([\s\S]+?)%>|<%([\s\S]+?)%>|$/g,s=0,l="__p+='";e.replace(o,function(t,i,o,c,d){return l+=e.slice(s,d).replace(a,function(e){return"\\"+r[e]}),i&&(l+="'+\n((__t=("+i+"))==null?'':"+n.name+"(__t))+\n'"),o&&(l+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),c&&(l+="';\n"+c+"\n__p+='"),s=d+t.length,t}),l+="';\n",l="with(obj||{}){\n"+l+"}\n",l=n.toString()+"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{i=new Function("obj",l)}catch(c){throw c.source=l,c}if(t)return i(t);var d=function(e){return i(e)};return d.source="function(obj){\n"+l+"}",d},browser:function(){var e=navigator.userAgent,t={webkit:/webkit/i.test(e),firefox:/firefox/i.test(e),ie:/msie/i.test(e),opera:/opera/i.test(e)},n=t.jsVendor=t.webkit?"webkit":t.firefox?"Moz":t.opera?"O":t.ie?"ms":"",i=t.cssVendor="-"+n+"-",r=document,a=r.documentElement,o=r.createElement("div"),s=o.style,l=void 0!=s[n+"Transform"],c=void 0!=s[n+"Perspective"];return c&&(o.id="test3d",s=r.createElement("style"),s.textContent="@media ("+i+"transform-3d){#test3d{height:3px}}",r.head.appendChild(s),a.appendChild(o),c=3==o.offsetHeight,r.head.removeChild(s),a.removeChild(o)),t.supportTransform=l,t.supportTransform3D=c,t}(),createTransformCSS:function(e,t){t=utils.browser.supportTransform3D&&(void 0===t||1==t);var n=t?"3d":"",i=e.x||0,r=e.y||0,a=e.pivotX||0,o=e.pivotY||0,s=e.rotation||0,l=e.scaleX||e.scale||1,c=e.scaleY||e.scale||1;return"translate"+n+"("+(i-a)+"px, "+(r-o)+(t?"px, 0px)":"px)")+"rotate"+n+(t?"(0, 0, 1, ":"(")+s+"deg)scale"+n+"("+l+", "+c+(t?", 1)":")")},fireHTMLEvent:function(e,t,n,i){var r=document.createEvent("HTMLEvents");r.initEvent(t,!1,!1),r.data=n,r.eventTarget=i||e,e.dispatchEvent(r)},mix:function(e,t){for(var n in t)e[n]=t[n]},log:function(e,t,n){"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log},onclick:function(e,t){var n=this;e.addEventListener("click",function(i){function r(){a||(a=!0,n.onclick(e,t))}i.preventDefault(),e.removeEventListener("click",arguments.callee);var a=!1;t&&t(i,r)},!1)}};e.Utils=t}(window.app||(window.app={})),function(e){var t,n=["#ffffff","#ffff00","#56c7ed","#ee0a3b","#845af9"],i=Hilo.Class.create({Extends:Hilo.View,constructor:function(e){e=e||{},i.superclass.constructor.call(this,e),this.init(e)},init:function(e){t=e.assets,this.rainLines=[],this.numOfRainLines=e.numOfRainLines||50,this.speedOfRain=e.speedOfRain||[3,8],this.rainAngle=e.rainAngle||20,this.rainTan=Math.tan(this.rainAngle*Math.PI/180),this.paused=!0},start:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},render:function(e,t){var n=this,i=e.context,r=+new Date,t=r-n.lastTime,a=n.rainLines;if(n.paused&&a.length)return void(a.length=0);if(a.length<n.numOfRainLines){var o=n.setRandomRainLine({});a.push(o)}for(var s=0;s<a.length;s++){var o=a[s];o.x<-o.width||o.y>n.height?n.setRandomRainLine(o):o.delay>0?o.delay-=t:(o.x-=o.speedX,o.y+=o.speedY,n.drawRainLine(i,o))}},drawRainLine:function(e,t){e.beginPath(),e.moveTo(t.x+t.size,t.y),e.lineTo(t.x+(1-this.rainTan)*t.size,t.y+t.size),e.globalAlpha=t.alpha,e.lineWidth=t.thickness,e.lineCap="square",e.strokeStyle=t.color,e.stroke(),e.closePath()},setRandomRainLine:function(e){return e.color=n[Math.floor(Math.random()*n.length)],e.size=200*Math.random()+50>>0,e.x=50+Math.random()*this.width*1.2>>0,e.y=-e.size-100*Math.random()>>0,e.alpha=.5*Math.random()+.5,e.speedX=Math.random()*(this.speedOfRain[1]-this.speedOfRain[0])+this.speedOfRain[0]>>0,e.speedY=3*e.speedX,e.thickness=4*Math.random()+1>>0,e.delay=2e3*Math.random()>>0,e}});e.Rain=i}(window.app||(window.app={})),function(e){var t=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){e=e||{},t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=e.assets,n=e.stage,i=t.getContent("wave1"),r=n.width/i.width*.8,a=new Hilo.Bitmap({image:i,scaleX:r,scaleY:r,x:0,y:n.height-i.height*r+50}),i=t.getContent("wave2"),o=new Hilo.Bitmap({image:i,scaleX:r,scaleY:r,x:230*r,y:n.height-i.height*r+60}),i=t.getContent("ship"),s=new Hilo.Bitmap({image:i,scaleX:r,scaleY:r,x:540*r,y:o.y-i.height*r+15});this.addChild(o,a,s),Hilo.Tween.to(a,{y:a.y+10},{duration:2e3,ease:Hilo.Ease.Quad.EaseOut,reverse:!0,loop:!0}),Hilo.Tween.to(o,{y:o.y-10},{duration:2e3,ease:Hilo.Ease.Quad.EaseOut,reverse:!0,loop:!0,delay:300}),Hilo.Tween.to(s,{y:s.y+5},{duration:2e3,ease:Hilo.Ease.Quad.EaseOut,reverse:!0,loop:!0,delay:800})}});e.Wave=t}(window.app||(window.app={})),function(e){var t,n=!1,i=6,r=[5,6,7,8,9,10],a=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){e=e||{},a.superclass.constructor.call(this,e),this.init(e)},init:function(a){var o=this;t=a.assets,n=e.currentGameData.special,i=e.currentGameData.specialno||6;for(var s=0;6-i>s;s++)r.splice(Math.floor(Math.random()*r.length),1);o.redEnvelopes=[],o.numOfRedEnvelopes=a.numOfRedEnvelopes,o.speedOfRedEnvelope=a.speedOfRedEnvelope,o.angle=a.angle,o.paused=!0;var l=t.getContent("bubble");o.bubble=new Hilo.Sprite({frames:Hilo.TextureAtlas.createSpriteFrames("bubble","0-2",l,200,200,!1,4),pivotX:100,pivotY:100,visible:!1,onEnterFrame:function(e){this.visible&&this.toHide?(this.visible=!1,this.toHide=!1):this.visible&&e>=this.getNumFrames()-1&&(this.toHide=!0)}}).addTo(o)},start:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},onUpdate:function(e){var t=this.redEnvelopes;if(this.paused&&t.length)return t.length=0,void this.removeAllChildren();if(t.length<this.numOfRedEnvelopes){var n=this.makeRandomRedEnvelop();n.id="redEnvelope-"+t.length,n.addTo(this),t.push(n)}for(var i=0;i<t.length;i++){var n=t[i];n.opening||(n.x<-n.width||n.y>this.height?this.setRandomRedEnvelope(n):n.delay>0?n.delay-=e:(n.x-=n.speedX,n.y+=n.speedY))}},makeRandomRedEnvelop:function(){var e=new Hilo.Bitmap({image:t.getContent("redEnvelope"),rotation:this.angle});return this.setRandomRedEnvelope(e),e},setRandomRedEnvelope:function(e){var i=0;n&&(i=r[Math.floor(Math.random()*r.length)]);var a=n?"coin"+i:"redEnvelope",o=t.getContent(a);e.setImage(o),e.width=o.width,e.height=o.height,n?e.scaleX=e.scaleY=.01*Math.floor(25*Math.random())+.3:e.scaleX=e.scaleY=.01*Math.floor(20*Math.random())+.3,e.x=this.width/4+Math.random()*this.width*.9>>0,e.y=-e.height-100*Math.random()>>0,e.speedX=.7*(Math.random()*(this.speedOfRedEnvelope[1]-this.speedOfRedEnvelope[0])+this.speedOfRedEnvelope[0]),e.speedY=3*e.speedX,e.delay=2e3*Math.random()>>0,e.visible=!0,e.hitted=!1,e.type=i},openRedEnvelope:function(i,r){var a,o,s,l,c,d=this,u=Number(r.type)||0;n&&u!==e.RedEnvelope.TYPE.NONE||(i.visible=!1);var h=scaleY=.6;if(u===e.RedEnvelope.TYPE.NONE)return s="",l="#fff",c=new Hilo.Text({text:s,font:"bold 40px arial",textAlign:"center",color:l,maxWidth:300,width:300,height:50,pivotX:150,scaleX:h,scaleY:scaleY,x:i.x,y:i.y}).addTo(d),void Hilo.Tween.to(c,{y:c.y-150,alpha:.2},{duration:600,onComplete:function(){d.removeChild(c)}});u===e.RedEnvelope.TYPE.CASH?(s="+"+r.amount,l="#fedf46",n?(i.opening=!0,a=t.getContent("glow"),o=new Hilo.Bitmap({image:a,scaleX:h,scaleY:scaleY,pivotX:a.width>>1,pivotY:a.height>>1,x:i.x+.5*(i.getScaledWidth()-20),y:i.y+.5*(i.getScaledHeight()+20)}).addTo(this,0)):(a=t.getContent("coin"),o=new Hilo.Sprite({frames:Hilo.TextureAtlas.createSpriteFrames("coin","0-3",a,140,140,!0,4),pivotX:70,pivotY:70,scaleX:h,scaleY:scaleY,x:i.x,y:i.y}).addTo(this))):u===e.RedEnvelope.TYPE.COUPON&&(s="+"+r.amount,l="#f47f9e",a=t.getContent("coupon"),o=new Hilo.Bitmap({image:a,pivotX:75,pivotY:46,scaleX:h,scaleY:scaleY,x:i.x,y:i.y}).addTo(this)),c=new Hilo.Text({text:s,font:"bold 40px arial",textAlign:"center",color:l,maxWidth:300,width:300,height:50,scaleX:h,scaleY:scaleY,pivotX:150,x:o.x,y:n?i.y-40:o.y-o.pivotY-20}).addTo(d);var p=o.y-i.y;n&&Hilo.Tween.to(o,{rotation:360},{duration:3e3,loop:!0}),Hilo.Tween.to(o,{y:o.y-150,alpha:.2},{duration:600,delay:500,onUpdate:function(e){c.y=n?i.y-40:o.y-o.pivotY-20,n&&(i.y=o.y-p)},onComplete:function(){d.removeChild(o),d.removeChild(c),n&&(i.visible=!1,i.opening=!1)}})},showBubble:function(e){var t=this,n=t.bubble;n.visible=!0,n.x=e.x,n.y=e.y,n.scaleX=n.scaleY=2*e.scaleX,n["goto"](0),e.visible=!1}});e.RedEnvelope=a,e.RedEnvelope.TYPE={NONE:0,CASH:1,COUPON:8}}(window.app||(window.app={})),function(e){function t(e){return e.preventDefault(),!1}var n,i,r=window.Promise,a=e.Utils,o=a.$,s=a.template,l=(a.addClass,a.removeClass,a.hasClass,{reactDelay:"600",pcsore:"1,3",modelsWhite:[{name:"SM-N9008"},{name:"SM-N9100"},{name:"GT-I9500"},{name:"SM-G9006V"},{name:"SM-G9250"},{name:"Mi-4c"},{name:"MI 4C"},{name:"MI 1S"},{name:"Redmi Note 2"},{name:"R7007"},{name:"OPPO R7"},{name:"vivo X3t"},{name:"vivo X5M"},{name:"vivo X710L"},{name:"m2"},{name:"Coolpad 8297"},{name:"N918St"},{name:"GN9000"},{name:"M811"},{name:"ASUS_T00J"},{name:"iPhone5,1"},{name:"iPhone5,2"},{name:"iPhone5,3"},{name:"iPhone5,4"},{name:"iPhone6,1"},{name:"iPhone6,2"},{name:"iPhone7,1"},{name:"iPhone7,2"},{name:"iPhone8,1"},{name:"iPhone8,2"}],ename:{pc:"ea310e56c8",wl:"9a4b02e749"},models:[{name:"iPhone3,1"},{name:"iPhone3,2"},{name:"iPhone3,3"},{name:"iPhone4,1"}],winbigtip:"",dura:"600",delay:"3,9",sore:"2,5",wintip:"6",gameData:[{disableIPAD:!1,sbtip:"",specialno:"",sbpctitle:"",sbmobiletitle:"",disablePC:!1,disableMobile:!1,sbipadtitle:"",sbimagetip:"",sbbigtip:"",time:"1447034400000",sb:!1,special:""},{disableIPAD:!1,sbtip:"",specialno:"",sbpctitle:"",sbmobiletitle:"",disablePC:!1,disableMobile:!1,sbipadtitle:"",sbimagetip:"",sbbigtip:"",time:"1447048800000",sb:!1,special:""},{disableIPAD:!1,sbtip:"11",specialno:"1",sbpctitle:"",sbmobiletitle:"",disablePC:!1,disableMobile:!1,sbipadtitle:"",sbimagetip:"",sbbigtip:"",time:"1447120800000",sb:!1,special:!0},{disableIPAD:!1,sbtip:"",specialno:"",sbpctitle:"",sbmobiletitle:"",disablePC:!1,disableMobile:!1,sbipadtitle:"",sbimagetip:"",sbbigtip:"",time:"1447135200000",sb:!1,special:""},{disableIPAD:!1,sbtip:"5",specialno:"",sbpctitle:"//gw.alicdn.com/tfscom/TB1WYmNKpXXXXc1XXXXJmxD2VXX-432-246.png",sbmobiletitle:"//gw.alicdn.com/tfscom/TB1rEuvKpXXXXcLXFXXCTFvLVXX-709-405.png",disablePC:!1,disableMobile:!1,sbipadtitle:"//gw.alicdn.com/tfscom/TB1ywuhKpXXXXaLaXXXaMduVFXX-627-358.png",sbimagetip:"//gw.alicdn.com/tfscom/TB1M61tKpXXXXaXXVXXmw87WFXX-546-63.png",sbbigtip:"",time:"1447221600000",sb:!0,special:""},{disableIPAD:!1,sbtip:"5",specialno:"",sbpctitle:"//gw.alicdn.com/tfscom/TB1WYmNKpXXXXc1XXXXJmxD2VXX-432-246.png",sbmobiletitle:"//gw.alicdn.com/tfscom/TB1rEuvKpXXXXcLXFXXCTFvLVXX-709-405.png",disablePC:!1,disableMobile:!1,sbipadtitle:"//gw.alicdn.com/tfscom/TB1ywuhKpXXXXaLaXXXaMduVFXX-627-358.png",sbimagetip:"//gw.alicdn.com/tfscom/TB1OvqAKpXXXXa0XFXXmw87WFXX-546-63.png",sbbigtip:"",time:"1447228800000",sb:!0,special:""},{disableIPAD:!1,sbtip:"5",specialno:"",sbpctitle:"//gw.alicdn.com/tfscom/TB1WYmNKpXXXXc1XXXXJmxD2VXX-432-246.png",sbmobiletitle:"//gw.alicdn.com/tfscom/TB1rEuvKpXXXXcLXFXXCTFvLVXX-709-405.png",disablePC:!1,disableMobile:!1,sbipadtitle:"//gw.alicdn.com/tfscom/TB1ywuhKpXXXXaLaXXXaMduVFXX-627-358.png",sbimagetip:"//gw.alicdn.com/tfscom/TB1abikKpXXXXcMXVXXmw87WFXX-546-63.png",sbbigtip:"",time:"1447236000000",sb:!0,special:""},{disableIPAD:!0,sbtip:"5",specialno:"",sbpctitle:"//gw.alicdn.com/tfscom/TB1WYmNKpXXXXc1XXXXJmxD2VXX-432-246.png",sbmobiletitle:"//gw.alicdn.com/tfscom/TB1rEuvKpXXXXcLXFXXCTFvLVXX-709-405.png",disablePC:!0,disableMobile:!1,sbipadtitle:"//gw.alicdn.com/tfscom/TB1ywuhKpXXXXaLaXXXaMduVFXX-627-358.png",sbimagetip:"//gw.alicdn.com/tfscom/TB11rWFKpXXXXc3XpXXmw87WFXX-546-63.png",sbbigtip:"",time:"1447243200000",sb:!0,special:""}],nore:"8",time:"60",sorl:"3,8",iswhitelist:!0,prob:"0.2",norl:"5"}),c={goldlog:function(t){var n=e.isTaobao?"taobao":"tmall";window.goldlog&&window.goldlog.record&&window.goldlog.record("/tmwlact.2.51","","client="+n+"&state="+t,"H46807174")},loadGameConfig:function(e){function t(){i.isloaded||(i.isloaded=!0,clearTimeout(r),window.GAME_CONFIG=window.GAME_CONFIG||l,e(window.GAME_CONFIG))}var n="//gw.alicdn.com/L1/584/983693/c250d148bd.js?r="+Math.random(),i=document.createElement("script");i.isloaded=!1,i.onload=function(e){t()},i.onerror=function(e){t()},i.onreadystatechange=function(e){var t=i.readyState;"loaded"===t||"complete"===t?i.onload():""===t&&i.onerror()};var r=setTimeout(function(){i.onerror()},3e3);i.src=n,document.body.appendChild(i)},resultBox:function(e,t,n){var i=this,r=(i.S,o("game-result"));r.style.display="block",r.innerHTML=s(o("result-tmpl").innerHTML)(e);var l=r.getElementsByClassName("modal-wrapper")[0],c=l.clientWidth,d=l.clientHeight,u=(window.innerWidth-c)/2,h=(window.innerHeight-d)/2;l.style.left=u+"px",l.style.top=h+"px";var p=l.getElementsByClassName("modal-close")[0];t.hideClose?p.style.display="none":a.onclick(p,function(){n&&n({id:"close"})});var f=l.getElementsByClassName("modal-bottom")[0];a.onclick(f,function(e,t){var i=e.target||e.srcElement;"A"===i.tagName.toUpperCase()&&(t(),n&&n({text:i.textContent,id:i.getAttribute("id")}))})},configure:function(t){var n=this.config,i=window.GAME_CONFIG;e.Utils.log("Default Config:",n),e.Utils.log("Game Config:",i),e.Utils.log("Runtime Config:",t);for(var r in t)i[r]=t[r];if(i.delay){var a=i.delay.split(",");n.delay[0]=Number(a[0]),n.delay[1]=Number(a[1])}if(i.prob&&(n.prob=Number(i.prob),n.defaultProb=Number(i.prob)),i.reactDelay&&(n.reactDelay=Number(i.reactDelay)),i.nore&&(n.numOfRedEnvelopes=Number(i.nore)),i.pcsore){var o=i.pcsore.split(",");n.speedOfRedEnvelope[0]=Number(o[0]),n.speedOfRedEnvelope[1]=Number(o[1])}if(i.time&&(n.time=Number(i.time)),i.dura&&(n.dura=Number(i.dura)),i.norl&&(n.numOfRainLines=Number(i.norl)),i.sorl){var s=i.sorl.split(",");n.speedOfRain[0]=Number(s[0]),n.speedOfRain[1]=Number(s[1])}i.ename&&(n.ename=i.ename),i.wintip&&(n.wintip=i.wintip),i.winbigtip&&(n.winbigtip=i.winbigtip),this.gameData=i.gameData},initUA:function(e){var t=this,n=t.S;if(window.UA_Opt)e&&e();else{var i=window.UA_Opt=new Object;i.SendMethod=8,i.LogVal="ua",window[i.LogVal]="",i.Token=(new Date).getTime()+":"+Math.random(),i.MaxMCLog=5,i.MaxKSLog=5,i.MaxMPLog=5,i.MaxTCLog=5,i.MaxFocusLog=5,i.Flag=1670350,n.getScript("//uaction.alicdn.com/js/uab.js",{success:function(){if("undefined"==typeof window.acjs){var t=document.createElement("script");t.src="//acjs.aliyun.com/js/uab.js",document.body.appendChild(t)}e&&e()}})}},getUA:function(){try{var t=window.UA_Opt,n=window[t.LogVal];return t.Token=(new Date).getTime()+":"+Math.random(),t.reload&&t.reload(),n}catch(i){e.console.log("ua:"+i)}},wait:function(){return new r(function(e,t){var n={api:"mtop.taobao.aplatform.get",v:"1.0",data:{bizType:"hongbaoyu.panduan"}};lib123.mtop.request(n,function(n){var i=n&&n.ret&&n.ret[0],r=n&&n.data;i&&i.indexOf("SUCCESS")>-1&&r?e(r&&"true"===r.isSuccess?!0:{errorMsg:r.errorMsg,errorCode:parseInt(r.errorCode||(""===r.errorMsg?1:2)||2)}):t()},function(e){t()})})},init:function(t){e.goldlog("display");var n=this,i=n.S;i.DOM.addStyleSheet("#rer-layer,#rer-tip{left:0;z-index:900000}#game-stage,#rer-layer{width:100%;height:100%;-webkit-user-select:none}#game-timer,#rer-tip{color:#fff;position:absolute}#game-close,#game-stage,#game-timer,#rer-tip{position:absolute}#rer-tip{top:-80px;width:100%;height:80px;font-size:24px;text-align:center;line-height:80px;background-color:#2c0834}#rer-tip p{display:block;font-size:14px;color:#eee;position:relative;top:-52px}#rer-layer{position:fixed;top:0;background-color:rgba(44,8,52,.9)}#rer-layer .hide{display:none}#game-stage canvas{cursor:pointer}#game-timer{font-size:18px;top:10px;left:10px;padding:4px;pointer-events:none}#game-timer span{position:relative;top:2px;font-size:24px;color:#f7ba00}#game-close{top:0;right:120px;width:40px;height:40px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP1JREFUeNq0180KAiEQB3CpU48UeO0lhGBPgW8TdOrNeoAg2Fv3wkYYo8SPmXEU/gdH8Le47LCaEIKBOMgVssf5jBwhK+QOOaRCGi98CG30FP7HGouXrKiN5+gXtojNwEtoHMvv+WvjNdTH9fzla+FNNIe18C5agkdxElqDpTgZbcFcnIX2YCrORilwDxehVLiFi1AOXMNFKBfu4Z6z18bwxg6yLdTfkCdrJ4WOJOpwo6i4vY72XifFNXqvCDdKvZeN11Av+GRYuBbKxjVRFq6NkvEZKAnPf+i10B5uDV4pZqAt/BwXbhPRGu7STSLiDzz2WZc2ixfDJc4/AgwA09NRY/NOsB4AAAAASUVORK5CYII=) 50% 50% no-repeat;background-size:15px 15px;cursor:pointer;z-index:11}.modal-layer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;text-align:center}.modal-wrapper{position:absolute;width:440px;top:50%;left:50%;text-align:center;overflow:hidden}.modal-top{width:100%;height:25px;background:url(//gw.alicdn.com/tfscom/TB1cd4zJFXXXXaDXVXX7pGgHpXX-53-20.png) 20px 50% no-repeat #c00024}.modal-content{width:100%;padding-top:20px}.modal-bottom{height:50px;padding:15px;margin-top:15px;background-color:#fff}.modal-close{position:absolute;width:25px;height:25px;top:0;right:5px;background:url(//gw.alicdn.com/tfscom/TB1MSnQKXXXXXb_XpXXawywFXXX-15-15.png) center center no-repeat;cursor:pointer}.modal-layer .btn{display:block;width:200px;height:50px;line-height:50px;font-size:18px;font-weight:700;text-decoration:none;border-radius:3px;text-align:center;float:left;cursor:pointer}.modal-layer .btn-red{color:#fff;background-color:#ee0a3b}.modal-layer .btn-yellow{color:#802b01;background-color:#ffd321;float:right}.modal-layer .btn-big{width:240px;margin:0 auto;float:none}.modal-layer #prize-title{font-size:36px;color:#000;font-weight:700}.modal-layer #prize-content{font-size:20px;color:#000;margin-top:9px}.modal-layer #prize-content .sbimagetip{margin-top:10px;text-align:center;height:40px}.modal-layer #prize-content .sbimagetip img{height:100%}#prize-pic{margin:20px auto}.modal-layer #prize-tip{font-size:14px;color:#000;line-height:1.5em;box-sizing:border-box;padding:0 25px}.modal-wrapper.prize-type-0{background-image:url(//gw.alicdn.com/tfscom/TB16zrJKXXXXXbtXFXX3VF55VXX-440-415.jpg);background-repeat:no-repeat;background-position:center top;background-color:#eff4fe}.modal-wrapper.prize-type-1,.modal-wrapper.prize-type-2,.modal-wrapper.prize-type-3{background-image:url(//gw.alicdn.com/tfscom/TB1w1fIKXXXXXarXFXXL9NW5VXX-440-345.jpg);background-repeat:no-repeat;background-position:center top;background-color:#ee0f3a}.modal-wrapper.prize-type-1 #prize-content,.modal-wrapper.prize-type-1 #prize-title,.modal-wrapper.prize-type-2 #prize-content,.modal-wrapper.prize-type-2 #prize-title,.modal-wrapper.prize-type-3 #prize-content,.modal-wrapper.prize-type-3 #prize-title{color:#ffd70d}.modal-wrapper.prize-type-3 #prize-content ul{width:363px;min-height:172px;padding:0;margin:0 auto;list-style:none}.modal-wrapper.prize-type-3 #prize-content ul li{padding:0 0 0 115px;margin:0;list-style:none;height:68px;line-height:68px;border-bottom:1px solid #f56528;background-position:53px center;background-repeat:no-repeat;font-size:20px;font-weight:700;text-align:left}.modal-wrapper.prize-type-3 #prize-content ul li.cash-item{background-image:url(//gw.alicdn.com/tfscom/TB1m06ZKXXXXXcEXXXXvzZJGFXX-43-50.png)}.modal-wrapper.prize-type-3 #prize-content ul li.coupon-item{background-image:url(//gw.alicdn.com/tfscom/TB1qkLSKXXXXXbbXpXXkuZTGVXX-46-57.png)}.modal-wrapper.prize-type-1 #prize-content b,.modal-wrapper.prize-type-2 #prize-content b,.modal-wrapper.prize-type-3 #prize-content b{font-size:28px;color:#ffd80d;font-weight:700;padding:0 3px}.modal-wrapper.prize-type-0 #prize-pic{margin:0 auto;width:213px;height:184px;background:url(//gw.alicdn.com/tfscom/TB1DDLBKXXXXXawXVXXWFXC0XXX-213-184.png) no-repeat}.modal-wrapper.prize-type-1 #prize-pic{width:159px;height:159px;background:url(//gw.alicdn.com/tfscom/TB1aiTQKXXXXXbHXpXXkAddQXXX-159-159.png) no-repeat}.modal-wrapper.prize-type-2 #prize-pic{width:175px;height:102px;background:url(//gw.alicdn.com/tfscom/TB1m67bKXXXXXXxaXXXIvpgWXXX-175-102.png) no-repeat}.modal-wrapper.prize-type-0 #prize-tip b{color:#f40031}.modal-wrapper.prize-type-1 #prize-tip,.modal-wrapper.prize-type-2 #prize-tip,.modal-wrapper.prize-type-3 #prize-tip{color:#FFF}.modal-wrapper.prize-type-0 .modal-bottom{margin-top:0;background:0 0}#game-waiting{display:none;width:100%;height:100%;position:absolute;left:0;top:0;z-index:900009;background:rgba(0,0,0,.8)}#game-waiting .box{width:197px;position:absolute;top:50%;left:-95px;margin-left:50%}#game-waiting .box .bg{width:197px;height:197px;background:url(//gw.alicdn.com/tfscom/TB1O2wxJVXXXXbkXVXXPYdSZVXX-394-394.png) no-repeat;background-size:contain}#game-waiting .box .text1{padding:24px 0 6px;font-size:16px;color:#FFF;text-align:center}#game-waiting .box .text1 span{font-size:16px;color:#FFF;margin-left:5px;position:absolute}#game-waiting .box .text2{padding:6px 0 24px;font-size:14px;color:#FFF;text-align:center}#game-waiting .box .action{text-align:center}#game-waiting .box .action a{display:inline-block;background:0 0;border:1px solid #FFF;border-radius:4px;padding:2px 10px;height:28px;line-height:28px;text-align:center;font-size:16px;color:#FFF}#game-upgrade{display:none;position:fixed;top:0;left:0;z-index:900009;width:100%;height:100%}#game-upgrade .dialog{display:block;width:440px;height:440px;position:absolute;top:50%;left:50%;margin-top:-220px;margin-left:-220px;background:url(//gw.alicdn.com/tfscom/TB1YjbWKXXXXXX8XpXXsYl95VXX-440-440.jpg) no-repeat}#game-upgrade .close{display:block;position:absolute;width:25px;height:25px;right:5px;top:0;cursor:pointer}#game-upgrade .upgrade{display:block;position:absolute;width:240px;height:50px;left:100px;top:360px;cursor:pointer}#game-goto-index{display:none;position:fixed;top:0;left:0;z-index:900009;width:100%;height:100%;background-color:rgba(0,0,0,.5)}#game-goto-index .dialog{display:block;width:440px;height:440px;position:absolute;top:50%;left:50%;margin-top:-220px;margin-left:-220px;background-repeat:no-repeat;background-position:0 0}#game-goto-index.TB-PD .dialog{background-image:url(//gw.alicdn.com/tfscom/TB133RBKpXXXXX_XpXXsYl95VXX-440-440.jpg)}#game-goto-index.TM-PD .dialog{background-image:url(//gw.alicdn.com/tfscom/TB1Hh0gKpXXXXc_XVXXsYl95VXX-440-440.jpg)}#game-goto-index .close{display:block;position:absolute;width:25px;height:25px;right:5px;top:0;cursor:pointer}#game-goto-index .goto{display:block;position:absolute;width:240px;height:50px;left:100px;top:380px;cursor:pointer}"),lib.env.aliapp&&lib.env.aliapp.appname&&(n.isTBPD="TB-PD"===lib.env.aliapp.appname.toUpperCase(),n.isTMPD="TM-PD"===lib.env.aliapp.appname.toUpperCase()),lib.env.os.isIPhone||lib.env.os.isAndroid||lib.env.os.isWindowsPhone||6!==i.UA.ie&&7!==i.UA.ie&&setTimeout(function(){n._init(t)},5e3*Math.random())},_init:function(e){var t=this,n=t.S;t.runtimeConfig=e,t.config={delay:[3,9],rainAngle:15,numOfRainLines:30,speedOfRain:[3,8],numOfRedEnvelopes:10,speedOfRedEnvelope:[2,5],prob:.2,time:60,dura:900},t.isTaobao?t.initTaobao():t.isTmall&&t.initTmall(),t.canPlay=!(n.UA.ie<9||!Hilo.browser.supportCanvas),t.initUA(function(){t.loadGameConfig(function(){t.configure(e),t.getServerTime(function(e){var n=t.checkTime(e);if("number"==typeof n)if(t.isTMPD||t.isTBPD)try{Hilo.browser.supportStorage&&"1"!==window.localStorage.getItem("rer-1111-gotoindx-"+t.currentGameData.time)&&(window.localStorage.setItem("rer-1111-gotoindx-"+t.currentGameData.time,"1"),t.showGotoIndex())}catch(i){}else if(t.canPlay)t.checkLogin();else try{Hilo.browser.supportStorage&&"1"!==window.localStorage.getItem("rer-1111-upgrade-"+t.currentGameData.time)&&(window.localStorage.setItem("rer-1111-upgrade-"+t.currentGameData.time,"1"),t.showUpgradeTip())}catch(i){}})})})},initTmall:function(e){lib123.mtop.config.prefix="20151111",lib123.mtop.config.subDomain="m"},initTaobao:function(e){window.location.hostname;lib123.mtop.config.prefix="1111",lib123.mtop.config.subDomain="m"},checkLogin:function(){this.isTaobao?this.checkLoginTaobao():this.isTmall&&this.checkLoginTmall()},checkLoginTaobao:function(){var e=this,t=e.S;return e.isLogin?void e.startup():void t.use("kg/mini-login/6.1.0/",function(t,n){var i=n({});i.check(function(t,n){e.isLogin=!!n,e.startup()})})},checkLoginTmall:function(){var e=this;e.S;return e.isLogin?void e.startup():void TB.Global.loginStatusReady(function(t){e.isLogin=t.isLogin,e.startup()})},goLogin:function(e){this.isTaobao?this.goLoginTaobao(e):this.isTmall&&this.goLoginTmall(e)},goLoginTmall:function(e){var t=this,n=t.S;n.use("mui/minilogin",function(n,i){i.show(function(){t.isLogin=!0,e(!0)})})},goLoginTaobao:function(e){var t=this,n=t.S;n.use("kg/mini-login/6.1.0/",function(n,i){var r=i({});r.show(),r.on("login",function(n){t.isLogin=!0,e(!0)})})},getServerTime:function(e){var t=this;t.serverTimeOffset=0,window.serverTimeCallback=function(t){window.serverTimeCallback=void 0;var n=t.time;e(n)},t.S.getScript("//t.alicdn.com/t/gettime?callback=serverTimeCallback&r="+Math.random())},diffGameTime:function(t){t&&(this.serverTimeOffset=Math.round(t-.001*+new Date)),e.Utils.log("serverTime:",t,this.serverTimeOffset);for(var n,i,r=0;r<this.gameData.length;r++){var a=this.gameData[r];if(!a.disablePC){var o=.001*Number(a.time);if(i=t-o,i>=0&&i<=this.config.dura){n=a;break}}}return e.Utils.log("Data:",n,i),{curretData:n,delta:i,index:r}},checkTime:function(e){var t=this.diffGameTime(e),n=t.curretData,i=t.delta,r=t.index;if(n){if(this.currentGameIndex=r,this.currentGameData=n,Hilo.browser.supportStorage){var a=localStorage.getItem("rer1111-"+this.currentGameData.time);if("1"===a)return}return i}},getNextGameTip:function(){for(var e,t=this,n=t.currentGameIndex+1;(e=t.gameData[n++])&&e.disablePC;);var i="";if(e){var r=new Date;r.setTime(t.currentGameData.time);var a=new Date;a.setTime(e.time);var o=a.getDate()>r.getDate();a=a.getHours()+":"+("0"+a.getMinutes()).substr(-2),i=""+(o?"":"")+"<b>"+a+"</b>"}return i},startup:function(){var e='<div id="game-stage"></div><div id="game-timer" class="hide"></div><div id="game-result" class="modal-layer hide"></div><div id="game-close"></div><div id="game-waiting"><div class="box"><div class="bg"></div><div class="text1">~<span></span></div><div class="action"><a class="close"></a></div></div></div><div id="game-upgrade"><div class="dialog"><a class="close" onclick="app.hideUpgradeTip();return false;"></a><a href="http://www.uc.cn/" target="_blank" class="upgrade"></a></div></div><script id="result-tmpl" type="text/tmpl"><div class="modal-wrapper prize-type-<%=type%>"><div class="modal-top"></div><div class="modal-content"><div id="prize-title"><%=title%></div><div id="prize-content"><%=content%></div><% if (type == 0) { %><div id="prize-tip"><%=tip%></div><% } %><div id="prize-pic"></div><% if (type > 0) { %><div id="prize-tip"><%=tip%></div><% } %></div><div class="modal-bottom"><% if (type > 0) { %><a id="btn-kqb" class="btn btn-yellow"></a><a id="btn-huichang" class="btn btn-red"></a><% } else { %><a id="btn-cancel" class="btn btn-red btn-big"></a><% } %></div><div class="modal-close"></div></div></script>',t=Hilo.createElement("div",{id:"rer-layer",innerHTML:e});document.body.appendChild(t),o("game-close").addEventListener("click",this.close.bind(this)),this.loadAssets()},showTip:function(e){var t=this.S,n=t.DOM,i=t.get("#rer-tip");i||(i=n.create("<div></div>"),n.attr(i,"id","rer-tip"),n.html(i,e),n.appendTo(i,document.body)),t.Anim(i,{top:"0"},.2).run(),setTimeout(function(){t.Anim(i,{top:"-80px"},.3,"easeOut",function(){n.remove(i)}).run()},5e3)},showGotoIndex:function(){var e=this.S,t=e.DOM,n=t.get("#game-goto-index");n||(n=t.create("<div></div>"),t.attr(n,"id","game-goto-index"),t.attr(n,"class",this.isTBPD?"TB-PD":"TM-PD"),t.html(n,'<div class="dialog"><a class="close" onclick="window.app.hideGotoIndex(false);return false;"></a><a class="goto" onclick="window.app.hideGotoIndex(true);return false;"></a></div>'),t.appendTo(n,document.body)),n.style.display="block"},hideGotoIndex:function(e){var t=this.S,n=t.DOM,i=n.get("#game-goto-index");i&&(i.style.display="none"),e&&this.isTBPD&&(location.href="http://app.taobaohd.com/home")},showUpgradeTip:function(){var e=this.S,t=e.DOM,n=t.get("#game-upgrade");n||(n=t.create("<div></div>"),t.attr(n,"id","game-upgrade"),t.html(n,'<div class="dialog"><a class="close" onclick="window.app.hideUpgradeTip();return false;"></a><a href="http://www.uc.cn/" target="_blank" class="upgrade"></a></div>'),t.appendTo(n,document.body)),n.style.display="block"},hideUpgradeTip:function(){var e=this.S,t=e.DOM,n=t.get("#game-upgrade");n&&(n.style.display="none")},showTimeTip:function(e){var t=Math.floor(e/60),n=e-60*t,i=""+(t>0?t+"":n+"")+"";this.showTip(i)},loadAssets:function(){var e=this,n="//gw.alicdn.com/tfscom/TB18JKvKpXXXXcCXFXXJmxD2VXX-432-246.png";e.currentGameData.sb&&(n=e.currentGameData.sbpctitle);var i=[{
id:"wave1",src:"//gw.alicdn.com/tfscom/TB1R_COJFXXXXcOXVXXKZiDZVXX-850-151.png"},{id:"wave2",src:"//gw.alicdn.com/tfscom/TB1tUHfJFXXXXaqXXXXGdkDJXXX-782-233.png"},{id:"ship",src:"//gw.alicdn.com/tfscom/TB1WeSRJFXXXXX8XVXXz9p09VXX-100-67.png"},{id:"redEnvelope",src:"//gw.alicdn.com/bao/uploaded/TB1RPYOKXXXXXbMXVXXXXXXXXXX-185-210.png"},{id:"star",src:"//gw.alicdn.com/tfscom/TB159pVJFXXXXbuXXXXqV0yFFXX-910-583.png"},{id:"lightning1",src:"//gw.alicdn.com/tfscom/TB1_lRQJFXXXXX2XpXXT9JuWFXX-283-436.png"},{id:"lightning2",src:"//gw.alicdn.com/tfscom/TB1hkNPJFXXXXapXpXXskuGQFXX-693-506.png"},{id:"bubble",src:"//gw.alicdn.com/mt/TB12m_.KXXXXXXmXpXXXXXXXXXX-600-200.png"},{id:"coin",src:"//gw.alicdn.com/tfscom/TB1.ju3JFXXXXbwXpXXH4PE.FXX-560-140.png"},{id:"coupon",src:"//gw.alicdn.com/tfscom/TB16ei7JFXXXXXDXpXX5DV.FVXX-150-93.png"},{id:"login",src:"//gw.alicdn.com/tfscom/TB1ipK8JFXXXXXYXVXXbgABUXXX-172-171.png"},{id:"title",src:n}];e.currentGameData.special&&i.push({id:"coin5",src:"//gw.alicdn.com/tfscom/TB17J6IJFXXXXcpXXXX07tlTXXX-200-200.png"},{id:"coin6",src:"//gw.alicdn.com/tfscom/TB1DUjzJFXXXXcrXpXX07tlTXXX-200-200.png"},{id:"coin7",src:"//gw.alicdn.com/tfscom/TB1DkPlJFXXXXa0XVXX07tlTXXX-200-200.png"},{id:"coin8",src:"//gw.alicdn.com/tfscom/TB1HP_FJFXXXXXjXpXX07tlTXXX-200-200.png"},{id:"coin9",src:"//gw.alicdn.com/tfscom/TB1skzuJFXXXXazXFXX07tlTXXX-200-200.png"},{id:"coin10",src:"//gw.alicdn.com/tfscom/TB1vtfqJFXXXXcMXFXX07tlTXXX-200-200.png"},{id:"glow",src:"//gw.alicdn.com/tfscom/TB1OWbuJFXXXXaPXFXX1EEJ4FXX-298-298.png"});var r=e.loader=new Hilo.LoadQueue(i).on("complete",function(){e.initStage()});r.maxConnections=5,r.start(),document.addEventListener("mousewheel",t)},initStage:function(){var e=this;n=window.innerWidth,i=window.innerHeight;var t=1190>n?990:1190,r=i,a=e.container=o("game-stage"),s=Hilo.createElement("canvas",{style:{position:"absolute",left:(n-t>>1)+"px"}});a.appendChild(s),a.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var l=1,c=e.stage=new Hilo.Stage({canvas:s,width:t/l,height:r/l,scaleX:l,scaleY:l});e.POINTER_START="mousedown",c.enableDOMEvent([e.POINTER_START],!0);var d=e.ticker=new Hilo.Ticker(60);d.addTick(c),d.addTick(Hilo.Tween),d.start(),e.initScene()},initScene:function(){var t=this,n=t.stage,i=t.wave=new e.Wave({assets:t.loader,stage:n,width:n.width,height:n.height,pointerEnabled:!1}),r=t.rain=new e.Rain({assets:t.loader,stage:n,width:n.width,height:n.height,pointerEnabled:!1,numOfRainLines:t.config.numOfRainLines,speedOfRain:t.config.speedOfRain,rainAngle:t.config.rainAngle}).start(),a=t.loader.getContent("star"),o=t.star=new Hilo.Bitmap({image:a,x:n.width-a.width>>1,y:40,pointerEnabled:!1});n.addChild(o,i,r),t.showStartup()},tagShown:function(e){Hilo.browser.supportStorage&&localStorage.setItem("rer1111-"+this.currentGameData.time,"1"),e&&e()},close:function(){this.ticker&&this.ticker.stop(),this.countdown&&this.countdown.stop();for(var e in this)"function"==typeof this[e]&&(this[e]=function(){});var n=o("rer-layer");n&&(n.style.display="none"),document.removeEventListener("mousewheel",t)},openUrl:function(e){location.href=e}};a.mix(e,c)}(window.app||(window.app={})),function(e){var t,n,i,r,a,o,s=(window.Promise,e.Utils),l=e.Utils.$,c={showStartup:function(){var e=this,r=e.stage,o=e.loader.getContent("title"),s=Math.min(o.width,r.width-30),l=s/o.width;t=new Hilo.Container({width:o.width,height:o.height,scaleX:l,scaleY:l,pivotY:o.height>>1,x:r.width-s>>1,y:.4*r.height>>0});new Hilo.Bitmap({image:o}).addTo(t);a=new Hilo.Text({text:"",font:"bold 100px arial",color:"#000",width:70,height:28,x:186,y:118}).addTo(t);var o=e.loader.getContent("lightning1");n=new Hilo.Bitmap({image:o,x:0,y:10});var o=e.loader.getContent("lightning2");i=new Hilo.Bitmap({image:o,x:r.width-.68*o.width>>0,y:450,y:t.y+60,rotation:-4}),r.addChild(n,i,t),e.startFlashLightning(),e.isLogin?e.startWaiting():e.showLogin(function(){e.startWaiting()})},hideStartup:function(){var e=this,o=e.stage;e.stopFlashLightning(),o.removeChild(n),o.removeChild(i),n=null,i=null,r.stop(),Hilo.Tween.to(t,{y:0,alpha:0},{duration:400,onComplete:function(){r=null,a=null,o.removeChild(t)}})},startFlashLightning:function(){var e=this,t=3e3*Math.random()+2e3>>0;o=setTimeout(function(){Hilo.Tween.to(n,{alpha:0},{duration:100,repeat:2*Math.random()+1>>0,delay:0,reverse:!0}),Hilo.Tween.to(i,{alpha:0},{duration:100,repeat:2*Math.random()+1>>0,delay:400*Math.random()+500>>0,reverse:!0}),e.startFlashLightning()},t)},stopFlashLightning:function(){clearTimeout(o)},showWaitingBox:function(){var e=this,t=(e.S,l("game-waiting"));if("block"!==t.style.display){t.style.display="block";var n=t.getElementsByClassName("text1")[0].getElementsByTagName("span")[0];setTimeout(function(){if("block"===t.style.display){setTimeout(arguments.callee,1e3);var e=n.innerText.length;e=e%3+1,n.innerText=new Array(e+1).join(".")}},1e3);var i=t.getElementsByClassName("box")[0],r=i.clientHeight,a=window.innerHeight;i.style.top=(a-r)/2+"px";var o=t.getElementsByClassName("close")[0];s.onclick(o,function(t){e.tagShown(function(){e.close()})})}},hideWaitingBox:function(){var e=l("game-waiting");"none"!==e.style.display&&(e.style.display="none")},startWaiting:function(){function t(){return n.wait().then(function(e){return n.hideWaitingBox(),e},function(){return n.goldlog("flowcontrol"),!0})}var n=this;return t().then(function(t){if(t===!0)n.startCountdown(),n.goldlog("playing");else{var i=t.errorCode;n.goldlog(1===i?"timeout":"played"),n.resultBox({type:0,title:1===i?"&nbsp;":"",content:1===i?"&nbsp;":"&nbsp;",tip:e.getNextGameTip()},{hideClose:!0},function(e,t){"btn-cancel"===e.id&&n.tagShown(function(){n.close()})})}})},startCountdown:function(){var e=this,t=e.config.delay;t=Math.floor(Math.random()*(t[1]-t[0])+t[0]),r=lib.countdown({endDate:.001*+new Date+t,onUpdate:function(e){a.text=e.totalSeconds},onEnd:function(){e.hideStartup(),e.startGame()}}).start()},showLogin:function(e){var n=this,i=n.loader.getContent("login");login=new Hilo.Bitmap({image:i,scaleX:.71,scaleY:.71,x:155,y:112}).on("mousedown",function(i){n.goLogin(function(){t.removeChild(login),login=null,e&&e()})}).addTo(t)}};e.Utils.mix(e,c)}(window.app||(window.app={})),function(e){var t=e.Utils,n=t.$,i=(t.template,t.addClass),r=t.removeClass,a={startGame:function(){var t=this,n=t.stage,i=(t.redEnvelope=new e.RedEnvelope({assets:t.loader,stage:n,width:n.width,height:n.height,numOfRedEnvelopes:t.config.numOfRedEnvelopes,speedOfRedEnvelope:t.config.speedOfRedEnvelope,angle:t.config.rainAngle}).start().addTo(n),t.POINTER_START);n.on(i,t.onPointerStart.bind(t)),t.onDrawSuccess=t.onDrawSuccess.bind(t),t.onDrawFail=t.onDrawFail.bind(t),t.startGameTimer(),t.startGameLightning(),t.toShowResults=[],t.drawResults=[],t.reactIds={},t.tagShown()},onPointerStart:function(e){var t=this,n=e.eventTarget;if(n){var i=-1!=n.id.indexOf("redEnvelope");i&&!n.hitted&&(n.hitted=!0,t.toShowResults.length>0?t.redEnvelope.openRedEnvelope(n,t.toShowResults.shift()):t.tryToDraw(n,t.onDrawSuccess,t.onDrawFail)?t.reactIds[n.id]=setTimeout(function(){t.redEnvelope.showBubble(n)},t.config.reactDelay):t.redEnvelope.showBubble(n))}},onDrawSuccess:function(t,n,i){var r=i.data;r?(r.type=Number(r.type),r.prob=Number(r.prob),(""===r.amount||null===r.amount||"undefined"==typeof r.amount||r.type<e.RedEnvelope.TYPE.NONE||isNaN(r.type)||"true"!==r.isSuccess)&&(r.type=e.RedEnvelope.TYPE.NONE,r.amount="",r.isSuccess="false"),r.type!==e.RedEnvelope.TYPE.NONE&&r.type!==e.RedEnvelope.TYPE.CASH&&r.type!==e.RedEnvelope.TYPE.COUPON&&r.amount&&(r.amount.indexOf("")>0?r.type=e.RedEnvelope.TYPE.CASH:r.type=e.RedEnvelope.TYPE.COUPON),this.onDrawResult(t,n,r),r.type>e.RedEnvelope.TYPE.NONE&&"true"===r.isSuccess&&""!==r.amount&&this.drawResults.push(r),isNaN(r.prob)||(this.config.prob=r.prob),e.Utils.log("prob:",this.config.prob)):this.onDrawFail(t,n,i)},onDrawFail:function(e,t,n){this.config.prob=this.config.defaultProb,this.onDrawResult(e,t,{})},onDrawResult:function(e,t,n){var i=this;t<i.config.reactDelay?i.redEnvelope.openRedEnvelope(e,n):i.toShowResults.push(n);var r=i.reactIds[e.id];r&&(clearTimeout(r),delete i.reactIds[e.id])},startGameTimer:function(){var e=this,t=n("game-timer");t.style.right=(window.innerWidth-e.stage.width+20>>1)+"px",r(t,"hide"),e.countdown=lib.countdown({endDate:.001*(new Date).getTime()+e.config.time,onUpdate:function(e){t.innerHTML="<span>"+e.totalSeconds+"</span>"},onEnd:function(){i(t,"hide"),e.redEnvelope.stop(),e.stopGameLightning(),e.showResult()}}).start()},gameFinished:!1,showResult:function(){var t=this;t.gameFinished=!0,n("game-close").style.display="none";for(var i=[],r=!1,a=!1,o=0,s=0,l=0;l<t.drawResults.length;l++){var c=t.drawResults[l],d=Number(c.type)||e.RedEnvelope.TYPE.NONE;switch(d){case e.RedEnvelope.TYPE.CASH:r=!0,o++,i.push(c.amount);break;case e.RedEnvelope.TYPE.COUPON:a=!0,s++}}var u;1!==o||a?!r&&a?u="&nbsp;<b></b>"+s+"":r&&(u=i.map(function(e){return'<li class="cash-item">'+e+"</li>"}).join(""),a&&(u+='<li class="coupon-item">1011'+s+"</li>"),u="<ul>"+u+"</ul>"):u="&nbsp;<b>"+i[0]+"</b>";var h=t.getNextGameTip(),p=0;a&&r?p=3:r&&o>1?p=3:a?p=2:r&&(p=1);var c={type:p};if(0===p)c.title="~",c.content="&nbsp;11",c.tip=h,t.goldlog("failure");else{var f=t.currentGameData.sbbigtip||t.config.winbigtip||"",m=t.currentGameData.sbtip||t.config.wintip||"6";t.currentGameData.sb&&1===p&&(u+='<div class="sbimagetip"><img src="'+t.currentGameData.sbimagetip+'" /></div>'),c.title="&nbsp;"+f,c.content=u,c.tip=m+(h?"<br>"+h:""),t.goldlog("success")}t.resultBox(c,{},function(e,n){"btn-kqb"===e.id?t.openUrl("//my1111.tmall.com"):"btn-huichang"===e.id?t.openUrl(location.protocol+"//1111.tmall.com"):"btn-cancel"===e.id?t.close():"close"===e.id&&t.close()})}};e.Utils.mix(e,a)}(window.app||(window.app={})),function(e){var t={tryToDraw:function(e,t,n){var i=this.config.prob||0,r=Math.random()<i;return r?(this.doDraw(e,t,n),!0):!1},doDraw:function(t,n,i){var r=this,a=+new Date,o={api:"mtop.taobao.Award.pc.doAward20151111",v:"1.0",data:{ename:this.config.ename.pc,asac:"D8M78F2ILS29TRCXHP70",ua:r.getUA()}};o.api=o.api.toLowerCase(),this.currentGameData.special&&(o.data.limitedRankList=t.type+""),lib123.mtop.request(o,function(i){var r=+new Date-a;e.Utils.log("drawResult: "+JSON.stringify(i)+","+r),n&&n(t,r,i)},function(n){var r=+new Date-a;e.Utils.log("drawFail: "+JSON.stringify(n)+","+r),i&&i(t,r,n)})}};e.Utils.mix(e,t)}(window.app||(window.app={})),function(e){var t,n,i,r=!1,a={startGameLightning:function(){var e=this,r=e.stage;if(!n){var a=e.loader.getContent("lightning2");n=new Hilo.Bitmap({image:a,x:r.width-a.width+10,y:r.height-a.height>>1,pointerEnabled:!1}),i=new Hilo.View({width:r.width,height:r.height,background:"#000",pointerEnabled:!1})}var o=5*Math.random()+15>>0;t=setTimeout(e.doLightningEffect.bind(e),1e3*o)},stopGameLightning:function(){clearTimeout(t),t=null,r=!0},doLightningEffect:function(){var e=this,t=e.stage;i.alpha=0,n.alpha=0,t.addChild(i,n),Hilo.Tween.to(i,{alpha:.5},{duration:100}),Hilo.Tween.to(n,{alpha:1},{duration:300,repeat:1,reverse:!0,onUpdate:function(){},onComplete:function(){Hilo.Tween.to(i,{alpha:0},{duration:100}),!r&&e.startGameLightning()}})}};e.Utils.mix(e,a)}(window.app||(window.app={})),app.isTaobao=!0,app},{requires:["dom","ua","anim","kg/mini-login/6.1.0/"]});