!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){!function(){"use strict";function t(){var t=null,e=window.BF_User;if(e&&e instanceof Function){t={};var n=new e;if(t.isLoggedIn=n.isLoggedIn(),t.referrer=document.referrer,t.userAgent=navigator.userAgent,t.isLoggedIn){var i=n.getUserInfo();t.email=i.email,t.id=i.userid,t.name=i.username,t.isEditor="true"===i.p_editor_admin,t.isAdmin="true"===i.p_admin,t.isAdvertiser="true"===i.f_ad}C.log.info("User info aggregated")}return null}var e=n(2),i=n(3),r=n(4),a=n(5),o=n(158),s=n(161),u=n(162),c=n(163),d=n(164),l=n(166),p=n(167),f=n(183),h=n(184),g=n(185),v=n(186),m=n(187),b=n(188),y=n(189),k=n(190),w=n(191),_=n(192),x=n(193),T=n(194),S=n(195),M=n(196),F=n(197),C=new F.Core,I=C.utils.get(window,"BF_STATIC",null);if(C.utils.isObject(I)){var P={mode:"dev"===I.bf_env?C.defs.bfaMode.develop:C.defs.bfaMode.prod,webRoot:I.web_root,staticRoot:I.static_root,env:I.bf_env,platform:C.utils.startsWith(I.tt_page,"Mobile")?C.defs.platform.mobileweb:C.defs.platform.desktop,debug:document.location.search.indexOf("bfadebug=true")>-1,pixiedust:{samplingRate:I.pixiedust_sampling_rate,poundSamplingRate:I.pixiedust_pound_sampling_rate}},E=t(),A={uri:{cleanedPath:document.location.pathname}};document.location.pathname&&I.web_root&&C.utils.startsWith(document.location.pathname,I.web_root)&&(A.uri.cleanedPath=document.location.pathname.substr(I.web_root.length)),A.country=I.country,A.metavertical="",A.language=I.language,A.type=I.page_type,A.templateType=I.tt_page,A.platform=P.platform,A.version=I.version;var O=C.utils.get(window,"buzzDetails",null);C.utils.isObject(O)&&(A.post={},A.post.form=O.form,A.post.id=I.campaignid,A.post.name=I.buzz_name,A.post.published=O.published,A.post.publishedAgo=O.published_ago,A.post.postFormat=O.postFormat,A.post.listFormat=O.listFormat,A.post.author=I.username,A.post.badges=O.postBadges,A.post.tags=O.postTags,A.post.metavertical="tbd",A.post.category=O.category_name,A.post.ad=0!==O.ad,A.post.user=0!==O.user,A.post.editor=0!==O.editor,A.post.trigger=0!==O.trigger,A.post.partner=0!==O.f_partner,A.post.raw=0!==O.raw,A.post.isPromoted=1===parseInt(I.f_ad),A.post.nsfw=0!==O.nsfw,A.post.subBuzzAmount=""!==O.subBuzzCount?parseInt(O.subBuzzCount):0,A.post.mainSubBuzzAmount=O.mainSubBuzzCount?parseInt(O.mainSubBuzzCount):0,A.post.wordsCount=O.wordsCount?parseInt(O.wordsCount):null),C.log.info("Page info aggregated");var R=P.platform===C.defs.platform.desktop?"mousedown":"click",B={bfaFunctionName:"bfa",domBinder:{delegatedMapping:{click:[{event:R,selector:".page-nav__action--fb-share",options:{}},{event:R,selector:"div.reactions-carousel__arrows",options:{}},{event:R,selector:"i.gif-nav",options:{}},{event:R,selector:".page-search__search-button",options:{}},{event:R,selector:"a",options:{handlers:["ATagWithExternalLinkHandler","ATagWithInternalLinkHandler","ATagDefaultHandler"]}},{event:R,selector:"button",options:{}},{event:R,selector:"input[type='submit']",options:{}},{event:R,selector:"select",options:{}},{event:R,selector:".country-toggle",options:{}},{event:"change",selector:"select",options:{handlers:["SelectTagChangedClickHandler"]}}]},directMapping:{click:[{event:R,selector:"#contribute-post",options:{}},{event:R,selector:".commentbox.contribution-form .submit",options:{}},{event:R,selector:"button.js-submit-signup-form",options:{}}]}},inViewImpressionBinder:{enabled:!0,locator:".col1 .lede__title .lede__link"},socialBinder:{facebookMapping:["like","unlike","comment"]},videoBinder:{youtube:!0,vimeo:!0,facebook:!0}};A.post&&(B.scrollBinder={elementMode:{enabled:A.post.mainSubBuzzAmount>0&&"long"!==A.post.listFormat&&"no_list"!==A.post.listFormat,element:".buzz_superlist_item",expected:A.post.mainSubBuzzAmount},pixelMode:{enabled:!0},checkpoints:[25,50,75,100],bottomBounds:['[data-bfa="@l:Bottom-Share;"]',"#related_feed"]}),C.plugin(i,P).plugin(l).plugin(a).plugin(d).plugin(e).plugin(r).plugin(o).plugin(s).plugin(u).plugin(h).plugin(c).plugin(f).plugin(p,B).plugin(g,{enabled:I.pound_enabled}).plugin(v,{extFilePath:I.static_root+"/js/public/pixiedust-build.js"}),C.registerModule(m,{extFilesPaths:[I.static_root+"/compiled/scode_webapp.js"],configMapsDelegate:k}).registerModule(b,{configMapsDelegate:_}).registerModule(x,{extFilesPaths:[I.static_root+"/compiled/custom_audience_pixel.js"],configMapsDelegate:T,facebookId:"260954170738952"}).registerModule(y,{configMapsDelegate:w}).registerModule(S,{configMapsDelegate:M,extFilesPaths:["https://secure-dcr-cert.imrworldwide.com/novms/js/2/ggcmb500.js"]}),C.activatePlugins(),E?C.push("general/user/update",{}):C.domi.onDomReady(function(){E=t(),C.push("general/user/update",{})}),C.domi.onDomReady(function(){C.push("plugin/binder/activate",{})},this),C.push("general/page/update",A),C.activate()}}()},function(t,e){!function(){"use strict";function e(t){this._core=t,this._isDomReady=!1,this._domReady=new t.utils.Signal,this._domReady.addOnce(function(){this._isDomReady=!0},this,Number.MAX_VALUE);var e=this;return this._installDomi=function(n){n.domi={onDomReady:function(t,n){e._isDomReady?t.call(n):e._domReady.addOnce(t,n)},loadScript:function(e,n,i,r){function a(){this.onerror=null,this.onload=null,n.apply(r)}function o(){this.onerror=null,this.onload=null,i.apply(r)}var s=document.createElement("script");s.type=e.type||"text/javascript",s.charset=e.charset||"utf8",s.src=e.src,e.async!==!1&&(s.async=!0),t.utils.isUndefined(e.attrs)||t.utils.forOwn(e.attrs,function(t,e){s.setAttribute(e,t)}),t.utils.isFunction(n)&&(s.onload=a),t.utils.isFunction(i)&&(s.onerror=o);var u=document.body||document.getElementsByTagName("body")[0];u&&u.appendChild(s)}}},this._installDomi(t),function(){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)return t.log.info("onReady method: document.readyState is '"+document.readyState+"' and callback will be fired immediately"),void e._domReady.dispatch();if(document.addEventListener)t.log.info("onReady method: callback will be added to EventListener"),document.addEventListener("DOMContentLoaded",e._domReady.dispatch,!1);else if(document.attachEvent)document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e._domReady.dispatch()});else{t.log.info("onReady method: callback will be added to window onload");var n=window.onload;window.onload=function(){n&&n(),e._domReady.dispatch()}}}(),{modifySBInstance:function(t){e._installDomi(t)}}}e.defaultId="domi",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){var n={mode:t.defs.bfaMode.prod,debug:!1};this._core=t;var i=this._core.utils.defaultsDeep(e||{},n),r=new t.utils.Signal;return this.setSettings=function(e){t._generalSettings=t.utils.cloneDeep(e||{}),t._onGeneralSettingsChange.dispatch(t.utils.cloneDeep(t._generalSettings))},this.updateSettings=function(e){t._generalSettings=t.utils.merge(t._generalSettings||{},e||{}),t._onGeneralSettingsChange.dispatch(t.utils.cloneDeep(t._generalSettings))},t._onGeneralSettingsChange=r,this.setSettings(i),this._core._router.sub("general/settings/set",this.setSettings,this),this._core._router.sub("general/settings/update",this.updateSettings,this),{modifySBInstance:function(e){e.getGeneralSettings=function(){return t.utils.cloneDeep(t._generalSettings)},e.onGeneralSettingsChange=function(e,n){t._onGeneralSettingsChange.add(e,n)}}}}e.defaultId="generalSettings",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){var n={varName:"bfa",eventsArrayName:"c"};if(this.settings=t.utils.defaultsDeep(e||{},n),this.unhandledEventsArray=null,t.utils.has(window,this.settings.varName)){var i=t.utils.get(window,this.settings.varName);if(t.utils.has(i,this.settings.eventsArrayName)&&t.utils.isArray(i[this.settings.eventsArrayName])&&(this.unhandledEventsArray=i[this.settings.eventsArrayName],this.unhandledEventsArray.length>0)){var r=t.utils.remove(this.unhandledEventsArray,function(e){return e[0]&&!t.utils.startsWith(e[0],"track")&&!t.utils.startsWith(e[0],"module")});t.utils.forEach(r,function(e){t.push.apply(t,e)},this)}}return t.inited.addOnce(function(){window[this.settings.varName]=function(){t.push.apply(t,arguments)},this.unhandledEventsArray&&this.unhandledEventsArray.length>0&&t.utils.forEach(this.unhandledEventsArray,function(e){t.push.apply(t,e)},this)},this),{}}e.defaultId="globalBfaEndpoint",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){function e(e){e.mode===t.defs.bfaMode.develop||e.debug===!0?t.log.enabled()!==!0&&t.log.enabled(!0):t.log.enabled()===!0&&t.log.enabled(!1)}return t.log=i("BFACore"),t._router.log=t.log,t.createLogger=function(e){return t.utils.isString(e)&&""!==e||t.log.error("core.createLogger: `loggerName` argument must be a not empty string"),i(e)},t.log.enabled=function(t){return i.enabled(t)},e(t._generalSettings),t._onGeneralSettingsChange.add(e,this),{modifySBInstance:function(t){t.log=i(t.instanceId)}}}var i=n(6);e.defaultId="logger",e.require=["generalSettings"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){var t=new Date,e=t.getMinutes(),n=t.getSeconds(),i=t.getMilliseconds();return 10>e&&(e="0"+e),10>n&&(n="0"+n),e+":"+n+"."+i}function i(t){return t instanceof Error?t.stack||t.message:t.toString()}function r(t){return{log:function(n,a){if("undefined"!=typeof a&&r._enabled===!0){a=i(a);var o="BF_Analytics: [ "+t+", "+n+", Time: "+e()+", '"+a+"' ]";window&&window.console&&console.log&&Function.prototype.apply.call(console.log,console,[o])}},info:function(t){this.log("INFO",t)},error:function(t){this.log("ERROR",t)},warn:function(t){this.log("WARN",t)}}}var a=n(7);r._enabled=!1,r.enabled=function(t){return a.isBoolean(t)&&(r._enabled=t),r._enabled},t.exports=r}()},function(t,e,n){!function(){"use strict";t.exports.isEmpty=n(8),t.exports.isString=n(15),t.exports.isArray=n(19),t.exports.isBoolean=n(29),t.exports.isObject=n(14),t.exports.isPlainObject=n(30),t.exports.isUndefined=n(34),t.exports.isFunction=n(22),t.exports.cloneDeep=n(35),t.exports.clone=n(47),t.exports.has=n(49),t.exports.get=n(56),t.exports.set=n(57),t.exports.forOwn=n(58),t.exports.keys=n(24),t.exports.defaults=n(60),t.exports.defaultsDeep=n(67),t.exports.merge=n(68),t.exports.values=n(74),t.exports.after=n(76),t.exports.defer=n(77),t.exports.bind=n(79),t.exports.delay=n(105),t.exports.every=n(106),t.exports.forEach=n(126),t.exports.map=n(128),t.exports.pluck=n(131),t.exports.slice=n(132),t.exports.indexOf=n(133),t.exports.remove=n(138),t.exports.flatten=n(140),t.exports.uniq=n(143),t.exports.startsWith=n(150),t.exports.trim=n(151),t.exports.readCookie=function(t){for(var e,n=document.cookie.split(";"),i=[],r=0;r<n.length;r++){if(n[r]=n[r].trim(),"object"==typeof t&&t.exec){var a=new RegExp(t);if(a.test(n[r])){var o=/(.*)=(.*)$/g;e=o.exec(n[r]),e&&i.push({name:e[1],value:e[2]})}}if("string"==typeof t){var s=RegExp("^\\s*"+t+"=\\s*(.*?)\\s*$");e=n[r].match(s),e&&i.push({name:t,value:e[1]})}}return i},t.exports.checkType=function(e,n,i,r){return typeof n!==e?""+i+" has to be a "+e:r===!0&&t.exports.isEmpty(n)?""+i+" has to be not empty":void 0},t.exports.Signal=n(157)}()},function(t,e,n){function i(t){return null==t?!0:o(t)&&(a(t)||c(t)||r(t)||u(t)&&s(t.splice))?!t.length:!d(t).length}var r=n(9),a=n(19),o=n(10),s=n(22),u=n(16),c=n(15),d=n(24);t.exports=i},function(t,e,n){function i(t){return a(t)&&r(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var r=n(10),a=n(16),o=Object.prototype,s=o.hasOwnProperty,u=o.propertyIsEnumerable;t.exports=i},function(t,e,n){function i(t){return null!=t&&a(r(t))}var r=n(11),a=n(18);t.exports=i},function(t,e,n){var i=n(12),r=i("length");t.exports=r},function(t,e,n){function i(t){return function(e){return null==e?void 0:r(e)[t]}}var r=n(13);t.exports=i},function(t,e,n){function i(t){if(o.unindexedChars&&a(t)){for(var e=-1,n=t.length,i=Object(t);++e<n;)i[e]=t.charAt(e);return i}return r(t)?t:Object(t)}var r=n(14),a=n(15),o=n(17);t.exports=i},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function i(t){return"string"==typeof t||r(t)&&s.call(t)==a}var r=n(16),a="[object String]",o=Object.prototype,s=o.toString;t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e){var n=Array.prototype,i=Error.prototype,r=Object.prototype,a=r.propertyIsEnumerable,o=n.splice,s={};!function(t){var e=function(){this.x=t},n={0:t,length:t},r=[];e.prototype={valueOf:t,y:t};for(var u in new e)r.push(u);s.enumErrorProps=a.call(i,"message")||a.call(i,"name"),s.enumPrototypes=a.call(e,"prototype"),s.nonEnumShadows=!/valueOf/.test(r),s.ownLast="x"!=r[0],s.spliceObjects=(o.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),t.exports=s},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;t.exports=n},function(t,e,n){var i=n(20),r=n(18),a=n(16),o="[object Array]",s=Object.prototype,u=s.toString,c=i(Array,"isArray"),d=c||function(t){return a(t)&&r(t.length)&&u.call(t)==o};t.exports=d},function(t,e,n){function i(t,e){var n=null==t?void 0:t[e];return r(n)?n:void 0}var r=n(21);t.exports=i},function(t,e,n){function i(t){return null==t?!1:r(t)?l.test(c.call(t)):o(t)&&(a(t)?l:s).test(t)}var r=n(22),a=n(23),o=n(16),s=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,l=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e,n){function i(t){return r(t)&&s.call(t)==a}var r=n(14),a="[object Function]",o=Object.prototype,s=o.toString;t.exports=i},function(t,e){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();t.exports=n},function(t,e,n){var i=n(20),r=n(10),a=n(14),o=n(25),s=n(17),u=i(Object,"keys"),c=u?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?s.enumPrototypes:r(t))?o(t):a(t)?u(t):[]}:o;t.exports=c},function(t,e,n){function i(t){for(var e=c(t),n=e.length,i=n&&t.length,d=!!i&&s(i)&&(a(t)||r(t)||u(t)),p=-1,f=[];++p<n;){var h=e[p];(d&&o(h,i)||l.call(t,h))&&f.push(h)}return f}var r=n(9),a=n(19),o=n(26),s=n(18),u=n(15),c=n(27),d=Object.prototype,l=d.hasOwnProperty;t.exports=i},function(t,e){function n(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?r:e,t>-1&&t%1==0&&e>t}var i=/^\d+$/,r=9007199254740991;t.exports=n},function(t,e,n){function i(t){if(null==t)return[];d(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(o(t)||a(t)||l(t))&&e||0;for(var n=t.constructor,i=-1,r=s(n)&&n.prototype||T,f=r===t,h=Array(e),g=e>0,m=p.enumErrorProps&&(t===x||t instanceof Error),b=p.enumPrototypes&&s(t);++i<e;)h[i]=i+"";for(var k in t)b&&"prototype"==k||m&&("message"==k||"name"==k)||g&&u(k,e)||"constructor"==k&&(f||!M.call(t,k))||h.push(k);if(p.nonEnumShadows&&t!==T){var I=t===S?w:t===x?v:F.call(t),P=C[I]||C[y];for(I==y&&(r=T),e=_.length;e--;){k=_[e];var E=P[k];f&&E||(E?!M.call(t,k):t[k]===r[k])||h.push(k)}}return h}var r=n(28),a=n(9),o=n(19),s=n(22),u=n(26),c=n(18),d=n(14),l=n(15),p=n(17),f="[object Array]",h="[object Boolean]",g="[object Date]",v="[object Error]",m="[object Function]",b="[object Number]",y="[object Object]",k="[object RegExp]",w="[object String]",_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=Error.prototype,T=Object.prototype,S=String.prototype,M=T.hasOwnProperty,F=T.toString,C={};C[f]=C[g]=C[b]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},C[h]=C[w]={constructor:!0,toString:!0,valueOf:!0},C[v]=C[m]=C[k]={constructor:!0,toString:!0},C[y]={constructor:!0},r(_,function(t){for(var e in C)if(M.call(C,e)){var n=C[e];n[t]=M.call(n,t)}}),t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function i(t){return t===!0||t===!1||r(t)&&s.call(t)==a}var r=n(16),a="[object Boolean]",o=Object.prototype,s=o.toString;t.exports=i},function(t,e,n){function i(t){var e;if(!s(t)||p.call(t)!=c||o(t)||a(t)||!l.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return u.ownLast?(r(t,function(t,e,i){return n=l.call(i,e),!1}),n!==!1):(r(t,function(t,e){n=e}),void 0===n||l.call(t,n))}var r=n(31),a=n(9),o=n(23),s=n(16),u=n(17),c="[object Object]",d=Object.prototype,l=d.hasOwnProperty,p=d.toString;t.exports=i},function(t,e,n){function i(t,e){return r(t,e,a)}var r=n(32),a=n(27);t.exports=i},function(t,e,n){var i=n(33),r=i();t.exports=r},function(t,e,n){function i(t){return function(e,n,i){for(var a=r(e),o=i(e),s=o.length,u=t?s:-1;t?u--:++u<s;){var c=o[u];if(n(a[c],c,a)===!1)break}return e}}var r=n(13);t.exports=i},function(t,e){function n(t){return void 0===t}t.exports=n},function(t,e,n){function i(t,e,n){return"function"==typeof e?r(t,!0,a(e,n,3)):r(t,!0)}var r=n(36),a=n(45);t.exports=i},function(t,e,n){function i(t,e,n,g,v,m,b){var k;if(n&&(k=v?n(t,g,v):n(t)),void 0!==k)return k;if(!f(t))return t;var w=l(t);if(w){if(k=u(t),!e)return r(t,k)}else{var x=V.call(t),T=x==y;if(x!=_&&x!=h&&(!T||v))return N[x]?c(t,x,e):v?t:{};if(p(t))return v?t:{};if(k=d(T?{}:t),!e)return o(k,t)}m||(m=[]),b||(b=[]);for(var S=m.length;S--;)if(m[S]==t)return b[S];return m.push(t),b.push(k),(w?a:s)(t,function(r,a){k[a]=i(r,e,n,a,t,m,b)}),k}var r=n(37),a=n(28),o=n(38),s=n(40),u=n(41),c=n(42),d=n(44),l=n(19),p=n(23),f=n(14),h="[object Arguments]",g="[object Array]",v="[object Boolean]",m="[object Date]",b="[object Error]",y="[object Function]",k="[object Map]",w="[object Number]",_="[object Object]",x="[object RegExp]",T="[object Set]",S="[object String]",M="[object WeakMap]",F="[object ArrayBuffer]",C="[object Float32Array]",I="[object Float64Array]",P="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",B="[object Uint16Array]",j="[object Uint32Array]",N={};N[h]=N[g]=N[F]=N[v]=N[m]=N[C]=N[I]=N[P]=N[E]=N[A]=N[w]=N[_]=N[x]=N[S]=N[O]=N[R]=N[B]=N[j]=!0,N[b]=N[y]=N[k]=N[T]=N[M]=!1;var D=Object.prototype,V=D.toString;t.exports=i},function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function i(t,e){return null==e?t:r(e,a(e),t)}var r=n(39),a=n(24);t.exports=i},function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var a=e[i];n[a]=t[a]}return n}t.exports=n},function(t,e,n){function i(t,e){return r(t,e,a)}var r=n(32),a=n(24);t.exports=i},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i=Object.prototype,r=i.hasOwnProperty;t.exports=n},function(t,e,n){(function(e){function i(t,e,n){var i=t.constructor;switch(e){case d:return r(t);case a:case o:return new i(+t);case l:case p:case f:case h:case g:case v:case m:case b:case y:i instanceof i&&(i=_[e]);var w=t.buffer;return new i(n?r(w):w,t.byteOffset,t.length);case s:case c:return new i(t);case u:var x=new i(t.source,k.exec(t));x.lastIndex=t.lastIndex}return x}var r=n(43),a="[object Boolean]",o="[object Date]",s="[object Number]",u="[object RegExp]",c="[object String]",d="[object ArrayBuffer]",l="[object Float32Array]",p="[object Float64Array]",f="[object Int8Array]",h="[object Int16Array]",g="[object Int32Array]",v="[object Uint8Array]",m="[object Uint8ClampedArray]",b="[object Uint16Array]",y="[object Uint32Array]",k=/\w*$/,w=e.Uint8Array,_={};_[l]=e.Float32Array,_[p]=e.Float64Array,_[f]=e.Int8Array,_[h]=e.Int16Array,_[g]=e.Int32Array,_[v]=w,_[m]=e.Uint8ClampedArray,_[b]=e.Uint16Array,_[y]=e.Uint32Array,t.exports=i}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){var e=new i(t.byteLength),n=new r(e);return n.set(new r(t)),e}var i=e.ArrayBuffer,r=e.Uint8Array;t.exports=n}).call(e,function(){return this}())},function(t,e){function n(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}t.exports=n},function(t,e,n){function i(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)};case 5:return function(n,i,r,a,o){return t.call(e,n,i,r,a,o)}}return function(){return t.apply(e,arguments)}}var r=n(46);t.exports=i},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function i(t,e,n,i){return e&&"boolean"!=typeof e&&o(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?r(t,e,a(n,i,3)):r(t,e)}var r=n(36),a=n(45),o=n(48);t.exports=i},function(t,e,n){function i(t,e,n){if(!o(n))return!1;var i=typeof e;if("number"==i?r(n)&&a(e,n.length):"string"==i&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}var r=n(10),a=n(26),o=n(14);t.exports=i},function(t,e,n){function i(t,e){if(null==t)return!1;var n=g.call(t,e);if(!n&&!c(e)){if(e=f(e),t=1==e.length?t:r(t,a(e,0,-1)),null==t)return!1;e=p(e),n=g.call(t,e)}return n||d(t.length)&&u(e,t.length)&&(s(t)||o(t)||l(t))}var r=n(50),a=n(51),o=n(9),s=n(19),u=n(26),c=n(52),d=n(18),l=n(15),p=n(53),f=n(54),h=Object.prototype,g=h.hasOwnProperty;t.exports=i},function(t,e,n){function i(t,e,n){if(null!=t){t=r(t),void 0!==n&&n in t&&(e=[n]);for(var i=0,a=e.length;null!=t&&a>i;)t=r(t)[e[i++]];return i&&i==a?t:void 0}}var r=n(13);t.exports=i},function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(r);++i<r;)a[i]=t[i+e];return a}t.exports=n},function(t,e,n){function i(t,e){var n=typeof t;if("string"==n&&s.test(t)||"number"==n)return!0;if(r(t))return!1;var i=!o.test(t);return i||null!=e&&t in a(e)}var r=n(19),a=n(13),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=i},function(t,e){function n(t){var e=t?t.length:0;return e?t[e-1]:void 0}t.exports=n},function(t,e,n){function i(t){if(a(t))return t;var e=[];return r(t).replace(o,function(t,n,i,r){e.push(i?r.replace(s,"$1"):n||t)}),e}var r=n(55),a=n(19),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=i},function(t,e){function n(t){return null==t?"":t+""}t.exports=n},function(t,e,n){function i(t,e,n){var i=null==t?void 0:r(t,a(e),e+"");return void 0===i?n:i}var r=n(50),a=n(54);t.exports=i},function(t,e,n){function i(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||a(e,t)?[i]:s(e);for(var u=-1,c=e.length,d=c-1,l=t;null!=l&&++u<c;){var p=e[u];o(l)&&(u==d?l[p]=n:null==l[p]&&(l[p]=r(e[u+1])?[]:{})),l=l[p]}return t}var r=n(26),a=n(52),o=n(14),s=n(54);t.exports=i},function(t,e,n){var i=n(40),r=n(59),a=r(i);t.exports=a},function(t,e,n){function i(t){return function(e,n,i){return"function"==typeof n&&void 0===i||(n=r(n,i,3)),t(e,n)}}var r=n(45);t.exports=i},function(t,e,n){var i=n(61),r=n(65),a=n(66),o=a(i,r);t.exports=o},function(t,e,n){var i=n(62),r=n(38),a=n(63),o=a(function(t,e,n){return n?i(t,e,n):r(t,e)});t.exports=o},function(t,e,n){function i(t,e,n){for(var i=-1,a=r(e),o=a.length;++i<o;){var s=a[i],u=t[s],c=n(u,e[s],s,t,e);(c===c?c===u:u!==u)&&(void 0!==u||s in t)||(t[s]=c)}return t}var r=n(24);t.exports=i},function(t,e,n){function i(t){return o(function(e,n){var i=-1,o=null==e?0:n.length,s=o>2?n[o-2]:void 0,u=o>2?n[2]:void 0,c=o>1?n[o-1]:void 0;for("function"==typeof s?(s=r(s,c,5),o-=2):(s="function"==typeof c?c:void 0,o-=s?1:0),u&&a(n[0],n[1],u)&&(s=3>o?void 0:s,o=1);++i<o;){var d=n[i];d&&t(e,d,s)}return e})}var r=n(45),a=n(48),o=n(64);t.exports=i},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,a=r(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Array(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=o,t.apply(this,s)}}var i="Expected a function",r=Math.max;t.exports=n},function(t,e){function n(t,e){return void 0===t?e:t}t.exports=n},function(t,e,n){function i(t,e){return r(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var r=n(64);t.exports=i},function(t,e,n){var i=n(66),r=n(68),a=n(73),o=i(r,a);t.exports=o},function(t,e,n){var i=n(69),r=n(63),a=r(i);t.exports=a},function(t,e,n){function i(t,e,n,p,f){if(!u(t))return t;var h=s(e)&&(o(e)||d(e)),g=h?void 0:l(e);return r(g||e,function(r,o){if(g&&(o=r,r=e[o]),c(r))p||(p=[]),f||(f=[]),a(t,e,o,i,n,p,f);else{var s=t[o],u=n?n(s,r,o,t,e):void 0,d=void 0===u;d&&(u=r),void 0===u&&(!h||o in t)||!d&&(u===u?u===s:s!==s)||(t[o]=u)}}),t}var r=n(28),a=n(70),o=n(19),s=n(10),u=n(14),c=n(16),d=n(71),l=n(24);t.exports=i},function(t,e,n){function i(t,e,n,i,l,p,f){for(var h=p.length,g=e[n];h--;)if(p[h]==g)return void(t[n]=f[h]);var v=t[n],m=l?l(v,g,n,t,e):void 0,b=void 0===m;b&&(m=g,s(g)&&(o(g)||c(g))?m=o(v)?v:s(v)?r(v):[]:u(g)||a(g)?m=a(v)?d(v):u(v)?v:{}:b=!1),p.push(g),f.push(m),b?t[n]=i(m,g,l,p,f):(m===m?m!==v:v===v)&&(t[n]=m)}var r=n(37),a=n(9),o=n(19),s=n(10),u=n(30),c=n(71),d=n(72);t.exports=i},function(t,e,n){function i(t){return a(t)&&r(t.length)&&!!I[E.call(t)]}var r=n(18),a=n(16),o="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",l="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",k="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",T="[object Int32Array]",S="[object Uint8Array]",M="[object Uint8ClampedArray]",F="[object Uint16Array]",C="[object Uint32Array]",I={};I[k]=I[w]=I[_]=I[x]=I[T]=I[S]=I[M]=I[F]=I[C]=!0,I[o]=I[s]=I[y]=I[u]=I[c]=I[d]=I[l]=I[p]=I[f]=I[h]=I[g]=I[v]=I[m]=I[b]=!1;var P=Object.prototype,E=P.toString;t.exports=i},function(t,e,n){function i(t){return r(t,a(t))}var r=n(39),a=n(27);t.exports=i},function(t,e,n){function i(t,e){return void 0===t?e:r(t,e,i)}var r=n(68);t.exports=i},function(t,e,n){function i(t){return r(t,a(t))}var r=n(75),a=n(24);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}t.exports=n},function(t,e){(function(e){function n(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new TypeError(i);var n=t;t=e,e=n}return t=r(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}var i="Expected a function",r=e.isFinite;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var i=n(78),r=n(64),a=r(function(t,e){return i(t,1,e)});t.exports=a},function(t,e){function n(t,e,n){if("function"!=typeof t)throw new TypeError(i);return setTimeout(function(){t.apply(void 0,n)},e)}var i="Expected a function";t.exports=n},function(t,e,n){var i=n(80),r=n(100),a=n(64),o=1,s=32,u=a(function(t,e,n){var a=o;if(n.length){var c=r(n,u.placeholder);a|=s}return i(t,a,e,n,c)});u.placeholder={},t.exports=u},function(t,e,n){function i(t,e,n,i,m,b,y,k){var w=e&p;if(!w&&"function"!=typeof t)throw new TypeError(g);var _=i?i.length:0;if(_||(e&=~(f|h),i=m=void 0),_-=m?m.length:0,e&h){var x=i,T=m;i=m=void 0}var S=w?void 0:u(t),M=[t,e,n,i,m,x,T,b,y,k];if(S&&(c(M,S),e=M[1],k=M[9]),M[9]=null==k?w?0:t.length:v(k-_,0)||0,e==l)var F=a(M[0],M[2]);else F=e!=f&&e!=(l|f)||M[4].length?o.apply(void 0,M):s.apply(void 0,M);var C=S?r:d;return C(F,M)}var r=n(81),a=n(83),o=n(86),s=n(103),u=n(92),c=n(104),d=n(101),l=1,p=2,f=32,h=64,g="Expected a function",v=Math.max;t.exports=i},function(t,e,n){var i=n(46),r=n(82),a=r?function(t,e){return r.set(t,e),t}:i;t.exports=a},function(t,e,n){(function(e){var i=n(20),r=i(e,"WeakMap"),a=r&&new r;t.exports=a}).call(e,function(){return this}())},function(t,e,n){(function(e){function i(t,n){function i(){var r=this&&this!==e&&this instanceof i?a:t;return r.apply(n,arguments)}var a=r(t);return i}var r=n(84);t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),i=t.apply(n,e);return a(i)?i:n}}var r=n(85),a=n(14);t.exports=i},function(t,e,n){var i=n(14),r=function(){function t(){}return function(e){if(i(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();t.exports=r},function(t,e,n){(function(e){function i(t,n,w,_,x,T,S,M,F,C){function I(){for(var h=arguments.length,g=h,v=Array(h);g--;)v[g]=arguments[g];if(_&&(v=a(v,_,x)),T&&(v=o(v,T,S)),O||B){var y=I.placeholder,N=d(v,y);if(h-=N.length,C>h){var D=M?r(M):void 0,V=k(C-h,0),L=O?N:void 0,z=O?void 0:N,U=O?v:void 0,q=O?void 0:v;n|=O?m:b,n&=~(O?b:m),R||(n&=~(p|f));var H=[t,n,w,U,L,q,z,D,F,V],G=i.apply(void 0,H);return u(t)&&l(G,H),G.placeholder=y,G}}var W=E?w:this,$=A?W[t]:t;return M&&(v=c(v,M)),P&&F<v.length&&(v.length=F),this&&this!==e&&this instanceof I&&($=j||s(t)),$.apply(W,v)}var P=n&y,E=n&p,A=n&f,O=n&g,R=n&h,B=n&v,j=A?void 0:s(t);return I}var r=n(37),a=n(87),o=n(88),s=n(84),u=n(89),c=n(99),d=n(100),l=n(101),p=1,f=2,h=4,g=8,v=16,m=32,b=64,y=128,k=Math.max;t.exports=i}).call(e,function(){return this}())},function(t,e){function n(t,e,n){for(var r=n.length,a=-1,o=i(t.length-r,0),s=-1,u=e.length,c=Array(u+o);++s<u;)c[s]=e[s];for(;++a<r;)c[n[a]]=t[a];for(;o--;)c[s++]=t[a++];return c}var i=Math.max;t.exports=n},function(t,e){function n(t,e,n){for(var r=-1,a=n.length,o=-1,s=i(t.length-a,0),u=-1,c=e.length,d=Array(s+c);++o<s;)d[o]=t[o];for(var l=o;++u<c;)d[l+u]=e[u];for(;++r<a;)d[l+n[r]]=t[o++];return d}var i=Math.max;t.exports=n},function(t,e,n){function i(t){var e=o(t),n=s[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var i=a(n);return!!i&&t===i[0]}var r=n(90),a=n(92),o=n(94),s=n(96);t.exports=i},function(t,e,n){function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}var r=n(85),a=n(91),o=Number.POSITIVE_INFINITY;i.prototype=r(a.prototype),i.prototype.constructor=i,t.exports=i},function(t,e){function n(){}t.exports=n},function(t,e,n){var i=n(82),r=n(93),a=i?function(t){return i.get(t)}:r;t.exports=a},function(t,e){function n(){}t.exports=n},function(t,e,n){function i(t){for(var e=t.name+"",n=r[e],i=n?n.length:0;i--;){var a=n[i],o=a.func;if(null==o||o==t)return a.name}return e}var r=n(95);t.exports=i},function(t,e){var n={};t.exports=n},function(t,e,n){function i(t){if(u(t)&&!s(t)&&!(t instanceof r)){if(t instanceof a)return t;if(l.call(t,"__chain__")&&l.call(t,"__wrapped__"))return c(t)}return new a(t)}var r=n(90),a=n(97),o=n(91),s=n(19),u=n(16),c=n(98),d=Object.prototype,l=d.hasOwnProperty;i.prototype=o.prototype,t.exports=i},function(t,e,n){function i(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}var r=n(85),a=n(91);i.prototype=r(a.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,n){function i(t){return t instanceof r?t.clone():new a(t.__wrapped__,t.__chain__,o(t.__actions__))}var r=n(90),a=n(97),o=n(37);t.exports=i},function(t,e,n){function i(t,e){for(var n=t.length,i=o(e.length,n),s=r(t);i--;){var u=e[i];t[i]=a(u,n)?s[u]:void 0}return t}var r=n(37),a=n(26),o=Math.min;t.exports=i},function(t,e){function n(t,e){for(var n=-1,r=t.length,a=-1,o=[];++n<r;)t[n]===e&&(t[n]=i,o[++a]=n);return o}var i="__lodash_placeholder__";t.exports=n},function(t,e,n){var i=n(81),r=n(102),a=150,o=16,s=function(){var t=0,e=0;return function(n,s){
var u=r(),c=o-(u-e);if(e=u,c>0){if(++t>=a)return n}else t=0;return i(n,s)}}();t.exports=s},function(t,e,n){var i=n(20),r=i(Date,"now"),a=r||function(){return(new Date).getTime()};t.exports=a},function(t,e,n){(function(e){function i(t,n,i,o){function s(){for(var n=-1,r=arguments.length,a=-1,d=o.length,l=Array(d+r);++a<d;)l[a]=o[a];for(;r--;)l[a++]=arguments[++n];var p=this&&this!==e&&this instanceof s?c:t;return p.apply(u?i:this,l)}var u=n&a,c=r(t);return s}var r=n(84),a=1;t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t,e){var n=t[1],i=e[1],g=n|i,v=l>g,m=i==l&&n==d||i==l&&n==p&&t[7].length<=e[8]||i==(l|p)&&n==d;if(!v&&!m)return t;i&u&&(t[2]=e[2],g|=n&u?0:c);var b=e[3];if(b){var y=t[3];t[3]=y?a(y,b,e[4]):r(b),t[4]=y?s(t[3],f):r(e[4])}return b=e[5],b&&(y=t[5],t[5]=y?o(y,b,e[6]):r(b),t[6]=y?s(t[5],f):r(e[6])),b=e[7],b&&(t[7]=r(b)),i&l&&(t[8]=null==t[8]?e[8]:h(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=g,t}var r=n(37),a=n(87),o=n(88),s=n(100),u=1,c=4,d=8,l=128,p=256,f="__lodash_placeholder__",h=Math.min;t.exports=i},function(t,e,n){var i=n(78),r=n(64),a=r(function(t,e,n){return i(t,e,n)});t.exports=a},function(t,e,n){function i(t,e,n){var i=s(t)?r:o;return n&&u(t,e,n)&&(e=void 0),"function"==typeof e&&void 0===n||(e=a(e,n,3)),i(t,e)}var r=n(107),a=n(108),o=n(123),s=n(19),u=n(48);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}t.exports=n},function(t,e,n){function i(t,e,n){var i=typeof t;return"function"==i?void 0===e?t:o(t,e,n):null==t?s:"object"==i?r(t):void 0===e?u(t):a(t,e)}var r=n(109),a=n(120),o=n(45),s=n(46),u=n(121);t.exports=i},function(t,e,n){function i(t){var e=a(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:(t=o(t),t[n]===i&&(void 0!==i||n in t))}}return function(t){return r(t,e)}}var r=n(110),a=n(117),o=n(13);t.exports=i},function(t,e,n){function i(t,e,n){var i=e.length,o=i,s=!n;if(null==t)return!o;for(t=a(t);i--;){var u=e[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){u=e[i];var c=u[0],d=t[c],l=u[1];if(s&&u[2]){if(void 0===d&&!(c in t))return!1}else{var p=n?n(d,l,c):void 0;if(!(void 0===p?r(l,d,n,!0):p))return!1}}return!0}var r=n(111),a=n(13);t.exports=i},function(t,e,n){function i(t,e,n,s,u,c){return t===e?!0:null==t||null==e||!a(t)&&!o(e)?t!==t&&e!==e:r(t,e,i,n,s,u,c)}var r=n(112),a=n(14),o=n(16);t.exports=i},function(t,e,n){function i(t,e,n,i,f,v,m){var b=s(t),y=s(e),k=l,w=l;b||(k=g.call(t),k==d?k=p:k!=p&&(b=c(t))),y||(w=g.call(e),w==d?w=p:w!=p&&(y=c(e)));var _=k==p&&!u(t),x=w==p&&!u(e),T=k==w;if(T&&!b&&!_)return a(t,e,k);if(!f){var S=_&&h.call(t,"__wrapped__"),M=x&&h.call(e,"__wrapped__");if(S||M)return n(S?t.value():t,M?e.value():e,i,f,v,m)}if(!T)return!1;v||(v=[]),m||(m=[]);for(var F=v.length;F--;)if(v[F]==t)return m[F]==e;v.push(t),m.push(e);var C=(b?r:o)(t,e,n,i,f,v,m);return v.pop(),m.pop(),C}var r=n(113),a=n(115),o=n(116),s=n(19),u=n(23),c=n(71),d="[object Arguments]",l="[object Array]",p="[object Object]",f=Object.prototype,h=f.hasOwnProperty,g=f.toString;t.exports=i},function(t,e,n){function i(t,e,n,i,a,o,s){var u=-1,c=t.length,d=e.length;if(c!=d&&!(a&&d>c))return!1;for(;++u<c;){var l=t[u],p=e[u],f=i?i(a?p:l,a?l:p,u):void 0;if(void 0!==f){if(f)continue;return!1}if(a){if(!r(e,function(t){return l===t||n(l,t,i,a,o,s)}))return!1}else if(l!==p&&!n(l,p,i,a,o,s))return!1}return!0}var r=n(114);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e){function n(t,e,n){switch(n){case i:case r:return+t==+e;case a:return t.name==e.name&&t.message==e.message;case o:return t!=+t?e!=+e:t==+e;case s:case u:return t==e+""}return!1}var i="[object Boolean]",r="[object Date]",a="[object Error]",o="[object Number]",s="[object RegExp]",u="[object String]";t.exports=n},function(t,e,n){function i(t,e,n,i,a,s,u){var c=r(t),d=c.length,l=r(e),p=l.length;if(d!=p&&!a)return!1;for(var f=d;f--;){var h=c[f];if(!(a?h in e:o.call(e,h)))return!1}for(var g=a;++f<d;){h=c[f];var v=t[h],m=e[h],b=i?i(a?m:v,a?v:m,h):void 0;if(!(void 0===b?n(v,m,i,a,s,u):b))return!1;g||(g="constructor"==h)}if(!g){var y=t.constructor,k=e.constructor;if(y!=k&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof k&&k instanceof k))return!1}return!0}var r=n(24),a=Object.prototype,o=a.hasOwnProperty;t.exports=i},function(t,e,n){function i(t){for(var e=a(t),n=e.length;n--;)e[n][2]=r(e[n][1]);return e}var r=n(118),a=n(119);t.exports=i},function(t,e,n){function i(t){return t===t&&!r(t)}var r=n(14);t.exports=i},function(t,e,n){function i(t){t=a(t);for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;){var s=n[e];o[e]=[s,t[s]]}return o}var r=n(24),a=n(13);t.exports=i},function(t,e,n){function i(t,e){var n=s(t),i=u(t)&&c(e),f=t+"";return t=p(t),function(s){if(null==s)return!1;var u=f;if(s=l(s),(n||!i)&&!(u in s)){if(s=1==t.length?s:r(s,o(t,0,-1)),null==s)return!1;u=d(t),s=l(s)}return s[u]===e?void 0!==e||u in s:a(e,s[u],void 0,!0)}}var r=n(50),a=n(111),o=n(51),s=n(19),u=n(52),c=n(118),d=n(53),l=n(13),p=n(54);t.exports=i},function(t,e,n){function i(t){return o(t)?r(t):a(t)}var r=n(12),a=n(122),o=n(52);t.exports=i},function(t,e,n){function i(t){var e=t+"";return t=a(t),function(n){return r(n,t,e)}}var r=n(50),a=n(54);t.exports=i},function(t,e,n){function i(t,e){var n=!0;return r(t,function(t,i,r){return n=!!e(t,i,r)}),n}var r=n(124);t.exports=i},function(t,e,n){var i=n(40),r=n(125),a=r(i);t.exports=a},function(t,e,n){function i(t,e){return function(n,i){var s=n?r(n):0;if(!a(s))return t(n,i);for(var u=e?s:-1,c=o(n);(e?u--:++u<s)&&i(c[u],u,c)!==!1;);return n}}var r=n(11),a=n(18),o=n(13);t.exports=i},function(t,e,n){var i=n(28),r=n(124),a=n(127),o=a(i,r);t.exports=o},function(t,e,n){function i(t,e){return function(n,i,o){return"function"==typeof i&&void 0===o&&a(n)?t(n,i):e(n,r(i,o,3))}}var r=n(45),a=n(19);t.exports=i},function(t,e,n){function i(t,e,n){var i=s(t)?r:o;return e=a(e,n,3),i(t,e)}var r=n(129),a=n(108),o=n(130),s=n(19);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}t.exports=n},function(t,e,n){function i(t,e){var n=-1,i=a(t)?Array(t.length):[];return r(t,function(t,r,a){i[++n]=e(t,r,a)}),i}var r=n(124),a=n(10);t.exports=i},function(t,e,n){function i(t,e){return r(t,a(e))}var r=n(128),a=n(121);t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&a(t,e,n)&&(e=0,n=i),r(t,e,n)):[]}var r=n(51),a=n(48);t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=0>n?o(i+n,0):n;else if(n){var s=a(t,e);return i>s&&(e===e?e===t[s]:t[s]!==t[s])?s:-1}return r(t,e,n||0)}var r=n(134),a=n(136),o=Math.max;t.exports=i},function(t,e,n){function i(t,e,n){if(e!==e)return r(t,n);for(var i=n-1,a=t.length;++i<a;)if(t[i]===e)return i;return-1}var r=n(135);t.exports=i},function(t,e){function n(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var a=t[r];if(a!==a)return r}return-1}t.exports=n},function(t,e,n){function i(t,e,n){var i=0,o=t?t.length:i;if("number"==typeof e&&e===e&&s>=o){for(;o>i;){var u=i+o>>>1,c=t[u];(n?e>=c:e>c)&&null!==c?i=u+1:o=u}return o}return r(t,e,a,n)}var r=n(137),a=n(46),o=4294967295,s=o>>>1;t.exports=i},function(t,e){function n(t,e,n,a){e=n(e);for(var s=0,u=t?t.length:0,c=e!==e,d=null===e,l=void 0===e;u>s;){var p=i((s+u)/2),f=n(t[p]),h=void 0!==f,g=f===f;if(c)var v=g||a;else v=d?g&&h&&(a||null!=f):l?g&&(a||h):null==f?!1:a?e>=f:e>f;v?s=p+1:u=p}return r(u,o)}var i=Math.floor,r=Math.min,a=4294967295,o=a-1;t.exports=n},function(t,e,n){function i(t,e,n){var i=[];if(!t||!t.length)return i;var o=-1,s=[],u=t.length;for(e=r(e,n,3);++o<u;){var c=t[o];e(c,o,t)&&(i.push(c),s.push(o))}return a(t,s),i}var r=n(108),a=n(139);t.exports=i},function(t,e,n){function i(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=a&&r(i)){var a=i;o.call(t,i,1)}}return t}var r=n(26),a=Array.prototype,o=a.splice;t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;return n&&a(t,e,n)&&(e=!1),i?r(t,e):[]}var r=n(141),a=n(48);t.exports=i},function(t,e,n){function i(t,e,n,c){c||(c=[]);for(var d=-1,l=t.length;++d<l;){var p=t[d];u(p)&&s(p)&&(n||o(p)||a(p))?e?i(p,e,n,c):r(c,p):n||(c[c.length]=p)}return c}var r=n(142),a=n(9),o=n(19),s=n(10),u=n(16);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}t.exports=n},function(t,e,n){function i(t,e,n,i){var u=t?t.length:0;return u?(null!=e&&"boolean"!=typeof e&&(i=n,n=o(t,e,i)?void 0:e,e=!1),n=null==n?n:r(n,i,3),e?s(t,n):a(t,n)):[]}var r=n(108),a=n(144),o=n(48),s=n(149);t.exports=i},function(t,e,n){function i(t,e){var n=-1,i=r,u=t.length,c=!0,d=c&&u>=s,l=d?o():null,p=[];l?(i=a,c=!1):(d=!1,l=e?[]:p);t:for(;++n<u;){var f=t[n],h=e?e(f,n,t):f;if(c&&f===f){for(var g=l.length;g--;)if(l[g]===h)continue t;e&&l.push(h),p.push(f)}else i(l,h,0)<0&&((e||d)&&l.push(h),p.push(f))}return p}var r=n(134),a=n(145),o=n(146),s=200;t.exports=i},function(t,e,n){function i(t,e){var n=t.data,i="string"==typeof e||r(e)?n.set.has(e):n.hash[e];return i?0:-1}var r=n(14);t.exports=i},function(t,e,n){(function(e){function i(t){return s&&o?new r(t):null}var r=n(147),a=n(20),o=a(e,"Set"),s=a(Object,"create");t.exports=i}).call(e,function(){return this}())},function(t,e,n){(function(e){function i(t){var e=t?t.length:0;for(this.data={hash:s(null),set:new o};e--;)this.push(t[e])}var r=n(148),a=n(20),o=a(e,"Set"),s=a(Object,"create");i.prototype.push=r,t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t){var e=this.data;"string"==typeof t||r(t)?e.set.add(t):e.hash[t]=!0}var r=n(14);t.exports=i},function(t,e){function n(t,e){for(var n,i=-1,r=t.length,a=-1,o=[];++i<r;){var s=t[i],u=e?e(s,i,t):s;i&&n===u||(n=u,o[++a]=s)}return o}t.exports=n},function(t,e,n){function i(t,e,n){return t=r(t),n=null==n?0:a(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}var r=n(55),a=Math.min;t.exports=i},function(t,e,n){function i(t,e,n){var i=t;return(t=r(t))?(n?s(i,e,n):null==e)?t.slice(u(t),c(t)+1):(e+="",t.slice(a(t,e),o(t,e)+1)):t}var r=n(55),a=n(152),o=n(153),s=n(48),u=n(154),c=n(156);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}t.exports=n},function(t,e){function n(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}t.exports=n},function(t,e,n){function i(t){for(var e=-1,n=t.length;++e<n&&r(t.charCodeAt(e)););return e}var r=n(155);t.exports=i},function(t,e){function n(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}t.exports=n},function(t,e,n){function i(t){for(var e=t.length;e--&&r(t.charCodeAt(e)););return e}var r=n(155);t.exports=i},function(t,e,n){var i;/** @license
	 * JS Signals <http://millermedeiros.github.com/js-signals/>
	 * Released under the MIT license
	 * Author: Miller Medeiros
	 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
	 */
!function(r){function a(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function o(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}a.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,i){var r,o=this._indexOfListener(t,n);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new a(this,t,e,n,i),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return o(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return o(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){o(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=s;u.Signal=s,i=function(){return u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)},function(t,e,n){!function(){"use strict";function e(t){this._core=t;var e=this;return this._installMapper=function(t){t.mapper=new i},{modifySBInstance:function(t){e._installMapper(t)}}}var i=n(159);e.defaultId="mapper",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){if(c.isString(t)===!1||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');c.isUndefined(e)&&(e=null),this.destinationVarPath=t,this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=void 0,this.preFormatters=[],this.defaultValue=e}function i(t){this.options=t,this.mapToCollection=[]}function r(t){i.call(this,t),this.templatesToApply=[]}function a(t,e){if(!t||!c.isFunction(t))throw new Error("routeFunc should be a function that receives src object as parameter and returns bool");if(!(e&&e instanceof i))throw new Error("mapConfig should be an instance of BfaMapperMapConfig");this.routeFunc=t,this.mapConfig=e}function o(t,e){this.mapName=t,this.options=e,this.routers=[],this.defaultMapConfig=null}function s(){this.mapRouters={},this.mapTemplates={},this._utils={utils:c,defs:d}}function u(t,e){if(c.isString(t)===!1||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');c.isUndefined(e)&&(e=null),this.destinationVarPath=t,this.mappings=[],this.defaultValue=e}var c=n(7),d=n(160);e.prototype.mappingTypes={sourcePath:1,"function":2},e.prototype.mapFrom=function(t,e){if(c.isFunction(t))this.mappingType=this.mappingTypes["function"],this.mappingFrom=t;else{if(!(c.isString(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(typeof t).toString());this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=t}return c.isArray(e)&&c.every(e,function(t){return t instanceof Function})&&this.preFormatters.push.apply(this.preFormatters,e),this},e.prototype.map=function(t,e,n){var i=this.defaultValue;if(!c.isUndefined(this.mappingFrom))switch(this.mappingType){case this.mappingTypes["function"]:i=this.mappingFrom.call(n,t,e);break;case this.mappingTypes.sourcePath:i=c.get(t,this.mappingFrom,this.defaultValue)}return c.isUndefined(i)&&(i=this.defaultValue),this.preFormatters.length>0&&c.forEach(this.preFormatters,function(t){i=t.call(n,i)}),c.set(e,this.destinationVarPath,i),i},i.prototype.addMapTo=function(t,n){var i=new e(t,n);return this.mapToCollection.push(i),i},r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.applyTemplateByName=function(t){-1===this.templatesToApply.indexOf(t)&&this.templatesToApply.push(t)},o.prototype.getMapConfig=function(t,e){for(var n=null,i=0;i<this.routers.length;i++){var r=this.routers[i];if(r.routeFunc.call(e,t)===!0){n=r.mapConfig;break}}return null===n&&(n=this.defaultMapConfig),n},o.prototype.createConfigForRoute=function(t){var e=new a(t,new r(this.options));return this.routers.push(e),e.mapConfig},o.prototype.createDefaultConfig=function(){return this.defaultMapConfig=new r(this.options),this.defaultMapConfig},s.prototype.addUtility=function(t,e){if(!this.validateName(t))throw new TypeError("`utilityName` have to be not empty string");if(c.has(this._utils,t))throw new Error("utility with "+t+" already exists");return this._utils[t]=e,this},s.prototype.getOrCreateMap=function(t,e){if(!this.validateName(t))throw new TypeError("mapName must be a not empty string");if(this.mapRouters[t])return this.mapRouters[t].defaultMapConfig;var n=new o(t,e);return this.mapRouters[t]=n,n.createDefaultConfig()},s.prototype.isExists=function(t){return c.has(this.mapRouters,t)},s.prototype.getOrCreateRouter=function(t,e){if(!this.validateName(t))throw new TypeError("`routeName` should be not empty string");if(c.has(this.mapRouters,t))return this.mapRouters[t];var n=new o(t,e);return this.mapRouters[t]=n,n},s.prototype.createMapTemplate=function(t,e){if(!this.validateName(t))throw new TypeError("`templateName` should be not empty string");if(c.has(this.mapTemplates[t]))return this.mapTemplates[t];var n=new i(e);return this.mapTemplates[t]=n,n},s.prototype.validateName=function(t){return!(c.isString(t)===!1||t.length<=0)},s.prototype.map=function(t,e,n){var i=this;if((c.isUndefined(n)||null===n)&&(n={}),c.isUndefined(e)||null===e)return n;if(!c.has(this.mapRouters,t))return n;var r=this.mapRouters[t].getMapConfig(e,i._utils);if(null===r)return n;var a=r.mapToCollection;a.length>0&&c.forEach(a,function(t){t.map(e,n,i._utils)});var o=r.templatesToApply;return o.length>0&&c.forEach(o,function(t){if(c.has(i.mapTemplates,t)){var r=i.mapTemplates[t].mapToCollection;c.forEach(r,function(t){t.map(e,n,i._utils)})}}),n},s.prototype.formatters={strToLowerCase:function(t){return c.isString(t)?t.toLowerCase():t},strCutTo255Characters:function(t){return c.isString(t)&&t.length>255?t.substr(0,255):t},strToInt:function(t){try{return parseInt(t)}catch(e){return t}}},u.prototype.mappingTypes={sourcePath:1,"function":2},u.prototype.mapFrom=function(t,e){var n={mappingFrom:t,preFormatters:[]};if(c.isFunction(t))n.mappingType=this.mappingTypes["function"];else{if(!(c.isString(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(typeof t).toString());n.mappingType=this.mappingTypes.sourcePath}return c.isArray(e)&&c.every(e,function(t){return t instanceof Function})&&n.preFormatters.push.apply(this.preFormatters,e),this.mappings.push(n),this},u.prototype.map=function(t,e,n){var i=this,r=c.get(e,this.destinationVarPath);if(r||(r=[]),!c.isArray(r))throw new TypeError('"Destination" is an object of wrong type: '+(typeof r).toString()+". Array is expected");c.forEach(this.mappings,function(a){var o=i.defaultValue;if(!c.isUndefined(a.mappingFrom))switch(a.mappingType){case i.mappingTypes["function"]:o=a.mappingFrom.call(n,t,e);break;case i.mappingTypes.sourcePath:o=c.get(t,a.mappingFrom,i.defaultValue)}c.isUndefined(o)&&(o=i.defaultValue),a.preFormatters.length>0&&c.forEach(a.preFormatters,function(t){o=t.call(n,o)}),r.push(o)}),c.set(e,this.destinationVarPath,r)},i.prototype.addMapToArray=function(t,e){var n=new u(t,e);return this.mapToCollection.push(n),n},t.exports=s}()},function(t,e){!function(){"use strict";var e={platform:{desktop:1,mobileweb:2,bflite:3},bfaMode:{develop:1,prod:2,test:3},trackingBehavior:{byDefault:1,ifSpecified:2}};Object.freeze(e),t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.pageReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.pageInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,pageInfo:{uri:{href:document.location.href,host:document.location.host,path:document.location.pathname,search:document.location.search,hash:document.location.hash,protocol:document.location.protocol}}},this.pageReady=new t.utils.Signal,this.pageChanged=new t.utils.Signal,this.settings=t.utils.defaultsDeep(e,this.defaultSettings);var r=this;return t._router.sub("general/page/{action}",function(e,n){if("ready"===n.action)return void(this.isReady||(this.isReady=!0,this.pageReady.dispatch()));if(!t.utils.isPlainObject(e))return void t.log.warn("page info must be a plain object");switch(n.action){case"set":this.settings.pageInfo=e;break;case"update":default:this.settings.pageInfo=t.utils.merge(this.settings.pageInfo,e)}this.pageChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.pageReady.dispatch())},this,{action:["ready","update","set"]}),t._onPageReady=function(t,e){n(t,e)},t._getPageInfo=function(){return i()},{modifySBInstance:function(t){t.getPageInfo=function(){return i()},t.onPageReady=function(t,e){n(t,e)},t.onPageChanged=function(t,e,n){r.pageChanged[n?"addOnce":"add"](t,e)}}}}e.defaultId="pageInfo",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.userReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.userInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,userInfo:{isLoggedIn:!1,referrer:document.referrer,userAgent:navigator.userAgent}};var r=this;return this.userReady=new t.utils.Signal,this.userChanged=new t.utils.Signal,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),t._router.sub("general/user/{action}",function(e,n){if("ready"===n.action)return void(this.isReady||(this.isReady=!0,this.userReady.dispatch()));if(!t.utils.isPlainObject(e))return void t.log.warn("user info must be a plain object");switch(n.action){case"set":this.settings.userInfo=e;break;case"update":default:this.settings.userInfo=t.utils.merge(this.settings.userInfo,e)}this.userChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.userReady.dispatch())},this,{action:["ready","update","set"]}),t._onUserReady=function(t,e){n(t,e)},t._getUserInfo=function(){return i()},{modifySBInstance:function(t){t.getUserInfo=function(){return i()},t.onUserReady=function(t,e){n(t,e)},t.onUserChanged=function(t,e,n){r.userChanged[n?"addOnce":"add"](t,e)}}}}e.defaultId="userInfo",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){e=e||{},this.defaultSettings={cookieName:"bfa_test"},this.settings=t.utils.defaultsDeep(e,this.defaultSettings);var n=t.utils.readCookie(this.settings.cookieName);return this._isTestMode=n.length>0&&"true"===n[0].value,this.updateGeneralSettings=function(e){e.mode!==t.defs.bfaMode.test&&t.push("general/settings/update",{mode:t.defs.bfaMode.test})},this._isTestMode&&(this.updateGeneralSettings(t._generalSettings),t._onGeneralSettingsChange.add(this.updateGeneralSettings,this)),{}}e.defaultId="testMode",e.require=["generalSettings"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){function n(){this._bfaMode=t._generalSettings.mode}function a(e,n){if(e instanceof i&&n){if(!t.utils.has(s.settings.appendersConfig,s._bfaMode))return;for(var r=s.settings.appendersConfig[s._bfaMode],a=0;a<r.length;a++)t.utils.has(s,r[a])&&s[r[a]].trackEvent(this.instanceId,e,n)}else t.log.warn("DebugTracker: can't store event data for "+this.instanceId+": not valid arguments")}function o(e){if(!t.utils.isString(e)||""===e)throw new Error("Error occurred on _createDebugTracker call: instanceId arg has to be not empty string");return{instanceId:e,trackEvent:a}}e=e||{},this.defaultSettings={storageKeyName:"bfa_debugStore",appendersConfig:{}},this.defaultSettings.appendersConfig[t.defs.bfaMode.develop]=[r.logger],this.defaultSettings.appendersConfig[t.defs.bfaMode.test]=[r.sessionStorage,r.logger],this.settings=t.utils.defaults(e,this.defaultSettings),this._bfaMode=t._generalSettings.mode,t._onGeneralSettingsChange.add(n,this);var s=this;return this[r.sessionStorage]={trackEvent:function(e,n,i){var r,a=window.sessionStorage.getItem(s.settings.storageKeyName);r=null===a?{pageHref:document.location.href}:JSON.parse(a),t.utils.isUndefined(r[e])&&(r[e]=[]),r[e].push({eventType:n.t,eventName:n.n,eventLocation:n.l,eventDescription:n.d,dataObject:i}),window.sessionStorage.setItem(s.settings.storageKeyName,JSON.stringify(r))}},this[r.logger]={trackEvent:function(t,e,n){var i={eventType:e.t,eventName:e.n,eventLocation:e.l,eventDescription:e.d,dataObject:n};this.logger.info(t+" tracked event: "+JSON.stringify(i))}},this[r.logger].logger=t.createLogger("DebugTracker_"+r.logger),t.createDebugTracker=o,{modifySBInstance:function(t){t.debugTracker=o(t.instanceId)}}}var i=n(165),r={logger:"loggerAppender",sessionStorage:"sessionStorageAppender"};e.defaultId="debugTracker",e.require=["generalSettings","logger"],t.exports=e,t.exports.debugTrackerAppenderTypes=r}()},function(t,e,n){!function(){"use strict";function e(t,e,n,r,a,o){this.t=t||"",this.n=e||"",this.l=n||"",this.d=r||"",this.data=i.isObject(a)?a:{},this.opt=i.isObject(o)?o:{}}var i=n(7);e.tryParse=function(t){var n=i.get(t,"t",""),r=i.get(t,"n","");return i.isString(n)&&0!==n.length&&i.isString(r)&&0!==r.length?new e(n,r,i.get(t,"l",""),i.get(t,"d",""),i.get(t,"data",{}),i.get(t,"opt",{})):null},t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.seedSocialFlagsReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.seedSocialFlags)}e=e||{},this.defaultSettings={isReady:!1,seedSocialFlags:void 0},this.utils=t.utils,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),this.seedSocialFlagsReady=new t.utils.Signal;var r=this;return r.settings.isReady||(t._onPageReady(function(){this.settings.pageInfo=t._getPageInfo(),this.tryCalculate()},this),t._onUserReady(function(){this.settings.userInfo=t._getUserInfo(),this.tryCalculate()},this)),this.tryCalculate=function(){this.settings.isReady||this.settings.pageInfo&&this.settings.userInfo&&(this.settings.seedSocialFlags=this.calculate(this.settings.pageInfo,this.settings.userInfo),this.settings.isReady=!0,this.seedSocialFlagsReady.dispatch())},t._onPostSeedSocialFlagsReady=function(t,e){n(t,e)},t._getPostSeedSocialFlags=function(){return i()},{modifySBInstance:function(t){t.getPostSeedSocialFlags=function(){return i()},t.onPostSeedSocialFlagsReady=function(t,e){n(t,e)}},calculate:function(t,e){return r.calculate(t,e)}}}e.prototype.calculate=function(t,e){var n=null;return t.post&&(n=this.isPromotedPost(t,e)?this.calculatePromotedFlags(t,e):this.calculateNotPromotedFlags(t,e)),n},e.prototype.isPromotedPost=function(t){return this.utils.get(t,"post.isPromoted",!1)===!0},e.prototype.isBuzzFeedRegex=/^https?:\/\/([^\/]+\.)?buzzfeed\.com(\/|$)/i,e.prototype.isBuzzFeedReferrer=function(t,e){if(!e.referrer||!e.referrer.match(this.isBuzzFeedRegex))return!1;if(0===t.uri.path.indexOf("/h2/")&&e.referrer.indexOf("buzzfeed.com/h1/")>-1){var n=null,i=this.utils.readCookie("HT_PRIMARY"),r=i.length>0?i[0].value:void 0;if(void 0!==r){var a=decodeURIComponent(r);a.length>4&&"not_available"!==a[4]&&(n=a[4])}if(null===n||!n.match(this.isBuzzFeedRegex))return!1}return!0},e.prototype.calculateNotPromotedFlags=function(t,e){if(!t||!e)return null;var n={seed:!1,social:!1};return this.isBuzzFeedReferrer(t,e)?n.seed=!0:n.social=!0,n},e.prototype.calculatePromotedFlags=function(t,e){if(!t||!e)return null;var n={seed:!1,social:!1,sodisco:!1},i=this.utils.readCookie("BUZZ_WIDGET"),r=i.length>0?i[0].value:void 0;return r&&t.uri.href.indexOf(r)>-1||window.IS_HASH_WIDGET_CLICK?(n.seed=!0,n.sodisco=!0):this.isBuzzFeedReferrer(t,e)===!0?t.uri.search.match(/([&\?]+b=1)/)?n.social=!0:n.seed=!0:(0===t.uri.path.indexOf("/h2/")||/google.com/.test(e.referrer)||/bing.com/.test(e.referrer)||/yahoo.com/.test(e.referrer)||/ask.com/.test(e.referrer)||/yahoo.com/.test(e.referrer)||/yandex/.test(e.referrer))&&(n.social=!0,n.sodisco=!0),n},e.require=["pageInfo","userInfo"],e.defaultId="postSeedSocialFlags",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.settings=e||{},this._binderBuilder=new i;var n=this;return t._router.sub("plugin/binder/activate",function(e){r.merge(n.settings,e||{}),r.merge(n._binderBuilder.buildConfig,n.settings),t.domi.onDomReady(function(){window.bfaBinder=n._binderBuilder.build()})},this,null,!0),{}}var i=n(168),r=n(7),a=n(171);window.bfaBinder={parser:new a},e.defaultId="binder",e.require=["domi"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){}var i=n(169),r=n(172),a=n(173),o=n(174),s=n(175),u=n(178),c=n(179),d=n(180),l=n(181),p=n(182);e.prototype.buildConfig={bfaFunctionName:null,domBinder:{delegatedMapping:null,directMapping:null},generalBinder:{pageExitBinder:!1},inViewImpressionBinder:{enabled:!1,locators:[]},scrollBinder:{pixelMode:{enabled:!1},elementMode:{enabled:!1,element:"",expected:0},checkpoints:[],bottomBounds:[]},socialBinder:{facebookMapping:null},videoBinder:{youtube:!1,vimeo:!1,facebook:!1}},e.prototype.useDomDelegatedBinder=function(t){return this.buildConfig.domBinder.delegatedMapping=t,this},e.prototype.useDomDirectBinder=function(t){return this.buildConfig.domBinder.directMapping=t,this},e.prototype.usePageExitBinder=function(){return this.buildConfig.generalBinder.pageExitBinder=!0,this},e.prototype.useInViewImpressionBinder=function(t){return this.buildConfig.inViewImpressionBinder.enabled=!0,this.buildConfig.inViewImpressionBinder.locators=t,this},e.prototype.useScrollPixelModeBinder=function(){return this.buildConfig.scrollBinder.pixelMode.enabled=!0,this},e.prototype.useScrollElementsModeBinder=function(t,e){return this.buildConfig.scrollBinder.elementMode.enabled=!0,this.buildConfig.scrollBinder.elementMode.element=t,this.buildConfig.scrollBinder.elementMode.expected=e,this},e.prototype.useSocialBinder=function(t){return this.buildConfig.socialBinder.mapping=t,this},e.prototype.setBottomBoundElements=function(t){return this.buildConfig.bottomBounds=t,this},e.prototype.setPercentageCheckpoints=function(t){this.scrollBinder.checkpoints=t},e.prototype.useBfaFunction=function(t){this.bfaFunctionName=t},e.prototype.useVideoBinder=function(){this.buildConfig.videoBinder.youtube=!0,this.buildConfig.videoBinder.vimeo=!0,this.buildConfig.videoBinder.facebook=!0},e.prototype.build=function(){if(!this.buildConfig.bfaFunctionName)return null;var t=new p;if(this.buildConfig.domBinder.delegatedMapping){var e=new i(this.buildConfig.domBinder.delegatedMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(e)}if(this.buildConfig.domBinder.directMapping){var n=new r(this.buildConfig.domBinder.directMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(n)}if(this.buildConfig.generalBinder.pageExitBinder){var f=new a(this.buildConfig.bfaFunctionName);t.generalBinders.push(f)}if(this.buildConfig.socialBinder.facebookMapping){var h=new o(this.buildConfig.socialBinder.facebookMapping,this.buildConfig.bfaFunctionName);t.socialBinders.push(h)}if(this.buildConfig.videoBinder.youtube){var g=new c(this.buildConfig.bfaFunctionName);t.videoBinders.push(g)}if(this.buildConfig.videoBinder.vimeo){var v=new d(this.buildConfig.bfaFunctionName);t.videoBinders.push(v)}if(this.buildConfig.videoBinder.facebook){var m=new l(this.buildConfig.bfaFunctionName);t.videoBinders.push(m)}if(this.buildConfig.scrollBinder.elementMode.enabled||this.buildConfig.scrollBinder.pixelMode.enabled){var b=new s(this.buildConfig.scrollBinder,this.buildConfig.bfaFunctionName);t.scrollBinders.push(b)}if(this.buildConfig.inViewImpressionBinder.enabled){var y=new u({locators:this.buildConfig.inViewImpressionBinder.locators},this.buildConfig.bfaFunctionName);t.scrollBinders.push(y)}return t.init(),t},t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.events=[],this.matches=document.documentElement.matches||document.documentElement.webkitMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector,this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var n=t[e],i=0;i<n.length;i++)n[i].trackMethod=e,this.events.push(n[i])},this.subscribeForEvents=function(){var t=document.body||document.documentElement,e=this;this.events=this.events.map(function(n){return n.handler=e.getHandler(),t.addEventListener(n.event,n.handler),n})},this.getHandler=function(){var t=this;return function(e){if(!e.bfaHandled&&e.target)for(var n=e.target;n;){for(var i=0;i<t.events.length;i++){var r=t.events[i];if(n.nodeType&&9!==n.nodeType&&r.event===e.type&&t.matches.call(n,r.selector)){var a=r.options?r.options.handlers:null;t.trackElement(n,r.trackMethod,a),e.bfaHandled=!0;break}}if(e.bfaHandled)break;n=n.parentNode}}},this.trackElement=function(t,n,r){if(r)for(var a=0;a<r.length&&!i[r[a]](t,e,n);a++);else{var o=i.DefaultHandler;o(t,e,n)}},this.disable=function(){for(var t=document.body||document.documentElement,e=0;e<this.events.length;e++)t.removeEventListener(this.events[e].event,this.events[e].handler)}}var i=n(170);t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){if(null===t||void 0===t||!("string"==typeof t||t instanceof String))return null;var e=t.match(g);return{url:e[0]?e[0]:"",scheme:e[2]?e[2]:"",host:e[4]?e[4]:"",path:e[5]?e[5]:"",cleanedPath:e[5]?e[5]:"",query:e[7]?e[7]:"",fragment:e[9]?e[9]:""}}function i(t){return!(t.scheme.length>0&&t.host.length>0&&-1===t.host.indexOf("buzzfeed.com")||0===t.url.indexOf("javascript:;"))}function r(t){return t.host&&t.scheme&&!(t.host.indexOf("buzzfeed.com")>-1)&&-1!==t.scheme.indexOf("http")}function a(t){return t.path+(t.query?"?"+t.query:"")}function o(t){return t.url}function s(t){var n=e(t);return null===n?"":r(n)?o(n):i(n)?a(n):""}function u(t){return!(t&&t.ignore instanceof Array)||-1===t.ignore.indexOf("bfaBinder")&&-1===t.ignore.indexOf("all")||t.force instanceof Array&&-1!==t.force.indexOf("bfaBinder")}function c(t,n){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var r=t.getAttribute("href"),o=e(r);if(null===o||!i(o))return!1;var s=new h,u=["track/click/Nav-Link",{t:"click",n:"Nav-Link",l:s.findLocation(t),data:{url:a(o)}}];return n&&window[n]instanceof Function&&window[n].apply(this,u),!0}function d(t,n){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var i=t.getAttribute("href"),a=e(i);if(!a||!r(a))return!1;var s=new h,u=["track/click/Exit-Link",{t:"click",n:"Nav-Link",l:s.findLocation(t),data:{url:o(a),anchorDesc:t.innerHTML}}];return n&&window[n]instanceof Function&&window[n].apply(this,u),!0}function l(t,e){if(null===t||"SELECT"!==t.nodeName)return!1;var n=t.options[t.selectedIndex];if(!n)return!1;if(!n.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(n);if(!u(r.options))return!1;n.hasAttribute("data-href")&&(r.data.url=s(n.getAttribute("data-href")));var a=["track/click/"+r.action,{t:"click",n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,a),!0}function p(t,e,n){if(null===t||"A"!==t.nodeName||!t.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(t);if(!u(r.options))return!1;r.data.url=s(t.getAttribute("href"));var a=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,a),!0}function f(t,e,n){if(null===t||!t.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(t);if(!u(r.options))return!1;var a=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,a),!0}var h=n(171),g=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");t.exports={ATagWithInternalLinkHandler:c,ATagWithExternalLinkHandler:d,ATagDefaultHandler:p,SelectTagChangedClickHandler:l,DefaultHandler:f}}()},function(t,e){!function(){"use strict";function e(t){this.defaultConfig={start:"@",end:";",separator:":",objectPropertySeparator:",",objectStart:"{",objectEnd:"}",arrayStart:"[",arrayEnd:"]",parts:{action:"a",description:"d",location:"l",data:"e",options:"o"}},this.config=t||this.defaultConfig,this.parse=function(t){var e={},n=t.getAttribute("data-bfa");return e=null===n||""===n?{action:"",location:"",description:"",data:{},options:{}}:this.processAttribute(n),""===e.location&&(e.location=this.findLocation(t.parentElement)),e.action=this.grabDataSource(e.action),e.location=this.grabDataSource(e.location),e.description=this.grabDataSource(e.description),e},this.processAttribute=function(t){var e=[];for(var n in this.config.parts)if(this.config.parts.hasOwnProperty(n)){var i=t.indexOf(this.config.start+this.config.parts[n]+this.config.separator);i>-1&&e.push({part:n,idx:i})}e=e.sort(function(t,e){return t.idx<e.idx?-1:t.idx===e.idx?0:1});for(var r={action:"",location:"",description:"",data:"",options:""},a=0;a<e.length;a++)a<e.length-1?r[e[a].part]=t.substring(e[a].idx,e[a+1].idx):r[e[a].part]=t.substring(e[a].idx);for(var o in r)r.hasOwnProperty(o)&&(r[o]=r[o].replace(this.config.start+this.config.parts[o]+this.config.separator,"").trim(),r[o][r[o].length-1]===this.config.end&&(r[o]=r[o].substring(0,r[o].length-1)));return r.data=this.convertToObject(r.data),r.options=this.convertToObject(r.options),r},this.findLocation=function(t){for(;null!==t&&t.getAttribute;){var e=t.getAttribute("data-bfa");if(null!==e&&""!==e){var n=this.processAttribute(e);if(""===n.location){t=t.parentElement;continue}return n.location}t=t.parentElement}return""},this.objectParseMode={propertyName:1,propertyValue:2,propertyArray:4},this.convertToObject=function(t){var e={};if(t=t.trim().replace('"',"").replace("'",""),"string"!=typeof t||0!==t.indexOf(this.defaultConfig.objectStart)||t.indexOf(this.defaultConfig.objectEnd)!==t.length-1)return e;for(var n="",i="",r="",a=this.objectParseMode.propertyName,o=1;o<t.length-1;o++)if(t[o]!==this.defaultConfig.separator||a!==this.objectParseMode.propertyName)switch(a){case this.objectParseMode.propertyArray:if(i||(i=[]),t[o]===this.defaultConfig.arrayEnd){i.push(r.trim()),e[n.trim()]=i,n="",r="",i="",a=this.objectParseMode.propertyName;break}if(t[o]===this.defaultConfig.objectPropertySeparator){i.push(r),r="";break}r+=t[o];break;case this.objectParseMode.propertyValue:t[o]===this.defaultConfig.objectPropertySeparator||o===t.length-2?(e[n.trim()]=(i+(t[o]!==this.defaultConfig.objectPropertySeparator?t[o]:"")).trim(),n="",i="",a=this.objectParseMode.propertyName):i+=t[o];break;case this.objectParseMode.propertyName:t[o]!==this.defaultConfig.objectPropertySeparator&&(n+=t[o])}else t[o+1]&&t[o+1]===this.defaultConfig.arrayStart?(a=this.objectParseMode.propertyArray,o++):a=this.objectParseMode.propertyValue;return e},this.grabDataSource=function(t){if(t.indexOf("source:")>-1){var e=t.replace("source:","").trim();if(e&&window){for(var n=window,i=e.split("."),r=i.pop(),a=0;a<i.length;a++)n=n[i[a]];var o=n[r];if(o)return o()}}return t}}t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.events=[],this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var n=t[e],i=0;i<n.length;i++)n[i].trackMethod=e,this.events.push(n[i])},this.subscribeForEvents=function(){var t=this;this.events=this.events.map(function(e){var n=document.querySelector(e.selector);if(n){var i=e.options?e.options.handlers:null;e.handler=t.getHandler(e.trackMethod,i),n.addEventListener(e.event,e.handler)}return e})},this.getHandler=function(t,e){var n=this;return function(i){n.trackElement(this,t,e),i.bfaHandled=!0}},this.trackElement=function(t,n,r){if(r)for(var a=0;a<r.length&&!i[r[a]](t,e,n);a++);else{var o=i.DefaultHandler;o(t,e,n)}},this.disable=function(){for(var t=0;t<this.events.length;t++){var e=document.querySelector(this.events[t].selector);e&&e.removeEventListener(this.events[t].event,this.events[t].handler)}}}var i=n(170);t.exports=e}()},function(t,e){!function(){"use strict";function e(t){this.visibilityProps={hidden:null,visibilityChange:null},this.trackedByVisibility=!1,this.trackedByUnload=!1;var e=this;this.init=function(){this.visibilityProps=this.getVisibilityProps(),this.visibilityProps.hidden&&this.visibilityProps.visibilityChange&&document.addEventListener(this.visibilityProps.visibilityChange,this.visibilityHandler,!1),window.addEventListener("beforeunload",this.unloadHandler,!1),window.addEventListener("unload",this.unloadHandler,!1)},this.visibilityHandler=function(){document[e.visibilityProps.hidden]||e.trackedByVisibility||(e.trackedByVisibility=!0,window[t].apply(this,["track/page/exit"]))},this.unloadHandler=function(){e.trackedByUnload||(e.trackedByUnload=!0,window[t].apply(this,["track/page/exit"]))},this.getVisibilityProps=function(){var t=null,e=null;return"undefined"!=typeof document.hidden?(t="hidden",e="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),{hidden:t,visibilityChange:e}}}t.exports=e}()},function(t,e,n){function i(t,e){"use strict";this.mapping=t,this.executable=e,this.parser=new r,this.init=function(){var t=this,e=0,n=setInterval(function(){e>=10&&clearInterval(n),window.FB&&(clearInterval(n),t.processMappings()),e++},1e3)},this.processMappings=function(){if(void 0!==t)for(var e=0;e<t.length;e++)"like"===t[e]&&this.bindLikes(),"unlike"===t[e]&&this.bindDislikes(),"comment"===t[e]&&this.bindComments()},this.bindLikes=function(){var t=this;window.FB.Event.subscribe("edge.create",function(e,n){if(null!==n&&n.getAttribute){var i=t.parser.parse(n),r=["track/click/"+i.action,{t:"click",n:i.action,d:i.description,l:i.location,data:i.data,opt:i.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,r)}})},this.bindDislikes=function(){var t=this;window.FB.Event.subscribe("edge.remove",function(e,n){var i=t.parser.parse(n),r=["track/click/"+i.action,{t:"click",n:i.action,d:i.description,l:i.location,data:i.data,opt:i.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,r);
})},this.bindComments=function(){var t=this;window.FB.Event.subscribe("comment.create",function(){var e=["track/click/Submit",{t:"click",n:"Submit",d:"Facebook",l:"Contributions"}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,e)})}}var r=n(171);t.exports=i},function(t,e,n){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.scrollHandler=null,this.keyPressHandler=null,this.init=function(){window&&t&&e&&(this.scrollHandler=this.getScrollHandler(),this.keyPressHandler=this.getKeyPressScrollHandler(),this.scrollHandler&&window.addEventListener("scroll",this.debounce(this.scrollHandler,200)),this.keyPressHandler&&document.addEventListener("keydown",this.debounce(this.keyPressHandler,200)))},this.getScrollHandler=function(){var e=null,n=null;return this.options.pixelMode.enabled&&(e=new i(this.options,this.executable),e.init()),this.options.elementMode.enabled&&(n=new r(this.options,this.executable),n.init()),function(){if(t.elementMode.enabled){var i=document.querySelectorAll(t.elementMode.element);i.length!==t.elementMode.expected?n.track():t.pixelMode.enabled&&e.track()}else t.pixelMode.enabled&&e.track()}},this.getKeyPressScrollHandler=function(){var t=this;return function(e){return 32===e.which||33===e.which||34===e.which||38===e.which||40===e.which||e.ctrlKey&&35===e.which||e.ctrlKey&&36===e.which&&t.scrollHandler?void t.scrollHandler():null}},this.debounce=function(t,e,n){var i;return function(){function r(){i=null,n||t.apply(a,o)}var a=this,o=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(r,e),s&&t.apply(a,o)}}}var i=n(176),r=n(177);t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){var t,e,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.clientHeight+1,r=document.documentElement.clientTop||document.body.clientTop||0,a=n+i,o=0;for(t=0;t<this.options.bottomBounds.length&&!(e=document.querySelector(this.options.bottomBounds[t]));t++);if(e){var s=e.getBoundingClientRect().top+n-r;a>=s&&100>o&&(o=100),s>=a&&(o=a/s*100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=o&&!this.points[t].passed){this.points[t].passed=!0;var u=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,u)}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){if(this.options.elementMode.element&&this.options.elementMode.expected){var t,e=window.pageYOffset+document.documentElement.clientHeight+1,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.clientTop||document.body.clientTop||0,r=document.querySelectorAll(this.options.elementMode.element),a=0;for(t=0;t<r.length;t++){var o=r[t].getBoundingClientRect().top+n-i;e>=o&&a++}var s=a/this.options.elementMode.expected*100,u=null;for(t=0;t<this.options.bottomBounds.length&&!(u=document.querySelector(this.options.bottomBounds[t]));t++);if(u){var c=u.getBoundingClientRect().top+n-i;e>=c&&100>s&&(s=100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=s&&!this.points[t].passed){this.points[t].passed=!0;var d=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,d)}}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.parser=new i,this.init=function(){if(window&&t&&e){var n=this.getHandler();n(),window.addEventListener("scroll",this.debounce(n,200)),document.addEventListener("keydown",this.debounce(this.getKeyPressHandler(),200))}},this.getKeyPressHandler=function(){var t=this,e=this.getHandler();return function(n){return 32===n.which||33===n.which||34===n.which||38===n.which||40===n.which||n.ctrlKey&&35===n.which||n.ctrlKey&&36===n.which&&t.scrollHandler?void e():null}},this.getHandler=function(){function e(t){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight+1,i=e+n,r=t.getBoundingClientRect().top+e,a=r+t.getBoundingClientRect().height;return i>=a&&r>=e}var n=this;return function(){if(n.options.locators){for(var i,r=[],a=0;a<n.options.locators.length;a++){var o=document.querySelectorAll(t.locators[a]);for(i=0;i<o.length;i++)if(e(o[i])&&(!o[i].hasAttribute("bfa-impression-tracked")||"false"===o[i].getAttribute("bfa-impression-tracked"))){var s=n.parser.parse(o[i]),u={t:"scroll",n:s.action,l:s.location,d:s.description,data:s.data,opt:s.options};r.push(u),o[i].setAttribute("bfa-impression-tracked",!0)}}if(n.executable&&window[n.executable]instanceof Function)for(i=0;i<r.length;i++){var c=["track/scroll/impression",r[i]];window[n.executable].apply(this,c)}}}},this.debounce=function(t,e,n){var i;return function(){function r(){i=null,n||t.apply(a,o)}var a=this,o=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(r,e),s&&t.apply(a,o)}}}var i=n(171);t.exports=e}()},function(t,e){!function(){"use strict";function e(t){this.inited=!1;var e=this;window.bfaYoutubeIframePlayerTracking||(window.bfaYoutubeIframePlayerTracking=function(t){e.processVideo(t)}),this.init=function(){this.inited=!0},this.processVideo=function(n){var i=n.getIframe(),r=i.getAttribute("id"),a=i.getAttribute("data-published"),o=i.getAttribute("src");n.addEventListener("onStateChange",function(n){if(e.inited){var i={id:r,duration:n.target.getDuration(),currentTime:n.target.getCurrentTime(),published:a,url:n.target.getVideoUrl(),source:"youtube"};switch(n.data){case 1:window[t].apply(this,["track/video/play",{data:i}]);break;case 2:window[t].apply(this,["track/video/pause",{data:i}]);break;case 0:window[t].apply(this,["track/video/finish",{data:i}]);break;case 3:window[t].apply(this,["track/video/startedBuffering",{data:i}])}}}),n.addEventListener("onError",function(n){if(e.inited){var i={id:r,published:a,url:o,source:"youtube",errorCode:n.data};window[t].apply(this,["track/video/error",{data:i}])}})}}t.exports=e}()},function(t,e){!function(){"use strict";function e(t){function e(t){/^https?:\/\/player.vimeo.com/.test(t.origin)&&n.processVideo(t)}this.inited=!1;var n=this;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e,!1),this.init=function(){this.inited=!0},this.processVideo=function(e){var i=JSON.parse(e.data);if("ready"===i.event&&this.registerListeners(i.player_id),this.inited)switch(i.event){case"play":window[t].apply(this,["track/video/play",{data:n.getVideoData(i)}]);break;case"pause":window[t].apply(this,["track/video/pause",{data:n.getVideoData(i)}]);break;case"finish":window[t].apply(this,["track/video/finish",{data:n.getVideoData(i)}])}},this.registerListeners=function(t){var e=document.getElementById(t);e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"play"}),"*"),e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"pause"}),"*"),e.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"finish"}),"*")},this.getVideoData=function(t){var e=document.getElementById(t.player_id);return{id:t.player_id,duration:t.data.duration,currentTime:t.data.seconds,published:e.getAttribute("data-published")||e.parentElement.getAttribute("data-published"),url:e.getAttribute("src"),source:"vimeo"}}}t.exports=e}()},function(t,e){!function(){"use strict";function e(t){var e=this;this.initCounter=0,this.init=function(){return window.FB?void window.FB.Event.subscribe("xfbml.ready",function(t){"video"===t.type&&e.processVideo(t)}):void(this.initCounter<10&&(this.initCounter++,setTimeout(function(){e.init()},500)))},this.processVideo=function(e){var n=document.getElementById(e.id),i=e.instance,r={id:e.id,published:n.getAttribute("data-published"),url:n.getAttribute("src"),source:"facebook"};i.subscribe("startedPlaying",function(){r.duration=e.instance.getDuration(),r.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/play",{data:r}])}),i.subscribe("paused",function(){r.duration=e.instance.getDuration(),r.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/pause",{data:r}])}),i.subscribe("finishedPlaying",function(){r.duration=e.instance.getDuration(),r.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/finish",{data:r}])}),i.subscribe("startedBuffering",function(){r.duration=e.instance.getDuration(),r.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/startedBuffering",{data:r}])}),i.subscribe("finishedBuffering",function(){r.duration=e.instance.getDuration(),r.currentTime=e.instance.getCurrentPosition(),window[t].apply(this,["track/video/finishedBuffering",{data:r}])}),i.subscribe("error",function(){window[t].apply(this,["track/video/error",{data:r}])})}}t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){this.domBinders=[],this.socialBinders=[],this.scrollBinders=[],this.generalBinders=[],this.videoBinders=[],this.parser=new i;var t;this.init=function(){for(t=0;t<this.domBinders.length;t++)this.domBinders[t].init();for(t=0;t<this.socialBinders.length;t++)this.socialBinders[t].init();for(t=0;t<this.scrollBinders.length;t++)this.scrollBinders[t].init();for(t=0;t<this.generalBinders.length;t++)this.generalBinders[t].init();for(t=0;t<this.videoBinders.length;t++)this.videoBinders[t].init()}}var i=n(171);t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){return t._router.sub("track",function(e){if(t.utils.isArray(e)){var n=new i(e[0],e[1],e[2],e[3],e[4],e[5]);""!==n.t&&t.push("track/"+n.t+"/"+n.n,n)}},this),{}}var i=n(165);e.defaultId="legacyTrackSupport",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){function e(e,n,r){if(!t.utils.isString(e)||0===e.length)return!1;if(!(r instanceof i))return!1;var a=-1!==t.utils.indexOf(t.utils.values(t.defs.trackingBehavior),n)?n:t.defs.trackingBehavior.byDefault,o=r.opt,s=!1;switch(a){case t.defs.trackingBehavior.ifSpecified:t.utils.isPlainObject(o)&&t.utils.isArray(o.force)&&(-1!==o.force.indexOf("all")||-1!==o.force.indexOf(e))&&(s=!0);break;case t.defs.trackingBehavior.byDefault:default:(!t.utils.isPlainObject(o)||!t.utils.isArray(o.ignore)||-1===o.ignore.indexOf("all")&&-1===o.ignore.indexOf(e)||t.utils.isArray(o.force)&&-1!==o.force.indexOf(e))&&(s=!0)}return s}function n(e,n,r){return e=e||{},e instanceof i?e:(t.utils.isString(e.t)&&0!==e.t.length||(e.t=n),t.utils.isString(e.n)&&0!==e.n.length||(e.n=r),i.tryParse(e))}return{modifySBInstance:function(t){t.canTrackEvent=e,t.tryConvertToEventInfo=n}}}var i=n(165);e.defaultId="trackingUtils",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){e=e||{},this.defaultSettings={isReady:!1,enabled:!1,maxAttempts:20,attemptDelay:100},this.poundIdResult=void 0,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),this.poundIdReadySignal=new t.utils.Signal;var n=this;return this._onPoundIdReady=function(t,e){n.settings.isReady===!0&&t.call(e),n.poundIdReadySignal.add(t,e)},this._activate=function(){n.settings.isReady=!0,n.poundIdReadySignal.dispatch()},this._getPoundIdFromUrlHash=function(t){var e="";if(window.pound&&window.pound.identity){var n=new window.pound.identity.Unique;e=n.unhashed(t.slice(1)).toString()}return{poundId:e,isFromUrl:!0}},this._getPoundIdNative=function(){var t="";return window.bf_visit&&window.bf_visit.unique&&(t=window.bf_visit.unique.unhashed(window.bf_visit.unique.hashed())),{poundId:t,isFromUrl:!1}},t.domi.onDomReady(function(){if(n.settings.enabled)var t=0,e=setInterval(function(){return""!==window.location.hash?(n.poundIdResult=n._getPoundIdFromUrlHash(window.location.hash),n._activate(),void clearInterval(e)):(t===n.settings.maxAttempts&&(n.poundIdResult=n._getPoundIdNative(),n._activate(),clearInterval(e)),void t++)},n.settings.attemptDelay);else n.poundIdResult=n._getPoundIdNative(),n._activate()},this),{modifySBInstance:function(t){t.getPoundId=function(){return n.poundIdResult},t.onPoundIdReady=function(t,e){n._onPoundIdReady(t,e)}}}}e.require=["domi"],e.defaultId="poundId",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){e=e||{},this._defaultSettings={extFilePath:null,sessionId:Date.now().toString(32)+(1e8*Math.random()|0).toString(32)},this.settings=t.utils.defaultsDeep(e,this._defaultSettings),this.pixiedustReady=new t.utils.Signal,this.active=!1;var n=this;return this._onPixiedustReady=function(t,e){n.active===!0&&t.call(e),n.pixiedustReady.add(t,e)},this.activate=function(){if(!this.active&&window.Pixiedust){this.pixiedust=new window.Pixiedust,this.pixiedust.setSessionVars({session_id:this.settings.sessionId});var e={env:t._generalSettings.env};e.sampling_rate=this.settings.samplingRate||0,e.sampling_rate_options={buzz_recommendation_impression:this.settings.poundSamplingRate||0,buzz_recommendation_click:this.settings.poundSamplingRate||0},this.pixiedust.start(e),this.active=!0,this.pixiedustReady.dispatch()}},t.domi.onDomReady(function(){n.settings.extFilePath&&t.domi.loadScript({src:n.settings.extFilePath},n.activate,null,n),n.activate()},this),{modifySBInstance:function(t){t.sendToPixiedust=function(t){n.active?n.pixiedust.push(t):n.pixiedustReady.add(function(){n.pixiedust.push(t)},this)},t.onPixiedustReady=function(t,e){n._onPixiedustReady(t,e)}}}}e.defaultId="pixiedust",e.require=["domi"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"bf_s",tracker:null,configMapsDelegate:null,extFilesPaths:[]};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(n.generalSettings.mode!==t.defs.bfaMode.prod)return void(n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&(t.log.info("Active"),n._active=!0,t.moduleActive.dispatch()));if(!n.tracker){if(!window[n.settings.extTrackerGlobalName])return void t.log.warn("External adobe lib is still not loaded");n.tracker=window[n.settings.extTrackerGlobalName],t.log.info("External adobe lib is loaded")}n.tracker.isReadyToTrack()?n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&(t.log.info("active"),n._active=!0,t.moduleActive.dispatch()):(t.log.warn("External adobe lib is still not ready to track. Subscribed on `callbackWhenReadyToTrack`"),n.tracker.callbackWhenReadyToTrack(n,n.activate))}},t.onGeneralSettingsChange(function(){this.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){this.page=t.getPageInfo(),this.activate()},this),t.onUserReady(function(){this.user=t.getUserInfo(),this.activate()},this),t.onPostSeedSocialFlagsReady(function(){this.postSeedSocialFlags=t.getPostSeedSocialFlags(),this.activate()},this),this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);var n=t.tryConvertToEventInfo(e,"page","view");if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,n)){if(n.data.page=this.page,n.data.user=this.user,n.data.seedSocialFlags=this.postSeedSocialFlags,!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/page/view",n,this.tracker),this.tracker.t();break;default:t.mapper.map("track/page/view",n,this.tracker),t.debugTracker.trackEvent(n,this.tracker)}t.log.info("`page view` event successfully tracked")}},t.subOn("track/page/view",this._trackPage,this),this._trackScroll=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackScroll,this,e,n),this);var i=t.tryConvertToEventInfo(e,"scroll",n.eventName);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)&&this.page.post){if(i.data.page=this.page,i.data.user=this.user,!t.mapper.isExists("track/scroll"))return void t.log.error("Mapping for `track/scroll` doesn't exist");if(this.page.post.isPromoted===!0||"100"===i.d){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/scroll",i,this.tracker),this.tracker.tl(!0,"o",i.d+"%");break;default:t.mapper.map("track/scroll",i,this.tracker),t.debugTracker.trackEvent(i,this.tracker)}t.log.info("`scroll tracking` "+i.d+"% event successfully tracked")}}},t.subOn("track/scroll/{eventName}",this._trackScroll,this),this._trackDefault=function(e,n,i){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackDefault,this,e,n,i),this);var r=t.tryConvertToEventInfo(e,n,i);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)){if(r.data.page=this.page,r.data.user=this.user,r.data.seedSocialFlags=this.postSeedSocialFlags,!t.mapper.isExists("track/"+n))return void t.log.error("Mapping for `track/"+n+"` doesn't exist");switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/"+n,r,this.tracker),this.tracker.tl(!0,"o","search"===n?"searchResult":n);break;default:t.mapper.map("track/"+n,r,this.tracker),t.debugTracker.trackEvent(r,this.tracker)}t.log.info("Event successfully tracked. Type: "+r.t+"; Name: "+r.n+"; Location: "+r.l+"; Desc: "+r.d+";")}},this._trackClick=function(t,e){this._trackDefault(t,"click",e.eventName)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackSearch=function(t,e){this._trackDefault(t,"search",e.eventName)},t.subOn("track/search/{eventName}",this._trackSearch,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")}}}e.defaultId="adobeIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker","postSeedSocialFlags"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"LOTCC",tracker:null,configMapsDelegate:null,extFilesPaths:["https://tags.crwdcntrl.net/c/6942/cc.js?ns=_cc6942"]};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(!n.tracker&&n.generalSettings.mode===t.defs.bfaMode.prod){if(!window[n.settings.extTrackerGlobalName])return void t.log.warn("External Lotame lib is still not loaded");n.tracker=window[n.settings.extTrackerGlobalName],t.log.info("External Lotame lib is loaded")}n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&!t.utils.isUndefined(n.poundId)?(t.log.info("Active"),n._active=!0,t.moduleActive.dispatch()):t.log.warn("External Lotame lib is still not ready to track.")}},t.onGeneralSettingsChange(function(){n.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){n.page=t.getPageInfo(),n.activate()},this),t.onUserReady(function(){n.user=t.getUserInfo(),n.activate()},this),t.onPostSeedSocialFlagsReady(function(){n.postSeedSocialFlags=t.getPostSeedSocialFlags(),n.activate()},this),t.onPoundIdReady(function(){n.poundId=t.getPoundId(),n.activate()},this),this._addToTrackerFromDto=function(e,n){for(var i in n)if(n.hasOwnProperty(i))if(t.utils.isArray(n[i]))for(var r=0;r<n[i].length;r++)e.add(i.toString(),n[i][r]);else e.add(i.toString(),n[i])},this._trackDefault=function(e,n,i,r){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackDefault,this,e,n,i,r),this);var a=t.tryConvertToEventInfo(e,n,i);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,a)){a.data.page=this.page,a.data.user=this.user,a.data.seedSocialFlags=this.postSeedSocialFlags,r&&(a.data.poundId=this.poundId);var o=r?"track/page/view":"track/"+n;if(!t.mapper.isExists(o))return void t.log.error("Mapping for `"+o+"` doesn't exist");var s=t.mapper.map(o,a,{});if(t.utils.keys(s).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:this._addToTrackerFromDto(this.tracker,s),this.tracker.bcp();break;default:t.debugTracker.trackEvent(a,s)}t.log.info("Event successfully tracked. Type: "+a.t+"; Name: "+a.n+"; Location: "+a.l+"; Desc: "+a.d+";")}else t.log.info("Event won't be tracked to Lotame, because object is empty after mapping. Type: "+a.t+"; Name: "+a.n+"; Location: "+a.l+"; Desc: "+a.d+";")}},this._trackPage=function(t){this._trackDefault(t,"page","view",!0)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(t,e){this._trackDefault(t,"click",e.eventName,!1)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName,!1)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e,id:"LOTCC_6942"},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")},isInited:function(){return n._inited},isActive:function(){return n._active}}}e.defaultId="LotameIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker","postSeedSocialFlags","poundId"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){this._inited=!1,this._active=!1,this.pixiedustPluginReady=!1,this.generalSettings=t.getGeneralSettings(),this.settings=t.settings||{};var e=this;return this.activate=function(){!e._active&&e._inited&&(this.pixiedustPluginReady&&this.page&&this.user&&!t.utils.isUndefined(this.postSeedSocialFlags)&&!t.utils.isUndefined(this.poundId)?(t.log.info("Active"),e._active=!0,t.moduleActive.dispatch()):t.log.warn("External pixiedust lib is still not ready to track."))},t.onGeneralSettingsChange(function(){e.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){e.page=t.getPageInfo(),e.activate()},this),t.onUserReady(function(){e.user=t.getUserInfo(),e.activate()},this),t.onPixiedustReady(function(){e.pixiedustPluginReady=!0,e.activate()},this),t.onPostSeedSocialFlagsReady(function(){e.postSeedSocialFlags=t.getPostSeedSocialFlags(),e.activate()},this),t.onPoundIdReady(function(){e.poundId=t.getPoundId(),e.activate()},this),this.getEventInfo=function(e,n,i){var r=t.tryConvertToEventInfo(e,n,i);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)?(r.data.page=this.page,r.data.user=this.user,r.data.seedSocialFlags=this.postSeedSocialFlags,r.data.poundId=this.poundId,r):(t.log.info(t.moduleId+" cannot track current event. Type: "+n+"; Name: "+i+";"),null)},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");var n=this.getEventInfo(e,"page","view");this._trackDefault(n,"track/page/view")},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackClick,this,e,n),this);if(!t.mapper.isExists("track/click"))return void t.log.error("Mapping for `track/click` doesn't exist");var i=this.getEventInfo(e,"click",n.eventName);this._trackDefault(i,"track/click")},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackPound=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPound,this,e,n),this);if(!t.mapper.isExists("track/pound"))return void t.log.error("Mapping for `track/pound` doesn't exist");var i=this.getEventInfo(e,"pound",n.eventName);this._trackDefault(i,"track/pound")},t.subOn("track/pound/{eventName}",this._trackPound,this),this._trackImpression=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackImpression,this,e,n),this);if(!t.mapper.isExists("track/scroll"))return void t.log.error("Mapping for `track/scroll` doesn't exist");var i=this.getEventInfo(e,"scroll",n.eventName);this._trackDefault(i,"track/scroll")},t.subOn("track/scroll/{eventName}",this._trackImpression,this),this._trackDefault=function(e,n){e.data.env=this.generalSettings.mode===t.defs.bfaMode.prod?"prod":"dev";var i=t.mapper.map(n,e,{});if(t.utils.keys(i).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.sendToPixiedust(i);break;default:t.debugTracker.trackEvent(e,i),t.sendToPixiedust(i)}t.log.info("Event successfully tracked. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")}else t.log.info("Event won't be tracked to Pixiedust, because object is empty after mapping. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")},{init:function(){return t.utils.isFunction(e.settings.configMapsDelegate)?(e.settings.configMapsDelegate(t.mapper),e._inited=!0,t.moduleInited.dispatch(),t.log.info("inited"),void e.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")}}}e.defaultId="PixiedustIntegration",e.require=["logger","pixiedust","pageInfo","userInfo","debugTracker","mapper","trackingUtils","generalSettings","postSeedSocialFlags","poundId"],t.exports=e}()},function(t,e){!function(){"use strict";t.exports=function(t){var e=t.createMapTemplate("dfpAdobeDefault");e.addMapTo("eVar50","").mapFrom(function(t){return this.utils.get(t,"data.adpartner","")}),e.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|"+t.n+"|"+(t.d?t.d:"Big-Story"!==t.l&&"Bottom-Promo"!==t.l||!t.data.adbuzzid?"(no description)":t.data.adbuzzid)}),e.addMapTo("eVar52","").mapFrom(function(t){return this.utils.get(t,"data.adbuzzurl","").replace(/^(https?|ftp):\/\//,"").replace(/^[^\/]*?buzzfeed.com\//,"").replace(/#(.*)/,"")},[t.formatters.strToLowerCase]);var n=t.getOrCreateMap("track/page/view");n.addMapTo("pageName").mapFrom(function(t){if(this.utils.has(t.data.page.post))return t.data.page.post.name.toLowerCase();var e=this.utils.trim(t.data.page.uri.cleanedPath,"/");return""===e||"index"===e.toLowerCase()?"{{home}}":e}),n.addMapTo("channel").mapFrom("data.page.metavertical"),n.addMapTo("eVar25").mapFrom(function(t){return"index"===t.data.page.type?"home":"Error"===t.data.page.templateType?"Error":t.data.page.type}),n.addMapTo("eVar26").mapFrom(function(t){return(t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile web")+"|"+t.data.page.country+"|"+t.data.page.language},[t.formatters.strToLowerCase]),n.addMapTo("eVar1","").mapFrom("data.user.id"),n.addMapTo("eVar2","visitor").mapFrom(function(t){return t.data.user.isLoggedIn?t.data.user.isAdmin?"administrator":t.data.user.isEditor?"editor":t.data.user.isAdvertiser?"advertiser":"user":"visitor"}),n.addMapTo("referrer","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)?e="http://msgr.facebook.com":n.match(/fban/)&&!e.match(/m\.facebook/)?e="http://app.facebook.com":n.match(/twitter/i)?e="http://app.twitter.com":n.match(/pinterest/i)&&(e="http://app.pinterest.com")}return e}),n.addMapTo("eVar31","none").mapFrom("data.page.post.id"),n.addMapTo("prop32","").mapFrom(function(t){var e=this.utils.get(t,"data.page.post.published");return e?e.substr(0,10):""}),n.addMapTo("eVar34","").mapFrom("data.page.post.author"),n.addMapTo("eVar61","").mapFrom(function(t){return null!==this.utils.get(t,"data.seedSocialFlags",null)&&this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.seedSocialFlags.social&&!t.data.seedSocialFlags.sodisco?"BuzzFeed organic":"Not organic":""}),n.addMapTo("eVar49","").mapFrom(function(t){if(null!==this.utils.get(t,"data.seedSocialFlags",null)&&this.utils.get(t,"data.page.post.isPromoted",!1)===!0){if(t.data.seedSocialFlags.seed)return"Seed";if(t.data.seedSocialFlags.social)return"Social"}return""}),n.addMapTo("eVar35","").mapFrom(function(t){var e="";if(!t.data.page.post)return e;switch(t.data.page.post.listFormat){case"long":e="Longform";break;case"breaking":e="Breaking";break;case"dec_up":e="Numbered List";break;case"dec_down":e="Countdown List";break;case"none":case"disc":e="Plain List";break;default:e="Article"}switch(t.data.page.post.postFormat){case"wide":e+=",Wide";break;default:e+=",Standard"}return e}),n.addMapTo("eVar39","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)!==!0?"":"long"===t.data.page.post.listFormat?this.utils.get(t,"data.page.post.wordsCount",0):t.data.page.post.mainSubBuzzAmount}),n.addMapTo("eVar36","").mapFrom(function(t){return this.utils.get(t,"data.page.post.category","none")},[t.formatters.strToLowerCase]),n.addMapTo("eVar37","").mapFrom(function(t){return t.data.page.post?"raw:"+t.data.page.post.raw.toString()+",editor:"+t.data.page.post.editor.toString()+",ad:"+t.data.page.post.ad.toString()+",nsfw:"+t.data.page.post.nsfw.toString()+",partner:"+t.data.page.post.partner.toString()+",user:"+t.data.page.post.user.toString()+",trigger:"+t.data.page.post.trigger.toString():""}),n.addMapTo("eVar38","").mapFrom("data.page.post.badges",[t.formatters.strToLowerCase]),n.addMapTo("list1","").mapFrom(function(t){var e=this.utils.get(t,"data.page.post.tags",null);if(!e)return"";var n=e.indexOf("--primarykeyword-");return n>-1&&(e=e.substring(n+"--primarykeyword-".length)),e.replace(/(--([^,]*),)/g,"")},[t.formatters.strToLowerCase]),n.addMapTo("events","").mapFrom(function(t){return t.data.page.post?"event31":""}),n.addMapTo("eVar40","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.page.post.id:""}),n.addMapTo("eVar45","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.page.post.author:""}),n.addMapTo("list2","").mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted",!1)===!0&&t.data.page.post.tags&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return e}),n.addMapTo("pageType","").mapFrom(function(t){return"Error"===t.data.page.templateType?"errorPage":""}),n.addMapTo("events","").mapFrom(function(t,e){return"/post"===this.utils.get(t,"data.page.uri.cleanedPath","")?e.events?e.events+",event44":"event44":e.events;
}),n.addMapTo("events","").mapFrom(function(t,e){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?e.events?e.events+",event33":"event33":e.events}),n.addMapTo("eVar33","").mapFrom(function(t){return this.utils.get(t,"data.page.post.publishedAgo","").toString()});var i=t.getOrCreateRouter("track/click"),r=i.createConfigForRoute(function(t){return"Share"===t.n});r.addMapTo("eVar8","+1"),r.addMapTo("eVar41","").mapFrom(function(t){return t.data.idx?t.d+":"+t.n+":"+t.l+":"+t.data.idx:t.d+":"+t.n+":"+t.l},[t.formatters.strToLowerCase]),r.addMapTo("events","event41"),r.addMapTo("linkTrackVars","eVar8,eVar41,events"),r.addMapTo("linkTrackEvents","event41");var a=i.createConfigForRoute(function(t){return"Standard-Reaction"===t.n||"Gif-Reaction"===t.n||"Standard"===t.n&&"Reactions"===t.l});a.addMapTo("eVar7","+1"),a.addMapTo("eVar42","").mapFrom("d",[t.formatters.strToLowerCase]),a.addMapTo("events","event42"),a.addMapTo("linkTrackVars","eVar7,eVar42,events"),a.addMapTo("linkTrackEvents","event42");var o=i.createConfigForRoute(function(t){return"Submit"===t.n&&"Contributions"===t.l});o.addMapTo("eVar9","+1"),o.addMapTo("eVar43","").mapFrom("d",[t.formatters.strToLowerCase]),o.addMapTo("events","event43"),o.addMapTo("linkTrackVars","eVar9,eVar43,events"),o.addMapTo("linkTrackEvents","event43");var s=i.createConfigForRoute(function(t){return"Thumbstrip"===t.l&&"Thumb-dfp"===t.n});s.applyTemplateByName("dfpAdobeDefault"),s.addMapTo("eVar40","").mapFrom("data.adbuzzid"),s.addMapTo("eVar56","").mapFrom(function(t){return this.utils.get(t,"data.adtitle","")+"|"+this.utils.get(t,"data.adimageurl","").replace(/^(https?|ftp):\/\/[^\/]*?buzzfee?d.com\/static\//,"")},[t.formatters.strToLowerCase]),s.addMapTo("linkTrackVars","eVar52,eVar51,eVar56,eVar40,eVar50,events"),s.addMapTo("linkTrackEvents","event50,event56,event51"),s.addMapTo("events","event50,event56,event51");var u=i.createConfigForRoute(function(t){return-1!==t.n.indexOf("-dfp")&&"Username-dfp"!==t.n});u.applyTemplateByName("dfpAdobeDefault"),u.addMapTo("linkTrackVars","eVar52,eVar51,eVar50,events"),u.addMapTo("linkTrackEvents","event50,event51"),u.addMapTo("events","event50,event51");var c=i.createConfigForRoute(function(t){return"Exit-Link"===t.n});c.addMapTo("eVar54","").mapFrom(function(t){return this.utils.get(t,"data.url","").replace(/^(https?|ftp):\/\//,"").replace(/#(.*)/,"")},[t.formatters.strToLowerCase]),c.addMapTo("eVar53","").mapFrom("data.anchorDesc",[t.formatters.strToLowerCase]),c.addMapTo("linkTrackVars","eVar54,eVar53,events"),c.addMapTo("linkTrackEvents","event53"),c.addMapTo("events","event53");var d=i.createConfigForRoute(function(t){return"CMS"===t.l&&"Publish-Now"===t.d});d.addMapTo("eVar10","+1"),d.addMapTo("events","event45"),d.addMapTo("linkTrackVars","eVar10,events"),d.addMapTo("linkTrackEvents","event45");var l=i.createConfigForRoute(function(t){return"Login"===t.n&&"Account-Set-Up"===t.d});l.addMapTo("events","event5"),l.addMapTo("linkTrackVars","events"),l.addMapTo("linkTrackEvents","event5");var p=i.createConfigForRoute(function(t){return"Login"===t.n&&"Sign-Up"===t.d});p.addMapTo("events","event1"),p.addMapTo("linkTrackVars","events"),p.addMapTo("linkTrackEvents","event1");var f=i.createConfigForRoute(function(t){return"Login"===t.n&&"Sign-Up-FB"===t.d});f.addMapTo("events","event2"),f.addMapTo("linkTrackVars","events"),f.addMapTo("linkTrackEvents","event2");var h=i.createConfigForRoute(function(t){return"Login"===t.n&&("Sign-In-FB"===t.d||"Sign-In-Google"===t.d||"Sign-In"===t.d)});h.addMapTo("eVar3","").mapFrom("data.platform"),h.addMapTo("events","event3"),h.addMapTo("linkTrackVars","eVar3,events"),h.addMapTo("linkTrackEvents","event3");var g=i.createConfigForRoute(function(t){return"Login"===t.n&&"Newsletter"===t.d});g.addMapTo("events","event4"),g.addMapTo("linkTrackVars","events"),g.addMapTo("linkTrackEvents","event4");var v=i.createDefaultConfig();v.addMapTo("eVar52","").mapFrom("data.url",[t.formatters.strToLowerCase]),v.addMapTo("eVar51","").mapFrom(function(t){var e=""!==t.d?t.d:"(no description)";return-1!==t.n.indexOf("Video-")&&t.data.videoUrl&&(e=t.data.videoUrl.replace(/^(https?|ftp):\/\/(www\.)?/,"").replace(/\?.*/,"")),t.l+"|"+t.n+"|"+e}),v.addMapTo("linkTrackVars","eVar52,eVar51,events"),v.addMapTo("linkTrackEvents","event51"),v.addMapTo("events","event51");var m=t.getOrCreateMap("track/search",{});m.addMapTo("linkTrackVars","eVar58,prop59,events"),m.addMapTo("linkTrackEvents","event58"),m.addMapTo("eVar58","").mapFrom("data.keywords",[t.formatters.strToLowerCase,t.formatters.strCutTo255Characters]),m.addMapTo("prop59","").mapFrom("data.resultsCount"),m.addMapTo("events","event58");var b=t.getOrCreateRouter("track/quiz",{});t.addUtility("getAnswerStr",function(t){return t.data?t.data.quizId+"|"+t.data.questionId+"|"+t.data.answerId:""});var y=b.createConfigForRoute(function(t){return"Answer"===t.n&&"poll"!==t.data.quizType});y.addMapTo("eVar46","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),y.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|Quiz-Answer|(no description)"}),y.addMapTo("linkTrackVars","eVar46,eVar51,events"),y.addMapTo("linkTrackEvents","event46"),y.addMapTo("events","event46");var k=b.createConfigForRoute(function(t){return"Answer"===t.n&&"poll"===t.data.quizType});k.addMapTo("eVar46","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),k.addMapTo("eVar47","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),k.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|Poll-Answer|(no description)"}),k.addMapTo("linkTrackVars","eVar46,eVar47,eVar51,events"),k.addMapTo("linkTrackEvents","event46,event47"),k.addMapTo("events","event46,event47");var w=b.createConfigForRoute(function(t){return"Complete"===t.n});w.addMapTo("eVar47","").mapFrom(function(t){return t.data?t.data.quizId+"|"+t.data.result:""},[t.formatters.strToLowerCase]),w.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|Quiz-Complete|(no description)"}),w.addMapTo("linkTrackVars","eVar47,eVar51,events"),w.addMapTo("linkTrackEvents","event47"),w.addMapTo("events","event47");var _=t.getOrCreateMap("track/scroll",{});t.addUtility("getEvent",function(t){var e="";switch(t.d){case"25":e="event37";break;case"50":e="event38";break;case"75":e="event39";break;case"100":e="event32"}return e}),_.addMapTo("linkTrackVars","events"),_.addMapTo("linkTrackEvents","").mapFrom(function(t){return this.getEvent(t)}),_.addMapTo("events","").mapFrom(function(t){return this.getEvent(t)})}}()},function(t,e){!function(){"use strict";function e(){var t={LINUX:"Linux",MAC_OS:"MacOs",UNIX:"Unix",UNKNOWN:"Unknown",WINDOWS:"Windows"},e="";return e=-1!==navigator.appVersion.indexOf("Win")?t.WINDOWS:-1!==navigator.appVersion.indexOf("Mac")?t.MAC_OS:-1!==navigator.appVersion.indexOf("X11")?t.UNIX:-1!==navigator.appVersion.indexOf("Linux")?t.LINUX:t.UNKNOWN}t.exports=function(t){var n=t.getOrCreateRouter("track/click"),i=n.createConfigForRoute(function(t){return"Feed"===t.l});i.addMapTo("page_url","").mapFrom("data.page.uri.path",[t.formatters.strToLowerCase]),i.addMapTo("page_type","").mapFrom("data.page.templateType",[t.formatters.strToLowerCase]),i.addMapTo("type","unit_click"),i.addMapTo("source","buzz_web"),i.addMapTo("artifact_location_uid","").mapFrom("data.obj_id",[t.formatters.strToInt]),i.addMapTo("artifact_type","").mapFrom("data.obj_type"),i.addMapTo("artifact_id",null),i.addMapTo("artifact_location_id",null),i.addMapTo("post_category","").mapFrom("data.post_category",[t.formatters.strToLowerCase]),i.addMapTo("variation_id",null),i.addMapTo("client_id","").mapFrom("data.poundId.poundId",[t.formatters.strToInt]),i.addMapTo("os",e()),i.addMapTo("mode").mapFrom(function(t){return t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile"}),i.addMapTo("unit").mapFrom(function(t){return""!==t.l?t.l:""},[t.formatters.strToLowerCase]),i.addMapTo("position").mapFrom(function(t){return""!==t.d?t.d:""},[t.formatters.strToInt]);var r=t.getOrCreateRouter("track/scroll"),a=r.createConfigForRoute(function(t){var e=5,n="dev"===t.data.env||document.location.search.indexOf("bfadebug=true")>-1;return"impression"===t.n&&!this.utils.isUndefined(t.data)&&!this.utils.isUndefined(t.data.obj_id)&&(!this.utils.isUndefined(t.data.poundId)&&!this.utils.isUndefined(t.data.poundId.poundId)&&t.data.poundId.poundId%(1/(e/100))===e||n)});a.addMapTo("page_url","").mapFrom("data.page.uri.path",[t.formatters.strToLowerCase]),a.addMapTo("page_type","").mapFrom("data.page.templateType",[t.formatters.strToLowerCase]),a.addMapTo("type","unit_impression"),a.addMapTo("source","buzz_web"),a.addMapTo("artifact_location_uid","").mapFrom("data.obj_id",[t.formatters.strToInt]),a.addMapTo("artifact_type","").mapFrom("data.obj_type"),a.addMapTo("artifact_id",null),a.addMapTo("artifact_location_id",null),a.addMapTo("post_category","").mapFrom("data.post_category",[t.formatters.strToLowerCase]),a.addMapTo("variation_id",null),a.addMapTo("client_id","").mapFrom("data.poundId.poundId",[t.formatters.strToInt]),a.addMapTo("os",e()),a.addMapTo("mode").mapFrom(function(t){return t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile"}),a.addMapTo("unit").mapFrom(function(t){return""!==t.l?t.l:""},[t.formatters.strToLowerCase]),a.addMapTo("position").mapFrom(function(t){return""!==t.d?t.d:""},[t.formatters.strToInt])}}()},function(t,e){!function(){"use strict";function e(t,e){var n=e.get(t,"data.seedSocialFlags",null);return n?n.seed?"Seed":n.social?"Social":"Unknown":""}function n(t,n){var i=n.get(t,"data.seedSocialFlags",null),r="";i&&(r=i.sodisco?"SoDisco":"NonSoDisco");var a=e(t,n);return r+a}t.exports=function(t){var i=t.getOrCreateRouter("track/page/view"),r=i.createConfigForRoute(function(t){return"buzz"===this.utils.get(t,"data.page.type")});r.addMapTo("seg","").mapFrom(function(t){if(this.utils.has(t,"data.page.post.tags")){var e=this.utils.get(t,"data.page.post.tags").split(",").filter(function(t){return null!==t&&void 0!==t&&""!==t});return e.map(function(t){return"tag:"+t})}}),r.addMapToArray("med","").mapFrom(function(t){return"section:"+this.utils.get(t,"data.page.post.category")}).mapFrom(function(t){return"type:"+(this.utils.get(t,"data.page.post.isPromoted")?"sponsored":"editorial")}).mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted")===!0&&this.utils.has(t,"data.page.post.tags")&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return"theme: "+e}),r.addMapToArray("comp","").mapFrom(function(t){return"username:"+this.utils.get(t,"data.page.post.author")}),r.addMapToArray("adv","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)||n.match(/fban/)&&!e.match(/m\.facebook/)?e="Facebook":n.match(/twitter/i)?e="Twitter":n.match(/pinterest/i)?e="Pinterest":(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],e=e.split(":")[0])}return"socialreferral: "+e}).mapFrom(function(t){var e="mobileapp";switch(t.data.page.platform){case 1:e="desktop";break;case 2:e="mobileweb"}return"platform: "+e}).mapFrom(function(t){return"edition: "+t.data.page.country}),r.addMapToArray("geo","").mapFrom(function(t){if(this.utils.get(t,"data.page.post.isPromoted")){var e=n(t,this.utils);return"sponsored: "+e}}).mapFrom(function(t){if(this.utils.get(t,"data.page.post.isPromoted")){var e=n(t,this.utils);return"sponsored - "+e+": buzzID-"+this.utils.get(t,"data.page.post.id")}}).mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted")?"sponsored: buzzID-"+this.utils.get(t,"data.page.post.id"):void 0}),r.addMapToArray("int","").mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n}}).mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n+": buzzID-"+this.utils.get(t,"data.page.post.id")}}).mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted")?void 0:"editorial: buzzID-"+this.utils.get(t,"data.page.post.id")}).mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n+": section-"+this.utils.get(t,"data.page.post.category")}}),r.addMapToArray("tpid","").mapFrom("data.poundId.poundId"),r.addMapTo("tp","BUZZ");var a=t.getOrCreateRouter("track/click"),o=a.createConfigForRoute(function(t){return"Share"===t.n});o.addMapToArray("act","").mapFrom(function(t){return"share: "+t.d}).mapFrom(function(t){return"share: "+t.d+" : section-"+this.utils.get(t,"data.page.post.category")}).mapFrom(function(t){var n=this.utils.get(t,"data.page.post.isPromoted")?"sponsored":"editorial",i=e(t,this.utils);return"share: "+t.d+" : "+n+"-"+i});var s=a.createConfigForRoute(function(t){return"Bookmark"===t.n});s.addMapTo("act","bookmark");var u=t.getOrCreateRouter("track/quiz"),c=u.createConfigForRoute(function(t){return"Answer"===t.n});c.addMapTo("act","AnsweredQuiz");var d=u.createConfigForRoute(function(t){return"Complete"===t.n});d.addMapTo("act","CompletedQuiz")}}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"fbq",tracker:null,configMapsDelegate:null,extFilesPaths:[],facebookId:"224284281076687",trackingUrl:"https://www.facebook.com/tr"};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(!this.tracker&&this.generalSettings.mode===t.defs.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return void t.log.warn("External Facebook lib is still not loaded");this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("init",this.settings.facebookId),t.log.info("External Facebook lib is loaded")}this.page&&n.user?(t.log.info("Active"),this._active=!0,t.moduleActive.dispatch()):t.log.warn("External Facebook lib is still not ready to track.")}},t.onGeneralSettingsChange(function(){n.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){n.page=t.getPageInfo(),n.activate()},this),t.onUserReady(function(){n.user=t.getUserInfo(),n.activate()},this),this.getEventInfo=function(e,n,i){var r=t.tryConvertToEventInfo(e,n,i);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)?(r.data.page=this.page,r.data.user=this.user,r):(t.log.info(t.moduleId+" cannot track current event. Type: "+n+"; Name: "+i+";"),null)},this._trackDefault=function(e,n){var i="";if("fbEventName"in n&&(i=n.fbEventName,delete n.fbEventName),null!==n&&t.utils.keys(n).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:this.tracker("trackCustom",i,n);break;default:t.debugTracker.trackEvent(e,n)}t.log.info("Event successfully tracked. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")}else t.log.info("Event won't be tracked to Facebook, because object is empty after mapping. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);var n=this.getEventInfo(e,"page","view");if(!t.mapper.isExists("track/page/view"))return void t.log.error("Mapping for `track/page/view` doesn't exist");var i=t.mapper.map("track/page/view",n,{});this._trackDefault(n,i)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackClick,this,e,n),this);var i=this.getEventInfo(e,"click",n.eventName);if(!t.mapper.isExists("track/click"))return void t.log.error("Mapping for `track/click` doesn't exist");var r=t.mapper.map("track/click",i,{});this._trackDefault(i,r)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackQuiz,this,e,n),this);var i=this.getEventInfo(e,"quiz",n.eventName);if(!t.mapper.isExists("track/quiz"))return void t.log.error("Mapping for `track/quiz` doesn't exist");var r=t.mapper.map("track/quiz",i,{});this._trackDefault(i,r)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")},isInited:function(){return n._inited},isActive:function(){return n._active}}}e.defaultId="FacebookAudienceIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker"],t.exports=e}()},function(t,e){!function(){"use strict";t.exports=function(t){var e=t.getOrCreateRouter("track/page/view"),n=e.createConfigForRoute(function(t){return"buzz"===this.utils.get(t,"data.page.type")});n.addMapTo("fbEventName","PageView"),n.addMapTo("tag","").mapFrom(function(t){if(this.utils.has(t,"data.page.post.tags")){var e=this.utils.get(t,"data.page.post.tags").split(",").filter(function(t){return!!t});return e.join(",")}}),n.addMapTo("section","").mapFrom(function(t){return this.utils.get(t,"data.page.post.category")}),n.addMapTo("theme","").mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted")===!0&&this.utils.has(t,"data.page.post.tags")&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return e}),n.addMapTo("username","").mapFrom(function(t){return this.utils.get(t,"data.page.post.author")}),n.addMapTo("socialreferral","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)||n.match(/fban/)&&!e.match(/m\.facebook/)?e="Facebook":n.match(/twitter/i)?e="Twitter":n.match(/pinterest/i)?e="Pinterest":(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],e=e.split(":")[0])}return e});var i=t.getOrCreateRouter("track/click"),r=i.createConfigForRoute(function(t){return"Share"===t.n});r.addMapTo("fbEventName","Share"),r.addMapTo("share","").mapFrom(function(t){return t.d});var a=t.getOrCreateRouter("track/quiz"),o=a.createConfigForRoute(function(t){return"Complete"===t.n});o.addMapTo("fbEventName","CompletedQuiz"),o.addMapTo("CompletedQuiz","true")}}()},function(t,e){!function(){"use strict";function e(t){function e(t){a._playheadCounter||a._playheadInterval||(a.videoTracker.ggPM("loadMetadata",t),a._playheadCounter=0),a._playheadInterval=setInterval(function(){a._playheadCounter++,a.videoTracker.ggPM("setPlayheadPosition",a._playheadCounter.toString())},1e3)}function n(t){a._playheadInterval&&(clearInterval(a._playheadInterval),a._playheadInterval=null,a.videoTracker.ggPM("stop",t.playheadPosition))}function i(t){a._playheadCounter&&a._playheadInterval&&(clearInterval(a._playheadInterval),a.videoTracker.ggPM("end",t.playheadPosition),a._playheadInterval=null,a._playheadCounter=null)}var r={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"NOLCMB",staticTracker:null,videoTracker:null,staticConfig:{apid:"T7A907367-6D97-4DFD-AF90-B51EDF8D9AC5",sfcode:"dcr-cert",apn:"test-static"},videoConfig:{apid:"T7A907367-6D97-4DFD-AF90-B51EDF8D9AC5",sfcode:"dcr-cert",apn:"buzzfeedVideos"},configMapsDelegate:null,extFilesPaths:["https://secure-dcr-cert.imrworldwide.com/novms/js/2/ggcmb500.js"]};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},r),this.generalSettings=t.getGeneralSettings();var a=this;return this._getConfig=function(e){return this.generalSettings.mode===t.defs.bfaMode.develop&&(e.nol_sdkDebug="console"),e},this.activate=function(){if(!this._active&&this._inited){if(this.generalSettings.mode===t.defs.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return void t.log.warn("External Nielsen lib is still not loaded");var e=window[this.settings.extTrackerGlobalName];this.staticTracker||(this.staticTracker=e.getInstance("static_instance"),this.staticTracker.ggInitialize(this._getConfig(this.settings.staticConfig))),this.videoTracker||(this.videoTracker=e.getInstance("video_instance"),this.videoTracker.ggInitialize(this._getConfig(this.settings.videoConfig))),t.log.info("External Nielsen lib is loaded")}this.page?(t.log.info("Active"),a._active=!0,t.moduleActive.dispatch()):t.log.warn("External Nielsen lib is still not ready to track.")}},t.onGeneralSettingsChange(function(){a.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){a.page=t.getPageInfo(),a.activate()},this),this._getEventInfo=function(e,n,i){var r=t.tryConvertToEventInfo(e,n,i);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)?(r.data.page=this.page,r):(t.log.info("Event won't be tracked to Nielsen because of `Event type` and `Tracking behavior`. Type: "+r.t+"; Name: "+r.n+"; Location: "+r.l+"; Desc: "+r.d+";"),null)},this._successfullyTracked=function(e){t.log.info("Event successfully tracked. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);if(!t.mapper.isExists("track/page/view"))return void t.log.error("Mapping for `track/page/view` doesn't exist");var n=this._getEventInfo(e,"page","view");if(n){var i=t.mapper.map("track/page/view",n,{});this.generalSettings.mode===t.defs.bfaMode.prod?this.staticTracker.ggPM("staticstart",i):t.debugTracker.trackEvent(n,i),this._successfullyTracked(n)}},t.subOn("track/page/view",this._trackPage,this),this._trackVideo=function(r,a){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackVideo,this,r,a),this);if(!t.mapper.isExists("track/video"))return void t.log.error("Mapping for `track/video` doesn't exist");var o=this._getEventInfo(r,"video",a.eventName);if(o){var s=t.mapper.map("track/video",o,{});if(this.generalSettings.mode===t.defs.bfaMode.prod)switch(a.eventName){case"play":e(s);break;case"pause":n(s);break;case"stop":i(s)}else t.debugTracker.trackEvent(o,s);this._successfullyTracked(o)}},t.subOn("track/video/{eventName}",this._trackVideo,this),{init:function(){return t.utils.isFunction(a.settings.configMapsDelegate)?(a.settings.configMapsDelegate(t.mapper),a.generalSettings.mode===t.defs.bfaMode.prod?(a.staticTracker=a.settings.staticTracker,a.videoTracker=a.settings.videoTracker,!a.staticTracker&&!a.videoTracker&&!window[a.extTrackerGlobalName]&&a.settings.extFilesPaths&&a.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(a.settings.extFilesPaths,function(e){t.domi.loadScript({src:e},a.activate,null,a)})},a))):(a.staticTracker={},a.videoTracker={}),a._inited=!0,t.log.info("Inited"),t.moduleInited.dispatch(),void a.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")},isInited:function(){return a._inited},isActive:function(){return a._active}}}e.defaultId="NielsenIntegration",e.require=["logger","domi","pageInfo","mapper","trackingUtils","generalSettings","debugTracker"],t.exports=e}()},function(t,e){!function(){"use strict";t.exports=function(t){var e=t.getOrCreateMap("track/page/view");e.addMapTo("type","static"),e.addMapTo("assetid","").mapFrom(function(){var t=parseInt(Date.now()+1e10*Math.random());return t.toString(16)}),e.addMapTo("section","").mapFrom(function(t){return this.utils.get(t,"data.page.post.category",null)||this.utils.get(t,"data.page.templateType")},[t.formatters.strToLowerCase]),e.addMapTo("segA","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted")?"sponsored":"editorial"}),e.addMapTo("segB","").mapFrom(function(t){var e="mobile app";switch(t.data.page.platform){case 1:e="desktop";break;case 2:e="mobile web"}return e}),e.addMapTo("segC","").mapFrom("data.page.country");var n=t.getOrCreateRouter("track/video"),i=n.createConfigForRoute(function(t){return"play"===t.n});i.addMapTo("type","content"),i.addMapTo("length","").mapFrom("data.duration"),i.addMapTo("title","").mapFrom("data.id"),i.addMapTo("assetid","").mapFrom("data.id"),i.addMapTo("airdate","").mapFrom(function(t){return t.data.published?t.data.published.replace(/-/g,""):""}),i.addMapTo("isfullepisode","Y"),i.addMapTo("segB","").mapFrom(function(t){var e="mobile app";switch(t.data.page.platform){case 1:e="desktop";break;case 2:e="mobile web"}return e}),i.addMapTo("segC","").mapFrom("data.page.country");var r=n.createConfigForRoute(function(t){return"pause"===t.n});r.addMapTo("playheadPosition","").mapFrom("data.currentTime");var a=n.createConfigForRoute(function(t){return"finish"===t.n});a.addMapTo("playheadPosition","").mapFrom("data.duration")}}()},function(t,e,n){!function(){"use strict";t.exports.Core=n(198)}()},function(t,e,n){(function(t){!function(){"use strict";function e(){this._modules={},this._plugins={},this._instances={},this._router=new a,this.inited=new r,this.active=new r,this.crashed=new r,this._inited=!1,this._active=!1,this._crashed=!1,this.crashed.add(function(){this._crashed=!0,this.log.info("CRASHED")},this,Number.MAX_VALUE);var t=this;this._router.sub("bfa/subscribe/{action}/{eventName}",this._subscribe,this,{action:["add","addOnce","remove"],eventName:function(e){return t.utils.isString(e)&&e.length>0}}),this.inited.add(function(){this._inited=!0,this.log.info("inited")},this,Number.MAX_VALUE),this.active.add(function(){this._active=!0,this.log.info("active")},this,Number.MAX_VALUE),this.Sandbox=function(t,e,n,i){return this.instanceId=e,this.moduleInited=new r,this.moduleActive=new r,this.fillModuleRoute=function(t){return"module/"+e+"/"+t},this.subOn=function(e,n,i){t._router.sub(e,n,i)},this.settings=n||{},this.moduleId=i,this.utils=t.utils,this.defs=t.defs,this},this.construct.dispatch(this)}var i=n(7),r=i.Signal,a=n(200),o=n(160);e.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},e.prototype.construct=new r,e.prototype.utils=i,e.prototype.defs=o,e.prototype._subscribe=function(t,e){return this.utils.isPlainObject(t)&&this.utils.isPlainObject(e)&&this[e.eventName]instanceof r&&this.utils.isFunction(t.fn)&&t.context&&this[e.eventName][e.action](t.fn,t.context),this},e.prototype.registerModule=function(t,e,n){if(this._inited===!0)return this.log.warn("You can't register module after activation"),this;e=e||{};var i=this.utils.checkType("function",t,"module")||this.utils.checkType("object",e,"settings");if(i)throw new TypeError(i);if(!this.utils.isString(n)&&this.utils.isString(t.defaultId)&&(n=t.defaultId),!this.utils.isString(n)||0===n.length)throw new TypeError("moduleId has to be specified (as third argument or as `id` property of module) and must be not empty string");return this.utils.has(this._modules,n)?(this.log.warn("module "+n+" was already registered"),this):(this.push("module/"+n+"/added"),this._modules[n]={Creator:t,settings:e,id:n},this)},e.prototype.plugin=function(t,e,n){if(this._inited===!0)return this.log.warn("You can't add plugins after activation"),this;e=e||{};var i=this.utils.checkType("function",t,"plugin")||this.utils.checkType("object",e,"settings");if(i)throw new TypeError(i);if(!this.utils.isString(n)&&this.utils.isString(t.defaultId)&&(n=t.defaultId),!this.utils.isString(n)||0===n.length)throw new TypeError("pluginId has to be specified (as third argument or as `id` property of plugin) and must be not empty string");return this.utils.has(this._plugins,n)?(this.log.warn("plugin "+n+" was already registered"),this):(this._plugins[n]={Creator:t,instance:null,settings:e,id:n},this.log.warn("plugin "+n+" registered"),this)},e.prototype.activatePlugins=function(){function t(r,a){i.utils.isArray(a)||(a=[]),a.push(r),n[r]=!0,i.utils.forEach(i.utils.get(i._plugins[r],"Creator.require",[]),function(e){if(i.utils.isUndefined(i._plugins[e]))throw new Error("Can't resolve \""+e+'" for "'+r+'" plugin');if(a.indexOf(e)>=0)throw new Error('Circular dependency "'+e+'" is required by "'+r+'" plugin: '+a.join(" -> "));n[e]||t(e,a.slice(0))},i),e.indexOf(r)<0&&e.push(r)}if(this._crashed===!0)return void this.log.warn("Plugins activation interrupted");var e=[],n={},i=this;try{this.utils.forOwn(this._plugins,function(e){t(e.id)},this);for(var r=0;r<e.length;r++){var a=e[r];null===this._plugins[a].instance?(this._plugins[a].instance=new this._plugins[a].Creator(this,this._plugins[a].settings),this.push("plugin/"+a+"/added"),this.log.info("Plugin "+a+" added successfully")):this.log.info("Plugin "+a+" already added and activated")}}catch(o){return this.log.error(o),this.log.warn("Plugins activation interrupted"),void this.crashed.dispatch()}},e.prototype.activate=function(){if(this._inited===!0)return void this.log.warn("Already initialized");if(this.activatePlugins(),this._crashed===!0)return void this.log.warn("Activation interrupted");this.log.info("Modules activation started");var e=this;this.utils.forOwn(this._modules,function(e){var n=e.Creator.defaultId,i=!1;this.utils.isString(e.settings.instanceId)&&(n=e.settings.instanceId);var r=new this.Sandbox(this,n,e.settings,e.Creator.defaultId);if(this.utils.isArray(e.Creator.require)&&e.Creator.require.length>0)for(var a=0;a<e.Creator.require.length;a++){var o=e.Creator.require[a];if(!this.utils.has(this._plugins,o)||!this.utils.has(this._plugins[o].instance,"modifySBInstance")){i="Module "+e.Creator.defaultId+" require plugin "+o;break}this._plugins[o].instance.modifySBInstance(r)}if(!i){var s=new e.Creator(r);this.utils.has(s,"init")?(this._instances[n]={module:s,sandbox:r},this.push("module/"+n+"/added"),this.log.info("Module "+n+" added successfully")):i="Constructor of module "+t.defaultId+" returned not valid object"}i&&(this.log.error(i),this.log.warn("Instance "+n+" of module "+t.defaultId+" is not added properly"))},this);var n=this.utils.keys(this._instances).length,i=this.utils.after(n,function(){e.inited.dispatch(e)}),r=this.utils.after(n,function(){e.active.dispatch(e)});this.utils.forOwn(this._instances,function(t){t.sandbox.moduleInited.addOnce(i),t.sandbox.moduleActive.addOnce(r),this.utils.defer(t.module.init)},this)},e.prototype.push=function(){this._router.pub.apply(this._router,arguments)},t.exports=e}()}).call(e,n(199)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){!function(){"use strict";function e(){this._router=i.create(),this._routes={},this._router.normalizeFn=i.NORM_AS_OBJECT,this._router.ignoreState=!0,this._router.greedy=!0,this._routes=[]}var i=n(201),r=n(7);e.prototype.pub=function(t){if(r.isString(t)){var e,n=r.slice(arguments,1);1===n.length?e=n[0]:n.length>1&&(e=n),this._router.parse(t,[e])}return this},e.prototype.modifySubCB=function(t,e,n){return r.startsWith(t,"track/")?function(){e.apply(n,r.cloneDeep(Array.prototype.slice.call(arguments)))}:e},e.prototype.sub=function(t,e,n,i,a){if(!r.isString(t)||r.isEmpty(t))return this.log.error("`route` must be not empty string"),this;if(!r.isFunction(e))return this.log.error("`cb` must be a function"),this;if(i&&!r.isObject(i))return this.log.error("`rules` must be an object or not specified"),this;var o=this.modifySubCB(t,e,n),s=a?"addOnce":"add";if(r.has(this._routes,t)||i)if(i){
var u=this._router.addRoute(t);u.rules=i,u.matched[s](o,n)}else this._routes[t].matched[s](o,n);else this._routes[t]=this._router.addRoute(t),this._routes[t].matched[s](o,n);return this},e.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},t.exports=e}()},function(t,e,n){var i,r,a;/** @license
	 * crossroads <http://millermedeiros.github.com/crossroads.js/>
	 * Author: Miller Medeiros | MIT License
	 * v0.12.2 (2015/07/31 18:37)
	 */
!function(){var o=function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function n(t,n){var i=e(t,n);-1!==i&&t.splice(i,1)}function i(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function r(t){return i(t,"RegExp")}function a(t){return i(t,"Array")}function o(t){return"function"==typeof t}function s(t){var e;return e=null===t||"null"===t?null:"true"===t?!0:"false"===t?!1:t===h||"undefined"===t?h:""===t||isNaN(t)?t:parseFloat(t)}function u(t){for(var e=t.length,n=[];e--;)n[e]=s(t[e]);return n}function c(t,e){for(var n,i,r,o,u=(t||"").replace("?","").split("&"),c=-1,d={};i=u[++c];)n=i.indexOf("="),o=i.substring(0,n),r=decodeURIComponent(i.substring(n+1)),e!==!1&&(r=s(r)),o in d?a(d[o])?d[o].push(r):d[o]=[d[o],r]:d[o]=r;return d}function d(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function l(e,n,i,a){var o=r(e),s=a.patternLexer;this._router=a,this._pattern=e,this._paramsIds=o?null:s.getParamIds(e),this._optionalParamsIds=o?null:s.getOptionalParamsIds(e),this._matchRegexp=o?e:s.compilePattern(e,a.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,n&&this.matched.add(n),this._priority=i||0}var p,f,h;return f=""===/t(.+)?/.exec("t")[1],d.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new d},addRoute:function(t,e,n){var i=new l(t,e,n,this);return this._sortedInsert(i),i},removeRoute:function(t){n(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var n,i=this._getMatchedRoutes(t),r=0,a=i.length;if(a)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(i,t),this._prevRoutes=i;a>r;)n=i[r],n.route.matched.dispatch.apply(n.route.matched,e.concat(n.params)),n.isFirst=!r,this.routed.dispatch.apply(this.routed,e.concat([t,n])),r+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var n,i=0;n=this._prevRoutes[i++];)n.route.switched&&this._didSwitch(n.route,t)&&n.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var n,i=0;n=e[i++];)if(n.route===t)return!1;return!0},_pipeParse:function(t,e){for(var n,i=0;n=this._piped[i++];)n.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,n=e.length;do--n;while(e[n]&&t._priority<=e[n]._priority);e.splice(n+1,0,t)},_getMatchedRoutes:function(t){for(var e,n=[],i=this._routes,r=i.length;(e=i[--r])&&((!n.length||this.greedy||e.greedy)&&e.match(t)&&n.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!n.length););return n},pipe:function(t){this._piped.push(t)},unpipe:function(t){n(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},p=new d,p.VERSION="0.12.2",p.NORM_AS_ARRAY=function(t,e){return[e.vals_]},p.NORM_AS_OBJECT=function(t,e){return[e]},l.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,n=this.rules,i=this._getParamsObject(t);for(e in n)if("normalize_"!==e&&n.hasOwnProperty(e)&&!this._isValidParam(t,e,i))return!1;return!0},_isValidParam:function(t,n,i){var s=this.rules[n],u=i[n],c=!1,d=0===n.indexOf("?");return null==u&&this._optionalParamsIds&&-1!==e(this._optionalParamsIds,n)?c=!0:r(s)?(d&&(u=i[n+"_"]),c=s.test(u)):a(s)?(d&&(u=i[n+"_"]),c=this._isValidArrayRule(s,u)):o(s)&&(c=s(u,t,i)),c},_isValidArrayRule:function(t,n){if(!this._router.ignoreCase)return-1!==e(t,n);"string"==typeof n&&(n=n.toLowerCase());for(var i,r,a=t.length;a--;)if(i=t[a],r="string"==typeof i?i.toLowerCase():i,r===n)return!0;return!1},_getParamsObject:function(t){for(var n,i,r=this._router.shouldTypecast,a=this._router.patternLexer.getParamValues(t,this._matchRegexp,r),o={},u=a.length;u--;)i=a[u],this._paramsIds&&(n=this._paramsIds[u],0===n.indexOf("?")&&i&&(o[n+"_"]=i,i=c(i,r),a[u]=i),f&&""===i&&-1!==e(this._optionalParamsIds,n)&&(i=void 0,a[u]=i),o[n]=i),o[u]=i;return o.request_=r?s(t):t,o.vals_=a,o},_getParamsArray:function(t){var e,n=this.rules?this.rules.normalize_:null;return n=n||this._router.normalizeFn,e=n&&o(n)?n(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d.prototype.patternLexer=function(){function t(){var t,e;for(t in h)h.hasOwnProperty(t)&&(e=h[t],e.id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}function e(t,e){var n,i=[];for(t.lastIndex=0;n=t.exec(e);)i.push(n[1]);return i}function n(t){return e(f,t)}function i(t){return e(h.OP.rgx,t)}function r(t,e){return t=t||"",t&&(b===g?t=t.replace(l,""):b===m&&(t=t.replace(p,"")),t=o(t,"rgx","save"),t=t.replace(d,"\\$&"),t=o(t,"rRestore","res"),b===g&&(t="\\/?"+t)),b!==v&&(t+="\\/?"),new RegExp("^"+t+"$",e?"i":"")}function o(t,e,n){var i,r;for(r in h)h.hasOwnProperty(r)&&(i=h[r],t=t.replace(i[e],i[n]));return t}function s(t,e,n){var i=e.exec(t);return i&&(i.shift(),n&&(i=u(i))),i}function c(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");var n=function(t,n){var i;if(n="?"===n.substr(0,1)?n.substr(1):n,null!=e[n]){if("object"==typeof e[n]){var r,o=[];for(var s in e[n])if(r=e[n][s],a(r))for(var u in r)"[]"==s.slice(-2)?o.push(encodeURI(s.slice(0,-2))+"[]="+encodeURI(r[u])):o.push(encodeURI(s+"="+r[u]));else o.push(encodeURI(s+"="+r));i="?"+o.join("&")}else i=String(e[n]);if(-1===t.indexOf("*")&&-1!==i.indexOf("/"))throw new Error('Invalid value "'+i+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");i=""}return i};return h.OS.trail||(h.OS.trail=new RegExp("(?:"+h.OS.id+")+$")),t.replace(h.OS.rgx,h.OS.save).replace(f,n).replace(h.OS.trail,"").replace(h.OS.rRestore,"/")}var d=/[\\.+*?\^$\[\](){}\/'#]/g,l=/^\/|\/$/g,p=/\/$/g,f=/(?:\{|:)([^}:]+)(?:\}|:)/g,h={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},g=1,v=2,m=3,b=g;return t(),{strict:function(){b=v},loose:function(){b=g},legacy:function(){b=m},getParamIds:n,getOptionalParamsIds:i,getParamValues:s,compilePattern:r,interpolate:c}}(),p};r=[n(157)],i=o,a="function"==typeof i?i.apply(e,r):i,!(void 0!==a&&(t.exports=a))}()}]);