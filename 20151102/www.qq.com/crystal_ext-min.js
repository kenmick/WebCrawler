!function(lib_name){function needAdCover(creativity_config){var fodder=creativity_config.fodder[0];return fodder&&fodder.cover?!0:!1}function _formatSnsInfoRequestUrl(params){return format("http://bs.l.qq.com/sns?loc={loc}&oid={oid}",{loc:params.loc,oid:params.oid})
}function _formatSnsAdxInfoRequestUrl(params){var token=namespace.getApitoken(params.oid,params.loc,"");return format("http://sac.l.qq.com/exchange/board?token={token}",{token:token})}function initSnsAd(pluginConfig,lviewConfig){var skinTemplate=SkinTemplates[getSkinTemplate(pluginConfig,lviewConfig)],snsInfoRequestUrl=skinTemplate.formatSnsInfoRequestUrl({loc:lviewConfig.loc,oid:lviewConfig.oid});
getByJSONP({url:snsInfoRequestUrl,charset:"utf-8"}).then(function(data){if(data.length||"0"!=data.ret_code){var snsAdConfig=skinTemplate.generateSnsAdConfig(pluginConfig,lviewConfig,data[0]);renderSnsAd(snsAdConfig)}else{var snsAdConfig=skinTemplate.generateSnsAdConfig(pluginConfig,lviewConfig,data);
renderSnsAd(snsAdConfig)}})}function getByJSONP(config){var url=config.url,charset=config.charset,callbackname=config.callbackname,callback=config.callback,id_callback="jsonp"+(""+Math.random()).replace(/\D/g,"").substr(0,13);if(callbackname&&(id_callback=callbackname),!window[id_callback]){var pms=new Promise;
window[id_callback]=callback?function(arg0){callback(arg0),pms.resolve(arg0)}:function(arg0){pms.resolve(arg0)}}var script=document.createElement("script");return url+=(-1==url.indexOf("?")?"?":"&")+"callback="+id_callback,script.src=url,charset&&(script.charset=charset),document.getElementsByTagName("head")[0].appendChild(script),pms
}function isSnsSent(pluginConfig,lviewConfig){var currentOid=lviewConfig.oid;return namespace.snsSent&&namespace.snsSent.oid==currentOid?!0:(namespace.snsSent=namespace.snsSent?namespace.snsSent:{},namespace.snsSent.oid=currentOid,!1)}function getSkinTemplate(pluginConfig,lviewConfig){var displayConfig=lviewConfig.display_config;
return displayConfig&&displayConfig.skinTemplate?displayConfig.skinTemplate:lviewConfig.pri?"snsAdx":"sns"}function _generateSnsAdxAdConfig(pluginConfig,lviewConfig,bsConfig){if("0"==bsConfig.ret_code){var displayConfig=lviewConfig.display_config||{},headCountArray=[0,0,0,0,bsConfig.campaign_info.join,0,bsConfig.campaign_info.join];
bsConfig.self||(bsConfig.self={nick:"",headicon:"",headicon_type:"",sns_type:"",isjoin:""}),bsConfig.campaign_info.ignore_snslist||(bsConfig.campaign_info.ignore_snslist={enable:0,frineds:0});var snsAdConfig={oid:lviewConfig.oid,locId:lviewConfig.loc,loc:lviewConfig.loc,aver:lviewConfig.aver,weiboId:pluginConfig.weibo_id,weiboMessageId:pluginConfig.msg_id,weiboMessageTitle:pluginConfig.sns_title,weiboMessagePic:pluginConfig.sns_pic,configType:lviewConfig.plugins[0].type,configSubType:formatSnsSubType(pluginConfig.sns_subtype),skin:pluginConfig.sns_skin?parseString(pluginConfig.sns_skin):"3",useHeadIcon:1==parseInt(pluginConfig.sns_headicon)?!0:!1,sloganLink:pluginConfig.sns_url||lviewConfig.fodder[0].link_to,headCountData:{numberOfPlus:parseInt(headCountArray[0]),numberOfWeiboFans:parseInt(headCountArray[1]),numberofNonActFollower:parseInt(headCountArray[2]),numberOfActFollower:parseInt(headCountArray[3]),nmuberOfParticipants:parseInt(headCountArray[4]),numberOfInterestedInWeibo:parseInt(headCountArray[5]),numberOfInterestedInAct:parseInt(headCountArray[6])},privateSetting:{ignoreSnsList:1===parseInt(bsConfig.campaign_info.ignore_snslist.enable)?!0:!1,friends:parseInt(bsConfig.campaign_info.ignore_snslist.friends)},self:{nick:bsConfig.self.nick,headicon:bsConfig.self.headicon,headiconType:bsConfig.self.headicon_type?parseString(bsConfig.self.headicon_type):"2",socialRelationType:bsConfig.self.sns_type},friends:[],oidType:"weibo"==lviewConfig.plugins[0].type?"103":"203",followed:1===parseInt(bsConfig.followed)?!0:!1,joined:1===parseInt(bsConfig.self.isjoin)?!0:!1,skinTemplate:SkinTemplates[getSkinTemplate(pluginConfig,lviewConfig,bsConfig)]};
snsAdConfig.self.headicon=snsAdConfig.self.headicon||snsAdConfig.skinTemplate.defaultHeadIconUrl;var w=displayConfig.headicon_width,h=displayConfig.headicon_height;w&&(snsAdConfig.skinTemplate.headIconWidth=parseInt(w)),h&&(snsAdConfig.skinTemplate.headIconHeight=parseInt(h));
for(var sourceFriendsArray=bsConfig.sns_msglist||[],len=sourceFriendsArray.length,targetFrindsArray=snsAdConfig.friends,i=0;len>i;i++){var sourceFriend=sourceFriendsArray[i],targetFriend={};for(var k in sourceFriend)"sns_type"!=k?targetFriend[k]=sourceFriend[k]:targetFriend.socialRelationType=sourceFriend[k];
targetFrindsArray.push(targetFriend)}snsAdConfig.locEl=dom.$(snsAdConfig.locId),snsAdConfig.absoluteElementBottom0=6==ua.ie&&dom.height(snsAdConfig.locEl)%2==1?"-1px":"0px",snsAdConfig.isLogin=isLogin(snsAdConfig),snsAdConfig.adType=("mini"==displayConfig.skinTemplate?"mini":"")+snsAdConfig.configType+snsAdConfig.configSubType,snsAdConfig.hasHeadIcon=hasHeadIcon(snsAdConfig),snsAdConfig.snsWrapperId="snsWrapper_"+snsAdConfig.oid,snsAdConfig.headIconWrapperId="headIconWrapper_"+snsAdConfig.oid,snsAdConfig.sloganWrapperId="sloganWrapper_"+snsAdConfig.oid,snsAdConfig.beforeClickSloganId="bcSlogan_"+snsAdConfig.oid,snsAdConfig.afterClickSloganId="acSlogan_"+snsAdConfig.oid;
var fodder=lviewConfig.fodder[0];return snsAdConfig.needCover=fodder&&fodder.cover?!0:!1,snsAdConfig.isBigPicAd=fodder.width<=300?!0:!1,snsAdConfig.isBigPicAd&&(snsAdConfig.skin="3"),snsAdConfig.adWidth=parseInt(fodder.width),snsAdConfig.adHeight=parseInt(fodder.height),snsAdConfig.selfNickMaxLength=calculateSelfNickMaxLength(snsAdConfig),snsAdConfig.friendsNickMaxLength=calculateFriendsNickMaxLength(snsAdConfig),snsAdConfig
}}function _generateSnsAdConfig(pluginConfig,lviewConfig,bsConfig){var displayConfig=lviewConfig.display_config||{},headCountArray=bsConfig.sns_num||[],snsAdConfig={oid:lviewConfig.oid,locId:lviewConfig.loc,loc:lviewConfig.loc,aver:lviewConfig.aver,weiboId:pluginConfig.weibo_id,weiboMessageId:pluginConfig.msg_id,weiboMessageTitle:pluginConfig.sns_title,weiboMessagePic:pluginConfig.sns_pic,configType:lviewConfig.plugins[0].type,configSubType:formatSnsSubType(pluginConfig.sns_subtype),skin:pluginConfig.sns_skin?parseString(pluginConfig.sns_skin):"3",useHeadIcon:1==parseInt(pluginConfig.sns_headicon)?!0:!1,sloganLink:pluginConfig.sns_url||lviewConfig.fodder[0].link_to,headCountData:{numberOfPlus:parseInt(headCountArray[0]),numberOfWeiboFans:parseInt(headCountArray[1]),numberofNonActFollower:parseInt(headCountArray[2]),numberOfActFollower:parseInt(headCountArray[3]),nmuberOfParticipants:parseInt(headCountArray[4]),numberOfInterestedInWeibo:parseInt(headCountArray[5]),numberOfInterestedInAct:parseInt(headCountArray[6])},privateSetting:{ignoreSnsList:1===parseInt(bsConfig.ignore_snslist.enabled)?!0:!1,friends:parseInt(bsConfig.ignore_snslist.friends)},self:{nick:bsConfig.self.nick,headicon:bsConfig.self.headicon,headiconType:bsConfig.self.headicon_type?parseString(bsConfig.self.headicon_type):"2",socialRelationType:bsConfig.self.sns_type},friends:[],oidType:parseString(bsConfig.oid_type),followed:1===parseInt(bsConfig.followed)?!0:!1,joined:1===parseInt(bsConfig.joined)?!0:!1,skinTemplate:SkinTemplates[getSkinTemplate(pluginConfig,lviewConfig,bsConfig)]};
snsAdConfig.self.headicon=snsAdConfig.self.headicon||snsAdConfig.skinTemplate.defaultHeadIconUrl;var w=displayConfig.headicon_width,h=displayConfig.headicon_height;w&&(snsAdConfig.skinTemplate.headIconWidth=parseInt(w)),h&&(snsAdConfig.skinTemplate.headIconHeight=parseInt(h));
for(var sourceFriendsArray=bsConfig.sns_msglist,len=sourceFriendsArray.length,targetFrindsArray=snsAdConfig.friends,i=0;len>i;i++){var sourceFriend=sourceFriendsArray[i],targetFriend={};for(var k in sourceFriend)"sns_type"!=k?targetFriend[k]=sourceFriend[k]:targetFriend.socialRelationType=sourceFriend[k];
targetFrindsArray.push(targetFriend)}snsAdConfig.locEl=dom.$(snsAdConfig.locId),snsAdConfig.absoluteElementBottom0=6==ua.ie&&dom.height(snsAdConfig.locEl)%2==1?"-1px":"0px",snsAdConfig.isLogin=isLogin(snsAdConfig),snsAdConfig.adType=("mini"==displayConfig.skinTemplate?"mini":"")+snsAdConfig.configType+snsAdConfig.configSubType,snsAdConfig.hasHeadIcon=hasHeadIcon(snsAdConfig),snsAdConfig.snsWrapperId="snsWrapper_"+snsAdConfig.oid,snsAdConfig.headIconWrapperId="headIconWrapper_"+snsAdConfig.oid,snsAdConfig.sloganWrapperId="sloganWrapper_"+snsAdConfig.oid,snsAdConfig.beforeClickSloganId="bcSlogan_"+snsAdConfig.oid,snsAdConfig.afterClickSloganId="acSlogan_"+snsAdConfig.oid;
var fodder=lviewConfig.fodder[0];return snsAdConfig.needCover=fodder&&fodder.cover?!0:!1,snsAdConfig.isBigPicAd=fodder.width<=300?!0:!1,snsAdConfig.adWidth=parseInt(fodder.width),snsAdConfig.adHeight=parseInt(fodder.height),snsAdConfig.selfNickMaxLength=calculateSelfNickMaxLength(snsAdConfig),snsAdConfig.friendsNickMaxLength=calculateFriendsNickMaxLength(snsAdConfig),snsAdConfig
}function calculateSelfNickMaxLength(snsAdConfig){var result,skinTemplate=snsAdConfig.skinTemplate,headIconWidth=skinTemplate.headIconWidth,headIconHeight=skinTemplate.headIconHeight,adWidth=snsAdConfig.adWidth,headIconPadding=(snsAdConfig.adHeight,7),buttonWidth=62,lineHeight=16,fontSize=snsAdConfig.skinTemplate.sloganFontsize,ac2WordSiz=fontSize/2,fixedSloganTextWords=snsAdConfig.isBigPicAd?snsAdConfig.isLogin?28:32:38;
return result=snsAdConfig.hasHeadIcon?(parseInt(headIconHeight/lineHeight)*(adWidth-headIconPadding-headIconWidth)-buttonWidth)/ac2WordSiz-fixedSloganTextWords:(adWidth-headIconPadding-buttonWidth)/ac2WordSiz-fixedSloganTextWords,result=parseInt(result),result>0?result:0
}function calculateFriendsNickMaxLength(snsAdConfig){var result,selfNickMaxLength=calculateSelfNickMaxLength(snsAdConfig),selfNick=snsAdConfig.self.nick,selfNickWords=selfNick?lenFor(selfNick)+1:0;return result=selfNickMaxLength-selfNickWords,result=parseInt(result),result>0?result:0
}function parseString(value){return""+value}function formatSnsSubType(snsSubType){return snsSubType&&snsSubType.length>1?snsSubType.slice(-1):snsSubType}function hasHeadIconUrl(snsAdConfig){return!!snsAdConfig.self.headicon}function isLogin(snsAdConfig){return snsAdConfig&&snsAdConfig.self.nick&&snsAdConfig.self.socialRelationType
}function hasHeadIcon(snsAdConfig){return snsAdConfig.isLogin&&snsAdConfig.useHeadIcon&&hasHeadIconUrl(snsAdConfig)}function createContainerElement(snsAdConfig){var skinTemplate=(snsAdConfig.oid,snsAdConfig.skinTemplate),tableEl=document.createElement("table"),tbodyEl=document.createElement("tbody"),trEl=document.createElement("tr"),headIconWrapperTdEl=document.createElement("td"),sloganWrapperTdEl=document.createElement("td");
return headIconWrapperTdEl.id=snsAdConfig.headIconWrapperId,sloganWrapperTdEl.id=snsAdConfig.sloganWrapperId,dom.setStyle(tableEl,{"border-spacing":"0px"}),headIconWrapperTdEl.style.padding="0px",dom.setStyle(sloganWrapperTdEl,{padding:"0px","word-wrap":"break-word","word-break":"break-all","font-size":skinTemplate.sloganFontsize+"px","vertical-align":"middle",color:skinTemplate.sloganTextColor}),tableEl.appendChild(tbodyEl),tbodyEl.appendChild(trEl),trEl.appendChild(headIconWrapperTdEl),trEl.appendChild(sloganWrapperTdEl),tableEl
}function createSkinWrapperElement(){var divEl=document.createElement("div");return dom.setStyle(divEl,{"padding-left":"36px"}),divEl}function createSnsAdContainer(snsAdConfig){var containerElement,skinWrapperElement,skinImage,skinTailImage,locEl=snsAdConfig.locEl,skin=snsAdConfig.skin,skinTemplate=snsAdConfig.skinTemplate;
if("3"==skin)skinImage=skinTemplate.fullBackgroundImageUrl;else switch(skin){case"1":skinImage=skinTemplate.dcgBackgroundImageUrl,skinTailImage=skinTemplate.dcgBackgroundTailImageUrl;break;case"2":skinImage=skinTemplate.lcgBackgroundImageUrl,skinTailImage=skinTemplate.lcgBackgroundTailImageUrl
}if(containerElement=createContainerElement(snsAdConfig),setPngBackgroundImageStyle({el:containerElement,imageUrl:skinImage,sizingMethod:"scale"}),skinTailImage)skinWrapperElement=createSkinWrapperElement(snsAdConfig),setPngBackgroundImageStyle({el:skinWrapperElement,imageUrl:skinTailImage,sizingMethod:"crop"}),skinWrapperElement.appendChild(containerElement),containerElement=skinWrapperElement;
else if(ua.ie){var filterAbsoluteWrapper=document.createElement("div");filterAbsoluteWrapper.appendChild(containerElement),containerElement.style.width="100%",filterAbsoluteWrapper.style.width="100%",containerElement=filterAbsoluteWrapper}else containerElement.style.width="100%";
return dom.setStyle(containerElement,{position:"absolute",right:0,bottom:snsAdConfig.absoluteElementBottom0,"z-index":12}),containerElement.id=snsAdConfig.snsWrapperId,locEl.style.overflow="hidden",locEl.appendChild(containerElement),containerElement}function setPngBackgroundImageStyle(option){var el=option.el,imageUrl=option.imageUrl,sizingMethod=option.sizingMethod;
if(ua.ie){var cssSizingMethod=sizingMethod?",sizingMethod='"+sizingMethod+"'":"";dom.setStyle(el,{filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+imageUrl+"'"+cssSizingMethod+")"})}else{var elStyle={background:"url("+imageUrl+") no-repeat"};
"scale"==sizingMethod&&(elStyle["-webkit-background-size"]="100% 100%",elStyle["-moz-background-size"]="100% 100%",elStyle["-o-background-size"]="100% 100%",elStyle["-ms-background-size"]="100% 100%",elStyle["background-size"]="100% 100%"),dom.setStyle(el,elStyle)
}return el}function createThumbnail(snsAdConfig,text){var thumbnailEl=document.createElement("div"),thumbnailInnerEl=document.createElement("div"),skinTemplate=snsAdConfig.skinTemplate;return thumbnailInnerEl.innerHTML=text,thumbnailEl.appendChild(thumbnailInnerEl),dom.setStyle(thumbnailEl,{display:"none",position:"absolute",right:"0",bottom:snsAdConfig.absoluteElementBottom0,margin:"0",padding:"0 0px 0 21px",color:skinTemplate.sloganSnsTextColor,"font-size":skinTemplate.sloganFontsize+"px","line-height":"18px","z-index":"11"}),dom.setStyle(thumbnailInnerEl,{"float":"left",padding:"0 3px 0 0",height:"18px","line-height":"18px","z-index":"20"}),setPngBackgroundImageStyle({el:thumbnailEl,imageUrl:namespace.resource("res/thumbnail_border_radius.png"),sizingMethod:"crop"}),setPngBackgroundImageStyle({el:thumbnailInnerEl,imageUrl:namespace.resource("res/thumbnail_bg.png"),sizingMethod:"scale"}),snsAdConfig.locEl.appendChild(thumbnailEl),thumbnailEl
}function createHeadIcon(snsAdConfig){var headIconWrapper=dom.$(snsAdConfig.headIconWrapperId),headIconWrapperWidth=7;if(snsAdConfig.hasHeadIcon){var headIconUrl=snsAdConfig.self.headicon,skinTemplate=snsAdConfig.skinTemplate,a=document.createElement("a"),img=document.createElement("img");
a.href=snsAdConfig.sloganLink,a.target="_blank",dom.setStyle(a,{display:"block",margin:"5px 0px 5px 5px",cursor:"pointer",position:"relative"}),img.src=headIconUrl,"2"==snsAdConfig.self.headiconType&&(img.alt="\u5934\u50cf\u4ec5\u81ea\u5df1\u53ef\u89c1",img.title="\u5934\u50cf\u4ec5\u81ea\u5df1\u53ef\u89c1"),dom.setStyle(img,{padding:"0",border:"0",width:skinTemplate.headIconWidth+"px",height:skinTemplate.headIconHeight+"px"}),headIconWrapper&&(headIconWrapperWidth=headIconWrapperWidth+5+parseInt(skinTemplate.headIconWidth),a.appendChild(img),headIconWrapper.appendChild(a))
}return headIconWrapper.style.width=headIconWrapperWidth+"px",img}function isSloganPreHidden(snsAdConfig){return snsAdConfig.isLogin&&(snsAdConfig.followed||snsAdConfig.joined)?!0:void 0}function renderSnsAd(snsAdConfig){var configType=snsAdConfig.configType;
switch(configType){case"weibo":case"act":renderHorizontalSnsAd(snsAdConfig);break;case"plugin_ext":}}function renderHorizontalSnsAd(snsAdConfig){createSnsAdContainer(snsAdConfig);var adType=snsAdConfig.adType;switch(adType){case WEIBO_PLUS:renderWeiboPlusContent(snsAdConfig);
break;case WEIBO_FOLLOWSHARE:renderWeiboFollowShareContent(snsAdConfig);break;case WEIBO_JOIN:renderWeiboJoinContent(snsAdConfig);break;case ACT_PLUS:renderActPlusContent(snsAdConfig);break;case ACT_JOIN:renderActJoinContent(snsAdConfig);break;case MINI_WEIBO_JOIN:renderMiniWeiboJoinContent(snsAdConfig)
}}function renderWeiboPlusContent(snsAdConfig){var selfNickHtml,participantNumber,participantNumberHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createPlusButton(snsAdConfig),plusButtonEl=buttonResult.button,clickablePlusButtonEl=buttonResult.clickableButton,oidType=snsAdConfig.oidType,headCountData=snsAdConfig.headCountData,hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),sloganTextColor=snsAdConfig.skinTemplate.sloganTextColor,sloganSnsTextColor=snsAdConfig.skinTemplate.sloganSnsTextColor,dearHtml="&#20146;&#29233;&#30340;",selfNickMaxLength=snsAdConfig.selfNickMaxLength,selfNick=snsAdConfig.self.nick,suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=snsAdConfig.hasHeadIcon?"left":"right",beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"":"none"}),selfNickHtml=lenFor(selfNick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(selfNick,selfNickMaxLength-2,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+selfNick+"</span>",participantNumber=snsAdConfig.privateSetting.ignoreSnsList?formatParticipantNumber(snsAdConfig,snsAdConfig.privateSetting.friends):formatParticipantNumber(snsAdConfig,headCountData.numberOfInterestedInWeibo),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isLogin)switch(oidType){case"101":case"102":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;,"+selfNickHtml+","+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
break;case"103":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=dearHtml+selfNickHtml+"\uff0c "+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+dearHtml+selfNickHtml+","+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002")
}else snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+dearHtml+","+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(plusButtonEl),sloganWrapper.appendChild(p);
var resizePlaceHolderEl=function(){};evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
}),evt.on(plusButtonEl,"click",function(e){evt.getTarget(e)===clickablePlusButtonEl&&(getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"sns_plus_success")))}),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
})}function getParticipantNumberHtml(css,participantNumber){return'<span style="color:'+css.color+';font-weight:bold; display:inline-block;">'+participantNumber+"</span>&#20154;"}function renderWeiboFollowShareContent(snsAdConfig){var selfNickHtml,participantNumber,participantNumberHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createFollowShareButton(snsAdConfig),followButtonEl=buttonResult.followButton,shareButtonEl=buttonResult.shareButton,oidType=snsAdConfig.oidType,headCountData=snsAdConfig.headCountData,hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),sloganTextColor=snsAdConfig.skinTemplate.sloganTextColor,sloganSnsTextColor=snsAdConfig.skinTemplate.sloganSnsTextColor,dearHtml="&#20146;&#29233;&#30340;",selfNickMaxLength=snsAdConfig.selfNickMaxLength,selfNick=snsAdConfig.self.nick,suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=snsAdConfig.hasHeadIcon?"left":"right",beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",beforeClickSlogan.id=snsAdConfig.beforeClickSloganId,dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",afterClickSlogan.id=snsAdConfig.afterClickSloganId,dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"":"none"}),selfNickHtml=lenFor(selfNick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(selfNick,selfNickMaxLength-2,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+selfNick+"</span>",snsAdConfig.isLogin){var privateSettingEnabled=snsAdConfig.privateSetting.ignoreSnsList,privateSettingNumber=snsAdConfig.privateSetting.friends;
switch(oidType){case"101":participantNumber=formatParticipantNumber(snsAdConfig,privateSettingEnabled?privateSettingNumber:headCountData.numberOfWeiboFans),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002"):(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24050;&#25910;&#21548;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002");
break;case"102":participantNumber=formatParticipantNumber(snsAdConfig,privateSettingEnabled?privateSettingNumber:headCountData.numberOfInterestedInWeibo),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
break;case"103":participantNumber=formatParticipantNumber(snsAdConfig,headCountData.numberOfWeiboFans),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002"):(beforeClickSlogan.innerHTML=dearHtml+selfNickHtml+"\uff0c "+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24050;&#25910;&#21548;\uff0c"+dearHtml+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#25910;&#21548;\u3002")
}}else participantNumber=formatParticipantNumber(snsAdConfig,headCountData.numberOfInterestedInWeibo),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+dearHtml+","+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(followButtonEl),p.appendChild(shareButtonEl),sloganWrapper.appendChild(p);
var resizePlaceHolderEl=function(){};snsAdConfig.followed?(evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
})):(evt.on(beforeClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))})),evt.on(followButtonEl,"click",function(){followWeibo(snsAdConfig,{beforeLoginCallback:function(){sendPing(getSnsPingUrl(snsAdConfig,"follow_click"))
},btn:followButtonEl,title:"&#31435;&#21363;&#25910;&#21548;",success:function(){sendPing(getSnsPingUrl(snsAdConfig,"follow_success")),followButtonEl.style.display="none",shareButtonEl.style.display="block",getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)()
}})}),evt.on(shareButtonEl,"click",function(){shareWeibo(snsAdConfig,{})}),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))})}function followWeibo(snsAdConfig,options){var weiboId=snsAdConfig.weiboId,beforeLoginCallback=options.beforeLoginCallback,btn=options.btn,title=options.title||"",successCallback=options.success||function(){},failureCallback=options.failure||function(){};
beforeLoginCallback&&beforeLoginCallback(),login(title,function(){if("undefined"!=typeof MI&&MI.follow)MI.follow(weiboId,btn,function(state){state?successCallback():failureCallback()});else{var followUrl=format("http://open.snswin.qq.com/api/v1/follow/{weibo_id}?g_tk={token}",{weibo_id:weiboId,token:namespace.getAntiCSRFToken()});
getByJSONP({url:followUrl}).then(function(data){"0"==data.error&&successCallback();var url=format("http://t.qq.com/{weibo_id}?pref=internal.lijishouting",{weibo_id:weiboId});util_popup(url)})}})}function shareWeibo(snsAdConfig,options){{var beforeLoginCallback=(snsAdConfig.weiboId,options.beforeLoginCallback),title=(options.btn,options.title||"");
options.success||function(){},options.failure||function(){}}beforeLoginCallback&&beforeLoginCallback(),login(title,function(){namespace.currentShareDialogue||(namespace.currentShareDialogue=new ShareDialogue({title:"&#36716;&#25773;",lazyInit:!1,useIframe:!0,iframeSrc:namespace.crystal_args.share_dialogue_url})),namespace.currentShareDialogue.show({iframeParams:{messageId:snsAdConfig.weiboMessageId},adInfo:snsAdConfig})
})}function renderMiniWeiboJoinContent(snsAdConfig){var participantNumber,participantNumberHtml,selfNickHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createJoinButton(snsAdConfig),joinButtonEl=buttonResult.button,sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),skinTemplate=snsAdConfig.skinTemplate,sloganSnsTextColor=skinTemplate.sloganSnsTextColor,textAlign=skinTemplate.sloganTextAlign||(snsAdConfig.hasHeadIcon?"left":"right"),oidType=snsAdConfig.oidType,selfNickMaxLength=skinTemplate.friendsNickMaxLength,friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=textAlign,participantNumber=snsAdConfig.privateSetting.ignoreSnsList?formatParticipantNumber(snsAdConfig,snsAdConfig.privateSetting.friends):formatParticipantNumber(snsAdConfig,snsAdConfig.headCountData.numberOfInterestedInWeibo),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),selfNickHtml=lenFor(snsAdConfig.self.nick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(snsAdConfig.self.nick,selfNickMaxLength,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+snsAdConfig.self.nick+"</span>",beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"":"none"}),snsAdConfig.isLogin)switch(oidType){case"101":beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002";
break;case"102":beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002";break;case"103":beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002"
}else beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;,"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002";var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);
var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(joinButtonEl),sloganWrapper.appendChild(p);var thumbnailEl=createThumbnail(snsAdConfig,participantNumber+"&#20154;"),resizePlaceHolderEl=function(){};evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(joinButtonEl,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"weibo_join_success"))
}),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),initMiniAdAimation(dom.$(snsAdConfig.snsWrapperId),thumbnailEl,snsAdConfig)}function initMiniAdAimation(snsWrapper,thumbnailEl,snsAdConfig){var timer,snsWrapperHeight=dom.height(snsWrapper),hideAnim=new Anim(snsWrapper,{duration:.5}),showAnim=new Anim(snsWrapper,{duration:.5}),intervalTime=1e4;
hideAnim.on("Complete",function(){thumbnailEl.style.display=""}),evt.on(thumbnailEl,"mouseover",function(){thumbnailEl.style.display="none",showAnim.morph({to:{bottom:parseInt(snsAdConfig.absoluteElementBottom0)}})}),evt.on(snsWrapper,"mouseover",function(){timer&&clearTimeout(timer)
}),evt.on(snsWrapper,"mouseout",function(){timer&&clearTimeout(timer),timer=setTimeout(function(){hideAnim.morph({to:{bottom:-snsWrapperHeight+parseInt(snsAdConfig.absoluteElementBottom0)}})},intervalTime)}),timer&&clearTimeout(timer),timer=setTimeout(function(){hideAnim.morph({to:{bottom:-snsWrapperHeight+parseInt(snsAdConfig.absoluteElementBottom0)}})
},intervalTime)}function hasCheckedToday(cookieName){var checkedDateTime=cookie.get(cookieName);if(checkedDateTime){var checkedDate=new Date(parseInt(checkedDateTime));return now=new Date,nowYear=now.getFullYear(),nowMonth=now.getMonth(),nowDay=now.getDate(),checkedDateYear=checkedDate.getFullYear(),checkedDateMonth=checkedDate.getMonth(),checkedDateDay=checkedDate.getDate(),nowYear==checkedDateYear&&nowMonth==checkedDateMonth&&nowDay==checkedDateDay
}return!1}function getCurrentQQNumber(){var uin=cookie.get("uin"),pt2gguin=cookie.get("pt2gguin"),uin_cookie=cookie.get("uin_cookie"),adid=cookie.get("adid");return uin||pt2gguin||uin_cookie||adid}function renderWeiboJoinContent(snsAdConfig){var participantNumber,participantNumberHtml,selfNickHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createJoinButton(snsAdConfig),joinButtonEl=buttonResult.button,sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),skinTemplate=snsAdConfig.skinTemplate,sloganSnsTextColor=skinTemplate.sloganSnsTextColor,textAlign=skinTemplate.sloganTextAlign||(snsAdConfig.hasHeadIcon?"left":"right"),oidType=snsAdConfig.oidType,selfNickMaxLength=snsAdConfig.selfNickMaxLength,dearHtml="&#20146;&#29233;&#30340;",selfNick=snsAdConfig.self.nick,friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=textAlign,participantNumber=snsAdConfig.privateSetting.ignoreSnsList?formatParticipantNumber(snsAdConfig,snsAdConfig.privateSetting.friends):formatParticipantNumber(snsAdConfig,snsAdConfig.headCountData.numberOfInterestedInWeibo),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),selfNickHtml='<span style="color:'+sloganSnsTextColor+';">@'+snsAdConfig.self.nick+"</span>",beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"":"none"}),selfNickHtml=lenFor(selfNick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(selfNick,selfNickMaxLength-2,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+selfNick+"</span>",snsAdConfig.isLogin)switch(oidType){case"101":case"102":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
break;case"103":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=dearHtml+selfNickHtml+"\uff0c "+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+dearHtml+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002")
}else snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+dearHtml+"\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(joinButtonEl),sloganWrapper.appendChild(p);
var resizePlaceHolderEl=function(){};evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
}),evt.on(joinButtonEl,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"weibo_join_success"))}),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
})}function getSloganChangeHandler(snsAdConfig,beforeClickElem,afterClickElem,callback){return function(){var cookieName=CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber();cookie.set(cookieName,(new Date).getTime(),{expires:1,path:"/"}),beforeClickElem.style.display="none",afterClickElem&&(afterClickElem.style.display=""),callback&&callback()
}}function renderActPlusContent(snsAdConfig){var selfNickHtml,participantNumber,participantNumberHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createPlusButton(snsAdConfig),plusButtonEl=buttonResult.button,oidType=snsAdConfig.oidType,headCountData=snsAdConfig.headCountData,hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),sloganTextColor=snsAdConfig.skinTemplate.sloganTextColor,sloganSnsTextColor=snsAdConfig.skinTemplate.sloganSnsTextColor,dearHtml="&#20146;&#29233;&#30340;",selfNick=snsAdConfig.self.nick,selfNickMaxLength=snsAdConfig.selfNickMaxLength,suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=snsAdConfig.hasHeadIcon?"left":"right",beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:sloganTextColor,display:hasClickedTodayFlag?"":"none"}),selfNickHtml=lenFor(selfNick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(selfNick,selfNickMaxLength-2,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+selfNick+"</span>",participantNumber=snsAdConfig.privateSetting.ignoreSnsList?formatParticipantNumber(snsAdConfig,snsAdConfig.privateSetting.friends):formatParticipantNumber(snsAdConfig,headCountData.numberOfInterestedInAct),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isLogin)switch(oidType){case"201":case"202":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
break;case"203":snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=dearHtml+selfNickHtml+"\uff0c "+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+dearHtml+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002")
}else snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+dearHtml+"\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(plusButtonEl),sloganWrapper.appendChild(p);
var resizePlaceHolderEl=function(){};evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
}),evt.on(plusButtonEl,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"sns_plus_success"))}),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
})}function renderActJoinContent(snsAdConfig){var participantNumber,participantNumberHtml,selfNickHtml,headIconEl=createHeadIcon(snsAdConfig),buttonResult=createJoinButton(snsAdConfig),joinButtonEl=buttonResult.button,sloganWrapper=dom.$(snsAdConfig.sloganWrapperId),skinTemplate=snsAdConfig.skinTemplate,sloganSnsTextColor=skinTemplate.sloganSnsTextColor,textAlign=skinTemplate.sloganTextAlign||(snsAdConfig.hasHeadIcon?"left":"right"),oidType=snsAdConfig.oidType,selfNickMaxLength=snsAdConfig.selfNickMaxLength,dearHtml="&#20146;&#29233;&#30340;",selfNick=snsAdConfig.self.nick,friendsRelationshipHtml=getFriendsRelationShipHtml(snsAdConfig),suffixHtml='<span style="color:'+sloganSnsTextColor+';">'+snsAdConfig.skinTemplate.sloganSuffix+"</span>",hasClickedTodayFlag=isSloganPreHidden(snsAdConfig)||hasCheckedToday(CLICK_SLOGAN_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber()),beforeClickSlogan=document.createElement("a"),afterClickSlogan=document.createElement("a");
if(sloganWrapper.style.textAlign=textAlign,beforeClickSlogan.href=snsAdConfig.sloganLink,beforeClickSlogan.target="_blank",dom.setStyle(beforeClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"none":""}),afterClickSlogan.href=snsAdConfig.sloganLink,afterClickSlogan.target="_blank",dom.setStyle(afterClickSlogan,{cursor:"pointer",padding:"0 7px 0 0","line-height":"16px","text-decoration":"none",color:skinTemplate.sloganTextColor,display:hasClickedTodayFlag?"":"none"}),selfNickHtml=lenFor(selfNick)>selfNickMaxLength?'<span style="color:'+sloganSnsTextColor+';">@'+cSubstring(selfNick,selfNickMaxLength-2,"..")+"</span>":'<span style="color:'+sloganSnsTextColor+';">@'+selfNick+"</span>",snsAdConfig.isLogin){var privateSettingEnabled=snsAdConfig.privateSetting.ignoreSnsList,privateSettingNumber=snsAdConfig.privateSetting.friends;
switch(oidType){case"201":participantNumber=formatParticipantNumber(snsAdConfig,privateSettingEnabled?privateSettingNumber:snsAdConfig.headCountData.nmuberOfParticipants),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002"):(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24050;&#21442;&#21152;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24050;&#21442;&#21152;\u3002");
break;case"202":participantNumber=formatParticipantNumber(snsAdConfig,privateSettingEnabled?privateSettingNumber:snsAdConfig.headCountData.numberOfInterestedInAct),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=friendsRelationshipHtml+participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
break;case"203":participantNumber=formatParticipantNumber(snsAdConfig,snsAdConfig.headCountData.nmuberOfParticipants),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?snsAdConfig.hasHeadIcon?(beforeClickSlogan.innerHTML=selfNickHtml+"\uff0c "+participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\u3002"):(beforeClickSlogan.innerHTML=dearHtml+selfNickHtml+"\uff0c "+participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\u3002",afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\uff0c"+dearHtml+selfNickHtml+"\uff0c "+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+skinTemplate.actJoinOidType3ParticipantAction+"\u3002")
}}else participantNumber=formatParticipantNumber(snsAdConfig,snsAdConfig.headCountData.numberOfInterestedInAct),participantNumberHtml=getParticipantNumberHtml({color:sloganSnsTextColor},participantNumber),snsAdConfig.isBigPicAd?(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002"):(beforeClickSlogan.innerHTML=participantNumberHtml+"&#24863;&#20852;&#36259;\uff0c"+dearHtml+"\uff0c"+suffixHtml,afterClickSlogan.innerHTML="&#25105;&#21644;"+participantNumberHtml+"&#24863;&#20852;&#36259;\u3002");
var p=document.createElement("p");dom.setStyle(p,pCss),p.appendChild(beforeClickSlogan),afterClickSlogan&&p.appendChild(afterClickSlogan);var iEl=document.createElement("i");dom.setStyle(iEl,iCss),p.appendChild(iEl),p.appendChild(joinButtonEl),sloganWrapper.appendChild(p);
var resizePlaceHolderEl=function(){};!snsAdConfig.isLogin||snsAdConfig.isLogin&&snsAdConfig.joined?(evt.on(beforeClickSlogan,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))
}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(joinButtonEl,"click",function(){getSloganChangeHandler(snsAdConfig,beforeClickSlogan,afterClickSlogan,resizePlaceHolderEl)(),sendPing(getSnsPingUrl(snsAdConfig,"act_join_success"))
})):(evt.on(beforeClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(afterClickSlogan,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))}),evt.on(joinButtonEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"act_join_success"))
})),headIconEl&&evt.on(headIconEl,"click",function(){sendPing(getSnsPingUrl(snsAdConfig,"relation_click"))})}function createJoinButton(snsAdConfig){var buttonStyle,joinButtonStyle=snsAdConfig.skinTemplate.joinButtonStyle,joinButton=(dom.$(snsAdConfig.sloganWrapperId),document.createElement("a"));
return joinButton.href=snsAdConfig.sloganLink,joinButton.target="_blank",buttonStyle=mix({display:"block",background:"url("+snsAdConfig.skinTemplate.joinButtonIconUrl+")",width:"60px",height:"20px",margin:"2px",cursor:"pointer"},floatRightButtomCss),joinButtonStyle&&mix(buttonStyle,joinButtonStyle),dom.setStyle(joinButton,buttonStyle),{button:joinButton}
}function createFollowShareButton(snsAdConfig){var buttonStyle,skinTemplate=snsAdConfig.skinTemplate,followButtonStyle=skinTemplate.followButtonStyle,shareButtonStyle=skinTemplate.shareButtonStyle,followButton=(dom.$(snsAdConfig.sloganWrapperId),document.createElement("a")),shareButton=document.createElement("a");
return buttonStyle=mix({display:snsAdConfig.followed?"none":"block",background:"url("+snsAdConfig.skinTemplate.followButtonIconUrl+")",width:"60px",height:"20px",cursor:"pointer"},floatRightButtomCss),followButtonStyle&&mix(buttonStyle,followButtonStyle),dom.setStyle(followButton,buttonStyle),buttonStyle=mix({display:snsAdConfig.followed?"block":"none",background:"url("+snsAdConfig.skinTemplate.shareButtonIconUrl+")",width:"60px",height:"20px",margin:"2px",cursor:"pointer"},floatRightButtomCss),shareButtonStyle&&mix(buttonStyle,shareButtonStyle),dom.setStyle(shareButton,buttonStyle),{followButton:followButton,shareButton:shareButton}
}function isWindow(obj){return null!=obj&&obj==obj.window}function getWidthOrHeight(elem,name){var val="width"===name?elem.offsetWidth:elem.offsetHeight;return(0>=val||null==val)&&(val=curCSS(elem,name),(0>val||null==val)&&(val=elem.style[name]),val=parseFloat(val)||0),val
}function formatHeadCount(headCount){return headCount=parseInt(headCount),!isNaN(headCount)&&headCount>1e4?"10000+":0==headCount?1:headCount}function formatParticipantNumber(snsAdConfig,headCount){var cookieName="crystal_participant_number_"+snsAdConfig.oid,cookieValue=parseInt(cookie.get(cookieName)),result=headCount;
return isNaN(result)||isNaN(cookieValue)||(result=result>cookieValue?result:cookieValue),formatHeadCount(result)}function createPlusButton(snsAdConfig){var skinTemplate=(dom.$(snsAdConfig.sloganWrapperId),snsAdConfig.skinTemplate),sloganSnsTextColor=skinTemplate.sloganSnsTextColor,sloganTextColor=skinTemplate.sloganTextColor,clickPlusButtonCookieName=CLICK_PLUSBUTTON_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber(),hasCheckedFlag=hasCheckedToday(clickPlusButtonCookieName),plusButton=document.createElement("ul");
dom.setStyle(plusButton,mix({"list-style":"none",height:"16px","line-height":"16px",padding:"0px",margin:"2px"},floatRightButtomCss));var liEl=document.createElement("li"),plusCountEl=document.createElement("span");return plusCountEl.innerHTML=initPlusNumber(snsAdConfig),liEl.appendChild(plusCountEl),liEl.appendChild(document.createTextNode("\u4eba")),dom.setStyle(liEl,{"float":"left","padding-right":"2px"}),plusButton.appendChild(liEl),liEl=document.createElement("li"),liEl.appendChild(document.createTextNode("\u8d5e")),dom.setStyle(liEl,{"float":"left","padding-left":"18px","text-decoration":"underline",color:hasCheckedFlag?sloganTextColor:sloganSnsTextColor,background:"url("+snsAdConfig.skinTemplate.plusButtonIconUrl+") no-repeat",cursor:hasCheckedFlag?"default":"pointer"}),plusButton.appendChild(liEl),evt.on(liEl,"click",function(){if(!hasCheckedToday(clickPlusButtonCookieName)){cookie.set(clickPlusButtonCookieName,(new Date).getTime(),{expires:1,path:"/"}),dom.setStyle(liEl,{color:sloganTextColor,cursor:"default"});
var plusNumber=parseInt(plusCountEl.innerHTML);isNaN(plusNumber)?plusNumber=1:plusNumber++,plusCountEl.innerHTML=plusNumber>1e4?"10000+":plusNumber;var plusNumberCookieName=PLUS_NUMBER_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber();cookie.set(plusNumberCookieName,plusNumber,{expires:1,path:"/"})
}}),{clickableButton:liEl,button:plusButton}}function initPlusNumber(snsAdConfig){var result,backendNumber=snsAdConfig.headCountData.numberOfPlus,plusNumberCookieName=PLUS_NUMBER_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber(),cookieNumber=parseInt(cookie.get(plusNumberCookieName)),clickPlusButtonCookieName=CLICK_PLUSBUTTON_COOKIE_NAME_PREFIX+snsAdConfig.oid+"_"+getCurrentQQNumber();
return result=!hasCheckedToday(clickPlusButtonCookieName)||isNaN(backendNumber)||isNaN(cookieNumber)?isNaN(backendNumber)?0:backendNumber:backendNumber>cookieNumber?backendNumber:cookieNumber,formatHeadCount(result)}function getFriendsRelationShipHtml(snsAdConfig){var skinTemplate=snsAdConfig.skinTemplate,sloganSnsTextColor=skinTemplate.sloganSnsTextColor;
if(snsAdConfig.privateSetting.ignoreSnsList)return"&#22909;&#21451;&#20013;";var friendsArray=snsAdConfig.friends,len=friendsArray.length;if(0!=len){for(var result="",totalNickLength=0,maxNickLength=snsAdConfig.friendsNickMaxLength,displayNickArray=[],i=0;len>i;i++){var f=friendsArray[i],n=f.nick,nLength=lenFor(n);
if(totalNickLength+=nLength,totalNickLength>maxNickLength)break;displayNickArray.push('<span style="color:'+sloganSnsTextColor+'">'+n+"</span>")}return result=0==displayNickArray.length?'<span style="color:'+sloganSnsTextColor+'">'+cSubstring(friendsArray[0].nick,maxNickLength,"..")+"</span>&#31561;":displayNickArray.join("\u3001 ")+"&#31561;"
}}function util_popup(target_url){setTimeout(function(){try{var tempwin=window.open(target_url,"_blank");tempwin.focus(),setTimeout(function(){if(tempwin)try{0==tempwin.innerWidth&&(location.href=target_url)}catch(e){}else location.href=target_url},500)}catch(e){}},20)
}function lenFor(str){var byteLen=0,len=str.length,l=arguments[1];if(str){for(var i=0;len>i;i++)if(str.charCodeAt(i)>255?byteLen+=2:byteLen++,byteLen>l)return str.substr(0,i);return l?str:byteLen}return 0}function cSubstring(str,mlen,fixed){for(var len=0,ret="",pos=0,i=0;i<str.length;i++){if(len+=str.charCodeAt(i)>255?2:1,len>=mlen){pos=i;
break}ret+=str.substr(i,1)}return ret+=pos==str.length-1?str.substr(pos,1):fixed}function ShareDialogue(config){config=config||{},this.title=config.title||"&#36716;&#25773;",this.lazyInit=config.lazyInit||!0,this.width=config.width||600,this.height=config.height||325,this.closeType=config.closeType||"hidden",this.useIframe=config.useIframe||!1,this.iframeSrc=config.iframeSrc||"",this.iframeParams=config.iframeParams||{},this.adInfo=config.adInfo||{},this.lazyInit||this._init()
}var namespace=window[lib_name];eval(namespace.output(lib_name));var SEPARATOR="q@q@",isSupport=function(){var check_list={xap:function(version){var isVersionSupported=!1;try{var control=null;if(ua.ie)control=new ActiveXObject("AgControl.AgControl"),null==version?isVersionSupported=!0:control.IsVersionSupported(version)&&(isVersionSupported=!0),control=null;
else{var plugin=navigator.plugins["Silverlight Plug-In"];if(plugin)if(null==version)isVersionSupported=!0;else{var actualVer=plugin.description;"1.0.30226.2"===actualVer&&(actualVer="2.0.30226.2");for(var actualVerArray=actualVer.split(".");actualVerArray.length>3;)actualVerArray.pop();
for(;actualVerArray.length<4;)actualVerArray.push(0);for(var reqVerArray=version.split(".");reqVerArray.length>4;)reqVerArray.pop();var requiredVersionPart,actualVersionPart,index=0;do requiredVersionPart=parseInt(reqVerArray[index]),actualVersionPart=parseInt(actualVerArray[index]),index++;
while(index<reqVerArray.length&&requiredVersionPart===actualVersionPart);actualVersionPart>=requiredVersionPart&&!isNaN(requiredVersionPart)&&(isVersionSupported=!0)}}}catch(e){isVersionSupported=!1}return isVersionSupported}};return function(extension,version){return void 0!=check_list[extension]?check_list[extension](version):!0
}}(),createAbsoluteElement=function(style,insert_to_document){var el=document.createElement("div");return el.style.position="absolute",el.className="absolute",style&&dom.setStyle(el,style),insert_to_document&&document.body.insertBefore(el,document.body.firstChild),el
},appendPngToConfig=function(config,uri){6==ua.ie?config.filter=format("progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{uri}')",{uri:uri}):config["background-image"]=format("url({uri})",{uri:uri})},close_button_width=13,close_button_height=13,close_button_url=resource("db_close.gif"),enter_mutex=function(fn,delay){setTimeout(function(){0==mutex_lock()?fn():setTimeout(arguments.callee,500)
},1e3*(delay||0))},setInlineBlock=function(el){6==ua.ie||7==ua.ie?mix(el.style,{display:"inline",zoom:1}):el.style.display="inline-block"},setOrCreateFloatEl=function(config,el,area_id){return el||(el=document.createElement("div"),el.id=area_id,el.setAttribute("oid",config.oid),el.setAttribute("display",config.display),document.body.insertBefore(el,document.body.firstChild)),mix(el.style,{textAlign:"left",zIndex:100,display:"block"}),el
},Observable=function(){var EVT="__events",FNID="__fnid",deleteHandler=function(handlers,k){var handler=handlers[k];handler&&(delete handler.fn,delete handler.bind,delete handlers[k])},deleteEvent=function(events,type,handlers){handlers=handlers||events[type],handlers&&(each(handlers,function(v,k){deleteHandler(handlers,k)
}),delete events[type])},deletePropIfEmpty=function(o,prop){var op=o[prop];for(var p in op)if(op.hasOwnProperty(p))return;delete o[prop]},getProp=function(o){for(var i=1,ret=o;i<arguments.length;i++){var prop=arguments[i];ret=ret[prop]=ret[prop]||{}}return ret
},on=function(o,type,fn,bind){getProp(o,EVT,type)[fn[FNID]||(fn[FNID]=generateId())]={fn:fn,bind:bind||o}},batch=function(o,handlers){each(handlers,function(v,k){"function"==typeof v?on(o,k,v):on(o,k,v.fn,v.bind)})};return{fire:function(type){this._fire(type,slice(arguments,1))
},_fire:function(type,args){var events=this[EVT];if(events){var event=events[type];event&&each(event,function(handler){handler.fn.apply(handler.bind,args)})}},on:function(type,fn,bind){1==arguments.length?batch(this,type):on(this,type,fn,bind)},un:function(type,fn){var events=this[EVT];
if(events)if(type){var event=events[type];event&&(fn?fn[FNID]&&(deleteHandler(event,fn[FNID]),deletePropIfEmpty(events,type)):deleteEvent(events,type),deletePropIfEmpty(this,EVT))}else each(events,function(v,k){deleteEvent(events,k,v)}),delete this[EVT]}}}(),$=dom.$,copyCoordinates=function(me,coordinates){return copyCoordinates2(me,coordinates,["left","right","horzontal_center"]),copyCoordinates2(me,coordinates,["top","bottom","vertical_center"]),each(["width","height"],function(p){"undefined"!=typeof coordinates[p]&&(me[p]=coordinates[p])
}),me},copyCoordinates2=function(me,coordinates,directions){var specified_prop_name,specified_prop_value;each(directions,function(direction){"undefined"!=typeof coordinates[direction]&&(specified_prop_name=direction,specified_prop_value=coordinates[direction])
}),specified_prop_name&&(each(directions,function(direction){delete me[direction]}),me[specified_prop_name]=specified_prop_value)},patterns={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i},setStyle=dom.setStyle,getStyle=dom.getStyle,sinceLast=function(cookie_name,daily_count,interval_minutes,callback,default_domain){var DataStorage=namespace.DataStorage,domain="";
default_domain&&(domain=default_domain);var since=DataStorage.getItem(cookie_name)||0,count=DataStorage.getItem(cookie_name+"_c")||0,currentTime=new Date;since?currentTime.getTime()-since-6e4*interval_minutes>0&&(currentTime.toDateString()==new Date(parseInt(since)).toDateString()?daily_count>count&&(DataStorage.setItem(cookie_name+"_c",++count),DataStorage.setItem(cookie_name,currentTime.getTime()),callback()):(DataStorage.setItem(cookie_name+"_c",1),DataStorage.setItem(cookie_name,currentTime.getTime()),callback())):(DataStorage.setItem(cookie_name+"_c",++count),DataStorage.setItem(cookie_name,currentTime.getTime()),callback())
},commonSinceLast=function(id,callback){sinceLast(id,2,10,callback)},getJSONP=function(url,callback,charset,callbackname){var id_callback="jsonp"+(""+Math.random()).replace(/\D/g,"").substr(0,13);callbackname&&(id_callback=callbackname),window[id_callback]=callback,importScript(url+=(-1==url.indexOf("?")?"?":"&")+"callback="+id_callback,null,charset)
};namespace.getJSONP=getJSONP;var FixedPosElement=dom.FixedPosElement=Class.create({hide:function(){this.el.style.display="none",this.fire("hide")},show:function(){this.el.style.display="",this.fire("show")},destroy:function(){this.fire("Destroy");var el=this.el;
setTimeout(function(){el.parentNode.removeChild(el)},100)}},Observable);if(6==ua.ie||ua.ie&&"CSS1Compat"!==document.compatMode){var locus=function(dest,now,n){var d=Math.abs(dest-now);return n>d?arguments.callee(dest,now,d/2):1>=n?dest:(dest+(n-1)*now)/n};mix(FixedPosElement.prototype,{init:function(el,coordinates){this.el=el,el.style.position="absolute",el.className="absolute",coordinates&&this.setCoordinates(coordinates)
},setCoordinates:function(coordinates){copyCoordinates(this,coordinates);var self=this,el=this.el,getLeft=function(){return self.horzontal_center?function(){return(dom.getViewportWidth()-self.width)/2+dom.getDocumentScrollLeft()}:void 0!=self.left?function(){return dom.getDocumentScrollLeft()+self.left
}:function(){return dom.getDocumentScrollLeft()+dom.getViewportWidth()-self.right-self.width}}(),getTop=function(){return self.vertical_center?function(){return(dom.getViewportHeight()-self.height)/2+dom.getDocumentScrollTop()}:void 0!=self.top?function(){return dom.getDocumentScrollTop()+self.top
}:function(){return dom.getDocumentScrollTop()+dom.getViewportHeight()-self.bottom-self.height}}(),getPosition=function(smooth){if(smooth){var xy=dom.getXY(el);return{left:locus(getLeft(),xy[0],4),top:locus(getTop(),xy[1],4)}}return{left:getLeft(),top:getTop()}
};clearInterval(this.interval),this.interval=setInterval(function(){setStyle(el,getPosition(!0))},30),this.on("Destroy",function(){clearInterval(this.interval)}),this.on("hide",function(){clearInterval(this.interval)}),this.on("show",function(){setStyle(el,getPosition(!1)),this.interval=setInterval(function(){setStyle(el,getPosition(!0))
},30)});var pos=getPosition(!1);setStyle(el,pos),"undefined"!=typeof coordinates.width&&setStyle(el,"width",coordinates.width),"undefined"!=typeof coordinates.height&&setStyle(el,"height",coordinates.height)}})}else mix(FixedPosElement.prototype,{init:function(el,coordinates){this.el=el,el.style.position="fixed",coordinates&&this.setCoordinates(coordinates)
},setCoordinates:function(coordinates){var el=this.el;mix(this,coordinates);var self=this;if(coordinates.horzontal_center){var setHorzontal=function(){setStyle(el,"left",(dom.getViewportWidth()-self.width)/2)};setHorzontal(),evt.on(window,"resize",setHorzontal),this.on("Destroy",function(){evt.un(window,"resize",setHorzontal)
}),this.on("hide",function(){evt.un(window,"resize",setHorzontal)}),this.on("show",function(){evt.on(window,"resize",setHorzontal),setHorzontal()})}if(coordinates.vertical_center){var setVertical=function(){setStyle(el,"top",(dom.getViewportHeight()-self.height)/2)
};setVertical(),evt.on(window,"resize",setVertical),this.on("Destroy",function(){evt.un(window,"resize",setVertical)}),this.on("hide",function(){evt.un(window,"resize",setVertical)}),this.on("show",function(){evt.on(window,"resize",setVertical),setVertical()
})}setStyle(this.el,coordinates)}});var Anim;if(function(){var $time=Date.now||function(){return(new Date).getTime()},default_config={is_style:!0,duration:1,transition:function(p){return p},callback:function(){}},compute=function(from,to,delta){return(to-from)*delta+from
},buildFrom=function(el,from,to){each(to,function(v,k){null==from[k]?from[k]=parseInt(dom.getStyle(el,k),10):dom.setStyle(el,k,from[k])})};Anim=namespace.Anim=Class.create({init:function(el,config){this.el=$(el),this.config=mix({},default_config,config),this.chains=[]
},morph:function(o){return this.playing?this.chains.push(o):(this._morph(o),this.playing=!0),this},_morph:function(o){o=o||{};var from=this.from=o.from||{},to=this.to=o.to,config=mix({},this.config,o.config);this.from=from,this.to=to;var el=this.el,duration=1e3*config.duration,transition=config.transition,startTime=$time(),me=this;
buildFrom(el,from,to);var trans=config.is_style?function(delta){each(to,function(value,property){var v=compute(from[property],value,delta);dom.setStyle(el,property,v)})}:function(delta){each(to,function(value,property){var v=compute(from[property],value,delta);
el[property]=v})},timer=setInterval(function(){var time=$time();startTime+duration>time?trans(transition((time-startTime)/duration)):(trans(1),clearInterval(timer),me._chain())},20);this.stop=function(){clearInterval(timer)}},_chain:function(){this.chains.length?this._morph(this.chains.shift()):(this.playing=!1,this.config.callback(),this.fire("Complete"))
}},Observable)}(),namespace.getFlashVersion)var getFlashVersion=namespace.getFlashVersion,getFlashObject=namespace.getFlashObject;else var getFlashVersion=namespace.getFlashVersion=function(){try{if(navigator.plugins&&navigator.plugins.length>0)return parseInt(navigator.plugins["Shockwave Flash"].description.split(" ")[2],10);
if("undefined"!=typeof window.ActiveXObject){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){for(var i=15;i>5;i--)try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);break}catch(e){}}return flash?parseInt(flash.GetVariable("$version").split(" ")[1].split(",")[0],10):0
}return 0}catch(e){return 0}},getFlashObject=namespace.getFlashObject=function(flashId){try{return window.document[flashId]?window.document[flashId]:document.getElementById(flashId)}catch(e){return 0}};var dragable=function(body,handle){handle=handle||body,dom.setStyle(handle,"cursor","move"),evt.on2(handle,"mousedown",function(e){var xBody,yBody,xEvent,yEvent,xyBody=dom.getXY(body);
xBody=xyBody[0],yBody=xyBody[1],xEvent=evt.getPageX(e),yEvent=evt.getPageY(e);var eMouseMove=evt.on2(document.body,"mousemove",function(e){dom.setStyle(body,{left:xBody+evt.getPageX(e)-xEvent,top:yBody+evt.getPageY(e)-yEvent})}),eMouseUp=evt.on2(document.body,"mouseup",function(){evt.un(document.body,"mousemove",eMouseMove),evt.un(document.body,"mouseup",eMouseUp)
})})},login;!function(){var elPtLoginContainer,elPtLoginIframe,elPtLoginTitle,PtLoginPanelCreated=!1,PtLogin_header_height=24,header_border_width=1,PTLoginPageUrl="http://adsrich.qq.com/web/ptlogin2.html",APPID="556010102",createPtLoginPanel=function(){var div=createAbsoluteElement({border:"1px solid #B5C1CA",top:"-9999px","z-index":999}),header=dom.createElement({position:"relative","border-bottom":"1px solid #CED3E4",background:"url(http://mat1.gtimg.com/www/images/nav/loginpop_tbg.png) repeat-x scroll 0 0 #EEF4F6"}),title=dom.createElement({height:PtLogin_header_height+"px","line-height":PtLogin_header_height+"px",color:"#666666","font-size":"13px","padding-left":"1em"}),close_button=dom.createElement({position:"absolute",width:"11px",height:"10px","line-height":"10px",top:"6px",right:"10px","font-size":"12px","font-weight":"bold",cursor:"pointer",color:"#99ADBA","font-family":"Comic Sans MS,Verdana,cursive"},{},null,"X");
evt.on(close_button,"click",hideLoginPanel);var iframe=dom.createElement({overflow:"hidden"},{frameborder:0,scrolling:"no"},"iframe");header.appendChild(title),header.appendChild(close_button),div.appendChild(header),div.appendChild(iframe),document.body.appendChild(div),dragable(div,title),elPtLoginContainer=div,elPtLoginTitle=title,elPtLoginIframe=iframe
},id_ptlogin2_onResize=generateId();window[id_ptlogin2_onResize]=function(width,height){dom.setStyle(elPtLoginIframe,{width:width,height:height}),dom.setStyle(elPtLoginContainer,{width:width,height:height+PtLogin_header_height+header_border_width})};var hideLoginPanel=function(){elPtLoginContainer.style.top="-9999px"
},showLoginPanel=function(title,callback){elPtLoginTitle.innerHTML=title;var id_callback=generateId();window[id_callback]=function(){hideLoginPanel(),callback()},elPtLoginIframe.src=PTLoginPageUrl+"?"+serializeQuery({appid:APPID,ptlogin2_onResize:id_ptlogin2_onResize,onSuccess:id_callback}),setTimeout(function(){dom.setStyle(elPtLoginContainer,{left:(dom.getViewportWidth()-elPtLoginContainer.offsetWidth)/2+dom.getDocumentScrollLeft(),top:(dom.getViewportHeight()-elPtLoginContainer.offsetHeight)/2+dom.getDocumentScrollTop()})
},500)},getQQ=function(){var uin=cookie.get("uin"),skey=cookie.get("skey");return uin&&uin.length>4&&skey&&skey.length>0?+uin.substring(1):0};login=function(title,callback){var qq=getQQ();qq?callback():(PtLoginPanelCreated||(PtLoginPanelCreated=!0,createPtLoginPanel()),showLoginPanel(title,function(){callback()
}))}}();var createButtonTo=function(container,button_style,title,callback,need_login,beforeLoginFn){var icon=button_style.icon;icon&&delete button_style.icon;var button=createAbsoluteElement(mix({},{"z-index":11,right:"5px",bottom:"5px",cursor:"pointer",backgroundPosition:"right top",backgroundRepeat:"no-repeat"},button_style));
return icon&&dom.setBackgroundImage(button,icon),evt.on(button,"click",function(){need_login?(beforeLoginFn&&beforeLoginFn(),login(title,callback)):callback()}),container.appendChild(button),button};namespace.createButtonTo=createButtonTo,namespace.needAdCover=needAdCover;
var WEIBO_PLUS="weibo1",WEIBO_FOLLOWSHARE="weibo2",WEIBO_JOIN="weibo3",ACT_PLUS="act1",ACT_JOIN="act3",MINI_WEIBO_JOIN="miniweibo3",PingActionIds1={follow_success:"80001",sns_plus_success:"85001",share_success:"80002",banner_click:"80005",relation_click:"80007",banner_close:"85004",act_join_success:"80006",weibo_join_success:"80009",follow_click:"80008"},PingActionIds2={follow_success:"120001",sns_plus_success:"125001",share_success:"120002",banner_click:"120005",relation_click:"120007",banner_close:"125004",act_join_success:"120006",weibo_join_success:"120009",follow_click:"120008"},SkinTemplates={mini:{defaultHeadIconUrl:"http://mat1.gtimg.com/www/mb/images/head_30.jpg",headIconWidth:50,headIconHeight:50,plusButtonIconUrl:namespace.resource("res/praise.gif"),joinButtonIconUrl:namespace.resource("res/mini_sns_join_button.png"),sloganTextColor:"#FFF",sloganFontsize:12,sloganSnsTextColor:"#FFBF0A",sloganTextAlign:"left",friendsNickMaxLength:24,sloganSuffix:"&#24555;&#26469;&#21442;&#21152;&#21543;\uff01",dcgBackgroundImageUrl:namespace.resource("res/sns_skin_2r.png"),dcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_2.png"),lcgBackgroundImageUrl:namespace.resource("res/sns_skin_1r.png"),lcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_1.png"),fullBackgroundImageUrl:namespace.resource("res/bg_45px.png"),formatSnsInfoRequestUrl:_formatSnsInfoRequestUrl,generateSnsAdConfig:_generateSnsAdConfig,pingActionIds:PingActionIds1,actJoinOidType3ParticipantAction:"&#24050;&#21442;&#21152;"},sns:{defaultHeadIconUrl:"http://mat1.gtimg.com/www/mb/images/head_30.jpg",headIconWidth:40,headIconHeight:40,plusButtonIconUrl:namespace.resource("res/praise.gif"),joinButtonIconUrl:namespace.resource("res/sns_act.png"),followButtonIconUrl:namespace.resource("res/weibo_follow.png"),shareButtonIconUrl:namespace.resource("res/weibo_share.png"),followButtonStyle:{margin:"0 0 0 2px"},shareButtonStyle:{margin:"0 0 0 2px"},joinButtonStyle:{margin:"0 0 0 2px"},sloganTextColor:"#999",sloganFontsize:12,sloganSnsTextColor:"#1292bd",sloganSuffix:"&#24555;&#26469;&#21442;&#21152;&#21543;\uff01",dcgBackgroundImageUrl:namespace.resource("res/sns_skin_2r.png"),dcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_2.png"),lcgBackgroundImageUrl:namespace.resource("res/sns_skin_1r.png"),lcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_1.png"),fullBackgroundImageUrl:namespace.resource("res/sns_bg.png"),formatSnsInfoRequestUrl:_formatSnsInfoRequestUrl,generateSnsAdConfig:_generateSnsAdConfig,pingActionIds:PingActionIds1,actJoinOidType3ParticipantAction:"&#24050;&#21442;&#21152;"},snsAdx:{defaultHeadIconUrl:"http://mat1.gtimg.com/www/mb/images/head_30.jpg",headIconWidth:40,headIconHeight:40,plusButtonIconUrl:namespace.resource("res/praise.gif"),joinButtonIconUrl:namespace.resource("res/sns_act.png"),followButtonIconUrl:namespace.resource("res/weibo_follow.png"),shareButtonIconUrl:namespace.resource("res/weibo_share.png"),followButtonStyle:{margin:"0 0 0 2px"},shareButtonStyle:{margin:"0 0 0 2px"},joinButtonStyle:{margin:"0 0 0 2px"},sloganTextColor:"#999",sloganFontsize:12,sloganSnsTextColor:"#1292bd",sloganSuffix:"&#24555;&#26469;&#30475;&#30475;&#21543;\uff01",dcgBackgroundImageUrl:namespace.resource("res/sns_skin_2r.png"),dcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_2.png"),lcgBackgroundImageUrl:namespace.resource("res/sns_skin_1r.png"),lcgBackgroundTailImageUrl:namespace.resource("res/sns_skin_1.png"),fullBackgroundImageUrl:namespace.resource("res/sns_bg.png"),formatSnsInfoRequestUrl:_formatSnsAdxInfoRequestUrl,generateSnsAdConfig:_generateSnsAdxAdConfig,pingActionIds:PingActionIds2,actJoinOidType3ParticipantAction:"&#24863;&#20852;&#36259;"}},DEFAULT_SLOGAN_SUFFIX="&#24555;&#26469;&#21442;&#21152;&#21543;\uff01",CLICK_SLOGAN_COOKIE_NAME_PREFIX="sns_",CLICK_PLUSBUTTON_COOKIE_NAME_PREFIX="pb_",PLUS_NUMBER_COOKIE_NAME_PREFIX="pn_",floatRightButtomCss={position:"absolute",right:0,bottom:0},pCss={width:"100%","line-height":"20px",position:"relative",display:"inline-block","vertical-align":"top",margin:"0"},iCss={display:"inline-block","vertical-align":"top",width:"60px",height:"20px"},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rmargin=/^margin/,rposition=/^(top|right|bottom|left)$/,tmpA=[],Promise=namespace.Promise=function(){this.state="pending"
};namespace.Promise.prototype={resolve:function(){var args=this.resolveArgs=Array.prototype.slice.call(arguments),resolves=this.resolves;if(this.state="resolved",resolves)for(var len=resolves.length,i=0;len>i;i++)resolves[i].apply(null,args)},reject:function(){var args=this.rejectArgs=Array.prototype.slice.call(arguments),rejects=this.rejects;
if(this.state="rejected",rejects)for(var len=rejects.length,i=0;len>i;i++)rejects[i].apply(null,args)},then:function(resolved,rejected){return resolved&&("resolved"===this.state?resolved.apply(null,this.resolveArgs):(this.resolves||(this.resolves=[]),this.resolves.push(resolved))),rejected&&("rejected"===this.state?rejected.apply(null,this.rejectArgs):(this.rejects||(this.rejects=[]),this.rejects.push(rejected))),this
}};var docElem=document.documentElement,contains=docElem.contains?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&1===bup.nodeType&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))
}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};if(window.getComputedStyle)var curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;return computed&&(ret=computed.getPropertyValue(name)||computed[name],rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret
};else if(document.documentElement.currentStyle)var curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),""===ret?"auto":ret
};dom.height||each({Height:"height",Width:"width"},function(value,name){dom[value]=function(elem){var doc;return isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):getWidthOrHeight(elem,value,"content")
}});var getSnsPingUrl=namespace.getSnsPingUrl=function(opt,act,pingActionIds){var pingActionIds=opt.skinTemplate.pingActionIds,actid=pingActionIds[act]?pingActionIds[act]:0,subactid=0,m_options=mix({},opt);return m_options.actid=actid,m_options.subactid=subactid,m_options.aver=m_options.aver?m_options.aver:"",m_options.token=m_options.token?"&snstoken="+m_options.token:"",m_options.uin=m_options.uin?"&snsuin="+m_options.uin:"",format("http://m.l.qq.com?t=s&mid={oid}&actid={actid}&subactid={subactid}&aver={aver}&oid={oid}&locid={loc}{token}{uin}",m_options)
};ShareDialogue.prototype._init=function(){var self=this,styleObj=this.styleObj={backgroundColor:"#f7f7f7",fontSize:13,headerBackgroundImage:"http://mat1.gtimg.com/www/images/nav/loginpop_tbg.png",titleHeight:24,titleLineHeight:24,titleFontColor:"#666666",closeButtonWidth:11,closeButtonHeight:10,closeButtonLineHeight:10,closeButtonFontSize:12,closeButtonFontWeight:"bold",closeButtonFontColor:"#99ADBA",closeButtonFontFamily:"Comic Sans MS,Verdana,cursive"};
this.dialogueEl=createAbsoluteElement({border:"1px solid #B5C1CA",top:"-9999px","z-index":999,width:self.width+"px","background-color":styleObj.backgroundColor}),this.headerEl=dom.createElement({position:"relative","border-bottom":"1px solid #CED3E4",background:"url("+styleObj.headerBackgroundImage+") repeat-x scroll 0 0 #EEF4F6"}),this.titleEl=dom.createElement({height:styleObj.titleHeight+"px","line-height":styleObj.titleLineHeight+"px",color:styleObj.titleFontColor,"font-size":styleObj.fontSize+"px","padding-left":"1em"}),this.closeButtonEl=dom.createElement({position:"absolute",width:styleObj.closeButtonWidth+"px",height:styleObj.closeButtonHeight+"px","line-height":styleObj.closeButtonLineHeight+"px",top:"6px",right:"10px","font-size":styleObj.closeButtonFontSize+"px","font-weight":styleObj.closeButtonFontWeight,cursor:"pointer",color:styleObj.closeButtonFontColor,"font-family":styleObj.closeButtonFontFamily},{},null,"X"),this.useIframe&&(this.contentEl=dom.createElement({overflow:"hidden",width:self.width+"px",height:self.height-styleObj.titleHeight-1+"px"},{frameborder:0,scroll:"no",id:"shareDialogueFrame"},"iframe")),evt.on(this.closeButtonEl,"click",function(){self.close()
}),this.headerEl.appendChild(this.titleEl),this.headerEl.appendChild(this.closeButtonEl),this.dialogueEl.appendChild(this.headerEl),this.dialogueEl.appendChild(this.contentEl),document.body.appendChild(this.dialogueEl),dragable(this.dialogueEl,this.titleEl)
},ShareDialogue.prototype._hideDailogue=function(){this.dialogueEl&&(this.dialogueEl.style.top="-9999px")},ShareDialogue.prototype._removeDailogue=function(){this.dialogueEl&&(this.dialogueEl.parentNode.removeChild(this.dialogueEl),delete this.contentEl,delete this.closeButtonEl,delete this.titleEl,delete this.headerEl,delete this.dialogueEl)
},ShareDialogue.prototype.close=function(){"hidden"==this.closeType?this._hideDailogue():this._removeDailogue()},ShareDialogue.prototype.show=function(config){config=config||{},this.title=config.title||this.title;var iframeParams=config.iframeParams,adInfo=config.adInfo;
if(this.iframeParams)for(var k in iframeParams)this.iframeParams[k]=iframeParams[k];else this.iframeParams=iframeParams;if(this.adInfo)for(var k1 in adInfo)this.adInfo[k1]=adInfo[k1];else this.adInfo=adInfo;this.dialogueEl||this._init();var dialogueEl=this.dialogueEl;
if(this.titleEl.innerHTML=this.title,this.useIframe&&this.iframeSrc&&this.iframeParams.messageId){var paramStr="";paramStr=this.iframeSrc&&this.iframeSrc.indexOf("?")>-1?"&":"?",paramStr+="_="+(new Date).getTime()+"#"+this.iframeParams.messageId,this.contentEl.src=this.iframeSrc+paramStr
}setTimeout(function(){dom.setStyle(dialogueEl,{left:(dom.getViewportWidth()-dialogueEl.offsetWidth)/2+dom.getDocumentScrollLeft(),top:(dom.getViewportHeight()-dialogueEl.offsetHeight)/2+dom.getDocumentScrollTop()})},500)},ShareDialogue.prototype.getAdInfo=function(){return this.adInfo
},namespace.ShareDialogue=ShareDialogue,namespace.closeShareDialogue=function(){namespace.currentShareDialogue&&namespace.currentShareDialogue.close()},namespace.shareSucessCallback=function(){if(namespace.currentShareDialogue){var config=namespace.currentShareDialogue.getAdInfo();
sendPing(getSnsPingUrl(config,"share_success"));var beforeClickSloganEl=dom.$(config.beforeClickSloganId),afterClickSloganEl=dom.$(config.afterClickSloganId);getSloganChangeHandler(config,beforeClickSloganEl,afterClickSloganEl)()}};var sendPing=ping.touch,pluginDisplayer={weibo:function(config,creativity_config){initSnsAd(config,creativity_config)
},act:function(config,creativity_config){initSnsAd(config,creativity_config)},qzone:function(config,creativity_config,el,area_id){createButtonTo(el,{width:"66px",height:"25px",icon:resource("qzone.png")},"\u559c\u6b22",function(){sendPing(format("http://m.l.qq.com?t=s&mid=200000002&actid=30003&oid={oid}&locid={loc}",{oid:creativity_config.oid,loc:area_id})),getJSONP(format("http://connect.l.qq.com/qzone_join.php?bind={target_qq}",{target_qq:config.qq}),function(data){"0"==data.code&&sendPing(format("http://m.l.qq.com?t=s&mid=200000002&actid=30005&oid={oid}&locid={loc}",{oid:creativity_config.oid,loc:area_id})),setTimeout(function(){location.href=format("http://user.qzone.qq.com/{target_qq}",{target_qq:config.qq})
},1)})},!0)},bqq:function(config,creativity_config,el,area_id){createButtonTo(el,{width:"87px",height:"25px",icon:resource("bqq.png")},"\u4e0e\u4f01\u4e1aQQ\u4ea4\u8c08",function(){window.open(format("http://bizapp.qq.com/webc.htm?new=0&sid={bqq}&eid=&o=&q=7",{bqq:config.qq}),"_blank","height=544, width=644,toolbar=no,scrollbars=no,menubar=no,status=no"),sendPing(format("http://m.l.qq.com?t=s&mid=200000002&actid=30002&oid={oid}&locid={loc}",{oid:creativity_config.oid,loc:area_id}))
},!1)},plugin_ext:function(config,creativity_config,el,area_id){var plugin_js=config.plugin_js,plugin_callback=config.plugin_callback,plugin_type=config.plugin_type||"weibo";if(plugin_js&&plugin_callback){var fn=namespace[plugin_callback];fn?fn(config,creativity_config,el,area_id,plugin_type):namespace.importScript(plugin_js,function(){(fn=namespace[plugin_callback])(config,creativity_config,el,area_id,plugin_type)
},"utf-8")}},plugin_act:function(config,creativity_config,el,area_id){var wrapper=dom.createElement({position:"absolute",left:0,bottom:0,width:"300px",height:"40px",overflow:"hidden","background-color":"transparent","z-index":"20"},{},"div");wrapper.id="plugin_act_"+creativity_config.oid,el.appendChild(wrapper);
var plugin_js=config.plugin_js;namespace.importScript(plugin_js,function(){var opt={oid:creativity_config.oid,loc:area_id,divid:wrapper.id,aver:creativity_config.aver,soid:creativity_config.soid};crystal_callback_plugin_sac.show(opt)},"utf-8")}};namespace.addPlugins=function(plugins,creativity_config,el,area_id){each(plugins,function(plugin){pluginDisplayer[plugin.type](plugin.config,creativity_config,el,area_id)
})};var fixed_video2_render=function(config,el,elId,ping){do_fixed_video2_render(config,el,elId,ping)},do_fixed_video2_render=function(config,el,elId,ping){mix(el.style,{zIndex:100,display:"block",overflow:"hidden"});var buoy_width=20,buoy_height=140;document.body.insertBefore(el,document.body.firstChild);
var buoy=new FixedPosElement(el);buoy.setCoordinates({width:buoy_width,height:buoy_height,right:0,bottom:0});var fodders=config.fodder,video_fodder=fodders[0],skin_fodder=fodders[1],buoy_fodder=fodders[2],video_width=skin_fodder.width,video_height=skin_fodder.height,display_config=config.display_config,expand=generateId(),collapse=generateId(),close=generateId(),getmutex=generateId();
namespace.fns[expand]=function(){buoy.setCoordinates({width:video_width,height:video_height}),ping&&(ping(),namespace.fns[expand]=function(){buoy.setCoordinates({width:video_width,height:video_height})})},namespace.fns[collapse]=function(dolock){return buoy.setCoordinates({width:buoy_width,height:buoy_height}),dolock?("undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock()):void 0
},namespace.fns[close]=function(){return buoy.destroy(),"undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock()},namespace.fns[getmutex]=function(){return mutex_lock()};var version="?v=20120216",flashloaderfile="bound_video.swf",ping_server=config.ping||"p.l.qq.com";
"adblock"==crystal_args.runat&&(flashloaderfile="bound_video_adb.swf"),renderFodder({resource_url:resource_swf(flashloaderfile+version+(display_config.version||"")),params:{wmode:"transparent"},initvars:{oid:config.oid,skin:skin_fodder.resource_url,extend:video_fodder.resource_url,pre:0!=buoy_fodder.resource_url?buoy_fodder.resource_url:"",loc:el.id||"bound_video_"+config.oid,banner_link_to:buoy_fodder.link_to,extend_link_to:video_fodder.link_to,freq_flag:display_config.freq_flag||0,replay_min:display_config.replay_min||5,replay_limit:display_config.replay_limit||1,play_limit_day:display_config.play_limit_day||999,close_timeout:display_config.close_timeout||3600,vol:display_config.vol||0,end_keep_sec:display_config.end_keep_sec||0,showtime:display_config.showtime||15,ping_delay_time:display_config.ping_delay_time||0,monitor_url:config.monitor_url,ping_url:namespace.format("http://"+ping_server+"/p?oid={oid}&cid={cid}&loc={loc}&aver={aver}&soid={soid}&pri={pri}",config),need_ping:display_config.need_ping||0,inner_border_color:display_config.inner_border_color||16777215,outer_border_width:display_config.outer_border_width||1,title:display_config.title||"",title_x:display_config.title_x||0,inner_border_width:display_config.inner_border_width||1,outer_border_color:display_config.outer_border_color||12698049,debug:display_config.debug||0,expand:lib_name+".fns."+expand,collapse:lib_name+".fns."+collapse,close:lib_name+".fns."+close,dwidth:video_width,dheight:video_height,getmutex:lib_name+".fns."+getmutex,runat:crystal_args.runat,replay:display_config.videorepeat||0,ping_server:ping_server,fashion:skin_fodder.fashion||0},width:video_width,height:video_height},el)
},FullscreenPlugin={widescreenify:function(config,el,width){var elStyle={width:parseInt(width)+"px"};namespace.FeatureDetector.cssRgba?elStyle.backgroundColor="rgba(102, 102, 102, 0.3)":elStyle.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#4c666666,endColorstr=#4c666666)",dom.setStyle(el.firstChild,{margin:"0 auto"}),dom.setStyle(el,elStyle)
},normalize:function(config,el,width){dom.setStyle(el,{width:parseInt(width)+"px"})}},ChannelDigiPlugin=function(){var IeWindowResizeHook={originalHeight:window.innerHeight||document.documentElement.clientHeight,originalWidth:window.innerWidth||document.documentElement.clientWidth,isResize:function(){var h=window.innerHeight||document.documentElement.clientHeight,w=window.innerWidth||document.documentElement.clientWidth;
return this.originalHeight!=h||this.originalWidth!=w?(this.originalHeight=h,this.originalWidth=w,!0):!1}};return"digi.tech"===namespace.channel?{init:!1,callbackQueue:[],responsifyFullscreen:function(config,el){var resizeCallback=function(){var winWidth=dom.getViewportWidth();
winWidth>1280?FullscreenPlugin.widescreenify(config,el,1240):1280>=winWidth&&FullscreenPlugin.normalize(config,el,1e3),0===parseInt(el.style.height)&&el.style.filter&&(el.style.filter="")};if(this.callbackQueue.push(resizeCallback),!this.init){var self=this;
resizeCallback(),evt.on(window,"resize",function(){(!ua.ie||IeWindowResizeHook.isResize())&&self.callbackQueue.forEach(function(cb){cb&&cb()})}),this.init=!0}},isChannel:!0}:{responsifyFullscreen:function(){},isChannel:!1}}(),ChannelFinancePlugin=function(){var IeWindowResizeHook={originalHeight:window.innerHeight||document.documentElement.clientHeight,originalWidth:window.innerWidth||document.documentElement.clientWidth,isResize:function(){var h=window.innerHeight||document.documentElement.clientHeight,w=window.innerWidth||document.documentElement.clientWidth;
return this.originalHeight!=h||this.originalWidth!=w?(this.originalHeight=h,this.originalWidth=w,!0):!1}};return"finance"===namespace.channel?{init:!1,callbackQueue:[],responsifyFullscreen:function(config,el){var resizeCallback=function(){var winWidth=dom.getViewportWidth();
winWidth>1280?FullscreenPlugin.widescreenify(config,el,1240):1280>=winWidth&&FullscreenPlugin.normalize(config,el,1e3),0===parseInt(el.style.height)&&el.style.filter&&(el.style.filter="")};if(this.callbackQueue.push(resizeCallback),!this.init){var self=this;
resizeCallback(),evt.on(window,"resize",function(){(!ua.ie||IeWindowResizeHook.isResize())&&self.callbackQueue.forEach(function(cb){cb&&cb()})}),this.init=!0}},isChannel:!0}:{responsifyFullscreen:function(){},isChannel:!1}}();namespace.setDisplayHandler({qzone:{ping:IMMEDIATELY,render:function(config,el,area_id){var fodder=config.fodder[0];
namespace.qzone.push({cid:config.cid,oid:config.oid,loc:area_id,resource_url:fodder.resource_url,link_to:fodder.link_to,text:config.monitor_url,width:fodder.width,height:fodder.height})}},focusimage:{ping:NONE,render:function(config,el,area_id){var oids=[],cids=[],resource_urls=[],link_tos=[],monitor_urls=[],title=[],configs=config.data;
each(configs,function(config){oids.push(config.oid),cids.push(config.cid),resource_urls.push(config.fodder[0].resource_url),link_tos.push(config.fodder[0].link_to),title.push(config.fodder[0].title||""),monitor_urls.push(config.monitor_url||"")});var fodder_size=configs[0].fodder[0],width=fodder_size.width,height=fodder_size.height,version=(generateId(),generateId(),"?v=20111201"),flashloaderfile="focusimage.swf",ping_server=config.ping||"p.l.qq.com";
"adblock"==crystal_args.runat&&(flashloaderfile="focusimage_adb.swf"),renderFodder({resource_url:resource_swf(flashloaderfile+version),width:width,height:height,initvars:mix({separator:SEPARATOR,oid:oids.join(SEPARATOR),cid:cids.join(SEPARATOR),link_to:link_tos.join(SEPARATOR),resource_url:resource_urls.join(SEPARATOR),monitor_url:monitor_urls.join(SEPARATOR),loc:area_id,title:title.join(SEPARATOR),runat:crystal_args.runat,ping_server:ping_server},configs[0].fodder[0].initvars)},el)
}},turner:{ping:NONE,render:function(config,el,area_id){var oids=[],cids=[],resource_urls=[],link_tos=[],monitor_urls=[],configs=config.data;each(configs,function(config){("adblock"!=crystal_args.runat||"100"!=config.oid&&"1"!=config.oid)&&(oids.push(config.oid),cids.push(config.cid),resource_urls.push(config.fodder[0].resource_url),link_tos.push(config.fodder[0].link_to),monitor_urls.push(config.monitor_url||""))
});var fodder_size=configs[0].fodder[0],width=fodder_size.width,height=fodder_size.height,togglefunc=generateId(),coverid=generateId(),mover=generateId(),mout=generateId(),version="?v=20120309",flashloaderfile="turner.swf",ping_server=config.ping||"p.l.qq.com";
"adblock"==crystal_args.runat&&(flashloaderfile="turner_adb.swf"),renderFodder({resource_url:resource_swf(flashloaderfile+version),width:width,height:height,initvars:mix({separator:SEPARATOR,oid:oids.join(SEPARATOR),cid:cids.join(SEPARATOR),link_to:link_tos.join(SEPARATOR),resource_url:resource_urls.join(SEPARATOR),monitor_url:monitor_urls.join(SEPARATOR),loc:area_id,runat:crystal_args.runat,ping_server:ping_server,toggle:lib_name+".fns."+togglefunc,height:height,width:width},configs[0].fodder[0].initvars)},el);
var flash_object=el.getElementsByTagName("object")[0];namespace.fns[mover]=function(){var fo=getFlashObject(flash_object.id);fo&&fo.mover()},namespace.fns[mout]=function(){var fo=getFlashObject(flash_object.id);fo&&fo.mout()},namespace.fns[togglefunc]=function(url,loc){var p=dom.$(loc);
if(dom.$(coverid))dom.$(coverid).setAttribute("href",url);else{var cover=createCover(width,height,url);cover.id=coverid,p.appendChild(cover),evt.on(cover,"mouseover",namespace.fns[mover]),evt.on(cover,"mousemove",namespace.fns[mover]),evt.on(cover,"mouseout",namespace.fns[mout])
}}}},popup:{ping:NONE,render:function(config,el,area_id){sinceLast(area_id+config.oid,2,0,function(){var display_config=config.display_config,fodder=config.fodder[0];setTimeout(function(){var popwin="adblock"==crystal_args.runat?"res/popwin.html?":"a.html?",popup_window=window.open(resource(popwin)+serializeQuery(mix({loc:area_id,oid:config.oid,cid:config.cid},fodder)),"_blank",serializeDictionary("=",",",!1,!1)({menubar:"no",left:0,top:0,width:fodder.width,height:fodder.height}));
popup_window&&display_config.focus_back&&(popup_window.blur(),window.focus())},1e3*display_config.delay)})}},alternative_banner:{ping:LAZY,render:function(config,el){var fodders=config.fodder;renderFodder(fodders[isSupport(getExtension(fodders[0].resource_url),fodders[0].version)?0:1],el)
}},dropdown_video:{ping:LAZY,render:function(config,el){var flash,fodders=config.fodder,banner_fodder=fodders[0],video_fodder=fodders[1],skin_fodder=fodders[2],width=banner_fodder.width,banner_height=banner_fodder.height,extend_height=skin_fodder.height,banner_link_to=banner_fodder.link_to,extend_link_to=video_fodder.link_to;
mix(el.style,{position:"relative",overflow:"visible"});var expand=generateId(),collapse=generateId();namespace.fns[collapse]=function(){flash.style.height=banner_height+"px"},namespace.fns[expand]=function(){flash.style.height=extend_height+"px"},renderFodder({resource_url:resource_swf("expand_video.swf"),width:width,height:banner_height,params:{wmode:"transparent"},initvars:{width:width,banner_height:banner_height,extend_height:extend_height,banner_link_to:banner_link_to,extend_link_to:extend_link_to,pre:banner_fodder.resource_url,extend:video_fodder.resource_url,skin:skin_fodder.resource_url,expand:lib_name+".fns."+expand,collapse:lib_name+".fns."+collapse,oid:config.oid}},el),flash=el.firstChild,flash.style.position="absolute",flash.style.zIndex="100",flash.className="absolute"
}},video:{ping:LAZY,render:function(config,el){var fodders=config.fodder,video_fodder=fodders[0],skin_fodder=fodders[1],pre_fodder=fodders[2],video_width=video_fodder.width,video_height=video_fodder.height;renderFodder({resource_url:resource_swf("embed_video.swf"),initvars:{dwidth:video_width,dheight:video_height,oid:config.oid,skin:skin_fodder.resource_url,extend:video_fodder.resource_url,pre:pre_fodder.resource_url,banner_link_to:pre_fodder.link_to,extend_link_to:video_fodder.link_to},width:video_width,height:video_height},el)
}},fixed_video2:{ping:IMMEDIATELY,render:function(config,el){fixed_video2_render(config,el)}},fixed_video2_no_ping:{ping:NONE,render:function(config,el,elId,ping){fixed_video2_render(config,el,elId,ping)}},float_fullscreen:{ping:IMMEDIATELY,render:function(config,el){var fodder=config.fodder[0],display_config=config.display_config,closed=!1,container_height=close_button_height+fodder.height,close=function(){closed||(el.style.display="none",mutex_unlock(),closed=!0)
};dom.setStyle(el,{position:"absolute",width:fodder.width,height:container_height,"background-color":"#ccc","z-index":9999}),el.className="absolute",enter_mutex(function(){var content=createAbsoluteElement({width:fodder.width,height:fodder.height,left:0,top:close_button_height}),close_button=createAbsoluteElement({width:close_button_width,height:close_button_height,"background-image":"url("+close_button_url+")",cursor:"pointer",right:0,top:0});
if(evt.on(close_button,"click",close),el.appendChild(close_button),el.appendChild(content),6==ua.ie){var shim=document.createElement("iframe");shim.frameBorder="no",dom.setStyle(shim,{opacity:0,width:fodder.width,height:container_height}),el.appendChild(shim)
}renderFodder(fodder,content,null,null,!0),el.style.display="block",setTimeout(close,1e3*display_config.duration)},display_config.delay)}},raw_fullscreen:{ping:IMMEDIATELY,render:function(config,el){var fodder=config.fodder[0],display_config=config.display_config;
enter_mutex(function(){renderFodder(fodder,el,null,null,!0),dom.setStyle(el,{display:"block",height:fodder.height}),setTimeout(function(){el.style.display="none",mutex_unlock(),forceCheckRender()},1e3*display_config.duration)},display_config.delay)}},plugin_fullscreen:function(){var close_button_config={width:"63px",height:"24px",right:"7px",top:"7px",display:"block","z-index":11,cursor:"pointer","background-color":"#fff"},time_text_config={right:"75px",top:"7px",display:"block","line-height":"23px","vertical-align":"middle","text-align":"center",color:"#fff",background:"transparent","z-index":11};
return appendPngToConfig(close_button_config,resource("res/icon/righttop.png")),{ping:NONE,render:function(config,el,el_id,ping){var fodder_index=0,time_num=0,display_config=config.display_config,close_button=createAbsoluteElement(close_button_config),time_text=createAbsoluteElement(time_text_config),parent_direction=display_config.parent_direction||"width",critical=display_config.critical||977,freq=display_config.freq||2,toggle_width=parseInt(el.getAttribute("data-"+parent_direction));
isNaN(toggle_width)&&(toggle_width=parseInt(dom.getStyle(el.parentNode,parent_direction))),isNaN(toggle_width)&&(toggle_width=parseInt(el.parentNode.offsetHeight)),critical>toggle_width&&(fodder_index=1);var fodder=config.fodder[fodder_index],fodder_container=dom.createElement({overflow:"hidden",position:"absolute",left:0,top:0});
el.appendChild(fodder_container);var change_text=function(time_num){time_text.innerHTML='&nbsp;&nbsp;\u5e7f\u544a\u5269\u4f59\u65f6\u95f4\uff1a&nbsp;<span style="color:red;">'+(display_config.duration-time_num)+"</span>&nbsp;\u79d2&nbsp;"};dom.setStyle(time_text,{"z-index":12,padding:"1px"});
var callbackFunc=generateId(),callbackDone=!1;namespace.fns[callbackFunc]=function(){if(!callbackDone){var showFunc=namespace.getRegisterCallback(el_id,"show");if(showFunc&&showFunc(),callbackDone=!0,fodder.cover&&fodder_container.appendChild(createCover(fodder.width,fodder.height,fodder.link_to)),dom.setStyle(el,{display:"block",overflow:"visible"}),display_config.close&&(fodder_container.appendChild(close_button),evt.on(close_button,"click",hide)),setTimeout(hide,1e3*display_config.duration),display_config.time){fodder_container.appendChild(time_text),fodder_container.appendChild(dom.createElement({position:"absolute",right:"65px",top:"7px",width:"130px",height:"24px",background:"#333",filter:"alpha(opacity=60)",opacity:.6,overflow:"hidden"}));
var t1=function(){time_num!=display_config.duration&&(time_num++,change_text(time_num),setTimeout(t1,1e3))};t1()}ping()}};var show_action=function(){mutex_lock(),renderFodder({resource_url:resource_swf("res/loadresource.swf?v=20111001"),params:{wmode:"opaque"},initvars:{oid:config.oid,dwidth:fodder.width,dheight:fodder.height,resource_url:fodder.resource_url,callback:lib_name+".fns."+callbackFunc},width:fodder.width,height:fodder.height},fodder_container),dom.setStyle(el,{display:"block",width:fodder.width,height:ua.ie?0:1,overflow:"hidden",position:"absolute"==dom.getStyle(el,"position")?"absolute":"relative"})
},hide=function(){if(el.parentNode){dom.setStyle(el,{display:"none"}),setTimeout(function(){el.parentNode.removeChild(el)},20),mutex_unlock();var hideFunc=namespace.getRegisterCallback(el_id,"hide");hideFunc&&hideFunc()}},_show=function(){sinceLast(el_id,freq,0,show_action)
};enter_mutex(function(){mutex_unlock(),_show()},display_config.delay)}}}(),fullscreen:function(){var replay_button_config={width:"24px",height:"17px",right:"-22px",top:"-9px",display:"none","z-index":999,cursor:"pointer"},close_button_config={width:"63px",height:"24px",right:"7px",top:"7px",display:"none","z-index":11,cursor:"pointer","background-color":"transparent"},anim_config={duration:.5},getCover=function(container){var o;
return each(container.getElementsByTagName("a"),function(el){/a_cover/.test(el.className)&&(o=el)}),o};return appendPngToConfig(replay_button_config,resource("f_replay3.png")),appendPngToConfig(close_button_config,resource("res/icon/righttop.png")),{ping:IMMEDIATELY,render:function(config,el){var close_timer,fodder=config.fodder[0],display_config=config.display_config,close_button=createAbsoluteElement(close_button_config),replay_button=createAbsoluteElement(replay_button_config),fodder_container=dom.createElement({overflow:"hidden"});
el.appendChild(fodder_container),el.style.zIndex=999,dom.setStyle(fodder_container,{height:0}),dom.setStyle(el,{position:"relative",display:"block",width:fodder.width+"px",height:0,overflow:"visible"});var flash=fodder_container.getElementsByTagName("object")[0],container_anim=new Anim(el,anim_config),fodder_container_anim=new Anim(fodder_container,anim_config);
container_anim.on("Complete",function(){0==this.to.height?afterClose():afterOpen()});var afterClose=function(){setTimeout(function(){el.style.filter&&(el.style.filter="")},0),replay_button.style.display="block","undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock(),forceCheckRender()
},afterOpen=function(){var cover_layer=getCover(fodder_container);cover_layer&&(cover_layer.style.display="block"),close_button.style.display="block",close_timer=setTimeout(hide,1e3*display_config.duration)},hide_from_to={from:{height:fodder.height},to:{height:0}},show_from_to={from:{height:0},to:{height:fodder.height}},hide=function(){clearTimeout(close_timer);
var cover_layer=getCover(fodder_container);cover_layer&&(cover_layer.style.display="none"),container_anim.morph(hide_from_to),fodder_container_anim.morph(hide_from_to),close_button.style.display="none"},show=function(){if(renderFodder(fodder,fodder_container),fodder_container.appendChild(close_button),clearTimeout(close_timer),container_anim.morph(show_from_to),fodder_container_anim.morph(show_from_to),replay_button.style.display="none",flash&&setTimeout(function(){try{flash.Rewind(),flash.Play()
}catch(e){}},50),ChannelDigiPlugin.isChannel||ChannelFinancePlugin.isChannel){var winWidth=dom.getViewportWidth();winWidth>1280?FullscreenPlugin.widescreenify(config,el,1240):1280>=winWidth&&FullscreenPlugin.normalize(config,el,1e3)}};evt.on(close_button,"click",hide),evt.on(replay_button,"click",function(){if(ChannelDigiPlugin.isChannel||ChannelFinancePlugin.isChannel){var winWidth=dom.getViewportWidth();
winWidth>1280?FullscreenPlugin.widescreenify(config,el,1240):1280>=winWidth&&FullscreenPlugin.normalize(config,el,1e3)}_show(!1)}),el.appendChild(replay_button),ChannelDigiPlugin.responsifyFullscreen(config,el),ChannelFinancePlugin.responsifyFullscreen(config,el);
var _show=function(retry){retry?enter_mutex(show,0):0==mutex_lock()&&show()};setTimeout(function(){_show(!0)},1e3*display_config.delay)}}}(),adptive_fullscreen:function(){var replay_button_config={width:"24px",height:"17px",right:"-22px",top:"-9px",display:"none","z-index":999,cursor:"pointer"},close_button_config={width:"63px",height:"24px",right:"7px",top:"7px",display:"none","z-index":11,cursor:"pointer"},anim_config={duration:.5},getCover=function(container){var o;
return each(container.getElementsByTagName("a"),function(el){/a_cover/.test(el.className)&&(o=el)}),o};return{ping:IMMEDIATELY,render:function(config,el){"narrow"==config.display_config.type?(replay_button_config={width:"20px",height:"20px",right:"0px",top:"-20px",display:"none","z-index":999,cursor:"pointer"},close_button_config={width:"66px",height:"20px",right:"0px",top:"0px",display:"none","z-index":11,cursor:"pointer"},"undefined"!=typeof config.fodder[2]?(replay_button_config.width=config.fodder[2].width,appendPngToConfig(replay_button_config,config.fodder[2].resource_url)):appendPngToConfig(replay_button_config,resource("f_replay3.png")),appendPngToConfig(close_button_config,resource("res/icon/righttop2.png"))):(appendPngToConfig(replay_button_config,resource("f_replay3.png")),appendPngToConfig(close_button_config,resource("res/icon/righttop.png")));
var close_timer,fodder=config.fodder[0],fodder_big=config.fodder[1],display_config=config.display_config,close_button=createAbsoluteElement(close_button_config),close_button_big=createAbsoluteElement(close_button_config),replay_button=createAbsoluteElement(replay_button_config),fodder_container_small=dom.createElement({overflow:"hidden"}),fodder_container_big=dom.createElement({overflow:"hidden"});
el.appendChild(fodder_container_small),el.appendChild(fodder_container_big),el.style.zIndex=999,dom.setStyle(el,{position:"relative",display:"block",height:0,overflow:"visible"});var flash=fodder_container_small.getElementsByTagName("object")[0],flash_big=fodder_container_big.getElementsByTagName("object")[0],container_anim=new Anim(el,anim_config),fodder_container_anim=new Anim(fodder_container_small,anim_config),fodder_container_big_anim=new Anim(fodder_container_big,anim_config);
renderFodder(fodder,fodder_container_small),renderFodder(fodder_big,fodder_container_big),fodder_container_small.appendChild(close_button),fodder_container_big.appendChild(close_button_big),dom.setStyle(fodder_container_small,{height:0,margin:"0 auto"}),dom.setStyle(fodder_container_big,{height:0,margin:"0 auto"}),container_anim.on("Complete",function(){0==this.to.height?afterClose():afterOpen()
});var afterClose=function(){var winWidth=dom.getViewportWidth();winWidth>1280?(fodder_container_small.style.display="none",fodder_container_big.style.display="block"):1280>=winWidth&&(fodder_container_small.style.display="block",fodder_container_big.style.display="none"),replay_button.style.display="block","undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock(),forceCheckRender()
},afterOpen=function(){var cover_layer=getCover(fodder_container_small),cover_layer_big=getCover(fodder_container_big);cover_layer&&(cover_layer.style.display="block"),cover_layer_big&&(cover_layer_big.style.display="block"),close_button.style.display="block",close_button_big.style.display="block",close_timer=setTimeout(hide,1e3*display_config.duration)
},hide_from_to={from:{height:fodder.height},to:{height:0}},show_from_to={from:{height:0},to:{height:fodder.height}},hide=function(){clearTimeout(close_timer);var cover_layer=getCover(fodder_container_small),cover_layer_big=getCover(fodder_container_big);cover_layer&&(cover_layer.style.display="none"),cover_layer_big&&(cover_layer_big.style.display="none"),container_anim.morph(hide_from_to),fodder_container_anim.morph(hide_from_to),fodder_container_big_anim.morph(hide_from_to),close_button.style.display="none",close_button_big.style.display="none"
},show=function(){clearTimeout(close_timer),container_anim.morph(show_from_to),fodder_container_anim.morph(show_from_to),fodder_container_big_anim.morph(show_from_to),replay_button.style.display="none",flash&&setTimeout(function(){try{flash.Rewind(),flash.Play()
}catch(e){}},50),flash_big&&setTimeout(function(){try{flash.Rewind(),flash.Play()}catch(e){}},50)},resizeCallback=function(){var winWidth=dom.getViewportWidth();winWidth>1280?(el.style.width=fodder_big.width+"px",fodder_container_small.style.display="none",fodder_container_big.style.display="block"):1280>=winWidth&&(el.style.width=fodder.width+"px",fodder_container_small.style.display="block",fodder_container_big.style.display="none")
};resizeCallback(),evt.on(window,"resize",resizeCallback),evt.on(close_button,"click",hide),evt.on(close_button_big,"click",hide),evt.on(replay_button,"click",function(){_show(!1)}),el.appendChild(replay_button);var _show=function(retry){retry?enter_mutex(show,0):0==mutex_lock()&&show()
},keepShow=function(){_show(!0)};setTimeout(function(){"narrow"==config.display_config.type?sinceLast(config.loc,2,0,keepShow):keepShow()},1e3*display_config.delay)}}}(),expanded_central:{ping:NONE,render:function(){function TimeCounter(last,outputEl,callback){this.last=last,this.originalLast=last,this.outputEl=outputEl,this.callback=callback,this.handler
}function expandedCentralPing(lviewConfig,actionId){var pingUrl=format("http://m.l.qq.com?t=s&mid={oid}&actid={actid}&subactid={subactid}&aver={aver}&oid={oid}&locid={loc}{token}{uin}",{oid:lviewConfig.oid,actid:actionId,subactid:0,aver:lviewConfig.aver?lviewConfig.aver:"",loc:lviewConfig.loc,token:"",uin:""});
sendPing(pingUrl)}var timeCountdownTemplate='<div style="position:absolute; top:0; left:0; width:{{WIDTH}}; height:{{HEIGHT}}; line-height:18px; padding:1px 4px; color:white; opacity: 0.3; filter: alpha(opacity=30); background-color:#000; z-index: 100; font-size:12px; zoom:1;">&#24191;&#21578;&#26102;&#38388;&#36824;&#21097;:<span id="{{ID}}" style="color:#D7DB2E; font-weight:bold; padding:0 2px; zoom:1;"></span>&#31186;</div>',closeButtonTemplate='<button type="button" id="{{ID}}" style="position:absolute; width:63px; height:24px; top:0; right:0; border-width:0px; background-color:white; background-image: url('+resource("res/icon/righttop.png")+'); cursor: pointer; z-index:101;"></button>';
return TimeCounter.prototype.run=function(){if(this.last>0){this.outputEl.innerHTML=this.last,this.last--;var self=this;this.handler=setTimeout(function(){self.run()},1e3)}else this.callback&&this.callback()},TimeCounter.prototype.stop=function(){this.handler&&(clearTimeout(this.handler),this.handler=void 0)
},TimeCounter.prototype.restart=function(){this.stop(),this.last=this.originalLast,this.run()},function(config,el,el_id,ping){var fodders=config.fodder,smallResourceFodder=fodders[0],bigResourceFodder=fodders[1],oid=config.oid,duration=config.display_config.duration,maskDuration=config.display_config.mask_duration,adWrapper=document.createElement("div");
dom.setStyle(adWrapper,{position:"relative",width:"100%",height:"100%"});var smallAdEl=document.createElement("div");renderFodder(smallResourceFodder,smallAdEl,null,null,!0);var img=new Image(1,1);img.src=bigResourceFodder.resource_url,namespace.__images.push(img);
var bigAdEl=document.createElement("div"),bigResourceStyle={position:"absolute",top:"0px",right:"0px",overflow:"hidden","z-index":13};renderFodder(bigResourceFodder,bigAdEl,null,null,!0),dom.setStyle(bigAdEl,bigResourceStyle);var timeCountDownNumId="ecTime"+oid,timeCountDownHtml=timeCountdownTemplate.replace("{{ID}}",timeCountDownNumId).replace("{{WIDTH}}",bigResourceFodder.width+"px").replace("{{HEIGHT}}",bigResourceFodder.height+"px"),img2=new Image(1,1);
img2.src=resource("f_close.png"),namespace.__images.push(img2);var closeButtonId="ecCloseButton"+oid,closeButtonHtml=closeButtonTemplate.replace("{{ID}}",closeButtonId);bigAdEl.innerHTML+=timeCountDownHtml+closeButtonHtml,adWrapper.appendChild(smallAdEl),adWrapper.appendChild(bigAdEl),el.appendChild(adWrapper);
var timeCountDownNum=document.getElementById(timeCountDownNumId),timeCountDown=timeCountDownNum.parentNode,closeButton=document.getElementById(closeButtonId),bigAdCover=namespace.getFodderCover(bigAdEl),bigAd_anim=new Anim(bigAdEl,{duration:.5}),mask_anim=new Anim(timeCountDown,{duration:.5});
evt.on(closeButton,"click",function(){bigAd_anim.morph({to:{width:0}}),expandedCentralPing(config,"12003")}),bigAdCover&&evt.on(bigAdCover,"click",function(){expandedCentralPing(config,"12001")});var timeCounter=new TimeCounter(parseInt(duration),timeCountDownNum,function(){bigAd_anim.morph({to:{width:0}})
});namespace.setArea(el_id,{open:function(){ping(),bigAdEl.style.width=bigResourceFodder.width+"px",dom.setStyle(timeCountDown,{width:bigResourceFodder.width+"px",height:bigResourceFodder.height+"px"}),setTimeout(function(){mask_anim.morph({to:{width:110,height:18}})
},1e3*maskDuration),timeCounter.restart()},close:function(){bigAd_anim.morph({to:{width:0}})},isready:function(){return!0}})}}()},image_text:{ping:IMMEDIATELY,render:function(){var text_margin="0 4px",createImageBlock=function(image_fodder){var img=dom.createElement({"vertical-align":"top",border:0,width:image_fodder.width+"px",height:image_fodder.height+"px",margin:"4px"},null,"img");
return img.src=image_fodder.resource_url,img},text_default_style={"font-size":"12px","font-family":"Simsun, Arial","line-height":1.5,overflow:"hidden"},createTitleBlock=function(text_title){var div=dom.createElement(mix({color:"#3B5998","font-weight":"bold",margin:text_margin},text_default_style));
return div.appendChild(document.createTextNode(text_title)),div},createContentBlock=function(text_content,width){var div=dom.createElement(mix({color:"#333","vertical-align":"top",width:width-16+"px",margin:text_margin},text_default_style));return setInlineBlock(div),div.appendChild(document.createTextNode(text_content)),div
};return function(config,el){var fodders=config.fodder,image_fodder=fodders[0],title_fodder=fodders[1],content_fodder=fodders[2],title_block=createTitleBlock(title_fodder),image_block=createImageBlock(image_fodder),content_block=createContentBlock(content_fodder,el.offsetWidth-image_fodder.width,el.offsetHeight);
dom.setStyle(el,{"background-color":"#fff","text-align":"left",overflow:"hidden",position:"absolute"==dom.getStyle(e,"position")?"absolute":"relative"}),el.appendChild(title_block),el.appendChild(image_block),el.appendChild(content_block);var cover=createCover(el.offsetWidth,el.offsetHeight,config.link_to);
el.appendChild(cover),evt.on(cover,"mouseover",function(){dom.setStyle(title_block,{"text-decoration":"underline"})}),evt.on(cover,"mouseout",function(){dom.setStyle(title_block,{"text-decoration":"none"})})}}()},float2:{ping:IMMEDIATELY,render:function(config,el,area_id){el=setOrCreateFloatEl(config,el,area_id);
var fodder=config.fodder[0],buoy=new FixedPosElement(el);buoy.setCoordinates(mix({width:fodder.width,height:fodder.height},config.display_config)),renderFodder(fodder,el)}},float2_closable:{ping:IMMEDIATELY,render:function(config,el,area_id){el=setOrCreateFloatEl(config,el,area_id);
var fodder=config.fodder[0],buoy=new FixedPosElement(el);buoy.setCoordinates(mix({width:fodder.width,height:fodder.height+13},config.display_config));var close_button=dom.createElement({position:"absolute",width:13,height:13,top:0,right:0,cursor:"pointer"},{"class":"absolute",src:resource("db_close.gif")},"img");
close_button.onclick=function(){el.style.display="none"};var ct=dom.createElement({position:"absolute",width:fodder.width,height:fodder.height,top:"13px"},{"class":"absolute"});el.appendChild(close_button),el.appendChild(ct),renderFodder(fodder,ct,null,null,!0)
}},takeover_plus:{ping:IMMEDIATELY,render:function(config,el,area_id){function close(e){e=e||window.event,cookie.set(area_id+"_c",2,{expires:1,path:"/"}),el.style.display="none",window.QQindexAdShut&&"function"==typeof window.QQindexAdShut&&QQindexAdShut(),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0
}function resizeSideBar(){sideWidth=(dom.getDocumentWidth()-titleWidth)/2,dom.setStyle(leftSideCover,{width:sideWidth+"px",left:"-"+sideWidth+"px"}),dom.setStyle(rightSideCover,{width:sideWidth+"px",right:"-"+sideWidth+"px"}),dom.setStyle(el,{width:document.body.clientWidth<1010?"1010px":"100%"}),setTimeout(resizeSideBar,200)
}if(el){var backgroundDiv,titleCover,leftSideCover,rightSideCover,closeButton,backgroundImage=config.fodder[0].resource_url,backgroundLink=config.fodder[0].link_to,sideHeight=config.fodder[0].height||600,titleHeight=30,titleWidth=1010;"function"==typeof erweimaHide&&erweimaHide(),dom.setStyle(el,{display:"block",position:"relative",height:titleHeight+"px"}),backgroundDiv=dom.createElement({overflow:"hidden",height:sideHeight+"px",width:"100%",position:"absolute","z-index":-1,background:"url("+backgroundImage+") center top no-repeat",top:0,left:0}),coverWrapper=dom.createElement({position:"relative",height:"100%",width:titleWidth+"px",margin:"0 auto","z-index":100}),titleCover=dom.createElement({display:"block",height:"100%",width:"100%",cursor:"pointer"},{href:backgroundLink,target:"_blank"},"a"),el.appendChild(backgroundDiv),el.appendChild(coverWrapper);
var sideWidth=(dom.getDocumentWidth()-titleWidth)/2;leftSideCover=dom.createElement({display:"block",position:"absolute",top:0,left:"-"+sideWidth+"px",height:sideHeight+"px",width:sideWidth+"px"},{href:backgroundLink,target:"_blank"},"a"),rightSideCover=dom.createElement({display:"block",position:"absolute",top:0,right:"-"+sideWidth+"px",height:sideHeight+"px",width:sideWidth+"px"},{href:backgroundLink,target:"_blank"},"a"),closeButton=dom.createElement({position:"absolute",top:"0px",right:"5px",padding:0,margin:0,width:"63px",height:"24px","border-width":0,"background-image":"url("+resource("res/icon/righttop.png")+")"},{},"button"),evt.on(closeButton,"click",close),coverWrapper.appendChild(titleCover),coverWrapper.appendChild(leftSideCover),coverWrapper.appendChild(rightSideCover),coverWrapper.appendChild(closeButton),resizeSideBar()
}}},takeover:function(){var sidebar='<div style="position: absolute;width:{width}px; height: {height}px; background: url({fodder_url}) no-repeat scroll {position} transparent; top: 0px; {pos};" class="absolute"></div>',bg='<div style="position: absolute; width: {width}px; height: {height}px; background: url({fodder_url}) repeat-x scroll 0% 0% transparent; top: 0px; left: {left}px;" class="absolute"></div>',title='<div style="width:{width}px;height:{height}px;margin:0 auto;position:relative;display:block;z-index:100;overflow:visible;"><a style="display: block; cursor: pointer; width: {width}px; height:{height}px;background:url({fodder_url}) repeat-x scroll 0% 0%; " target="_blank" href="{link_to}"></a><span style="cursor:pointer;position:absolute;right:4px;top:4px;" id="{el_id}_close"><img src="{img}" alt="&#20851;&#38381;" /></span></div>',sidebar_width=1500;
return{ping:IMMEDIATELY,render:function(config,el,el_id){function beforeTopNav(){var miniWrap=dom.$("mini_nav_qq_wrap");if(miniWrap){if(miniWrap.previousSibling&&miniWrap.previousSibling.id==el_id)return!0;if(miniWrap.previousSibling&&miniWrap.previousSibling.previousSibling&&miniWrap.previousSibling.previousSibling.id==el_id)return!0
}return!1}var type=config.display_config.type||"extend",sidebar_left=sidebar_right=takeover_title="",close=function(){cookie.set(el_id+"_c",2,{expires:1,path:"/"}),document.getElementById(el_id).style.display="none",dom.$(sidebar_left)&&(dom.$(sidebar_left).style.display="none",dom.$(sidebar_right).style.display="none");
var miniWrap=dom.$("mini_nav_qq_wrap");miniWrap&&dom.setStyle(miniWrap,{width:"100%"})},resetSidebar=function(){setTimeout(function(){var dim=dom.getXY(dom.$(takeover_title));dom.setStyle(dom.$(sidebar_right),{left:dim[0]+config.fodder[0].width}),dom.setStyle(dom.$(sidebar_left),{right:dom.getDocumentWidth()-dim[0]}),dim=dom.getXY(dom.$(takeover_title)),resetSidebar()
},200)},open=function(){var fodders=config.fodder,width=(fodders[3].height,"100%"),t_height=fodders[0].height,t_width=fodders[0].width,max_bg_width=1e3,miniWrap=dom.$("mini_nav_qq_wrap");beforeTopNav()&&dom.setStyle(miniWrap,{width:t_width+"px",margin:"0 auto"});
var el_wrap=createAbsoluteElement({width:width,height:t_height,left:0,top:0,"overflow-y":"visible","overflow-x":"hidden",zIndex:-1});if("normal"==type){var el_wrap2=dom.createElement("<div></div>");dom.setStyle(el_wrap2,{width:t_width,height:t_height,margin:"0 auto",position:"relative",zIndex:100,overflow:"visible"}),el_wrap2.appendChild(dom.createElement(format(sidebar,{left:-sidebar_width,width:sidebar_width,height:fodders[1].height,position:"right top",fodder_url:fodders[1].resource_url}))),el_wrap2.appendChild(dom.createElement(format(sidebar,{left:t_width,height:fodders[2].height,width:sidebar_width,position:"left top",fodder_url:fodders[2].resource_url}))),el_wrap2.appendChild(dom.createElement(format(bg,{left:-max_bg_width,height:fodders[3].height,width:max_bg_width,fodder_url:fodders[3].resource_url}))),el_wrap2.appendChild(dom.createElement(format(bg,{left:t_width,height:fodders[3].height,width:max_bg_width,fodder_url:fodders[3].resource_url}))),el_wrap.appendChild(el_wrap2)
}var el_title=dom.createElement(format(title,{width:t_width,height:t_height,fodder_url:fodders[0].resource_url,link_to:fodders[0].link_to,el_id:el.id,img:resource("res/icon/righttop.png")}));if(takeover_title=generateId(),el_title.id=takeover_title,dom.setStyle(el,{position:"relative",textAlign:"center",display:"block",height:t_height,width:width}),"extend"!=type&&el.appendChild(el_wrap),el.appendChild(el_title),"extend"==type){var basepoint=dom.getXY(el_title),stand_pos=(dom.getDocumentWidth()-t_width)/2;
basepoint[0]>stand_pos?(right_fix=-1,left_fix=0):(right_fix=0,left_fix=-1);var el_wrap_right=createAbsoluteElement({right:0,left:basepoint[0]+t_width+right_fix,top:basepoint[1],overflow:"hidden",height:fodders[2].height},!0);sidebar_right=generateId(),el_wrap_right.id=sidebar_right,el_wrap_right.appendChild(dom.createElement({display:"block",height:fodders[3].height+"px",background:"url("+fodders[3].resource_url+") repeat-x",overflow:"hidden"})),el_wrap_right.appendChild(dom.createElement(format(sidebar,{height:fodders[2].height,width:sidebar_width,position:"left top",pos:"left:0",fodder_url:fodders[2].resource_url})));
var el_wrap_left=createAbsoluteElement({left:0,right:dom.getDocumentWidth()-basepoint[0]+left_fix,top:basepoint[1],overflow:"hidden",height:fodders[1].height},!0);sidebar_left=generateId(),el_wrap_left.id=sidebar_left,el_wrap_left.appendChild(dom.createElement({display:"block",height:fodders[3].height+"px",background:"url("+fodders[3].resource_url+") repeat-x",overflow:"hidden"})),el_wrap_left.appendChild(dom.createElement(format(sidebar,{height:fodders[2].height,width:sidebar_width,position:"right top",pos:"right:0",fodder_url:fodders[1].resource_url}))),evt.on(window,"resize",function(){resetSidebar()
})}evt.on($(el_id+"_close"),"click",close)},freqFunc=function(){open()};freqFunc()}}}(),fuceng:{ping:LAZY,render:function(){var Ad={initAdDuration:function(lviewDuration){lviewDuration=parseInt(lviewDuration),this.adDuration=1e3*(isNaN(lviewDuration)?8:lviewDuration)
},init:function(){var adData=this.adData,floatBannerFodder=adData.fodder[0];this.initAdDuration(adData.display_config.duration),this.floatBanner=document.createElement("div"),namespace.renderFodder(floatBannerFodder,this.floatBanner),this.closeFloatBannerBtn=document.createElement("div"),namespace.dom.setStyle(this.closeFloatBannerBtn,{position:"absolute",top:"0",right:"0",width:"63px",height:"24px",borderWidth:"0","z-index":11,backgroundImage:"url("+resource("res/icon/righttop.png")+")"}),this.floatBanner.appendChild(this.closeFloatBannerBtn),namespace.dom.setStyle(this.floatBanner,{position:FeatureDetector.cssPositionFixed?"fixed":"absolute",display:"none",left:"50%",top:FeatureDetector.cssPositionFixed?"50%":document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px",marginLeft:"-"+floatBannerFodder.width/2+"px",marginTop:"-"+floatBannerFodder.height/2+"px",zIndex:"999"}),document.body.appendChild(this.floatBanner),this.createMiniBar(),this.initEvent(),this.beClosed=!1
},replay:function(callback){this.showImpl(callback)},showImpl:function(callback){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null);var self=this;this.floatBanner.style.display="block",this.timeoutId=setTimeout(function(){self.closeFloatBanner(),self.showMiniBar(),"undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock(),callback&&callback()
},this.adDuration)},show:function(){var self=this;enter_mutex(function(){self.pvSent||(Ad.ping(),self.pvSent=!0),self.showImpl(function(){})})},destory:function(){document.body.removeChild(this.floatBanner),document.body.removeChild(this.miniBar)},createMiniBarReplayBtn:function(){var replayBtnId=generateId();
this.replayBtn=document.createElement("button"),namespace.dom.setStyle(this.replayBtn,{display:"block","border-width":"0","background-color":"white","font-size":"12px",padding:"0",margin:"0",width:"25px",height:"25px",color:"#000",cursor:"pointer","font-family":"Microsoft YaHei,SimHei,Arial"}),namespace.mix(this.replayBtn,{innerHTML:"&#37325;&#25773;",id:replayBtnId}),this.miniBar.appendChild(this.replayBtn),FeatureDetector.cssMozPrefix&&crystal.NOPrefixer.add([{selector:"#"+replayBtnId+"::-moz-focus-inner",rules:" border:0; padding:0;"}])
},createMiniBarCloseBtn:function(){this.closeMiniBarBtn=document.createElement("button"),namespace.dom.setStyle(this.closeMiniBarBtn,{display:"block",margin:"0",padding:"0",width:"25px",height:"25px","border-width":"0",background:"#eee url("+resource("cancel.png")+") no-repeat center center",cursor:"pointer"}),this.miniBar.appendChild(this.closeMiniBarBtn)
},createMiniBarBanner:function(){var miniBanner=document.createElement("div");miniBanner.style.position="relative",namespace.renderFodder(this.adData.fodder[1],miniBanner),this.miniBar.appendChild(miniBanner)},createMiniBar:function(){this.miniBar=document.createElement("div"),this.createMiniBarBanner(),this.createMiniBarReplayBtn(),this.createMiniBarCloseBtn();
var miniBarCss={display:"none",left:"0",zIndex:"100"};if(FeatureDetector.cssPositionFixed)miniBarCss.position="fixed",miniBarCss.bottom="10px";else{miniBarCss.position="absolute",miniBarCss.top=document.documentElement.scrollTop+(document.documentElement.clientHeight-210)+"px";
var self=this;window.onscroll=function(){self.miniBar.style.top=document.documentElement.scrollTop+(document.documentElement.clientHeight-210)+"px",self.floatBanner.style.top=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"}}namespace.dom.setStyle(this.miniBar,miniBarCss),document.body.appendChild(this.miniBar)
},showMiniBar:function(){this.miniBar.style.display="block"},closeMiniBar:function(){this.miniBar.style.display="none"},closeFloatBanner:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.beClosed||(this.beClosed=!0),this.floatBanner.style.display="none","undefined"!=typeof namespace.orderProcess&&namespace.orderProcess(),mutex_unlock()
},initEvent:function(){var self=this;namespace.evt.on(this.closeFloatBannerBtn,"click",function(){self.closeFloatBanner(),self.showMiniBar()}),namespace.evt.on(this.closeMiniBarBtn,"click",function(){self.closeMiniBar()}),namespace.evt.on(this.replayBtn,"click",function(){0==mutex_lock()&&(self.replay(function(){self.showMiniBar()
}),self.closeMiniBar())})}};return function(config,el,el_id,ping){Ad.adData=config,Ad.ping=ping,Ad.init(),Ad.show()}}()},zhaitongxiatui:{ping:LAZY,render:function(){var Ad={init:function(){this.locationEl=namespace.dom.$(this.adData.loc);var smallRes=this.renderSmallResource(),bigRes=this.renderBigResource();
this.initEvent(smallRes,bigRes)},show:function(){this.locationEl.style.display="block"},destory:function(){this.locationEl.innerHTML=""},renderSmallResource:function(){var smallResFodder=this.adData.fodder[0];smallResFodder.cover=!1;var smallResWrapper=document.createElement("div");
return namespace.renderFodder(smallResFodder,smallResWrapper,null,null,!0),this.locationEl.appendChild(smallResWrapper),this.locationEl.style.height="",smallResWrapper},renderBigResource:function(){var bigResFodder=this.adData.fodder[1],bigResWrapper=document.createElement("div");
return namespace.renderFodder(bigResFodder,bigResWrapper,null,null,!0),this.locationEl.appendChild(bigResWrapper),setTimeout(function(){bigResWrapper.style.display="none"},0),bigResWrapper},initEvent:function(smallRes,bigResWrapper){namespace.evt.on(smallRes,"mouseover",function(){bigResWrapper.style.display="block",smallRes.style.display="none"
}),namespace.evt.on(bigResWrapper,"mouseout",function(){bigResWrapper.style.display="none",smallRes.style.display="block"})}};return function(config){Ad.adData=config,Ad.init(),Ad.show()}}()},extendTurner:{ping:IMMEDIATELY,render:function(config,el){var extendType=config.display_config.extend_type,containerHeight=parseInt(dom.getStyle(el,"height")),smallAdHeight=config.fodder[0].height,bigAdHeight=config.fodder[1].height,bigAdLinkTo=config.fodder[1].link_to;
"none"===dom.getStyle(el,"display")&&dom.setStyle(el,{display:"block"}),containerHeight?dom.setStyle(el,{position:"relative"}):dom.setStyle(el,{height:smallAdHeight+"px",overflow:"hidden",position:"relative"});var smallAd=dom.createElement({position:"relative",width:config.fodder[0].width+"px",height:smallAdHeight+"px"});
renderFodder(config.fodder[0],smallAd,config.icon,"rb");var bigAd,expand,reduce;"cover"==extendType?(bigAd=dom.createElement({position:"absolute",width:config.fodder[1].width+"px",height:bigAdHeight+"px",top:0,left:0,"z-index":"10"}),expand=function(){dom.setStyle(bigAd,{display:"block"})
},reduce=function(){dom.setStyle(bigAd,{display:"none"})}):(bigAd=dom.createElement({position:"relative",width:config.fodder[1].width+"px",height:bigAdHeight+"px"}),expand=function(){dom.setStyle(smallAd,{display:"none"}),dom.setStyle(bigAd,{display:"block"}),dom.setStyle(el,{height:bigAdHeight+"px"})
},reduce=function(){dom.setStyle(el,{height:smallAdHeight+"px"}),dom.setStyle(bigAd,{display:"none"}),dom.setStyle(smallAd,{display:"block"})}),renderFodder(config.fodder[1],bigAd,config.icon,"rb"),dom.setStyle(bigAd,{display:"none"}),el.appendChild(smallAd),el.appendChild(bigAd),evt.on(smallAd,"mouseover",function(){expand(),namespace.ActionPing.send({actionCode:"EXTEND_TURNER_EXTEND",oid:config.oid,mid:config.oid,loc:config.loc,aver:config.aver})
}),evt.on(bigAd,"mouseout",function(){config.fodder[1].link_to=bigAdLinkTo,renderFodder(config.fodder[1],bigAd,config.icon,"rb"),reduce(),namespace.ActionPing.send({actionCode:"EXTEND_TURNER_REDUCE",oid:config.oid,mid:config.oid,loc:config.loc,aver:config.aver})
})}},expanded:{ping:IMMEDIATELY,render:function(config,el,el_id){var mainAdFodder=config.fodder[0],subAdFodder=config.fodder[1];if(renderFodder(mainAdFodder,el,config.icon),screen.availWidth>1024){var replay_button_config={right:"7px",top:"7px",display:"block",color:"#fcfcfc",fontWeight:"normal",background:"transparent","z-index":11,cursor:"pointer"},replay_button=createAbsoluteElement(replay_button_config);
replay_button.innerHTML="&#37325;&#25773;",el.appendChild(dom.createElement({position:"absolute",right:"6px",top:"7px",width:"28px",height:"20px",background:"#333",filter:"alpha(opacity=60)",opacity:.6,overflow:"hidden"}));var sendAction=function(config,actid,locid){var data=mix(config,{loc:locid,actid:actid}),posconvert=locid.indexOf("SLOT");
posconvert>-1&&(locid=locid.substr(0,posconvert));var url="http://m.l.qq.com?t=s&mid=800000008&actid={actid}&oid={oid}&locid={loc}";sendPing(format(url,data))},isSubAdRendered=!1,renderSubAd=function(conf){conf=conf||{},delayTime=conf.delayTime||0,duration=conf.duration||1e4,setTimeout(function(){if(!isSubAdRendered){var position=dom.getXY(el),subAdEl=createAbsoluteElement({top:position[1],left:mainAdFodder.width+position[0],overflow:"hidden","z-index":98},!0);
renderFodder(subAdFodder,subAdEl,config.icon),setTimeout(function(){subAdEl.parentNode.removeChild(subAdEl),isSubAdRendered=!1},duration),isSubAdRendered=!0;var resetSubAd=function(){setTimeout(function(){var dim=dom.getXY(el);dom.setStyle(subAdEl,{top:dim[1],left:dim[0]+mainAdFodder.width}),isSubAdRendered&&resetSubAd()
},200)};evt.on(window,"resize",function(){resetSubAd()})}},delayTime)};evt.on(replay_button,"click",function(){isSubAdRendered||(renderSubAd(),sendAction(config,80001,el_id))}),el.appendChild(replay_button),renderSubAd({delayTime:3e3})}}},rich_couplet:function(){return{ping:NONE,render:function(config,el,el_id,ping){function isClosed(config,el,el_id){var displayTime=cookie.get("display_time_"+el_id);
return displayTime?displayTime>(new Date).getTime():!1}function isVisible(config,el,el_id){return screen.availWidth>1152&&!isClosed(config,el,el_id)}function getContainer(config,el,el_id){var containerId="r_couplet_container_"+el_id,ieContainerId="r_couplet_ie_container_"+el_id,container=dom.$(containerId),ieContainer=dom.$(ieContainerId);
if(container||(container=dom.createElement({width:"980px",overflow:"visible",margin:"0 auto",position:"relative"},{rerender:"1"}),container.id=containerId,document.body.insertBefore(container,document.body.firstChild)),ua.ie){if(ieContainer)return ieContainer;
var ieContainer=dom.createElement({width:"980px",overflow:"visible",position:"relative"});return ieContainer.id=ieContainerId,dom.setStyle(container,{width:"100%",textAlign:"center"}),container.appendChild(ieContainer),ieContainer}return container}if(isVisible(config,el,el_id)){var pos=dom.getXY(dom.$("Main-A")),top=pos[1],left=pos[0],left_couplet_id=right_couplet="",_remove=function(el_id){_close(el_id)
},_close=function(){var leftNode=dom.$(left_couplet_id),rightNode=dom.$(right_couplet_id);if(leftNode&&rightNode){var container=leftNode.parentNode;container.removeChild(leftNode),container.removeChild(rightNode)}},_getCloseButton=function(config,fod,index,el_id){var closeButtonConfig={width:"10px",height:"10px",bottom:"0px",overflow:"hidden","z-index":12,cursor:"pointer"};
1==index?closeButtonConfig.right="0px":closeButtonConfig.left="0px",appendPngToConfig(closeButtonConfig,resource("res/rc_close.png"));var btn=createAbsoluteElement(closeButtonConfig);return evt.on(btn,"click",function(){_close(el_id),namespace.ActionPing.send({actionCode:"RICH_COUPLET_CLOSE",oid:config.oid,mid:300000003,loc:config.loc,aver:config.aver}),cookie.set("display_time_"+el_id,(new Date).getTime()+72e5,{expires:1,path:"/"})
}),btn},_hide=function(){dom.$(left_couplet_id)&&(dom.setStyle(dom.$(left_couplet_id),{display:"none"}),dom.setStyle(dom.$(right_couplet_id),{display:"none"}))},_show=function(){dom.$(left_couplet_id)&&("block"==dom.getStyle(dom.$(left_couplet_id),"display")||(dom.setStyle(dom.$(left_couplet_id),{display:"block"}),dom.setStyle(dom.$(right_couplet_id),{display:"block"}),ping(),namespace.ActionPing.send({actionCode:"RICH_COUPLET_SWITCH",oid:config.oid,mid:300000003,loc:config.loc,aver:config.aver})))
},_open=function(){},_init=function(config,el,el_id,dim){var fodder=config.fodder,default_show=(namespace.getArea(el_id).invoke("isready"),"none"),container=getContainer(config,el,el_id,dim);left_couplet_id="gaoqing_couplet_"+el_id+"_left",right_couplet_id="gaoqing_couplet_"+el_id+"_right";
var els=map(fodder,function(fod,index){var adEl=createAbsoluteElement({top:dim[1]+"px",left:1==index?981:"-101px",overflow:"hidden",display:default_show});adEl.id=1==index?right_couplet_id:left_couplet_id;var fadiv=dom.createElement({});return adEl.appendChild(fadiv),renderFodder(fod,fadiv),container.appendChild(adEl),adEl
});map(fodder,function(fod,index){var fcover=createCover(100,500,fod.link_to);dom.setStyle(fcover,{opacity:.5,"background-color":"#000"}),evt.on(fcover,"mouseover",function(){namespace.ActionPing.send({actionCode:"RICH_COUPLET_MOUSEOVER",oid:config.oid,mid:300000003,loc:config.loc,aver:config.aver});
for(var num=0;2>num;num++)for(var i=0,len=els[num].childNodes.length;len>i;i++)dom.hasClass(els[num].childNodes[i],"a_cover")&&dom.setStyle(els[num].childNodes[i],{opacity:0})}),evt.on(fcover,"mouseout",function(){namespace.ActionPing.send({actionCode:"RICH_COUPLET_MOUSEOUT",oid:config.oid,mid:300000003,loc:config.loc,aver:config.aver});
for(var num=0;2>num;num++)for(var i=0,len=els[num].childNodes.length;len>i;i++)dom.hasClass(els[num].childNodes[i],"a_cover")&&dom.setStyle(els[num].childNodes[i],{opacity:.5})}),els[index].appendChild(fcover);var but=_getCloseButton(config,fod,index,el_id);
evt.on(but,"mouseover",function(){for(var num=0;2>num;num++)for(var i=0,len=els[num].childNodes.length;len>i;i++)dom.hasClass(els[num].childNodes[i],"a_cover")&&dom.setStyle(els[num].childNodes[i],{opacity:0})}),evt.on(but,"mouseout",function(){for(var num=0;2>num;num++)for(var i=0,len=els[num].childNodes.length;len>i;i++)dom.hasClass(els[num].childNodes[i],"a_cover")&&dom.setStyle(els[num].childNodes[i],{opacity:.5})
}),els[index].appendChild(but)})};_init(config,el,el_id,[left,top]),namespace.setArea(el_id,{show:_show,hide:_hide,remove:_remove,close:_close,open:_open,isready:function(){return!0}})}}}}(),couplet:function(){var top_edge="discuz"==crystal_args.runat?165:200,left_edge=0,right_edge=0,close_button_size=20,close_button_html='<div style="width:{width}px;height:{height}px;background-color:#eee;line-height:20px;font-size:12px;text-align:{align};"><span style="cursor:pointer;text-decoration:underline;">&#20851;&#38381;&#24191;&#21578;</span></div>',sendAction=function(config,actid,locid){var data=mix(config,{loc:locid,actid:actid}),posconvert=locid.indexOf("SLOT");
posconvert>-1&&(locid=locid.substr(0,posconvert));var url="http://m.l.qq.com?t=s&mid=300000003&actid={actid}&oid={oid}&locid={loc}";sendPing(format(url,data))},close_button_config={width:"49px",height:"21px",right:"0px",top:"90px","z-index":12,cursor:"pointer","background-color":"#fff"},anim_config={duration:.5},client_screen_mode="normal";
return screen.availWidth<=1024&&(client_screen_mode="narrow"),{ping:NONE,render:function(config,el,el_id,ping){if("attach"==config.display_config.type&&"undefined"!=typeof config.display_config.cls){var contentspace=config.display_config.contentspace||0,content=namespace.dom.getElementsByClassName(config.display_config.cls)[0];
top_edge=namespace.dom.getXY(content)[1];var getAttachProps=function(){var contentWidth=content.offsetWidth;left_edge=right_edge=(document.body.offsetWidth-contentWidth-contentspace)/2}}var fodders=[config.fodder[0],config.fodder[1]];"undefined"!=typeof config.display_config.top_edge&&(top_edge=config.display_config.top_edge);
var type=config.display_config.type||"normal";"left"==type?(fodders.splice(1,0,{resource_url:""}),fodders.push({resource_url:""}),type="shrink"):"right"==type?(fodders.splice(1,0,{resource_url:""}),fodders.unshift({resource_url:""}),type="shrink"):"attach"==type&&getAttachProps();
var open=function(){("shrink"==type||"normal"==type||"attach"==type)&&config.fodder.length>2&&(fodders.push(config.fodder[2]),fodders.push(config.fodder[3])),"function"==typeof erweimaHide&&erweimaHide();var close=function(){"shrink"==type?sendAction(config,40003,el_id):"rich"==type?sendAction(config,40004,el_id):"attach"==type?sendAction(config,40012,el_id):sendAction(config,40001,el_id),cookie.set(el_id,(new Date).getTime()+72e5,{expires:1,path:"/"}),display(!1),richhide&&richhide()
},hide=function(evt){var rel=namespace.evt.getRelTarget(evt),node=rel,nohide=!1;if(node)for(;node.tagName&&"html"!=node.tagName.toLowerCase();){if(node.id&&0===node.id.indexOf("couplet_")){nohide=!0;break}node=node.parentNode}nohide||(sendAction(config,40005,el_id),shrink("hide"))
},show=function(evt){var rel=namespace.evt.getTarget(evt),node=rel,noshow=!1;node&&"a"!==node.tagName.toLowerCase()&&"object"!==node.tagName.toLowerCase()&&(noshow=!0),noshow||(sendAction(config,40006,el_id),shrink("show"))};if("rich"==type){var el_wrap=(generateId(),createAbsoluteElement({overflow:"visible","z-index":98,top:75,width:"100%"},!0)),fodder=config.fodder[2],cover=createCover(fodder.width,fodder.height,fodder.link_to);
renderFodder(fodder,el),el_wrap.appendChild(el),dom.setStyle(el,{width:0,overflow:"hidden",margin:"0 auto"}),el.appendChild(cover),appendPngToConfig(close_button_config,resource("f_close.png"));var closebtn=createAbsoluteElement(close_button_config);evt.on(closebtn,"click",function(){close()
}),el.appendChild(closebtn);var richshow=function(){var el=dom.$(el_id);if(1!=el.anim&&2!=el.anim){dom.setStyle(el_wrap,{display:"block"}),sendAction(config,40007,el_id);{dom.getXY(el)}el.anim=1;var mask_anim=new Anim(el,anim_config);mask_anim.on("Complete",function(){dom.setStyle(el,{overflow:"visible"}),el.anim=2,setTimeout(richhide,7500)
}),mask_anim.morph({to:{width:960}})}},richhide=function(){var el=dom.$(el_id);if(2==el.anim){var mask_anim=(dom.getXY(el),new Anim(el,anim_config));dom.setStyle(el,{overflow:"hidden"}),mask_anim.on("Complete",function(){el.anim=0,dom.setStyle(el_wrap,{display:"none"})
}),mask_anim.morph({to:{width:0}})}}}var coupletWidth,els=map(fodders,function(fodder,index){var el=createAbsoluteElement({top:top_edge,overflow:"hidden","z-index":98},!0);renderFodder(fodder,el,config.icon,index%2==0?"lb":"rb"),el.id="couplet_"+generateId();
var cover=createCover(fodder.width,fodder.height,fodder.link_to);if("shrink"==type||"normal"==type?2>index?evt.on(el,"mouseout",hide):evt.on(el,"mouseover",show):"rich"==type&&evt.on(cover,"mouseover",richshow),""==fodder.resource_url)return el;dom.setStyle(el,{width:fodder.width,height:fodder.height+close_button_size}),dom.setStyle(el.firstChild,{"vertical-align":"middle"});
var align=index%2==0?"right":"left",close_button_panel=dom.createElement(format(close_button_html,{width:fodder.width,height:close_button_size,align:align,close_button_url:close_button_url}));if("normal"==type&&config.dsp_id&&config.dsp_name&&el.appendChild(namespace.pt.privateOriganalIcon(config.dsp_name,config.private_link,{position:"absolute",width:"18px",height:"18px",right:"0px",bottom:"20px",cursor:"pointer","z-index":20,display:"block"})),evt.on(close_button_panel.firstChild,"click",close),el.appendChild(close_button_panel),el.appendChild(cover),fodder.fixed===!0){var c1=new FixedPosElement(el),pos={top:top_edge,width:fodder.width,height:fodder.height+close_button_size};
index%2==0?pos.left=left_edge:index%2==1&&(pos.right=right_edge),c1.setCoordinates(pos)}return el}),setAttachStyle=function(){if(document.body.offsetWidth>=1600){coupletWidth=config.display_config.normalWidth;var right_extra=right_edge-coupletWidth;dom.setStyle(els[0],{left:left_edge-coupletWidth}),0>right_extra?dom.setStyle(els[1],{right:0,width:1*coupletWidth+1*right_extra}):dom.setStyle(els[1],{right:right_edge-coupletWidth,width:1*coupletWidth}),dom.setStyle(els[2],{left:-1e3}),dom.setStyle(els[3],{right:9999})
}else document.body.offsetWidth<1600&&(coupletWidth=config.display_config.shrinkWidth,dom.setStyle(els[0],{left:-1e3}),dom.setStyle(els[1],{right:9999}),-5>left_edge-coupletWidth?(dom.setStyle(els[2],{left:-1e3}),dom.setStyle(els[3],{right:9999})):(dom.setStyle(els[2],{left:left_edge-coupletWidth}),dom.setStyle(els[3],{right:right_edge-coupletWidth})))
};if("attach"!=type)"normal"==client_screen_mode?(dom.setStyle(els[0],{left:left_edge}),dom.setStyle(els[1],{right:right_edge}),els.length>2&&(dom.setStyle(els[2],{left:-1e3}),dom.setStyle(els[3],{right:9999}))):els.length>2?(dom.setStyle(els[2],{left:left_edge}),dom.setStyle(els[3],{right:right_edge}),dom.setStyle(els[0],{left:-1e3}),dom.setStyle(els[1],{right:9999})):(dom.setStyle(els[0],{left:left_edge}),dom.setStyle(els[1],{right:right_edge}));
else{setAttachStyle();var resizeHandler=buffer(function(){getAttachProps(),setAttachStyle()},300);crystal.evt.on(window,"resize",resizeHandler)}var display=function(visible){each(els,function(el){dom.setStyle(el,{display:visible?"block":"none"})})},shrink=function(toggle){"hide"==toggle?("narrow"==client_screen_mode||"shrink"==type)&&els.length>2&&(dom.setStyle(els[0],{left:-1e3}),dom.setStyle(els[1],{right:9999}),dom.setStyle(els[2],{left:left_edge}),dom.setStyle(els[3],{right:right_edge})):(els.length>2&&(dom.setStyle(els[2],{left:-1e3}),dom.setStyle(els[3],{right:9999})),dom.setStyle(els[0],{left:left_edge}),dom.setStyle(els[1],{right:right_edge}))
};ping()},freqFunc=function(){sinceLast(el_id,9999,0,open)};freqFunc()}}}(),expand_video:{ping:IMMEDIATELY,render:function(){var guanggaoEl,is_IE6=!1,state="collapse",MOUSE_LEAVE=!1,init=function(config,el,el_id){var dom=crystal.dom,evt=crystal.evt;guanggaoEl=el,guanggaoEl.originalLeft=guanggaoEl.style.left,6===crystal.ua.ie&&(isIE6=!0);
var oid=config.oid,appWidth=config.display_config.loc_width,appHeight=config.display_config.loc_height,fodder=config.fodder,video_link_to=link_to=fodder[0].link_to,loc=el_id,videosrc=fodder[0].resource_url,video_cover=fodder[2].resource_url,adsrc=fodder[1].resource_url,wrapper=dom.createElement({width:"300px",height:"250px",zIndex:0,padding:0,position:"relative"},{id:"expandvideo_staticDiv"},"div"),content=dom.createElement({backgroundColor:"transparent",zIndex:1,position:"absolute",overflow:"hidden",width:"1000px",height:"650px",padding:0,right:0,top:"-161px",clip:"rect(161px 1000px 411px 700px)"},{id:"expandvideo_dynamicDiv"},"div"),fodder={resource_url:namespace.resource("res/expandable.swf?v="+config.display_config.version),width:1200,height:650,params:{allowFullScreen:"true",allowscriptaccess:"always",wmode:"transparent"},initvars:{oid:oid,appWidth:appWidth,appHeight:appHeight,adSrcUrl:adsrc,adLinkUrl:link_to,loc:loc,videoSrcUrl:videosrc,videoLinkUrl:video_link_to,videoCoverUrl:video_cover},cover:!1},s=[];
for(var p in fodder.initvars)s.push(p+"="+encodeURIComponent(fodder.initvars[p]));fodder.resource_url=fodder.resource_url+"&"+s.join("&"),fodder.initvars={},renderFodder(fodder,content);var ifr=document.createElement("iframe");ifr.frameborder="0",ifr.scrolling="no",ifr.src="",dom.setStyle(ifr,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",border:"0",zIndex:"-1",filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=5)"}),content.appendChild(ifr),wrapper.appendChild(content),dom.setStyle(el,{position:"relative",display:"block","z-index":"0"}),dom.setStyle(content,{width:"1000px"}),el.appendChild(wrapper),evt.on(dom.$(document),"mousemove",function(e){MOUSE_LEAVE=e.pageX>dom.getXY(dom.$("expandvideo_dynamicDiv"))[0]+1e3?!0:!1
})},expand=function(){return"expanded"!=state?(guanggaoEl.style.zIndex="12",guanggaoEl.style.left="-50px",dom.setStyle(dom.$("expandvideo_staticDiv"),{zIndex:2147483647}),dom.setStyle(dom.$("expandvideo_dynamicDiv"),{clip:"rect(0px 1200px 650px 0px)"}),is_IE6||dom.setStyle(dom.$("expandvideo_dynamicDiv"),{overflow:"visible"}),state="expanding",is_IE6?"LEFT":dom.getViewportWidth()>=1200?"CENTER":"LEFT"):void 0
},check=function(){return is_IE6?"LEFT":dom.getViewportWidth()>=1200?"CENTER":"LEFT"},expandFinished=function(){state="expanded"},collapse=function(){state="collapse",guanggaoEl.style.zIndex="0",dom.setStyle(dom.$("expandvideo_staticDiv"),{zIndex:0})},collapseFinish=function(){dom.setStyle(dom.$("expandvideo_dynamicDiv"),{right:0,width:"1000px",clip:"rect(161px 1000px 411px 700px)",overflow:"hidden"}),guanggaoEl.style.left=guanggaoEl.originalLeft?guanggaoEl.originalLeft:"0"
},isFlashMouseLeave=function(){return MOUSE_LEAVE};return function(config,el){if(ua.ie){var d=document.createElement("div"),adElXy=dom.getXY(el);dom.setStyle(d,{left:adElXy[0],top:adElXy[1],width:"300px",height:"250px"}),document.body.appendChild(d),init(config,d),dom.setStyle(d,{position:"absolute"}),setInterval(function(){var adElXy=dom.getXY(el);
dom.setStyle(d,{left:adElXy[0],top:adElXy[1]})},200)}else init(config,el);namespace.fns.expandvideo_expand=expand,namespace.fns.expandvideo_collapse=collapse,namespace.fns.expandvideo_collapseFinish=collapseFinish,namespace.fns.expandvideo_expandFinish=expandFinished,namespace.fns.expandvideo_check=check,namespace.fns.expandvideo_isFlashMouseLeave=isFlashMouseLeave
}}()},sidebar:{ping:NONE,render:function(config,el,el_id,ping){var isOldSidebar=config.isOldSidebar;if(isOldSidebar){var oid=config.oid,sidebar=config.fodder[0].resource_url,extend=config.fodder[1].resource_url,resource_url0=sidebar,resource_url1=extend,link_to0=link_to1=config.fodder[0].link_to,mind_url=(config.monitor_url,"http://t.l.qq.com/?t=s&mid="+oid+"&oid="+oid+"&actid=40010&locid="+el_id+"&aver="),fodder=[{resource_url:resource_url0,width:30,height:250,link_to:link_to0},{resource_url:resource_url1,width:640,height:280,link_to:link_to1}],default_config={mtop:30,screenWidth:1024},isClosed=function(config,el,el_id){var closeTimes=crystal.cookie.get("close_times_"+el_id);
return closeTimes?closeTimes>1:!1},isVisible=function(config,el,el_id){var site=window.location.host.match(/([^\/]*)\.qq\.com/im),whitesite=["2014","news","finance","sports","ent","tech","digi.tech","baby","astro.lady","health","auto","comic","games","book","cul","edu","fashion","qad","adnew","joke"],flag=!1;
if(!site)return!1;for(var i=0,len=whitesite.length;len>i;i++)if(site[1]==whitesite[i]){flag=!0;break}return flag?"news"==site[1]?"undefined"!=typeof ARTICLE_INFO&&"undefined"!=typeof ARTICLE_INFO.isShowLastAD&&1==ARTICLE_INFO.isShowLastAD?!isClosed(config,el,el_id):!1:screen.availWidth>default_config.screenWidth&&!isClosed(config,el,el_id):!1
},default_width=fodder[0].width,_close=function(){el.style.display="none"},_show=function(){el.style.width=default_width+fodder[1].width+"px"},_hide=function(){el.style.width=default_width+"px"},_getCloseButton=function(width,el_id){var closeElement=crystal.dom.createElement({position:"absolute",width:width+"px",height:width+"px",left:"0px",bottom:"0px",color:"#FFF",cursor:"pointer","z-index":15,background:"url("+namespace.resource("sidebar/close.jpg")+") no-repeat"},{"class":"absolute"},"div");
return crystal.evt.on(closeElement,"click",function(){var closeTimes=crystal.cookie.get("close_times_"+el_id)||0;closeTimes+=1;var diff_point=(57600-((new Date).getTime()/1e3%86400-0))/86400;crystal.cookie.set("close_times_"+el_id,closeTimes,{expires:diff_point,path:"/"}),_close()
}),closeElement},_init=function(){if(isVisible(config,el,el_id)){crystal.renderFodder(fodder[0],el),crystal.dom.setStyle(el,{position:"absolute",overflow:"hidden",height:fodder[1].height+"px",zIndex:10}),ping(),crystal.ping.touch(mind_url);var closeBtn=_getCloseButton(default_width,el_id);
el.appendChild(closeBtn);var ext_box=crystal.dom.createElement({position:"absolute",top:"0px",left:default_width+"px"},{"class":"absolute"},"div");crystal.renderFodder(fodder[1],ext_box),el.appendChild(ext_box),crystal.evt.on(el,"mouseover",function(e){crystal.evt.getTarget(e)!=closeBtn&&_show()
}),crystal.evt.on(el,"mouseout",function(){_hide()})}};_init(),crystal.setArea(el_id,{show:_show,hide:_hide,close:_close,isready:function(){return!0}})}else{var object_anim,mind_url,oid=config.oid,sidebar=config.fodder[0].resource_url,extend=config.fodder[1].resource_url,resource_url0=sidebar,resource_url1=extend,link_to0=link_to1=config.fodder[0].link_to,fodder=(config.monitor_url,[{resource_url:resource_url0,width:30,height:250,link_to:link_to0},{resource_url:resource_url1,width:640,height:280,link_to:link_to1}]),default_config={mtop:30,screenWidth:1024},default_width=fodder[0].width,isSidebarClosed=!1,ispluginExtClosed=!1,isClosed=function(config,el,el_id){var closeTimes=crystal.cookie.get("close_times_"+el_id);
return closeTimes?closeTimes>1:!1},isVisible=function(config,el,el_id){var site=window.location.host.match(/([^\/]*)\.qq\.com/im);return site?"news"==site[1]?"undefined"!=typeof ARTICLE_INFO&&"undefined"!=typeof ARTICLE_INFO.isShowLastAD&&1==ARTICLE_INFO.isShowLastAD?!isClosed(config,el,el_id):!1:screen.availWidth>default_config.screenWidth&&!isClosed(config,el,el_id):!0
},_close=function(){el.style.display="none",isSidebarClosed=!0},_show=function(){el.style.display="block"},_getCloseButton=function(width,el_id){var crystal_closeElement=crystal.dom.createElement({position:"absolute",width:width+"px",height:width+"px",left:"0px",bottom:"0px",color:"#FFF",cursor:"pointer","z-index":15,background:"url("+namespace.resource("sidebar/close.jpg")+") no-repeat"},{"class":"absolute"},"div");
return crystal.evt.on(crystal_closeElement,"click",function(){mind_url="http://t.l.qq.com/?t=s&mid="+oid+"&oid="+oid+"&actid=10188&locid="+el_id+"&aver=",crystal.ping.touch(mind_url);var closeTimes=parseInt(crystal.cookie.get("close_times_"+el_id))||0;closeTimes+=1;
var diff_point=(57600-((new Date).getTime()/1e3%86400-0))/86400;crystal.cookie.set("close_times_"+el_id,closeTimes,{expires:diff_point,path:"/"}),_close()}),crystal_closeElement},createSidebar=function(siderbar_fodder){var el_sidebar=crystal.dom.createElement({position:"absolute",top:"0px",left:"0px","z-index":15},{"class":"absolute"},"div");
return crystal.renderFodder(siderbar_fodder,el_sidebar),crystal.dom.setStyle(el_sidebar,{height:siderbar_fodder.height+siderbar_fodder.width}),el_sidebar},createExt=function(ext_fodder){var el_ext=crystal.dom.createElement({position:"absolute",top:"0px"},{"class":"absolute"},"div");
return crystal.renderFodder(ext_fodder,el_ext,null,null,!0),el_ext},getExtboxCloseBtn=function(){var close_button_config={width:"63px",height:"24px",right:"0px",top:"0px","z-index":15,cursor:"pointer","background-color":"#FFF"};appendPngToConfig(close_button_config,resource("res/icon/righttop.png"));
var close_button=createAbsoluteElement(close_button_config);return close_button},getExtboxTimeDialog=function(){var time_board_config={top:"0px",left:"30px","font-size":"12px","line-height":"18px",padding:"1px 4px",color:"#ddd","z-index":12},time_board=createAbsoluteElement(time_board_config);
return time_board.innerHTML='&#24191;&#21578;&#26102;&#38388;&#36824;&#21097;:<span style="color:#FFF;font-weight:bold;padding:0 2px"></span>&#31186;',time_board},getExtboxMask=function(){return mask=crystal.dom.createElement({position:"absolute",top:"0px",left:default_width+"px"},{"class":"absolute"},"div"),crystal.dom.setStyle(mask,{opacity:.3,"z-index":11,background:"#000"}),mask
},sbtransition=function(ext_box,dir,callback){object_anim=new Anim(ext_box,{duration:config.display_config.anim_duration,callback:callback}),object_anim.morph({from:{width:dir?fodder[0].width:fodder[0].width+fodder[1].width},to:{width:dir?fodder[0].width+fodder[1].width:fodder[0].width}})
},pluginExt={loaded:!1,status:"",load:function(){this.close_button=getExtboxCloseBtn(),this.time_board=getExtboxTimeDialog(),this.mask=getExtboxMask(),crystal.dom.setStyle(this.mask,{width:fodder[1].width,height:fodder[1].height}),el.appendChild(this.time_board),el.appendChild(this.mask),el.appendChild(this.close_button),evt.on(this.close_button,"click",function(){mind_url="http://t.l.qq.com/?t=s&mid="+oid+"&oid="+oid+"&actid=10189&locid="+el_id+"&aver=",crystal.ping.touch(mind_url),pluginExt.close()
}),this.loaded=!0},show:function(){this.status="show",isSidebarClosed?crystal.dom.setStyle(this.close_button,{display:"block"}):crystal.dom.setStyle(this.close_button,{display:"none"}),crystal.dom.setStyle(this.time_board,{display:"block"}),crystal.dom.setStyle(this.close_button,{display:"block"}),crystal.dom.setStyle(this.mask,{display:"block"}),mask_anim=new Anim(this.mask,{duration:config.display_config.mask_duration}),setTimeout(function(){mask_anim.morph({to:{width:110,height:18}})
},config.display_config.mask_duration);var duration=config.display_config.ext_duration,time_board_number=this.time_board.getElementsByTagName("span")[0];time_board_number.innerHTML="",time_board_number.appendChild(document.createTextNode(duration--)),pluginExt.timer=setInterval(function(){time_board_number.innerHTML="",time_board_number.appendChild(document.createTextNode(duration--)),-1==duration&&(clearInterval(pluginExt.timer),ext_obj.hide(1,1))
},1e3)},hide:function(){this.status="hide",mask_anim.stop(),crystal.dom.setStyle(this.mask,{width:fodder[1].width,height:fodder[1].height}),clearInterval(pluginExt.timer),crystal.dom.setStyle(this.close_button,{display:"none"}),crystal.dom.setStyle(this.time_board,{display:"none"}),crystal.dom.setStyle(this.mask,{display:"none"})
},close:function(){ispluginExtClosed=!0,el.style.display="none"},reset:function(){clearInterval(pluginExt.timer)}},sidebar_obj={status:"",mousestatus:"",timer:null,init:function(){this.node=createSidebar(fodder[0]),this.closeBtn=_getCloseButton(fodder[0].width,el_id),el.appendChild(this.node),el.appendChild(this.closeBtn),this.status="init",this.addEvent(this.node)
},reset:function(){this.status=""},addEvent:function(node){crystal.evt.on(node,"mouseover",this.over),crystal.evt.on(node,"mouseout",this.out)},show:function(){},hide:function(){},over:function(e){crystal.evt.getTarget(e)!==sidebar_obj.closeBtn&&(sidebar_obj.mousestatus="over",clearTimeout(sidebar_obj.timer),clearTimeout(ext_obj.timer),sidebar_obj.timer=setTimeout(function(){"show"!==pluginExt.status&&ext_obj.show()
},100))},out:function(){clearTimeout(sidebar_obj.timer),sidebar_obj.mousestatus="out",sidebar_obj.timer=setTimeout(function(){"show"!==pluginExt.status&&ext_obj.hide()},100)}},ext_obj={status:"",mousestatus:"",timer:null,init:function(){this.node=createExt(fodder[1]),crystal.dom.setStyle(this.node,{left:fodder[0].width}),el.appendChild(this.node),this.status="hide",this.addEvent(this.node)
},reset:function(isPluginExtFinished){clearTimeout(ext_obj.timer),this.status="hide",object_anim&&object_anim.stop(),isPluginExtFinished&&1==isPluginExtFinished?sbtransition(el,0):crystal.dom.setStyle(el,{width:fodder[0].width})},addEvent:function(node){crystal.evt.on(node,"mouseover",this.over),crystal.evt.on(node,"mouseout",this.out)
},show:function(force){if(force){ping();var mind_url="http://t.l.qq.com/?t=s&mid="+oid+"&oid="+oid+"&actid=10187&locid="+el_id+"&aver=";crystal.ping.touch(mind_url),sidebar_obj.reset(),ext_obj.reset()}else{var mind_url="http://t.l.qq.com/?t=s&mid="+oid+"&oid="+oid+"&actid=10186&locid="+el_id+"&aver=";
crystal.ping.touch(mind_url),pluginExt.loaded&&pluginExt.hide()}"hide"===ext_obj.status&&(ext_obj.status="extend",sbtransition(el,1,function(){force&&(pluginExt.loaded||pluginExt.load(),pluginExt.show()),ext_obj.status="show","out"!==sidebar_obj.mousestatus||"over"===ext_obj.mousestatus||force||ext_obj.hide(0)
}))},hide:function(force,isPluginExtFinished){force&&isPluginExtFinished?(ext_obj.reset(1),pluginExt.hide()):force&&(ext_obj.reset(),pluginExt.hide()),"show"===ext_obj.status&&(ext_obj.status="shrink",sbtransition(el,0,function(){ext_obj.status="hide"}))},over:function(){ext_obj.mousestatus="over",clearTimeout(sidebar_obj.timer),clearTimeout(ext_obj.timer)
},out:function(){ext_obj.mousestatus="out",ext_obj.timer=setTimeout(function(){"show"!==pluginExt.status&&ext_obj.hide()},100)}},initDom=function(){crystal.dom.setStyle(el,{position:"absolute",overflow:"hidden",display:"block",width:fodder[0].width+"px",height:fodder[0].height+fodder[0].width+"px",zIndex:10}),sidebar_obj.init(),ext_obj.init()
},_init=function(){return initDom(),isVisible(config,el,el_id)?(ping(),void evt.on(el,"click",function(e){crystal.evt.getTarget(e)!=mask&&ext_obj.hide(1)})):(crystal.dom.setStyle(sidebar_obj.node,{display:"none"}),crystal.dom.setStyle(sidebar_obj.closeBtn,{display:"none"}),void(isSidebarClosed=!0))
};_init(),crystal.setArea(el_id,{open:function(){ext_obj.reset(),pluginExt.reset(),ispluginExtClosed||(el.style.display="block",isSidebarClosed&&(crystal.dom.setStyle(sidebar_obj.node,{display:"none"}),crystal.dom.setStyle(sidebar_obj.closeBtn,{display:"none"})),ext_obj.show(1))
},close:function(){ext_obj.hide(1)}})}}},video_banner:{ping:IMMEDIATELY,render:function(config,el){var displayConfig=config.display_config,fodders=config.fodder,video_fodder=fodders[0],pre_fodder=fodders[1],video_width=video_fodder.width,video_height=video_fodder.height;
renderFodder({resource_url:resource_swf("banner_video.swf"),initvars:{dwidth:video_width,dheight:video_height,oid:config.oid,extend:video_fodder.resource_url,pre:pre_fodder.resource_url,hasborder:void 0!==displayConfig.hasborder?displayConfig.hasborder:0,autoplay:void 0!==displayConfig.autoplay?displayConfig.autoplay:1,banner_link_to:pre_fodder.link_to,extend_link_to:video_fodder.link_to},width:video_width,height:video_height},el)
}},video_text:{ping:IMMEDIATELY,render:function(){var htmlTemplate='<div style="width: 300px;height: 450px;"><div style="width: 300px; height: 245px;"  id="{videoWrapper}"></div><div style="height:200px; border: 1px solid #e3e3e3; border-top-width: 0px;"><ul style="margin: 0;padding: 0;list-style: none;font-family: "Microsoft YaHei";"><li style="height: 93px;"><div style="padding: 18px 10px 0 10px;"><a id="{textTitleId0}" href="{textLink0}" target="_blank" style="padding-left: 17px;line-height: 20px;background: url('+resource("title_icon_default.png")+') 0 2px no-repeat;text-decoration: none;font-size: 14px;color: #399dea;">{textTile0}</a></div><div style="padding: 6px 10px 0 29px;line-height: 20px;font-size: 12px;color: #a1a1a1;">{textContent0}</div></li><li style="height: 93px;"><div style="padding: 18px 10px 0 10px;"><a id="{textTitleId1}" href="{textLink1}" target="_blank" style="padding-left: 17px;line-height: 20px;background: url('+resource("title_icon_default.png")+') 0 4px no-repeat;text-decoration: none;font-size: 14px;color: #399dea;">{textTile1}</a></div><div style="padding: 6px 10px 0 29px;line-height: 20px;font-size: 12px;color: #a1a1a1;">{textContent1}</div></li></ul></div></div>';
return function(config,el){var oid=config.oid,displayConfig=config.display_config,video_fodder=config.fodder[0],pre_fodder=config.fodder[1],text0TitleFodder=config.fodder[2],text0ContentFodder=config.fodder[3],text1TitleFodder=config.fodder[4],text1ContentFodder=config.fodder[5],width=displayConfig.width,height=displayConfig.height,html=htmlTemplate.replace("{videoWrapper}","vt"+oid).replace("{textTile0}",text0TitleFodder.text_content).replace("{textContent0}",text0ContentFodder.text_content).replace("{textLink0}",text0TitleFodder.link_to).replace("{textTitleId0}","vtText0"+oid).replace("{textTile1}",text1TitleFodder.text_content).replace("{textContent1}",text1ContentFodder.text_content).replace("{textLink1}",text1TitleFodder.link_to).replace("{textTitleId1}","vtText1"+oid);
dom.setStyle(el,{width:width+"px",height:height+"px"}),el.innerHTML=html;var videoWrapper=document.getElementById("vt"+oid),headerResource=video_fodder.resource_url,endWithflv=/[.]flv$/;if(headerResource&&endWithflv.test(headerResource))renderFodder({resource_url:resource_swf("banner_video.swf"),initvars:{dwidth:video_fodder.width,dheight:video_fodder.height,oid:config.oid,extend:video_fodder.resource_url,pre:pre_fodder.resource_url,hasborder:void 0!==displayConfig.hasborder?displayConfig.hasborder:1,autoplay:void 0!==displayConfig.autoplay?displayConfig.autoplay:1,banner_link_to:pre_fodder.link_to,extend_link_to:video_fodder.link_to},width:video_fodder.width,height:video_fodder.height},videoWrapper);
else{dom.setStyle(videoWrapper,{width:"298px",borderLeft:"1px solid #e3e3e3",borderRight:"1px solid #e3e3e3"});var picWrapper=document.createElement("div");video_fodder.width=video_fodder.width-12,video_fodder.height=video_fodder.height-10,renderFodder(video_fodder,picWrapper),dom.setStyle(picWrapper,{margin:"5px","float":"left"}),videoWrapper.appendChild(picWrapper)
}var textTitle0=document.getElementById("vtText0"+oid),textTitle1=document.getElementById("vtText1"+oid);evt.on(textTitle0,"mouseover",function(){textTitle0.style.backgroundPosition="0 -22px",textTitle0.style.color="#bd0a01"}),evt.on(textTitle0,"mouseout",function(){textTitle0.style.backgroundPosition="0 2px",textTitle0.style.color="#399dea"
}),evt.on(textTitle1,"mouseover",function(){textTitle1.style.backgroundPosition="0 -22px",textTitle1.style.color="#bd0a01"}),evt.on(textTitle1,"mouseout",function(){textTitle1.style.backgroundPosition="0 2px",textTitle1.style.color="#399dea"})}}()},wcup_responsive_banner:{ping:IMMEDIATELY,render:function(){function init(adEl){if(namespace.dom.setStyle(adEl,{display:"block",width:""}),6===ua.ie){var adElParentEl=adEl.parentNode;
adElParentEl&&(adElParentEl.style.textAlign="center")}}var isIe67=6==ua.ie||7==ua.ie,CSS_RESOURCE_ARRAY=[{selector:".zsydt",rules:"margin:0 auto;width:"+(isIe67?"expression(1000);":"1000px;")},{selector:".zsydt .zsydt-small",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:".zsydt .zsydt-big",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:".zsydt .zsydt-middle",rules:"display:"+(isIe67?'expression("block");':"block;")},{selector:"#layout3 .zsydt",rules:"width: "+(isIe67?"expression(768);":"768px;")},{selector:"#layout3 .zsydt .zsydt-small",rules:"display:"+(isIe67?'expression("block");':"block;")},{selector:"#layout3 .zsydt .zsydt-middle",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:"#layout3 .zsydt .zsydt-big",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:"#layout2 .zsydt",rules:"width:"+(isIe67?"expression(1000);":"1000px;")},{selector:"#layout2 .zsydt .zsydt-middle",rules:"display:"+(isIe67?'expression("block");':"block;")},{selector:"#layout2 .zsydt .zsydt-small",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:"#layout2 .zsydt .zsydt-big",rules:"display:"+(isIe67?'expression("none");':"none;")},{selector:"#layout1 .zsydt",rules:"width:"+(isIe67?'expression("1240px");':"1240px;")},{selector:"#layout1 .zsydt .zsydt-big",rules:"display: "+(isIe67?'expression("block");':"block;")},{selector:"#layout1 .zsydt .zsydt-middle",rules:"display: "+(isIe67?'expression("none");':"none;")},{selector:"#layout1 .zsydt .zsydt-small",rules:"display: "+(isIe67?'expression("none");':"none;")}];
return namespace.zsydtCss||(namespace.dom.addCss(CSS_RESOURCE_ARRAY),namespace.zsydtCss=!0),function(config,el){init(el);var fodders=config.fodder,smallResourceFodder=fodders[0],middleResourceFodder=fodders[1],bigResourceFodder=fodders[2],smallResourceEl=document.createElement("div"),middleResourceEl=document.createElement("div"),bigResourceEl=document.createElement("div");
smallResourceEl.className="zsydt-small",middleResourceEl.className="zsydt-middle",bigResourceEl.className="zsydt-big",renderFodder(smallResourceFodder,smallResourceEl),renderFodder(middleResourceFodder,middleResourceEl),renderFodder(bigResourceFodder,bigResourceEl),smallResourceEl.style.display="",middleResourceEl.style.display="",bigResourceEl.style.display="",el.appendChild(smallResourceEl),el.appendChild(middleResourceEl),el.appendChild(bigResourceEl),el.className+=" zsydt"
}}()},threeDBox:{ping:IMMEDIATELY,render:function(){function filterResourceUrl(url){if(url){var i,len=resourceDomain.length;for(i=0;len>i;i++)url=url.replace(resourceDomain[i],"ra.gtimg.com")}return url}function Fns(config){this.state="collapse",this.MOUSE_LEAVE=!1,this.base=namespace.resource("res/cube_3dbox.swf"),this.location=config.loc,this.oid=config.oid,this.aver=config.aver;
var fodder=config.fodder;if(this.frontPicUrl=filterResourceUrl(fodder[0].resource_url),this.frontPicLink=fodder[0].link_to,this.rightPicUrl=filterResourceUrl(fodder[1].resource_url),this.rightPicLink=fodder[1].link_to,this.backPicUrl=filterResourceUrl(fodder[2].resource_url),this.backPicLink=fodder[2].link_to,this.leftPicUrl=filterResourceUrl(fodder[3].resource_url),this.leftPicLink=fodder[3].link_to,this.videoWrapper=dom.getElementsByClassName("relativeVideo",["div"])[0],this.videoEl=dom.$("relVideo"),this.hasVideoLeft=!1,this.videoEl){var videoY=dom.getXY(this.videoEl)[1],adY=dom.getXY(dom.$(this.location))[1],videoHeight=parseInt((window.getComputedStyle?getComputedStyle(this.videoEl,null):this.videoEl.currentStyle).height),adHeight=fodder[0].height;
videoY+videoHeight>=adY&&adY+adHeight>=videoY&&(this.hasVideoLeft=!0)}}var THREEDBOX_HTML_TEMPLATE='<div id="staticDiv" style="width:300px;height:250px;position: relative;margin: auto;overflow:hidden;"><div id="dynamicDiv" style="z-index: 1; position: absolute; width: 700px; height: 450px; padding: 0px; right: -200px; top: -100px;"><object id="expandable" name="expandable" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="700" height="450"><param name="movie" value="{BASE}?vv='+Math.random()+'&link1={LINK1}&mu1={MONITOR_URL1}&loc={LOC}&src1={SRC1}&link2={LINK2}&mu2={MONITOR_URL2}&loc={LOC}&src2={SRC2}&link3={LINK3}&mu3={MONITOR_URL3}&loc={LOC}&src3={SRC3}&link4={LINK4}&mu4={MONITOR_URL4}&loc={LOC}&src4={SRC4}&type1={TYPE1}&type2={TYPE2}&type3={TYPE3}&type4={TYPE4}&cmu={CLOSE_MONITOR_URL}&oid={OID}" /><param name="quality" value="high" /><param name="wmode" value="transparent"><param name="allowscriptaccess" value="always"><param name="allowFullScreen" value="true"><!--[if !IE]><--><object data="{BASE}?link1={LINK1}&mu1={MONITOR_URL1}&loc={LOC}&src1={SRC1}&link2={LINK2}&mu2={MONITOR_URL2}&loc={LOC}&src2={SRC2}&link3={LINK3}&mu3={MONITOR_URL3}&loc={LOC}&src3={SRC3}&link4={LINK4}&mu4={MONITOR_URL4}&loc={LOC}&src4={SRC4}&type1={TYPE1}&type2={TYPE2}&type3={TYPE3}&type4={TYPE4}&cmu={CLOSE_MONITOR_URL}&oid={OID}" type="application/x-shockwave-flash" width="700" height="450"><param name="quality" value="high" /><param name="pluginurl" value="http://get.adobe.com/cn/flashplayer/"/><param name="wmode" value="transparent"><param name="allowscriptaccess" value="always"><param name="allowFullScreen" value="true"></object><!--><![endif]--></object></div></div>',resourceDomain=["wa.gtimg.com","wb.gtimg.com","adsfile.qq.com"];
Fns.makeBoxCovered=function(fnsObj){if(Fns.started!==!0){var intervalTime=300,leftContentEl=dom.getElementsByClassName("main",["div"])[0],rightContentEl=dom.getElementsByClassName("side",["div"])[0];leftContentEl&&rightContentEl&&(Fns.leftContentOriginalZIndex=(window.getComputedStyle?getComputedStyle(leftContentEl,null):leftContentEl.currentStyle).zIndex,Fns.rightContentOriginalZIndex=(window.getComputedStyle?getComputedStyle(rightContentEl,null):rightContentEl.currentStyle).zIndex,setInterval(function(){fnsObj.hasVideoLeft&&fnsObj.hasVideoList()?(leftContentEl.style.zIndex=8888,rightContentEl.style.zIndex=100):(leftContentEl.style.zIndex=Fns.leftContentOriginalZIndex,rightContentEl.style.zIndex=Fns.rightContentOriginalZIndex)
},intervalTime)),Fns.started=!0}};var pro=Fns.prototype;return Fns.MONITOR_URL_TEMPLATE="http://t.l.qq.com/?t=s&mid={OID}&oid={OID}&actid={ACTID}&locid={LOC}&aver={AVER}",pro.getMonitorUrl=function(action){var actid;switch(action){case"FRONT_CLICK":actid="10191";
break;case"BACK_CLICK":actid="10192";break;case"LEFT_CLICK":actid="10193";break;case"RIGHT_CLICK":actid="10194";break;case"CLOSE_CLICK":actid="10195";break;default:actid=""}return format(Fns.MONITOR_URL_TEMPLATE,{OID:this.oid,LOC:this.location,AVER:this.aver,ACTID:actid})
},pro.initComp=function(){var el=dom.$(this.location);"none"==el.style.display&&(el.style.display="block"),el.innerHTML=format(THREEDBOX_HTML_TEMPLATE,{BASE:this.base,LOC:this.location,OID:this.oid,LINK1:encodeURIComponent(this.frontPicLink),MONITOR_URL1:encodeURIComponent(this.getMonitorUrl("FRONT_CLICK")),SRC1:encodeURIComponent(this.frontPicUrl),TYPE1:namespace.getExtension(this.frontPicUrl),LINK2:encodeURIComponent(this.backPicLink),MONITOR_URL2:encodeURIComponent(this.getMonitorUrl("BACK_CLICK")),SRC2:encodeURIComponent(this.backPicUrl),TYPE2:namespace.getExtension(this.backPicUrl),LINK3:encodeURIComponent(this.leftPicLink),MONITOR_URL3:encodeURIComponent(this.getMonitorUrl("LEFT_CLICK")),SRC3:encodeURIComponent(this.leftPicUrl),TYPE3:namespace.getExtension(this.leftPicUrl),LINK4:encodeURIComponent(this.rightPicLink),MONITOR_URL4:encodeURIComponent(this.getMonitorUrl("RIGHT_CLICK")),SRC4:encodeURIComponent(this.rightPicUrl),TYPE4:namespace.getExtension(this.rightPicUrl),CLOSE_MONITOR_URL:encodeURIComponent(this.getMonitorUrl("CLOSE_CLICK"))}),evt.on(document,"mousemove",function(e){e=e||window.event;
var pageX=evt.getPageX(e),dynDiv=dom.$("dynamicDiv");this.MOUSE_LEAVE=pageX>dom.getXY(dynDiv)[0]+parseInt(dom.getStyle(dynDiv,"width"))?!0:!1}),el.appendChild(namespace.createAdIcon())},pro.cube_expand=function(){if(!this.hasVideoLeft||this.hasVideoLeft&&!this.hasVideoList()){var stcDiv=dom.$("staticDiv");
dom.setStyle(stcDiv,{"z-index":100,overflow:"visible"}),dom.setStyle(dom.$("Main-Article-QQ"),{overflow:"visible"})}},pro.hasVideoList=function(){return this.videoWrapper?"1000px"==(window.getComputedStyle?getComputedStyle(this.videoWrapper,null):this.videoWrapper.currentStyle).width:!1
},pro.cube_collapse=function(){var stcDiv=dom.$("staticDiv");dom.setStyle(stcDiv,{"z-index":0,overflow:"hidden"})},pro.cube_isFlashMouseLeave=function(){return this.MOUSE_LEAVE},function(config,el){var fodder=config.fodder,adWidth=fodder[0].width,adHeight=fodder[0].height;
dom.setStyle(el,{width:adWidth+"px",height:adHeight+"px"});var f=new Fns(config);namespace.fns.cube_expand=function(){f.cube_expand()},namespace.fns.cube_collapse=function(){f.cube_collapse()},namespace.fns.cube_isFlashMouseLeave=function(){return f.cube_isFlashMouseLeave()
},namespace.fns.cube_canExpand=function(){return f.hasVideoLeft&&f.hasVideoList()?!1:!0},f.initComp(),Fns.makeBoxCovered(f)}}()},today_view:{ping:LAZY,render:function(config,el){renderFodder(config.fodder[0],el),$("AD180_130").style.display="block"}},couplet_banner:{ping:LAZY,render:function(config,el){var el_right=document.getElementById(el.id+"_right");
renderFodder(config.fodder[0],el),renderFodder(config.fodder[1],el_right),el.style.border="1px solid #f3f3f3",el_right.style.border="1px solid #f3f3f3"}},central:function(){var close_button_config={width:"63px",height:"24px",right:"1px",top:"1px","z-index":12,cursor:"pointer","background-color":"#fff"},time_board_config={top:"0px",left:"0px","font-size":"12px","line-height":"18px",padding:"1px 4px",color:"#fff","z-index":12};
return{ping:NONE,render:function(config,el,el_id,ping){var fodder=config.fodder[0],parent_el=el.parentNode,display_config=config.display_config,duration=display_config.duration,isPause=display_config.is_pause||!1,pic_wrapper=display_config.wrapper||"Main-A",pic_ender=display_config.ender||"end",freq=display_config.freq||"page",freq_hours=display_config.freq_hours||1,pic_top="undefined"!=typeof display_config.top_dim?display_config.top_dim:114,page_close_flag=!1;
renderFodder(fodder,el),dom.setStyle(el,{position:"absolute",zIndex:2e3,display:"none"}),appendPngToConfig(close_button_config,resource("res/icon/righttop.png"));var close_button=createAbsoluteElement(close_button_config);el.appendChild(close_button);var time_board=createAbsoluteElement(time_board_config);
time_board.innerHTML='&#24191;&#21578;&#26102;&#38388;&#36824;&#21097;:<span style="color:#D7DB2E;font-weight:bold;padding:0 2px"></span>&#31186;',el.appendChild(time_board);var time_board_number=time_board.getElementsByTagName("span")[0],mask=createAbsoluteElement({top:0,left:0,opacity:.3,zIndex:11,background:"#000"});
el.appendChild(mask);var timer,mask_anim=new Anim(mask,{duration:.3}),open=function(){if(isPause){if(1==namespace.cookie.get("chabo_"+el_id))return;if(page_close_flag)return;if("page"!=freq&&1==namespace.cookie.get("chabo_"+config.oid))return}close(),ping(),isPause?(dom.setStyle(el,{display:"block"}),blockShow()):dom.setStyle(el,{display:"block",left:(parent_el.offsetWidth-fodder.width)/2,top:(parent_el.offsetHeight-fodder.height)/2}),dom.setStyle(mask,{width:fodder.width,height:fodder.height}),setTimeout(function(){mask_anim.morph({to:{width:110,height:18}})
},1e3*display_config.mask_duration),time_board_number.innerHTML="",time_board_number.appendChild(document.createTextNode(duration--)),timer=setInterval(function(){time_board_number.innerHTML="",time_board_number.appendChild(document.createTextNode(duration--)),-1==duration&&close()
},1e3),namespace.cookie.set("chabo_"+el_id,1,{expires:freq_hours/24})},close=function(){el.style.display="none",clearInterval(timer),duration=display_config.duration,isPause&&blockHide()},frequenceControlOpen=function(){open()},blockShow=function(){var n=dom.$(el_id+"_blockdiv"),height=dom.$(pic_wrapper).offsetHeight;
height=600,dom.setStyle(n,{display:"block",height:"100%"})},blockHide=function(){var n=dom.$(el_id+"_blockdiv");dom.setStyle(n,{display:"none"})};evt.on(close_button,"click",function(){if("page"!=freq){var diff_point=(86400-((new Date).getTime()/1e3%86400-0))/86400;
namespace.cookie.set("chabo_"+config.oid,1,{expires:diff_point})}page_close_flag=!0,close()}),namespace.setArea(el_id,{open:frequenceControlOpen,close:close,isready:function(){return!0}});var _init=function(){if(isPause){namespace.dom.addClass(el,"central_center");
var pos=[0,0],wrapper_node=namespace.dom.$(pic_wrapper);namespace.contains(namespace.dom.$(pic_wrapper),el)||wrapper_node.insertBefore(el,wrapper_node.firstChild);var main_width=namespace.dom.$(pic_wrapper).offsetWidth,main_height=namespace.dom.$(pic_wrapper).offsetHeight,end_width=namespace.dom.$(pic_ender).offsetWidth;
namespace.dom.setStyle(namespace.dom.$(el_id),{left:parseInt(pos[0]+(main_width/2-end_width/2))+"px",top:parseInt(pos[1]+pic_top)+"px","z-index":"999"});var block_div=namespace.dom.createElement({position:"absolute",left:pos[0]+"px",top:pos[1]+"px",width:main_width+"px",height:main_height+"px",display:"none","z-index":"998","background-color":"#000"},{id:el_id+"_blockdiv"},"div");
dom.setStyle(block_div,{opacity:.1}),wrapper_node.insertBefore(block_div,wrapper_node.firstChild)}};_init()}}}()}),namespace.fns={},namespace.qzone=[];var some_anchor=dom.createElement({position:"absolute",left:"-9999px",top:"-9999px"},{href:"#"},"a"),some_anchor_is_appended=!1;
namespace.lostFocus=function(){some_anchor_is_appended||(document.body.insertBefore(some_anchor,document.body.firstChild),some_anchor_is_appended=!0),some_anchor.focus()}}("crystal");/*2015-10-28 16:56:35*/