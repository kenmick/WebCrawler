/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.20 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*!
 * Copyright (c) 2014 Chris O'Hara <cohara87@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab

/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.4 - 2015-03-05
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2015 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */

function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}function _temporalAssertDefined(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0}var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,d,l,u,c,p,f,A,m,h=n&&n.split("/"),v=D.map,g=v&&v["*"];if(e&&(e=e.split("/"),u=e.length-1,D.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(m=h.slice(0,h.length-1),e=m.concat(e)),t(e),e=e.join("/")),r&&v&&(h||g)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(l=a.slice(0,s).join("/"),h)for(d=h.length;d>0;d-=1)if(o=getOwn(v,h.slice(0,d).join("/")),o&&(o=getOwn(o,l))){c=o,p=s;break e}!f&&g&&getOwn(g,l)&&(f=getOwn(g,l),A=s)}!c&&f&&(c=f,p=A),c&&(a.splice(0,p,c),e=a.join("/"))}return i=getOwn(D.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(D.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),_.require.undef(e),_.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,d,l,u=null,c=t?t.name:null,p=e,f=!0,A="";return e||(f=!1,e="_@r"+(S+=1)),l=o(e),u=l[0],e=l[1],u&&(u=n(u,c,i),s=getOwn(k,u)),e&&(u?A=s&&s.normalize?s.normalize(e,function(e){return n(e,c,i)}):-1===e.indexOf("!")?n(e,c,i):e:(A=n(e,c,i),l=o(A),u=l[0],A=l[1],r=!0,a=_.nameToUrl(A))),d=!u||s||r?"":"_unnormalized"+(x+=1),{prefix:u,name:A,parentMap:t,unnormalized:!!d,url:a,originalName:p,isDefine:f,id:(u?u+"!"+A:A)+d}}function s(e){var t=e.id,n=getOwn(w,t);return n||(n=w[t]=new _.Module(e)),n}function d(e,t,n){var r=e.id,i=getOwn(w,r);!hasProp(k,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(k[r])}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(w,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function u(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(_.defQueueMap[t]=!0),U.push(e)}),globalDefQueue=[])}function c(e){delete w[e],delete C[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(w,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,k[o]),e.check()):p(a,t,n))}),n[r]=!0)}function f(){var e,t,n=1e3*D.waitSeconds,o=n&&_.startTime+n<(new Date).getTime(),a=[],s=[],d=!1,u=!0;if(!g){if(g=!0,eachProp(C,function(e){var n=e.map,l=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(l)?(t=!0,d=!0):(a.push(l),r(l));else if(!e.inited&&e.fetched&&n.isDefine&&(d=!0,!n.prefix))return u=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=_.contextName,l(e);u&&each(s,function(e){p(e,{},{})}),o&&!t||!d||!isBrowser&&!isWebWorker||b||(b=setTimeout(function(){b=0,f()},50)),g=!1}}function A(e){hasProp(k,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function h(e){var t=e.currentTarget||e.srcElement;return m(t,_.onScriptLoad,"load","onreadystatechange"),m(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(u();U.length;){if(e=U.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}_.defQueueMap={}}var g,y,_,E,b,D={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},w={},C={},I={},U=[],k={},F={},T={},S=1,x=1;return E={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?k[e.map.id]=e.exports:e.exports=k[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(D.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(I,e.id)||{},this.map=e,this.shim=getOwn(D.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?void _.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=_.execCb(n,o,r,i)}catch(a){e=a}else i=_.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(k[n]=i,req.onResourceLoad&&req.onResourceLoad(_,this.map,this.depMaps)),c(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),d(r,"defined",bind(this,function(r){var i,o,u,p=getOwn(T,this.map.id),f=this.map.name,A=this.map.parentMap?this.map.parentMap.name:null,m=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(f=r.normalize(f,function(e){return n(e,A,!0)})||""),o=a(e.prefix+"!"+f,this.map.parentMap),d(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),u=getOwn(w,o.id),void(u&&(this.depMaps.push(o),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()))):p?(this.map.url=_.nameToUrl(p),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(w,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&c(e.map.id)}),l(e)}),i.fromText=bind(this,function(n,r){var o=e.name,d=a(o),u=useInteractive;r&&(n=r),u&&(useInteractive=!1),s(d),hasProp(D.config,t)&&(D.config[o]=D.config[t]);try{req.exec(n)}catch(c){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+c,c,[t]))}u&&(useInteractive=!0),this.depMaps.push(d),_.completeLoad(o),m([o],i)}),void r.load(e.name,m,i,D))})),_.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){C[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(E,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,d(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?d(e,"error",bind(this,this.errback)):this.events.error&&d(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=w[n],hasProp(E,n)||!r||r.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(w,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:D,contextName:e,registry:w,defined:k,urlFetched:F,defQueue:U,defQueueMap:{},Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=D.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(D[t]||(D[t]={}),mixin(D[t],e,!0,!0)):D[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(T[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),t[n]=e}),D.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(D.paths[n]=e.location),D.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(w,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,d){var u,c,p;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?l(makeError("requireargs","Invalid require call"),d):t&&hasProp(E,n)?E[n](w[t.id]):req.get?req.get(_,n,t,o):(c=a(n,t,!1,!0),u=c.id,hasProp(k,u)?k[u]:l(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),p=s(a(null,t)),p.skipMap=i.skipMap,p.init(n,r,d,{enabled:!0}),f()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),_.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(k,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(k,e)||hasProp(w,e)}}),t||(o.undef=function(e){u();var n=a(e,t,!0),i=getOwn(w,e);i.undefed=!0,r(e),delete k[e],delete F[n.url],delete I[e],eachReverse(U,function(t,n){t[0]===e&&U.splice(n,1)}),delete _.defQueueMap[e],i&&(i.events.defined&&(I[e]=i.events),c(e))}),o},enable:function(e){var t=getOwn(w,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(D.shim,e)||{},a=o.exports;for(u();U.length;){if(n=U.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);A(n)}if(_.defQueueMap={},r=getOwn(w,e),!t&&!hasProp(k,e)&&r&&!r.inited){if(!(!D.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));A([e,o.deps||[],o.exportsFn])}f()},nameToUrl:function(e,t,n){var r,i,o,a,s,d,l,u=getOwn(D.pkgs,e);if(u&&(e=u),l=getOwn(T,e))return _.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=D.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),d=getOwn(r,a)){isArray(d)&&(d=d[0]),i.splice(0,o,d);break}s=i.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":D.baseUrl)+s}return D.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+D.urlArgs):s},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=h(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=h(e);return i(t.id)?void 0:l(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),i.onNodeCreated&&i.onNodeCreated(r,i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){}),define("unrulyAdCore/util/window",[],function(){return window.parent}),define("util/publisherWindow",[],function(){return window.top}),define("util/trackingEvent",[],function(){return{TAG_IMP:"pp_tag_imp",ADCALL:"pp_adcall",CREATIVE_RECEIVED:"creative_received",PP_IMP:"pp_imp",COMPLETED_VIEW:"pp_completed_view",LIGHTBOX_PLAY:"pp_lb_play",IMP:"imp",VIEW_IMP:"viewableImpression",CLICK:"click",VIDEO_CLICK:"video_click",POST_VIDEO_CLICK:"post_video_click",PRIVACY_POLICY:"privacy_policy",THREE:"three",TEN:"ten",THIRTY:"thirty",THUMB_IMP:"thumb_imp3",TWO_SECOND_VIEW_IMP:"two_second_view_imp",INFEED_VIDEO_VIEW:"pp_infeed_video_view",PP_PAUSE:"pp_pause",PP_RESUME:"pp_resume",share:{FACEBOOK:"share_facebook",TWITTER:"share_twitter",GOOGLEPLUS:"share_googleplus",LINKEDIN:"share_linkedin",PINTEREST:"share_pinterest"},error:{ERROR:"error",NO_ADS:"no_ads",NO_MATCHING_PLACEMENT:"no_matching_placement",NO_SKIN:"no_skin",UNSUPPORTED_BROWSER:"unsupported_browser",AD_REQUEST_FAILED:"error_ad_request_failed",AUDIENCE_TARGETING_REQUEST_FAILED:"error_audience_targeting_request_failed",SKIN_SETUP_FAILED:"error_skin_setup_failed",INFEED_VIDEO_SETUP_FAILED:"error_infeed_video_setup_failed",BLOCKED_CROSS_ORIGIN_FRAME:"error_blocked_cross_origin_frame",UNSUPPORTED_FALLBACK_CONFIG:"error_unsupported_fallback_config",PLACEMENT_ALREADY_FOUND:"placement_already_found",ELEMENT_STYLE_CLONE_ERROR:"element_style_clone_error",MEDIA_ERR_SRC_NOT_SUPPORTED:"media_err_src_not_supported",MEDIA_ERR_ABORTED:"media_err_aborted",MEDIA_ERR_NETWORK:"media_err_network",MEDIA_ERR_DECODE:"media_err_decode",CLICK_ACTION_CREATION_FAILURE:"click_action_creation_failure"},prefixed:{VAST_REQUEST_X:"vast_request_"},START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",UNMUTE:"unmute",MUTE:"mute",PAUSE:"pause",RESUME:"resume"}}),define("util/browser",["util/publisherWindow"],function(e){function t(){return/Android.*mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e.navigator.userAgent)&&h()}function n(){var t=/CPU iPhone OS (6|7|8|9)/i,n=/Android (4|5|6|7|8|9)\.\d(\.\d)?;/i,r=e.navigator.userAgent;return(t.test(r)||n.test(r))&&h()&&!s()}function r(){return i()&&v()}function i(){var t=/iPad; CPU OS (6|7|8|9)/i,n=/Android (4|5|6|7|8|9)\.\d(\.\d)?;/i,r=e.navigator.userAgent;return t.test(r)||n.test(r)}function o(t){var n,r=e.navigator.userAgent,i=t.exec(r);return i&&2===i.length?n=parseFloat(i[1]):-1}function a(){var t=/MSIE (\d+\.\d+)/i,n=/Trident\/(\d+\.\d+)/i;if("CSS1Compat"===e.document.compatMode)return o(t)>=9?!0:o(n)>=7?!0:!1}function s(){var t=/CPU iPhone OS 8/i,n=e.navigator.userAgent,r=e.navigator.standalone;return t.test(n)&&r}function d(){var t=/ Chrome\/(\d+\.\d+)/i,n=/ OPR\/30/;return o(t)>=25&&!n.test(e.navigator.userAgent)}function l(){var t,n,r=/ Firefox\/(\d+\.\d+)/i,i=/\(Windows NT (\d+\.\d+)/i,a=/Macintosh; Intel Mac OS X/i,s=e.navigator.userAgent;return t=o(r)>=25&&o(i)>=6.1,n=o(r)>=35&&a.test(s),t||n}function u(){var e=/ Version\/(\d+\.\d+)(?:\.\d+)? Safari\/\d+\.\d+/i;return o(e)>=6}function c(){return a()?!0:d()?!0:l()?!0:u()?!0:n()||r()}function p(t){var n=e.open(t,"_blank");n||(n=e.open("","_blank"),n.location.href=t)}function f(t){e.location.href=t}function A(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}function m(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullScreen?e.webkitExitFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}function h(){var t,n,r=1150;return e.screen?(t=e.screen.width*e.screen.width,n=e.screen.height*e.screen.height,Math.sqrt(t+n)<r):!1}function v(){return e.screen?!h():!1}function g(){return e.navigator.language||e.navigator.userLanguage}function y(){return e.performance}function _(){return E(e.location.href)}function E(t){var n=e.document.createElement("a");return n.href=t,n.hostname}function b(){try{return new e.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(t){return!1}}function D(){return!!e.navigator.plugins["Shockwave Flash"]}function w(){return e.ActiveXObject?b():D()}function C(){return!t()&&w()}return{isMobile:t,isSupportedMobileDevice:n,isSupportedTablet:r,isTablet:i,isSupported:c,isSupportedFirefox:l,openWindow:p,requestFullscreen:A,exitFullscreen:m,getLanguage:g,getDomain:_,getDomainFromURL:E,getPerformance:y,supportsFlash:C,openInCurrentTab:f}});var _temporalUndefined={};define("util/enable",["util/browser"],function(e){var t=["85373","85384","85478","85637","61625","90283","90288","90289","90290","90291","90353","90095","81439","94272"],n=["8298"],r=["88102","88229","88231","88372","88596","88597","88598","88599","88600","88601","88602","88604","88987","89678","89679","89772","90063","90064","90065","90066","90067","90068","90069"];return{mobileLightbox:!0,desktopLightbox:!0,audienceTargeting:!0,targetingXhrWithCredentials:!0,leoPlayerModule:!0,letterboxInFeedVideo:!1,mobileSharingLightbox:!0,quartileTracking:!0,mobileSharingLightboxClickThrough:!0,inFeedVideoIcons:!0,unMuteIcon:!1,inArticleUnrulyVPAID:!1,siteSupportsVPAIDInFeedVideo:!1,siteSupportsHTML5InFeedVideo:!1,siteSupportsResponsiveInFeedVideo:!1,siteRequiresVPAIDEmbeddingDirectly:!1,videoClickthroughNewTab:!1,videoClickthroughCurrentTab:!1,inArticleVASTEventTracking:!0,reportSize:!1,inProduction:!0,supportsDesktopVideoContainer:function(){var t=!e.isMobile()&&!e.isTablet();return t&&(this.siteSupportsHTML5InFeedVideo||this.siteSupportsVPAIDInFeedVideo)},moatViewabilityTracking:function(e){return this.supportsDesktopVideoContainer()&&"true"===e.ve},supportsVPAID:function(e){var r=this.supportsDesktopVideoContainer(),i=-1!==t.indexOf(e.apid),o=-1!==n.indexOf(e.cid);return r&&(i||o)&&this.siteSupportsVPAIDInFeedVideo},requiresStarAllianceOverride:function(e){var t=-1!==r.indexOf(e.apid);return t},loggingServiceDoSample:!1,skinAttributeCopyToVideoContainer:!1,alternateZentrickAd:!1,embedVPAIDDirectly:function(e){var t=_temporalUndefined,n=_temporalUndefined;return t=["8234"],n=-1!==(_temporalAssertDefined(t,"DIRECT_EMBED_VPAID_CIDS",_temporalUndefined)&&t).indexOf(e.cid),_temporalAssertDefined(n,"requiredDirectEmbedForVPAID",_temporalUndefined)&&n||this.siteRequiresVPAIDEmbeddingDirectly}}}),define("util/stopwatch",[],function(){function e(){return(new Date).getTime()}function t(){a={}}function n(t,n){a[t]={start:n||e()}}function r(t){var n=a[t]||{};n.end=e()}function i(e){return a[e]}function o(e){var t=a[e];return t&&t.end?t.end-t.start:null}var a={};return{init:t,start:n,stop:r,getTime:o,getStopwatch:i,getStopwatches:function(){return a}}}),define("publisherConfigController",["jquery","util/trackingEvent","util/enable","util/stopwatch"],function(e,t,n,r){function i(e){if(e.featureOverrides)for(var t in e.featureOverrides)e.featureOverrides.hasOwnProperty(t)&&(n[t]=e.featureOverrides[t])}function o(n,o,a){var s="//video.unrulymedia.com/native/skins/skin-"+n+".json";n?(r.start("skin"),e.getJSON(s).done(function(e){r.stop("skin"),e.siteId!==n?a("siteid of skin does not match requested siteid",t.error.SKIN_SETUP_FAILED):(i(e),o(e))}).fail(function(e,n,i){r.stop("skin"),a("could not get skin ("+i+")",t.error.NO_SKIN)})):a("site id not provided",t.error.SKIN_SETUP_FAILED)}return{getPublisherConfig:o}}),define("placementController",["util/trackingEvent"],function(e){function t(e){return e.format&&e.format.inArticle}function n(e){return e.format&&e.format.inFeed}function r(e,t){return function(n){return e(n)&&t(n)}}function i(i){if(!i||!i.placements)throw{message:"no valid publisher config found",errorType:e.error.SKIN_SETUP_FAILED};if(0===i.placements.length)throw{message:"no placements found in publisher config",errorType:e.error.SKIN_SETUP_FAILED};if(i.placements.filter(r(t,n)).length>0)throw{message:"placements must be either in-feed or in-article, not both",errorType:e.error.SKIN_SETUP_FAILED};return i.placements}return{verifyConfig:i}});var _temporalUndefined={};define("placementFinder",["util/publisherWindow","jquery","util/trackingEvent"],function(e,t,n){function r(){}function i(e){var t=e.format,n=t.inFeed,r=t.inArticle;return _temporalAssertDefined(r,"inArticlePlacement",_temporalUndefined)&&r?_temporalAssertDefined(r,"inArticlePlacement",_temporalUndefined)&&r:_temporalAssertDefined(n,"inFeedPlacement",_temporalUndefined)&&n}function o(e,t,r){function i(i,o){var a,s,d;t.filter(function(e){return e.selector===o}).map(function(e){e.found=i}),s=t.filter(function(e){return"undefined"==typeof e.found}),s.length>0||(a=t.filter(function(e){return e.found===!1}).map(function(e){return e.selector}),a.length>0?(d="incorrect number of matches for "+a.join(", "),r({message:d,errorType:n.error.NO_MATCHING_PLACEMENT},void 0)):r(void 0,{config:e}))}t.forEach(function(e){a(e.selector,i)})}function a(n,r){function i(){"undefined"!=typeof s&&e.clearTimeout(s),t(n).waitUntilExists("remove")}function o(){i(),r(!1,n)}function a(){i(),t(n).length>1?r(!1,n):r(!0,n)}var s,d=25e3,l=!0;s=e.setTimeout(o,d),t(n).waitUntilExists(a,l)}return r.prototype.matchPlacement=function(r,a){var s=_temporalUndefined;s=i(r);var d=this.getRequiredPlacementSelectors(r);if((_temporalAssertDefined(s,"placement",_temporalUndefined)&&s).adInsertion){
if(!(_temporalAssertDefined(s,"placement",_temporalUndefined)&&s).adInsertion.selector)return void a({message:"adInsertion selector is not present",errorType:n.error.SKIN_SETUP_FAILED},void 0);if("function"!=typeof t(e)[(_temporalAssertDefined(s,"placement",_temporalUndefined)&&s).adInsertion.mode])return void a({message:"adInsertion mode is unsupported",errorType:n.error.SKIN_SETUP_FAILED},void 0)}t(e.document).ready(function(){o(r,d,a)})},r.prototype.getRequiredPlacementSelectors=function(e){var t=_temporalUndefined;t=i(e);var n=[{selector:(_temporalAssertDefined(t,"placement",_temporalUndefined)&&t).basePlacement.selector}];return(_temporalAssertDefined(t,"placement",_temporalUndefined)&&t).adInsertion&&(_temporalAssertDefined(t,"placement",_temporalUndefined)&&t).adInsertion.selector!==(_temporalAssertDefined(t,"placement",_temporalUndefined)&&t).basePlacement.selector&&n.push({selector:(_temporalAssertDefined(t,"placement",_temporalUndefined)&&t).adInsertion.selector}),n},r}),function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("q",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){"use strict";function e(e){return function(){return G.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===te(e)||e instanceof W}function r(e,t){if(j&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ne)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var o=n.join("\n"+ne+"\n");e.stack=i(o)}}function i(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];s(i)||o(i)||!i||n.push(i)}return n.join("\n")}function o(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function s(e){var t=a(e);if(!t)return!1;var n=t[0],r=t[1];return n===Q&&r>=q&&ae>=r}function d(){if(j)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=a(n);if(!r)return;return Q=r[0],r[1]}}function l(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function u(e){return v(e)?e:g(e)?U(e):I(e)}function c(){function e(e){t=e,o.source=e,J(n,function(t,n){H(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=X(c.prototype),o=X(A.prototype);if(o.promiseDispatch=function(e,i,o){var a=Y(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):H(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(n)return o;var e=h(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},u.longStackSupport&&j)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(u(n))},i.fulfill=function(n){t||e(I(n))},i.reject=function(n){t||e(C(n))},i.notify=function(e){t||J(r,function(t,n){H(function(){n(e)})},void 0)},i}function p(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=c();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function f(e){return p(function(t,n){for(var r=0,i=e.length;i>r;r++)u(e[r]).then(t,n)})}function A(e,t,n){void 0===t&&(t=function(e){return C(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=X(A.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(s){a=C(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function m(e,t,n,r){return u(e).then(t,n,r)}function h(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return t(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function g(e){return t(e)&&"function"==typeof e.then}function y(e){return v(e)&&"pending"===e.inspect().state}function _(e){return!v(e)||"fulfilled"===e.inspect().state}function E(e){return v(e)&&"rejected"===e.inspect().state}function b(){re.length=0,ie.length=0,oe||(oe=!0)}function D(e,t){oe&&(ie.push(e),t&&"undefined"!=typeof t.stack?re.push(t.stack):re.push("(no stack) "+t))}function w(e){if(oe){var t=K(ie,e);-1!==t&&(ie.splice(t,1),re.splice(t,1))}}function C(e){var t=A({when:function(t){return t&&w(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return D(t,e),t}function I(e){return A({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return ee(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function U(e){var t=c();return H(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function k(e){return A({isDef:function(){}},function(t,n){return R(e,t,n)},function(){return u(e).inspect()})}function F(e,t,n){return u(e).spread(t,n)}function T(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=r[e](t)}catch(s){return C(s)}return a.done?a.value:m(a.value,i,o)}try{a=r[e](t)}catch(s){return n(s)?s.value:C(s)}return m(a,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function S(e){u.done(u.async(e)())}function x(e){throw new W(e)}function P(e){return function(){return F([this,L(arguments)],function(t,n){return e.apply(t,n)})}}function R(e,t,n){return u(e).dispatch(t,n)}function L(e){return m(e,function(e){var t=0,n=c();return J(e,function(r,i,o){var a;v(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,m(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function O(e){return m(e,function(e){return e=Z(e,u),m(L(Z(e,function(e){return m(e,z,z)})),function(){return e})})}function M(e){return u(e).allSettled()}function B(e,t){return u(e).then(void 0,void 0,t)}function V(e,t){return u(e).nodeify(t)}var j=!1;try{throw new Error}catch(N){j=!!N.stack}var Q,W,q=d(),z=function(){},H=function(){function e(){for(;t.next;){t=t.next;var n=t.task;t.task=void 0;var i=t.domain;i&&(t.domain=void 0,i.enter());try{n()}catch(a){if(o)throw i&&i.exit(),setTimeout(e,0),i&&i.enter(),a;setTimeout(function(){throw a},0)}i&&i.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,i=void 0,o=!1;if(H=function(e){n=n.next={task:e,domain:o&&process.domain,next:null},r||(r=!0,i())},"undefined"!=typeof process&&process.nextTick)o=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){i=s,a.port1.onmessage=e,e()};var s=function(){a.port2.postMessage(0)};i=function(){setTimeout(e,0),s()}}else i=function(){setTimeout(e,0)};return H}(),G=Function.call,Y=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),K=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Z=e(Array.prototype.map||function(e,t){var n=this,r=[];return J(n,function(i,o,a){r.push(e.call(t,o,a,n))},void 0),r}),X=Object.create||function(e){function t(){}return t.prototype=e,new t},$=e(Object.prototype.hasOwnProperty),ee=Object.keys||function(e){var t=[];for(var n in e)$(e,n)&&t.push(n);return t},te=e(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ne="From previous event:";u.resolve=u,u.nextTick=H,u.longStackSupport=!1,u.defer=c,c.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},u.Promise=p,u.promise=p,p.race=f,p.all=L,p.reject=C,p.resolve=u,u.passByCopy=function(e){return e},A.prototype.passByCopy=function(){return this},u.join=function(e,t){return u(e).join(t)},A.prototype.join=function(e){return u([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},u.race=f,A.prototype.race=function(){return this.then(u.race)},u.makePromise=A,A.prototype.toString=function(){return"[object Promise]"},A.prototype.then=function(e,t,n){function i(t){try{return"function"==typeof e?e(t):t}catch(n){return C(n)}}function o(e){if("function"==typeof t){r(e,s);try{return t(e)}catch(n){return C(n)}}return C(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,d=c(),l=!1;return H(function(){s.promiseDispatch(function(e){l||(l=!0,d.resolve(i(e)))},"when",[function(e){l||(l=!0,d.resolve(o(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!u.onerror)throw r;u.onerror(r)}n||d.notify(t)}]),d.promise},u.when=m,A.prototype.thenResolve=function(e){return this.then(function(){return e})},u.thenResolve=function(e,t){return u(e).thenResolve(t)},A.prototype.thenReject=function(e){return this.then(function(){throw e})},u.thenReject=function(e,t){return u(e).thenReject(t)},u.nearer=h,u.isPromise=v,u.isPromiseAlike=g,u.isPending=y,A.prototype.isPending=function(){return"pending"===this.inspect().state},u.isFulfilled=_,A.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},u.isRejected=E,A.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],ie=[],oe=!0;u.resetUnhandledRejections=b,u.getUnhandledReasons=function(){return re.slice()},u.stopUnhandledRejectionTracking=function(){b(),oe=!1},b(),u.reject=C,u.fulfill=I,u.master=k,u.spread=F,A.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},u.async=T,u.spawn=S,u["return"]=x,u.promised=P,u.dispatch=R,A.prototype.dispatch=function(e,t){var n=this,r=c();return H(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},u.get=function(e,t){return u(e).dispatch("get",[t])},A.prototype.get=function(e){return this.dispatch("get",[e])},u.set=function(e,t,n){return u(e).dispatch("set",[t,n])},A.prototype.set=function(e,t){return this.dispatch("set",[e,t])},u.del=u["delete"]=function(e,t){return u(e).dispatch("delete",[t])},A.prototype.del=A.prototype["delete"]=function(e){return this.dispatch("delete",[e])},u.mapply=u.post=function(e,t,n){return u(e).dispatch("post",[t,n])},A.prototype.mapply=A.prototype.post=function(e,t){return this.dispatch("post",[e,t])},u.send=u.mcall=u.invoke=function(e,t){return u(e).dispatch("post",[t,Y(arguments,2)])},A.prototype.send=A.prototype.mcall=A.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},u.fapply=function(e,t){return u(e).dispatch("apply",[void 0,t])},A.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},u["try"]=u.fcall=function(e){return u(e).dispatch("apply",[void 0,Y(arguments,1)])},A.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},u.fbind=function(e){var t=u(e),n=Y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Y(arguments))])}},A.prototype.fbind=function(){var e=this,t=Y(arguments);return function(){return e.dispatch("apply",[this,t.concat(Y(arguments))])}},u.keys=function(e){return u(e).dispatch("keys",[])},A.prototype.keys=function(){return this.dispatch("keys",[])},u.all=L,A.prototype.all=function(){return L(this)},u.allResolved=l(O,"allResolved","allSettled"),A.prototype.allResolved=function(){return O(this)},u.allSettled=M,A.prototype.allSettled=function(){return this.then(function(e){return L(Z(e,function(e){function t(){return e.inspect()}return e=u(e),e.then(t,t)}))})},u.fail=u["catch"]=function(e,t){return u(e).then(void 0,t)},A.prototype.fail=A.prototype["catch"]=function(e){return this.then(void 0,e)},u.progress=B,A.prototype.progress=function(e){return this.then(void 0,void 0,e)},u.fin=u["finally"]=function(e,t){return u(e)["finally"](t)},A.prototype.fin=A.prototype["finally"]=function(e){return e=u(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},u.done=function(e,t,n,r){return u(e).done(t,n,r)},A.prototype.done=function(e,t,n){var i=function(e){H(function(){if(r(e,o),!u.onerror)throw e;u.onerror(e)})},o=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i)),o.then(void 0,i)},u.timeout=function(e,t,n){return u(e).timeout(t,n)},A.prototype.timeout=function(e,t){var n=c(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},u.delay=function(e,t){return void 0===t&&(t=e,e=void 0),u(e).delay(t)},A.prototype.delay=function(e){return this.then(function(t){var n=c();return setTimeout(function(){n.resolve(t)},e),n.promise})},u.nfapply=function(e,t){return u(e).nfapply(t)},A.prototype.nfapply=function(e){var t=c(),n=Y(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},u.nfcall=function(e){var t=Y(arguments,1);return u(e).nfapply(t)},A.prototype.nfcall=function(){var e=Y(arguments),t=c();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},u.nfbind=u.denodeify=function(e){var t=Y(arguments,1);return function(){var n=t.concat(Y(arguments)),r=c();return n.push(r.makeNodeResolver()),u(e).fapply(n).fail(r.reject),r.promise}},A.prototype.nfbind=A.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),u.denodeify.apply(void 0,e)},u.nbind=function(e,t){var n=Y(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(Y(arguments)),o=c();return i.push(o.makeNodeResolver()),u(r).fapply(i).fail(o.reject),o.promise}},A.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),u.nbind.apply(void 0,e)},u.nmapply=u.npost=function(e,t,n){return u(e).npost(t,n)},A.prototype.nmapply=A.prototype.npost=function(e,t){var n=Y(t||[]),r=c();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},u.nsend=u.nmcall=u.ninvoke=function(e,t){var n=Y(arguments,2),r=c();return n.push(r.makeNodeResolver()),u(e).dispatch("post",[t,n]).fail(r.reject),r.promise},A.prototype.nsend=A.prototype.nmcall=A.prototype.ninvoke=function(e){var t=Y(arguments,1),n=c();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},u.nodeify=V,A.prototype.nodeify=function(e){return e?void this.then(function(t){H(function(){e(null,t)})},function(t){H(function(){e(t)})}):this};var ae=d();return u}),define("util/imageFactory",[],function(){return{createImage:function(e,t){return new Image(e,t)}}}),define("util/pixelService",["q","util/imageFactory"],function(e,t){function n(n){var r=e.defer(),i=t.createImage(1,1);return i.onload=function(){r.resolve()},i.onerror=function(){r.reject()},i.src=n,r.promise}return{fire:n}}),define("util/performanceMetrics",["util/stopwatch","util/browser"],function(e,t){function n(e,t){var n="&perf_"+e+"_start="+t.start;return t.end&&(n+="&perf_"+e+"_end="+t.end),n}function r(){var t,r="",i=e.getStopwatches();for(t in i)i.hasOwnProperty(t)&&(r+=n(t,i[t]));return r}function i(e){var n="",r=t.getPerformance();return r.timing[e]&&(n+="&",n+=a[e],n+="=",n+=r.timing[e]),n}function o(){var e,n="",r=t.getPerformance();if(r&&r.timing)for(e in a)a.hasOwnProperty(e)&&(n+=i(e));return n}var a={requestStart:"perf_req_start",responseStart:"perf_res_start",responseEnd:"perf_res_end",domContentLoadedEventEnd:"perf_dom_ready",loadEventEnd:"perf_onload"};return{buildParameters:function(){return o()+r()}}}),define("util/global",[],function(){return window}),define("session/sessionInfo",["util/browser","util/publisherWindow","unrulyAdCore/util/window","util/global"],function(e,t,n,r){function i(){return{site:{lang:e.getLanguage(),ref:t.document.referrer,page:t.location.href,domain:e.getDomain()}}}function o(){return n.unruly&&n.unruly["native"]&&n.unruly["native"].siteId||null}function a(){return r._sessionId}function s(){return"v1.0.372-5-g37762c6"}function d(){return t.document.referrer}function l(){return t.location.href}function u(){return encodeURIComponent(l())}function c(){return encodeURIComponent(u())}return{getSiteInfo:i,getGitHash:s,getSessionId:a,getSiteId:o,getRefUrl:d,getPageUrl:l,getEncodedPageURL:u,getDoubleEncodedPageURL:c}}),define("tracking",["util/pixelService","util/trackingEvent","util/performanceMetrics","session/sessionInfo"],function(e,t,n,r){function i(e){p=e.tracking,f={}}function o(t,i,o,a){var s="//"+u+"/blank.gif?"+t+"="+i+"&app=native&pid="+r.getSiteId();a=a||{};for(var l in o)o.hasOwnProperty(l)&&(s+="&"+l+"="+encodeURIComponent(o[l]));return s=d(s,a),a.noTopWindowAccess||(s+=n.buildParameters()),e.fire(s)}function a(e){var n=[t.CLICK,t.VIDEO_CLICK,t.POST_VIDEO_CLICK,t.error.ELEMENT_STYLE_CLONE_ERROR,t.UNMUTE,t.MUTE];return-1===n.indexOf(e)}function s(t,n){var r=p[t];"object"==typeof r&&(f[t]&&a(t)||(r.map(d).map(function(e){return l(e,n)}).forEach(e.fire),f[t]=!0))}function d(e,t){var n=/\[CACHEBUSTER\]/g,i=/\[ENCODED_URL\]/g,o=/\[DOUBLE_ENCODED_URL\]/g;return t=t||{},c.test(e)&&(e+="&id=[CACHEBUSTER]",e+="&d="+(new Date).getTime(),e+="&h="+r.getGitHash()),t.noTopWindowAccess||(e=e.replace(i,r.getEncodedPageURL()).replace(o,r.getDoubleEncodedPageURL())),e.replace(n,r.getSessionId())}function l(e,t){if(c.test(e)){for(var r in t)t.hasOwnProperty(r)&&(e+="&"+r+"="+encodeURIComponent(t[r]));e+=n.buildParameters()}return e}var u="stats3.unrulymedia.com",c=/stats3\.unrulymedia\.com/,p=[],f={};return{trackSplunk:function(e,t){return o("e",e,t)},trackActivate:function(e,t,n){return o("t",e,t,n)},trackThirdParty:s,setupThirdPartyTracking:i}}),define("util/publisherAdServerHelper",["unrulyAdCore/util/window","jquery"],function(e,t){function n(){e.frameElement&&t(e.frameElement).setImportantStyle({width:"1px",height:"1px"}).attr({width:"1",height:"1"})}return{shrinkAdServerIFrame:n}}),define("util/publisherApi",["unrulyAdCore/util/window","util/publisherAdServerHelper","util/publisherWindow"],function(e,t,n){function r(t){return e.unruly&&e.unruly["native"]&&"function"==typeof e.unruly["native"][t]}function i(){r("onFinished")&&e.unruly["native"].onFinished.call(e)}function o(){try{if(n===e)return!1}catch(t){}return!0}function a(){if(o())if(r("onFallback")){var n=e.unruly["native"].onFallback.call(e);if("string"!=typeof n)throw new Error("unruly.native.onFallback function should return HTML string");e.document.write("<!DOCTYPE html><html><head></head><body>"+n+"</body></html>")}else t.shrinkAdServerIFrame()}return{onFinished:i,onFallback:a}}),define("audienceTargeting",["jquery","q","util/trackingEvent","util/global","util/publisherWindow","session/sessionInfo"],function(e,t,n,r,i,o){function a(){var r=t.defer(),i="unruly_infeed_audience_cb_"+(new Date).getTime()+"_"+Math.floor(1e7*Math.random());return e.ajax({url:"//segapi.quantserve.com/api/segments.json?a=p-e8Y0HwzVa2sIw&callback="+i,dataType:"jsonp",jsonp:!1,jsonpCallback:i,cache:!0,success:function(e){r.resolve(e)},error:function(e,t){r.reject({type:n.error.AUDIENCE_TARGETING_REQUEST_FAILED,message:"Audience Targeting Request Failed ("+t+" "+e.status+")"})}}),r.promise}function s(){var t,n="//video.unrulymedia.com/iframes/third-party-iframes.html?h="+o.getGitHash(),a=i.location.protocol;t=e("<iframe>"),t.attr("src",a+n),e("body",r.document).append(t)}return{request:a,syncData:s}}),define("util/eventDispatcher",["jquery"],function(e){function t(t){this.target=e(t)}return t.prototype={addEventListener:function(e,t){this.target.on(e,t)},one:function(e,t){this.target.one(e,t)},removeEventListener:function(e,t){this.target.off(e,t)},dispatchEvent:function(e,t){this.target.trigger(e,t)}},t}),define("util/eventBus",["util/eventDispatcher"],function(e){var t=new e({});return t}),define("logging/crossDomainTransporter",["jquery"],function(e){function t(t,n){return e.ajax({url:t,data:n,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},contentType:"application/json; charset=UTF-8",mimeType:"application/json"})}return{postJSON:t}}),define("logging/logSerialiser",[],function(){function e(e){return JSON.stringify(e)}return{serialise:e}}),define("logging/loggingService",["util/eventBus","logging/crossDomainTransporter","logging/logSerialiser","util/enable","session/sessionInfo","util/stopwatch"],function(e,t,n,r,i,o){function a(e,t){s(t)}function s(e){var t;for(t in e)e.hasOwnProperty(t)&&(f[t]=void 0!==e[t]?e[t]:"undefined")}function d(e,t){t&&f.messages.push(t)}function l(){return f}function u(){var t={gitHash:i.getGitHash(),sessionId:i.getSessionId(),siteId:i.getSiteId(),referrer:i.getRefUrl(),pageUrl:i.getPageUrl()};s(t),e.addEventListener("logContext",a),e.addEventListener("logMessages",d)}function c(e){p=r.loggingServiceDoSample?Math.random()>=A:!0,p&&(s({timings:o.getStopwatches()}),t.postJSON(e,n.serialise(l())))}var p,f={messages:[]},A=.5;return{init:u,getLogData:l,sendLog:c}}),define("logging/loggingController",["logging/loggingService","util/trackingEvent"],function(e,t){function n(n){var r="//targaryen.unrulymedia.com/error",o="//targaryen.unrulymedia.com/success",a=n.filter(function(e){return"rejected"===e.state}),s=n.filter(function(e){var n="rejected"===e.state&&e.reason.errorType===t.error.NO_ADS;return"fulfilled"===e.state||n}),d=a.filter(function(e){return-1===i.indexOf(e.reason.errorType)});d.length>0?e.sendLog(r):s.length>0&&e.sendLog(o)}function r(){i=[t.error.NO_ADS,t.error.NO_MATCHING_PLACEMENT,t.error.PLACEMENT_ALREADY_FOUND],e.init()}var i;return{log:n,init:r}}),define("vast-parser/util/window",[],function(){return window}),define("vast-parser/xml-parser",["./util/window"],function(e){function t(e){return e.nodeType===o.TEXT||e.nodeType===o.CDATA}function n(e){return e.nodeType===o.ELEMENT&&!e.prefix}function r(e){if("undefined"==typeof e)return this;if(e.hasChildNodes()){var i,o,a,s,d="";for(s=0;s<e.childNodes.length;s++)i=e.childNodes.item(s),t(i)?d+=i.nodeValue.trim():n(i)&&(o=i.nodeName,a=new r(i),this.hasOwnProperty(o)?(this[o].constructor!==Array&&(this[o]=[this[o]]),this[o].push(a)):this[o]=a);d&&(this.nodeValue=d.trim())}if(e.hasAttributes&&e.hasAttributes()){var l,u;for(u=0;u<e.attributes.length;u++)l=e.attributes.item(u),this["@"+l.name]=l.value.trim()}}var i=i||{},o={ELEMENT:i.ELEMENT_NODE||1,TEXT:i.TEXT_NODE||3,CDATA:i.CDATA_SECTION_NODE||4};return{parse:function(t){var n;return t.xml&&(n=new e.DOMParser,t=n.parseFromString(t.xml,"text/xml")),new r(t)}}}),define("vast-parser/vast-parser",["./xml-parser"],function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function n(e){return void 0===e||"object"==typeof e&&t(e)||null===e||"number"==typeof e&&0!==e&&!e?[]:Array.isArray(e)?e:[e]}function r(e){return e.Creatives&&(e.Creatives.Creative=n(e.Creatives.Creative)),e.Extensions&&(e.Extensions.Extension=n(e.Extensions.Extension)),e.Impression=n(e.Impression),e}function i(e,t){"use strict";if(void 0===e||null===e)throw new TypeError;var n=Object(e),r=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=arguments.length>=3?arguments[2]:void 0,a=0;r>a;a++)if(a in n){var s=n[a];t.call(o,s,a,n)&&i.push(s)}return i}function o(e,t){for(var n=0;n<e.length;n+=1)t(e[n])}function a(e){var t=e.Creatives.Creative,r=i(t,function(e){return e.NonLinearAds},t),a=i(t,function(e){return e.Linear},t);return o(r,function(e){e.NonLinearAds.NonLinear.NonLinearClickTracking=n(e.NonLinearAds.NonLinear.NonLinearClickTracking)}),o(a,function(e){e.Linear.MediaFiles&&(e.Linear.MediaFiles.MediaFile=n(e.Linear.MediaFiles.MediaFile))}),e}function s(t){var n=e.parse(t);return n.VAST&&!n.VAST.Error&&n.VAST.Ad?(n.VAST.Ad.Wrapper?(n.VAST.Ad.Wrapper=r(n.VAST.Ad.Wrapper),n.VAST.Ad.Wrapper.Creatives&&(n.VAST.Ad.Wrapper=a(n.VAST.Ad.Wrapper))):n.VAST.Ad.InLine&&(n.VAST.Ad.InLine=r(n.VAST.Ad.InLine),n.VAST.Ad.InLine=a(n.VAST.Ad.InLine)),n):n}return{parse:s}}),define("vast-parser",["vast-parser/vast-parser"],function(e){return e}),define("vast-parser/vastErrorCodes",[],function(){return{XML_PARSE_ERROR:{code:100,message:"XML parsing error."},VAST_SCHEMA_ERROR:{code:101,message:"VAST schema validation error."},GENERAL_WRAPPER_ERROR:{code:300,message:"General Wrapper error."},WRAPPER_URI_TIMEOUT:{code:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},NO_ADS:{code:303,message:"No Ads VAST response after one or more Wrappers."},NO_AD_AT_URI:{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."}}}),define("vast-parser/util/objectUtil",[],function(){function e(e,n,r){var i=t(e,n,r);return i=parseInt(i,10),isNaN(i)?r:i}function t(e,t,r){var o=n(e,t);return i(o[0])?o[0]:r}function n(e,t){var r,a,s,d=t.split("."),l=[];if(e instanceof Array)return o(e.map(function(e){return n(e,t)}));if(e=e||l,1===d.length){var u=e[t];return i(u)?(u instanceof Array||(u=[u]),u):l}return r=d[0],a=d.slice(1).join("."),s=e[r],i(s)?n(s,a):l}function r(e){return e?e.nodeValue:void 0}function i(e){return"undefined"!=typeof e&&null!==e}function o(e){return[].concat.apply([],e)}return{getArrayFromObjectPath:n,getIntegerFromObjectPath:e,getFromObjectPath:t,pluckNodeValue:r,isDefined:i,flatten:o}}),define("vast-parser/vastError",["./vastErrorCodes","./util/objectUtil"],function(e,t){function n(t){var n,r;for(n in e)if(e.hasOwnProperty(n)&&(r=e[n],r.code===t))return r.message;return"Unknown error code"}function r(e){var t,n=[];return e&&(t=o(e,"wrappers").map(function(e){return[].concat(o(e,"VAST.Error")).concat(o(e,"VAST.Ad.Wrapper.Error"))}),n=d(t).concat(o(e,"inline.VAST.Error")).concat(o(e,"inline.VAST.Ad.InLine.Error")).map(a).filter(s)),n}function i(e,t,i){this.name="VastError",this.code=e,this.message="VAST Error: ["+e+"] - "+(i||n(e)),this.stack=(new Error).stack,this.errorURIs=r(t),this.vastResponse=t}var o=t.getArrayFromObjectPath,a=t.pluckNodeValue,s=t.isDefined,d=t.flatten;return i.prototype=new Error,i.prototype.constructor=i,i.prototype.getErrorURIs=function(){return this.errorURIs},i}),function(e,t){"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define("vast-parser/../../node_modules/validator/validator",t):this[e]=t()}("validator",function(e){"use strict";function t(e,t){e=e||{};for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function n(e){var t="(\\"+e.symbol.replace(/\./g,"\\.")+")"+(e.require_symbol?"":"?"),n="-?",r="[1-9]\\d*",i="[1-9]\\d{0,2}(\\"+e.thousands_separator+"\\d{3})*",o=["0",r,i],a="("+o.join("|")+")?",s="(\\"+e.decimal_separator+"\\d{2})?",d=a+s;return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?d+=n:e.negative_sign_before_digits&&(d=n+d)),e.allow_negative_sign_placeholder?d="( (?!\\-))?"+d:e.allow_space_after_symbol?d=" ?"+d:e.allow_space_after_digits&&(d+="( (?!$))?"),e.symbol_after_digits?d+=t:d=t+d,e.allow_negatives&&(e.parens_for_negatives?d="(\\("+d+"\\)|"+d+")":e.negative_sign_before_digits||e.negative_sign_after_digits||(d=n+d)),new RegExp("^(?!-? )(?=.*\\d)"+d+"$")}e={version:"3.33.0"};var r=/((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))/,i=/([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\s)*/,o=new RegExp("^"+r.source+"$","i"),a=new RegExp("^"+i.source+"<"+r.source+">$","i"),s=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,d=/^(?:[0-9]{9}X|[0-9]{10})$/,l=/^(?:[0-9]{13})$/,u=/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/,c=/^::|^::1|^([a-fA-F0-9]{1,4}::?){1,7}([a-fA-F0-9]{1,4})$/,p={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},f=/^[a-zA-Z]+$/,A=/^[a-zA-Z0-9]+$/,m=/^[-+]?[0-9]+$/,h=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,v=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,g=/^[0-9a-fA-F]+$/,y=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,_=/^[\x00-\x7F]+$/,E=/[^\x00-\x7F]/,b=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,D=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,C=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{4})$/,I={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"pt-PT":/^(\+351)?9[1236]\d{7}$/,"el-GR":/^(\+30)?((2\d{9})|(69\d{8}))$/};e.extend=function(t,n){e[t]=function(){var t=Array.prototype.slice.call(arguments);return t[0]=e.toString(t[0]),n.apply(e,t)}},e.init=function(){for(var t in e)"function"==typeof e[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&e.extend(t,e[t])},e.toString=function(e){return"object"==typeof e&&null!==e&&e.toString?e=e.toString():null===e||"undefined"==typeof e||isNaN(e)&&!e.length?e="":"string"!=typeof e&&(e+=""),e},e.toDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:(e=Date.parse(e),isNaN(e)?null:new Date(e))},e.toFloat=function(e){return parseFloat(e)},e.toInt=function(e,t){return parseInt(e,t||10)},e.toBoolean=function(e,t){return t?"1"===e||"true"===e:"0"!==e&&"false"!==e&&""!==e},e.equals=function(t,n){return t===e.toString(n)},e.contains=function(t,n){return t.indexOf(e.toString(n))>=0},e.matches=function(e,t,n){return"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n)),t.test(e)};var U={allow_display_name:!1};e.isEmail=function(e,n){return n=t(n,U),o.test(e)||n.allow_display_name===!0&&a.test(e)};var k={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};e.isURL=function(n,r){if(!n||n.length>=2083)return!1;if(0===n.indexOf("mailto:"))return!1;r=t(r,k);var i,o,a,s,d,l,u,c,p,f,A,m;if(m=n.split("://"),m.length>1){if(i=m.shift(),-1===r.protocols.indexOf(i))return!1}else{if(r.require_protocol)return!1;r.allow_protocol_relative_urls&&"//"===n.substr(0,2)&&(m[0]=n.substr(2))}if(n=m.join("://"),
m=n.split("#"),n=m.shift(),A=m.join("#"),A&&/\s/.test(A))return!1;if(m=n.split("?"),n=m.shift(),f=m.join("?"),f&&/\s/.test(f))return!1;if(m=n.split("/"),n=m.shift(),p=m.join("/"),p&&/\s/.test(p))return!1;if(m=n.split("@"),m.length>1&&(s=m.shift(),s.indexOf(":")>=0)){if(s=s.split(":"),o=s.shift(),!/^\S+$/.test(o))return!1;if(a=s.join(":"),!/^\S*$/.test(o))return!1}return l=m.join("@"),m=l.split(":"),d=m.shift(),m.length&&(c=m.join(":"),u=parseInt(c,10),!/^[0-9]+$/.test(c)||0>=u||u>65535)?!1:e.isIP(d)||e.isFQDN(d,r)||"localhost"===d?r.host_whitelist&&-1===r.host_whitelist.indexOf(d)?!1:r.host_blacklist&&-1!==r.host_blacklist.indexOf(d)?!1:!0:!1},e.isIP=function(t,n){if(n=e.toString(n),!n)return e.isIP(t,4)||e.isIP(t,6);if("4"===n){if(!u.test(t))return!1;var r=t.split(".").sort(function(e,t){return e-t});return r[3]<=255}return"6"===n&&c.test(t)};var F={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.isFQDN=function(e,n){n=t(n,F),n.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var r=e.split(".");if(n.require_tld){var i=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1}for(var o,a=0;a<r.length;a++){if(o=r[a],n.allow_underscores){if(o.indexOf("__")>=0)return!1;o=o.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(o))return!1;if("-"===o[0]||"-"===o[o.length-1]||o.indexOf("---")>=0)return!1}return!0},e.isAlpha=function(e){return f.test(e)},e.isAlphanumeric=function(e){return A.test(e)},e.isNumeric=function(e){return m.test(e)},e.isHexadecimal=function(e){return g.test(e)},e.isHexColor=function(e){return y.test(e)},e.isLowercase=function(e){return e===e.toLowerCase()},e.isUppercase=function(e){return e===e.toUpperCase()},e.isInt=function(e){return h.test(e)},e.isFloat=function(e){return""!==e&&v.test(e)},e.isDivisibleBy=function(t,n){return e.toFloat(t)%e.toInt(n)===0},e.isNull=function(e){return 0===e.length},e.isLength=function(e,t,n){var r=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],i=e.length-r.length;return i>=t&&("undefined"==typeof n||n>=i)},e.isByteLength=function(e,t,n){return e.length>=t&&("undefined"==typeof n||e.length<=n)},e.isUUID=function(e,t){var n=p[t?t:"all"];return n&&n.test(e)},e.isDate=function(e){return!isNaN(Date.parse(e))},e.isAfter=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return!!(i&&r&&i>r)},e.isBefore=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return i&&r&&r>i},e.isIn=function(t,n){var r;if("[object Array]"===Object.prototype.toString.call(n)){var i=[];for(r in n)i[r]=e.toString(n[r]);return i.indexOf(t)>=0}return"object"==typeof n?n.hasOwnProperty(t):n&&"function"==typeof n.indexOf?n.indexOf(t)>=0:!1},e.isCreditCard=function(e){var t=e.replace(/[^0-9]+/g,"");if(!s.test(t))return!1;for(var n,r,i,o=0,a=t.length-1;a>=0;a--)n=t.substring(a,a+1),r=parseInt(n,10),i?(r*=2,o+=r>=10?r%10+1:r):o+=r,i=!i;return!!(o%10===0?t:!1)},e.isISBN=function(t,n){if(n=e.toString(n),!n)return e.isISBN(t,10)||e.isISBN(t,13);var r,i=t.replace(/[\s-]+/g,""),o=0;if("10"===n){if(!d.test(i))return!1;for(r=0;9>r;r++)o+=(r+1)*i.charAt(r);if(o+="X"===i.charAt(9)?100:10*i.charAt(9),o%11===0)return!!i}else if("13"===n){if(!l.test(i))return!1;var a=[1,3];for(r=0;12>r;r++)o+=a[r%2]*i.charAt(r);if(i.charAt(12)-(10-o%10)%10===0)return!!i}return!1},e.isMobilePhone=function(e,t){return t in I?I[t].test(e):!1};var T={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};e.isCurrency=function(e,r){return r=t(r,T),n(r).test(e)},e.isJSON=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.isMultibyte=function(e){return E.test(e)},e.isAscii=function(e){return _.test(e)},e.isFullWidth=function(e){return b.test(e)},e.isHalfWidth=function(e){return D.test(e)},e.isVariableWidth=function(e){return b.test(e)&&D.test(e)},e.isSurrogatePair=function(e){return w.test(e)},e.isBase64=function(e){return C.test(e)},e.isMongoId=function(t){return e.isHexadecimal(t)&&24===t.length},e.ltrim=function(e,t){var n=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(n,"")},e.rtrim=function(e,t){var n=t?new RegExp("["+t+"]+$","g"):/\s+$/g;return e.replace(n,"")},e.trim=function(e,t){var n=t?new RegExp("^["+t+"]+|["+t+"]+$","g"):/^\s+|\s+$/g;return e.replace(n,"")},e.escape=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;")},e.stripLow=function(t,n){var r=n?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return e.blacklist(t,r)},e.whitelist=function(e,t){return e.replace(new RegExp("[^"+t+"]+","g"),"")},e.blacklist=function(e,t){return e.replace(new RegExp("["+t+"]+","g"),"")};var S={lowercase:!0};return e.normalizeEmail=function(n,r){if(r=t(r,S),!e.isEmail(n))return!1;var i=n.split("@",2);if(i[1]=i[1].toLowerCase(),"gmail.com"===i[1]||"googlemail.com"===i[1]){if(i[0]=i[0].toLowerCase().replace(/\./g,""),"+"===i[0][0])return!1;i[0]=i[0].split("+")[0],i[1]="gmail.com"}else r.lowercase&&(i[0]=i[0].toLowerCase());return i.join("@")},e.init(),e}),define("vast-parser/util/helpers",["../../../node_modules/validator/validator"],function(e){function t(t){var n,r=0;if("string"==typeof t&&(n=t.split(":").filter(function(t,n){return e.isNumeric(t)||2===n&&e.isFloat(t)}),3===n.length))return n.forEach(function(e,t){r+=parseFloat(e,10)*Math.pow(60,2-t)}),r}function n(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}return{getSecondsFromTimeString:t,decodeXML:n}}),define("vast-parser/model/vastMediaFile",["../util/objectUtil"],function(e){function t(t){this.url=e.getFromObjectPath(t,"nodeValue"),this.apiFramework=e.getFromObjectPath(t,"@apiFramework"),this.type=e.getFromObjectPath(t,"@type"),this.width=e.getIntegerFromObjectPath(t,"@width"),this.height=e.getIntegerFromObjectPath(t,"@height"),this.delivery=e.getFromObjectPath(t,"@delivery"),this.bitrate=e.getIntegerFromObjectPath(t,"@bitrate")}return t.prototype.isMP4=function(){return"progressive"===this.delivery&&"video/mp4"===this.type},t.prototype.isFlashVPAID=function(){return"VPAID"===this.apiFramework&&"application/x-shockwave-flash"===this.type},t.prototype.isJavascriptVPAID=function(){return"VPAID"===this.apiFramework&&"application/javascript"===this.type},t}),define("vast-parser/model/vastLinearCreative",["../util/objectUtil","../util/helpers","../model/vastMediaFile"],function(e,t,n){function r(t){this.vastResponse=t,this.linearInline=e.getFromObjectPath(this.vastResponse,"inline.VAST.Ad.InLine.Creatives.Creative.Linear"),this.linearWrappers=e.getArrayFromObjectPath(this.vastResponse,"wrappers.VAST.Ad.Wrapper.Creatives.Creative.Linear")}return r.prototype.getDuration=function(){var n=e.getFromObjectPath(this.linearInline,"Duration.nodeValue");return t.getSecondsFromTimeString(n)},r.prototype.getClickTrackers=function(){var t=e.getArrayFromObjectPath(this.linearWrappers,"VideoClicks.ClickTracking.nodeValue"),n=e.getArrayFromObjectPath(this.linearInline,"VideoClicks.ClickTracking.nodeValue");return n.concat(t)},r.prototype.getClickThrough=function(){return e.getFromObjectPath(this.linearInline,"VideoClicks.ClickThrough.nodeValue")},r.prototype.getAdParameters=function(){var n=e.getFromObjectPath(this.linearInline,"AdParameters.nodeValue"),r=e.getFromObjectPath(this.linearInline,"AdParameters.@xmlEncoded");return"true"===r&&"string"==typeof n&&(n=t.decodeXML(n)),n},r.prototype.getMediaFiles=function(t){var r=e.getArrayFromObjectPath(this.linearInline,"MediaFiles.MediaFile");return t=t||{},r=r.map(function(e){return new n(e)}),r=r.filter(function(e){var n,r=!0;for(n in t)t.hasOwnProperty(n)&&(r=r&&e[n]===t[n]);return r})},r.prototype.getFlashVPAIDMediaFiles=function(){return this.getMediaFiles({apiFramework:"VPAID",type:"application/x-shockwave-flash"})},r.prototype.getJavascriptVPAIDMediaFiles=function(){return this.getMediaFiles({apiFramework:"VPAID",type:"application/javascript"})},r.prototype.getMp4MediaFiles=function(){return this.getMediaFiles({type:"video/mp4",delivery:"progressive"})},r.prototype.hasFlashVPAID=function(){return this.getFlashVPAIDMediaFiles().length>0},r.prototype.hasJavascriptVPAID=function(){return this.getJavascriptVPAIDMediaFiles().length>0},r.prototype.hasMp4=function(){return this.getMp4MediaFiles().length>0},{VastLinearCreative:r}}),define("vast-parser/model/vastExtension",["../util/objectUtil"],function(e){function t(e){this.extension=e}return t.prototype.getExtensionNodes=function(){return this.extension},t.prototype.getDetailsByPath=function(t){return e.getArrayFromObjectPath(this.extension,t)},t}),define("vast-parser/model/vastModelFactory",["./vastExtension"],function(e){return{createVastExtension:function(t){return new e(t)}}}),define("vast-parser/model/vastResponse",["../../../node_modules/validator/validator","../util/objectUtil","./vastLinearCreative","./vastExtension","./vastModelFactory"],function(e,t,n,r,i){function o(e){this.wrappers=[],this.inline=void 0,this._raw=[],e&&(this.wrappers=e.wrappers,this.inline=e.inline),this._vastChain=e}function a(t){return e.isURL(t,{allow_protocol_relative_urls:!0})}return o.prototype.getImpressions=function(){var e=t.getArrayFromObjectPath(this.inline,"VAST.Ad.InLine.Impression.nodeValue"),n=t.getArrayFromObjectPath(this.wrappers,"VAST.Ad.Wrapper.Impression.nodeValue");return e.concat(n).filter(a)},o.prototype.getAdTitle=function(){return this.inline.VAST.Ad.InLine.AdTitle.nodeValue},o.prototype.getLinearCreative=function(){if(!this.linearCreative){var e=t.getFromObjectPath(this.inline,"VAST.Ad.InLine.Creatives.Creative.Linear");e&&(this.linearCreative=new n.VastLinearCreative(this))}return this.linearCreative},o.prototype.getRawResponses=function(){return this._raw},o.prototype.addRawResponse=function(e){this._raw.push(e)},o.prototype.getExtensions=function(){var e=t.getArrayFromObjectPath(this.inline,"VAST.Ad.InLine.Extensions.Extension"),n=t.getArrayFromObjectPath(this.wrappers,"VAST.Ad.Wrapper.Extensions.Extension"),r=e.concat(n);return r.map(function(e){return i.createVastExtension(e)})},o}),define("vast-parser/vastChainer",["jquery","./vast-parser","q","./vastErrorCodes","./vastError","./model/vastResponse"],function(e,t,n,r,i,o){function a(e){var t=new o;return l(t,e)}function s(e,t){p.on(e,t)}function d(e){var t=window.document.createElement("a");return t.href=e,t.hostname}function l(o,a){var s,f,A=a.url,m=n.defer(),h=c++;return a.extraParams&&a.extraParams.length>0&&(A+=-1!==a.url.indexOf("?")?"&"+a.extraParams:"?"+a.extraParams),f={url:A,headers:a.headers||{},dataType:"xml"},a.corsCookieDomains instanceof Array&&-1!==a.corsCookieDomains.indexOf(d(A))&&(f.xhrFields={withCredentials:!0}),f.timeout=u,f.success=function(n,s,d){var u,c,f,v;return v=e.Event("requestEnd",{requestNumber:h,uri:A,vastResponse:o}),o.addRawResponse({requestNumber:h,uri:A,response:d.responseText,headers:d.getAllResponseHeaders().trim()}),n?(u=t.parse(n),u.VAST.Error?(p.trigger(v),void m.reject(new i(r.NO_ADS.code,o,"VAST request returned no ads and contains error tag"))):u.VAST.Ad?void(u.VAST&&u.VAST.Ad&&u.VAST.Ad.InLine?(o.inline=u,p.trigger(v),m.resolve(o)):(o.wrappers.push(u),p.trigger(v),c=u.VAST&&u.VAST.Ad&&u.VAST.Ad.Wrapper&&u.VAST.Ad.Wrapper.VASTAdTagURI.nodeValue,f={url:c,extraParams:a.extraParams,corsCookieDomains:a.corsCookieDomains},l(o,f).then(m.resolve).fail(m.reject).done())):(p.trigger(v),void m.reject(new i(r.NO_ADS.code,o,"VAST request returned no ads")))):(p.trigger(v),void m.reject(new i(r.XML_PARSE_ERROR.code,o)))},f.error=function(t,n){var a,s,d;200!==t.status||t.responseXML?(a=r.WRAPPER_URI_TIMEOUT.code,d=t.statusText):(a=r.XML_PARSE_ERROR.code,d=r.XML_PARSE_ERROR.message),s=e.Event("requestEnd",{requestNumber:h,uri:A,vastResponse:o,error:{status:t.status,statusText:d}}),o.addRawResponse({requestNumber:h,uri:A,response:t.responseText,headers:t.getAllResponseHeaders().trim()}),p.trigger(s),m.reject(new i(a,o,"VAST Request Failed ("+n+" "+t.status+")"))},s=e.Event("requestStart",{requestNumber:h,uri:A,vastResponse:o}),p.trigger(s),e.ajax(f),m.promise}var u=1e4,c=0,p=e({});return{getVastChain:a,addEventListener:s,on:s}}),define("vast-parser/vastAdManager",["./vastChainer"],function(e){return{requestVastChain:e.getVastChain,addEventListener:e.addEventListener}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("campaignConfig/campaignMedia",[],function(){var e=_temporalUndefined;return e=function(){function e(t){_classCallCheck(this,_temporalAssertDefined(e,"CampaignMedia",_temporalUndefined)&&e),this._linearCreative=t}return _createClass(_temporalAssertDefined(e,"CampaignMedia",_temporalUndefined)&&e,[{key:"getFlashVPAIDMediaFiles",value:function(){return this._linearCreative.getFlashVPAIDMediaFiles()}},{key:"getJavascriptVPAIDMediaFiles",value:function(){return this._linearCreative.getJavascriptVPAIDMediaFiles()}},{key:"getMp4MediaFiles",value:function(){return this._linearCreative.getMp4MediaFiles()}},{key:"hasFlashVPAID",value:function(){return this._linearCreative.hasFlashVPAID()}},{key:"hasJavascriptVPAID",value:function(){return this._linearCreative.hasJavascriptVPAID()}},{key:"hasMp4",value:function(){return this._linearCreative.hasMp4()}}]),_temporalAssertDefined(e,"CampaignMedia",_temporalUndefined)&&e}(),{CampaignMedia:_temporalAssertDefined(e,"CampaignMedia",_temporalUndefined)&&e}}),define("vast/vastTransformer",["util/trackingEvent","util/enable","campaignConfig/campaignMedia"],function(e,t,n){function r(e){var t,n,r=e.inline.VAST.Ad.InLine;return n=r.Creatives.Creative.filter(function(e){return!!e.NonLinearAds})[0],t={skid:null,apid:null,adParameters:void 0,items:{title:{text:r.AdTitle.nodeValue},description:{text:r.Description&&r.Description.nodeValue||""},disclosureMessage:{text:"Promoted Video"},thumbnail:{attributes:{src:n?n.NonLinearAds.NonLinear.StaticResource.nodeValue:"",alt:r.AdTitle.nodeValue,title:r.AdTitle.nodeValue}}},clickThroughs:{title:{},thumbnail:{},disclosureMessage:{},expandedVideo:{}},tracking:{},sharing:{}},i(t,e),d(t,e),s(t,e),t}function i(e,t){var r,i=t.getLinearCreative();if(i){var o=i.getMp4MediaFiles();if(o.length>0){var a=o.reduce(function(e,t){return e.bitrate>t.bitrate?t:e});e.video=a}else e.video=i.getMediaFiles()[0];e.media=new n.CampaignMedia(i),r=i.getClickThrough(),e.clickThroughs.expandedVideo.url=r,e.clickThroughs.thumbnail.url=r,e.clickThroughs.title.url=r,e.clickThroughs.disclosureMessage.url=r,e.adParameters=i.getAdParameters()}}function o(e,t){return t&&t.Linear&&t.Linear.VideoClicks&&t.Linear.VideoClicks.ClickTracking?a(t.Linear.VideoClicks.ClickTracking).filter(function(t){return t["@id"]===e||!t["@id"]}).map(function(e){return e.nodeValue}):[]}function a(e){return void 0===e||null===e||"number"==typeof e&&0!==e&&!e?[]:Array.isArray(e)?e:[e]}function s(e,n){n.wrappers.forEach(function(t){var n=t.VAST.Ad.Wrapper;n.Extensions&&n.Extensions.Extension&&a(n.Extensions.Extension).filter(function(e){return!!e.VASTOverrides}).forEach(function(t){if(t.VASTOverrides.Ignore){var n=a(t.VASTOverrides.Ignore);n.forEach(function(t){"AdTitle"===t["@elementName"]?e.items.title.text="Click for more":"Description"===t["@elementName"]&&(e.items.description.text="")})}})}),t.requiresStarAllianceOverride(e)&&(e.items.title.text="A maneira que o Brasil se conecta com o mundo")}function d(t,n){function r(e){e&&e.Linear&&e.Linear.TrackingEvents&&e.Linear.TrackingEvents.Tracking&&a(e.Linear.TrackingEvents.Tracking).forEach(function(e){var n=e["@event"];"undefined"==typeof t.tracking[n]&&(t.tracking[n]=[]),t.tracking[n]=t.tracking[n].concat(e.nodeValue)})}var i=n.inline.VAST.Ad.InLine,s=i.Creatives.Creative.filter(function(e){return!!e.Linear});for(var d in e)t.tracking[e[d]]=[];t.tracking[e.IMP]=n.getImpressions(),n.wrappers.forEach(function(n){var r,i,s=n.VAST.Ad.Wrapper,d=s.Creatives&&s.Creatives.Creative||[];r=d.filter(function(e){return!!e.Linear}),i=d.filter(function(e){return e.NonLinearAds&&e.NonLinearAds.NonLinear}),i.forEach(function(n){a(n.NonLinearAds.NonLinear.NonLinearClickTracking).forEach(function(n){t.tracking[e.CLICK]=t.tracking[e.CLICK].concat(n.nodeValue)})}),d.filter(function(e){return e.Linear&&e.Linear.TrackingEvents}).forEach(function(e){a(e.Linear.TrackingEvents.Tracking).forEach(function(e){var n=e["@event"];"undefined"==typeof t.tracking[n]&&(t.tracking[n]=[]),t.tracking[n]=t.tracking[n].concat(e.nodeValue)})}),r.forEach(function(n){t.tracking[e.VIDEO_CLICK]=t.tracking[e.VIDEO_CLICK].concat(o(e.VIDEO_CLICK,n)),t.tracking[e.POST_VIDEO_CLICK]=t.tracking[e.POST_VIDEO_CLICK].concat(o(e.POST_VIDEO_CLICK,n))}),s.Extensions&&s.Extensions.Extension&&(a(s.Extensions.Extension).filter(function(e){return e.Property}).forEach(function(e){var n=e.Property;n.forEach(function(e){t[e["@id"]]=e.nodeValue})}),a(s.Extensions.Extension).filter(function(e){return e.CustomTrackingEvents&&e.CustomTrackingEvents.CustomTracking}).forEach(function(e){a(e.CustomTrackingEvents.CustomTracking).forEach(function(e){var n=e["@event"];"undefined"==typeof t.tracking[n]&&(t.tracking[n]=[]),t.tracking[n]=t.tracking[n].concat(e.nodeValue)})}))}),i.Extensions&&i.Extensions.Extension&&(a(i.Extensions.Extension).forEach(function(e){e.SharingUrl&&(t.sharing.sharingUrl=e.SharingUrl.nodeValue),e.DisclosureMessage&&(t.items.disclosureMessage.text=e.DisclosureMessage.nodeValue)}),a(i.Extensions.Extension).filter(function(e){return e.CustomTrackingEvents&&e.CustomTrackingEvents.CustomTracking}).forEach(function(e){a(e.CustomTrackingEvents.CustomTracking).forEach(function(e){var n=e["@event"];"undefined"==typeof t.tracking[n]&&(t.tracking[n]=[]),t.tracking[n]=t.tracking[n].concat(e.nodeValue)})})),s.forEach(function(n){t.tracking[e.VIDEO_CLICK]=t.tracking[e.VIDEO_CLICK].concat(o(e.VIDEO_CLICK,n)),t.tracking[e.POST_VIDEO_CLICK]=t.tracking[e.POST_VIDEO_CLICK].concat(o(e.POST_VIDEO_CLICK,n)),r(n)})}return{transform:r,_overrideVASTElements:s}}),define("audienceTargetingTransformer",["q","util/trackingEvent"],function(e,t){function n(n){var r=e.defer();return"undefined"==typeof n?(r.reject({type:t.error.AUDIENCE_TARGETING_REQUEST_FAILED,message:"Audience Targeting Transformer Data object is undefined"}),r.promise):n.segments?(n.quantcast={segments:n.segments},delete n.segments,r.resolve(n),r.promise):(r.reject({type:t.error.AUDIENCE_TARGETING_REQUEST_FAILED,message:'Audience Targeting Transformer Data missing "segments" object'}),r.promise)}return{transform:n}}),define("util/url",["util/publisherWindow"],function(e){function t(t){var n,r,i;return n=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+n+"=([^&#]*)"),i=r.exec(e.location.search),i&&2===i.length?decodeURIComponent(i[1]):""}return{getQueryParameterValue:t}}),define("vast/vastHelper",[],function(){function e(e){var t={},n=["apid","skid"];return e.getExtensions().forEach(function(e){var r=e.getDetailsByPath("Property");r.forEach(function(e){-1!==n.indexOf(e["@id"])&&(t[e["@id"]]=e.nodeValue)})}),t}return{extractApidSkidFromVastResponse:e}}),define("vast/vastErrorMapper",["vast-parser/vastErrorCodes","util/trackingEvent","vast/vastHelper"],function(e,t,n){function r(e){var n,r,a=o[e.code];return a=a||t.error.ERROR,r=i(e),n={type:a,message:e.message},r&&(n.errorParams=r),n}function i(e){var t=n.extractApidSkidFromVastResponse(e.vastResponse);return 0===Object.keys(t).length&&(t=void 0),t}var o={};return o[e.NO_ADS.code]=t.error.NO_ADS,o[e.GENERAL_WRAPPER_ERROR.code]=t.error.NO_ADS,o[e.VAST_SCHEMA_ERROR.code]=t.error.AD_REQUEST_FAILED,o[e.XML_PARSE_ERROR.code]=t.error.AD_REQUEST_FAILED,o[e.WRAPPER_URI_TIMEOUT.code]=t.error.AD_REQUEST_FAILED,{getUnrulyError:r}});var _temporalUndefined={};define("util/dom/videoSize",["jquery","util/enable"],function(e,t){function n(e){return"number"==typeof e&&e>0}return{getForPlacement:function(r){var i=_temporalUndefined,o=_temporalUndefined,a=_temporalUndefined,s=_temporalUndefined;return r.config.format.inFeed&&t.reportSize?(i=r.config.format.inFeed,o=e((_temporalAssertDefined(i,"selectors",_temporalUndefined)&&i).basePlacement.selector).find((_temporalAssertDefined(i,"selectors",_temporalUndefined)&&i).thumbnail.selectors[0]),a=(_temporalAssertDefined(o,"$targetEl",_temporalUndefined)&&o).width(),s=(_temporalAssertDefined(o,"$targetEl",_temporalUndefined)&&o).height(),n(_temporalAssertDefined(a,"width",_temporalUndefined)&&a)&&n(_temporalAssertDefined(s,"height",_temporalUndefined)&&s)?{width:_temporalAssertDefined(a,"width",_temporalUndefined)&&a,height:_temporalAssertDefined(s,"height",_temporalUndefined)&&s}:null):null}}});var _temporalUndefined={};define("campaignConfigController",["jquery","util/enable","vast-parser/vastAdManager","vast/vastTransformer","session/sessionInfo","util/trackingEvent","audienceTargeting","audienceTargetingTransformer","tracking","q","util/url","vast/vastErrorMapper","util/stopwatch","util/eventBus","vast/vastHelper","util/dom/videoSize"],function(e,t,n,r,i,o,a,s,d,l,u,c,p,f,A,m){function h(e){var t=i.getSiteInfo();return t.user=t.user||{},t.user.profile=e,t}function v(e){var t={};e&&e.getRawResponses?t.raw=e.getRawResponses():t.raw="raw response not recorded",f.dispatchEvent({type:"logContext"},[t])}function g(e){var t=e.config&&e.config.format&&e.config.format.inArticle;return t?"//targeting.unrulymedia.com/in_article?uuid=":"//targeting.unrulymedia.com/pp?uuid="}function y(e,t){var n=_temporalUndefined,r=_temporalUndefined,i=_temporalUndefined,o=_temporalUndefined,a=_temporalUndefined,s=_temporalUndefined;return n=g(e),r=e.config.targetingUUID,i="&",o=encodeURIComponent(JSON.stringify(t)),a=m.getForPlacement(e),s=_temporalAssertDefined(a,"sizes",_temporalUndefined)&&a?"&video_width="+(_temporalAssertDefined(a,"sizes",_temporalUndefined)&&a).width+"&video_height="+(_temporalAssertDefined(a,"sizes",_temporalUndefined)&&a).height:"",""+(_temporalAssertDefined(n,"vastEndPointURLPrefix",_temporalUndefined)&&n)+(_temporalAssertDefined(r,"targetingUUID",_temporalUndefined)&&r)+(_temporalAssertDefined(i,"VAST_ENDPOINT_AFTER_UUID",_temporalUndefined)&&i)+"tj="+(_temporalAssertDefined(o,"tj",_temporalUndefined)&&o)+(_temporalAssertDefined(s,"sizesString",_temporalUndefined)&&s)}function _(e){function p(t){var n=y(e,t);return{url:n,corsCookieDomains:["targeting.unrulymedia.com"]}}function f(e){var t=u.getQueryParameterValue("unruly_override");return t&&(e.headers=e.headers||{},e.headers["X-Unruly-Override"]=t),e}function A(e){return d.trackActivate(o.ADCALL,{tj:JSON.stringify(e)}),e}function m(e){return d.trackActivate(o.CREATIVE_RECEIVED,{apid:e.apid,skid:e.skid}),e}var g;return e&&e.config&&e.config.targetingUUID?"undefined"==typeof JSON?l.reject({type:o.error.UNSUPPORTED_BROWSER,message:"JSON is not defined"}):(g=t.audienceTargeting?a.request().then(s.transform).then(h).fail(function(e){return d.trackActivate(o.error.AUDIENCE_TARGETING_REQUEST_FAILED,{message:e.message}),i.getSiteInfo()}):l.fcall(function(){return i.getSiteInfo()}),g.then(A).then(p).then(f).then(n.requestVastChain).fail(function(e){throw v(e.vastResponse),c.getUnrulyError(e)}).then(function(e){return v(e),r.transform(e)}).then(m)):l.reject({type:o.error.SKIN_SETUP_FAILED,message:"no targeting uuid in skin"})}return function(){n.addEventListener("requestStart",function(e){p.start("vast_"+e.requestNumber)}),n.addEventListener("requestEnd",function(e){var t;p.stop("vast_"+e.requestNumber),t=A.extractApidSkidFromVastResponse(e.vastResponse),t.vast_url=e.uri,d.trackActivate(o.prefixed.VAST_REQUEST_X+e.requestNumber,t)})}(),{getCampaignConfig:_}}),define("actions/clickthroughAction",["tracking","util/browser","util/enable"],function(e,t,n){function r(r,i){e.trackSplunk("clickAction",{name:r}),n.videoClickthroughCurrentTab?t.openInCurrentTab(i):t.openWindow(i)}function i(){}return i.prototype.init=function(){},i.prototype.populate=function(){},i.prototype.trigger=function(e,t){r(e,t.clickThroughs[e].url)},i}),define("actions/mobileLightboxAction",["jquery","tracking","util/browser","util/trackingEvent","util/eventBus","util/enable"],function(e,t,n,r,i,o){function a(e){if(!n.isSupportedMobileDevice())throw new Error("mobile lightbox is not supported on this device");this.nativeAd=e}function s(){var t;t=e("<div>"),t.css({position:"absolute",opacity:0,"-khtml-opacity":0,"-moz-opacity":0,left:"-1000px"}),this.$video=e("<video>"),this.$video.addClass("unruly_native_video"),this.$video.attr("style","width: 1px !important; height: 2px !important;"),t.append(this.$video),this.nativeAd.append(t),this.handleFullscreen(this.$video)}function d(){var e=this,t=!1,r=this.$video[0];this.$video.on("webkitfullscreenchange mozfullscreenchange fullscreenchange webkitendfullscreen webkitenterfullscreen webkitbeginfullscreen",function(){t=!t,t||(r.pause(),i.dispatchEvent({type:"expandedvideo.close",target:e}))}),this.$video.on("ended",function(){r.pause(),e.rewindVideo(),n.exitFullscreen(r)})}function l(){this.$video[0].currentTime&&(this.$video[0].currentTime=0)}function u(){var e=this.$video[0],n=e.duration/4,i=Math.floor(e.currentTime/n);i>m&&h>i&&t.trackThirdParty(A[i-1]),e.currentTime>=3&&t.trackThirdParty(r.THREE),e.currentTime>=10&&t.trackThirdParty(r.TEN),e.currentTime>=30&&t.trackThirdParty(r.THIRTY)}function c(e){if(!e.video||!e.video.url)throw new Error("campaign is missing video");o.quartileTracking&&(this.$video.on("timeupdate",this.checkQuartiles.bind(this)),this.$video.on("ended",p)),this.$video.attr({src:e.video.url})}function p(){t.trackThirdParty(r.COMPLETE)}function f(e){var o=this.$video[0];t.trackThirdParty(r.LIGHTBOX_PLAY,{name:e}),this.rewindVideo(),o.play(),n.requestFullscreen(o),i.dispatchEvent({type:"expandedvideo.open",target:this})}var A=[r.FIRST_QUARTILE,r.MIDPOINT,r.THIRD_QUARTILE],m=0,h=4;return a.prototype.init=s,a.prototype.populate=c,a.prototype.trigger=f,a.prototype.handleFullscreen=d,a.prototype.rewindVideo=l,a.prototype.checkQuartiles=u,a}),define("leo/leoPlayer",["jquery","unrulyAdCore/util/window","tracking","util/trackingEvent","util/publisherWindow","util/eventBus","util/enable","util/browser"],function(e,t,n,r,i,o,a,s){function d(t,n,r){var i,a;_=n,y=r,i={src:"about:blank",title:"",role:"presentation",name:"nativeLeoPlayerIframe",id:"nativeLeoPlayerIframe",scrolling:"no",frameborder:0},s.isSupportedFirefox()&&(i.src='javascript:"";'),a={width:"100%",height:"100%",border:0},v=e("<iframe>"),v.attr(i),v.setImportantStyle(a),v.load(function(){u(),A(),o.addEventListener("expandedvideo.close",l)}),t.append(v),g=v[0]}function l(){o.addEventListener("expandedvideo.open",A),o.removeEventListener("expandedvideo.close",l)}function u(){var e,n;try{e=g.contentWindow.document}catch(r){n=t.document.domain,g.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',e=g.contentWindow.document,e.domain=n}return e}function c(t){return e(t,g.contentWindow.document)}function p(){var e=g.contentWindow.document.createElement("link");return e.setAttribute("href",i.location.protocol+"//video.unrulymedia.com/native/native_leo-v1.0.372-5-g37762c6.css"),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("media","all"),e.setAttribute("rel","stylesheet"),g.contentWindow.document.head.appendChild(e),e}function f(){var e=g.contentWindow.document.createElement("script");return e.src=i.location.protocol+"//video.unrulymedia.com/native/native_leo-v1.0.372-5-g37762c6.js",g.contentWindow.document.body.appendChild(e),e}function A(){var t,n,r=c("body");g.contentWindow.$=c,p(),n=f(),e(n).bind("load",m),t=c("<div>").attr({id:"player_wrapper"}),r.addClass("no-sharebar").append(t).css({margin:0,padding:0})}function m(){var e;g.contentWindow.unruly.init(_),e=g.contentWindow.unruly.eventBus,h(e)}function h(e){e.addListener("play",function(){n.trackThirdParty(r.LIGHTBOX_PLAY,{name:y})}),e.addListener("unMute",function(){o.dispatchEvent("unmute")}),e.addListener("mute",function(){o.dispatchEvent("mute")}),a.quartileTracking&&(e.addListener("q2",function(){n.trackThirdParty(r.FIRST_QUARTILE)}),e.addListener("q3",function(){n.trackThirdParty(r.MIDPOINT)}),e.addListener("q4",function(){n.trackThirdParty(r.THIRD_QUARTILE)}),e.addListener("complete",function(){n.trackThirdParty(r.COMPLETE),n.trackThirdParty(r.COMPLETED_VIEW)}),e.addListener("three",function(){n.trackThirdParty(r.THREE)}),e.addListener("ten",function(){n.trackThirdParty(r.TEN)}),e.addListener("thirty",function(){n.trackThirdParty(r.THIRTY),n.trackThirdParty(r.COMPLETED_VIEW)}))}var v,g,y,_;return{create:d,_setupTracking:h}}),define("leo/campaignConfigTransformer",[],function(){function e(e){return{campaign:{allowsHttps:!0,contents:[{alternateVideoSite:"html5",videos:{mp4:{high:{url:e.video.url}}}}]}}}return{transformToLeoConfig:e}}),define("util/friendlyIframe",["jquery","unrulyAdCore/util/window"],function(e,t){function n(t,n){return i=e("<iframe>").attr({src:"about:blank",title:"",role:"presentation",name:t,id:t,scrolling:"no",frameborder:0}).setImportantStyle({border:0}),o=i[0],i.on("load",function(){r(),n(i)}),i}function r(){var e,n;try{e=o.contentWindow.document}catch(r){n=t.document.domain,o.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',e=o.contentWindow.document,e.domain=n}return e}var i,o;return{create:n}}),define("util/touchUtils",["jquery"],function(e){function t(){s>1&&(s=0),2>s?s+=1:s=2}function n(){s>0?s-=1:s=0}function r(e){i()||(e.stopPropagation(),e.preventDefault())}function i(){return 2===s}function o(i){e(i.body).off("touchstart",t),e(i.body).off("touchend",n),e(i.body).off("touchmove",r)}function a(i){e(i.body).on("touchstart",t),e(i.body).on("touchend",n),e(i.body).on("touchmove",r)}var s=0;return{disableScroll:a,enableScroll:o}}),define("util/lightbox",["jquery","util/eventDispatcher","util/friendlyIframe","util/publisherWindow","util/touchUtils"],function(e,t,n,r,i){function o(r){var i=this;r="object"==typeof r?r:{},r.background=r.background||"rgba(0,0,0,0.8)",r.name=r.name||"unrulyNativeLightbox_NoName",this._body=e("body"),this.element=e("<div>"),this._boundClose=this.close.bind(this),this.dispatcher=new t({}),this.$iframe=n.create(r.name,function(){e(i.$iframe[0].contentWindow.document.body).append(i.element)}),this.$iframe.addClass("unruly_native_lightbox"),this.$iframe.setImportantStyle({position:"fixed",display:"block",top:"0",left:"0",background:r.background,overflow:"auto","z-index":"2147483647","box-sizing":"content-box",width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%",position:"absolute",top:0,left:0})}return o.prototype.append=function(e){this.element.append(e)},o.prototype._disablePageScrolling=function(){this._oldBodyStyle=this._body.attr("style"),this._body.setImportantStyle({overflow:"hidden"}),i.disableScroll(this.$iframe[0].contentWindow.document)},o.prototype._enablePageScrolling=function(){this._body.attr("style",this._oldBodyStyle||""),i.enableScroll(this.$iframe[0].contentWindow.document)},o.prototype.open=function(){var t=e(r).scrollTop();this.element.on("click",this._boundClose),this._body.append(this.$iframe),this._disablePageScrolling(),e(r).scrollTop(t+1),this.dispatcher.dispatchEvent("open")},o.prototype.close=function(){this.element.off("click",this._boundClose),this._enablePageScrolling(),this.$iframe.detach(),this.dispatcher.dispatchEvent("close")},o});var _temporalUndefined={};define("actions/desktopLightboxAction",["jquery","util/publisherWindow","util/enable","leo/leoPlayer","leo/campaignConfigTransformer","util/lightbox","util/eventBus"],function(e,t,n,r,i,o,a){function s(){this.leoLoaded=!1}function d(){var n={},r={},i=.5625;return n.width=e(t.top).width(),n.height=e(t.top).height(),
r.width=Math.ceil(.8*n.width),r.height=Math.ceil(r.width*i),r.height>=n.height&&(r.height=Math.ceil(.9*n.height),r.width=Math.ceil(1.8*r.height)),r}function l(){var n,r,i=this,s=d();this.lightbox=new o,this.lightbox.dispatcher.addEventListener("open",function(){a.dispatchEvent({type:"expandedvideo.open",target:i})}),this.lightbox.dispatcher.addEventListener("close",function(){a.dispatchEvent({type:"expandedvideo.close",target:i})}),this.iframeContainer=e("<div>"),this.iframeContainer.addClass("unruly_native_iframe_container"),n=e("<div>"),n.addClass("unruly_native_iframe_underlay"),n.setImportantStyle({position:"absolute",width:"100%",height:"100%",top:"0",left:"0","z-index":"-1","-moz-box-shadow":"0px 0px 70px #000","-webkit-box-shadow":"0px 0px 70px #000","box-shadow":"0px 0px 70px #000","box-sizing":"content-box"}),this.iframeContainer.append(n),r=this.createCloseButton(),this.iframeContainer.append(r),this.iframeContainer.setImportantStyle({position:"absolute",margin:"auto",width:s.width+"px",height:s.height+"px","min-height":2*(_temporalAssertDefined(h,"BORDER_SIZE",_temporalUndefined)&&h)+(_temporalAssertDefined(m,"MIN_HEIGHT",_temporalUndefined)&&m)+"px","min-width":2*(_temporalAssertDefined(h,"BORDER_SIZE",_temporalUndefined)&&h)+(_temporalAssertDefined(A,"MIN_WIDTH",_temporalUndefined)&&A)+"px",background:"#000000",border:(_temporalAssertDefined(h,"BORDER_SIZE",_temporalUndefined)&&h)+"px solid black","box-sizing":"content-box",top:0,right:0,bottom:0,left:0}),e(t).on("resize orientationchange",function(){var e=i.getLightboxDimensions();i.iframeContainer.setImportantStyle({width:e.width+"px",height:e.height+"px"})})}function u(){var t=e("<a>");return t.addClass("unruly_native_close"),t.setImportantStyle({display:"block",width:"30px",height:"30px",position:"absolute",top:"-25px",right:"-25px",cursor:"pointer","text-decoration":"none",background:'transparent url("//video.unrulymedia.com/native/closebox.png") no-repeat center center'}),t.on("click",this.lightbox.close.bind(this.lightbox)),t}function c(e,t){if(!this.leoLoaded){var o=_temporalUndefined;if(o=(_temporalAssertDefined(f,"LEO_HTML_URL",_temporalUndefined)&&f)+"#skid="+t.skid+"&apid="+t.apid+"&app=native",n.leoPlayerModule){var a=_temporalUndefined;a=i.transformToLeoConfig(t),r.create(this.iframeContainer,_temporalAssertDefined(a,"leoConfig",_temporalUndefined)&&a,e)}else{var s=_temporalUndefined;s=p(_temporalAssertDefined(o,"leoIframeSrc",_temporalUndefined)&&o),this.iframeContainer.append(_temporalAssertDefined(s,"leoIframe",_temporalUndefined)&&s)}this.lightbox.append(this.iframeContainer),this.leoLoaded=!0}this.lightbox.open()}function p(t){var n=e("<iframe>");return n.addClass("unruly_native_iframe"),n.attr({src:t,frameborder:"0",scrolling:"no"}),n.setImportantStyle({width:"100%",height:"100%","min-width":(_temporalAssertDefined(A,"MIN_WIDTH",_temporalUndefined)&&A)+"px","min-height":(_temporalAssertDefined(m,"MIN_HEIGHT",_temporalUndefined)&&m)+"px",position:"absolute",top:0,left:0}),n.on("click",function(e){e.stopPropagation()}),n}var f=_temporalUndefined,A=_temporalUndefined,m=_temporalUndefined,h=_temporalUndefined;return f="http://video.unrulymedia.com/leo-marmalade/leo.html",A=450,m=250,h=10,s.prototype.init=l,s.prototype.populate=function(){},s.prototype.trigger=c,s.prototype.createCloseButton=u,s.prototype.getLightboxDimensions=d,s}),define("components/clickThroughButton",["jquery","util/browser","tracking","util/trackingEvent"],function(e,t,n,r){function i(i,o){var a,s;return a=e("<a>Find out more!</a>").addClass("unruly_clickthrough_button").attr("href","javascript:void(0);"),a.on("click",function(e){e.stopPropagation(),t.openWindow(o.clickThroughs.expandedVideo.url),n.trackSplunk(r.POST_VIDEO_CLICK),n.trackThirdParty(r.POST_VIDEO_CLICK)}),s=e("<div>").addClass("row text-row").append(a),i.append(s),a}return{create:i}}),define("actions/sharingLightboxAction",["util/lightbox","util/eventBus","jquery","util/enable","util/publisherWindow","util/browser","tracking","util/trackingEvent","components/clickThroughButton"],function(e,t,n,r,i,o,a,s,d){function l(){return n("<style>@font-face {font-family: 'sociconregular';src: url('data:application/octet-stream;base64,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') format('truetype');font-weight: normal;font-style: normal;}.close-button {position: absolute;top: 0;right: 0;margin: 30px;width: 10%;height: auto;}@media (orientation: landscape) {.close-button {width: auto;height: 10%;}}.container {position: absolute;top: 50%;left: 50%;}.unruly_sharing_icon {font-family: 'sociconregular';color: white;font-size: 12%;}.unruly_sharing_button {text-decoration:none;display:inline-block;width: 20%;height: 20%;margin: 3%;line-height: 20%;overflow:hidden;}.unruly_sharing_button_facebook {position:relative;line-height:12%;vertical-align:bottom;}.unruly_sharing_button_facebook .unruly_sharing_icon {position:absolute;bottom:0;right:5%;}.row {text-align:center;}.text-row {color: #1591aa;font-family: Helvetica, Arial, sans-serif;font-weight: bold;font-size: 8%;display:block;padding:3%;}.text-row:first-of-type {margin-top:3%}.text-row.big-row {margin-top:14%;}.unruly_clickthrough_button {display: block;background: #0bbbef;width: 80%;margin: 0 5%;padding: 3% 5%;color: #ffffff;text-decoration: none;}</style>")}function u(e){var t=n("<img>").addClass("close-button").attr("src",b+"/in-feed-close-icon-128x128.png");return t.on("click",function(t){t.stopPropagation(),e.close()}),t}function c(e,t){var r=n("<div>").addClass("row text-row"),i=n("<span>Share the Video!</span>");v(t)||r.addClass("big-row"),r.append(i),e.append(r)}function p(e,t){var r,i,o,a,s=f(t),d=0;for(i in s)s.hasOwnProperty(i)&&(o=s[i],r=A(o,i),D[i]=r,d%3===0&&(a=n("<div>").addClass("row"),e.append(a)),a.append(r),d++)}function f(e){var t,n,r={facebook:{icon:"b",url:"http://www.facebook.com/sharer.php?u=%{url}",color:"#3b5998",eventName:s.share.FACEBOOK},twitter:{icon:"a",url:"http://twitter.com/intent/tweet?text=%{title}%20-%20%{url}",color:"#00aced",eventName:s.share.TWITTER},pinterest:{icon:"d",url:"http://pinterest.com/pin/create/button/?url=%{url}&description=%{title}&media=%{thumbnail}",color:"#cc2127",eventName:s.share.PINTEREST},linkedin:{icon:"j",url:"http://www.linkedin.com/shareArticle?mini=true&url=%{url}&title=%{title}&summary=&source=",color:"#0977b5",eventName:s.share.LINKEDIN},googleplus:{icon:"c",url:"https://plus.google.com/share?url=%{url}",color:"#cc3732",eventName:s.share.GOOGLEPLUS}};for(t in r)r.hasOwnProperty(t)&&(n=r[t],n.url=n.url.replace("%{title}",encodeURIComponent(e.items.title.text)).replace("%{thumbnail}",encodeURIComponent(e.items.thumbnail.attributes.src)).replace("%{url}",encodeURIComponent(e.sharing.sharingUrl)));return r}function A(e,t){var r=n('<a href="javascript:void(0);"></a>').addClass("unruly_sharing_button").addClass("unruly_sharing_button_"+t).css({backgroundColor:e.color}),i=n("<span>"+e.icon+"</span>");return i.addClass("unruly_sharing_icon"),r.append(i),r.on("click",function(t){t.stopPropagation(),o.openWindow(e.url),a.trackThirdParty(e.eventName)}),r}function m(e){var t=i.document.documentElement.clientWidth,n=i.document.documentElement.clientHeight,r=Math.min(t,n),o=Math.ceil(r/2);e.css({width:r+"px",height:r+"px","margin-top":-o+"px","margin-left":-o+"px","font-size":r+"px"})}function h(e,t){v(t)&&d.create(e,t)}function v(e){return r.mobileSharingLightboxClickThrough&&e.clickThroughs.expandedVideo&&e.clickThroughs.expandedVideo.url}function g(r){var o=new e({background:"rgba(255,255,255,0.9)"}),a=n("<div>").addClass("container");return c(a,r),p(a,r),h(a,r),o.append(l()),o.append(u(o)),o.append(a),o.dispatcher.addEventListener("open",function(){m(a),n(i).on("resize",m.bind(void 0,a)),t.dispatchEvent({type:"sharinglightbox.open"})}),o.dispatcher.addEventListener("close",function(){n(i).off("resize",m.bind(void 0,a)),t.dispatchEvent({type:"sharinglightbox.close"})}),o}function y(e,t){this.campaignConfig=t}function _(){var e=g(this.campaignConfig);e.open()}var E=i.location.protocol,b=E+"//video.unrulymedia.com/native",D={};return y.prototype.init=function(){},y.prototype.populate=function(){},y.prototype.trigger=_,y.prototype.createSharingPlatforms=f,y.prototype.sharingButtonElements=D,y}),define("actions/nullAction",[],function(){function e(){}return e.prototype.init=function(){},e.prototype.populate=function(){},e.prototype.trigger=function(){},e}),define("actions/actionFactory",["util/browser","util/enable","actions/clickthroughAction","actions/mobileLightboxAction","actions/desktopLightboxAction","actions/sharingLightboxAction","actions/nullAction"],function(e,t,n,r,i,o,a){function s(o,s){var d=t.supportsVPAID(s);return t.videoClickthroughNewTab||t.videoClickthroughCurrentTab?new n(o):t.mobileLightbox&&e.isMobile()?new r(o):!t.desktopLightbox||d||e.isMobile()?d?new a(o):new n(o):new i(o)}function d(n,r){return t.mobileSharingLightbox&&e.isMobile()&&r.sharing.sharingUrl?new o(n,r):new a(n,r)}return{createClickAction:s,createExpandedVideoCloseAction:d}}),define("adEventHandler",["jquery","tracking","actions/actionFactory","util/trackingEvent"],function(e,t,n,r){function i(){this.clickThroughElements={}}function o(e,t,i,o,s){var d,l,u;try{this.action=n.createClickAction(e,i)}catch(c){return void o(c.message,r.error.CLICK_ACTION_CREATION_FAILURE)}for(u in t.clickThroughs){var p=t.clickThroughs[u];if(a(u)&&!p)return void o(u+" clickthrough not defined",r.error.SKIN_SETUP_FAILED);if(l=p&&p.selectors,a(u)||l&&!(l.length<1)){if(d=e.find(l.join(",")),0===d.length)return void o(u+" clickthrough not found",r.error.NO_MATCHING_PLACEMENT);d.css("cursor","pointer"),this.clickThroughElements[u]=d}}this.action.init(),s()}function a(e){var t=["title"];return-1!==t.indexOf(e)}function s(e,t,n){function i(t,n){n.stopPropagation(),this.action.trigger(t,e)}var o,a;for(a in this.clickThroughElements)o=this.clickThroughElements[a],o.on("click",i.bind(this,a));try{this.action.populate(e)}catch(s){return void t(s.message,r.error.NO_MATCHING_PLACEMENT)}n()}return i.prototype.setupClickListeners=o,i.prototype.populate=s,i}),define("viewability/viewability",["jquery","util/publisherWindow","util/eventDispatcher","util/eventBus"],function(e,t,n,r){function i(e){this.elementToWatch=e.elementToWatch,this.viewablePercentage=e.viewablePercentage,this.dispatcher=new n(this),this.viewable=null,this._lightboxOpen=!1,this._boundCheckViewabilty=this.checkViewability.bind(this),this._pollId=setInterval(this._boundCheckViewabilty,100),this._setLightboxStateOpen=this.setLightboxStateOpen.bind(this),r.addEventListener("expandedvideo.open",this._setLightboxStateOpen),this._setLightboxStateClose=this.setLightboxStateClose.bind(this),r.addEventListener("expandedvideo.close",this._setLightboxStateClose)}function o(e,t){var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),r=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n*r}var a=e(t);return i.prototype.setLightboxStateOpen=function(){this._lightboxOpen=!0},i.prototype.setLightboxStateClose=function(){this._lightboxOpen=!1},i.prototype.destroy=function(){clearInterval(this._pollId),this._pollId=void 0,r.removeEventListener("expandedvideo.open",this._setLightboxStateOpen),r.removeEventListener("expandedvideo.close",this._setLightboxStateClose)},i.prototype.checkViewability=function(){var e=this.isViewable(this.elementToWatch,this.viewablePercentage);e!==this.viewable&&(this.viewable=e,this.viewable?this.dispatcher.dispatchEvent("inview"):this.dispatcher.dispatchEvent("outofview"))},i.prototype.isViewable=function(n,r){var i,s,d,l,u,c=n.offset(),p=a.scrollTop(),f=a.scrollLeft();return this._lightboxOpen?!1:e.contains(t.document.documentElement,n[0])?(i={left:c.left,top:c.top,right:c.left+n.width(),bottom:c.top+n.height()},s={top:p,bottom:p+t.innerHeight,left:f,right:f+t.innerWidth},d=o(i,s),u=n.width()*n.height(),l=u*r,d>=l):!1},i}),define("viewability/adViewabilityHandler",["util/publisherWindow","viewability/viewability","tracking","util/trackingEvent","util/eventBus"],function(e,t,n,r,i){function o(){var e=v&&g;!f&&e&&(f=setTimeout(s,A))}function a(){f&&(clearTimeout(f),f=void 0)}function s(){i.dispatchEvent({type:"viewability.in_feed_video_view",target:h}),a(),m.dispatcher.removeEventListener("inview",d),m.dispatcher.removeEventListener("outofview",l),i.removeEventListener("player.playing",u),i.removeEventListener("player.paused",c),m.destroy()}function d(){v=!0,o()}function l(){v=!1,a()}function u(){g=!0,o()}function c(){g=!1,a()}function p(e){m=new t(e),A=e.viewableTimeout,h=e.elementToWatch,i.addEventListener("player.setupcomplete",function(){m.dispatcher.addEventListener("inview",d),m.dispatcher.addEventListener("outofview",l),i.addEventListener("player.playing",u),i.addEventListener("player.paused",c),m.checkViewability()})}var f,A,m,h,v=!1,g=!1;return{init:p}}),define("inFeedVideo/playerStates",[],function(){return{unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:5}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inFeedVideo/dinkPlayer",["jquery","util/global","util/eventDispatcher","inFeedVideo/playerStates","util/eventBus"],function(e,t,n,r,i){function o(e){var t=/\.(mp4|flv|webm)(\?.*)?$/;if(!t.test(e))throw new Error("invalid video url : "+e);return e.replace(t,".dink")}var a=_temporalUndefined;return a=function(){function a(e,t){if(_classCallCheck(this,_temporalAssertDefined(a,"DinkPlayer",_temporalUndefined)&&a),!e)throw new Error("Url not provided");if(!t)throw new Error("Element not provided");this.element=t,this.url=o(e),this.dispatcher=new n(this),this.playerState=r.unstarted}return _createClass(_temporalAssertDefined(a,"DinkPlayer",_temporalUndefined)&&a,[{key:"supports",value:function(){return{ownPlayerTimer:function(){return!1}}}},{key:"load",value:function(){function t(e){var t=[];return"string"!=typeof e.dataUriPrefix||"object"!=typeof e.frames?t:(e.frames.forEach(function(n){t.push(e.dataUriPrefix+n)}),t)}var n=this;this.playerState=r.buffering,this.dispatcher.dispatchEvent({type:"loadstart"}),e.getJSON(this.url).done(function(e){if(n.frames=t(e),0===n.frames.length||"number"!=typeof e.fps){var o=_temporalUndefined;return o="invalid dink json",n.playerState=r.unstarted,void n.dispatcher.dispatchEvent({type:"error",message:_temporalAssertDefined(o,"message",_temporalUndefined)&&o,mediaFileUrl:n.url})}n.fps=e.fps,n.playerState=r.cued,i.one("placement.addedtodom",function(){n.dispatcher.dispatchEvent({type:"readytoplay"}),n.dispatcher.dispatchEvent({type:"adimpression"})}),n.dispatcher.dispatchEvent({type:"setupcomplete"})}).fail(function(e,t,i){var o=_temporalUndefined;o="failed to load dink json: "+e.status+" : "+t+" : "+i+" - "+n.url,n.playerState=r.unstarted,n.dispatcher.dispatchEvent({type:"error",message:_temporalAssertDefined(o,"message",_temporalUndefined)&&o,mediaFileUrl:n.url})})}},{key:"play",value:function(){function e(){i.element.src=i.frames[i.currentFrameIndex]}function n(){i.currentFrameIndex++,i.currentFrameIndex>a&&(i.currentFrameIndex=0,i.dispatcher.dispatchEvent({type:"loop"})),e(),i.frameTimeout=t.setTimeout(n,o)}if(this.canPlay()){var i=this,o=Math.floor(1e3/this.fps),a=this.frames.length-1;this.playerState!==r.paused&&(this.currentFrameIndex=0),e(),this.frameTimeout=t.setTimeout(n,o),this.playerState=r.playing,this.dispatcher.dispatchEvent({type:"playing"})}}},{key:"pause",value:function(){this.playerState===r.playing&&(t.clearTimeout(this.frameTimeout),this.playerState=r.paused,this.dispatcher.dispatchEvent({type:"pause"}))}},{key:"canPlay",value:function(){return this.playerState===r.paused||this.playerState===r.ended||this.playerState===r.cued}},{key:"getDuration",value:function(){return void 0}}]),_temporalAssertDefined(a,"DinkPlayer",_temporalUndefined)&&a}(),{DinkPlayer:_temporalAssertDefined(a,"DinkPlayer",_temporalUndefined)&&a}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inFeedVideo/html5Player",["util/eventDispatcher","jquery","util/eventBus"],function(e,t,n){var r=_temporalUndefined;return r=function(){function r(n,i){var o=this;if(_classCallCheck(this,_temporalAssertDefined(r,"Html5Player",_temporalUndefined)&&r),!n)throw new Error("Url not provided");if(!i)throw new Error("Element not provided");this.url=n,this.video=t("<video>").addClass("unruly_native_in_feed_video"),this.video.setImportantStyle({width:"100%",height:"100%"}),this.video.setImportantStyle({"background-color":"black"}),this.dispatcher=new e(this),this._videoElementDispatcher=new e(this.video),this.setVideoAttributes(),this.container=t(i),this.video.one("canplaythrough",function(e,t){o.container.append(o.video),o.dispatcher.dispatchEvent("setupcomplete",t)})}return _createClass(_temporalAssertDefined(r,"Html5Player",_temporalUndefined)&&r,[{key:"supports",value:function(){return{ownPlayerTimer:function(){return!1}}}},{key:"setVideoAttributes",value:function(){var e=this;this.video.prop("autoplay",!1),this.video.prop("muted",!0),this.video.prop("loop",!1),this.video.prop("preload","auto"),this._videoElementDispatcher.one("ended",function(){e.play(),e.video.prop("loop",!0)})}},{key:"load",value:function(){var e=this,t=_temporalUndefined;t=["playing","pause","ended","error"],n.one("placement.addedtodom",function(){e.dispatcher.dispatchEvent("readytoplay"),e.dispatcher.dispatchEvent("adimpression")}),this._videoElementDispatcher.addEventListener("timeupdate",function(t,n){var r=e.video.prop("currentTime");n=n||{},n.currentTime=r,e.dispatcher.dispatchEvent("timeupdate",n)}),(_temporalAssertDefined(t,"eventsToRefire",_temporalUndefined)&&t).forEach(function(t){e._videoElementDispatcher.addEventListener(t,function(n,r){e.dispatcher.dispatchEvent(t,r)})}),this.video.attr("src",this.url)}},{key:"play",value:function(){this.video[0].play()}},{key:"pause",value:function(){this.video[0].pause()}},{key:"getDuration",value:function(){return this.video.prop("duration")}},{key:"getCurrentTime",value:function(){return this.video.prop("currentTime")}}]),_temporalAssertDefined(r,"Html5Player",_temporalUndefined)&&r}(),{Html5Player:_temporalAssertDefined(r,"Html5Player",_temporalUndefined)&&r}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inFeedVideo/nullPlayer",["util/eventDispatcher"],function(e){var t=_temporalUndefined;return t=function(){function t(n){if(_classCallCheck(this,_temporalAssertDefined(t,"NullPlayer",_temporalUndefined)&&t),!n)throw new Error("Url not provided");this.dispatcher=new e(this),this.url=n}return _createClass(_temporalAssertDefined(t,"NullPlayer",_temporalUndefined)&&t,[{key:"supports",value:function(){return{ownPlayerTimer:function(){return!1}}}},{key:"getDuration",value:function(){}},{key:"load",value:function(){this.dispatcher.dispatchEvent({type:"error",message:"No compatible media file found",mediaFileUrl:this.url})}}]),_temporalAssertDefined(t,"NullPlayer",_temporalUndefined)&&t}(),{NullPlayer:_temporalAssertDefined(t,"NullPlayer",_temporalUndefined)&&t}});var _temporalUndefined={};define("util/elementStyleReset",["jquery"],function(e){var t=_temporalUndefined;return t={DIV:"block",IFRAME:"inline"},{resetStyles:function(n){var r=_temporalUndefined,i=_temporalUndefined;return r=e(n),i=(_temporalAssertDefined(t,"tagNameToDisplayStyle",_temporalUndefined)&&t)[(_temporalAssertDefined(r,"jQueryElement",_temporalUndefined)&&r).prop("tagName")],(_temporalAssertDefined(r,"jQueryElement",_temporalUndefined)&&r).setImportantStyle({margin:0,padding:0,border:0,"line-height":"normal"}),_temporalAssertDefined(i,"displayStyle",_temporalUndefined)&&i&&(_temporalAssertDefined(r,"jQueryElement",_temporalUndefined)&&r).setImportantStyle({display:_temporalAssertDefined(i,"displayStyle",_temporalUndefined)&&i}),n}}}),define("util/jqueryElementFactory",["jquery"],function(e){return{create:function(t){return e(t)}}});var _temporalUndefined={},compose=_temporalUndefined;compose=function(e,t){return function(){return e(t.apply(void 0,arguments))}},define("util/dom/jqueryReset",["util/jqueryElementFactory","util/elementStyleReset"],function(e,t){return{createAndReset:(_temporalAssertDefined(compose,"compose",_temporalUndefined)&&compose)(t.resetStyles,e.create)}});var _temporalUndefined={};define("util/iframeBridge",["util/global"],function(e){function t(e){try{e.jquery&&(e=e.get(0))}catch(t){}try{if(e.contentWindow)return e.contentWindow}catch(t){}return e}function n(e,n,r){var i=_temporalUndefined,o=_temporalUndefined;i=t(e),o={name:n},r&&((_temporalAssertDefined(o,"message",_temporalUndefined)&&o).payload=r),(_temporalAssertDefined(i,"theWindow",_temporalUndefined)&&i).postMessage(_temporalAssertDefined(o,"message",_temporalUndefined)&&o,"*")}function r(t,n){e.addEventListener("message",function(e){e.data&&e.data.name===t&&n(e.data.payload,e.source)},!1)}function i(t,n){var r=_temporalUndefined;r=function i(r){r.data&&r.data.name===t&&(e.removeEventListener("message",_temporalAssertDefined(i,"proxyCallback",_temporalUndefined)&&i),n(r.data.payload,r.source))},e.addEventListener("message",_temporalAssertDefined(r,"proxyCallback",_temporalUndefined)&&r,!1)}return{postMessage:n,receiveMessage:r,receiveOnce:i}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("vpaid/vpaidBroker",["util/eventDispatcher","util/dom/jqueryReset","util/iframeBridge"],function(e,t,n){var r=_temporalUndefined;return r=function(){function r(t){_classCallCheck(this,_temporalAssertDefined(r,"VPAIDBroker",_temporalUndefined)&&r),this.parentElement=t.parentElement,this.dispatcher=new e({})}return _createClass(_temporalAssertDefined(r,"VPAIDBroker",_temporalUndefined)&&r,[{key:"load",value:function(){var e=this,n=_temporalUndefined;n="nativeLoaderIframe",this.iframeElement=t.createAndReset('<iframe class="unruly_vpaid_iframe_container" scrolling="no">'),this.iframeElement.setImportantStyle({width:"100%",height:"100%"}),this.iframeElement.attr("src","//video.unrulymedia.com/native/vpaid_wrapper_v1.0.372-5-g37762c6.html#"+(_temporalAssertDefined(n,"LOADER_IFRAME_NAME",_temporalUndefined)&&n)),this.iframeElement.load(function(){e.iframeReady=!0}),this.parentElement.append(this.iframeElement),this.dispatcher.dispatchEvent("setupcomplete")}},{key:"consume",value:function(e,t){var r=this,i=_temporalUndefined,o=_temporalUndefined;i=["AdLoaded","AdStarted","AdVideoStart","AdLog","AdError","AdVideoComplete","AdVolumeChange","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdStopped","AdClickThru","videoProgress"],(_temporalAssertDefined(i,"eventsToReFire",_temporalUndefined)&&i).forEach(function(e){n.receiveMessage(e,function(t){r.dispatcher.dispatchEvent(e,t)})}),n.receiveMessage("VPAIDCreativeLoaded",function(){t()}),o=function(){var t=_temporalUndefined,i=_temporalUndefined;t=!0,n.receiveOnce("vpaidIframeHandshakeConfirmed",function(){_temporalAssertDefined(_temporalAssertDefined(t,"sendHandshake",_temporalUndefined)&&t,"sendHandshake",_temporalUndefined),t=!1,n.postMessage(r.iframeElement,"consumeVPAID",{url:e})}),i=function o(){_temporalAssertDefined(t,"sendHandshake",_temporalUndefined)&&t&&(n.postMessage(r.iframeElement,"vpaidIframeHandshake"),setTimeout(_temporalAssertDefined(o,"handshake",_temporalUndefined)&&o,10))},(_temporalAssertDefined(i,"handshake",_temporalUndefined)&&i)()},this.iframeReady?(_temporalAssertDefined(o,"consumeVPAIDCb",_temporalUndefined)&&o)():this.iframeElement.load(function(){(_temporalAssertDefined(o,"consumeVPAIDCb",_temporalUndefined)&&o)()})}},{key:"unmute",value:function(){n.postMessage(this.iframeElement,"unmute")}},{key:"initAd",value:function(e,t,r,i,o,a){n.postMessage(this.iframeElement,"initAd",{args:[e,t,r,i,o,a]})}},{key:"getAdVolume",value:function(e){n.postMessage(this.iframeElement,"getAdVolume"),n.receiveOnce("getAdVolume:Response",function(t){"function"==typeof e&&e(t.volume)})}},{key:"setAdVolume",value:function(e){n.postMessage(this.iframeElement,"setAdVolume",{args:[e]})}},{key:"startAd",value:function(){n.postMessage(this.iframeElement,"startAd")}},{key:"resumeAd",value:function(){n.postMessage(this.iframeElement,"resumeAd")}},{key:"pauseAd",value:function(){n.postMessage(this.iframeElement,"pauseAd")}},{key:"mute",value:function(){n.postMessage(this.iframeElement,"mute")}},{key:"on",value:function(e,t){this.dispatcher.addEventListener(e,t)}}]),_temporalAssertDefined(r,"VPAIDBroker",_temporalUndefined)&&r}(),{VPAIDBroker:_temporalAssertDefined(r,"VPAIDBroker",_temporalUndefined)&&r}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inFeedVideo/flashVPAIDPlayer",["util/eventDispatcher","jquery","util/eventBus","util/trackingEvent","util/elementStyleReset","vpaid/vpaidBroker","util/enable"],function(e,t,n,r,i,o,a){
var s=_temporalUndefined;return s=function(){function i(r,s){var d=this;if(_classCallCheck(this,_temporalAssertDefined(i,"FlashVPAIDPlayer",_temporalUndefined)&&i),!r)throw new Error("Url not provided");if(!s)throw new Error("Element not provided");a.alternateZentrickAd&&(r=r.replace(/player\.vpaid\.alt\.swf\?publication=XH1YvV/,"player.vpaid.alt.swf?publication=QVIgOA")),this.creativeUrl=r,this.startAdCalled=!1,this.adLoaded=!1,this.adStarted=!1,this.muted=!0,this.VPAIDConfig={width:"100%",height:"100%",parentElement:s.jquery?s:t(s),flashBridgeName:"__testFlashBridge",consumerUrl:"//video.unrulymedia.com/native/flash-vpaid-consumer-v1.0.372-5-g37762c6.swf"},this.dispatcher=new e(this),this.vpaidBroker=new o.VPAIDBroker(this.VPAIDConfig),this.vpaidBroker.dispatcher.addEventListener("videoProgress",function(e,t){d.dispatcher.dispatchEvent("videoProgress",t)}),this.vpaidBroker.dispatcher.addEventListener("SetupError",function(e,t){n.dispatchEvent("player.error",t)})}return _createClass(_temporalAssertDefined(i,"FlashVPAIDPlayer",_temporalUndefined)&&i,[{key:"supports",value:function(){return{ownPlayerTimer:function(){return!0}}}},{key:"getDuration",value:function(){return void 0}},{key:"load",value:function(e){var i=_temporalUndefined;i=this,n.one("placement.addedtodom",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.consume((_temporalAssertDefined(i,"self",_temporalUndefined)&&i).creativeUrl,function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdLoaded",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).adLoaded=!0,(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("readytoplay"),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("adimpression")}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdStarted",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).adStarted=!0}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVideoStart",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("playing"),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).muted&&(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.setAdVolume(0)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdLog",function(e,t){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(e,t)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdError",function(e,t){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(e,t)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVideoComplete",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(r.COMPLETE),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("AdVideoComplete")}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVolumeChange",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.getAdVolume(function(e){e>0&&(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.unmute()})}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVideoFirstQuartile",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(r.FIRST_QUARTILE)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVideoMidpoint",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(r.MIDPOINT)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdVideoThirdQuartile",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent(r.THIRD_QUARTILE)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdStopped",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("AdStopped")}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("AdClickThru",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("AdClickThru")}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.initAd(t((_temporalAssertDefined(i,"self",_temporalUndefined)&&i).VPAIDConfig.parentElement).width(),t((_temporalAssertDefined(i,"self",_temporalUndefined)&&i).VPAIDConfig.parentElement).height(),"normal",999,e&&e.adParameters)}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).muted&&(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.mute()}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.dispatcher.addEventListener("setupcomplete",function(){(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).dispatcher.dispatchEvent("setupcomplete")}),(_temporalAssertDefined(i,"self",_temporalUndefined)&&i).vpaidBroker.load()}},{key:"play",value:function(){this.adLoaded&&(this.startAdCalled?this.vpaidBroker.resumeAd():(this.vpaidBroker.startAd(),this.startAdCalled=!0))}},{key:"pause",value:function(){this.adStarted&&this.vpaidBroker.pauseAd()}},{key:"mute",value:function(){this.vpaidBroker.setAdVolume(0),this.vpaidBroker.mute()}},{key:"unmute",value:function(){this.vpaidBroker.setAdVolume(1)}}]),_temporalAssertDefined(i,"FlashVPAIDPlayer",_temporalUndefined)&&i}(),{FlashVPAIDPlayer:_temporalAssertDefined(s,"FlashVPAIDPlayer",_temporalUndefined)&&s}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("vpaid-consumer/vpaid-consumer",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.VPAIDConsumer=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r=e("./lib/vpaid-consumer");t.exports=r},{"./lib/vpaid-consumer":4}],2:[function(e,t,n){function r(e){var t,n={type:"application/x-shockwave-flash",data:e.swfUrl,width:e.width,height:e.height,style:"width: "+e.width+" !important; height: "+e.height+" !important;"};return t=o.createElement("object"),o.addAttributes(t,n),i(t,e),o.addClass(t,"unruly_vpaid_player"),o.appendChild(e.parentElement,t),t}function i(e,t){var n,r,i={allowScriptAccessParam:{name:"allowScriptAccess",value:"always"},allowFullscreenParam:{name:"allowFullScreen",value:"true"},wmodeParam:{name:"wmode",value:"opaque"},qualityParam:{name:"quality",value:"high"},menuParam:{name:"menu",value:"false"},flashvarsParam:{name:"flashvars",value:"onConsumerReady="+t.flashVars.onConsumerReady+"&onFlashEvent="+t.flashVars.onFlashEvent}};for(n in i)i.hasOwnProperty(n)&&(r=o.createElement("param",n),o.addAttributes(r,i[n]),o.appendChild(e,r))}var o=e("./utils/dom-utils");t.exports={embed:r}},{"./utils/dom-utils":3}],3:[function(e,t,n){t.exports={createElement:function(e){return document.createElement(e)},addAttributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},appendChild:function(e,t){e.appendChild(t)},addClass:function(e,t){var n=e.className;""==n?e.className=t:e.className=n+" "+t}}},{}],4:[function(e,t,n){function r(e){this.width=e.width,this.height=e.height,this.parentElement=e.parentElement,this.flashBridgeName=e.flashBridgeName||"__unrulyFlashBridge",this._emitter=new a.EventEmitter,this.consumerUrl=e.consumerUrl,this.isReady=!1}var i=e("./swf-embedder"),o=e("./vpaid-creative"),a=e("events");r.prototype.init=function(){var e,t,n,r=this.consumerUrl,a=this.parentElement.ownerDocument,s=a.defaultView||a.parentWindow,d=this;return s[this.flashBridgeName]={onConsumerReady:function(){d.isReady=!0,d._emitter.emit("ready",!0)},onFlashEvent:function(e,t){var n;t=decodeURIComponent(t);try{n=JSON.parse(t)}catch(r){n={type:"Error",message:"Could not deserialise the flash event "+t}}"VPAIDCreativeLoaded"===e?(d.vpaidCreative=o.create({flashObject:d._flashObj}),d._emitter.emit(e,d.vpaidCreative)):d.vpaidCreative&&d.vpaidCreative.trigger(e,n)}},e={onConsumerReady:this.flashBridgeName+".onConsumerReady",onFlashEvent:this.flashBridgeName+".onFlashEvent"},t={allowScriptAccess:"always",allowFullScreen:"true",wmode:"opaque",quality:"high",menu:"false"},n={width:this.width,height:this.height,parentElement:this.parentElement,flashVars:e,flashParams:t,swfUrl:r},this._flashObj=i.embed(n),this._flashObj},r.prototype.on=function(e,t){this._emitter.on(e,t)},r.prototype.consume=function(e,t){function n(t){t&&r._flashObj.consumeVPAIDCreative(e)}var r=this;this.isReady?n(!0):this.on("ready",n),this.on("VPAIDCreativeLoaded",function(e){t(void 0,e)})},r.prototype.mute=function(){function e(e){e&&t._flashObj.masterVolume(0)}var t=this;this.isReady?e(!0):this.on("ready",e)},r.prototype.unmute=function(){function e(e){e&&t._flashObj.masterVolume(1)}var t=this;this.isReady?e(!0):this.on("ready",e)},t.exports={VPAIDConsumer:r}},{"./swf-embedder":2,"./vpaid-creative":5,events:6}],5:[function(e,t,n){function r(e){e=e||{},this._flashObject=e.flashObject,this._emitter=new i.EventEmitter}var i=e("events");r.prototype.trigger=function(e,t){this._emitter.emit(e,t)},r.prototype.on=function(e,t){this._emitter.on(e,t)},r.prototype.once=function(e,t){this._emitter.once(e,t)},r.prototype.handshakeVersion=function(e){return this._flashObject.handshakeVersion(e)},r.prototype.initAd=function(e,t,n,r,i,o){return this._flashObject.initAd(e,t,n,r,i,o)},r.prototype.resizeAd=function(e,t,n){return this._flashObject.resizeAd(e,t,n)},r.prototype.setAdVolume=function(e){return this._flashObject.adVolume(e)},r.prototype.getAdVolume=function(){return this._flashObject.adVolume()},r.prototype.adDuration=function(){return this._flashObject.adDuration?this._flashObject.adDuration():void 0},r.prototype.adRemainingTime=function(){return this._flashObject.adRemainingTime?this._flashObject.adRemainingTime():void 0},function(){["startAd","stopAd","pauseAd","resumeAd","expandAd","collapseAd","skipAd"].forEach(function(e){r.prototype[e]=function(){return this._flashObject[e]?this._flashObject[e]():void 0}})}(),t.exports={create:function(e){return new r(e)}}},{events:6}],6:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,d,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),d=1;r>d;d++)o[d-1]=arguments[d];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),d=1;r>d;d++)o[d-1]=arguments[d];for(l=n.slice(),r=l.length,d=0;r>d;d++)l[d].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}]},{},[1])(1)}),define("vpaid-consumer",["vpaid-consumer/vpaid-consumer"],function(e){return e});var _temporalUndefined={};define("vpaidWrapper/vpaidController/videoProgressWatcher",["util/iframeBridge"],function(e){return{init:function(t,n){function r(){var o=_temporalUndefined;o=t.percentComplete(),e.postMessage(n,"videoProgress",{percentComplete:_temporalAssertDefined(o,"percentComplete",_temporalUndefined)&&o}),(_temporalAssertDefined(o,"percentComplete",_temporalUndefined)&&o)<100&&setTimeout(r,_temporalAssertDefined(i,"notifyInterval",_temporalUndefined)&&i)}var i=_temporalUndefined;i=100,r()}}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inFeedVideo/flashVPAIDDirectEmbedPlayer",["util/eventDispatcher","vpaid-consumer","jquery","util/eventBus","util/trackingEvent","util/elementStyleReset","util/enable","vpaidWrapper/vpaidController/videoProgressWatcher","util/global","util/iframeBridge"],function(e,t,n,r,i,o,a,s,d,l){var u=_temporalUndefined;return u=function(){function u(n,r){if(_classCallCheck(this,_temporalAssertDefined(u,"FlashVPAIDDirectEmbedPlayer",_temporalUndefined)&&u),!n)throw new Error("Url not provided");if(!r)throw new Error("Element not provided");a.alternateZentrickAd&&(n=n.replace(/player\.vpaid\.alt\.swf\?publication=XH1YvV/,"player.vpaid.alt.swf?publication=QVIgOA")),this.creativeUrl=n,this.startAdCalled=!1,this.adLoaded=!1,this.adStarted=!1,this.muted=!0,this.VPAIDConfig={width:"100%",height:"100%",parentElement:r&&r.jquery?r[0]:r,flashBridgeName:"__testFlashBridge",consumerUrl:"//video.unrulymedia.com/native/flash-vpaid-consumer-v1.0.372-5-g37762c6.swf"},this.dispatcher=new e(this),this.vpaidConsumer=new t.VPAIDConsumer(this.VPAIDConfig),o.resetStyles(this.vpaidConsumer.init())}return _createClass(_temporalAssertDefined(u,"FlashVPAIDDirectEmbedPlayer",_temporalUndefined)&&u,[{key:"supports",value:function(){return{ownPlayerTimer:function(){return!0}}}},{key:"getDuration",value:function(){return void 0}},{key:"percentComplete",value:function c(){var e=_temporalUndefined,c=_temporalUndefined;return e=this.vpaidConsumer.vpaidCreative,(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adRemainingTime&&(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adRemainingTime()&&(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adDuration&&(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adDuration()?(c=((_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adDuration()-(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adRemainingTime())/(_temporalAssertDefined(e,"vpaid",_temporalUndefined)&&e).adDuration()*100,Math.max(_temporalAssertDefined(c,"percentComplete",_temporalUndefined)&&c,0)):0}},{key:"load",value:function(e){var t=this,o=_temporalUndefined;o=this,r.one("placement.addedtodom",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).vpaidConsumer.consume((_temporalAssertDefined(o,"self",_temporalUndefined)&&o).creativeUrl,function(r,a){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).VPAIDCreative=a,a.on("AdLoaded",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).adLoaded=!0,(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("readytoplay"),(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("adimpression")}),a.on("AdStarted",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).adStarted=!0}),a.on("AdVideoStart",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("playing"),(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).muted&&(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).VPAIDCreative.setAdVolume(0),s.init(t,d),l.receiveMessage("videoProgress",function(e){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("videoProgress",e)})}),a.on("AdLog",function(e){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("AdLog",e)}),a.on("AdError",function(e){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("AdError",e)}),a.on("AdVideoComplete",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent(i.COMPLETE),(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("AdVideoComplete")}),a.on("AdVolumeChange",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).VPAIDCreative.getAdVolume()>0&&(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).vpaidConsumer.unmute()}),a.on("AdVideoFirstQuartile",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent(i.FIRST_QUARTILE)}),a.on("AdVideoMidpoint",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent(i.MIDPOINT)}),a.on("AdVideoThirdQuartile",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent(i.THIRD_QUARTILE)}),a.on("AdStopped",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("AdStopped")}),a.on("AdClickThru",function(){(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("AdClickThru")}),a.initAd(n((_temporalAssertDefined(o,"self",_temporalUndefined)&&o).VPAIDConfig.parentElement).width(),n((_temporalAssertDefined(o,"self",_temporalUndefined)&&o).VPAIDConfig.parentElement).height(),"normal",999,e&&e.adParameters)}),(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).muted&&(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).vpaidConsumer.mute()}),(_temporalAssertDefined(o,"self",_temporalUndefined)&&o).dispatcher.dispatchEvent("setupcomplete")}},{key:"play",value:function(){this.VPAIDCreative&&this.adLoaded&&(this.startAdCalled?this.VPAIDCreative.resumeAd():(this.VPAIDCreative.startAd(),this.startAdCalled=!0))}},{key:"pause",value:function(){this.adStarted&&this.VPAIDCreative.pauseAd()}},{key:"mute",value:function(){this.VPAIDCreative.setAdVolume(0),this.vpaidConsumer.mute()}},{key:"unmute",value:function(){this.VPAIDCreative.setAdVolume(1)}}]),_temporalAssertDefined(u,"FlashVPAIDDirectEmbedPlayer",_temporalUndefined)&&u}(),{FlashVPAIDDirectEmbedPlayer:_temporalAssertDefined(u,"FlashVPAIDDirectEmbedPlayer",_temporalUndefined)&&u}});var _temporalUndefined={};define("playerTimer",["util/eventBus","util/trackingEvent"],function(e,t){function n(e){var n=e.getDuration(),i=n/4,o=e.getCurrentTime();o>=i&&2*i>o?r(t.FIRST_QUARTILE,e):o>=2*i&&3*i>o?r(t.MIDPOINT,e):o>=3*i&&n>o&&r(t.THIRD_QUARTILE,e)}function r(e,t){s[e]||(i(e,t),s[e]=!0)}function i(t,n){-1!==d.indexOf(t)&&e.dispatchEvent({type:"player."+t,target:n})}function o(e){var n=_temporalUndefined;n=30,e.getCurrentTime()>=(_temporalAssertDefined(n,"COMPLETED_VIEW_LIMIT",_temporalUndefined)&&n)&&r(t.COMPLETED_VIEW,e)}function a(){e.addEventListener("player.timeupdate",function(e){var t=_temporalUndefined;t=e.target,n(_temporalAssertDefined(t,"player",_temporalUndefined)&&t),o(_temporalAssertDefined(t,"player",_temporalUndefined)&&t)}),e.addEventListener("player.ended",function(e){r(t.COMPLETE,e.target),r(t.COMPLETED_VIEW,e.target)}),e.addEventListener("player.playing",function(e){r(t.IMP,e.target),r(t.START,e.target)})}var s={},d=[t.FIRST_QUARTILE,t.MIDPOINT,t.THIRD_QUARTILE];return{init:a}});var _temporalUndefined={};define("inFeedVideo/inFeedVideoPlayerFactory",["util/enable","inFeedVideo/html5Player","inFeedVideo/dinkPlayer","inFeedVideo/nullPlayer","inFeedVideo/flashVPAIDPlayer","inFeedVideo/flashVPAIDDirectEmbedPlayer","playerTimer"],function(e,t,n,r,i,o,a){function s(s,d){var l=_temporalUndefined,u=_temporalUndefined,c=_temporalUndefined,p=_temporalUndefined;return l=void 0,u=e.supportsDesktopVideoContainer(),c=void 0,p=d.video,e.embedVPAIDDirectly(d)&&d.media.hasFlashVPAID()&&_temporalAssertDefined(u,"supportsDesktopVideoContainer",_temporalUndefined)&&u?(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined),c=o.FlashVPAIDDirectEmbedPlayer,_temporalAssertDefined(_temporalAssertDefined(p,"mediaFile",_temporalUndefined)&&p,"mediaFile",_temporalUndefined),p=d.media.getFlashVPAIDMediaFiles()[0]):_temporalAssertDefined(u,"supportsDesktopVideoContainer",_temporalUndefined)&&u&&d.video.isMP4()?(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined),c=t.Html5Player):e.supportsVPAID(d)&&d.video.isFlashVPAID()?(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined),c=i.FlashVPAIDPlayer):_temporalAssertDefined(u,"supportsDesktopVideoContainer",_temporalUndefined)&&u||!d.video.isMP4()?(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined),c=r.NullPlayer):(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined),c=n.DinkPlayer),_temporalAssertDefined(_temporalAssertDefined(l,"videoPlayer",_temporalUndefined)&&l,"videoPlayer",_temporalUndefined),l=new(_temporalAssertDefined(_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c,"PlayerClass",_temporalUndefined)&&_temporalAssertDefined(c,"PlayerClass",_temporalUndefined)&&c)((_temporalAssertDefined(_temporalAssertDefined(p,"mediaFile",_temporalUndefined)&&p,"mediaFile",_temporalUndefined)&&_temporalAssertDefined(p,"mediaFile",_temporalUndefined)&&p).url,s),(_temporalAssertDefined(l,"videoPlayer",_temporalUndefined)&&l).supports().ownPlayerTimer()||a.init(),_temporalAssertDefined(l,"videoPlayer",_temporalUndefined)&&l}return{createPlayer:s}}),define("inFeedVideo/videoEventDispatcher",["util/eventBus","util/trackingEvent","util/global"],function(e,t,n){function r(r){var i,o=!1,a={};a[n.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]=t.error.MEDIA_ERR_SRC_NOT_SUPPORTED,a[n.MediaError.MEDIA_ERR_ABORTED]=t.error.MEDIA_ERR_ABORTED,a[n.MediaError.MEDIA_ERR_NETWORK]=t.error.MEDIA_ERR_NETWORK,a[n.MediaError.MEDIA_ERR_DECODE]=t.error.MEDIA_ERR_DECODE,i=["timeupdate","firstQuartile","midpoint","thirdQuartile","ended","complete"],i.forEach(function(t){r.dispatcher.addEventListener(t,function(n,i){e.dispatchEvent({type:"player."+t,target:r},i)})}),r.dispatcher.addEventListener("playing",function(){e.dispatchEvent({type:"player.playing",target:r}),o&&(e.dispatchEvent({type:"player.resume",target:r}),o=!1)}),r.dispatcher.addEventListener("pause",function(){e.dispatchEvent({type:"player.pause",target:r}),o=!0}),r.dispatcher.addEventListener("error",function(t){var n={type:t.type,message:t.message,src:t.mediaFileUrl};t.originalEvent&&t.originalEvent.target&&(t.originalEvent.target.error&&t.originalEvent.target.error.code&&(n.type=a[t.originalEvent.target.error.code]),t.originalEvent.target.src&&(n.message="Unable to play file "+t.originalEvent.target.src,n.src=t.originalEvent.target.src)),e.dispatchEvent({type:"player.error",target:r},[n])})}return{setupPlayerEventReFiring:r}}),define("inFeedVideo/inFeedVideo",["jquery","inFeedVideo/dinkPlayer","viewability/viewability","tracking","util/stopwatch","util/enable","util/eventBus","util/global","util/trackingEvent","inFeedVideo/inFeedVideoPlayerFactory","inFeedVideo/videoEventDispatcher"],function(e,t,n,r,i,o,a,s,d,l,u){function c(e){var t=/\.(mp4|flv|webm)(\?.*)?$/;if(!t.test(e))throw new Error("invalid video url : "+e);return e.replace(t,".dink")}function p(t,o){function s(){c(),a.dispatchEvent({type:"player.setupcomplete",target:A})}function d(){i.start("infeed_vid_load"),A.dispatcher.removeEventListener("loadstart",d)}function c(){var e;i.stop("infeed_vid_load"),e=i.getTime("infeed_vid_load"),r.trackSplunk("infeed_vid_load",{tsr:e})}function p(){r.trackSplunk("infeedvid_complete"),A.dispatcher.removeEventListener("loop",p)}var f,A;return A=l.createPlayer(t,o),u.setupPlayerEventReFiring(A),function(){A.playWhenViewable=function(){f=new n({elementToWatch:e(t),viewablePercentage:.25}),f.dispatcher.addEventListener("inview",A.play.bind(A)),f.dispatcher.addEventListener("outofview",A.pause.bind(A)),f.checkViewability()}}(),A.dispatcher.addEventListener("loadstart",d),A.dispatcher.one("setupcomplete",s),A.dispatcher.addEventListener("loop",p),A}return{createPlayer:p,_getInFeedVideoDataUrl:c}}),define("util/layout/letterbox",["jquery","util/publisherWindow"],function(e,t){function n(n,i){function o(){var e=i.outerWidth(),t=i.outerHeight(),o=e/r.horizontal,a=r.vertical*o,s=Math.round((t-a)/2);n.setImportantStyle({"border-width":s+"px 0px",width:e+"px",height:t+"px"})}n.setImportantStyle({border:"0px solid #000000","box-sizing":"border-box"}),o(),e(t).on("resize",o)}var r={horizontal:16,vertical:9};return{letterbox:n}}),define("util/elementWatcher",["jquery","util/eventDispatcher"],function(e,t){function n(e){this.elementToWatch=e.elementToWatch,this.dispatcher=new t(this),this.position=this.getPosition(this.elementToWatch),this.size=this.getSize(this.elementToWatch),this._boundCallback=this.checkIfElementChanges.bind(this),this._pollId=setInterval(this._boundCallback,100)}return n.prototype.destroy=function(){clearInterval(this._pollId),this._pollId=void 0},n.prototype.comparePositions=function(e,t){return e.top===t.top&&e.left===t.left},n.prototype.compareSize=function(e,t){return e.height===t.height&&e.width===t.width},n.prototype.checkSizeChange=function(){var e=this.getSize(this.elementToWatch);this.compareSize(this.size,e)||(this.size=e,this.dispatcher.dispatchEvent({type:"sizeChanged",target:this}))},n.prototype.checkIfElementChanges=function(){this.checkPositionChange(),this.checkSizeChange()},n.prototype.checkPositionChange=function(){var e=this.getPosition(this.elementToWatch);this.comparePositions(this.position,e)||(this.position=e,this.dispatcher.dispatchEvent({type:"positionChanged",target:this}))},n.prototype.getSize=function(e){return{width:e.width(),height:e.height()}},n.prototype.getPosition=function(e){var t=e.offset();return{top:t.top,left:t.left}},n}),define("util/positionUtil",[],function(){function e(e,t,n){var r=e.offset(),i={top:r.top,left:r.left+e.outerWidth()};return t&&(i.left-=t.width()),n&&(i.top+=e.outerHeight()*n/100,i.left-=e.outerWidth()*n/100),i}function t(e,t,n){var r=e.offset(),i={top:r.top,left:r.left};return n&&(i.top+=e.outerHeight()*n/100,i.left+=e.outerWidth()*n/100),i}function n(e,t,n){var r=e.offset(),i={top:r.top+e.outerHeight(),left:r.left+e.outerWidth()};return t&&(i.top-=t.height(),i.left-=t.width()),n&&(i.top-=e.outerHeight()*n/100,i.left-=e.outerWidth()*n/100),i}function r(e,t,n){var r=e.offset(),i={top:r.top+e.outerHeight(),left:r.left};return t&&(i.top-=t.height()),n&&(i.top-=e.outerHeight()*n/100,i.left+=e.outerWidth()*n/100),i}return{topRight:e,topLeft:t,bottomLeft:r,bottomRight:n}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("adIconHandler",["jquery","util/elementWatcher","tracking","util/trackingEvent","util/positionUtil","util/browser","util/enable"],function(e,t,n,r,i,o,a){var s=_temporalUndefined;return s=function(){function s(e){_classCallCheck(this,_temporalAssertDefined(s,"AdIconHandler",_temporalUndefined)&&s),this.elementWatcher=new t({elementToWatch:e.elementToWatch}),this.icons=[{onClickCallback:function(){n.trackActivate(r.PRIVACY_POLICY),o.openWindow("http://video.unrulymedia.com/rtbprivacypolicy/index.html")},className:"unruly_native_optout_icon",position:"topRight",scaling:!1,imageDimensions:{standard:[19,19]},imgDataUri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzE5MTkyMDQ3QzlFMTFFNEI4M0Q4NDVDMjhCMDZDRTQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzE5MTkyMDM3QzlFMTFFNEI4M0Q4NDVDMjhCMDZDRTQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzMkYyQzJEQjBFRDExRTJBMjNDRjBENEFCMzNGREQ1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzMkYyQzJFQjBFRDExRTJBMjNDRjBENEFCMzNGREQ1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/ILl8AAAAl5JREFUeNqsVM+LUlEY9Rfjw0lRnGmEmBiyTRs37SIScaGgLkZcqP9B/gsiIuJqtm6kbDEb0RgZFJztRNkuUCES0kKHJ8kUlaU+JbTvDPfGTZTZzIXDve+755z33e/+UKvWt3uEB4R9wg7BSPhF+ELoEz4SPq+K1Cvfu4THhEcEk2pzGxHeEt4QLtcRDghPCTm9Xv8sk8m8arVa8ng8VpbU0OMbccyDx/gHqjUZXRk5nc7SYDD4vmRtOp3OhsPhT/Q8hnnwBMNd0eyQG3FRs9m8CIVCpxqNJmc0Gp+nUqnzaDRaQZz/RDA8FIt9hNR5RsVisQETRsx5vd6TxWKxdLvdLxHHPM+QLfmI+ah8EKAWPCPRiMNqtb7gY8zzDKFjcZ+GOwYCATv6dDr9jrL4t36Px2ONx+P3/X7/bR7DPHiiDhsBs22M7Hb7jqIo83K5PBSLScvQJJPJJzabTRLj4IEPHQvNYKbHyGAw6EejkSJmhSbLsqLT6bSFQkEW4+CBDx0L6WCmYDSZTGYmk0mievxnFg6H73Y6nct+v6+IcfDAh46FtqCcYtTtdr9KkrQVDAb3RJHL5dqv1+sXqwcTPPChY6FvMOtiVK1Wr/pEIvGQZ0fnS+twOO7UajWZztyemBV4oo7aj7XnrFQqNbH9Pp/vBN+VSuU9FfqYHwvMbzpnG29AJBKpxGKxM7PZnIcJbsR1N+DG7qaWmU0IKKSx1+uZs9nsB8rkN2Wks1gsBuq35/P5n3a7Pczn8w0q/msqPDauQTgjDG78PVNf89JaCLfYCsZsx6bspf20KvorwADLaKBWBKZQ9wAAAABJRU5ErkJggg==",
isEnabled:function(){return a.audienceTargeting}},{onClickCallback:function(){e.elementToWatch.click()},className:"unruly_native_unmute_icon",position:"bottomRight",scaling:!0,imageDimensions:{standard:[26,20],medium:[39,30],large:[52,40]},percentageOffset:1.5,imgDataUri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAoCAYAAACxbNkLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0NzI1NTdEOEQxOTExRTQ5MjYxRDcwQjgxODM0REJFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ0NzI1NTdFOEQxOTExRTQ5MjYxRDcwQjgxODM0REJFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDQ3MjU1N0I4RDE5MTFFNDkyNjFENzBCODE4MzREQkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDQ3MjU1N0M4RDE5MTFFNDkyNjFENzBCODE4MzREQkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Cu8F9AAAJY0lEQVR42tRZB0xU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",isEnabled:function(){return a.unMuteIcon}}],this.config=e}return _createClass(_temporalAssertDefined(s,"AdIconHandler",_temporalUndefined)&&s,[{key:"initIcons",value:function(){var e=this;this.icons.filter(function(e){return e.isEnabled()}).forEach(function(t){e.createIcon(e.elementWatcher,e.config.elementToWatch,t)})}},{key:"destroyIcons",value:function(){this.elementWatcher.destroy(),this.icons.forEach(function(t){e("."+t.className).hide()})}},{key:"setIconSize",value:function(e,t){e.setImportantStyle({width:t[0]+"px",height:t[1]+"px"})}},{key:"createIcon",value:function(t,n,r){function o(){var e,t=n.width();d=r.scaling&&t>u?"large":r.scaling&&t>l?"medium":"standard",e=i[r.position](n,a,r.percentageOffset),a.setImportantStyle({position:"absolute",left:e.left+"px",top:e.top+"px",width:r.imageDimensions[d][0]+"px",height:r.imageDimensions[d][1]+"px","min-width":"0","min-height":"0","max-width":"none","max-height":"none"})}var a=e('<img style="cursor:pointer;" src="'+r.imgDataUri+'">'),s=n.width(),d="standard",l=300,u=400;a.on("click",r.onClickCallback),a.addClass(r.className),r.scaling&&s>u?d="large":r.scaling&&s>l&&(d="medium"),this.setIconSize(a,r.imageDimensions[d]),e("body").append(a),t.dispatcher.addEventListener("positionChanged",o),t.dispatcher.addEventListener("sizeChanged",o)}}]),_temporalAssertDefined(s,"AdIconHandler",_temporalUndefined)&&s}(),_temporalAssertDefined(s,"AdIconHandler",_temporalUndefined)&&s}),define("util/elementStyleClone",["jquery","util/publisherWindow"],function(e,t){function n(e,n){var r,o={},a=0;if(!e)throw new Error("No DOMElement passed");if(r=t.getComputedStyle(e),0===r.length)throw new Error("DOMElement seems to not be attached to the DOM");for(n=n||i;a<r.length;a++){var s=r[a],d=r.getPropertyValue(s);n.indexOf(s)>=0&&(o[s]=d)}return o}function r(t){var n={};return e.each(t.attributes,function(){n[this.name]=this.value}),n}var i=["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-collapse","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","width","height","min-width","min-height","box-sizing","float","overflow","vertical-align","position"];return{clone:n,cloneAttributes:r}}),define("util/nativeAdModificationUtil",["util/jqueryElementFactory"],function(e){function t(e,t){t&&t.forEach(function(t){-1!==t.selectors.indexOf(".unruly_native_placement")&&e.addClass(t.classNames.join(" ")),e.find(t.selectors.join(",")).addClass(t.classNames.join(" "))})}function n(e,t){t&&t.forEach(function(t){-1!==t.selectors.indexOf(".unruly_native_placement")&&e.attr(t.attributes),e.find(t.selectors.join(",")).attr(t.attributes)})}function r(t,n){n&&n.forEach(function(n){var r,i,o=n.selectors.join(","),a=n.classNames.join(" "),s="<"+n.tagName+">",d=n.location;i=e.create(s),i.addClass(a),i.attr(n.attributes||{}),"string"==typeof n.text&&n.text.length>0&&i.text(n.text),r=-1!==n.selectors.indexOf(".unruly_native_placement")?t:t.find(o),r[d](i)})}function i(e,t){t&&t.forEach(function(t){-1!==t.selectors.indexOf(".unruly_native_placement")&&e.setImportantStyle(t.css),e.find(t.selectors.join(",")).setImportantStyle(t.css)})}return{addClasses:t,addAttributes:n,addElements:r,addStyles:i}}),define("inFeedVideo/inFeedVideoContainer",["jquery","util/enable","util/elementStyleClone","tracking","util/trackingEvent","unrulyAdCore/util/window","util/elementWatcher","util/nativeAdModificationUtil"],function(e,t,n,r,i,o,a,s){function d(s,d,p){var f=p.thumbnail.selectors,A=s.find(f.join(","))[0];if(t.supportsDesktopVideoContainer()){c=e("<div>"),t.skinAttributeCopyToVideoContainer&&c.attr(n.cloneAttributes(A)),c.addClass("unruly_native_html5_container"),e(A).replaceWith(c);var m,h=e(p.basePlacement.selector),v=p.thumbnail.selectors.join(", "),g=h.find(v),y=g[0];if(o&&o.unruly&&o.unruly["native"]&&(350130===o.unruly["native"].siteId||548193===o.unruly["native"].siteId));else try{l(y),u(s,p),t.siteSupportsResponsiveInFeedVideo&&(m=new a({elementToWatch:g}),m.dispatcher.addEventListener("sizeChanged",function(){l(y),u(s,p)}))}catch(_){r.trackSplunk(i.error.ELEMENT_STYLE_CLONE_ERROR)}return c[0]}return c=e(A),A}function l(e){c.setImportantStyle(n.clone(e))}function u(e,t){var n;t.toAdd&&(n=t.toAdd.styles,s.addStyles(e,n))}var c;return{create:d,getPlayerContainer:function(){return c}}});var _temporalUndefined={};define("playerTimerTracker",["util/eventBus","tracking","util/trackingEvent"],function(e,t,n){function r(e){s[e]||(i(e),s[e]=!0)}function i(e){t.trackThirdParty(e)}function o(e){var t=_temporalUndefined;t=30,e.currentTime>=(_temporalAssertDefined(t,"COMPLETED_VIEW_LIMIT",_temporalUndefined)&&t)&&r(n.COMPLETED_VIEW)}function a(){e.addEventListener("player.timeupdate",function(e,t){o(t)}),e.addEventListener("player.ended",function(e){r(n.COMPLETE,e.target),r(n.COMPLETED_VIEW,e.target)}),e.addEventListener("player.playing",function(e){r(n.IMP,e.target),r(n.START,e.target)}),e.addEventListener("player.firstQuartile",function(e){r(n.FIRST_QUARTILE,e.target)}),e.addEventListener("player.midpoint",function(e){r(n.MIDPOINT,e.target)}),e.addEventListener("player.thirdQuartile",function(e){r(n.THIRD_QUARTILE,e.target)}),e.addEventListener("player.complete",function(e){r(n.COMPLETE,e.target)})}var s={};return{init:a}});var _temporalUndefined={};define("viewability/moat",["util/publisherWindow","util/eventBus","session/sessionInfo"],function(e,t,n){function r(e){function n(t){e.dispatchEvent({type:t,adVolume:0})}function r(e){d[e]||n(e),d[e]=!0}function i(e,t){for(o in e)e.hasOwnProperty(o)&&(a=e[o],t(o,a))}var o,a,s,d={},l=t.addEventListener.bind(t),u=t.removeEventListener.bind(t);s={"player.firstQuartile":n.bind(this,"AdVideoFirstQuartile"),"player.midpoint":n.bind(this,"AdVideoMidpoint"),"player.thirdQuartile":n.bind(this,"AdVideoThirdQuartile"),"player.pause":n.bind(this,"AdPaused"),"player.playing":function(){r("AdVideoStart"),n("AdPlaying")},"player.ended":function(){d.AdVideoComplete||i(s,u),r("AdVideoComplete")}},i(s,l)}var i="unrulymediajsv2134447588468";return{init:function(e){var t=_temporalUndefined,o=_temporalUndefined,a=_temporalUndefined;t=e.campaignConfig,o={level1:(_temporalAssertDefined(t,"campaignConfig",_temporalUndefined)&&t).aid,level2:(_temporalAssertDefined(t,"campaignConfig",_temporalUndefined)&&t).cid,level3:(_temporalAssertDefined(t,"campaignConfig",_temporalUndefined)&&t).crid,level4:(_temporalAssertDefined(t,"campaignConfig",_temporalUndefined)&&t).vid,slicer1:n.getSiteId(),slicer2:"In-Feed"},a=this._initMoatTracking(e.container,_temporalAssertDefined(o,"moatIds",_temporalUndefined)&&o,e.duration,i,e.campaignConfig.video.url),r(_temporalAssertDefined(a,"moatApi",_temporalUndefined)&&a)},_initMoatTracking:function(t,n,r,i,o){var a=e.location.protocol,s="https:"===a?"z":"js",d=e.document.createElement("script"),l=[],u={adData:{ids:n,duration:r,url:o},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},c="_moatApi"+Math.floor(1e8*Math.random());return e[c]=u,d.type="text/javascript",t&&t.insertBefore(d,t.childNodes[0]||null),d.src=a+"//"+s+".moatads.com/"+i+"/moatvideo.js#"+c,u}}});var _temporalUndefined={};define("inFeed/inFeedAdCreator",["jquery","tracking","adEventHandler","util/trackingEvent","viewability/adViewabilityHandler","inFeedVideo/inFeedVideo","util/enable","util/eventBus","util/layout/letterbox","actions/actionFactory","util/browser","util/publisherAdServerHelper","adIconHandler","inFeedVideo/inFeedVideoContainer","playerTimerTracker","viewability/moat","util/nativeAdModificationUtil"],function(e,t,n,r,i,o,a,s,d,l,u,c,p,f,A,m,h){function v(e,t,n){P=e.config.format.inFeed,L=E(P,t),L&&(g(L),y(L,P.toRemove),_(L,P),b(L,P,t,n))}function g(e){e.find("[href]").removeAttr("href"),e.find("[onclick]").removeAttr("onclick")}function y(e,t){t.elements.forEach(function(t){e.find(t.selectors.join(",")).remove()}),t.classes.forEach(function(t){-1!==t.selectors.indexOf(".unruly_native_placement")&&e.removeClass(t.classNames.join(" ")),e.find(t.selectors.join(",")).removeClass(t.classNames.join(" "))}),t.attributes.forEach(function(t){-1!==t.selectors.indexOf(".unruly_native_placement")&&e.removeAttr(t.attributeNames.join(" ")),e.find(t.selectors.join(",")).removeAttr(t.attributeNames.join(" "))}),t.textNodes&&t.textNodes.forEach(function(t){e.find(t.selectors.join(",")).text("")})}function _(e,t){var n=t.toAdd;h.addClasses(e,n.classes),h.addAttributes(e,n.attributes),h.addElements(e,n.elements),h.addStyles(e,n.styles)}function E(t,n){return R=e(t.basePlacement.selector),0===R.length?void n("base placement not found",r.error.SKIN_SETUP_FAILED):(L=R.clone(),L.addClass("unruly_native_placement"),L)}function b(e,t,n,i){var o,a,s,d,l,u,c=["disclosureMessage","title","thumbnail"],p=["description"],f=["basePlacement","clickThroughs","toRemove","toAdd"],A=t.items||t;for(o in A)if(a=t[o],d=-1===c.indexOf(o),l=-1===p.indexOf(o),u="undefined"==typeof a||!a.selectors||a.selectors.length<1,-1===f.indexOf(o)){if(!d&&u)return void n(o+" not defined",r.error.SKIN_SETUP_FAILED);if(!d||!u){if(s=e.find(a.selectors.join(",")),l&&0===s.length)return void n(o+" not found",r.error.NO_MATCHING_PLACEMENT);s.addClass("unruly_native_"+o),M[o]=s}}i()}function D(t,i,o){var d=_temporalUndefined;w(t),d=new n,(_temporalAssertDefined(d,"adEventHandler",_temporalUndefined)&&d).setupClickListeners(L,P,t,i,function(){(_temporalAssertDefined(d,"adEventHandler",_temporalUndefined)&&d).populate(t,i,function(){function n(){L.hide(),O&&O.destroyIcons()}function d(){n(),i("VPAID Creative resulted in AdError",r.error.INFEED_VIDEO_SETUP_FAILED,{apid:t.apid})}var l;A.init(),s.addEventListener("player.error",function(e,n){i(n.message,r.error.INFEED_VIDEO_SETUP_FAILED,{src:n.src,apid:t.apid})});try{l=F(P,t)}catch(u){return void i(u.message,r.error.INFEED_VIDEO_SETUP_FAILED,{apid:t.apid})}x(t),l.dispatcher.one("setupcomplete",function(){c.shrinkAdServerIFrame(),P.adInsertion&&P.adInsertion.mode&&P.adInsertion.selector?e(P.adInsertion.selector)[P.adInsertion.mode](L):R.after(L),a.moatViewabilityTracking(t)&&m.init({container:f.getPlayerContainer()[0],duration:l.getDuration(),campaignConfig:t}),s.dispatchEvent("placement.addedtodom")}),l.dispatcher.one("AdError",d),l.dispatcher.one("AdVideoComplete",n),l.dispatcher.one("readytoplay",function(){l.playWhenViewable()}),l.dispatcher.one("adimpression",function(){l.dispatcher.removeEventListener("AdError",d),o()}),l.load({adParameters:t.adParameters})})})}function w(e){var t,n,r;for(r in M)t=M[r],n=e.items[r],C(t,n);a.letterboxInFeedVideo&&I()}function C(e,t){if(t.attributes)for(var n in t.attributes)e.attr(n,t.attributes[n]);"undefined"!=typeof t.text&&e.text(t.text)}function I(){var e=R.find(P.thumbnail.selectors.join(","));d.letterbox(M.thumbnail,e)}function U(){t.trackThirdParty(r.PAUSE),t.trackActivate(r.PP_PAUSE)}function k(){t.trackThirdParty(r.RESUME),t.trackActivate(r.PP_RESUME)}function F(n,i){var d,l,c=U,p=k,A=function(){U=c,k=p},m=function(){};return d=f.create(L,i,n),l=o.createPlayer(d,i),T(3e3,r.INFEED_VIDEO_VIEW,e(d)),l.dispatcher.one("setupcomplete",function(){var t="expandedvideo.open",n="expandedvideo.close",r=a.mobileSharingLightbox&&u.isMobile();r&&(n="sharinglightbox.close"),s.addEventListener(t,function(){U=m,k=m,l.pause()}),s.addEventListener(n,function(){k=A,l.play()}),S(e(d))}),l.dispatcher.addEventListener("AdLog",function(e,n){n&&n.data&&(n.data=JSON.stringify(n.data)),n&&n.message&&(n.message=JSON.stringify(n.message)),t.trackActivate("ad_log",n)}),l.dispatcher.addEventListener("AdError",function(e,n){n&&n.data&&(n.data=JSON.stringify(n.data)),n&&n.message&&(n.message=JSON.stringify(n.message)),t.trackActivate("ad_error",n)}),l.dispatcher.addEventListener("AdClickThru",function(){t.trackThirdParty(r.VIDEO_CLICK)}),s.addEventListener("expandedvideo.close",function(){s.dispatchEvent("mute")}),s.addEventListener("expandedvideo.open",function(){s.dispatchEvent("unmute")}),s.addEventListener("unmute",function(){t.trackThirdParty(r.UNMUTE),t.trackActivate(r.UNMUTE)}),s.addEventListener("mute",function(){t.trackThirdParty(r.MUTE),t.trackActivate(r.MUTE)}),s.addEventListener("player.pause",function(){U()}),s.addEventListener("player.resume",function(){k()}),l}function T(e,n,r){var o={elementToWatch:r,viewableTimeout:e,viewablePercentage:.5};i.init(o),s.addEventListener("viewability.in_feed_video_view",function(){t.trackThirdParty(n)})}function S(e){a.inFeedVideoIcons&&(O=new p({elementToWatch:e}),O.initIcons())}function x(e){var t;t=l.createExpandedVideoCloseAction(L,e),t.init(),s.addEventListener("expandedvideo.close",t.trigger.bind(t))}var P,R,L,O,M={};return{createAd:v,populate:D}}),define("inFeed/inFeedFormat",["campaignConfigController","inFeed/inFeedAdCreator","tracking","util/trackingEvent","q","util/eventBus"],function(e,t,n,r,i,o){function a(a){var s=i.defer();return t.createAd(a,function(e,t){s.reject({message:e,errorType:t})},function(){e.getCampaignConfig(a).then(function(e){function i(e,t,n){var r={message:e,errorType:t};n&&(r.errorParams=n),s.reject(r)}function a(){n.trackThirdParty(r.PP_IMP),o.dispatchEvent("logMessages",{message:"Ad impression",event:r.PP_IMP}),s.resolve()}n.setupThirdPartyTracking(e),t.populate(e,i,a)}).fail(function(e){s.reject({message:e.message,errorType:e.type,errorParams:e.errorParams})})}),s.promise}return{setup:a}});var _temporalUndefined={};define("util/collections",[],function(){return{forOwnProperty:function(e,t){for(var n in e)e.hasOwnProperty(_temporalAssertDefined(n,"key",_temporalUndefined)&&n)&&t(_temporalAssertDefined(n,"key",_temporalUndefined)&&n)}}}),define("util/events",["util/collections"],function(e){return{map:function(t,n,r){e.forOwnProperty(r,function(e){t.addEventListener(e,function(){return n.dispatchEvent(r[e])})})}}}),define("util/layout/proportional",[],function(){return{initContainer:function(e,t){e.setImportantStyle({position:"relative","padding-bottom":1/t*100+"%",height:0})},initElement:function(e){e.setImportantStyle({width:"100%",height:"100%",position:"absolute",top:0,left:0})}}});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inArticle/inArticleTopBar",["util/dom/jqueryReset","util/eventBus"],function(e,t){function n(){var n=_temporalUndefined;return n=e.createAndReset('<img class="unruly_ia_closebutton">'),(_temporalAssertDefined(n,"img",_temporalUndefined)&&n).attr("src","//cloud-video.unrulymedia.com/native/in-art-countdown-icon-128x128x3s.gif?d="+(new Date).getTime()+1e6*Math.random()),(_temporalAssertDefined(n,"img",_temporalUndefined)&&n).setImportantStyle({height:"18px",width:"18px","float":"right",opacity:.25,transition:"all 0.25s cubic-bezier(0.445, 0.05, 0.55, 0.95)",margin:"1px 0",outline:"1px solid transparent"}),t.addEventListener("inarticle.mouseenter",function(){return(_temporalAssertDefined(n,"img",_temporalUndefined)&&n).setImportantStyle({opacity:"unset"})}),t.addEventListener("inarticle.mouseleave",function(){return(_temporalAssertDefined(n,"img",_temporalUndefined)&&n).setImportantStyle({opacity:.25})}),_temporalAssertDefined(n,"img",_temporalUndefined)&&n}var r=_temporalUndefined;return r=function(){function t(){var r=_temporalUndefined,i=_temporalUndefined;_classCallCheck(this,_temporalAssertDefined(t,"TopBar",_temporalUndefined)&&t),this.canClose=!1,r=e.createAndReset('<div class="unruly_ia_furniture"></div>'),this.closeButton=n(),(_temporalAssertDefined(r,"topbarJQuery",_temporalUndefined)&&r).append(this.closeButton),i=e.createAndReset('<div class="unruly_ia_disclosure">'),(_temporalAssertDefined(i,"disclosure",_temporalUndefined)&&i).text(" ADVERTISEMENT "),(_temporalAssertDefined(i,"disclosure",_temporalUndefined)&&i).setImportantStyle({"font-family":"sans-serif","font-size":"10px","text-align":"center",opacity:.5,margin:"0 18px","padding-top":"2px"}),(_temporalAssertDefined(r,"topbarJQuery",_temporalUndefined)&&r).setImportantStyle({height:"22px"}),(_temporalAssertDefined(r,"topbarJQuery",_temporalUndefined)&&r).append(_temporalAssertDefined(i,"disclosure",_temporalUndefined)&&i),this.topbar=(_temporalAssertDefined(r,"topbarJQuery",_temporalUndefined)&&r)[0]}return _createClass(_temporalAssertDefined(t,"TopBar",_temporalUndefined)&&t,[{key:"attachTo",value:function(e){e.append(this.topbar)}},{key:"onCloseClick",value:function(e){var t=this;this.closeButton.click(function(){t.canClose&&e()})}},{key:"allowToClose",value:function(){this.canClose=!0,this.closeButton.setImportantStyle({cursor:"pointer"})}}]),_temporalAssertDefined(t,"TopBar",_temporalUndefined)&&t}(),_temporalAssertDefined(r,"TopBar",_temporalUndefined)&&r});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inArticle/inArticleVolumeButton",["util/dom/jqueryReset","util/eventBus","tracking","util/trackingEvent"],function(e,t,n,r){var i=_temporalUndefined;return i=function(){function i(n){var r=this;_classCallCheck(this,_temporalAssertDefined(i,"VolumeButton",_temporalUndefined)&&i),this.muted=!0,this.volumeImg=e.createAndReset('<img class="unruly_ia_volume"/>'),this.volumeImg.attr("src","//video.unrulymedia.com/native/in-art-soundanimation-icon-41x48.gif"),this.volumeImg.setImportantStyle({height:"18px",width:"18px","float":"right",cursor:"pointer",opacity:.25,transition:"all 0.25s cubic-bezier(0.445, 0.05, 0.55, 0.95)","margin-top":"1px",outline:"1px solid transparent"}),t.addEventListener("inarticle.mouseenter",function(){return r.volumeImg.setImportantStyle({opacity:"unset"})}),t.addEventListener("inarticle.mouseleave",function(){return r.volumeImg.setImportantStyle({opacity:.25})}),this.volumeImg.click(function(){r.volumeImg.attr("src",r.chooseImageUrl()),r.toggleSound(n),r.muted=!r.muted}),this.preloadSoundOnImage()}return _createClass(_temporalAssertDefined(i,"VolumeButton",_temporalUndefined)&&i,[{key:"toggleSound",value:function(e){this.muted?(e.unmute(),n.trackActivate(r.UNMUTE)):(e.mute(),n.trackActivate(r.MUTE))}},{key:"preloadSoundOnImage",value:function(){var e=_temporalUndefined;e=new Image,(_temporalAssertDefined(e,"img",_temporalUndefined)&&e).onload=function(){},(_temporalAssertDefined(e,"img",_temporalUndefined)&&e).src=this.chooseImageUrl()}},{key:"chooseImageUrl",value:function(){var e=_temporalUndefined;return e=this.muted?"on":"off","//video.unrulymedia.com/native/in-art-sound"+(_temporalAssertDefined(e,"state",_temporalUndefined)&&e)+"-icon-128x128.png"}},{key:"attachTo",value:function(e){e.append(this.volumeImg)}}]),_temporalAssertDefined(i,"VolumeButton",_temporalUndefined)&&i}(),_temporalAssertDefined(i,"VolumeButton",_temporalUndefined)&&i});var _temporalUndefined={},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inArticle/inArticleBottomBar",["util/dom/jqueryReset","inArticle/inArticleVolumeButton"],function(e,t){var n=_temporalUndefined;return n=function(){function n(r){var i=_temporalUndefined,o=_temporalUndefined;_classCallCheck(this,_temporalAssertDefined(n,"BottomBar",_temporalUndefined)&&n),this.player=r,i=e.createAndReset('<div class="unruly_ia_bottombar"></div>'),o=e.createAndReset('<div class="unruly_ia_progressbar"></div>'),(_temporalAssertDefined(o,"progressBar",_temporalUndefined)&&o).setImportantStyle({height:"2px",width:0,"background-color":"#0bbbef",transition:"all 0.1s linear"}),(_temporalAssertDefined(i,"bottomBarJQuery",_temporalUndefined)&&i).append(_temporalAssertDefined(o,"progressBar",_temporalUndefined)&&o),this.progressBar=_temporalAssertDefined(o,"progressBar",_temporalUndefined)&&o,this.bottomBar=(_temporalAssertDefined(i,"bottomBarJQuery",_temporalUndefined)&&i)[0],(_temporalAssertDefined(i,"bottomBarJQuery",_temporalUndefined)&&i).setImportantStyle({height:"20px"}),new t(r).attachTo(_temporalAssertDefined(i,"bottomBarJQuery",_temporalUndefined)&&i)}return _createClass(_temporalAssertDefined(n,"BottomBar",_temporalUndefined)&&n,[{key:"attachTo",value:function(e){e.append(this.bottomBar)}},{key:"populate",value:function(){var e=this,t=_temporalUndefined;t=function(t,n){var r=_temporalUndefined;r=n.percentComplete,(_temporalAssertDefined(r,"percentComplete",_temporalUndefined)&&r)<=100&&e.progressBar.setImportantStyle({width:(_temporalAssertDefined(r,"percentComplete",_temporalUndefined)&&r)+"%"})},this.player.player.dispatcher.addEventListener("videoProgress",_temporalAssertDefined(t,"updateProgressBar",_temporalUndefined)&&t)}}]),_temporalAssertDefined(n,"BottomBar",_temporalUndefined)&&n}(),_temporalAssertDefined(n,"BottomBar",_temporalUndefined)&&n});var _temporalUndefined={};define("inArticle/inArticleAdCreator",["viewability/viewability","util/eventDispatcher","util/events","tracking","util/elementStyleReset","util/publisherWindow","util/jqueryElementFactory","util/layout/proportional","inArticle/inArticleTopBar","inArticle/inArticleBottomBar","util/enable","util/eventBus","util/trackingEvent"],function(e,t,n,r,i,o,a,s,d,l,u,c,p){function f(e){return function(){return setTimeout(e,3e3)}}function A(){_temporalAssertDefined(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h,"inArticleContainer",_temporalUndefined),h=a.create('<div class="unruly_in_article_placement">'),_temporalAssertDefined(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v,"aspectRatioContainer",_temporalUndefined),v=a.create('<div class="unruly_in_article_video_container">'),(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v).setImportantStyle({"background-color":"black"}),i.resetStyles(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h),i.resetStyles(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v),s.initContainer(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v,16/9),(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).setImportantStyle({transition:"all 0.5s cubic-bezier(0.445, 0.05, 0.55, 0.95) 0.2s",overflow:"hidden"}),(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).setImportantStyle({"max-height":"1px"}),(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).mouseenter(function(){return c.dispatchEvent("inarticle.mouseenter")}),(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).mouseleave(function(){return c.dispatchEvent("inarticle.mouseleave")})}var m=_temporalUndefined,h=_temporalUndefined,v=_temporalUndefined,g=_temporalUndefined;return m=new t({}),h=void 0,v=void 0,g=void 0,{canCreate:function(e){return 1===a.create(e).length},createAd:function(t,i){var s=this,u=_temporalUndefined,c=_temporalUndefined,y=_temporalUndefined,_=_temporalUndefined;A(),u=new i({onFinished:this.collapse}),_temporalAssertDefined(_temporalAssertDefined(g,"basePlacementSelector",_temporalUndefined)&&g,"basePlacementSelector",_temporalUndefined),g=t.basePlacement.selector,a.create(_temporalAssertDefined(g,"basePlacementSelector",_temporalUndefined)&&g).append(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h),c=new e({elementToWatch:_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h,viewablePercentage:.25}),r.trackThirdParty(p.PP_IMP),y=new d,(_temporalAssertDefined(y,"topbar",_temporalUndefined)&&y).attachTo(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h),(_temporalAssertDefined(y,"topbar",_temporalUndefined)&&y).onCloseClick(this.collapse),(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v).append((_temporalAssertDefined(u,"videoAdSpace",_temporalUndefined)&&u).videoContainer),(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).append(_temporalAssertDefined(v,"aspectRatioContainer",_temporalUndefined)&&v),_=new l(_temporalAssertDefined(u,"videoAdSpace",_temporalUndefined)&&u),(_temporalAssertDefined(_,"bottomBar",_temporalUndefined)&&_).attachTo(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h),n.map((_temporalAssertDefined(c,"viewability",_temporalUndefined)&&c).dispatcher,_temporalAssertDefined(m,"dispatcher",_temporalUndefined)&&m,{inview:"expanded"}),o.addEventListener("message",function(e){var t=_temporalUndefined;t=["unruly-complete","unruly-aderror"],(_temporalAssertDefined(t,"eventsToCollapse",_temporalUndefined)&&t).indexOf(e.data)>-1&&s.collapse()}),this.onExpanded(function(){return(_temporalAssertDefined(u,"videoAdSpace",_temporalUndefined)&&u).populate(t)}),this.onExpanded(this.expand),this.onExpanded(f(function(){return(_temporalAssertDefined(y,"topbar",_temporalUndefined)&&y).allowToClose()})),this.onExpanded(function(){return(_temporalAssertDefined(_,"bottomBar",_temporalUndefined)&&_).populate()})},onExpanded:function(e){(_temporalAssertDefined(m,"dispatcher",_temporalUndefined)&&m).one("expanded",e)},collapse:function(){(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).setImportantStyle({"max-height":0,"margin-top":0}),r.trackActivate("ia_collapsed"),o.setTimeout(function(){return(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).remove()},1e3)},expand:function(){var e=_temporalUndefined;e=(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).width()/16*9+50,(_temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h).setImportantStyle({"max-height":(_temporalAssertDefined(e,"computedMaxHeight",_temporalUndefined)&&e)+"px","margin-top":"16px"}),r.trackActivate("ia_expanded")},getInArticleContainer:function(){return _temporalAssertDefined(h,"inArticleContainer",_temporalUndefined)&&h}}});var _temporalUndefined={},_get=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var d=s.get;return void 0===d?void 0:d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=a,r=!0,s=l=void 0}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("inArticle/inArticleContent",["util/dom/jqueryReset","util/layout/proportional","viewability/viewability","inFeedVideo/flashVPAIDDirectEmbedPlayer","util/eventBus","util/publisherAdServerHelper","util/enable","inFeedVideo/videoEventDispatcher","playerTimerTracker"],function(e,t,n,r,i,o,a,s,d){
var l=_temporalUndefined,u=_temporalUndefined,c=_temporalUndefined;return l=function(){function n(r){_classCallCheck(this,_temporalAssertDefined(n,"InArticleContentSpace",_temporalUndefined)&&n),this.videoContainer=e.createAndReset(r),t.initElement(this.videoContainer)}return _createClass(_temporalAssertDefined(n,"InArticleContentSpace",_temporalUndefined)&&n,[{key:"populate",value:function(e){}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}}]),_temporalAssertDefined(n,"InArticleContentSpace",_temporalUndefined)&&n}(),u=function(e){function t(e){_classCallCheck(this,_temporalAssertDefined(t,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&t),_get(Object.getPrototypeOf((_temporalAssertDefined(t,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&t).prototype),"constructor",this).call(this,'<div class="unruly_in_article_video_container">'),this.options=e||{}}return _inherits(_temporalAssertDefined(t,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&t,e),_createClass(_temporalAssertDefined(t,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&t,[{key:"populate",value:function(e){var t=this,l=_temporalUndefined,u=_temporalUndefined;this.videoContainer.setImportantStyle({"background-color":"black"}),l=new r.FlashVPAIDDirectEmbedPlayer(e.vpaidSwfUrl,this.videoContainer[0]),a.inArticleVASTEventTracking&&(s.setupPlayerEventReFiring(_temporalAssertDefined(l,"player",_temporalUndefined)&&l),d.init()),(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).dispatcher.one("readytoplay",(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).play),(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).dispatcher.one("setupcomplete",function(){o.shrinkAdServerIFrame(),i.dispatchEvent("placement.addedtodom")}),this.options.onFinished&&!function(){var e=_temporalUndefined;e=!1,["AdVideoComplete","AdError","AdStopped"].forEach(function(n){return(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).dispatcher.addEventListener(n,function(){_temporalAssertDefined(_temporalAssertDefined(e,"onFinishedFiredOnce",_temporalUndefined)&&e,"onFinishedFiredOnce",_temporalUndefined)&&_temporalAssertDefined(e,"onFinishedFiredOnce",_temporalUndefined)&&e||t.options.onFinished(),_temporalAssertDefined(_temporalAssertDefined(_temporalAssertDefined(e,"onFinishedFiredOnce",_temporalUndefined)&&e,"onFinishedFiredOnce",_temporalUndefined)&&_temporalAssertDefined(e,"onFinishedFiredOnce",_temporalUndefined)&&e,"onFinishedFiredOnce",_temporalUndefined),e=!0})})}(),(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).load(),u=new n({elementToWatch:this.videoContainer,viewablePercentage:.25}),(_temporalAssertDefined(u,"viewability",_temporalUndefined)&&u).dispatcher.addEventListener("inview",function(){return(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).play()}),(_temporalAssertDefined(u,"viewability",_temporalUndefined)&&u).dispatcher.addEventListener("outofview",function(){return(_temporalAssertDefined(l,"player",_temporalUndefined)&&l).pause()}),this.player=_temporalAssertDefined(l,"player",_temporalUndefined)&&l}},{key:"mute",value:function(){this.player.mute()}},{key:"unmute",value:function(){this.player.unmute()}}]),_temporalAssertDefined(t,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&t}(_temporalAssertDefined(l,"InArticleContentSpace",_temporalUndefined)&&l),c=function(e){function t(){_classCallCheck(this,_temporalAssertDefined(t,"InArticleVideoAdSpace",_temporalUndefined)&&t),_get(Object.getPrototypeOf((_temporalAssertDefined(t,"InArticleVideoAdSpace",_temporalUndefined)&&t).prototype),"constructor",this).call(this,'<iframe scrolling="no">')}return _inherits(_temporalAssertDefined(t,"InArticleVideoAdSpace",_temporalUndefined)&&t,e),_createClass(_temporalAssertDefined(t,"InArticleVideoAdSpace",_temporalUndefined)&&t,[{key:"populate",value:function(e){var t=_temporalUndefined,r=_temporalUndefined;t=this.videoContainer,(_temporalAssertDefined(t,"iframe",_temporalUndefined)&&t)[0].src=e.contentUrl,r=new n({elementToWatch:_temporalAssertDefined(t,"iframe",_temporalUndefined)&&t,viewablePercentage:.25}),(_temporalAssertDefined(r,"viewability",_temporalUndefined)&&r).dispatcher.addEventListener("inview",function(){return(_temporalAssertDefined(t,"iframe",_temporalUndefined)&&t)[0].contentWindow.postMessage("unruly-play","*")}),(_temporalAssertDefined(r,"viewability",_temporalUndefined)&&r).dispatcher.addEventListener("outofview",function(){return(_temporalAssertDefined(t,"iframe",_temporalUndefined)&&t)[0].contentWindow.postMessage("unruly-pause","*")})}}]),_temporalAssertDefined(t,"InArticleVideoAdSpace",_temporalUndefined)&&t}(_temporalAssertDefined(l,"InArticleContentSpace",_temporalUndefined)&&l),{InArticleUnrulyVPAIDAdSpace:_temporalAssertDefined(u,"InArticleUnrulyVPAIDAdSpace",_temporalUndefined)&&u,InArticleContentSpace:_temporalAssertDefined(l,"InArticleContentSpace",_temporalUndefined)&&l,InArticleVideoAdSpace:_temporalAssertDefined(c,"InArticleVideoAdSpace",_temporalUndefined)&&c}});var _temporalUndefined={};define("inArticle/inArticleFormat",["q","inArticle/inArticleAdCreator","inArticle/inArticleContent","util/enable","campaignConfigController","util/trackingEvent","util/browser","tracking"],function(e,t,n,r,i,o,a,s){return{setup:function(d){var l=_temporalUndefined,u=_temporalUndefined,c=_temporalUndefined,p=_temporalUndefined,f=_temporalUndefined,A=_temporalUndefined,m=_temporalUndefined,h=_temporalUndefined,v=_temporalUndefined,g=_temporalUndefined;return l=d.config.format.inArticle,u=(_temporalAssertDefined(l,"inArticleConfig",_temporalUndefined)&&l).basePlacement.selector,c=function(e){if(!e)throw new Error("Cannot find base placement: "+(_temporalAssertDefined(u,"basePlacementSelector",_temporalUndefined)&&u))},p=function(e){if(!e.video.isFlashVPAID())throw{type:o.error.NO_ADS,message:"VAST file does not contain VPAID Creative"};return e},f=function(e){return(_temporalAssertDefined(l,"inArticleConfig",_temporalUndefined)&&l).vpaidSwfUrl=e.video.url,_temporalAssertDefined(l,"inArticleConfig",_temporalUndefined)&&l},A=function(e){return s.setupThirdPartyTracking(e),e},m=function(e){return t.createAd(e,n.InArticleUnrulyVPAIDAdSpace)},h=function(){return t.createAd(_temporalAssertDefined(l,"inArticleConfig",_temporalUndefined)&&l,n.InArticleVideoAdSpace)},v=function(e){throw{message:e.message,errorType:e.type,errorParams:e.errorParams}},g=function(){if(!a.supportsFlash())throw{errorType:o.error.UNSUPPORTED_BROWSER,message:"Browser does not support Flash"}},e.fcall(t.canCreate,_temporalAssertDefined(u,"basePlacementSelector",_temporalUndefined)&&u).then(_temporalAssertDefined(c,"checkSelector",_temporalUndefined)&&c).then(_temporalAssertDefined(g,"checkFlash",_temporalUndefined)&&g).then(function(){return r.inArticleCustomContent?e((_temporalAssertDefined(h,"createJWPlayerVPAIDAd",_temporalUndefined)&&h)()):i.getCampaignConfig(d).then(_temporalAssertDefined(p,"excludeNonVPAID",_temporalUndefined)&&p).then(_temporalAssertDefined(A,"setupTracking",_temporalUndefined)&&A).then(_temporalAssertDefined(f,"transformCampaignConfigToInArticleConfig",_temporalUndefined)&&f).then(_temporalAssertDefined(m,"createUnrulyVPAIDAd",_temporalUndefined)&&m).fail(_temporalAssertDefined(v,"mapError",_temporalUndefined)&&v)})}}});var _temporalUndefined={};define("adFormatFactory",["inFeed/inFeedFormat","inArticle/inArticleFormat"],function(e,t){return{createAdFormat:function(n){var r=n.config.format.inArticle;return _temporalAssertDefined(r,"isInArticle",_temporalUndefined)&&r?t:e}}}),function(e){"function"==typeof define?define("es5shim",e):"function"==typeof YUI?YUI.add("es5",e):e()}(function(){function e(){}function t(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function n(e){var t=typeof e;return null===e||"undefined"===t||"boolean"===t||"number"===t||"string"===t}function r(e){var t,r,i;if(n(e))return e;if(r=e.valueOf,"function"==typeof r&&(t=r.call(e),n(t)))return t;if(i=e.toString,"function"==typeof i&&(t=i.call(e),n(t)))return t;throw new TypeError}8!==parseInt("08")&&(parseInt=function(e){var t=/^0[xX]/;return function(n,r){return n=String(n).trim(),+r||(r=t.test(n)?16:10),e(n,r)}}(parseInt)),Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=p.call(arguments,1),i=function(){if(this instanceof d){var e=n.apply(this,r.concat(p.call(arguments)));return Object(e)===e?e:this}return n.apply(t,r.concat(p.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],s=0;o>s;s++)a.push("$"+s);var d=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(i);return n.prototype&&(e.prototype=n.prototype,d.prototype=new e,e.prototype=null),d});var i,o,a,s,d,l=Function.prototype.call,u=Array.prototype,c=Object.prototype,p=u.slice,f=l.bind(c.toString),A=l.bind(c.hasOwnProperty);if((d=A(c,"__defineGetter__"))&&(i=l.bind(c.__defineGetter__),o=l.bind(c.__defineSetter__),a=l.bind(c.__lookupGetter__),s=l.bind(c.__lookupSetter__)),2!=[1,2].splice(0).length){var m=Array.prototype.splice,h=Array.prototype.push,v=Array.prototype.unshift;!function(){function e(e){for(var t=[];e--;)t.unshift(e);return t}var t,n=[];return n.splice.bind(n,0,0).apply(null,e(20)),n.splice.bind(n,0,0).apply(null,e(26)),t=n.length,n.splice(5,0,"XXX"),t+1==n.length?!0:void 0}()?Array.prototype.splice=function(e,t){var n,r=p.call(arguments,2),i=r.length;if(!arguments.length)return[];if(void 0===e&&(e=0),void 0===t&&(t=this.length-e),i>0){if(0>=t){if(e==this.length)return h.apply(this,r),[];if(0==e)return v.apply(this,r),[]}return n=p.call(this,e,e+t),r.push.apply(r,p.call(this,e+t,this.length)),r.unshift.apply(r,p.call(this,0,e)),r.unshift(0,this.length),m.apply(this,r),n}return m.call(this,e,t)}:Array.prototype.splice=function(e,t){return arguments.length?m.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(p.call(arguments,2))):[]}}if(1!=[].unshift(0)){var v=Array.prototype.unshift;Array.prototype.unshift=function(){return v.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(e){return"[object Array]"==f(e)});var g=Object("a"),y="a"!=g[0]||!(0 in g),_=!0;if(Array.prototype.forEach&&Array.prototype.forEach.call("foo",function(e,t,n){"object"!=typeof n&&(_=!1)}),Array.prototype.forEach&&_||(Array.prototype.forEach=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=f(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var a=0;r>a;a++)a in n&&(i[a]=e.call(o,n[a],a,t));return i}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=R(this),r=y&&"[object String]"==f(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var s=0;i>s;s++)s in r&&(t=r[s],e.call(a,t,s,n)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in n&&!e.call(i,n[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in n&&e.call(i,n[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=n.length>>>0;if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=e.call(void 0,i,n[o],o,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=R(this),n=y&&"[object String]"==f(this)?this.split(""):t,r=n.length>>>0;if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in this&&(i=e.call(void 0,i,n[o],o,t));while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var n=y&&"[object String]"==f(this)?this.split(""):R(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=t(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var n=y&&"[object String]"==f(this)?this.split(""):R(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,t(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&e===n[i])return i;return-1}),!Object.keys){var E=!0,b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],D=b.length;for(var w in{toString:null})E=!1;Object.keys=function L(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var L=[];for(var t in e)A(e,t)&&L.push(t);if(E)for(var n=0,r=D;r>n;n++){var i=b[n];A(e,i)&&L.push(i)}return L}}var C=-621987552e5,I="-000001";Date.prototype.toISOString&&-1!==new Date(C).toISOString().indexOf(I)||(Date.prototype.toISOString=function(){var e,t,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return r+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var U=!1;try{U=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(C).toJSON().indexOf(I)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(k){}U||(Date.prototype.toJSON=function(e){var t,n=Object(this),i=r(n);if("number"==typeof i&&!isFinite(i))return null;if(t=n.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(n)}),!Date.parse,0||(Date=function(e){function t(n,r,i,o,a,s,d){var l=arguments.length;if(this instanceof e){var u=1==l&&String(n)===n?new e(t.parse(n)):l>=7?new e(n,r,i,o,a,s,d):l>=6?new e(n,r,i,o,a,s):l>=5?new e(n,r,i,o,a):l>=4?new e(n,r,i,o):l>=3?new e(n,r,i):l>=2?new e(n,r):l>=1?new e(n):new e;return u.constructor=t,u}return e.apply(this,arguments)}function n(e,t){var n=t>1?1:0;return o[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function r(t){return Number(new e(1970,0,1,0,0,0,t))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in e)t[a]=e[a];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var o=i.exec(t);if(o){var a,s=Number(o[1]),d=Number(o[2]||1)-1,l=Number(o[3]||1)-1,u=Number(o[4]||0),c=Number(o[5]||0),p=Number(o[6]||0),f=Math.floor(1e3*Number(o[7]||0)),A=Boolean(o[4]&&!o[8]),m="-"===o[9]?1:-1,h=Number(o[10]||0),v=Number(o[11]||0);return(c>0||p>0||f>0?24:25)>u&&60>c&&60>p&&1e3>f&&d>-1&&12>d&&24>h&&60>v&&l>-1&&l<n(s,d+1)-n(s,d)&&(a=60*(24*(n(s,d)+l)+u+h*m),a=1e3*(60*(a+c+v*m)+p)+f,A&&(a=r(a)),a>=-864e13&&864e13>=a)?a:NaN}return e.parse.apply(this,arguments)},t}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||!function(){function e(e,t){for(var n=-1;++n<a;)t+=e*s[n],s[n]=t%o,t=Math.floor(t/o)}function t(e){for(var t=a,n=0;--t>=0;)n+=s[t],s[t]=Math.floor(n/e),n=n%e*o}function n(){for(var e=a,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);""===t?t=n:t+="0000000".slice(0,7-n.length)+n}return t}function r(e,t,n){return 0===t?n:t%2===1?r(e,t-1,n*e):r(e*e,t/2,n)}function i(e){for(var t=0;e>=4096;)t+=12,e/=4096;for(;e>=2;)t+=1,e/=2;return t}var o,a,s;o=1e7,a=6,s=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var a,s,d,l,u,c,p,f;if(a=Number(o),a=a!==a?0:Math.floor(a),0>a||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(s=Number(this),s!==s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(d="",0>s&&(d="-",s=-s),l="0",s>1e-21)if(u=i(s*r(2,69,1))-69,c=0>u?s*r(2,-u,1):s/r(2,u,1),c*=4503599627370496,u=52-u,u>0){for(e(0,c),p=a;p>=7;)e(1e7,0),p-=7;for(e(r(10,p,1),0),p=u-1;p>=23;)t(1<<23),p-=23;t(1<<p),e(1,1),t(2),l=n()}else e(0,c),e(1<<-u,0),l=n()+"0.00000000000000000000".slice(2,2+a);return a>0?(f=l.length,l=a>=f?d+"0.0000000000000000000".slice(0,a-f+2)+l:d+l.slice(0,f-a)+"."+l.slice(f-a)):l=d+l,l}}();var F=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e=void 0===/()??/.exec("")[1];String.prototype.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==Object.prototype.toString.call(t))return F.apply(this,arguments);var i,o,a,s,d=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),u=0,t=new RegExp(t.source,l+"g");for(r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",l)),n=void 0===n?-1>>>0:n>>>0;(o=t.exec(r))&&(a=o.index+o[0].length,!(a>u&&(d.push(r.slice(u,o.index)),!e&&o.length>1&&o[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&Array.prototype.push.apply(d,o.slice(1)),s=o[0].length,u=a,d.length>=n)));)t.lastIndex===o.index&&t.lastIndex++;return u===r.length?(s||!t.test(""))&&d.push(""):d.push(r.slice(u)),d.length>n?d.slice(0,n):d}}():"0".split(void 0,0).length&&(String.prototype.split=function(e,t){return void 0===e&&0===t?[]:F.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var T=String.prototype.substr;String.prototype.substr=function(e,t){return T.call(this,0>e&&(e=this.length+e)<0?0:e,t)}}var S="	\n\f\r \u2028\u2029\ufeff";if(!String.prototype.trim||S.trim()){S="["+S+"]";var x=new RegExp("^"+S+S+"*"),P=new RegExp(S+S+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(x,"").replace(P,"")}}var R=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}});var _temporalUndefined={};define("adManager",["unrulyAdCore/util/window","util/publisherWindow","publisherConfigController","placementController","placementFinder","tracking","util/trackingEvent","util/browser","util/publisherApi","audienceTargeting","q","util/eventBus","logging/loggingController","adFormatFactory","util/enable"],function(e,t,n,r,i,o,a,s,d,l,u,c,p,f,A){function m(e,t){c.dispatchEvent("logMessages",{message:e,errorType:t})}function h(e,t,n){return t=t||a.error.ERROR,n=n||{},n.message=e,m(e,t),t!==a.error.PLACEMENT_ALREADY_FOUND?o.trackActivate(t,n):void 0}function v(e,t){h(e,t),d.onFinished(),d.onFallback()}function g(n,r){return null===t.location.search.match(/[&|?]UnrulyDisableIFPP=1(\&|$)/)&&e.unruly&&e.unruly["native"]?(p.init(),void(s.isSupported()?n():(d.onFinished(),d.onFallback(),r()))):void d.onFinished()}function y(e){var t=!1;return e.map(function(e){var n=u.defer(),r=new i;return r.matchPlacement(e,function(e,r){var i=_temporalUndefined;return e?void n.reject({message:e.message,errorType:e.errorType}):t?void n.reject({message:"placement_already_found",errorType:a.error.PLACEMENT_ALREADY_FOUND}):(t=!0,i=f.createAdFormat(r),void(_temporalAssertDefined(i,"adFormat",_temporalUndefined)&&i).setup(r).then(n.resolve).fail(n.reject))}),n.promise})}function _(){var t;return A.inProduction&&l.syncData(),require(["es5shim"],function(){n.getPublisherConfig(e.unruly["native"].siteId,function(e){var n,i;try{n=r.verifyConfig(e)}catch(o){return void v(o.message,o.errorType)}i=y(n),t=u.allSettled(i).then(function(e){var t=_temporalUndefined,n=_temporalUndefined;return t=e.filter(function(e){return"rejected"===e.state}),p.log(e),n=(_temporalAssertDefined(t,"fails",_temporalUndefined)&&t).map(function(e){var t=_temporalUndefined;return t=e.reason||{},h((_temporalAssertDefined(t,"reason",_temporalUndefined)&&t).message,(_temporalAssertDefined(t,"reason",_temporalUndefined)&&t).errorType,(_temporalAssertDefined(t,"reason",_temporalUndefined)&&t).errorParams)}),d.onFinished(),_temporalAssertDefined(n,"failTrackingPixelPromises",_temporalUndefined)&&n}).then(function(e){return u.allSettled(e).then(function(){var t=_temporalUndefined;t=e.length===n.length,_temporalAssertDefined(t,"allPlacementsFailed",_temporalUndefined)&&t&&d.onFallback()})})},v)}),t}return{init:g,load:_,_trackError:h}}),define("mainInitialiser",["adManager","util/stopwatch","tracking","util/trackingEvent","util/global"],function(e,t,n,r,i){function o(){function o(){e.load()}function a(){n.trackActivate(r.error.UNSUPPORTED_BROWSER)}t.init(),t.start("corejs",i._adLoaderTime),t.stop("corejs"),e.init(o,a)}return{init:o}}),require([],function(){try{!function(){return window.top.document}(),require(["mainInitialiser"],function(e){e.init()})}catch(e){require(["tracking","util/trackingEvent"],function(t,n){t.trackActivate(n.error.BLOCKED_CROSS_ORIGIN_FRAME,{message:e.message},{noTopWindowAccess:!0})})}}),define("main",function(){}),function(e){"function"==typeof define&&define.amd?define("jqueryxdomainrequest",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,n=/^get|post$/i,r=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(i,o,a){if(i.crossDomain&&i.async&&n.test(i.type)&&t.test(i.url)&&r.test(i.url)){var s=null;return{send:function(t,n){var r="",a=(o.dataType||"").toLowerCase();s=new XDomainRequest,/^\d+$/.test(o.timeout)&&(s.timeout=o.timeout),s.ontimeout=function(){n(500,"timeout")},s.onload=function(){var t="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,r={code:200,message:"success"},i={text:s.responseText};try{if("html"===a||/text\/html/i.test(s.contentType))i.html=s.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(s.contentType))try{i.json=e.parseJSON(s.responseText)}catch(o){r.code=500,r.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(s.contentType)){var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;try{d.loadXML(s.responseText)}catch(o){d=void 0}if(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+s.responseText;i.xml=d}}catch(l){throw l}finally{n(r.code,r.message,i,t)}},s.onprogress=function(){},s.onerror=function(){n(500,"error",{text:s.responseText})},o.data&&(r="string"===e.type(o.data)?o.data:e.param(o.data)),s.open(i.type,i.url),s.send(r)},abort:function(){s&&s.abort()}}}}),e}),define("jQueryPlugins/importantStyle",["jquery"],function(e){function t(e){for(var t,n=/(\w+(?:\-\w+)*)\s*:\s*([^;!]+)\s*(!important)?\s*;?/gi,r={};t=n.exec(e);)r[t[1]]={value:t[2].trim(),important:!!t[3]};return r}function n(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push(n+": "+r.value+(r.important?" !important":""))}return t.join("; ")+";"}e.fn.setImportantStyle=function(e,r){if(r&&"string"==typeof e){var i=e;e={},e[i]=r}var o=t(this.attr("style"));for(var a in e)o[a]={value:e[a],important:!0};return this.attr("style",n(o)),this}}),define("jQueryPlugins/waitUntilExists",["jquery","../util/publisherWindow"],function(e,t){var n={},r=function(e){n[e]&&(t.clearInterval(n[e]),n[e]=null)},i="waitUntilExists.found";e.fn.waitUntilExists=function(o,a,s){var d=this.selector,l=e(d,t.document),u=l.not(function(){return e(this).data(i)});return"remove"===o?r(d):(u.data(i,!0),u.length>0&&o(),a&&l.length?r(d):s||(n[d]=t.setInterval(function(){l.waitUntilExists(o,a,!0)},500))),l}}),requirejs.config({baseUrl:".",paths:{jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min"},map:{"*":{jquery:"util/unruly-jquery"},"util/unruly-jquery":{jquery:"jquery"},jqueryxdomainrequest:{jquery:"jquery"},"jQueryPlugins/importantStyle":{jquery:"jquery"},"jQueryPlugins/waitUntilExists":{jquery:"jquery"}}}),define("util/unruly-jquery",["util/publisherWindow","jquery","jqueryxdomainrequest","../jQueryPlugins/importantStyle","../jQueryPlugins/waitUntilExists"],function(e,t,n,r,i){var o=function(n,r){try{return t(n,r||e.document)}catch(i){}};for(var a in t)t.hasOwnProperty(a)&&(o[a]=t[a]);return t.support.cors=!0,o});