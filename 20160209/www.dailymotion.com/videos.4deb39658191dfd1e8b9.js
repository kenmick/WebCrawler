webpackJsonp([5],{0:function(e,t,n){n(1),n(2),n(8),n(21),n(89),n(9),n(45),n(108),n(72),n(106),n(111),n(104),n(27),n(105),n(30),n(124),n(33),n(102),n(103),n(97),n(98),n(109),n(42),n(28),n(129),n(128),n(125),_DM.define("Pg_Videos",function(){var e={initEvents:function(){$("#js-show-playlist-description, #js-hide-playlist-description").click(e.togglePlaylistDescription)},togglePlaylistDescription:function(){$(this).fadeOut(200,function(){$(this).siblings().fadeIn(),$("#js-playlist-description").slideUp(),$("#js-hide-playlist-description:visible").length&&$("#js-playlist-description").slideDown()})},initGravity:function(){e.GRAVITY_ALLOWED&&DM_JS.load("/js/lib/dm/gravity.js","DM_Gravity",function(){_gravity.push({type:"set",split:e.GRAVITY_SPLIT});var t=/^\/.+\/search\/([^\/]+)\/./,n=t.exec(document.location.pathname);n&&_gravity.push({type:"event",eventType:"SEARCH",searchExpr:n[1]})})},loadSecondaryResources:function(){e.WITH_USER_SEARCH&&DM_JS.load("@user_search.js","Mo_SmartSelect"),e.WITH_EDITABLE&&DM_JS.load("@videosv2_editable.js","DM_Videos_Edit"),e.WITH_PLAYER&&DM_JS.load("@videosv2_with_player.js","Sd_PlayerRemote"),e.WITH_TIP_CHANNEL&&DM_JS.load("/js/views/shared/user/tip/channel.js","Sd_User_Tip_Channel")},__onDomReady:function(){e.initEvents(),e.initGravity(),e.loadSecondaryResources(),DM_Gravity.setProps()},__initialize:function(){DM_Prefetch.initialize(),DM_RUM_Init.initialize(),DM_Gravity.initialize(),DM_HapYak.initialize(),DM_DisplayAds.initialize(),DM_Masscast.initialize(),DM_RequestWatcher.initialize("search")}};return e},!0)},1:function(e,t,n){n(65),n(2),window.store=n(889),function(e){"cache0";function t(e){var t={};return $.extend(t,window.store),t.get=function(t){if(e[t]||(e[t]={}),e[t].version){var n=store.get("_"+t+"-version");if(!n||parseFloat(e[t].version)!==parseFloat(n))return void 0}return e[t].expire?storeWithExpiration.get(t):store.get(t)},t.set=function(t,n){return e[t]||(e[t]={}),e[t].version&&store.set("_"+t+"-version",e[t].version),e[t].expire?storeWithExpiration.set(t,n,e[t].expire):store.set(t,n)},t.remove=function(e){return store.remove("_"+e+"-version"),store.remove(e)},t}var i={},o={inject:function(t,n){if(e.DM_ENV[t]){e[t]=e[t]||{},n=n||i[t]||e[t];for(var o in e.DM_ENV[t])e.DM_ENV[t].hasOwnProperty(o)&&(n[o]=e.DM_ENV[t][o])}}},a={define:function(n,a,r){var s=i[n]||e[n];(!s||s.__preModule)&&(s=a(),s&&(o.inject(n,s),r?e[n]=s:i[n]=s,s.store=s.__localstorageConf?t(s.__localstorageConf):window.store,delete s.__localstorageConf,s.__initialize&&s.__initialize(),delete s.__initialize,s.__onDomReady&&$(s.__onDomReady),delete s.__onDomReady,delete s.__preModule))},__debug:function(t){return i[t]||e[t]||null}};PubSub.subscribe("envs:added",function(e){o.inject(e)}),e._DM=a,n(68)}(window)},3:function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(2),__webpack_require__(14),__webpack_require__(5),__webpack_require__(64),__webpack_require__(11),__webpack_require__(7),_DM.define("DM_Ajax",function(){var _jsonCallCallbacks={},_currentPopup=null,_self={clicked_obj:{},loading_cnt:0,ajaxify:function(e){0===e.length&&(e=$("body"));var t=e.get(0);try{if("A"==t.tagName&&e.hasClass("ajax"))return void _self.ajaxifyLink(e)}catch(n){}e.find('a[name="ajax"], .ajaxlink').each(function(e,t){_self.ajaxifyLink($(t))});var i;i="FORM"==t.tagName?e:e.find("form.ajax"),i.each(function(e,t){_self.addAjaxForm(t)})},addAjaxForm:function(e){$form=$(e),$form.data("alreadyObserved")||($form.data("alreadyObserved",!0),_self.parseAction($form))},parseAction:function($el){node=$el.get(0);var actionRegex=new RegExp("action:(replaceParent|replaceSelf|replace|insert|top|bottom|before|after|fade|slideUp|hide|popup|redirect|update|toggleOrUpdate|cleanOrUpdate)"),i=0,args=[],action=null,formAction=null,doAjaxCall=!0,href=$el.attr("href")?$el.attr("href"):$el.attr("data-href")||null;if("FORM"!=node.nodeName||$el.hasClass("form_edit_in_place")||(formAction="replace"),!formAction&&href&&node.className.match(/dmgetjsparam/)){var newArg=eval(hex2str($el.findParamInClass("dmgetjsparam")));if("string"==typeof newArg&&""===newArg)return!1;var hrefAttr=$el.attr("href")?"href":"data-href";$el.attr(hrefAttr,href.replace(/jsparam.*jsparam/,"jsparam"+encodeURIComponent(newArg)+"jsparam"))}if(formAction||(node.getAttribute("data-action")?action=node.getAttribute("data-action"):node.className.match(actionRegex)&&(action=node.className.match(actionRegex)[1])),formAction||action){var actionToPerform=null;if(actionToPerform=formAction?formAction:action,node.getAttribute("data-target"))args[args.length]=node.getAttribute("data-target");else for(;arg=node.className.match(new RegExp("action:arg"+i+":([^ ]+)"));)args[args.length]=arg[1].replace("--"," "),i++;var targetElements=[node];args.length>0&&(targetElements="parent"==args[0]?[node.parentNode]:$(args[0]).get());var method;switch(actionToPerform){case"fade":method=function(e,t,n){e.fadeOut("slow",n)};break;case"slideUp":method=function(e,t,n){e.slideUp("slow",n)};break;case"hide":method=function(e,t,n){e.hide(),n&&n()};break;case"remove":method=function(e,t,n){e.remove(),n&&n()};break;case"replace":case"replaceSelf":method=function(e,t,n){var i=e.data("css-class");if("undefined"==typeof i&&(i=""),"replaceSelf"==actionToPerform){var o=$($.trim(t)).addClass(i).attr("data-css-class",i).get(0).outerHTML;e.replaceWith(o)}else e.replaceWith($.trim(t));n&&n()};break;case"replaceParent":method=function(e,t,n){e.parent().replaceWith(t),n&&n()};break;case"update":method=function(e,t,n){e.html(t),n&&n()};break;case"toggleOrUpdate":case"cleanOrUpdate":targetElements.length&&(targetElement=$(targetElements),/^\s*$/.test(targetElement.html())?method=function(e,t,n){e.html(t).show(),e.hasClass("hidden")&&e.removeClass("hidden"),n&&n(),PubSub.publish("ajax:toggle-or-update",e)}:(doAjaxCall=!1,method="toggleOrUpdate"==actionToPerform?function(e,t,n){e.toggle(),n&&n(),PubSub.publish("ajax:toggle-or-update",e)}:function(e,t,n){e.empty().hide(),n&&n(),PubSub.publish("ajax:toggle-or-update",e)}));break;case"redirect":method=function(e,t,n){DM_Request.redirect(hex2str(e.findParamInClass("urlback"))),n&&n()};break;case"insert":method=function(e,t,n){e.append(t),n&&n()};break;case"popup":method=function(e,t,n){$(".tipsy").remove(),DM_JS.get("DM_Widget_Popup",$.proxy(function(){var i=e.data("actionOptions")||{},o=null;$.browser.msie&&e.hasClass("popup_ie_width")&&(o=i.custom_width=e.findParamInClass("width")+"px");var a=e.data("popup-class");a&&(i.popupContentClass=a),t&&(_currentPopup=new DM_Widget_Popup(i),_currentPopup.setCustomWidth(o),_currentPopup.open(t)),n&&n()},this))}}method&&(node.jsAction=function(e,t){var n=$el;args.length>0&&(n=$(args[0])),method($(n),e,t)})}return doAjaxCall},ajaxifyLink:function(e){node=e.get(0),e.data("alreadyObserved")||(_self.parseAction(e),e.data("alreadyObserved",!0).data("ajaxlink",e.attr("href")).click(function(){return _self.clickWithOnClick(e)}))},lockClickedObj:function(e){e.get(0).ajaxLock=!0},isLockedClickedObj:function(e){return e.get(0).ajaxLock},unlockClickedObj:function(e){e.get(0).ajaxLock=!1},getElementUniqueId:function(e){return e.identify().attr("id")},clickWithOnClick:function(e,t){"undefined"==typeof e&&(e=$(this));var n=_self.getElementUniqueId(e);if(_self.clicked_obj[n]=e,!_self.isLockedClickedObj(e)){_self.lockClickedObj(e);var i=e.data("confirm");if(i&&!confirm(i))return _self.unlockClickedObj(e),!1;if(t){if(e.get(0).nodeName.match(/A|BUTTON/)&&!e.hasClass("no_icon_loading")){var o=e,a=o.find(".icon, .button_icon");a.length&&(o=a),o.addClass("icon_loading")}_self.request(e.data("ajaxLink"),n)}else e.get(0).jsAction&&e.get(0).jsAction(),_self.unlockClickedObj(e)}return!1},request:function(e,t){_self.loading_cnt++,$.get(e).done(function(e,n,i){_self.ajaxCallback(t,e,i)}).fail(function(e){DM_Widget_Page.notify(e.responseText,"error"),_self.afterAjaxCallBack(t)})},getJsonsFromXHR:function(e){var t=e.getResponseHeader("X-Json");return t?$.parseJSON(t):[]},ajaxCallback:function(e,t,n){var i=_self.clicked_obj[e];_self.tmpUniqueID=e;var o=i.get(0).jsAction;o?o(t,function(){_self.executeJSONS(_self.getJsonsFromXHR(n)),_self.afterAjaxCallBack(e)}):(_self.executeJSONS(_self.getJsonsFromXHR(n)),_self.afterAjaxCallBack(e))},executeJSONS:function(jsons){$.each(jsons,function(index,code){try{eval(code)}catch(e){dbg("ajaxCallback error catched: "+e.message+" in "+code)}})},afterAjaxCallBack:function(e){var t=_self.clicked_obj[e];if(_self.unlockClickedObj(t),t.data("submitted")&&t.data("submitted",!1),_self.loading_cnt>0&&_self.loading_cnt--,0===_self.loading_cnt){t=_self.clicked_obj[e];var n=t.find(".icon, .button_icon");n.length&&(t=n),t.removeClass("icon_loading"),t.find("div.loading").hide()}},submitForm:function(e){var t=$(e),n=_self.getElementUniqueId(t);t.data("submitted",!0),_self.clicked_obj[n]=t,t.find(".loading").show();var i=t.find('input[type="submit"]');if(i.prop("disabled",!0),t.data("auth-required")){var o=t.attr("action"),a=t.serializeJSON();a.next_url=(o.indexOf("?")>=0?o+"&":"?")+"just_logged=1&json_response=1",o=(o.indexOf("?")>=0?o+"&":"?")+"json_response=1",_self.jsonCall(o,a,function(i,o){t.hasClass("persistent")||t.hasClass("form_edit_in_place")||DM_Widget_Form.removeForm(e),_self.ajaxCallback(n,i,o)},function(e){e.match(/form_validation_error|form_saving_error/)&&DM_Form_Utils.persistData(t)},function(){i.removeProp("disabled")})}else $.ajax({method:"post",url:t.attr("action"),data:t.serialize()}).done(function(i,o,a){t.hasClass("persistent")||t.hasClass("form_edit_in_place")||DM_Widget_Form.removeForm(e),_self.ajaxCallback(n,a.responseText,a)}).fail(function(){dbg("submitForm request failed")}).always(function(){i.removeProp("disabled")})},link:function(e){return DM_JS.get("DM_Form",function(){var t=$(e),n=t.data("css");if(n&&!DM_WidgetV3.isCssLoaded(n))return DM_WidgetV3.addCss(n),setTimeout(function(){_self.link(e)},100);var i=_self.parseAction(t),o=t.attr("href")?t.attr("href"):t.attr("data-href")||null;t.data("ajaxLink",o),_self.clickWithOnClick(t,i)}),!1},call:function(){var args=ajax_call.arguments,callback=args[args.length-1],url="/ajax/"+args[0],querystring="";querystring="ajax_function="+args[1];for(var i=2;i<args.length-1;i++)querystring+="&ajax_arg[]="+encodeURIComponent(args[i]);querystring+="&_="+(new Date).getTime(),$.ajax(url,{method:"post",data:querystring,success:function(data,status,xhr){"-"==data.charAt(0)?dbg("There was an error.\n\n"+data.substring(2)):null!==callback&&callback(data.substring(2));var json=xhr.getResponseHeader("X-JSON");if(json=eval(json))for(var curLen=json.length,j=0;curLen>j;j++)try{eval(json[j])}catch(e){}},error:function(e){console.log("Error "+e.status+": "+e.statusText)}})},jsonCallUid:1,isSameOrigin:function(){try{isSameOrigin=top.location.href}catch(e){isSameOrigin=!1}return!!isSameOrigin},isDMIframe:function(){return window!==top?_self.isSameOrigin():!1},jsonCall:function(e,t,n,i,o){var a=$.Deferred();if(_self.isDMIframe())return parent.DM_Ajax.jsonCall.apply(_self,Array.prototype.slice.call(arguments));var r=arguments;return $.post(e,t).done(function(e,t,o){e=$.parseJSON(e),e.status?$.when(n.call(_self,e.content,o)).done(function(){a.resolve()}):e.status||("auth_required"==e.reason?DM_JS.get("DM_Form",function(){a.resolve();var t=_self.jsonCallUid++;_jsonCallCallbacks[t]=r;var n=e.content.restrictionMsg||"default";if(window===top||_self.isSameOrigin())$(".tipsy").remove(),top.DM_JS.get("DM_Widget_Popup",function(){_currentPopup=new top.DM_Widget_Popup({popupAdditionalClass:"signin_popup",noFooter:"true"}),_currentPopup.loadPageItem(DM_Widget_Page.authenticationLink+"?restricted="+n+"&mode=basic&request=/login&_fid="+t,document.location.pathname)});else{var i=location.host,o=560,s=510;open("//"+i+DM_Widget_Page.authenticationLink+"?restricted="+n+"&mode=basic&widget_only=1&request=/login&_fid="+t,"Dailymotion login","menubar=no, status=no, scrollbars=no, menubar=no, width="+o+", height="+s)}}):i?$.when(i.call(_self,e.reason,e.content,o)).done(function(){a.resolve()}):a.resolve())}).fail(function(e){DM_Widget_Page.notify(e.responseText,"error")}).always(function(){"function"==typeof o&&o()}),a.promise()},completeTransaction:function(e){if(opener&&opener.DM_Ajax)opener.DM_Ajax.completeTransaction(e),close();else{if(!_jsonCallCallbacks[e])return;var t=_jsonCallCallbacks[e][1];t?t.next_url&&(_jsonCallCallbacks[e][0]=t.next_url):(_jsonCallCallbacks[e][1]={},t=_jsonCallCallbacks[e][1]),t._replayingAjaxCall=1,$.when(_jsonCallCallbacks[e].callee.apply(_self,Array.prototype.slice.call(_jsonCallCallbacks[e]))).done(function(){t.redirect_url?location.href=t.redirect_url:location.reload()})}},onAjaxLinkClicked:function(e){e.preventDefault(),_self.link(e.currentTarget)},getCurrentPopup:function(){return _currentPopup},deleteCurrentPopup:function(){_currentPopup=null},initialize:function(){$("body").on("click",".js-ajaxlink",_self.onAjaxLinkClicked)},__initialize:function(){window.ajax_call=_self.call,PubSub.subscribe("popup:closed",_self.deleteCurrentPopup)}};return _self},!0)},4:function(e,t,n){n(1),n(2),n(55),n(54),_DM.define("DM_PlayerEvents",function(){var e={},t=[],n=function(e){i(e)},i=function(n,i){if(!n)return log("DM_PlayerEvents","Cannot register player with inexistant playerID!");var o,a,r=!i;if(s(n),r){if(e[n].player||(e[n].player=$("#"+n)[0]),o=e[n].readyHandlers)for(a=0,l=o.length;a<l;a++)o[a](e[n].player);for(a=0,l=t.length;a<l;a++)t[a](n)}else o=e[n].readyHandlers,o||(o=e[n].readyHandlers=[]),o.push(i)},o=function(e){var t=$("#"+e)[0];if(window.playerEventsRegistry&&playerEventsRegistry[e]&&window.playerEvents)for(var n=0,i=playerEvents.length;i>n;n++)t.removeEventListener("on"+playerEvents[n],'proxyPlayerHandler("'+e+'", "'+playerEvents[n]+'")')},a=function(t){return null!==e[t].player},r=function(){var n,o;if(arguments.length>1?(o=arguments[0],n=arguments[1]):n=arguments[0],o){if(o=h(o),!o)return;e[o]&&a(o)?n(e[o].player):i(o,n)}else t.push(n)},s=function(t){e[t]||(e[t]={player:null,events:{}})},c=function(t,n,i){e[n].events[t]||(e[n].events[t]={attached:!1,handlers:[]}),e[n].events[t].handlers.push(i)},u=function(t,n,i){for(var o=e[n].events[t].handlers,a=o.length,r=a-1;r>=0;r--)o[r]===i&&o.splice(r,1);o.length||p(t,n)},d=function(t,n){e[n].events[t].attached||(e[n].player.addEventListener("on"+t,'DM_PlayerEvents.trigger("'+n+'","'+t+'")'),e[n].events[t].attached=!0)},p=function(t,n){e[n].events[t].attached&&(e[n].player.removeEventListener("on"+t,'DM_PlayerEvents.trigger("'+n+'","'+t+'")'),e[n].events[t].handlers=[],e[n].events[t].attached=!1)},h=function(e){return $.isString(e)?e:1==e.nodeType&&e.nodeName.match(/^embed|object$/i)?e.id:(log("DM_PlayerEvents","Cannot use given playerID:",e),null)},f={on:function(e,t,n){var i=Array.prototype.slice.call(arguments);return"Ready"==e?r.apply(f,i.splice(1)):i.length<3?log("DM_PlayerEvents","Missing argument(s), 3 arguments expected (eventName, playerID, handler),",i.length,"given:",i):(t=h(t),s(t),c(e,t,n),void r(t,function(){d(e,t)}))},off:function(e,t,n){t=h(t),n?u(e,t,n):p(e,t)},trigger:function(t,n){return function(){for(var i=e[t].events[n].handlers.slice(0),o=0,a=i.length;a>o;o++)i[o].apply(window,arguments)}},initialize:function(){if(window.playerReadys)for(var e=0,t=playerReadys.length;t>e;e++){var a=playerReadys[e];i(a),o(a)}window.onDailymotionPlayerReady=n}};return f},!0)},5:function(e,t,n){n(2),n(8),function(e,t){e.ajaxPrefilter(function(n,i,o){var a="script"==i.dataType||"script"==n.dataType,r=i.noAjaxExtraParameters!==t||i.noFromRequest!==t||a,s=[];r||s.push("from_request="+encodeURIComponent(location.pathname+location.search+location.hash));var l=location.href.match(/GK_[^&]+/g);l&&!r&&e.each(l,function(e,t){s.push(t)}),a||n.url.match(/api\.(?:[a-zA-Z0-9_.-]+)?dailymotion\.com\//)||i.noAjaxExtraParameters||s.push("_csrf_l="+getCookie("_csrf/link")),s.length&&!n.url.match(/upload-[0-9]+\..*?dailymotion\.com/)&&(n.data=(n.data?n.data+"&":"")+s.join("&")),document.location.href.match(/\/upload(.*)+trace/)&&(o._data=n.data,o._url=n.url,o.always(function(e,t){log("upload","===[ AJAX CATCHER ]===="),log("upload","= URL: "+o._url+"------"),log("upload","= STATUS: "+t),log("upload",o._data),log("upload","--------------------------")}))})}(jQuery)},6:function(){!function(e){e.extend({toJSONString:function(e){return JSON.stringify(e)}})}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function e(e){return 10>e?"0"+e:e}function t(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,r){var s,l,c,u,d,p=i,h=r[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof a&&(h=a.call(r,e,h)),typeof h){case"string":return t(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(i+=o,d=[],"[object Array]"===Object.prototype.toString.apply(h)){for(u=h.length,s=0;u>s;s+=1)d[s]=n(s,h)||"null";return c=0===d.length?"[]":i?"[\n"+i+d.join(",\n"+i)+"\n"+p+"]":"["+d.join(",")+"]",i=p,c}if(a&&"object"==typeof a)for(u=a.length,s=0;u>s;s+=1)"string"==typeof a[s]&&(l=a[s],c=n(l,h),c&&d.push(t(l)+(i?": ":":")+c));else for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(c=n(l,h),c&&d.push(t(l)+(i?": ":":")+c));return c=0===d.length?"{}":i?"{\n"+i+d.join(",\n"+i)+"\n"+p+"}":"{"+d.join(",")+"}",i=p,c}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var i,o,a,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var s;if(i="",o="","number"==typeof r)for(s=0;r>s;s+=1)o+=" ";else"string"==typeof r&&(o=r);if(a=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return n("",{"":e})})}()},7:function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(2),__webpack_require__(5),__webpack_require__(6),__webpack_require__(11),__webpack_require__(3),__webpack_require__(66),_DM.define("DM_WidgetV3",function(){var _self={loadedCSS:{},isCssLoaded:function(e){return _self.loadedCSS[e]},addCss:function(e){var t=e;if(!_self.loadedCSS[t]){if(!e.match(/^(?:https?:)?\/\//)){if(0===e.indexOf("@")&&(e="/css/pack/"+e.replace("@","")),e=e.replace(/\.switch\.scss$/,"."+DM_Context.direction+".css"),e=e.replace(/\.scss$/,".css"),!e.match(/\.css\.v[a-f0-9]+$/)){if(!window.DMAssetsMap||!DMAssetsMap[t])return dbg("Cannot load CSS ressource:"+e+". CSS hash version not found (check DMAssetsMap).");e=e+".v"+DMAssetsMap[t],e=e.replace(/^\/css\//,"/css/gen/").replace("/","/")}e=DM_JS.getInternalScriptHost()+e}$("<link/>").attr("href",e).attr("rel","stylesheet").appendTo($("head")),_self.loadedCSS[t]=1}},addScript:function(e){$("<script/>").attr("src",e).attr("type","text/javascript").appendTo($("head"))},getUrlFromClass:function(e){return e.replace(/\.dmpi_/,"/pageitem/").replace(/_/g,"/")},redirect:function(e){e&&e.length>0?document.location=e:document.location.reload()},findClass:function(e){return e?"."+e.className.match(/dmpi_[a-z0-9_]+/):null},reloadTwig:function(e,t,n,i,o){$(e).each(function(){$el=$(this),_self.get("/controller/"+t,e,DM_Request.getRequestURI(n),i,o)})},reload:function(e,t,n,i){var o=_self.findClass($(e).get(0));o&&_self.get(_self.getUrlFromClass(o),e,DM_Request.getRequestURI(t),n,i)},get:function(widgetUrl,selector,requestUrl,options,callbackMethod,method){var data={request:DM_Request.getRequestURI(requestUrl),t:Math.random()};/(&|\?)request=/.test(widgetUrl)&&delete data.request,options&&$.extend(data,options),$.ajax({url:widgetUrl,type:method?method.toUpperCase():"GET",data:data}).error(function(e){console.warn(e.responseText)}).success(function(data,status,jqXHR){var $element=$($.trim(data));"popup"==selector?DM_JS.get("DM_Widget_Popup",function(){var e=DM_Widget_Popup.getInstanceOrNew();e.update($("<div>").append($element).html()),e.open()}):$(selector).replaceWith($element),$.each($.parseJSON(jqXHR.getResponseHeader("X-JSON"))||[],function(index,json){eval(json)}),$.trim(data)&&DM_Ajax.ajaxify($element),callbackMethod&&(Object.prototype.toString.call(callbackMethod).toLowerCase().match(/string/)?eval(callbackMethod):$.isFunction(callbackMethod)&&callbackMethod(jqXHR,$element))})},UID:1,runningAjaxCalls:{},registerAjaxCall:function(e,t,n){$.each(t,function(t){var i=e+"."+t;_self.runningAjaxCalls[i]||(_self.runningAjaxCalls[i]={}),_self.runningAjaxCalls[i][n]=!0})},unregisterAjaxCall:function(e,t){if(e){if(t&&_self.runningAjaxCalls[e])return delete _self.runningAjaxCalls[e][t];for(t in _self.runningAjaxCalls[e])_self.runningAjaxCalls[e].hasOwnProperty(t)&&delete _self.runningAjaxCalls[e][t]}},multiGet:function(page,requestUrl,config,globalCallback,method){var data={request:DM_Request.getRequestURI(requestUrl),t:Math.random(),config:$.toJSONString(config)},ajaxCallUID=_self.UID++;return _self.registerAjaxCall(page,config,ajaxCallUID),$.ajax({url:"/widget_chunks/"+page,type:method?method.toUpperCase():"GET",data:data}).done(function(data,status,jqXHR){jqXHR.ajaxCallUID=ajaxCallUID,$(function(){var jsonResponse=$.parseJSON(data);for(var component in config){var ajaxCallKey;if(jsonResponse&&"undefined"!=typeof jsonResponse[component]){if(ajaxCallKey=page+"."+component,!_self.runningAjaxCalls[ajaxCallKey][ajaxCallUID])return config[component].canceled&&config[component].canceled();var cont=$(config[component].replace||config[component].update||config[component].append||config[component].before||config[component].prepend),$newElements=null;cont.length&&(config[component].replace||config[component].update||config[component].append||config[component].before||config[component].prepend)&&($newElements=$($.trim(jsonResponse[component])),config[component].replace?$newElements.replaceAll(cont):config[component].update?cont.html($newElements):config[component].before?cont.before($newElements):config[component].prepend?cont.prepend($newElements):config[component].append&&cont.append($newElements)),config[component].jsonResponse?config[component].callback&&config[component].callback(jqXHR,jsonResponse[component]):config[component].callback&&config[component].callback(jqXHR,$newElements)}_self.unregisterAjaxCall(ajaxCallKey,ajaxCallUID)}$.each($.parseJSON(jqXHR.getResponseHeader("X-JSON"))||[],function(index,json){eval(json)}),globalCallback&&(Object.prototype.toString.call(globalCallback).toLowerCase().match(/string/)?eval(globalCallback):$.isFunction(globalCallback)&&globalCallback(jqXHR))})}).fail(function(){log("DM_WidgetV3","multiget error with call",page,requestUrl,config,arguments)}),ajaxCallUID}};return _self},!0)},8:function(e,t,n){n(1),n(14),_DM.define("DM_Cookie",function(){var e={setCookie:function(e,t,n,i,o){var a="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),a="; expires="+r.toGMTString()}var s=e+"="+t+a+"; path="+(i||"/");o&&(s+="; domain="+o),document.cookie=s},setCookieWithFormat:function(e,t,n,i){var o="";if(n){"d"==i?millisec=864e5:"h"==i?millisec=36e5:"m"==i&&(millisec=6e4);var a=new Date;a.setTime(a.getTime()+n*millisec),o="; expires="+a.toGMTString()}document.cookie=e+"="+t+o+"; path=/"},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null},deleteCookie:function(e,t,n){setCookie(e,"",-1,t,n)},deleteCookies:function(e,t,n){for(var i=document.cookie.split(";"),o=new RegExp("^"+e),a=0;a<i.length;a++){for(var r=i[a];" "==r.charAt(0);)r=r.substring(1,r.length);r.match(o)&&deleteCookie(r.substring(0,r.indexOf("=")),t,n)}},__initialize:function(){DM_Utils.exposeIn(e,window,["initialize","deleteCookies"])}};return e},!0)},9:function(e,t,n){n(1),n(2),_DM.define("DM_ResourcePlanner",function(){var e,t={critical:{list:[],delay:0},high:{list:[],delay:700},medium:{list:[],delay:2e3},low:{list:[],delay:2500},trivial:{list:[],delay:3e3}},n={critical:["image"],high:["pagelet","pixelle"],medium:["stat","ad-plugin","dm-js"],low:["social","ad"]},i=function(){return+new Date},o=null,a=function(e){var t={};for(var n in e)for(var i=0,o=e[n].length;o>i;i++)t[e[n][i]]=n;return t},r=function(e){return o||(o=a(n)),o[e]},s=function(e){return function(){for(var n=0;n<t[e].list.length;n++)setTimeout(t[e].list[n],100*n);t[e].done=!0}},l=function(){if(!l.called){l.called=!0;var e=0;for(var n in t)t[n].done||(clearTimeout(t[n].timeout),t[n].timeout=setTimeout(s(n),50*e),e++)}},c={add:function(n,o){var a=r(n)||"trivial";!c.delayResources||l.called||e&&i()>e+t[a].delay?o():t[a].list.push(o)},setupTimeouts:function(){e=i();for(var n in t)t[n].timeout=setTimeout(s(n),t[n].delay)},applyPagePriorityMap:function(){if(window.RESOURCE_PRIORITY_MAP){var e=a(RESOURCE_PRIORITY_MAP),t=a(n),i={};for(var o in t){var r=e[o]||t[o];i[r]||(i[r]=[]),i[r].push(o)}n=i}},initialize:function(){if(c.applyPagePriorityMap(),window.RESOURCE_PLANNER_LIST)for(var e=0,t=RESOURCE_PLANNER_LIST.length;t>e;e++)c.add(RESOURCE_PLANNER_LIST[e][0],RESOURCE_PLANNER_LIST[e][1]);window.RESOURCE_WATCH_PLAYER&&(DM_PlayerEvents.on("AdStart",RESOURCE_WATCH_PLAYER,function(){l()}),DM_PlayerEvents.on("StateChange",RESOURCE_WATCH_PLAYER,function n(e){1===e&&(l(),DM_PlayerEvents.off("StateChange",RESOURCE_WATCH_PLAYER,n))}),DM_PlayerV5Events.on("ad_start",RESOURCE_WATCH_PLAYER,function(){l()}),DM_PlayerV5Events.on("playing",RESOURCE_WATCH_PLAYER,function i(){l(),DM_PlayerV5Events.off("playing",RESOURCE_WATCH_PLAYER,i)}))}};return c},!0)},10:function(e,t,n){n(1),n(2),n(11),_DM.define("DM_JS",function(){var e={loaded:{},templatePath:null,internalScriptHost:null,features:{DM_Widget_Popup:"@popup.js",DM_PlayerLightAndExpander:"/js/lib/dm/player_light_and_expander.js",SearchVideos:"/js/lib/dm/search_videos.js",DM_Notify:"/js/lib/dm/notify.js",tipsy:"@tipsy.js",store:"@store.js",DM_Form:"@form.js",DM_SocialAuth:"/js/lib/dm/social-auth.js",smartalert:"@smartalert.js",Sd_User_Subscribe:"/js/views/shared/user/subscribe.js"},loadedFeatures:[],empty:function(){},get:function(t,n){e.loadedFeatures.indexOf(t)>-1&&n?n():e.features[t]&&(e.load(e.features[t],t,n),e.loadedFeatures[e.loadedFeatures.length]=t)},getRealPath:function(t){var n="",i=t.match(/\.v[a-f0-9]+$/),o=DMAssetsMap[t];0===t.indexOf("@")&&(t="/js/widget/pack/"+t.replace("@","")),t=t.replace(/^\/js\/(?!gen\/)/,"/js/gen/").replace("/","/"),i||o||dbg('Wrong "file to hash" mapping with '+t);!t.match(/^(?:[a-z]+:)?\/\//)&&e.getInternalScriptHost()||"";return(t.match(/^http/)?"":e.getInternalScriptHost())+t+(i?""+n:".v"+o+n)},getInternalScriptHost:function(){if(!e.internalScriptHost)if(window.STATIC_BASE_URL)e.internalScriptHost=STATIC_BASE_URL;else{var t=$("script");t.each(function(){return this.src.match(/\/pack\/mandatory.js/)?(e.internalScriptHost=this.src.replace(/\/js.*/,""),!1):void 0}),t=void 0}return e.internalScriptHost},load:function(t,n,i){var o,a;if("string"==typeof n?(a=!!window[n],o=n):"function"==typeof n?(checkerObject=n(),a=!!checkerObject.value,o=n.name):"object"==typeof n&&(a=!!n.value,o=n.name),!a&&!e.loaded[o]){var r=$("head")[0]||document.documentElement,s=document.createElement("script");s.async="async",s.setAttribute("type","text/javascript");var l=/(.+:\/\/)?([^\/]+)(\/.*)*/i,c=l.exec(t);t.match(/^https?:\/\//)&&e.internalScriptHost!==c[1]+c[2]?t+="msie"==$.browser.name?"?dmr="+(new Date).getTime():"":t=e.getRealPath(t),s.onload=s.onreadystatechange=function(){(!s.readyState||/loaded|complete/.test(s.readyState))&&(s.onload=s.onreadystatechange=null,r&&s.parentNode&&r.removeChild(s),s=void 0,i&&i())},s.setAttribute("src",t),r.insertBefore(s,r.firstChild)}e.loaded[o]=i||e.empty,a&&e.loaded[o]()}};return e},!0)},11:function(){/*!
	 * jQuery Browser Plugin v0.0.5
	 * https://github.com/gabceb/jquery-browser-plugin
	 *
	 * Original jquery-browser code Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
	 * http://jquery.org/license
	 *
	 * Modifications Copyright 2013 Gabriel Cebrian
	 * https://github.com/gabceb
	 *
	 * Released under the MIT license
	 *
	 * Date: 2013-07-29T17:23:27-07:00
	 */
!function(e,t){"use strict";var n,i;if(e.uaMatch=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||[];return{browser:t[3]||t[1]||"",version:t[2]||"0",platform:n[0]||""}},n=e.uaMatch(t.navigator.userAgent),i={},n.browser&&(i[n.browser]=!0,i.version=n.version,i.versionNumber=parseInt(n.version,10)),n.platform&&(i[n.platform]=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv){var o="msie";n.browser=o,i[o]=!0}if(i.opr){var a="opera";n.browser=a,i[a]=!0}if(i.safari&&i.android){var r="android";n.browser=r,i[r]=!0}i.name=n.browser,i.platform=n.platform,e.browser=i,Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});for(var s=Object.keys(i),l=[],c=0;c<s.length;c++)i[s[c]]===!0&&l.push(s[c]);i.classes=[i.name,i.platform,i.name+i.versionNumber].join(" ")+" "+l.join(" ")}(jQuery,window)},12:function(e,t,n){n(1),_DM.define("DM_Stats",function(){var e={gaTrackingDebugEnabled:!1,gaTrackingDebugInterval:null,formattedEvent:!1,events:{share:{share:"Share",twitter:"Twitter (Official)",blogger:"Blogger (AddThis)",wordpress:"Wordpress (AddThis)",tumblr:"Tumblr (AddThis)",reddit:"Reddit (AddThis)",pinterest:"Pinterest (AddThis)",use_embed_code:"Use embed code video panel"},follow:{follow:"Follow",from_channel_tooltip:"Follow from a channel tooltip",with_push_tooltip:"Follow with push tooltip displayed",unlogged:"Follow when user is unlogged",display_push_tooltip:"Display push follow tooltip",close_push_tooltip:"Close push follow tooltip"},unfollow:"Unfollow",upload:{header_button:"Video Upload Attempt",request:"Upload request",start:"Upload start",success:"Video Upload Successful",fail:"Video Upload Failed",save_edit_form:"Video Publish Successful"},register:{"dailymotion-form_step1":"DM - Submit register form - Step 1","dailymotion-form_step2":"DM - Submit register form - Step 2 - Create account","dailymotion-take_a_tour":"DM - Take the welcome tour","dailymotion-areas_of_interest":"DM - Tour (areas of interest) next","dailymotion-skip_facebook_connect":"DM - Tour - Skip Facebook Connect","dailymotion-facebook_follow_your_friends":"DM - Tour (Facebook Friends) next","dailymotion-complete_tour":"DM - Complete the tour","dailymotion-close_tour":"DM - Close the tour","facebook-connect":"FB - Facebook Connect submitted","facebook-form_step2":"FB - Submit register form - Step 2 - Create account","facebook-take_a_tour":"FB - Take the welcome tour","facebook-areas_of_interest":"FB - Tour (areas of interest) next","facebook-follow_your_friends":"FB - Tour (Facebook Friends) next","facebook-complete_tour":"FB - Complete the tour","facebook-close_tour":"FB - Close the tour"},login:{dailymotion:"Login via Dailymotion",facebook:"Login via Facebook",success:"Login successful",attempt:"Login attempt"},live:{create_attempt:"Create Live Stream Attempt"},playlist:{create:"Create playlist",add_video:"Add video to playlist",remove_video:"Remove video from playlist",save_reorder:"Save playlist reordering","delete":"Delete playlist"},customer_survey:{display:"Display customer survey",skip:"Skip customer survey"},pixelle:{display:"Display a promoted video",click:"Click on a promoted video"},promote_its_account:"Promote its account",report_video:"Report video",comment_video:"Comment video",share_new_video_comment_on_facebook:"Share new video comment on Facebook",expand_player:"Expand player",add_to_watchlater:"Add video to Watch Later",add_to_group:"Add video to group",add_to_contest:"Add video to contest",use_addto_tab:"Click on AddTo tab in player page",like:{attempt:"Sign in / Sign up Attempt",success:"Like Video Successful",remove:"Unlike Video Successful"},navigation_panel:{open:"Open navigation menu",close:"Close navigation menu",generated_traffic:"Click on item from the navigation menu"},oauth:{sign_in:"Click on Login",sign_up:"Click on Signup",recover_password:"Click on password recover",facebook_sign_in:"Click on FB Login",facebook_sign_up:"Click on FB Signup"},ligue1:"Video view on Ligue1 page",relevant_content_CTR:{video_displayed:"Bunch of videos displayed in the viewport during last scroll",video_clicked:"Click on a video preview"},repost:{form_loaded:"The repost creation form has been loaded",created:"Video Repost Successful",nav_tooltip_opened:'The visitor clicks on the "?" next to "My reposts" in the hamburger menu',source_tooltip_opened:'The visitor clicks on the "?" next to the repost credit (under the player, when the video being watched is a repost)',attempt:"Video Repost Attempt",creation_fail:"Video Repost Failed"},related:{click:"Related Video Clicked",loaded:"Related Video Displayed"},signin_signup:{attempt:"Sign in / Sign up Attempt"},signin:{success:"Sign in Successful"},signup:{success:"Sign up Successful"},wtw:{click:"WTW Video Clicked"}},trigger:function(t){e.getLabel(t),e.formattedEvent&&PubSub.publish("stats:event",e.formattedEvent)},onGaEvent:function(){var t=$(this),n=$.parseJSON(t.attr("data-ga-event")),i=n.category||null,o=n.action||null,a=n.label||null,r=n.value||null;if(!i||!o)throw new Error("DM_Stats: data-ga-event object is missing category ("+i+") or action ("+o+") property.");e.sendGaEvent(i,o,a,r)},toggleGaTrackingDebug:function(){e.gaTrackingDebugEnabled=!e.gaTrackingDebugEnabled,store.set("ga-tracking-debug",e.gaTrackingDebugEnabled),e.gaTrackingDebug(),e.gaTrackingDebugEnabled?e.gaTrackingDebugInterval=setInterval(e.gaTrackingDebug,1e3):clearInterval(e.gaTrackingDebugInterval)},gaTrackingDebug:function(){var t=$("[data-ga-event]");t.each(function(){var t=$(this),n=$.parseJSON(t.attr("data-ga-event")),i=n.category||null,o=n.action||null,a=n.label||null,r=n.value||null,s="category: "+i+", action: "+o+", label: "+a+", value: "+r;e.gaTrackingDebugEnabled?t.addClass("animate-jiggle").attr("title",s):t.removeClass("animate-jiggle")})},sendGaEvent:function(t,n,i,o){e.gaTrackingDebugEnabled&&console.log("[DM_Stats] Send GA event: category: "+t+", action: "+n+", label: "+i+", value: "+o),ga("send","event",t,n,i,o)},getLabel:function(t){var n=t.ga_label||null;e.events[t.action]&&(n=e.events[t.context]||"object"==typeof e.events[t.action]?e.events[t.action][t.context]?e.events[t.action][t.context]:e.events[t.action][t.action]:e.events[t.action]),e.formattedEvent={event_action:t.action,event_context:t.context||null,event_label:n,event_data:t.data||{}}},initGaEvents:function(){$(document).on("click","[data-ga-event]",e.onGaEvent),store.get("ga-tracking-debug")===!0&&e.toggleGaTrackingDebug()},__onDomReady:function(){e.initGaEvents()}};return e},!0)},13:function(e,t,n){n(1),n(2),n(6),_DM.define("DM_Controller",function(){var e={call:function(e,t){var n,i;t?(i=t.callback||function(){},n=t.postArgs,$.isArray(t.args)?(t["method:args"]=$.toJSONString(t.args),delete t.args):delete t.args,delete t.callback,delete t.postArgs):t={},t.request||(t.request=document.location.pathname);var o="/controller/"+e+"?"+$.param(t);(n?$.post(o,n):$.get(o)).done(i)}};return e},!0)},14:function(e,t,n){n(1),n(2),_DM.define("DM_Utils",function(){var e={escape_utf8:function(e){if(""===e||null===e)return"";e=e.toString();for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n),o=[];i>65536?(o[0]=240|(1835008&i)>>>18,o[1]=128|(258048&i)>>>12,o[2]=128|(4032&i)>>>6,o[3]=128|63&i):i>2048?(o[0]=224|(61440&i)>>>12,o[1]=128|(4032&i)>>>6,o[2]=128|63&i):i>128?(o[0]=192|(1984&i)>>>6,o[1]=128|63&i):o[0]=i;for(var a=0;a<o.length;a++){var r=o[a],s=nibble_to_hex((240&r)>>>4)+nibble_to_hex(15&r);t+="%"+s}}return t},nibble_to_hex:function(e){var t="0123456789ABCDEF";return t.charAt(e)},str2hex:function(e){for(var t="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),i=0;i<e.length;i++)t+=n[e.charCodeAt(i)>>4]+n[15&e.charCodeAt(i)];return t},hex2str:function(e){var t=e.length,n="",i=0;for(i=0;t>i;i+=2)n+=String.fromCharCode("0x"+e.substr(i,2));return n},dbg:function(){try{console.log.apply(console,arguments)}catch(e){if("object"==typeof console.log)return console.log(Array.prototype.slice.call(arguments));alert(Array.prototype.join.call(arguments," "))}},getEnvironment:function(){var e,t=document.location.href;return t.match(/\.dev\./)?(e=t.match(/([\w]+\.dev)\./),"undefined"!=e[1]?e[1]:"dev"):t.match(/(\.)?stage-[0-9]+\./)?(e=t.match(/(\.)?(stage-[0-9]+)\./),"undefined"!=e[2]?e[2]:"stage"):t.match(/(\.)?preprod\./)?"preprod":"prod"},pad:function(e,t,n){for(var i=e.toString();i.length<t;)i=n+i;return i},timeFormat:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),o=t-3600*n-60*i,a=[];return n>0&&(10>n&&(n="0"+n),a.push(n)),10>i&&(i="0"+i),10>o&&(o="0"+o),a.push(i),a.push(o),a.join(":")},ping:function(e,t){var n=arguments.callee;if(e&&(n.queue=n.queue||[]).push({url:e,context:t}),n.pingContainer)for(;n.queue.length;){var i=n.queue[0];$(n.pingContainer).append("<img "+(i.context?'class="'+i.context+'_px"':"")+' src="'+i.url+'" />'),n.queue=n.queue.slice(1)}else if(!n.building)return n.building=!0,$(function(){$("body").append(n.pingContainer=$('<div style="display: none;" id="pings">')),n()})},unique:function(e){return $.grep(e,function(t,n){return n==$.inArray(t,e)})},exposeIn:function(e,t,n){var i="hasOwnProperty";window[i]=window[i]||Object.prototype.hasOwnProperty,Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!==i&&i!=1/0&&i!=-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);n>o;o++)if(o in t&&t[o]===e)return o;return-1});for(var o in e)e.hasOwnProperty(o)&&n.indexOf(o)<0&&(t[o]=e[o])},throttle:function(e,t,n){var i,o=0,a=function(){var a=this,r=+new Date,s=r-o,l=arguments,c=function(){o=r,e.apply(a,l)};i&&clearSetTimeout(i),s>t?c():n&&(i=setTimeout(c,t-s))};return a()},debounce:function(e,t,n){var i;return function(){var o=this,a=arguments,r=function(){e.apply(o,a)},s=function(){i=void 0};i?clearTimeout(i):n&&r(),i=setTimeout(n?s:r,t)}},humanTimeToSeconds:function(e){var t,n,i,o=e.split(":");return o.length<3?(n=60*parseInt(o[0],10),i=parseInt(o[1],10),o=n+i):(t=3600*parseInt(o[0],10),n=60*parseInt(o[1],10),i=parseInt(o[2],10),o=t+n+i),o},__initialize:function(){if(e.exposeIn(e,window,["initialize","exposeIn"]),DM_Environment=getEnvironment(),"undefined"!=typeof console&&"function"==typeof console.log){var t=document.location,n=t.hostname,i=n.match(/(jobs|dev)\.dailymotion.com/);i||(console.log("\n      _       _ _                       _   _             \n   __| | __ _(_) |_   _ _ __ ___   ___ | |_(_) ___  _ __ \n  / _` |/ _` | | | | | | '_ ` _ \\ / _ \\| __| |/ _ \\| '_ \\ \n | (_| | (_| | | | |_| | | | | | | (_) | |_| | (_) | | | | \n  \\__,_|\\__,_|_|_|\\__, |_| |_| |_|\\___/ \\__|_|\\___/|_| |_| \n                    /_/                                  \n                                                       \n"),console.log("\n\nHello there, interested in joining us? Visit http://jobs.dailymotion.com\n\n"))}}};return e},!0)},19:function(e,t,n){n(1),n(68),_DM.define("DM_ReaderSession",function(){function e(e){var t=storeWithExpiration.get(n.storeKey)[e];return(void 0===t||"null"===t)&&(t=null),t}function t(e,t){var i=storeWithExpiration.get(n.storeKey),o=storeWithExpiration.getNewExp(n.storeKey),a=i||{};return a[e]=t,storeWithExpiration.set(n.storeKey,a,o),storeWithExpiration.get(n.storeKey)}var n={storeKey:"DM_ReaderSession",add:function(e,t){switch(e){case"watchedVideo":n.addDefaultList(e,t,"watchedVideos"),n.addVideoByLogin("watchedVideosByLogin",t),PubSub.publish("dm:readersession:video_watched",t);break;case"startedVideo":n.addDefaultList(e,t,"startedVideos"),n.addVideoByLogin("startedVideosByLogin",t),PubSub.publish("dm:readersession:video_started",t);break;case"displayedFollowTip":n.addDisplayedFollowTip(t),PubSub.publish("dm:readersession:followtip_displayed",t);break;default:n.addDefaultList(e,t)}},getData:function(t){return e(t)},addDefaultList:function(n,i,o){o||(o=n);var a=e(o)||[];a[a.length]=i,t(o,a),PubSub.publish("dm:readersession:"+n,i)},addVideoByLogin:function(n,i){if("undefined"!=typeof i.ownerLogin){var o=e(n)||{};o[i.ownerLogin]=o[i.ownerLogin]||[],-1==o[i.ownerLogin].indexOf(i.xid)&&(o[i.ownerLogin][o[i.ownerLogin].length]=i.xid,t(n,o))}},addDisplayedFollowTip:function(n){var i=e("displayedFollowTips")||{};i[n]=i[n]||0,i[n]+=1,t("displayedFollowTips",i)},initialize:function(){storeWithExpiration.get(n.storeKey)||storeWithExpiration.set(n.storeKey,{},864e5)}};return n},!0)},20:function(e,t,n){n(2),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function i(t,n){this.$element=e(t),this.options=n,this.options.close_button_set=!1,(this.$element.hasClass("js-tipsy-ballon")||this.$element.hasClass("js-tipsy-infotip"))&&(this.options.delayOut=void 0!==n.delayOut?n.delayOut:50,this.options.delayIn=100,this.options.interactive=this.$element.hasClass("js-tipsy-ballon")?!1:!0,this.options.tooltip_type=this.$element.hasClass("js-tipsy-ballon")?"tipsy-ballon":"tipsy-infotip",this.options.gravity=this.options.gravity||"s",this.options.html=!0,this.options.fade=void 0!==n.fade?n.fade:!0),"tipsy-ballon"==this.options.tooltip_type&&(this.options.delayIn=400,this.options.offset=1,this.options.fade=!0,this.options.delayOut=150),"tipsy-infotip"==this.options.tooltip_type&&(this.options.offset=n.offset||3);var i=this.$element.attr("class").match(/js-tipsy-gravity-(\w+)/);i&&(this.options.gravity=i[1]),"rtl"===e("html").attr("dir")&&(this.options.gravity.match(/e/)?this.options.gravity=this.options.gravity.replace("e","w"):this.options.gravity.match(/w/)&&(this.options.gravity=this.options.gravity.replace("w","e"))),this.$element.hasClass("js-tipsy-form-help")&&(this.options.tooltip_type+=" tipsy-form-help"),this.$element.hasClass("js-tipsy-preserve")&&(this.options.preserve=!0),this.enabled=!0,this.fixTitle(),e(window).on("resize",DM_Utils.debounce(function(){this.$element.tipsy("hide")}.bind(this),150))}function o(t,n){var o=e.data(t,"tipsy");return o||(o=new i(t,e.fn.tipsy.elementOptions(t,n)),e.data(t,"tipsy",o)),o}function a(e){var t=e.data.options,n=o(this,t);n.hoverState="in","tipsy-ballon"==n.options.tooltip_type&&(t.delayIn=400),setTimeout(function(){"in"==n.hoverState&&(n.fixTitle(),n.show(),PubSub.publish("dm:tipsy:showed",n))},n.options.delayIn)}function r(e){var t=e.data.options,n=o(this,t);if(n.hoverState="out",0===t.delayOut)n.hide(),PubSub.publish("dm:tipsy:hidden",n);else{var i=setTimeout(function(){"out"==n.hoverState&&n.hide(),PubSub.publish("dm:tipsy:hidden",n)},n.options.delayOut);if(t.interactive){var a=n.tip();a.hover(function(){clearTimeout(i)},function(){i=setTimeout(function(){"out"==n.hoverState&&(n.hide(),PubSub.publish("dm:tipsy:hidden",n))},t.delayOut)})}}}i.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var i=this.tip();if(i.is(":visible"))return!0;this.options.preserve?e(this.options.target).children().detach().prependTo(i.find(".tipsy-inner")):i.find(".tipsy-inner")[this.options.html?"html":"text"](n),i[0].className="tipsy",this.options.tooltip_type&&i.addClass(this.options.tooltip_type),i.detach().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o,a=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),r=i[0].offsetWidth,s=i[0].offsetHeight,l=t(this.options.gravity,this.$element[0]);switch(l.charAt(0)){case"n":o={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-r/2};break;case"s":o={top:a.top-s-this.options.offset,left:a.left+a.width/2-r/2};break;case"e":o={top:a.top+a.height/2-s/2,left:a.left-r-this.options.offset};break;case"w":o={top:a.top+a.height/2-s/2,left:a.left+a.width+this.options.offset}}if(2==l.length&&(o.left="w"==l.charAt(1)?a.left-4:a.left+a.width-r),i.css(o).addClass("tipsy-"+l),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&i.addClass(t(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity}),this.options.close_button&&(_this=this,i.find(".js-tipsy-close").on("click",function(){_this.hide(),PubSub.publish("dm:tipsy:closed",i)})),this.options.showCallback){var c=this.options.showCallback.split(".");c=2===c.length?window[c[0]][c[1]]:window[this.options.showCallback],"function"==typeof c&&c(this)}}},hide:function(){if(this.options.target&&""!==e(".tipsy-inner",this.tip()).html()&&(this.options.close_button&&!this.options.close_button_set&&(this.options.close_button_set=!0),this.options.preserve?e(".tipsy-inner",this.tip()).children().detach().prependTo(this.options.target):e(this.options.target).html(e(".tipsy-inner",this.tip()).html())),this.options.fade){var t=this;this.tip().stop().fadeOut(function(){t.hideCallback.call(t),e(this).remove()})}else this.tip().remove(),this.hideCallback.call(this)},hideCallback:function(){if(this.options.hideCallback){var e=this.options.hideCallback.split(".");e=2===e.length?window[e[0]][e[1]]:window[this.options.hideCallback],"function"==typeof e&&e(this)}},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var t,n=this.$element,i=this.options;if(i.preserve)return!0;if(this.fixTitle(),i.target?t=e(i.target).hide().html():("string"==typeof i.title?t=n.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(t=i.title.call(n[0])),t=(""+t).replace(/(^\s*|\s*$)/,"")),!this.options.close_button_set&&"tipsy-infotip"==this.options.tooltip_type&&this.options.close_button){var o='<a class="js-tipsy-close icon icon-close pull-end-abs mrg-end-md font-xsm foreground2 cliquable"></a>'+t;t=o}return t||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-inner"></div><div class="tipsy-arrow-bg"></div><div class="tipsy-arrow"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){if(t===!0)return this.data("tipsy");if("string"==typeof t){var n=this.data("tipsy");return n&&n[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.target&&(t.html=!0,t.interactive=!0,t.delayOut=100),t.live||this.each(function(){o(this,t)}),"manual"!=t.trigger){var i="hover"==t.trigger?"mouseenter":"focus",s="hover"==t.trigger?"mouseleave":"blur",l={options:t};t.live?e(this.context).on(i,l,a).on(s,l,r):this.on(i,l,a).on(s,l,r)}return this},e.fn.untipsy=function(){if(e(this).data("tipsy")){var t=e(this).data("tipsy"),n=t.options,i="hover"==n.trigger?"mouseenter":"focus",o="hover"==n.trigger?"mouseleave":"blur";n.live?e(this.context).off(i,a).off(o,r):this.off(i,a).off(o,r),n.interactive&&($tip=t.tip(),$tip.off("hover")),t.hide(),e(this).removeData("tipsy")}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:1,title:"title",trigger:"hover",interactive:!1,showCallback:!1,hideCallback:!1},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,n){return function(){var i={ns:n[0],ew:n.length>1?n[1]:!1},o=e(document).scrollTop()+t,a=e(document).scrollLeft()+t,r=e(this);return r.offset().top<o&&(i.ns="n"),r.offset().left<a&&(i.ew="w"),e(window).width()+e(document).scrollLeft()-r.offset().left<t&&(i.ew="e"),e(window).height()+e(document).scrollTop()-r.offset().top<t&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(jQuery)},21:function(e,t,n){n(67),n(1),n(2),n(10),n(8),n(59),n(75),n(73),n(19),n(20),n(29),n(61),n(76),n(23),n(53),n(4),n(94),n(63),n(116),n(3),n(9),n(87),n(86),n(120),n(121),n(559),_DM.define("DM_Widget_Page",function(){var e={initEvents:function(){$(document).on("click",".js-popup-close",e.closePopup),PubSub.subscribe("unlogged_action:done",e.onUnloggedActionDone)},closePopup:function(){PubSub.publish("popup:close")},notify:function(){var e=arguments;DM_JS.get("DM_Notify",function(){DM_Notify.notify.apply(DM_Notify,Array.prototype.slice.call(e))})},openLoginPopupForAction:function(t,n,i){DM_JS.get("DM_Widget_Popup",function(){e.popup=new DM_Widget_Popup({closeButton:!1});var o=new DM_Widget_Popup({popupAdditionalClass:"signin_popup",noFooter:"true"});o.loadPageItem(DM_Widget_Page.authenticationLink+"?restricted=1",document.location.pathname,{unlogged_action:n||""},function(){$("#popupContent input[data-focus]").focus(),e.store.set("unlogged_action",{name:t,params:i})})})},onUnloggedActionDone:function(){e.store.remove("unlogged_action")},continuePendingActions:function(){var t;if("undefined"!=typeof e.store&&e.store.get("unlogged_action")&&e.onUnloggedActionDone(),t=getCookie("dm_done"))deleteCookie("dm_done"),window["DM_Widget_Page_"+t]&&DM_Widget_Page.notify(window["DM_Widget_Page_"+t],"info");else if(t=getCookie("dm_need")){deleteCookie("dm_need");var n=t.split(":");n.length>1&&"popup"==n[0]&&DM_JS.get("DM_Widget_Popup",function(){var e=DM_Widget_Popup.getInstanceOrNew();e.loadPageItem(hex2str(n[1]),document.location.pathname)})}},loadChromecastScript:function(){jQuery.browser.chrome&&"undefined"==typeof dmp&&DM_JS.load("/js/lib/bower/chromecast-sender/dist/dm-chromecast-sender.js","DMChromecastSender",function(){DMChromecastSender.initialize()})},applyTipsy:function(e){var t;t=e?$(e).find(".js-tipsy"):$(".js-tipsy"),t.each(function(){var e=$(this).data("tipsy-options")||{};$(this).tipsy(e)})},__onDomReady:function(){e.applyTipsy(),e.loadChromecastScript(),setCookie("tzo",60*(new Date).getTimezoneOffset(),1),window.dm_browsingcontext=new DM_BrowsingContext,DM_LazyLoad.initialize(),DM_Ajax.initialize(),DM_ResourcePlanner.setupTimeouts(),e.continuePendingActions(),e.initEvents(),PubSub.publish("page:ready")},initEventBus:function(){e.isEventBusEnabled()&&(window.EventBus=DM_EventEmitter({emitter:DM_EventEmitterTransport.setEndpoint(EB_WEB_ENDPOINT).ajax,v1st:getCookie("v1st")||""}),$(window).on("beforeunload",function(){EventBus.sendAll()}))},isEventBusEnabled:function(){return!!window.EB_WEB_ENDPOINT},preventLocalStorageErrors:function(){if("undefined"!=typeof localStorage)try{localStorage.setItem("DMLocalStorage",1),localStorage.removeItem("DMLocalStorage")}catch(e){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){}}},__initialize:function(){e.preventLocalStorageErrors(),DM_Facebook.initialize(),DM_GooglePlus.initialize(),DM_PlayerEvents.initialize(),DM_PlayerV5Events.initialize(),DM_PlayerUtils.initialize(),DM_Alert.initialize(),DM_ReaderSession.initialize(),DM_ResourcePlanner.initialize(),PubSub.subscribe("page:notify",DM_Widget_Page.notify),PubSub.subscribe("page:login",DM_Widget_Page.openLoginPopupForAction),e.initEventBus()}};return e},!0)},23:function(e,t,n){n(1),n(2),n(8),n(6),n(56),n(3),_DM.define("DM_Facebook",function(){var e=null,t=null,n=!1,i={},o={messages:{},delayedConnectOpt:null,connect:function(n){var i;"undefined"!=typeof n&&"undefined"!=typeof n.scopes&&(i=n.scopes.join(",")),e=i,t=n.action,PubSub.publish("dm:fb:connecting"),log("DM_Facebook","try to connect to FB"),"undefined"==typeof FB?o.delayedConnectOpt||(log("DM_Facebook","Connection delayed due to DM_ResourcePlanner latency"),o.delayedConnectOpt=n||{}):i?FB.login(o.onLogin,{scope:i}):FB.login(o.onLogin)},disconnect:function(e){log("DM_Facebook","Disconnect [reason: "+e+"]");var t="dm:fb:status:";switch(e){case"not_authorized":case"already_linked":t+=e;break;default:t+="unlogged"}PubSub.publish(t,{provider:"facebook"});var n=DM_SocialAuth.getSocialCookie();n&&"undefined"!=typeof n.facebook&&delete n.facebook,setCookie("dm_sc",$.toJSONString(n))},unlink:function(e){PubSub.publish("dm:fb:unlinking"),o.removePermissions().done(function(){ajax_call("social","unlinkAccount",$.toJSONString({provider:"facebook",userLogin:e}),function(e){o.disconnect(),PubSub.publish("dm:fb:unlinked",e)})}).fail(function(e){console.error(e)})},getAppId:function(){return o.appId||DM_Widget_PageItem_Facebook_Connect_APP_ID},getFriendsIdList:function(e){"undefined"==typeof e&&(e=20);var t=$.Deferred();return FB.api("/me/friends",function(n){var i=n.data.filter(function(t,n){return e>n}).map(function(e){return e.id});t.resolve(i)}),t},getUserAccounts:function(){var e=$.Deferred();return FB.api("/me/accounts",function(t){e.resolve(t)}),e},addVideoTab:function(e,t){var n=o.getAppId(),i=$.Deferred(),a={id:e,app_id:n,access_token:t};return FB.api("/"+e+"/tabs","post",a,function(e){e&&!e.error&&i.resolve(e)}),i},deleteVideoTab:function(e,t){var n=o.getAppId(),i=$.Deferred(),a={tab:"app_"+n,access_token:t};return FB.api("/"+e+"/tabs","delete",a,function(e){e&&!e.error?i.resolve(e.success):100==e.error.code&&o.unlinkVideotabOnDM().done(function(){i.resolve()})}),i},unlinkVideotabOnDM:function(){var e=$.Deferred();return $.ajax({url:"/pageitem/facebookvideotab/settings?method=unlinkAccount",success:function(){e.resolve()},error:function(t,n,i){e.fail(i)}}),e},unlinkVideotabFromPage:function(e,t){var n=$.Deferred();return o.deleteVideoTab(e,t).done(function(){o.unlinkVideotabOnDM().done(function(){n.resolve()}).fail(function(e){n.fail(e)})}),n},getPage:function(e,t){var n=$.Deferred(),i={id:e,access_token:t};return FB.api("/"+e,i,function(e){e&&!e.error&&n.resolve(e)}),n},getUserPages:function(){var e=$.Deferred();return $.isEmptyObject(i)?o.setUserPages().done(function(t){e.resolve(t)}).fail(function(){e.fail()}):e.resolve(i),e},setUserPages:function(){var e=$.Deferred();return o.getUserAccounts().done(function(t){t&&!t.error?(t.data.forEach(function(e){i[e.id]={id:e.id,name:e.name,accessToken:e.access_token}}),e.resolve(i)):e.fail()}),e},postToFeed:function(e,t){var n=$.Deferred(),i={message:e,"fb:explicitly_shared":!0};return t&&(i.link=t),o.askPermissions("publish_actions").done(function(e){e?FB.api("/me/feed","post",i,function(e){e&&!e.error&&n.resolve(e)}):n.resolve(!1)}),n},commentVideo:function(e,t){var n=$.Deferred();return DM_Context.env in["dev","stage-01"]&&console.info("Open Graph actions will only work in prod or preprod. Be sure to use a url from these environments to actually check if this works."),t=t||"",FB.api("me/dailymotionapp:comment","post",{other:e?e:window.location.href,"fb:explicitly_shared":!0,message:t},function(e){DM_Stats.trigger({action:"share_new_video_comment_on_facebook"}),n.resolve(e)}),n.promise()},onStatusChecked:function(e){return log("DM_Facebook",e),"undefined"!=typeof e.authResponse&&e.authResponse?(log("DM_Facebook","User is logged on Facebook"),void ajax_call("social","getMappedSocialData",$.toJSONString({provider:"facebook"}),function(t){t&&o.afterMapping(e.authResponse.userID,e.status,t)})):(log("DM_Facebook","User is not logged on Facebook OR has not authorized application"),o.disconnect(e.status))},afterMapping:function(e,t,n){var i=$.parseJSON(n);if(e!=i.id)return void(i.id?o.disconnect("already_linked"):(log("DM_Facebook","User has not authorized application"),o.disconnect("not_autorized")));log("DM_Facebook",'User logged on FB and linked with "Daily FB Connect App"'),PubSub.publish("dm:fb:status:logged",{onLoginOrRegister:!1,provider:"facebook"});var a=DM_SocialAuth.getSocialCookie();"undefined"==typeof a.facebook&&(a.facebook=i,setCookie("dm_sc",$.toJSONString(a)),PubSub.publish("dm:social:cookie:updated","facebook"))},onDailyMapped:function(e){if("facebook"==e.provider){var t=DM_SocialAuth.getSocialCookie();t.facebook=e.socialData,setCookie("dm_sc",$.toJSONString(t)),PubSub.publish("dm:social:cookie:updated","facebook")}},onLogin:function(i){i.authResponse?(log("DM_Facebook","User logged on FB"),e?o.havePermissions(e).done(function(i){"authentication"!=t&&(log("DM_Facebook","User is Facebook connected with the basic scope"),o.onLoginSuccess(),n=!0),i?(log("DM_Facebook","User approves following permission(s): "+e),PubSub.publish("dm:fb:perm:authorized",e),n||o.onLoginSuccess()):(log("DM_Facebook","User declined following permission(s): "+e),PubSub.publish("dm:fb:perm:declined",e))}):(log("DM_Facebook","User is Facebook connected with the basic scope"),o.onLoginSuccess())):(log("DM_Facebook","User cancelled login"),PubSub.publish("dm:fb:login:declined"))},onLoginSuccess:function(){PubSub.publish("dm:fb:status:logged",{onLoginOrRegister:!0,provider:"facebook"}),DM_SocialAuth.afterSocialLogged({provider:"facebook"})},havePermissions:function(e){e=e.split(",");var t=$.Deferred();return FB.api("/me/permissions",function(n){if(n.error)t.resolve(!1);else{var i,o=n.data.filter(function(t){return-1!=e.indexOf(t.permission)&&"granted"==t.status});i=o.length===e.length?!0:!1,t.resolve(i)}}),t},askPermissions:function(e){var t=$.Deferred();return o.havePermissions(e).done(function(n){n?(PubSub.publish("dm:fb:perm:authorized",e),t.resolve(!0)):FB.login(function(){o.havePermissions(e).done(function(n){var i=n?"authorized":"declined";PubSub.publish("dm:fb:perm:"+i,e),t.resolve(n)})},{scope:e})}),t.promise()},reAskPermissions:function(e){log("DM_Facebook","Rerequest for follwing scopes: "+e),FB.login(o.onLogin,{scope:e,auth_type:"rerequest"})},removePermissions:function(){var e=$.Deferred();return log("DM_Facebook","remove Dailymotion permissions on user app settings"),FB.api("/me/permissions","DELETE",function(t){t&&(t.error&&"OAuthException"==t.error.type?e.fail(t.error):e.resolve())}),e},appendDeclinedPermissionsMessage:function(e){0===e.find(".fb-permission").length&&(e.prepend('<div class="fb-permission mrg-btm-lg">'+DM_Facebook.messages.permissions.email+"</div>"),e.on("click",".js-fb-permissions",function(e){var t=$(e.currentTarget).data("scopes");DM_Facebook.reAskPermissions(t)}))},init:function(){log("DM_Facebook",'Call "init"');var e=o.getAppId();FB.init({appId:e,status:!0,cookie:!0,xfbml:!0,oauth:!0,version:"v2.2"}),o.delayedConnectOpt&&(log("DM_Facebook","Connect after FB.init()"),o.connect(o.delayedConnectOpt)),DM_SocialAuth.isAuthenticated?(log("DM_Facebook","About to check user status on Facebook"),FB.getLoginStatus(o.onStatusChecked)):log("DM_Facebook","User is not logged into DM. No call to FB is necessary"),o.initDone=!0,PubSub.publish("dm:fb:init")},onFBScriptLoaded:function(){o.initDone||(log("DM_Facebook",'Call "onFBScriptLoaded"'),o.init())},__onDomReady:function(){o.FBScriptLoaded?(log("DM_Facebook","FB script is loaded"),o.onFBScriptLoaded()):log("DM_Facebook","FB script is NOT loaded yet")},initialize:function(){window.fbAsyncInit=function(){o.FBScriptLoaded=!0,o.onFBScriptLoaded()},PubSub.subscribe("dm:social:mapped",o.onDailyMapped)}};return o},!0)},27:function(e,t,n){n(1),n(2),n(9),_DM.define("DM_Gravity",function(){var e={setProps:function(){("undefined"==typeof GRAVITY_ALLOWED||GRAVITY_ALLOWED)&&(_gravity.push({type:"set",countryCode:DM_Context.geoip_country.toUpperCase()
}),_gravity.push({type:"set",ageGate:DM_Context.reader_has_family_filter?"on":"off"}),_gravity.push({type:"set",views:DM_Context.video_views}),(DM_Context.is_logged===!0||"true"===DM_Context.is_logged)&&_gravity.push({type:"set",userId:DM_Context.reader_login}),DM_Context.video_from_related_algorithm&&_gravity.push({type:"set",from_algo:DM_Context.video_from_related_algorithm}))},allResourceLoaded:!0,initialize:function(){e.allResourceLoaded=e.waitForRelated?$.Deferred():!0,("undefined"==typeof GRAVITY_ALLOWED||GRAVITY_ALLOWED)&&(PubSub.subscribe("stats:event",function(e){"watchlater"==e.context&&_gravity.push({type:"event",eventType:"ADD_TO_PLAYLIST",itemId:e.videoXId,playlist:"watch_later"})}),PubSub.subscribe("dm:related:algo",function(t){_gravity.push({type:"set",algo:t}),e.allResourceLoaded.resolve()}),window._gravity=window._gravity||[],DM_ResourcePlanner.add("stat",function(){$.when(e.allResourceLoaded).then(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=document.location.protocol+"//dailymotion-ams.gravityrd-services.com/js/dailymotion/gr_reco4-min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})}))}};return e},!0)},28:function(e,t,n){n(1),n(2),n(4),n(13),n(6),_DM.define("DM_HapYak",function(){var e={testingStage:"stage-49",apiKey:"75debfb0ce714cd5ae1f",editorApiKey:"ce6755e1bf054b5b9607",currentViewer:null,options:null,availableLangs:["en","ar","de","el","es","fr","hi","in","it","ja","ko","nl","pl","pt","ro","ru","tr","vi","zh","id"],langMap:{"in":"en",ar:"es"},defaultLang:"en",getLang:function(){if(e.siteVersion in e.langMap)return e.langMap[e.siteVersion];if(-1!==e.availableLangs.indexOf(e.siteVersion))return e.siteVersion;var t=e.siteVersion.split("-");return"undefined"!=typeof t[1]&&-1!==e.availableLangs.indexOf(t[1])?t[1]:e.defaultLang},onCalled:function(t){if(log("HapYak","HapYak called on video "+t.videoId),"undefined"!=typeof window.flashOK&&window.flashOK||t.editor){e.options=t;var n=e.baseUrl;window.hapyak?(log("HapYak",n+"/js/hapyak.js is already loaded"),e.load()):(log("HapYak","Load "+n+"/js/hapyak.js"),$.ajax({url:n+"/js/hapyak.js",dataType:"script",cache:!0,success:function(t,n,i){log("Hapyak","-- hapyak.js file successfully loaded!"),200===i.status&&e.load()}}))}},onResize:function(){e.enabled&&"undefined"!=typeof hapyak&&hapyak.notifyResize()},onClean:function(){e.currentViewer&&(log("HapYak","Previous viewer is destroyed."),e.currentViewer.destroy(),e.currentViewer=null)},load:function(){var t=e.readerId;e.currentViewer&&e.onClean();var n=DM_Environment==e.testingStage?"staging":"prod",i=e.baseUrl,o=e.options.modified?i+"?cdn-bust="+e.options.modified:i,a=t==e.options.ownerId?!1:!0;log("HapYak","run in "+n+" environment");var r={cdn:{assets:{prefix:i},api:{prefix:o,enabled:a}}};e.options.editor||(r.tracking={channel:"hoopcast"}),hapyak.partner("dailymotion",{apiKey:e.editorApiKey,environment:n,plugins:r,onLoad:function(n){if(e.options.editor){log("HapYak","Load editor embed");var i={userId:e.options.ownerId,videoId:e.options.videoId,elementId:e.options.elementId,width:e.options.width,height:e.options.height,css:e.options.cssPath,onNewTrack:e.options.callback,onSave:function(){var t={request:e.options.videoUri,method:"updateVideoModified",callback:function(){}};DM_Controller.call("Page_VideoAnnotations",t)}};e.options.templates&&(i=e.getConfigWithTemplates(i,e.options.templates));var o=n.editor(i);n.externalEditor(o,"hapyak-sidepanel-container",{lang:e.getLang()})}else{log("HapYak","Load viewer embed");var a={playerMode:e.options.playerMode,player:e.options.domElement,videoId:e.options.videoId,userId:t,authorId:e.options.ownerId,css:"undefined"!=typeof e.cssPath?e.cssPath:"",onLoad:function(t){log("HapYak","Viewer is loaded"),e.currentViewer=t,PubSub.publish("dm:hapyak:loaded",t)}};e.options.templates&&(a=e.getConfigWithTemplates(a,e.options.templates)),n.viewer(a)}}})},getConfigWithTemplates:function(e,t){var n=[],i={};if(Object.keys(t).length>0){for(var o in t)if(t.hasOwnProperty(o))switch(n[n.length]=t[o].type,o){case"channel-promotion":i.channel=t[o].channel;break;case"next-video":i.video=t[o].videoId}e.project={template:{tags:n}},e.variables=i}return e},onDMPlayerReady:function(t){e.enabled&&e.init(t)},init:function(t){var n,i=e.videoId,o=e.ownerId,a=e.videoModified,r="html5"==DM_Player_Type.get()?"api":"flash";i&&(n={domElement:t,ownerId:o,videoId:i,autoplay:!0,embed:!1,playerMode:r,modified:a},e.templates&&(n.templates=e.templates)),e.onCalled(n)},initialize:function(){DM_PlayerEvents.on("Ready","video_player_main",e.onDMPlayerReady)},__initialize:function(){PubSub.subscribe("dm:hapyak:called",e.onCalled),PubSub.subscribe("dm:hapyak:clean",e.onClean),PubSub.subscribe("player:resized",e.onResize)}};return e},!0)},29:function(e,t,n){n(1),n(2),n(9),_DM.define("DM_LazyLoad",function(){var e={observing:!1,vpHeight:null,vpScrollOffTop:null,vpScrollOffLeft:null,groups:{},groupsCount:0,imgsChunkSize:4,hdpi:window.devicePixelRatio?window.devicePixelRatio>1.5:!1,isMobileDevice:!!navigator.userAgent.match(/iPhone|iPod|iPad|Android|Windows Phone OS/i),w:$(window),findAll:function(t){$((t||"")+" img[data-src]").each(function(t,n){var i=n.getAttribute("data-lg");e.groups[i]||(e.groups[i]=[],e.groupsCount++),e.groups[i].push(n)})},findInContextAndlLoad:function(t){e.findAll(t),e.loadVisible(),e.initObservers()},foreachGroup:function(t){for(var n in e.groups)t(n)},loadImg:function(t){var n=e.hdpi&&t.getAttribute("data-hdpi-src")||t.getAttribute("data-src");n&&(t.src=n,t.removeAttribute("data-src"),t.removeAttribute("data-lg"))},getElementViewportOffset:function(t){if(t){var n=$(t).offset();return{top:n.top-e.vpScrollOffTop,left:n.left-e.vpScrollOffLeft}}return null},loadVisible:function(){if(e.isMobileDevice)return this.foreachGroup(function(t){for(var n=e.groups[t].length,i=0;n>i;i++)e.loadImg(e.groups[t][i])});var t=[];e.foreachGroup(function(n){var i=e.groups[n],o=0,a=i[o],r=e.getElementViewportOffset(a),s=i.length,l=function(t){return t.top<0||e.vpScrollOffTop+t.top-100<=e.vpScrollOffTop+e.vpHeight},c=function(t){return t.left<0||e.vpScrollOffLeft+t.left-100<=e.vpScrollOffLeft+e.vpWidth},u=function(e){return l(e)&&c(e)};if(u(r)){do{for(var d=0;d<e.imgsChunkSize&&s>o+d;d++)t.push(i[o+d]);o+=d,a=i[o]}while(a&&u(e.getElementViewportOffset(a)));!(e.groups[n].length-o)||1>=o?(delete e.groups[n],e.groupsCount--):e.groups[n]=e.groups[n].slice(o)}});for(var n=0,i=t.length;i>n;n++)e.loadImg(t[n]);imgToload=null,e.groupsCount||e.stopObservers()},scroll:function(){arguments.callee.lock||(arguments.callee.lock=!0,e.scrollTimeout=setTimeout(e.scrollCallback,250))},scrollCallback:function(){e.vpScrollOffTop=e.w.scrollTop(),e.vpScrollOffLeft=e.w.scrollLeft(),e.loadVisible(),e.scroll.lock=!1},resize:function(){arguments.callee.lock||(arguments.callee.lock=!0,setTimeout(e.resizeCallback,250))},resizeCallback:function(){e.vpHeight=e.w.height(),e.loadVisible(),e.resize.lock=!1},initObservers:function(){e.isMobileDevice||e.observing||!e.groupsCount||(e.w.on("scroll",e.scroll).on("resize",e.resize),PubSub.subscribe("lazyload:redraw",e.resize),e.observing=!0)},stopObservers:function(){e.w.off("scroll",e.scroll).off("resize",e.resize),e.observing=!1},initialize:function(){e.vpHeight=e.w.height(),e.vpWidth=e.w.width(),e.vpScrollOffTop=e.w.scrollTop(),e.vpScrollOffLeft=e.w.scrollLeft(),DM_ResourcePlanner.add("image",function(){e.findInContextAndlLoad()})}};return e},!0)},30:function(e,t,n){n(1),n(2),n(5),n(9),n(4),n(94),n(96),n(105),n(124),_DM.define("DM_Masscast",function(){var e={adminReports:[],readyForAdminReport:!1,loaded_mcTop:!1,refreshedMiddle:!1,enabled:!0,errorMsg:"FAILED TO REQUEST OAS",startTime:(new Date).getTime(),playerV5Id:"player",outframedPositions:["x28","x29","Top3","x70"],assistedOutframedPositions:["Top3","x28"],locked:{x29:!0},hasMiddleAd:!1,lockPosition:function(t){log("Masscast","LOCK Position",t),e.locked[t]=!0},getCallForPositions:function(e){var t=masscast_async_call;return e&&e.length&&(t=t.replace(/@.+\?/,"@"+e.join(",")+"?")),t.replace(/\/[^\/]+@/,"/"+(new Date).getTime()+"@")},callOAS:function(t){jQuery.support.cors=!0,log("Masscast","callOAS - arguments :",t),$.get(t?e.getCallForPositions(t):masscast_async_call).done(function(n){return"// OAS_ERROR"==n?log("Masscast","There was an error with OAS response. Possible reasons are: timeout, network error, OAS server error, ..."):(t&&t.length&&-1!==t.indexOf("Middle")&&(e.refreshedMiddle=!0),void e.callOASCallback(n,t))}).fail(function(t,n,i){log("Masscast",e.errorMsg,n,i),e.emitMasscastReport("error",'<div><font color="red">'+e.errorMsg+'. Open JS console for details. <a href="#" style="color: red;text-decoration: underline;" onclick="showlog(\'Masscast\'); return false;">Print logs</a> (in JS console).</font></div>')})},parseOASResponse:function(e,t){var n={};if(t&&1==t.length)n[t[0]]=e;else{var i=e.split('<!--OAS AD="');if(""===$.trim(i[0])&&i.shift(),1==i.length){var o=masscast_async_call.match(/@(.+)\?/);o&&(n[o[1]]=i[0])}else for(var a=0,r=i.length;r>a;a++){var s=i[a].indexOf('"-->');n[i[a].slice(0,s)]=$.trim(i[a].slice(s+4))}}return n},callOASCallback:function(t,n){log("Masscast","callOASCallback - OASResponse :",t);var i=e.parseOASResponse(t,n);log("Masscast","OASResponse parsed :",i),$(function(){e.asyncHandlePositionCodes(i)})},asyncHandlePositionCodes:function(t){setTimeout(function(){e.handlePositionCodes(t)},200)},handlePositionCodes:function(t){var n=function(t,n){log("Masscast","Position",t,' is "outframed" and need to be run out of an iframe .'),e.handleOutframedPositionCode(t,n),PubSub.publish("masscast:position_status",t,"handled")},i=function(t,n){e.updatePositionViaIframe(t,n),PubSub.publish("masscast:position_status",t,"handled")};for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];try{var r=$("#mc_"+o);if(e.locked[o]){log("Masscast","Position",o,"is locked, update cancelled.");continue}if(!a||a.match(/\/\/ Default ad/)){r.length&&r.empty().hide(),log("Masscast","Position",o,"not found or empty, hide its container from page."),PubSub.publish("masscast:position_status",o,"dismissed");continue}if(r.length&&r.removeClass("mc_hide"),"Right"==o&&$("body").addClass("has-skyscraper"),e.outframedPositions.indexOf(o)>-1&&-1===a.indexOf("OAS_FORCE_IFRAME")){e.handlePositionWith(o,a,n);continue}if(!r.length){log("Masscast","Position",o," container not found, do nothing."),PubSub.publish("masscast:position_status",o,"not_found");continue}e.handlePositionWith(o,a,i)}catch(s){log("Masscast","Exception catched while rendering",o,s.message),PubSub.publish("masscast:position_status",o,"error")}}e.locked={},e.pixelleLoaded&&e.lockPosition("x29")},handlePositionWith:function(e,t,n){setTimeout(function(){n(e,t)},100)},handleOutframedPositionCode:function(t,n){$.isString(n)?(documentWriteBackup=document.write,document.write=function(e){log("Masscast","!!! BEWARE !!!",t,"tried to document.write on an already built page :",e)},e.emitMasscastReport("position "+t,n),(window.execScript||function(e){window.eval.call(window,e)})(n),document.write=documentWriteBackup):log("Masscast","cannot run position",t,"code:",n)},updatePositionViaIframe:function(t,n){log("Masscast","Update position code",t);var i=$("#mc_"+t),o=t;if(!i.length)return log("Masscast","Cannot update position via iframe, container not found for ",t);i.data("default-height")?i.css({height:i.data("default-height")}).empty():i.css({height:0}).empty();var a=$('<iframe class="mc_'+o+'_frame" name="mc_'+t+'" allowtransparency="true" framespacing="0" frameborder="no" scrolling="no"></iframe>');i.append(a);var r=a[0].contentDocument||a[0].contentWindow.document,s="<script>/*"+t+"*/("+e.preCodeInjection.toString()+")(window);</script>",l=function(){return a[0].parentNode.style.height="auto",$("body").hasClass("pg_video")&&"mc_Top"===a[0].name&&(a[0].parentNode.parentNode.style.marginTop="20px",a[0].parentNode.parentNode.style.marginBottom="-20px"),"Top"!==t||"Top"===t?("Top"===t&&(e.loaded_mcTop=!0),"<script>("+e.postCodeInjection.toString()+")(window);</script>"):""}();if(e.emitMasscastReport("position "+t,n),-1===n.indexOf("OAS_HTML")&&(n="<script>"+n+"</script>"),r.open().write('<!DOCTYPE html><html><body><style>body { margin:0; padding: 0; text-align:center;}</style><div id="content">'+s+n+l+"</div></body></html>"),"Right"==t&&!Pg_Video.supportRightFrame){Pg_Video.supportRightFrame=!0,$(window).trigger("resize");for(var c=function(){$(window).trigger("resize")},u=0,d=[0,450,550,650,750],p=d.length;p>u;u++)setTimeout(c,d[u])}setTimeout(function(){r.close()},"msie"==$.browser.name?2e3:0)},reloadPositionFrame:function(t){if(!e.enabled)return void log("Masscast","Masscast has been DISABLED, no reload allowed for",t.name);log("Masscast","reloadPositionFrame - frame name",t.name);var n=t.name.replace(/mc_([a-zA-Z0-9]+)/,"$1");log("Masscast","Frame position to reload:",n),e.callOAS([n])},preCodeInjection:function(e){e.masscast_async_call=parent.masscast_async_call,e.inDapIF=!0,e.ping=parent.ping,window.performance&&performance.getEntries&&"undefined"!=typeof parent.adRequestsTotal&&(e.parent.log("Masscast","Start watching requests of",e.name),e.lastRequestsTotal=0,e.lastFramesTotal=0,e.requestWatcher=setInterval(function(){var t=performance.getEntries().length,n=document.getElementsByTagName("iframe").length;e.parent.adRequestsTotal+=t-e.lastRequestsTotal,e.parent.adFramesTotal+=n-e.lastFramesTotal,e.lastRequestsTotal=t,e.lastRequestsTotal=n,e.parent.DM_Masscast.enabled||(e.parent.log("Masscast","Stop watching requests of",e.name),clearInterval(e.requestWatcher))},5e3)),e.masscast={initReload:function(){e.reloadTime&&e.parent.DM_Masscast&&(e.parent.log("Masscast","Frame reload initiated for",e.name,". Reload in",reloadTime,"secs."),e.parent.DM_Masscast.emitMasscastReport("position:reload",e.name.replace("mc_","")+":"+reloadTime),setTimeout(function(){e.parent.DM_Masscast.reloadPositionFrame(e)},1e3*reloadTime))},getElementHeight:function(e){return parseInt(parent.$(e).css("height"),10)},adjustHeight:function(e){var t=masscast.getElementHeight(document.getElementById("content")),n=masscast.getElementHeight(document.body),i=masscast.getElementHeight(frameElement.parentNode),o=e||0||t;e&&(document.getElementById("content").style.cssText+="position:absolute;top:0;bottom:0;left:0;right:0;"),frameElement.style.height=o+"px",frameElement.parentNode.style.height="auto",50>o&&i>=100&&-1==frameElement.name.indexOf("x70")?frameElement.style.display="none":-1!=frameElement.name.indexOf("x52")?(frameElement.style.display="auto",frameElement.style.height="254px"):(frameElement.style.display="block",50>o&&n>=100&&(frameElement.style.height=n+"px"))},loadDmJs:function(t){var n=e.document.createElement("script");n.type="text/javascript",n.src=e.parent.DM_JS.getRealPath(t),n.async=!0,e.document.body.appendChild(n)},render:function(t,n){e[t+"Parameters"]=n,masscast.loadDmJs("/js/lib/dm/masscast/iframed/"+t+".js")}}},postCodeInjection:function(){function e(){return e.times=e.times||1,window.disableAutoHeight?(parent.log("Masscast",'"AutoHeight" is disabled for',frameElement.name),frameElement.parentNode.style.height="auto"):(masscast.adjustHeight(),void(++e.times<5?setTimeout(e,500):parent.log("Masscast",frameElement.name," iframe height",frameElement.style.height)))}masscast.initReload(),setTimeout(e,150)},disable:function(){log("Masscast","Masscast DISABLE"),e.enabled=!1},middleAdPresent:function(){return $('div[id^="mc_"]').length>0&&$("#mc_Middle").children().length>0},setupTracker:function(){_LTracker.push({logglyKey:"d6464acb-25b8-4dd2-bf83-64fed1a15e10",sendConsoleErrors:!0,tag:"jslogger"})},trackPosition:function(t,n){var i=(new Date).getTime();_LTracker.push({dmxtrk:{display_server:"oas",ad_position:t,moment:n,refresh:0,country:window.DM_Context.geoip_country,latency:e.getLatency(i)}})},getLatency:function(t){return t>=e.startTime?t-e.startTime:0},init:function(){if(PubSub.subscribe("pixelle-loaded",function(){e.pixelleLoaded=!0}),PubSub.subscribe("pixelle-not-loaded",function(){e.pixelleLoaded=!1,e.callOAS(["x29"])}),"player_page"==window.DM_Context.page_type){e.canCallOAS()&&(e.lockPosition("Middle"),DM_ResourcePlanner.add("ad",function(){e.callOAS()}));var t=null;DM_PlayerV5Events.on("ad_start",e.playerV5Id,function(){t=setTimeout(function(){e.canCallOAS()&&(e.middleAdPresent()||(e.locked={},e.pixelleLoaded&&e.lockPosition("x29"),e.callOAS(["Middle"])))},1e3)}),DM_PlayerV5Events.on("playing",e.playerV5Id,function(){null!==t&&clearTimeout(t),e.canCallOAS()&&("us"==window.DM_Context.geoip_country&&e.middleAdPresent()||(e.locked={},e.pixelleLoaded&&e.lockPosition("x29"),e.refreshedMiddle||e.callOAS(["Middle"])))})}else{if("user"===window.DM_Context.page_type.toLowerCase())return;e.canCallOAS()&&e.callOAS()}},canCallOAS:function(){return window.DM_Context.video_ads===!1||window.videolist_has_ads===!1||window.DM_Context.is_never_ads?(log("Masscast","window.DM_Context.video_ads is false, blocking ads",window.DM_Context.video_ads),!1):!0},emitMasscastReport:function(t,n){var i=+new Date;e.readyForAdminReport?PubSub.publish("masscast:reports",[[i,t,n]]):e.adminReports.push([i,t,n])},getRandParameter:function(){var e=99999999998,t=e/2;return Math.floor(Math.random()*(e-t))+t},initialize:function(){var t=e.getRandParameter();window.masscast_async_ads1_call&&(masscast_async_ads1_call=masscast_async_ads1_call.replace("__RAND__",t)),window.masscast_async_call?(masscast_async_call=masscast_async_call.replace("__RAND__",t),log("Masscast","window.masscast_async_call found",window.masscast_async_call),DM_Context.rebuffer_not_allowed===!1&&PubSub.subscribe("player:rebuffer",function(){log("Masscast","Player rebuffer catched"),e.disable()}),window.masscast={render:function(e,t){log("Masscast","publish",e,"code for assisted handling"),PubSub.publish("masscast:position_"+e,t)}},e.init()):log("Masscast","window.masscast_async_call not found.")},__initialize:function(){var t,n;("us"===window.DM_Context.geoip_country||"fr"===window.DM_Context.geoip_country)&&(t="https://s.acexedge.com/2/259849/analytics.js?",n={c2:window.DM_Context.geoip_country,di:window.DM_Context.domain,c3:window.DM_Context.video_type||"",cr:window.DM_Context.video_id||"",dm:window.DM_Context.d||"",cb:window.DM_Context.view_id||"",ai:window.DM_Context.reader_login||"",ui:window.DM_Context.v1st,bt:"programmatic",md:"video",c1:"DMdirect",dt:"2598491450274106527001"},t+=$.param(n),function(e,t,n,i){DM_ResourcePlanner.add("stat",function(){var e;a=t.createElement(n),e=t.getElementsByTagName(n)[0],a.async=1,a.src=i,e.parentNode.insertBefore(a,e)})}(window,document,"script",t)),PubSub.subscribe("adminpanel:loaded",function(){e.adminReports.length&&(PubSub.publish("masscast:reports",e.adminReports),e.adminReports=[]),e.readyForAdminReport=!0})}};return e},!0)},33:function(e,t,n){n(1),n(2),n(5),_DM.define("DM_Masscast_Top3",function(){var e={params:null,translateV1ParamstoV2:function(e){var t={skinName:"name",trackingTag:"tracking_tag",bodyClickUrl:"redirect_url",topBannerLink:"redirect_url",bodyClickUrlThroughTag:"click_count_urls",topBannerLinkThroughTag:"click_count_urls",countingPixel:"display_count_urls",countingPixelAlt:"display_count_urls"},n={};for(var i in t)if(""!==e[i]){var o=t[i];"bodyClickUrl"==i&&(n.body_redirect_enabled=!0),o.match(/urls/)?(n[o]||(n[o]=[]),$.isArray(e[i])?n[o]=n[o].concat(e[i]):n[o].push(e[i])):n[o]=e[i]}return n},onCodeReceived:function(e){this.setParams(e),this.build()},setParams:function(e){this.params=$.isString(e)?new Function("return "+e)():e},build:function(){log("Top3","Build",this.params);try{if("object"==typeof this.params){var e=this;this.params=this.translateV1ParamstoV2(this.params),this.params.from_oas=!0,PubSub.publish("masscast:loading_top3"),$.getJSON("/controller/Masscast?method=getSkin&method%3Aargs="+encodeURIComponent($.toJSONString([this.params.name])),function(t){PubSub.publish("masscast:loaded_top3",t,e.params)})}}catch(t){log("Top3","Error while loading skin",t.message,"- skinData:",this.params)}},__initialize:function(){PubSub.subscribe("masscast:position_Top3",this.onCodeReceived,this)}};return e},!0)},36:function(){!function(e){e.fn.findParamInClass=function(e){try{var t=new RegExp(e+"_([A-Za-z0-9/:?&._-]+)"),n=t.exec(this.get(0).className);if(n)return n[1]}catch(i){dbg("error looking for "+e,this.get(0))}return!1},e.fn.findParamsInClass=function(e){try{var t=[],n=new RegExp(e+"_([A-Za-z0-9/:?&-._]+)","g"),i=this.get(0).className.match(n);if(i){for(var o=0;o<i.length;o++)t.push(i[o].replace(e+"_",""));return t}}catch(a){dbg("findParamsInClass error",a)}return!1},e.fn.findIdInClass=function(){return this.findParamInClass("id")}}(jQuery)},42:function(e,t,n){n(1),n(2),n(5),n(12),n(3),n(6),_DM.define("Sd_User_Subscribe",function(){var e=!1,t={updateButton:function(t,n){e=$.ajax({url:"/controller/Shared_User_Subscribe",data:n,success:function(n){e=!1;var i=$($.parseHTML(n));i.addClass(t.className),$(t).replaceWith(i)}})},updateButtons:function(e){$('.sd_user_subscribe[data-user="'+e+'"]').each(function(){var n={request:"/"+e,config:$(this).attr("data-config"),subscribe_context:$(this).find("button").data("subscribe-context")};t.updateButton(this,n)})},setCount:function(e,n){var i=$('[data-follower-count="'+e+'"]'),o=parseInt(i.data("count"),10)+n;i.data("count",o).text(t.formatNumberWithSuffix(o))},formatNumberWithSuffix:function(e){var t=1,n=["","K","M","G","T"];0>e&&(t=-1,e=Math.abs(e));var i=Math.log10(e),o=i/3;return e.toLocaleString(),4>i?t*e:Math.floor(t*Math.pow(1e3,o-Math.floor(o))*10)/10+n[Math.floor(o)]},afterToggleSubscribe:function(n,i){if(e)return!1;var o=n.action,a=i.userLogin,r=i.subscribeContext,s={};PubSub.publish("dm:user_logged:"+o,a),t.isSameOrigin()&&n.needed_login||t.updateButtons(a),"subscribe"==o?(s.action="follow",r&&("from-channel-tooltip"==r?s.context="from_channel_tooltip":"push-follow-toolip"==r&&(s.context="with_push_tooltip")),t.setCount(a,1)):(s.action="unfollow",t.setCount(a,-1)),s.data={login:a},DM_Stats.trigger(s),window.Sd_Navigation_Panel&&Sd_Navigation_Panel.clearDatas()},isSameOrigin:function(){var e;try{e=top.location.href}catch(t){e=!1}return e},onClick:function(e){var n=$(e.currentTarget),i=n.data("href"),o=n.closest(".sd_user_subscribe").data("user"),a=n.data("subscribe-context"),r=n.data("user-uri"),s={request:r,next_url:n.data("next-href"),redirect_url:t.isSameOrigin()?r:document.location.href};n.data("no-count")&&(s.no_count=!0),DM_Context.is_logged===!1&&DM_Stats.trigger({action:"follow",context:"unlogged"}),n.prop("disabled",!0),n.parents(".sd_user_subscribe").addClass("current"),DM_Ajax.jsonCall(i,s,function(e){var i=$.parseJSON(e),r={userLogin:o,subscribeContext:a};t.afterToggleSubscribe(i,r),n.prop("disabled",!1)},function(e,t){("too_many_subscriptions"==e||"cannot_subscribe_yourself"==e)&&alert(t)}),PubSub.subscribe("popup:closed",function(){n.prop("disabled",!1)})},initEvents:function(){$(document).on("click",".sd_user_subscribe button",t.onClick)},loadLazyButtons:function(){var e=[],t=0;$("[data-lazy-follow-button]").each(function(){var n=$(this).parent(),i="lazy-"+t;n.attr("data-lazy",i),e.push({user:n.data("user"),config:n.data("config"),id:i}),t++}),e.length&&DM_Ajax.jsonCall("/controller/Shared_User_Subscribe?method=loadButton",{buttons:JSON.stringify(e)},function(e){e=JSON.parse(e);for(var t in e)$("[data-lazy="+t+"]").replaceWith(e[t])})},__onDomReady:function(){t.initEvents(),t.loadLazyButtons()}};return t},!0)},45:function(e,t,n){n(1),n(2),n(20),n(70),n(69),_DM.define("Sd_Video_Preview",function(){var e={item:null,container:null,sprite1:null,sprite2:null,state:0,step:0,total:0,timer:-1,infosTimer:null,initEvents:function(t){$(".js-tipsy-ballon").tipsy();var n;n=t?$.isString(t)?$(t+" div.sd_video_preview"):t instanceof jQuery?t.find("div.sd_video_preview"):$([]):$("div.sd_video_preview"),n.each(function(){this.observed||(this.observed=!0,$(this).on({mouseenter:e.onPreviewEnter,mouseleave:e.onPreviewLeave}).on("click","span.js-wl_chkbx",e.addToWatchLater).on("click","span.video_edit",e.goToEditVideo))})},onPreviewEnter:function(){var t=this;e.overTO=setTimeout(function(){var n=$(t),i=n.find("div.psprite");i[0]&&e.onSpriteOver(i),e.overTO=null},200)},onPreviewLeave:function(){if(e.overTO)return clearTimeout(e.overTO),void(e.overTO=null);var t=$(this),n=t.find("div.psprite");n[0]&&e.onSpriteOut(n)},onSpriteOver:function(t){e.$psprite=t,e.state=0,e.total=t.hasClass("pmode8")?8:4,window.clearTimeout(e.timer),e.timer=window.setTimeout(function(){e.spriteAnimate()},0)},onSpriteOut:function(){window.clearTimeout(e.timer),e.$container&&(e.$container.remove(),e.$container=null)},spriteAnimate:function(){switch(this.state){case 0:var t=0;"undefined"!=typeof Sd_Video_PreviewTwig_SpriteOffset&&(t=Sd_Video_PreviewTwig_SpriteOffset),this.$img=this.$psprite.parent().find("img"),this.path=this.$psprite.data("spr"),this.itemWidth=this.$psprite.width(),this.itemHeight=this.$psprite.height(),this.spriteStep=this.itemHeight,this.spriteHeight=this.spriteStep*this.total,this.spriteTopOffset=Math.floor((this.spriteStep-this.itemHeight)/2),this.$container=$('<div id="psprite_container">').css({position:"absolute",overflow:"hidden",top:-(this.spriteTopOffset+t)+"px",left:t+"px",width:this.itemWidth+"px",height:this.itemHeight+this.spriteTopOffset+"px",display:"none"}),this.$sprite2=$('<img src="'+this.path+'" data-spriteid="2">').css({position:"absolute",border:"none",marginTop:0,width:this.itemWidth+"px",height:this.spriteHeight+"px",display:"none"}),this.$psprite.before(this.$container.append(this.$sprite2)),this.state++;break;case 1:var n=this.$sprite2[0];(n.complete||"undefined"!=typeof n.naturalWidth&&0!==n.naturalWidth)&&(this.$sprite1=$('<img src="'+this.path+'" data-spriteid="1">').css({position:"absolute",border:"none",marginTop:0,width:this.itemWidth+"px",height:this.spriteHeight+"px",display:"none"}),this.$container.prepend(this.$sprite1).css({display:"block"}),this.state++,this.step=0,this.$sprite2.fadeIn(400));break;case 2:this.step++,this.step>=this.total&&(this.step=0),this.$sprite1.show().css({opacity:1}),e.step%2?(this.$sprite1.css({top:"-"+this.step*this.spriteStep+"px"}),this.$sprite2.fadeOut(400)):this.$sprite2.css({top:"-"+this.step*this.spriteStep+"px"}).fadeIn(400)}this.timer=window.setTimeout(function(){e.spriteAnimate()},1==this.state?50:1e3)},setPlayStatus:function(e){$("div.now_playing").remove(),$('div.sd_video_preview[data-id="'+e+'"]').append('<div class="preview-message now_playing"><span class="center">'+DM_ENV.DM_Utils.nowPlayingLabel+"</span></div>")},addToWatchLater:function(e,t){e&&(e.stopPropagation(),e.preventDefault());var n=$(this);if(t)n.hasClass("remove")?DM_WatchLater.remove(t,!0):DM_WatchLater.add(t,!0);else{var i=n.closest(".preview_link"),o=i[0].id||i.findParamInClass("id");n.data("watched")||DM_WatchLater.add(o,!0),n.data("watched")&&DM_WatchLater.remove(o,!1)}},goToEditVideo:function(e){e.preventDefault();var t=$(e.target);$(e.target).hasClass("video_edit")||(t=t.parent()),window.location.href=t.data("uri")},addedToWatchlater:function(t){if(t&&t.length){var n,i;if(1===t.length)n=$('div.sd_video_preview[data-id="'+t[0]+'"]'),i=n.find("span.js-wl_chkbx"),$(".tipsy").remove(),i.fadeOut(500,function(){n.addClass("in_wl"),i.addClass("remove").find(".watch_later").addClass("icon-check font-md").removeClass("icon-time font-lg").end().removeAttr("style original-title").attr("title",e.watchlaterAdded).show("fast")}),i.data("watched",!0);else for(var o=0,a=t.length;a>o;o++)n=$('div.sd_video_preview[data-id="'+t[o]+'"]'),i=n.find("span.js-wl_chkbx"),i.hasClass("name")?i.addClass("remove"):i.remove()}},removedFromWatchlater:function(t){if(t&&t.length)for(var n,i,o=0,a=t.length;a>o;o++)n=$('div.sd_video_preview[data-id="'+t[o]+'"]'),i=n.find("span.js-wl_chkbx"),i.hasClass("name")?i.addClass("remove"):(n.removeClass("in_wl"),$(".tipsy").remove(),i.removeClass("icon-check").find(".watch_later").removeClass("icon-check font-md").addClass("icon-time font-lg").end().removeAttr("style original-title").attr("title",e.watchlaterAdd),i.data("watched",!1))},__onDomReady:function(){e.initEvents()},__initialize:function(){PubSub.subscribe("video:playing",Sd_Video_Preview.setPlayStatus),PubSub.subscribe("watchlater:added",Sd_Video_Preview.addedToWatchlater),PubSub.subscribe("watchlater:removed",Sd_Video_Preview.removedFromWatchlater),PubSub.subscribe("dm:new_videos_loaded",function(t){e.initEvents(t)}),DM_WatchLaterDone.initialize()}};return e},!0)},53:function(e,t,n){n(1),n(2),n(8),n(6),n(56),n(3),_DM.define("DM_GooglePlus",function(){var e=["https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"],t={messages:{},connect:function(){log("DM_GooglePlus","Try to connect to Google +"),PubSub.publish("dm:gg:connecting"),gapi.client.setApiKey(t._API_KEY),gapi.auth.authorize({client_id:t._CLIENT_ID,scope:e.join(" "),response_type:"code",immediate:!1},t.onLogin)},disconnect:function(e){log("DM_GooglePlus","Disconnect");var t="dm:gg:status:";switch(e){case"not_authorized":case"already_linked":t+=e;break;default:t+="unlogged"}PubSub.publish(t,{provider:"googleplus"});var n=DM_SocialAuth.getSocialCookie();n&&"undefined"!=typeof n.googleplus&&delete n.googleplus,setCookie("dm_sc",$.toJSONString(n))},unlink:function(e){PubSub.publish("dm:gg:unlinking"),t.removePermissions(function(){ajax_call("social","unlinkAccount",$.toJSONString({provider:"googleplus",userLogin:e}),function(e){t.disconnect(),PubSub.publish("dm:gg:unlinked",e)})})},checkAuth:function(){log("DM_GooglePlus","Check authentication"),gapi.auth.authorize({client_id:t._CLIENT_ID,scope:e.join(" "),response_type:"code",immediate:!0},t.onCheckAuth)},isAuthIdMatches:function(e){var t=$.Deferred();return gapi.client.load("oauth2","v2",function(){var n=gapi.client.oauth2.userinfo.get();n.execute(function(n){log("DM_GooglePlus","Get user GooglePlus info"),log("DM_GooglePlus",n),parseInt(n.id,10)==parseInt(e,10)?t.resolve():t.reject()})}),t.promise()},getMappedSocialData:function(e){var n={provider:"googleplus",code:e};ajax_call("social","getMappedSocialData",$.toJSONString(n),t.afterMapping)},updateSocialCookie:function(e){log("DM_GooglePlus","User current Google+ session matches with DM user data"),PubSub.publish("dm:gg:status:logged",{onLoginOrRegister:!1,provider:"googleplus"});var t=DM_SocialAuth.getSocialCookie();"undefined"==typeof t.googleplus.authParams&&(t.googleplus=$.extend(t.googleplus,e),setCookie("dm_sc",$.toJSONString(t)),PubSub.publish("dm:social:cookie:updated","googleplus"))},onDailyMapped:function(e){if("googleplus"==e.provider){var t=DM_SocialAuth.getSocialCookie(),n=t.googleplus||{};t.googleplus=$.extend(e.socialData,n),setCookie("dm_sc",$.toJSONString(t)),PubSub.publish("dm:social:cookie:updated","googleplus")}},onCheckAuth:function(e){if(e.error)log("DM_GooglePlus","Authentication failed, access denied"),PubSub.publish("dm:gg:status:unlogged",{provider:"googleplus"});else{log("DM_GooglePlus","Authentication succeed, set cookie data");var n=DM_SocialAuth.getSocialCookie();n.googleplus={session_state:e.session_state,token_time:(new Date).getTime(),expires_in:e.expires_in},setCookie("dm_sc",$.toJSONString(n)),t.getMappedSocialData(e.code)}},onSessionChecked:function(e){if(getCookie("sid")){if(log("DM_GooglePlus",e),!e||e.error)return log("DM_GooglePlus","User is not logged on Google+ OR has not authorized the app"),t.disconnect("unknown");var n=DM_SocialAuth.getSocialCookie();n.googleplus.authParams||t.getMappedSocialData(e.code),log("DM_GooglePlus","User is logged on GooglePlus"),PubSub.publish("dm:gg:status:logged",{onLoginOrRegister:!1,provider:"googleplus"})}},onLogin:function(e){if(!e.error){log("DM_GooglePlus",'User logged on Google+ and linked with "Daily Google+ Sign in"'),PubSub.publish("dm:gg:status:logged",{onLoginOrRegister:!0,provider:"googleplus"});var t=DM_SocialAuth.getSocialCookie();

return t.googleplus={session_state:e.session_state,token_time:(new Date).getTime(),expires_in:e.expires_in},setCookie("dm_sc",$.toJSONString(t)),DM_SocialAuth.afterSocialLogged({provider:"googleplus",code:e.code})}},afterMapping:function(e){log("DM_GooglePlus","Need to validate access token"),log("DM_GooglePlus",$.parseJSON(e));var n=$.parseJSON(e),i=$.parseJSON(n.authParams.token),o=i.access_token;$.ajax("https://www.googleapis.com/oauth2/v1/tokeninfo",{data:{access_token:o},success:function(o){return o.error?(log("DM_GooglePlus","Error when validating token"),t.disconnect("unknown")):(gapi.auth.setToken(i),log("DM_GooglePlus","Token validated, need to check if logged and mapped DM User is still connected to the right Google+ account"),$.when(t.isAuthIdMatches(n.id)).done(function(){t.updateSocialCookie($.parseJSON(e))}).fail(function(){t.disconnect("already_linked")}),void 0)}})},removePermissions:function(e){log("DM_GooglePlus","remove Dailymotion permissions on user app settings");var t=DM_SocialAuth.getSocialCookie(),n=$.parseJSON(t.googleplus.authParams.token).access_token,i="https://accounts.google.com/o/oauth2/revoke?token="+n;$.ajax({type:"GET",url:i,async:!1,contentType:"application/json",dataType:"jsonp",success:function(){e()},error:function(e){dbg(e)}})},init:function(){if(gapi.client.setApiKey(t._API_KEY),DM_SocialAuth.isAuthenticated){log("DM_GooglePlus","About to check user status on Google+");var e=DM_SocialAuth.getSocialCookie();if("undefined"!=typeof e.googleplus){var n=(new Date).getTime();if(n-e.googleplus.token_time>e.googleplus.expires_in)log("DM_GooglePlus","The token has expired, need a refresh token"),t.checkAuth();else{log("DM_GooglePlus","Check user Google+ session state");var i=e.googleplus.session_state;gapi.auth.checkSessionState({client_id:t._CLIENT_ID,session_state:i},t.onSessionChecked)}return void(t.initDone=!0)}log("DM_GooglePlus","Need to authorize the user to the app"),t.checkAuth()}else log("DM_GooglePlus","User is not logged into DM. No call to Google+ is necessary");t.initDone=!0},onScriptLoaded:function(){t.initDone||(log("DM_GooglePlus",'Call "onScriptLoaded"'),t.init())},__onDomReady:function(){t.scriptLoaded?(log("DM_GooglePlus","Google+ script is loaded"),t.onScriptLoaded()):log("DM_GooglePlus","Google+ script is NOT loaded yet")},initialize:function(){window.ggAsynInit=function(){t.scriptLoaded=!0,t.onScriptLoaded()},PubSub.subscribe("dm:social:mapped",t.onDailyMapped)}};return t},!0)},54:function(e,t,n){n(1),_DM.define("DM_Log",function(){var e={__initialize:function(){var e=window,t=[],n={},i=function(){},o=function(){try{console.log.apply(console,arguments)}catch(e){if("object"==typeof console.log)return console.log(Array.prototype.slice.call(arguments));alert(Array.prototype.join.call(arguments," "))}},a=72e5,r=function(){t=[],log("Logger","##### Cleared logs #####")};if(i.prototype={show:function(n){for(var i=0,a=t.length;a>i;i++)n?n&&t[i][1]==n&&o.apply(e,t[i]):o.apply(e,t[i])},setDebug:function(e,t){n[t||"---"]=e},log:function(i){var a=i,r=1;arguments.length<=1&&(a=arguments.length<=1?"---":i,r=0);var s=[new Date,a].concat(Array.prototype.slice.call(arguments,r));return(n[a]||n["---"])&&o.apply(e,s),t.push(s)}},!e.log){var s=new i;e.log=s.log,e.showlog=s.show,e.debuglog=s.setDebug,setInterval(r,a)}}};return e},!0)},55:function(){!function(e){e.extend({blank:function(e){return/^\s*$/.test(e)},isString:function(e){return/string/i.test(Object.prototype.toString.call(e))},stripTags:function(e){return e&&e.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},truncate:function(t,n,i){if(i=i||"...",t.length>n){n-=i.length;var o=e.trim(t).substring(0,n).split(" ").slice(0,-1).join(" ")+i;return o!=i?o:t.substr(0,n)+i}return t},htmlentityDecode:function(t){return e("<div>").html(t).text()},htmlentityEncode:function(t){return e("<div>").text(t).html()},stripScripts:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),i=n.length;i--;)n[i].parentNode.removeChild(n[i]);return t.innerHTML}})}(jQuery)},56:function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(2),__webpack_require__(3),__webpack_require__(6),__webpack_require__(57),__webpack_require__(12),_DM.define("DM_SocialAuth",function(){var _providers={facebook:{jsObject:"DM_Facebook",label:"Facebook"},googleplus:{jsObject:"DM_GooglePlus",label:"Google+"}},_messages=["mapped","unlogged","unauthorized","unlinkConfirmTitle","unlinkConfirm","wrongMapping","unlinkWarning"],_isWidgetOnly=!1,_dmNeed=!1,_fid=null,_urlback=null,_isMm=!1,_userLoginData=null,_noReload=!1,_isOnTour=!1,_version=1,_self={getLoginParams:function(){var e={isWidgetOnly:_isWidgetOnly,dmNeed:_dmNeed,fid:_fid,urlback:_urlback,isMm:_isMm};return e},connect:function(e,t){var n={};if(n.action=t.action,"undefined"!=typeof t&&(_isWidgetOnly=t.widget_only||!1,_dmNeed=t.dm_need||!1,_fid=t._fid||null,_urlback=t.urlback||null,_noReload=t.noReload||!1,_callback=t.callback||null,t.scopes&&(n.scopes=t.scopes)),-1===_providers.hasOwnProperty(e))return void console.error("The following provider is not set in DM_SocialAuth: "+_providers[e].label);var i=Object.keys(n).length>0?n:void 0;window[_providers[e].jsObject].connect.apply(this,[i])},afterSocialLogged:function(e){!_isOnTour&&window.DM_Widget_Popup&&DM_Widget_Popup.close(),_self.mapUserToDaily(e)},mapUserToDaily:function(e){switch(log("DM_SocialAuth","Ajax call to map user to Daily base"),e.provider){case"facebook":return ajax_call("social","authenticate",$.toJSONString({provider:"facebook"}),_self.onDailyMapped);case"googleplus":return ajax_call("social","authenticate",$.toJSONString({provider:"googleplus",code:e.code}),_self.onDailyMapped)}},onDailyMapped:function(e){log("DM_SocialAuth","On ajax mapping function return"),log("DM_SocialAuth",e);var t=$.parseJSON(decodeURIComponent(e));if(t.status){switch(PubSub.subscribe("dm:social:cookie:updated",function(){_self.executeCallbackAfterMapping(t)}),t.action){case"register":_self.handleSocialRegistration(t);break;case"login":PubSub.subscribe("dm:social:cookie:updated",_self.handleSocialLogin);break;case"link":case"refresh":PubSub.subscribe("dm:social:cookie:updated",_self.handleSocialRefresh)}PubSub.publish("dm:social:mapped",t)}else log("DM_SocialAuth","Cannot map user on Daily: "+t.message),console.error("DM_SocialAuth cannot log user to Dailymotion: "+t.message),"WRONG_MAPPING"==t.reason&&PubSub.publish("dm:social:wrong_mapping",t.provider)},executeCallbackAfterMapping:function(res){if("function"==typeof _callback)_callback(res);else if("string"==typeof _callback){var func=eval(_callback);func(res)}},handleSocialRegistration:function(e){log("DM_SocialAuth","User need to be registered. Call to open register step2 popup.");var t=e;_isWidgetOnly&&(t.widgetOnly=!0),PubSub.publish("dm:social:registration_needed",t),_self.logStats("register",e.provider)},handleSocialLogin:function(e){if(PubSub.unsubscribe("dm:social:cookie:updated",_self.handleSocialLogin),_self.logStats("login",e),_fid)DM_Ajax.completeTransaction(_fid);else if(!_noReload)return _self.customReload();log("DM_SocialAuth","No page reload because _noReload parameter is set to false.")},handleSocialRefresh:function(){HeaderLogin.update()},customReload:function(){var e="http://"+document.location.hostname+document.location.pathname+document.location.search;if(e.indexOf("fbc=")>0)document.location=e.replace(/fb_source=(.*)&/,"").replace(/fbc=(\d+)/,"fbc="+Math.floor(1e3*Math.random()));else{var t="?";e.indexOf("?")>0&&(t="&");var n=e+t+"fbc="+Math.floor(1e3*Math.random());document.location=n.replace(/fb_source=(.*)&/,"")}},logStats:function(e,t){switch(e){case"login":DM_Stats.trigger({action:"login",context:t});break;case"register":DM_Stats.trigger({action:"register",context:t+"-connect"})}},unlinkAfterConnect:function(e){if(e.status){log("DM_SocialAuth","Unlink account after  connect");var t=e.provider,n=$.parseJSON(getCookie(DM_LoginCookie)),i=n.login;window[_providers[t].jsObject].unlink(i)}else log("DM_SocialAuth","Cannot map user on Daily: "+res.message)},getSocialCookie:function(){var e=null!==$.parseJSON(getCookie("dm_sc"))?$.parseJSON(getCookie("dm_sc")):{};return e},initSocialMsg:function(){var e;$.each(_messages,function(t,n){$.each(_providers,function(t,i){e=_self[n].replace(/#provider#/g,i.label),window[i.jsObject].messages=window[i.jsObject].messages||{},window[i.jsObject].messages[n]=e})})},__initialize:function(){PubSub.subscribe("dm-tour:start",function(){_isOnTour=!0}),PubSub.subscribe("dm-tour:end",function(){_isOnTour=!1})}};return _self},!0)},57:function(e,t,n){n(1),n(2),n(63),n(8),n(3),n(6),_DM.define("HeaderLogin",function(){var e={su_mode:!1,showFBButtonIfNeeded:function(){var e=$("#fb_login");!$("#fb_login_id").length&&e.length&&(log("HeaderLogin","Show FB login button"),e.show())},addUserMenuSettings:function(){var t=$("#header_login_menu");if(t.length)if(t.filter(":visible").length){$(".sd_header .header_login_info .arrow").addClass("focus no_radius_bottom_right"),document.body.className.match(/\bdm_page_html_user\b/)&&DM_PlayerUtils.hideAllPlayers(),$(document).on("click",e.removeUserMenuSettings);var n=$(".header_login_info").width(),i=n>=140&&7!=parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5),0)?$(".header_login_info").width():140;t.css("width",i+"px")}else $(".sd_header .header_login_info .arrow").removeClass("focus no_radius_bottom_right"),document.body.className.match(/\bdm_page_html_user\b/)&&DM_PlayerUtils.showAllPlayers(),$(document).off("click",e.removeUserMenuSettings)},removeUserMenuSettings:function(t){$("#header_login_menu:visible").length&&($(t.target).closest("#header_login_menu, #header_user_menu").length||($("#header_login_menu").hide(),$(".sd_header .header_login_info .arrow").removeClass("focus no_radius_bottom_right"),document.body.className.match(/\bdm_page_html_user\b/)&&DM_PlayerUtils.showAllPlayers(),$(document).off("click",e.removeUserMenuSettings)))},getUserInfos:function(e){var t=null;window.DM_LoginCookie&&(getCookie("sid")?(t=getCookie(DM_LoginCookie),t?(log("HeaderLogin","Has cookie "+DM_LoginCookie),"undefined"!=typeof e&&e(t)):(log("HeaderLogin","No cookie "+DM_LoginCookie+" : do ajax call to /src/ajax/user getLoginInfo()"),ajax_call("user","getLoginInfo",null,function(t){log("HeaderLogin","Ajax /src/ajax/user getLoginInfo() SUCCEED"),""!==t&&(log("HeaderLogin","Set cookie "+DM_LoginCookie+" with response Ajax ",t),setCookie(DM_LoginCookie,t),PubSub.publish("dm:user_cookie:created"),log("HeaderLogin","Ajax response not empty"),"undefined"!=typeof e&&e(t))}))):deleteCookie(DM_LoginCookie))},insertUserInfos:function(t){if(log("HeaderLogin",'Call "insertUserInfos"'),!$(".sd_header.experiment").length){t=$.parseJSON(decodeURIComponent(t.replace(/\+/g," ")));var n=t.login,i=t.screenname,o=t.avatar_url,a='<span class="header_login_info">'+(window.usernameLink||"");a+='<div class="dm_login_info media pull-end mrg-end-md"><a class="media-img" href="/'+n+'"><img src="'+o+'" /></a><a class="media-block" href="/'+n+'">'+i+'</a></div></span><ul id="header_login_menu" style="display: none;"></ul></span>',$(".sd_header__login").html(a),PubSub.subscribe("ajax:toggle-or-update",function(t){t&&"header_login_menu"==t.attr("id")&&e.addUserMenuSettings()}),log("HeaderLogin","Header filled with DM user infos")}},update:function(){e.getUserInfos()}};return e},!0)},59:function(e,t,n){n(1),_DM.define("DM_API",function(){var e={initialised:!1,ready:!1,callbacks:[],unqueueCallbacks:function(){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e](),this.callbacks.splice(e--,1)},onReady:function(t){if(!this.initialised){window.dmAsyncInit&&console.log("window.dmAsyncInit already exist and will be overriden!"),this.initialised=!0,window.dmAsyncInit=function(){e.unqueueCallbacks(),e.ready=!0};var n=document.createElement("script"),i=document.getElementsByTagName("script")[0];n.async=!0,n.src="https://api.dmcdn.net/all.js",i.parentNode.insertBefore(n,i)}return this.ready?t():this.callbacks.push(t),this},__initialize:function(){PubSub.publish("dmapi:loaded")}};return e},!0)},60:function(e,t,n){n(1),n(2),n(54),_DM.define("Autocomplete",function(){var e=function(t,n){e.instances||(e.instances=[]),this.instanceId=e.instances.push(this)-1,this.searchFieldId=t,this.suggestionsId="autocomplete_"+t,this.container=null,this.suggestions=[],this.$iframeLayer=null,this.selectedIndex=-1,this.boundKiller=null,this.ignoreValueChange=!1,this.cachedResponse=[],this.onChangeInterval=null,this.typedValue="",this.inputValue="",this.lastTypedValue="",this.refineLocally=!1,this.dataValue=null,this.shadowTimeout=null,this.options={serviceUrl:"",autoSubmit:!0,minChars:1,maxChars:0,deferRequestBy:0,showInfo:!0,autoPosition:!1,appendMode:!1,allowRefineLocally:!0,suggestMax:10,headerOffset:36,suggestHeight:20,postConfigureSearchField:null,withShadow:!1,withIframeLayer:!1,cleanStringOnValueChange:!0,cleanStringOnProcessResponse:!0,processResponse:null,suggest:null,onKeyUp:null,suggestionsProvider:null};for(var i in n)n.hasOwnProperty(i)&&i in this&&(this[i]=n[i],delete n[i]);$.extend(this.options,n),this.configureSearchField()};return e.prototype={version:3,configureSearchField:function(){var e=$("#"+this.searchFieldId);if(this.el=e[0],e.attr("autocomplete","off"),e.on("keydown",$.proxy(this.onKeyDown,this)).on("keyup",$.proxy(this.onKeyUp,this)).on("blur",$.proxy(this.enablekiller,this)),this.options.withShadow){var t=e.position(),n=$('<input id="input_search_shadow" type="text" tabindex="-1" />').show().css({left:t.left+"px",top:t.top+"px",width:e.width("width")+"px"});this.shadowEl=n[0],e.after(n)}this.options.postConfigureSearchField&&"function"==typeof this.options.postConfigureSearchField&&this.options.postConfigureSearchField(this)},createSuggestionsContainer:function(){log("_self","createSuggestionsContainer()");var e=$("<div>"),t={display:"none"},n=$(this.el);this.options.withIframeLayer&&(this.$iframeLayer=$('<iframe class="search_iframe_layer">')),e.addClass("autocomplete").attr("id",this.suggestionsId),this.options.autoPosition&&(t.top=n.position().top+n.height()+parseInt(n.css("padding-top"),10)+parseInt(n.css("padding-bottom"),10)+2+"px"),n.after(e.css(t)),this.options.withIframeLayer&&n.before(this.$iframeLayer.css("top",e.css("top"))),this.container=$("#"+this.suggestionsId)[0]},onKeyDown:function(e){switch(this.options.withShadow&&-1===this.shadowEl.value.indexOf(this.el.value+String.fromCharCode(e.keyCode).toLowerCase())&&this.updateShadow(),e.keyCode){case 27:this.el.value=this.inputValue,this.hide();break;case 13:this.options.autoSubmit||e.preventDefault(),this.onSelect(this.selectedIndex);break;case 38:this.moveUp();break;case 40:this.moveDown();break;case 8:case 32:return void this.updateShadow();default:return}e.preventDefault()},onKeyUp:function(e){switch(e.keyCode){case 38:case 40:case 13:return}clearInterval(this.onChangeInterval),this.ignoreValueChange=!1,this.typedValue!==this.el.value.toLowerCase()&&(this.options.deferRequestBy>0?this.onChangeInterval=setInterval($.proxy(this.onValueChange,this),this.options.deferRequestBy):this.onValueChange())},enablekiller:function(){null===this.boundKiller&&(this.boundKiller=$.proxy(this.killer,this),$(document).on("click",this.boundKiller))},disablekiller:function(){null!==this.boundKiller&&($(document).off("click",this.boundKiller),this.boundKiller=null)},killer:function(e){$(e.target).closest("#"+this.suggestionsId)[0]||$(e.target).closest("#"+this.searchFieldId)[0]||(this.hide(),this.disablekiller())},hide:function(){this.selectedIndex=-1,this.container&&($(this.container).hide(),this.options.withIframeLayer&&$(this.$iframeLayer).hide(),$(".sd_header__search input[name=search]").removeClass("no_border_bottom_left_radius"))},updateInput:function(e,t){if(log("_self","update input text with new value",e),this.options.appendMode&&!t){var n=this.el.value.split(" "),i=n[n.length-1],o=new RegExp(i+"$");this.el.value=this.el.value.replace(o,e)}else this.el.value=e;this.updateShadow(this.el.value)},moveUp:function(){return this.updateShadow(),-1===this.selectedIndex?(this.selectedIndex=this.suggestions.length,this.activate(this.selectedIndex-1),void this.updateInput(this.suggestions[this.selectedIndex].name?this.suggestions[this.selectedIndex].name:this.suggestions[this.selectedIndex][0])):0===this.selectedIndex?($(this.container).find(".selected").removeClass("selected"),this.selectedIndex=-1,void this.updateInput(this.inputValue,!0)):(this.activate(this.selectedIndex-1),void this.updateInput(this.suggestions[this.selectedIndex].name?this.suggestions[this.selectedIndex].name:this.suggestions[this.selectedIndex][0]))},moveDown:function(){return this.updateShadow(),this.selectedIndex===this.suggestions.length-1?($(this.container).find(".selected").removeClass("selected"),this.selectedIndex=-1,void this.updateInput(this.inputValue,!0)):(this.activate(this.selectedIndex+1),void this.updateInput(this.suggestions[this.selectedIndex].name?this.suggestions[this.selectedIndex].name:this.suggestions[this.selectedIndex][0]))},onValueChange:function(){return clearInterval(this.onChangeInterval),this.lastTypedValue=this.typedValue.toLowerCase(),this.typedValue=this.el.value.toLowerCase(),this.inputValue=this.el.value,this.selectedIndex=-1,log("_self","onValueChange(), new value",this.typedValue),$("#"+this.suggestionsId)[0]||this.createSuggestionsContainer(),this.ignoreValueChange?void(this.ignoreValueChange=!1):(this.options.cleanStringOnValueChange&&(this.typedValue=this.cleansSearchString(this.typedValue)),void(""===this.typedValue||this.typedValue.length<this.options.minChars||this.options.maxChars&&this.typedValue.length>this.options.maxChars?(log("_self","typed value empty || < minChars || > maxChars"),this.hide(),this.updateShadow()):this.getSuggestions()))},onSelect:function(e,t){var n=this.suggestions[e]||[this.cleansSearchString(this.el.value)];this.options.onSelectSuggestion&&"function"==typeof this.options.onSelectSuggestion?this.options.onSelectSuggestion(n,this.suggestions,t):n[0]&&(this.updateShadow(),this.updateInput(n[0]),this.ignoreValueChange=!0),this.hide(),this.options.autoSubmit&&$(this.el).closest("form")[0]&&!t&&($(this.el).closest("form").submit(),this.addRequestsToLocalStorage(n[0]))},addRequestsToLocalStorage:function(e){try{if(localStorage){var t;localStorage.hasOwnProperty("search_history")?(t=JSON.parse(localStorage.getItem("search_history")),$.inArray(e,t)>-1&&t.splice($.inArray(e,t),1),t.unshift(e),t.length>50&&t.pop()):(t=[],t.push(e)),localStorage.setItem("search_history",JSON.stringify(t))}}catch(n){}},getSuggestions:function(){if(log("_self","getSuggestions() for value",this.typedValue),$.isArray(this.cachedResponse[encodeURIComponent(this.accentsTidy(this.typedValue))]))this.truncateSuggestions(this.cachedResponse[encodeURIComponent(this.accentsTidy(this.typedValue))]),log("_self","found cached response for value",this.typedValue,this.suggestions),this._suggest();else{if(this.refineLocally&&this.options.allowRefineLocally){if(!this.lastTypedValue.match(/^\s*$/)&&0===this.el.value.toLowerCase().indexOf(this.lastTypedValue))return this.suggestions=$(this.suggestions).grep(function(e){return 0===this.accentsTidy(e[0]).indexOf(this.accentsTidy(this.typedValue))},this),this.cachedResponse[encodeURIComponent(this.accentsTidy(this.typedValue))]=this.suggestions,void this._suggest();this.refineLocally=!1}this.suggestionsProvider()}},suggestionsProvider:function(){var e=getCookie("dmt"),t=this.options.serviceUrl+"/"+encodeURIComponent(this.typedValue)+(e?"?"+e:"");$.getJSON(t).always($.proxy(this.processResponse,this,t))},_suggest:function(){this.suggest(),this.options.withIframeLayer&&this.$iframeLayer.show().css({left:$(this.container).css("left"),width:$(this.container).outerWidth()+"px",height:$(this.container).outerHeight()+"px"})},suggest:function(){if(log("_self","suggest() results for value",this.typedValue),0===this.suggestions.length)return this.updateShadow(),log("_self","no suggestions to display, hide container"),void this.hide();var e=[],t="";e.push('<div class="suggestions">');var n=this;$(this.suggestions).each(function(i,o){0===i&&n.updateShadow(o[0]),t=o[0],e.push(n.selectedIndex===i?'<div class="selected"':"<div",' onclick="Autocomplete.instances[',n.instanceId,"].onSelect(",i,')"',' onmouseover="Autocomplete.instances[',n.instanceId,"].activate(",i,')">','<span class="suggestion" id="suggestion_',i,'"',">",t,"</span>"),e.push('<div class="clear_suggestion"></div></div>')}),e.push("</div>"),$(this.container).html(e.join("")).show(),"input_search"==this.searchFieldId&&$(".sd_header__search input[name=search]").addClass("no_border_bottom_left_radius");var i=$("#"+this.searchFieldId),o=i.position();$(this.container).css({left:o.left+"px",width:i.width()+"px"})},processResponse:function(e,t){var n=e.substring(e.lastIndexOf("/")+1,e.length);-1!=n.indexOf("?")&&(n=n.substring(0,n.indexOf("?"))),log("_self","processResponse()",t),this.cachedResponse[encodeURIComponent(this.accentsTidy(this.typedValue))]=t,this.truncateSuggestions(t),this.suggestions.length<10&&this.options.allowRefineLocally&&(this.refineLocally=!0);var i=this.el.value.toLowerCase(),o=this.options.cleanStringOnProcessResponse?this.cleansSearchString(i):i;n===encodeURIComponent(o)&&this._suggest()},truncateSuggestions:function(e){this.suggestions=e;var t=$("html");if(t.hasClass("win")&&(t.hasClass("webkit")||t.hasClass("ie"))){var n=$("#main_player")||$(".dmpi_video_playerv4"),i=n[0];if(i){var o=n.offset().top-$("#header").offset().top-this.options.headerOffset;this.options.suggestMax=Math.floor(o/this.options.suggestHeight),$(document.body).hasClass("dm_page_html_video")||this.options.suggestMax--}this.options.suggestMax<10&&(this.suggestions=e.slice(this.options.suggestMax-1))}},activate:function(e){var t;if(this.container&&$(this.container).is(":visible")){$(this.container).find(".selected").removeClass("selected"),this.selectedIndex=e;var n=$(this.container).children().children();-1!==this.selectedIndex&&n.length>this.selectedIndex&&(t=n[this.selectedIndex],$(t).addClass("selected"))}return t},updateShadow:function(e){if(this.options.withShadow){var t=this;clearTimeout(this.shadowTimeout),e?this.shadowTimeout=setTimeout(function(){t.shadowEl.value=e,log("_self","update shadow with value",e)},300):(this.shadowEl.value="",log("_self","update shadow with value",e))}},cleansSearchString:function(e){return e.replace(/\s{2,}/g," ").replace(/^\s+/g,"").replace(/\//g,"")},accentsTidy:function(e){return e.toLowerCase().replace(/[]/g,"a").replace(//g,"c").replace(/[]/g,"e").replace(/[]/g,"i").replace(//g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y")}},e},!0)},61:function(e,t,n){n(1),n(2),n(55),n(6),n(8),_DM.define("DM_BrowsingContext",function(){var e=function(){this.timeout=1800,this.maxsize=3e3,this.list=this.getList(),this.expire()&&this.save(),$($.proxy(this.apply,this))};return e.prototype={apply:function(e){this.initEvents(e)},initEvents:function(e){var t="a[data-context]",n=$.isString(e)?e+" "+t:t,i=this;$(n).each(function(){this.dm_browsingcontext_observed||(this.dm_browsingcontext_observed=!0,$(this).on("click",$.proxy(i.put,i,this.href.split("#")[0].split("?")[0],this.getAttribute("data-context"))))})},getList:function(){var e={},t=getCookie("dmc");try{t&&(e=$.parseJSON(unescape(t))),$.isArray(e)&&(e={})}catch(n){}return e},put:function(e,t){this.list[this.sign(e)]={c:t,t:this.timestamp()},this.reduce(),this.save()},save:function(){setCookie("dmc",this.serialize())},serialize:function(){return escape($.toJSONString(this.list))},expire:function(){var e=!1;for(var t in this.list)if(this.list.hasOwnProperty(t)){var n=this.list[t].t;(!$.isNumeric(n)||this.timestamp()>n+this.timeout)&&(delete this.list[t],e=!0)}return e},timestamp:function(){return Math.round((new Date).getTime()/1e3)},reduce:function(){for(;this.serialize().length>this.maxsize;){var e=null;for(var t in this.list)this.list.hasOwnProperty(t)&&(null===e||this.list[t].t<this.list[e].t)&&(e=t);if(!e)break;delete this.list[e]}},sign:function(e){return this.crc32(e.replace(/[^a-zA-Z0-9_]+/g,""))},crc32:function(e,t){var n="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";t==window.__undefined&&(t=0);var i=0,o=0;t=-1^t;for(var a=0,r=e.length;r>a;a++)i=255&(t^e.charCodeAt(a)),o="0x"+n.substr(9*i,8),t=t>>>8^o;return-1^t}},e},!0)},62:function(e,t,n){n(1),n(2),_DM.define("DM_Dir",function(){var e=$("html").attr("dir"),t="rtl"==e?"right":"left",n="rtl"==e?"left":"right",i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o={start:t,Start:i(t),end:n,End:i(n)};return o},!0)},63:function(e,t,n){n(1),n(2),n(4),_DM.define("DM_PlayerUtils",function(){var e=[],t=[],n=document.title,i=!1,o=!1,a=function(e){document.title=1==e?" "+n:n},r=function(n){e.push(n),t.push({object:$("#"+n).get(0),id:n,previousState:0,pauseTimeout:0}),1==t.length&&DM_PlayerEvents.on("StateChange",n,a)},s={needsCssUpdate:function(){return $("html.gecko.win, html.gecko.linux").length&&$(playerV5).children("embed").first().length},hideAllPlayers:function(){if("undefined"!=typeof playerV5)return playerV5.pause(),void(s.needsCssUpdate()&&$(playerV5).css("visibility","hidden"));if(!o){var e=function(e){if(!$("#"+e.id).closest("#popupContent").length){e.previousState=e.object.getPlayerState();var t=$(e.object);t.parent().addClass("invisible"),t.css("visibility","hidden"),s.pausePlayer(e)}};try{t.length?$.each(t,function(t,n){e(n)}):DM_PlayerEvents.on("Ready",function(t){e({object:$("#"+t).get(0),id:t})}),$(".dmpi_video_partnerplayer").each(function(e,t){$(t).parent().addClass("invisible").css("visibility","hidden")}),o=!0}catch(n){}}},showAllPlayers:function(){if("undefined"!=typeof playerV5)return playerV5.play(),void(s.needsCssUpdate()&&$(playerV5).css("visibility","visible"));if(o&&!i)try{$.each(t,function(e,t){clearTimeout(t.pauseTimeout);var n=$(t.object);n.parent().removeClass("invisible"),n.css("visibility","visible");var i=t.object.getAPICustomParams();(1==t.previousState||-1==t.previousState&&i.autoplay||3==t.previousState)&&t.object.playVideo()}),$(".dmpi_video_partnerplayer").each(function(e,t){var n=$(t);n.parent().removeClass("invisible"),n.css("visibility","visible")}),o=!1}catch(e){}},pausePlayer:function(e){clearTimeout(e.pauseTimeout);var t=e.object.getPlayerState();-1==t||3==t||t>100?e.pauseTimeout=setTimeout(function(){s.pausePlayer(e)},500):1==t&&e.object.pauseVideo()},showWarning:function(e,t,n){$("#container_"+e).addClass("notice").empty().append($("<div/>").addClass("warning").append($("<p/>").addClass("title").html(t)).append($("<p/>").addClass("message").html(n)))},initialize:function(){DM_PlayerEvents.on("Ready",r)},__initialize:function(){PubSub.subscribe("popup:opening",s.hideAllPlayers),PubSub.subscribe("dm-tour:start",function(){i=!0,s.hideAllPlayers()}),PubSub.subscribe("popup:closed",s.showAllPlayers),PubSub.subscribe("dm-tour:end",function(){i=!1,s.showAllPlayers()})}};return s},!0)},64:function(){!function(e){var t=1;e.fn.identify=function(){return this.each(function(){var n,i=e(this);if(!i.attr("id")){do n="jq-"+t++;while(e("#"+n).length>0);i.attr("id",n)}})}}(jQuery)},65:function(){if(window.__prefetching)throw new Error("No error, prefetch done. Stop execution.")},66:function(e,t,n){n(1),n(2),_DM.define("DM_Request",function(){var e={getRequestURI:function(e){return e&&!/^(http:|https:)?\/\//.test(e)?e:"/"+(e||document.location.href).split(/[\/]+/).slice(2).join("/")},redirect:function(e){document.location.href=e},redirectAfterTimeout:function(e,t){setTimeout(function(){DM_Request.redirect(e)},1e3*t)},getFirstToken:function(t){return e.getRequestURI(t).split(/[\/]+/)[0]},getLastToken:function(t){var n=e.getRequestURI(t).split(/[\/]+/);return n[n.length-1]},getAnchor:function(t){var n=e.getRequestURI(t).match(/#(.*)$/);return n?n[1]:null},getQueryParams:function(e){var t=-1!==e.indexOf("?")?e.replace(/^\s+/,"").replace(/\s+$/,"").match(/([^?#]*)(#.*)?$/):null,n={};return t?($.map(t[1].split("&"),function(e){if((e=e.split("="))[0]){var t=decodeURIComponent(e.shift()),i=e.length>1?e.join("="):e[0];i!==window.__undefined&&(i=decodeURIComponent(i)),t in n?($.isArray(n[t])||(n[t]=[n[t]]),n[t].push(i)):n[t]=i}}),n):n},getHashParams:function(){var e={},t=window.location.hash.replace(/#/g,"");return t?($.map(t.split("&"),function(t){if((t=t.split("="))[0]){var n=decodeURIComponent(t.shift()),i=t.length>1?t.join("="):t[0];i!==window.__undefined&&(i=decodeURIComponent(i)),n in e?($.isArray(e[n])||(e[n]=[e[n]]),e[n].push(i)):e[n]=i}}),e):e},cleanSearch:function(e){return e.replace(/\/|~/g," ").replace(/^(\.*)$/," $1")}};return e},!0)},67:function(){window.require=function(){}},68:function(e,t,n){function i(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null===e?[0,0,0]:[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return!1}function o(){return/Safari/.test(navigator.userAgent)?[0,0,0]:!1}n(1);var a=i()||o();!store.enabled&&a&&a[0]<=8&&(window.fakeStorage={},store.get=function(e){return this.deserialize(fakeStorage[e])},store.set=function(e,t){fakeStorage[e]=this.serialize(t)},store.clear=function(){fakeStorage={}},store.serialize=function(e){return JSON.stringify(e)},store.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}}),_DM.define("storeWithExpiration",function(){var e={set:function(e,t,n){store.set(e,{val:t,exp:n,time:(new Date).getTime()})},get:function(e){var t=store.get(e);return t?(new Date).getTime()-t.time>t.exp?null:t.val:null},getNewExp:function(e){
var t=store.get(e);return t?(new Date).getTime()-t.time>t.exp?null:t.exp-((new Date).getTime()-t.time):null}};return e},!0)},69:function(e,t,n){n(1),n(2),n(13),_DM.define("DM_WatchLaterDone",function(){var e=function(e){DM_Controller.call("Page_Videos",{method:"getWatchlaterModifiedMessage",args:[e],callback:function(e){PubSub.publish("page:notify",e,"page")}})},t={initialize:function(){getCookie("wl_ok")&&(deleteCookie("wl_ok"),e("added"))},__initialize:function(){PubSub.subscribe("watchlater:added",function(){e("added")}),PubSub.subscribe("watchlater:removed",function(){e("removed")})}};return t},!0)},70:function(e,t,n){n(1),n(2),n(3),_DM.define("DM_WatchLater",function(){var e="/controller/Shared_Video_Watchlater?method=",t=function(e){return $.isArray(e)||(e=[e]),e},n=function(e){return-1==o.indexOf(e)&&-1!=(a.videosFromReq||[]).indexOf(e)},i=function(e){n(e.xid)&&a.remove(e.xid)},o=[],a={add:function(n){n=t(n),DM_Ajax.jsonCall(e+"add",{videoIds:n},function(){PubSub.publish("watchlater:added",n),DM_Stats.trigger({action:"add_to_watchlater"})},function(e){log("DM_WatchLater","add failed",e)})},remove:function(n){DM_Context.is_logged&&(n=t(n),DM_Ajax.jsonCall(e+"remove",{videoIds:n,next_url:e+"add"},function(){o=o.concat(n),PubSub.publish("watchlater:removed",n)},function(e){log("DM_WatchLater","remove failed",e)}))},__initialize:function(){PubSub.subscribe("dm:readersession:video_watched",i)}};return a},!0)},72:function(e,t,n){n(1),n(2),_DM.define("Mo_Submenu",function(){var e={initEvents:function(){$(".js-tipsy-submenu").one("mouseover",function(){DM_JS.get("tipsy")}),$(".js-tipsy-submenu").click(function(t){$(this).hasClass("is-clicked")||(t.stopPropagation(),e.hideSubnav($(this).closest(".pl_videos_subnav, .js-contest-submenus").find(".js-tipsy-submenu.is-clicked")),$(this).addClass("is-clicked").tipsy("show"))}),$("#bodyall").click(function(){e.hideSubnav($(".js-tipsy-submenu.is-clicked"))})},hideSubnav:function(e){e.each(function(){$(this).removeClass("is-clicked").tipsy("hide")})},__initialize:function(){e.initEvents()}};return e})},73:function(e,t,n){n(1),n(2),n(7),n(74),_DM.define("Sd_Footer",function(){var e=3,t={__initialize:function(){t.$footer=$(".sd_footer"),t.$backToTop=$(".back-to-top"),t.initEvents(),PubSub.subscribe("footer:unfold",Sd_Footer.onUnfold).subscribe("footer:fold",Sd_Footer.onFold)},initEvents:function(){setTimeout(function(){t.showBackToTop(),$(window).on("scroll",t.showBackToTop)},3e3),$(document).on("click",".back-to-top",t.scrollToTop).on("click",".js-family-filter-toggle",t.showFamilyfilter)},showFamilyfilter:function(e){e.preventDefault(),DM_WidgetV3.get("/controller/Page_FamilyFilter","popup")},onUnfold:function(){t.$footer.addClass("unfolded")},onFold:function(){t.$footer.removeClass("unfolded")},needsBackToTop:function(){var t=$(document).height(),n=$(window).height();return t/n>=e},needsShowButton:function(){var e=$(window).scrollTop(),t=$(window).height();return e>=t},showBackToTop:function(){t.needsBackToTop()&&t.needsShowButton()?(t.$backToTop.hasClass("show_button")||(t.$backToTop.addClass("show_button"),t.$backToTop.removeClass("hide_button")),footer_limit=$(document).height()-$(window).height()-t.$footer.outerHeight(!0),footer_limit>=$(window).scrollTop()&&!t.$backToTop.hasClass("fixed")?(t.$backToTop.addClass("fixed"),t.$backToTop.removeClass("absolute")):footer_limit<$(window).scrollTop()&&!t.$backToTop.hasClass("absolute")&&(t.$backToTop.addClass("absolute"),t.$backToTop.removeClass("fixed"))):!t.$backToTop.hasClass("hide_button")&&t.$backToTop.hasClass("show_button")&&(t.$backToTop.removeClass("show_button"),t.$backToTop.addClass("hide_button"))},scrollToTop:function(){$("html, body").animate({scrollTop:0})}};return t},!0)},74:function(e,t,n){n(1),n(2),n(36),n(8),n(7),_DM.define("DM_LocaleSelector",function(){var e={initEvents:function(){$(document).on("click",".js-change-locale",DM_LocaleSelector.onCountryFlagClick)},onCountryFlagClick:function(){var t=$(this).data("country"),n=$(this).data("language");e.changeLocale(n,t)},initCountrySelectorOnLoad:function(){DM_Widget_Page.applyTipsy();var e=$("#country_selector a"),t=document.location.search,n=document.location.hash;""!==$.trim(t)&&e.each(function(){$(this).attr("href",$(this).attr("href")+t)}),""!==$.trim(n)&&"undefined"!=typeof DM_LocaleSelector_routeName&&"faq"==DM_LocaleSelector_routeName&&e.each(function(){$(this).attr("href",$(this).attr("href")+n)})},changeLocale:function(e,t){t&&(e=e+"_"+t.toUpperCase()),setCookie(DM_LoginCookie,"",-10),setCookie("lang",e,100)},__onDomReady:function(){setTimeout(function(){DM_WidgetV3.addCss("/css/views/shared/flag.css")},4e3),e.initEvents(),$("#country_selector").size()&&e.initCountrySelectorOnLoad()}};return e},!0)},75:function(e,t,n){n(1),n(2),n(8),n(57),n(78),_DM.define("Sd_Header",function(){var e={},t={universalSearch:!0,getDomElements:function(){e.meta_header=$(".sd_metaheader"),e.meta_header_close=e.meta_header.find(".sd_metaheader__close"),e.header=$(".sd_header"),e.header__form=e.header.find(".sd_header__search form"),e.header__search=e.header.find(".sd_header__search input[name=search]"),e.header__search_copy=e.header.find(".sd_header__search input[name=search_copy]"),e.header__locale=e.header.find(".sd_header__search input[name=locale]"),e.header__login=e.header.find(".sd_header__login"),e.header__logo=e.header.find(".sd_header__logo")},updateSuperHeaderPositions:function(){e.header.hasClass("sd_header--fixed")&&e.meta_header.addClass("sd_metaheader--fixed")},initEvents:function(){e.header__form.submit(Sd_Header.onSearchSubmit),DM_Context.search&&e.header__search.val(DM_Context.search),$("body").on("click.close_metaheader",".sd_metaheader__close",t.onCloseSuperHeaderClick).on("keyup.search",e.header__search,t.onKeydownSearchInput)},onKeydownSearchInput:function(t){var n=$.trim(e.header__search.val()),i=String.fromCharCode(t.keyCode),o=i.match(/\w/),a=8==t.keyCode||46==t.keyCode;(o||a)&&e.header__search_copy.val(n)},onSearchSubmit:function(){var n=new RegExp("^(\\s|\\.|~)*$","g");if(e.header__search.length&&!n.test(e.header__search.val())){var i=t.universalSearch&&!DM_Context.search_source_type||-1!=DM_Request.getRequestURI().indexOf("relevance/universal/search")?"/universal":"";i="/relevance"+i+"/search/"+encodeURIComponent(DM_Request.cleanSearch(e.header__search.val())).replace(/%20/g,"+")+"/1";var o=!0;if("undefined"!=typeof DM_Context.search_source_type){var a=DM_Context.search_source_type;-1!=$.inArray(a,["user","playlist","group"])&&(i="/"+a+"s"+i,o=!1)}o&&(i="/"+e.header__locale.val()+i);{var r=$(".search_suggestion.selected"),s=parseInt($(".suggestions .search_suggestion").index(r)+1,10);"Characters: "+e.header__search_copy.val().length+", Spot: "+s+", String: "+(s>0?e.header__search_copy.val():"none")}document.location.href=i}return!1},onCloseSuperHeaderClick:function(){setCookie("hideSuperHeader",1,7),e.meta_header.remove(),PubSub.publish("dm:close_super_header")},webappRedirect:function(){this.displayName="webappRedirect",setCookie("force_desktop_version","",-1),document.location.reload(!0)},hideConnectLinkAndFB:function(){$("body").hasClass("dm_page_html_login")&&e.header__login.children().eq(0).remove()},hideAllAfterRegister:function(){$("#popupContent div.register_form_box").css("width","auto"),$(".register_form_box").addClass("register_step2").removeClass("mrg-end-xl pdg-end-xl"),$(".register_right_box").hide(),$("#popupContent div.register_right_box, #popupContent div.box_sep").hide(),$("form.dmpi_registerform").removeClass("dmpi_registerform"),"undefined"!=typeof DM_Widget_Popup&&DM_Widget_Popup.instance&&DM_Widget_Popup.instance.center()},handleMenuClick:function(){var t=e.header__login.find("> .js-tipsy");t.on("click",function(e){e.preventDefault();var t=$(".tipsy").length?"hide":"show";$(this).tipsy(t)})},__onDomReady:function(){t.getDomElements(),t.updateSuperHeaderPositions(),t.initEvents(),t.hideConnectLinkAndFB(),DM_Context.is_logged&&"desktop"!=DM_Context.device&&t.handleMenuClick()},__initialize:function(){HeaderLogin.update(),this.webappRedirect.displayName="webappRedirect",PubSub.subscribe("dm:metaheader:closed",t.onCloseSuperHeaderClick)}};return t},!0)},76:function(e,t,n){n(1),n(2),n(12),n(14),n(328),n(13),n(62),_DM.define("Sd_Navigation_Panel",function(){"use strict";function e(e,n,i){"replace"===i&&(i="html");var o=t(e,n.hasClass("activity"));n.find(".list-placeholder").remove(),n[i](o).find("li").show(),n.closest(".nav-section").show(),PubSub.publish("dm:nav:listdisplayed",n)}function t(e,t){var n=[],i="undefined"!=typeof e[0]&&"undefined"!=typeof e[0].uri&&!t;return $.each(e,function(e,t){var o="link-on-hvr"+(i?" js-channel-tip":""),a=i?'data-user-uri="'+t.uri+'" data-channel-tip-gravity=w"':"";n.push('<li style="display: none"><a class="'+o+'" href="'+t.url+'" data-link="'+t.screenname+'" '+a+">"),"undefined"!=typeof t.avatar_60_url&&n.push('<div class="avatar-wrapper"><img class="brd-rad-sm" src="'+t.avatar_60_url+'"></div>');var r="undefined"!=typeof t.activity&&t.activity.toString().length>2?"nav-screenname small":"nav-screenname";n.push('<span class="'+r+'">'+t.screenname+"</span>"),"undefined"!=typeof t.activity&&n.push('<span class="pull-end '+(t.activity>0?"":"hidden")+'">'+t.activity+"</span>"),n.push("</a></li>")}),n.join("")}var n=580,i={subscriptionsLoaded:!1,subscriptionsPage:1,blockStoreKey:"nav-block-status",blockStatus:{},resizeInterval:!1,navigationPanelVisible:!1,navigationPanelOverThePlayer:!1,initNavigationPanel:function(){i.navigationPanel=$("#navigation-panel"),i.headerNavigationTrigger=$(".sd_header__navigation i"),i.nav=i.navigationPanel.find("nav"),i.navigationWrapper=$(".navigation-wrapper"),i.subscriptionLoadMore=$("#subscription-load-more"),i.windowWidth=$(window).width(),i.resizeNavigationPanelHeight(),"open"===store.get("navigation:status")&&i.openNavigationPanel(!1),i.headerNavigationTrigger.on("click",i.toggleNavigationPanel),$(".sd_header__navigation .badge").on("click",i.toggleNavigationPanel),$(".navigation-sub-trigger").on("click",i.toggleSubMenu),i.subscriptionLoadMore.on("click",function(e){i.store.set("nav-show-subscriptions",!0),i.loadSubscriptions(e,!0)}),i.nav.find("a").on("click",function(){var e=$(this),t=e.closest(".nav-section").data("content");DM_Stats.trigger({action:"navigation_panel",context:"generated_traffic",data:{content:t,link:e.data("link")||t}})}),PubSub.subscribe("watchlater:added",function(){i.updateWatchLater(!0)}).subscribe("watchlater:removed",function(){i.updateWatchLater(!1)}).subscribe("dm:smartalert:displaying",i.forceResize).subscribe("dm:smartalert:displayed",i.endForceResize).subscribe("dm:smartalert:closing",i.forceResize).subscribe("dm:smartalert:closed",i.endForceResize).subscribe("dm:metaheader:closed",function(){i.navigationPanelVisible&&i.resizeNavigationPanelHeight()}).subscribe("dm:nav:listdisplayed",i.highlightCurrentLink);var e=i.store.get(i.blockStoreKey);i.blockStatus="object"==typeof e?e:{};for(var t in i.blockStatus){var n=$('.nav-section[data-content="'+t+'"]').find(".navigation-sub-trigger");i.blockStatus[t]?n.hasClass("selected")||i.toggleSubMenu.call(n,!1,!1):i.toggleSubMenu.call(n,!1,!1)}i.highlightCurrentLink(),i.store.get("nav-hide-notif")&&$(".sd_header__navigation .navigation-notification").remove(),$(window).on({resize:function(){i.windowWidth=$(window).width(),i.navigationPanelVisible&&(i.getColContent(!0),DM_Utils.throttle(i.resizeNavigationPanelHeight,250,!0))},scroll:function(){i.navigationPanelVisible&&(DM_Utils.throttle(i.resizeNavigationPanelHeight,250,!0),i.navigationPanelOverThePlayer&&i.closeNavigationPanel())}})},forceResize:function(){i.resizeInterval=setInterval(function(){i.navigationPanelVisible&&i.resizeNavigationPanelHeight()},5)},endForceResize:function(){clearInterval(i.resizeInterval),i.resizeNavigationPanelHeight()},resizeNavigationPanelHeight:function(){var e=$(".sd_header"),t=e.offset().top+e.height(),n=$(window),o=n.height(),a=n.scrollTop(),r=a>t?0:0>a?t:t-a,s=a>t?o:o-r;i.navigationPanel.css({height:s,top:r})},toggleNavigationPanel:function(){return i.navigationPanelVisible?i.closeNavigationPanel():i.openNavigationPanel(!0)},openNavigationPanel:function(e){return i.loadDatas.done||DM_ResourcePlanner.add("pagelet",i.loadDatas),i.getColContent(e)?(i.resizeNavigationPanelHeight(),i.nav.scrollTop(0),i.headerNavigationTrigger.parent().addClass("active"),i.store.set("navigation:status","open"),i.store.set("nav-hide-notif",!0),PubSub.publish("navigation:opened"),$(".sd_header__navigation .navigation-notification").remove(),void(i.navigationPanelVisible=!0)):!1},getColContent:function(e){for(var t=DM_Responsive.getBreakpointFromWindowSize(i.windowWidth),n=DM_Responsive.breakpoint_names,o=n.indexOf(t.name);o>=0;){var a=n[o],r=i.hasCol(a);if(r)return i.OpeningPanelRegardingSpace(e,r);o--}return i.OpeningPanelRegardingSpace(e,DM_Responsive.nb_cols)},OpeningPanelRegardingSpace:function(e,t){var o=$(".main-container-player").length?n+parseInt($(".main-container-player").css("paddingLeft"),10)+parseInt($(".main-container-player").css("paddingRight"),10):$("#content").width(),a=t/DM_Responsive.nb_cols*(i.windowWidth-i.navigationPanel.width()-parseInt($("#content").css("paddingLeft"),10)-parseInt($("#content").css("paddingRight"),10));if(a>o){i.navigationPanelOverThePlayer=!1;var r=DM_Dir.start.charAt(0).toUpperCase()+DM_Dir.start.slice(1);$("#topwrapper").css("padding"+r,i.navigationPanel.width()),i.navigationPanel.css(DM_Dir.start,"0px")}else{if(!e)return!1;i.navigationPanelOverThePlayer=!0,$("#topwrapper").removeAttr("style"),i.navigationPanel.css(DM_Dir.start,"")}return $(".navigation-panel").css(DM_Dir.start,"0px"),!0},hasCol:function(e){var t=$($(".main-container-player").length?".main-container-player":"#content"),n=new RegExp("(?:^|\\s)col-"+e),i=t[0].className.split(" "),o=i.filter(function(e){return n.test(e)});return o.length?(o=o[0].split("-"),o[o.length-1]):!1},closeNavigationPanel:function(){$("#topwrapper").removeAttr("style"),i.navigationPanel.removeAttr("style"),i.navigationPanelVisible=!1,i.navigationPanelOverThePlayer=!1,i.headerNavigationTrigger.parent().removeClass("active"),i.store.set("navigation:status","closed"),PubSub.publish("navigation:closed")},toggleSubMenu:function(e,t){if(e){if($(e.target).hasClass("js-following-settings"))return;e.preventDefault()}t="undefined"!=typeof t?t:!0;var n=$(this);n.closest(".nav-section").find(".nav-sub-menu")[t?"slideToggle":"toggle"](300),t?n.toggleClass("selected"):(n.addClass("no-anim").toggleClass("selected"),setTimeout(function(){n.removeClass("no-anim")},300)),n.closest(".nav-section").data("content")&&(i.blockStatus[n.closest(".nav-section").data("content")]=n.hasClass("selected")?!0:!1,i.store.set(i.blockStoreKey,i.blockStatus))},updateWatchLater:function(e){var t=$("[data-watch-later-count]"),n=parseInt(t.data("count"),10),i=e?n+1:n-1,o=i>9?"9+":i;return t.text(o).data("count",i),i?t.closest("li").fadeIn():t.closest("li").fadeOut()},loadDatas:function(){if(i.store.get("nav-datas")&&i.store.get("nav-log-status")===DM_Context.is_logged&&i.store.get("nav-lang-status")===DM_Context.country)try{i.displayDatas(i.store.get("nav-datas"))}catch(e){i.loadRemoteDatas()}else i.store.get("nav-log-status")!==DM_Context.is_logged||i.store.get("nav-lang-status")!==DM_Context.country?i.clearDatas():(i.store.remove("nav-datas"),i.store.remove("nav-subscriptions")),i.loadRemoteDatas();i.loadDatas.done=!0},clearDatas:function(){i.store.remove("nav-datas"),i.store.remove("nav-datas-subscribed-users"),i.store.remove("nav-subscriptions"),i.store.remove("nav-show-subscriptions"),i.store.remove(i.blockStoreKey)},loadRemoteDatas:function(){DM_Controller.call("Shared_NavigationPanel",{method:"loadInitialDatas",callback:function(e){e=$.parseJSON(e),i.store.set("nav-datas-subscribed-users",e.subscribedUsers),delete e.subscribedUsers,i.store.set("nav-datas",e),i.store.set("nav-log-status",DM_Context.is_logged),i.store.set("nav-lang-status",DM_Context.country),i.displayDatas(e,"replace")}})},displayDatas:function(t,n){e(t.recommendedUsers,$("#navigation-suggested-users"),n||"append"),e(t.channels,$("#navigation-channels-list"),n||"prepend"),DM_Context.is_logged&&(i.displayInitialSubscriptions(),i.displayExistingItems(t.userDatas))},resetUserActivity:function(e){var t=location.pathname.match(/^\/user\/([\S]+)\/[0-9]+/i),n=$.isArray(t)?t[1]:!1,i=n&&DM_Context.reader_login===n;if(!n||i)return e;if(e)for(var o in e.subscriptions)e.subscriptions[o].uri.substr(1)===n&&0!==e.subscriptions[o].activity&&(e.notifications-=e.subscriptions[o].activity,e.subscriptions[o].activity=0);return e},displayInitialSubscriptions:function(){var e=i.store.get("nav-datas-subscribed-users");e=i.resetUserActivity(e),i.store.set("nav-datas-subscribed-users",e),i.displaySubscriptions(e),i.store.get("nav-show-subscriptions")&&(i.loadAdditionnalSubscriptions(function(e){e=i.resetUserActivity(e),i.store.set("nav-subscriptions",e),i.displaySubscriptions(e,!1)}),i.subscriptionLoadMore.removeClass("loading").addClass("loaded"),i.subscriptionsLoaded=!0)},loadSubscriptions:function(e,t,n,o){t=t||!1,n=n||!1,o=o||!1,t&&!i.subscriptionLoadMore.hasClass("loaded")&&e&&e.preventDefault(),i.subscriptionsLoaded||(n?i.displaySubscriptions(n,o):i.loadAdditionnalSubscriptions(function(e){i.displaySubscriptions(e,o),i.subscriptionLoadMore.removeClass("loading").addClass("loaded"),i.subscriptionsLoaded=!0}))},loadAdditionnalSubscriptions:function(e){var t=i.store.get("nav-subscriptions");t?e(t):DM_Controller.call("Shared_NavigationPanel",{method:"getSubscribedUsers",args:[i.subscriptionsPage,5],callback:function(t){t=$.parseJSON(t),i.store.set("nav-subscriptions",t),e(t)}})},displaySubscriptions:function(t){if(i.subscriptionsPage++,"undefined"!=typeof t.subscriptions&&t.subscriptions.length){var n=$(".navigation-notification"),o=parseInt(n.data("total"),10),a=o+parseInt(t.notifications,10);n.data("total",a),a=99>a?a:"99+",a&&n.text(a).removeClass("hidden"),e(t.subscriptions,$("#navigation-subscription-list"),"append"),i.subscriptionsPage>2&&i.subscriptionLoadMore.addClass("loaded")}},displayExistingItems:function(e){var t=$("#user-infos-section");for(var n in e){var i=parseInt(e[n],10);i&&t.find("[data-id="+n+"]").show()}},highlightCurrentLink:function(){i.navigationPanel.find("ul a.current").length||i.navigationPanel.find("ul a").each(function(){var e=$(this);if(e.attr("href")==location.pathname||e.attr("href")==location.href){e.addClass("current");var t=e.closest(".nav-section").find(".navigation-sub-trigger");return t.hasClass("selected")||i.toggleSubMenu.call(t,!1),!1}})},isAutoOpenRoute:function(){var e=location.pathname.split("/"),t=["admin","settings"];return"undefined"!=typeof e[1]&&-1===t.indexOf(e[1])},__localstorageConf:{"nav-datas":{version:.3,expire:864e5},"nav-datas-subscribed-users":{version:.1,expire:864e5},"nav-subscriptions":{version:.1,expire:864e5},"nav-show-subscriptions":{version:.1,expire:864e5},"nav-log-status":{version:.1,expire:864e5},"nav-lang-status":{version:.1,expire:864e5},"nav-hide-notif":{version:.1,expire:432e5}},__initialize:function(){$("#navigation-panel").length&&$(".sd_header__navigation").length&&i.initNavigationPanel()}};return i},!0)},78:function(e,t,n){n(1),n(2),n(60),_DM.define("DM_Widget_PageItem_Search",function(){var e={version:5,autocomplete_enabled:"0",language:"en",historyCounter:0,checkUserHistory:function(t){try{var n=t.typedValue;if(localStorage&&localStorage.hasOwnProperty("search_history")&&n.length>1){var i=JSON.parse(localStorage.getItem("search_history")),o=0;$(i).each(function(i,a){return a.substring(0,n.length)==n&&(e.checkDuplicateValue(a),t.suggestions.splice(o,0,[a,0,0,[[n.length,a.length-n.length]],0,!1]),o++),2==o?(e.historyCounter=o,!1):void 0}),e.historyCounter=o}}catch(a){}},checkDuplicateValue:function(t){$(e.autocomplete.suggestions).each(function(n,i){return i[0]==t?(e.autocomplete.suggestions.splice(n,1),!1):void 0})},updateInput:function(){return this.options.appendMode=this.suggestions[this.selectedIndex]&&this.suggestions[this.selectedIndex][4]>0,Autocomplete.prototype.updateInput.apply(this,arguments)},suggest:function(){var t=e.autocomplete;if(0===t.suggestions.length)return t.updateShadow(),log("Search","no suggestions to display, hide container"),void t.hide();var n=$(".suggestions").length?$(".suggestions").empty():$('<div class="suggestions">'),i="";e.checkUserHistory(t),$(t.suggestions).each(function(o,a){i="",boldString="";for(var r=0,s=a[3],l=0;l<s.length;l++){var c=s[l];r<c[0]&&(i+=a[0].slice(r,c[0])),r=c[0]+c[1],boldString=a[0].slice(c[0],r),i+="<b>"+boldString+"</b>"}r<a[0].length&&(i+=a[0].slice(r));var u=t.selectedIndex===o?"selected":"";u=e.historyCounter>0?"history":u,e.historyCounter>0&&e.historyCounter--;var d=$('<div class="search_suggestion '+u+'" onclick="Autocomplete.instances['+t.instanceId+"].onSelect("+o+')" onmouseover="Autocomplete.instances['+t.instanceId+"].activate("+o+')" >').html(i);if(n.append(d),$(t.inputRuler).html(a[4]>0?t.inputValue.slice(0,a[4]).replace(/ /g,"&nbsp;"):""),0===o)a[5]||!boldString?t.updateShadow():t.updateShadow(t.inputValue+boldString);else if(9==o)return!1}),$(t.container).append(n).show();var o=$(t.el),a=o.position();t.inputRuler&&0!==$(t.inputRuler).width()&&$(t.container).css({left:a.left+$(t.inputRuler).width()+"px"}),o.addClass("no_border_bottom_left_radius")},postConfigureSearchField:function(e){var t=$("<div>").attr("id","input_ruler"),n=$(e.el);e.inputRuler=t[0],n.after(t.css({position:"absolute",visibility:"hidden",padding:0,margin:0,font:n.css("font")}))},__initialize:function(){$(function(){if(1==window.DM_Widget_PageItem_Search_autocomplete_enabled){var t="/json/complete/"+DM_Widget_PageItem_Autocomplete_locale,n=$(".sd_header__search input[name=search]");n[0]&&(e.autocomplete=new Autocomplete("input_search",{allowRefineLocally:!1,serviceUrl:t,deferRequestBy:10,maxChars:30,postConfigureSearchField:e.postConfigureSearchField,cleanStringOnValueChange:!1,cleanStringOnProcessResponse:!1,withShadow:!0,withIframeLayer:!0,suggest:e.suggest,updateInput:e.updateInput}))}})}};return e},!0)},83:function(e,t,n){n(2),function(e){e(function(){window.dm_times&&(dm_times.firstdomready=(new Date).getTime())})}(jQuery)},86:function(){_DM.define("DM_EventEmitterTransport",function(){var e,t=2,n={setEndpoint:function(t){return e=t,n},ajax:function(n){var i=1,o=function a(){$.ajax({url:document.location.protocol+"//"+e,type:"POST",contentType:"text/plain",noAjaxExtraParameters:!0,timeout:1e3,data:n}).fail(function(e,n){var o=e.status;(!o||o>=400||o>=500||"timeout"==n)&&t>i&&(i++,a())})};o()}};return n},!0)},87:function(){_DM.define("DM_EventEmitter",function(){return function(e){var t,n,i,o,a,r,s,l,c={critical:1,high:.7,medium:.5,low:.3,trivial:.1},u=1,d=function(e){if(r&&r.length){var t=function(){var e=+new Date,t=p(e);a(JSON.stringify(t),t),h()};clearTimeout(l),e?t():l=setTimeout(t,0)}},p=function(t){var n={sent_ts:t,v1st:e.v1st,events:r};return n},h=function(e){e||(n=(new Date).getTime()),r=[],t=0,clearTimeout(s)},f=function(e){(e||0===e)&&(clearTimeout(s),s=setTimeout(function(){d()},e))},g=function(e){r.push(e)},m=function(e,a){var r=(new Date).getTime(),l=n?r-n:null,p=!1,h=null;if("string"==typeof a&&c[a])a=c[a];else if(void 0!==a){if("number"!=typeof a)throw new Error("Invalid priorityWeight given in EventBus.send")}else a=c.trivial;e.created_ts=r,g(e),t+=a,t>=u?null===l?p=!0:i>l?h=i-l:p=!0:null===l?s||(h=o):l>=o?p=!0:h=o-l,p?d():f(h)},v=function(){d(!0)},_=function(){var t=[];if((a=e&&e.emitter)||t.push("emitter"),t.length)throw new Error("Missing parameter(s) "+t.join(", ")+" in EventBus.init")},y=function(){if(options=e&&e.options||{},!options.emissionMinDelay&&options.emissionMaxDelay||!options.emissionMaxDelay&&options.emissionMinDelay)throw new Error("You must provide both emissionMinDelay and emissionMaxDelay in EventBus options or none at all (default will be emissionMinDelay = 500ms and emissionMaxDelay = 2000ms).");if(i=options.emissionMinDelay||500,o=options.emissionMaxDelay||2e3,options.emissionMinDelay>=options.emissionMaxDelay)throw new Error("emissionMinDelay must be < emissionMaxDelay in EventBus options.")};return _(),y(),h(!0),{send:m,sendAll:v,getEmitter:function(){return a}}}},!0)},89:function(e,t,n){n(1),n(2),n(83),n(11),n(90),_DM.define("DM_RUM_Init",function(){var e,t=function(t){log("RUM","DM_RUM_Init::_send send beacon");var n=[],i=0;for(var o in t)t.hasOwnProperty(o)&&(i++,n.push(encodeURIComponent(o)+"="+(void 0===t[o]||null===t[o]?"":encodeURIComponent(t[o]))));n=e+(e.indexOf("?")>-1?"&":"?")+n.join("&"),i&&(img=new Image,img.src=n)},n=function(){DM_RUM.addVar("t_toppage",dm_times.start),DM_RUM.addVar("t_first_domready",dm_times.firstdomready)},i={promises:{},enabled:function(){return window.RUMEnabled&&(!window.RUMWaitForPlayer||!window.videoHasPartnerPlayer&&(!window.HAS_PV5&&window.flashOK===!0||window.HAS_PV5))},ready:function(e){var t=!0;i.promises[e]=!0;for(var n in i.promises)i.promises.hasOwnProperty(n)&&(t=t&&i.promises[n]);t&&DM_RUM.send()},setupForPlayer:function(){log("RUM","DM_RUM_Init::setupForPlayer"),window.HAS_PV5&&DM_RUM.addVar("pv5",window.HAS_PV5),i.promises={page:!1,player:!1},$(window).on("load",function(){i.ready("page")}).on("beforeunload",function(){DM_RUM.addVar("t_usergone",(new Date).getTime()),DM_RUM.send()}),PubSub.subscribe("rum:player_ready",function(){log("RUM","DM_RUM_Init::setupForPlayer received pubsub rum:player_ready"),i.ready("player")})},addDefaultParameters:function(){navigator.cookieEnabled&&DM_RUM.addVar("cksz",document.cookie.length),DM_RUM.addVar("country",window.DM_Context?DM_Context.geoip_country:"unknown"),DM_RUM.addVar("routename",window.DM_Context?DM_Context.route_name:"unknown"),DM_RUM.addVar("logged",window.DM_Context?DM_Context.is_logged:"unknown"),i.addBottomPageParameters()},addBottomPageParameters:function(){DM_RUM.addVar("t_env_top",dm_times.env_top),DM_RUM.addVar("t_script_bottom",dm_times.script_bottom)},initialize:function(){i.enabled()&&(log("RUM","DM_RUM_Init::initialize RUM is enabled"),e=window.RUMBeaconUrl,DM_RUM.initialize({sender:t,beforeSend:n,autosend:!window.RUMWaitForPlayer}),i.addDefaultParameters(),window.RUMWaitForPlayer&&(window.DM_PlayerEvents||window.DM_PlayerV5Events)&&(log("RUM","DM_RUM_Init::initialize setup player RUM"),i.setupForPlayer()))}};return i},!0)},90:function(e,t,n){n(1),n(2),_DM.define("DM_RUM",function(){var e,t={},n=!1,i={send:function(){if(log("RUM","DM_RUM::send"),!n){if(!e.sender)return console.log('No "DM_RUM.send" implementation has been provided.');i.addPerformanceTimingData(),e.beforeSend&&e.beforeSend(),e.sender(t),n=!0}},addVar:function(e,n){if("string"==typeof e)t[e]=n;else if("object"==typeof e){var i,o=e;for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}},addPerformanceTimingData:function(){var e,t,n;e=window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance,e&&e.timing&&(t=e.timing,n={nt_nav_st:t.navigationStart,nt_req_st:t.requestStart,nt_res_st:t.responseStart,nt_domcontloaded_st:t.domContentLoadedEventStart,nt_domcontloaded_end:t.domContentLoadedEventEnd,nt_load_end:t.loadEventStart},t.msFirstPaint&&(n.nt_first_paint=t.msFirstPaint)),window.chrome&&window.chrome.loadTimes&&(t=window.chrome.loadTimes(),t&&(n.nt_first_paint=t.firstPaintTime)),n.nt_first_paint&&(n.nt_first_paint+"").match(/\./)&&(n.nt_first_paint=Math.ceil(1e3*n.nt_first_paint)),i.addVar(n)},initialize:function(t){log("RUM","DM_RUM::initialize"),e=t,e.autosend&&$(window).on("load",function(){setTimeout(i.send,0)})}};return i},!0)},94:function(e,t,n){n(1),n(2),n(55),n(54),_DM.define("DM_PlayerV5Events",function(){var e={},t=[],n=function(e){log("DM_PlayerV5Events","Player API [#"+e+"] is ready"),i(e)},i=function(n,i){if(!n)return log("DM_PlayerV5Events","Cannot register player with inexistant playerID!");var o,a,s=!i;if(r(n),s){if(e[n].player||(e[n].player=document.querySelector("#"+n)),o=e[n].readyHandlers)for(a=0,l=o.length;a<l;a++)o[a](e[n].player);for(a=0,l=t.length;a<l;a++)t[a](n)}else o=e[n].readyHandlers,o||(o=e[n].readyHandlers=[]),o.push(i)},o=function(t){return null!==e[t].player},a=function(){var n,a;if(arguments.length>1?(a=arguments[0],n=arguments[1]):n=arguments[0],a){if(a=p(a),!a)return;e[a]&&o(a)?n(e[a].player):i(a,n)}else t.push(n)},r=function(t){e[t]||(e[t]={player:null,events:{}})},s=function(t,n,i){e[n].events[t]||(e[n].events[t]={attached:!1,handlers:[]}),e[n].events[t].handlers.push(i)},c=function(t,n,i){for(var o=e[n].events[t].handlers,a=o.length,r=a-1;r>=0;r--)o[r]===i&&o.splice(r,1);o.length||d(t,n)},u=function(t,n){e[n].events[t].attached||(e[n].player.addEventListener(t,function(){DM_PlayerV5Events.trigger(n,t)}),e[n].events[t].attached=!0)},d=function(t,n){e[n].events[t].attached&&(e[n].player.removeEventListener(t,function(){DM_PlayerV5Events.trigger(n,t)}),e[n].events[t].handlers=[],e[n].events[t].attached=!1)},p=function(e){return $.isString(e)?e:1==e.nodeType&&e.nodeName.match(/^embed|object|div$/i)?e.id:(log("DM_PlayerV5Events","Cannot use given playerID:",e),null)},h={on:function(e,t,n){var i=Array.prototype.slice.call(arguments);return"ready"==e?a.apply(h,i.splice(1)):i.length<3?log("DM_PlayerV5Events","Missing argument(s), 3 arguments expected (eventName, playerID, handler),",i.length,"given:",i):(t=p(t),r(t),s(e,t,n),void a(t,function(){u(e,t)}))},off:function(e,t,n){t=p(t),n?c(e,t,n):d(e,t)},trigger:function(t,n){for(var i=e[t].events[n].handlers.slice(0),o=0,a=i.length;a>o;o++)i[o].apply(window,arguments)},initialize:function(){window.onPlayerV5Ready=n}};return h},!0)},96:function(){!function(e,t){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function i(){this.key=!1,this.sendConsoleErrors=!1,this.tag="jslogger"}function o(e,t){e.key=t,e.setSession(),s(e)}function a(t,n){if(t.sendConsoleErrors=n,t.sendConsoleErrors===!0){var i=e.onerror;e.onerror=function(n,o,a,r){t.push({category:"BrowserJsException",exception:{message:n,url:o,lineno:a,colno:r}}),i&&"function"==typeof i&&i.apply(e,arguments)}}}function r(e,t){e.tag=t}function s(e){e.inputUrl=l+(e.logglyCollectorDomain||c)+"/inputs/"+e.key+"/tag/"+e.tag+"/"+u}var l="http"+("https:"===t.location.protocol?"s":"")+"://",c="logs-01.loggly.com",u=".gif?",d="logglytrackingsession",p=d.length+1;i.prototype={setSession:function(e){e?(this.session_id=e,this.setCookie(this.session_id)):this.session_id||(this.session_id=this.readCookie(),this.session_id||(this.session_id=n(),this.setCookie(this.session_id)))},push:function(e){var t=typeof e;if(e&&("object"===t||"string"===t)){var n=this;if("string"===t)e={text:e};else{if(e.logglyCollectorDomain)return void(n.logglyCollectorDomain=e.logglyCollectorDomain);if(void 0!==e.sendConsoleErrors&&a(n,e.sendConsoleErrors),e.tag&&r(n,e.tag),e.logglyKey)return void o(n,e.logglyKey);if(e.session_id)return void n.setSession(e.session_id)}n.key&&n.track(e)}},track:function(t){t.sessionId=this.session_id;try{var n=new Image,i="PLAINTEXT="+encodeURIComponent(JSON.stringify(t));n.src=this.inputUrl+i}catch(o){e&&e.console&&"function"==typeof e.console.log&&(console.log("Failed to log to loggly because of this exception:\n"+o),console.log("Failed log data:",t))}},readCookie:function(){var e=t.cookie,n=e.indexOf(d);if(0>n)return!1;var i=e.indexOf(";",n+1);return i=0>i?e.length:i,e.slice(n+p,i)},setCookie:function(e){t.cookie=d+"="+e}};var h=e._LTracker,f=new i;if(h&&h.length){var g=0,m=h.length;for(g=0;m>g;g++)f.push(h[g])}e._LTracker=f,e.LogglyTracker=i}(window,document)},97:function(){!function(){"use strict";window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push(function(){if(!(googletag.hasOwnProperty("on")||googletag.hasOwnProperty("off")||googletag.hasOwnProperty("trigger")||googletag.hasOwnProperty("events"))){var e=googletag.debug_log.log,t=[],n=function(e,n,i){t.push({name:e,id:n,match:i
})};n("gpt-google_js_loaded",8,/Google service JS loaded/gi),n("gpt-gpt_fetch",46,/Fetching GPT implementation/gi),n("gpt-gpt_fetched",48,/GPT implementation fetched\./gi),n("gpt-page_load_complete",1,/Page load complete/gi),n("gpt-queue_start",31,/^Invoked queued function/gi),n("gpt-service_add_slot",40,/Associated ([\w]*) service with slot ([\/\w]*)/gi),n("gpt-service_add_targeting",88,/Setting targeting attribute ([\w]*) with value ([\w\W]*) for service ([\w]*)/gi),n("gpt-service_collapse_containers_enable",78,/Enabling collapsing of containers when there is no ad content/gi),n("gpt-service_create",35,/Created service: ([\w]*)/gi),n("gpt-service_single_request_mode_enable",63,/Using single request mode to fetch ads/gi),n("gpt-slot_create",2,/Created slot: ([\/\w]*)/gi),n("gpt-slot_add_targeting",17,/Setting targeting attribute ([\w]*) with value ([\w\W]*) for slot ([\/\w]*)/gi),n("gpt-slot_fill",50,/Calling fillslot/gi),n("gpt-slot_fetch",3,/Fetching ad for slot ([\/\w]*)/gi),n("gpt-slot_receiving",4,/Receiving ad for slot ([\/\w]*)/gi),n("gpt-slot_render_delay",53,/Delaying rendering of ad slot ([\/\w]*) pending loading of the GPT implementation/gi),n("gpt-slot_rendering",5,/^Rendering ad for slot ([\/\w]*)/gi),n("gpt-slot_rendered",6,/Completed rendering ad for slot ([\/\w]*)/gi),googletag.events=googletag.events||{},googletag.on=function(e,t,n){if(!t)return this;e=e.split(" ");var i=n?t:void 0,o=n||t,a=0,r="";for(o.data=i,r=e[a=0];a<e.length;r=e[++a])(this.events[r]=this.events[r]||[]).push(o);return this},googletag.off=function(e,t){e=e.split(" ");var n=0,i="",o=0,a=function(){};for(i=e[n];n<e.length;i=e[++n])if(this.events.hasOwnProperty(i))if(t){for(o=this.events[i].length-1,a=this.events[i][o];o>=0;a=this.events[i][--o])a==t&&this.events[i].splice(o,1);0===this.events[i].length&&delete this.events[i]}else delete this.events[i];return this},googletag.trigger=function(e,t){if(!this.events[e]||0===this.events[e].length)return this;var n=t||[],i=0,o=this.events[e][i];for(o;i<this.events[e].length&&o.apply(this,[{data:o.data}].concat(n))!==!1;o=this.events[e][++i]);return this},googletag.debug_log.log=function(n,i){if(i&&i.getMessageId&&"number"==typeof i.getMessageId()){var o=Array.prototype.slice.call(arguments),a=0;for(a;a<t.length;a++)t[a].id===i.getMessageId()&&googletag.trigger(t[a].name,o)}return e.apply(this,arguments)}}})}()},98:function(e,t,n){n(1),n(2),n(5),n(97),n(96),n(9),n(4),n(94),_DM.define("DM_DisplayAds",function(){var e={hasCompanionAd:!1,startTime:(new Date).getTime(),playerV5Id:"player",adunits:[{pos:"Top",id:"div-gpt-ad-1422660696836-2",name:"Top_728x90",dimensions:[[1,1],[728,90]]},{pos:"Bottom",id:"div-gpt-ad-1422660696836-0",name:"Bottom_728x90",dimensions:[728,90]},{pos:"X51",id:"div-gpt-ad-1422660696836-3",name:"X51_300x250",dimensions:[300,250]},{pos:"X52",id:"div-gpt-ad-1422660696836-4",name:"X52_300x250",dimensions:[300,250]},{pos:"InterstitialOPP",id:"div-gpt-ad-1426543907758-2-oop",name:"InterstitialOPP",dimensions:[1,1]},{pos:"Middle",id:"div-gpt-ad-1422660696836-1",name:"Middle_300x250",dimensions:[300,250]},{pos:"Right",id:"div-gpt-ad-1426543907758-4",name:"Right_160x600",dimensions:[160,600]},{pos:"Skin",id:"div-gpt-ad-1426543907758-5",name:"Skin",dimensions:[[1,1],[320,480],[482,320],[768,1024],[1024,768]]}],adpositions:window.adpositions?window.adpositions:null,gptInitialized:!1,initialize:function(){var t=t||{};if(t.cmd=t.cmd||[],function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),window.googletag=t,window.masscast={render:function(e,t){log("Masscast","publish",e,"code for assisted handling"),PubSub.publish("masscast:position_"+e,t)}},e.canCallAds()===!0){if(t&&(e.gptInitialized=!0),"undefined"!=typeof window.DM_Context&&window.DM_Context.dfp_measured===!0){e.setupTracker()}e.adpositions&&e.callAds(e.adpositions)}},canCallAds:function(){return"undefined"==typeof window.DM_Context.video_ads&&"undefined"==typeof window.DM_Context.videolist_has_ads||window.DM_Context.video_ads!==!1&&window.videolist_has_ads!==!1?!0:!1},callAds:function(t){e.gptInitialized===!0&&"undefined"!=typeof googletag&&googletag.cmd.push(function(){googletag.on("gpt-google_js_loaded",function(){e.trackPosition(null,"adcall_start")})});var n=[];t.indexOf("Middle")>-1&&(n=t.splice(t.indexOf("Middle"),1));for(var i=0;i<t.length;i++)for(var o=0;o<e.adunits.length;o++)t[i]==e.adunits[o].pos&&e.createAdSlot(e.adunits[o].id,e.adunits[o].name,e.adunits[o].dimensions);if(e.enableAsyncLoad(),e.enableServices(0),"player_page"===window.DM_Context.page_type){var a=null;DM_PlayerV5Events.on("ad_start",e.playerV5Id,function(){a=setTimeout(function(){!e.companionAdPresent()&&n.indexOf("Middle")>-1&&(e.createAdSlot("div-gpt-ad-1422660696836-1","Middle_300x250",[300,250]),e.enableServices(1),$("#div-gpt-ad-1422660696836-1").css("margin-bottom",10),"undefined"!=typeof DM_Context&&DM_Context.dfp_measured===!0&&"undefined"!=typeof DM_Context.dfp_measured&&e.trackAdRender("Middle"))},1e3)}),DM_PlayerV5Events.on("playing",e.playerV5Id,function(){null!==a&&clearTimeout(a),("us"!==window.DM_Context.geoip_country||!e.companionAdPresent())&&n.indexOf("Middle")>-1&&(e.createAdSlot("div-gpt-ad-1422660696836-1","Middle_300x250",[300,250]),e.enableServices(1),$("#div-gpt-ad-1422660696836-1").css("margin-bottom",10),"undefined"!=typeof DM_Context&&DM_Context.dfp_measured===!0&&"undefined"!=typeof DM_Context.dfp_measured&&e.trackAdRender("Middle"))})}else n.indexOf("Middle")>-1&&(e.createAdSlot("div-gpt-ad-1422660696836-1","Middle_300x250",[300,250]),e.enableServices(1));e.trackPosition(null,"pageload_complete"),e.trackAdRender("Top",728,90),e.trackAdRender("Bottom",728,90),e.trackAdRender("X51",300,250),e.trackAdRender("X52",300,250)},createAdSlot:function(t,n,i){var o;googletag.cmd.push(function(){-1!==n.indexOf("OPP")?o=googletag.defineOutOfPageSlot("/23328537/"+n,t).addService(googletag.pubads()):(o=googletag.defineSlot("/23328537/"+n,i,t).addService(googletag.pubads()),$("#"+t).height(i[1])),googletag.pubads().addEventListener("slotRenderEnded",function(t){t.slot==o&&e.trackPosition(n.split("_")[0].toLowerCase(),"adcall_response")})})},enableAsyncLoad:function(){e.gptInitialized===!0&&"undefined"!=typeof googletag&&googletag.cmd.push(function(){googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs()})},enableServices:function(t){e.gptInitialized===!0&&"undefined"!=typeof googletag&&googletag.cmd.push(function(){googletag.enableServices(),googletag.display("div-gpt-ad-1422660696836-"+t)})},getElementHeight:function(e){return parseInt(parent.$(e).css("height"),10)},customizeElement:function(e){var t=document.getElementById(e);window.disableAutoHeight&&(t.style.height="auto")},loadDmJs:function(e){var t=frame.document.createElement("script");t.type="text/javascript",t.src=frame.parent.DM_JS.getRealPath(e),t.async=!0,frame.document.body.appendChild(t)},render:function(t,n){frame[t+"Parameters"]=n,e.loadDmJs("/js/lib/dm/ads/"+t+".js"),e.loadDmJs("/js/lib/dm/skin.js")},setupTracker:function(){_LTracker.push({logglyKey:"d6464acb-25b8-4dd2-bf83-64fed1a15e10",sendConsoleErrors:!0,tag:"jslogger"})},trackPosition:function(t,n){var i=(new Date).getTime();"undefined"!=typeof DM_Context&&DM_Context.dfp_measured===!0&&_LTracker&&"undefined"!=typeof DM_Context.dfp_measured&&_LTracker.push({dmxtrk:{display_server:"dfp",ad_position:t,moment:n,refresh:0,country:window.DM_Context.geoip_country,latency:e.getLatency(i)}})},getLatency:function(t){return t>=e.startTime?t-e.startTime:0},trackAdRender:function(t,n,i){e.gptInitialized===!0&&"undefined"!=typeof googletag&&googletag.cmd.push(function(){googletag.on("gpt-page_load_complete",function(){var o='"google_ads_iframe_/23328537/'+t+"_"+n+"x"+i+'"',a=document.querySelector("iframe[id^="+o+"]");if(a){var r=a.contentDocument||a.contentWindow.document;"complete"==r.readyState&&(e.trackPosition(t.toLowerCase(),"adcall_render"),console.log(a.id," IFRAME fully loaded and parsed"))}})})},companionAdPresent:function(){return $('div[id^="mc_"]').length>0&&$("#mc_Middle").children().length>0}};return e},!0)},101:function(e,t,n){n(1),_DM.define("DM_Flash",function(){var e="dm_flash_",t=0,n={build:function(n,i,o,a,r,s,l){attributes=l.attributes||{},flashvars=l.flashvars||{},parameters=l.parameters||{};var c;"string"==typeof o?c=document.getElementById(o):(c=o,o=o.id||e+t++),attributes.width=a,attributes.height=r,attributes.type="application/x-shockwave-flash",attributes.data=n,s&&(parameters.bgcolor=s),attributes.id=i||attributes.id||o+"_obj";var u="";for(var d in parameters)parameters.hasOwnProperty(d)&&(u+='<param name="'+d+'" value="'+parameters[d]+'" />');var p=[];for(var h in flashvars)flashvars.hasOwnProperty(h)&&p.push(h+"="+flashvars[h]);p.length&&(u+='<param name="flashvars" value="'+p.join("&")+'" />');var f="";for(var g in attributes)attributes.hasOwnProperty(g)&&(f+=" "+g+'="'+attributes[g]+'"');c.innerHTML="<object "+f+">"+u+"</object>"}};return window.DM_Flash&&DM_Flash.VERSION&&(n.VERSION=DM_Flash.VERSION),n},!0)},102:function(e,t,n){n(1),n(2),n(55),n(101),n(14),_DM.define("DM_Masscast_x28",function(){var e={params:null,domReadyDate:null,onCodeReceived:function(e){var t=((new Date).getTime()-(this.domReadyDate||new Date).getTime())/1e3;return t>2?log("Masscast","Dismiss x28 because it was received more than 2 seconds after DOM ready (",t," secs)."):(log("Masscast","Recieved x28 code before DOM ready + 2 secs (",t," secs). Build intersticial."),this.setParams(e),void this.build())},setParams:function(e){this.params=$.isString(e)?new Function("return "+e)():e},build:function(){this.params&&!this.built&&(this.built=!0,window.DM_swftrans_open=this.DM_swftrans_open,window.DM_swftrans_close=this.DM_swftrans_close,window.DM_Intersticiel_close=this.DM_Intersticiel_close,this.hideSiteWrapper(),this.addHtml(),this.afterHtml(),this.setDimmerStyle(),this.setClickCommand(),this.addPixelTrackers(),this.closeTimeout=window.setTimeout(DM_Intersticiel_close,1e3*this.params.closeDelay||3e4),PubSub.publish("masscast:intersticial_opened"))},addHtml:function(){$(document.body).prepend(this.getX28Html())},getX28Html:function(){var e="",t="",n="";this.params.logoImg&&(e="background-image: url("+this.params.logoImg+")"),this.params.withTopBanner?t='<div class="x28_top_banner" style="background-color: '+this.params.withTopBanner.backgroundColor+';"><div class="x28_top_banner_inner"><div style="'+e+'" id="x28_dimmer_logo" class="no_clkthg"></div><a id="x28_go_to_dm" title="'+(window.DM_Closex28Label||window.DM_CloseLabel||"Close")+'" href="javascript:void(0);" onclick="DM_Intersticiel_close();" class="btn no_clkthg">'+(window.DM_Closex28Label||window.DM_CloseLabel||"Close")+"</a></div></div>":n='<a id="x28_go_to_dm" title="'+(window.DM_Closex28Label||window.DM_CloseLabel||"Close")+'" href="javascript:void(0);" onclick="DM_Intersticiel_close();" class="btn no_clkthg">'+(window.DM_Closex28Label||window.DM_CloseLabel||"Close")+'</a><div id="x28_dimmer_logo" class="no_clkthg" style="'+e+'"></div>';var i='<div id="x28_dimmer"'+(t?' class="with_banner"':"")+">"+t+'<div id="x28_dimmer_inner">'+n+'<div id="intersticiel_object">';if("video"==this.params.type){var o="&autoMute=1&unmuteOnMouseOver=1";0===this.params.automute&&(o=""),i+='<div id="DM_swftr" style="top: '+(this.params.playerTopOffset||0)+"px;left: "+(this.params.playerLeftOffset||0)+'px;"><iframe frameborder="0" width="'+(this.params.playerWidth||620)+'" height="'+(this.params.playerHeight||272)+'" src="http://www.dailymotion.com/embed/video/'+this.params.videoId+"?theme=none&advertising=0&chromeless=1&autoPlay=1&reporting="+(this.params.reporting||0)+o+"&related=0&clickThroughURL="+encodeURIComponent(this.params.clickCommand)+'&clickThroughURLTarget=_blank"></iframe></div>'}else"flash"==this.params.type?i+=window.DM_Flash&&window.DM_Flash.VERSION&&0!==DM_Flash.VERSION.major?'<div id="DM_swftr" style="top: '+this.params.flashTopOffset+'px;"></div>':'<a id="x28_fallback" href="'+this.params.fallbackUrl+'" target="_blank"><img src="'+this.params.fallbackUrl+'" border="0" alt=""></a>':"gif"==this.params.type;return i+="</div></div></div>"},setClickCommand:function(){$("#x28_dimmer").on("click",function(t){$(t.target).hasClass("no_clkthg")||window.open(e.params.clickCommand)})},setDimmerStyle:function(){var e={};this.params.backgroundUrl&&(e["background-image"]="url("+this.params.backgroundUrl+")"),this.params.backgroundColor&&(e["background-color"]=this.params.backgroundColor),this.params.backgroundPosition&&(e["background-position"]=this.params.backgroundPosition),$("#x28_dimmer").css(e)},hideSiteWrapper:function(){$("#topwrapper").hide(),$(".sd_footer").hide()},afterHtml:function(){"flash"==this.params.type&&window.DM_Flash&&window.DM_Flash.VERSION&&0!==DM_Flash.VERSION.major&&DM_Flash.build(this.params.flashUrl,"flashtrans","DM_swftr",this.params.flashWidth,this.params.flashHeight,"#000",{parameters:{quality:"high",wmode:"transparent",allowScriptAccess:"always"},flashvars:{clickTag:this.params.clickCommand}})},addPixelTrackers:function(){if(this.params.pixelsTracking&&this.params.pixelsTracking.length)for(var e=0,t=this.params.pixelsTracking.length;t>e;e++)ping(this.params.pixelsTracking[e],"x28")},DM_Intersticiel_close:function(){var t=$("#x28_dimmer");$("body").off("click"),t&&(t.off("click").remove(),$("#topwrapper").show(),$(".sd_footer").show()),clearTimeout(e.closeTimeout),PubSub.publish("masscast:intersticial_closed")},DM_swftrans_close:function(){$("#DM_swftr").hide(),$("#DM_backup").show()},DM_swftrans_open:function(){},setDomReadyDate:function(){this.domReadyDate=new Date},__initialize:function(){PubSub.subscribe("masscast:position_x28",this.onCodeReceived,this),PubSub.subscribe("dom:ready",this.setDomReadyDate,this)}};return e},!0)},103:function(e,t,n){n(1),n(2),n(55),n(14),_DM.define("DM_Masscast_x29",function(){var e={params:null,domReadyDate:null,onCodeReceived:function(e){var t=((new Date).getTime()-(this.domReadyDate||new Date).getTime())/1e3;return t>2?log("Masscast","Dismiss x29 because it was received more than 2 seconds after DOM ready (",t," secs)."):(log("Masscast","Recieved x29 code before DOM ready + 2 secs (",t," secs). Build intersticial."),this.setParams(e),void this.build())},setParams:function(e){this.params=$.isString(e)?new Function("return "+e)():e},build:function(){this.params&&!this.built&&(this.built=!0,window.DM_swftrans_open=this.DM_swftrans_open,window.DM_swftrans_close=this.DM_swftrans_close,window.DM_Intersticiel_close=this.DM_Intersticiel_close,this.hideSiteWrapper(),this.addHtml(),this.afterHtml(),this.setDimmerStyle(),this.setClickCommand(),this.addPixelTrackers(),this.closeTimeout=window.setTimeout(DM_Intersticiel_close,1e3*this.params.closeDelay||3e4),PubSub.publish("masscast:intersticial_opened"))},addHtml:function(){$(document.body).prepend(this.getX29Html())},getX29Html:function(){var e="",t="",n="";this.params.logoImg&&(e="background-image: url("+this.params.logoImg+")"),this.params.withTopBanner?t='<div class="x29_top_banner" style="background-color: '+this.params.withTopBanner.backgroundColor+';"><div class="x29_top_banner_inner"><div style="'+e+'" id="x29_dimmer_logo" class="no_clkthg"></div><a id="x29_go_to_dm" title="'+(window.DM_Closex29Label||window.DM_CloseLabel||"Close")+'" href="javascript:void(0);" onclick="DM_Intersticiel_close();" class="btn no_clkthg">'+(window.DM_Closex29Label||window.DM_CloseLabel||"Close")+"</a></div></div>":n='<a id="x29_go_to_dm" title="'+(window.DM_Closex29Label||window.DM_CloseLabel||"Close")+'" href="javascript:void(0);" onclick="DM_Intersticiel_close();" class="btn no_clkthg">'+(window.DM_Closex29Label||window.DM_CloseLabel||"Close")+'</a><div id="x29_dimmer_logo" class="no_clkthg" style="'+e+'"></div>';var i='<div id="x29_dimmer"'+(t?' class="with_banner"':"")+">"+t+'<div id="x29_dimmer_inner">'+n+'<div id="intersticiel_object">';if("video"==this.params.type){var o="&autoMute=1&unmuteOnMouseOver=1";0===this.params.automute&&(o=""),i+='<div id="DM_swftr" style="top: '+(this.params.playerTopOffset||0)+"px;left: "+(this.params.playerLeftOffset||0)+'px;"><iframe frameborder="0" width="'+(this.params.playerWidth||620)+'" height="'+(this.params.playerHeight||272)+'" src="http://www.dailymotion.com/embed/video/'+this.params.videoId+"?theme=none&advertising=0&chromeless=1&autoPlay=1&reporting="+(this.params.reporting||0)+o+"&related=0&clickThroughURL="+encodeURIComponent(this.params.clickCommand)+'&clickThroughURLTarget=_blank"></iframe></div>'}else"flash"==this.params.type?i+=window.deconcept&&0!==deconcept.SWFObjectUtil.getPlayerVersion().major?'<div id="DM_swftr" style="top: '+this.params.flashTopOffset+'px;"></div>':'<a id="x29_fallback" href="'+this.params.fallbackUrl+'" target="_blank"><img src="'+this.params.fallbackUrl+'" border="0" alt=""></a>':"gif"==this.params.type;return i+="</div></div></div>"},setClickCommand:function(){$("#x29_dimmer").on("click",function(t){$(t.target).hasClass("no_clkthg")||window.open(e.params.clickCommand)})},setDimmerStyle:function(){var e={};this.params.backgroundUrl&&(e["background-image"]="url("+this.params.backgroundUrl+")"),this.params.backgroundColor&&(e["background-color"]=this.params.backgroundColor),this.params.backgroundPosition&&(e["background-position"]=this.params.backgroundPosition),$("#x29_dimmer").css(e)},hideSiteWrapper:function(){$("#topwrapper").hide(),$(".sd_footer").hide()},afterHtml:function(){"flash"==this.params.type&&window.deconcept&&0!==deconcept.SWFObjectUtil.getPlayerVersion().major&&(myswf=new SWFObject(this.params.flashUrl,"flashtrans",this.params.flashWidth,this.params.flashHeight,8,"#000"),myswf.skipDetect=!0,myswf.addParam("quality","high"),myswf.addParam("wmode","transparent"),myswf.addParam("allowscriptaccess","always"),myswf.addVariable("clicktag",this.params.clickCommand),myswf.write("DM_swftr"))},addPixelTrackers:function(){if(this.params.pixelsTracking&&this.params.pixelsTracking.length)for(var e=0,t=this.params.pixelsTracking.length;t>e;e++)ping(this.params.pixelsTracking[e],"x29")},DM_Intersticiel_close:function(){var t=$("#x29_dimmer");$("body").off("click"),t&&(t.off("click").remove(),$("#topwrapper").show(),$(".sd_footer").show()),clearTimeout(e.closeTimeout),PubSub.publish("masscast:intersticial_closed")},DM_swftrans_close:function(){$("#DM_swftr").hide(),$("#DM_backup").show()},DM_swftrans_open:function(){},setDomReadyDate:function(){this.domReadyDate=new Date},__initialize:function(){PubSub.subscribe("masscast:position_x29",this.onCodeReceived,this),PubSub.subscribe("dom:ready",this.setDomReadyDate,this)}};return e},!0)},104:function(e,t,n){n(1),n(2),_DM.define("DM_Prefetch",function(){var e={initialize:function(){window.PREFETCH_CONF&&$(function(){setTimeout(e.prefetch,2e3)})},prefetch:function(){var e,t,n,i=document.createElement("iframe"),o=/(\.js\.v[a-f0-9]+)|(\.[a-f0-9]+\.js)$/,a=/\.css\.v[a-f0-9]+$/,r="";for(i.style.display="none",document.body.appendChild(i),e=0,t=PREFETCH_CONF.resources.length;t>e;e++)n=PREFETCH_CONF.resources[e],n.match(a)?r+='<link rel="stylesheet" href="'+n+'" />':n.match(o)&&(r+="<script type=\"text/javascript\">(function(d, s){var js, head = d.getElementsByTagName('head')[0];js = d.createElement(s);js.src ='"+n+"';head.appendChild(js);}(document, 'script'));</script>");var s=i.contentDocument||i.contentWindow.document;s.open().write('<!DOCTYPE html><html><head><script type="text/javascript">__prefetching=true;window.onerror = function(){return true;};</script>'+r+"</head><body></body></html>"),s.close()}};return e},!0)},105:function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(2),__webpack_require__(6),__webpack_require__(11),_DM.define("DM_Skin",function(){var _self={defaultParams:window.DM_Skin_defaultParams||{},debug:!1,skinData:[],name:"",loadingOasSkin:!1,clicker:null,translateV1ParamstoV2:function(e){var t={skinName:"name",trackingTag:"tracking_tag",bodyClickUrl:"redirect_url",topBannerLink:"redirect_url",bodyClickUrlThroughTag:"click_count_urls",topBannerLinkThroughTag:"click_count_urls",countingPixel:"display_count_urls",countingPixelAlt:"display_count_urls"},n={};for(var i in t)if(""!==e[i]&&"undefined"!=typeof t[i]){var o=t[i];"bodyClickUrl"==i&&(n.body_redirect_enabled=!0),o.match(/urls/)?(n[o]||(n[o]=[]),n[o].push(e[i])):n[o]=e[i]}return _self.log(n),n},log:function(e){_self.debug&&(dbg(e),$("#skin_debug").append("<div>"+e+"<div>"))},render_skin:function(skinData){skinData=skinData.replace(/;/,""),_self.log("render_skin from OAS"),_self.log(skinData);try{_self.skinData=eval("("+skinData+")"),"object"==typeof _self.skinData&&(_self.skinData=_self.translateV1ParamstoV2(_self.skinData),_self.skinData.from_oas=!0,_self.loadingOasSkin=!0,ajax_call("masscast","get_skin",_self.skinData.name,this.callbackSelectSkin))}catch(e){_self.log(e.message),_self.log("error while loading skin"),_self.log("skinData:"),_self.log(skinData)}},getParameter:function(e){var t=null;return"undefined"!=typeof _self.defaultParams[e]&&""!==_self.defaultParams[e]&&(t=_self.defaultParams[e]),"undefined"!=typeof _self.skinData&&"undefined"!=typeof _self.skinData[e]&&""!==_self.skinData[e]&&(t=_self.skinData[e]),t},applySkin:function(){if(_self.defaultParams=$.isEmptyObject(_self.defaultParams)?window.DM_Skin_defaultParams||{}:"undefined"!=typeof window.DM_Skin_defaultParams?$.extend(_self.defaultParams,window.DM_Skin_defaultParams):_self.defaultParams,_self.defaultParams&&_self.defaultParams.css_path){if(_self.lastSkinApplied==_self.defaultParams.css_path)return;_self.lastSkinApplied=_self.defaultParams.css_path}Object.keys(_self.defaultParams).length&&($("body").addClass("has_skin"),PubSub.publish("skin:applied",_self.defaultParams.name)),!_self.getParameter("from_oas")&&_self.getParameter("disable_chrome")?_self.removeSkin():!_self.loadingOasSkin&&_self.getParameter("name")&&_self.setSkinCss(),_self.loadingOasSkin||(_self.setBanner("top"),_self.setBanner("bottom"),_self.setBodyLink(),_self.callUrls(_self.getParameter("display_count_urls")),_self.setTrackingTag())},callbackSelectSkin:function(e){_self.loadingOasSkin=!1,$.blank(e)||(_self.defaultParams=$.parseJSON(e),$(_self.applySkin))},removeSkin:function(){$("#css_skin").remove(),$("#top_banner, #bottom_banner").empty()},setSkinCss:function(){_self.log("set skin css "+_self.defaultParams.css_path),$("#css_skin").size()?$("#css_skin").attr("href",_self.defaultParams.css_path):$('<link rel="stylesheet" id="css_skin">').on("load",function(){_self.fixBackgroundCenter()}).attr("href",_self.defaultParams.css_path).appendTo($("head"))},fixBackgroundCenter:function(){function e(){return l&&s&&r}function t(){return c?void n():$("<img>").on("load",function(){c=$(this).width(),n()}).css("display","none").attr("src",o).appendTo("body")}function n(){if(e()){var t=i.css("background-position").split(" "),n=i.width(),o=i.offset();i.css("background-position",[Math.floor((n-c)/2)+o.left+"px",t[1]].join(" "))}}if(!_self.hasIntersticial){var i=$("#topwrapper");if(0!==i.length){var o=i.css("background-image").replace(/[^\(]*\(([^\)]*)\)/,"$1").replace(/'|"/g,""),a=i.css("background-position"),r=a&&!!a.match(/^(center|50%)/),s="fixed"==i.css("background-attachment"),l=!0,c=null;e()&&t()}}},countClickAndRedirect:function(e){/object|embed/i.test(e.target.nodeName)&&$(event.target).closest("#mc_Top").length||(_self.callUrls(_self.getParameter("click_count_urls")),_self.getParameter("redirect_url")&&("_self"==_self.getParameter("redirect_target")?location.href=_self.getParameter("redirect_url"):window.open(_self.getParameter("redirect_url"))))},setBodyLink:function(){if(this.getParameter("redirect_url")&&this.getParameter("body_redirect_enabled")){if(!$("#body_clicker").length){_self.log("set body click ok");var e=$('<div id="body_clicker"></div>');e.css({position:"absolute",width:"100%",height:"100%",top:0,left:0,zIndex:0,cursor:"pointer"}),$.browser.msie&&e.css("top",$(".sd_header").height()+"px"),$("#wrapper").prepend(e),e.on("click",_self.countClickAndRedirect)}}else _self.log("remove body click ok"),$("#body_clicker").remove()},setBanner:function(e){var t=e+"_banner_image",n=$("#"+e+"_banner"),i=this.getParameter(t),o="";if("top"===e&&(o="allowfullscreen"),i&&""!==i&&n){var a=i.match(/\.swf/)?"swf":i.match(/^http:\/\//)?"iframe":"image";switch(_self.log("update "+e+" with "+a+" "+i),a){case"swf":var r=(new Date).getTime();i=this.getParameter("skin_root")+"/"+i+this.getParameter("version"),n.html('<div class="flash_clicker"></div><object width="100%" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="allowScriptAccess" value="always"/><param name="allowFullscreen" value="true"/><param name="movie" value="'+i+'"/><param name="quality" value="high"/><param name="wmode" value="Transparent"/><embed width="100%" pluginspage="http://www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash" allowScriptAccess="always" allowFullscreen="true" wmode="Transparent" quality="high" swliveconnect="true" src="'+i+"?"+r+'" id="pub_Flash2372720" name="pub_Flash2372720"/></object>');break;case"iframe":n.html('<iframe style="overflow:hidden; margin:0; padding:0; width: 100%;" scrolling="no" width="100%" align="center" frameborder="0" marginwidth="0" marginheight="0" src="'+i+'" '+o+" ></iframe>")}}n&&this.getParameter("redirect_url")&&(n.css({cursor:"pointer"}),n.off("click",_self.countClickAndRedirect),n.on("click",_self.countClickAndRedirect))},ping:function(e){ping(e.replace("_random_",Math.round(1e7*Math.random())),"skin"),_self.log("ping url: "+e)},callUrls:function(e){e&&(_self.log("list of urls to ping : "+e.join(", ")),$(e).each(function(e,t){_self.ping(t)}))},setDisplayCountUrls:function(){var e=_self.getParameter("display_count_urls");e&&$(e).each(function(e,t){_self.log("append display_count_url"+t),$("body").append('<img style="display: none" class="cpt_pixel" src="'+t+'">')})},callAdTagUrls:function(e){e&&$(e).each(function(e,t){try{var n=t+"?time="+(new Date).getTime(),i=new Image;i.src=n}catch(o){dbg("Error while loading ad tag => "+t)}})},setTrackingTag:function(){if(_self.getParameter("tracking_tag"))try{_self.documentWriteBackup=document.write,$('<div id="skin_tracking_tag">').appendTo("body"),_self.documentWrite=function(e){$("#skin_tracking_tag").append(e)},script=_self.getParameter("tracking_tag").replace(/document.write/g,"DM_Skin.documentWrite"),$("#skin_tracking_tag").html(script.stripScripts()),script.extractScripts().map(function(e){return $.globalEval(e)}),_self.log("set tracking tag ok")}catch(e){}},onAdSkinLoading:function(){_self.loadingOasSkin=!0,PubSub.publish("skin:loading")},onAdSkinLoaded:function(e,t){_self.loadingOasSkin=!1,_self.defaultParams=e,_self.skinData=t,_self.applySkin()},onIntersticialOpen:function(){_self.hasIntersticial=!0},onIntersticialClose:function(){_self.hasIntersticial=!1,_self.fixBackgroundCenter()},__initialize:function(){PubSub.subscribe("masscast:loading_top3",_self.onAdSkinLoading).subscribe("masscast:loaded_top3",_self.onAdSkinLoaded).subscribe("masscast:intersticial_opened",_self.onIntersticialOpen).subscribe("masscast:intersticial_closed",_self.onIntersticialClose)}};return _self},!0)},106:function(e,t,n){n(1),n(2),n(8),_DM.define("Mo_Alert",function(){var e={initEvents:function(){$(".mo_alert").each(function(){var e=$(this),t=e.data("close"),n=store.get("alert_close")||{};t&&!n[t]&&e.removeClass("hidden")}),$(document).on("click",".mo_alert .js-alert-close",Mo_Alert.onClose)},onClose:function(){var e=$(this),t=e.closest(".mo_alert");if(t.slideUp(),t.data("close")){var n=store.get("alert_close")||{};n[t.data("close")]=!0,t.data("use-cookie")&&setCookie(t.data("close"),!0),store.set("alert_close",n)}},__initialize:function(){e.initEvents()}};return e},!0)},107:function(e,t,n){n(1),n(2),n(5),n(55),n(312),_DM.define("Mo_SmartSelect",function(){var e={isDev:"dev"==DM_Context.env?!0:!1,searchTerm:null,formatInputResult:function(e){return"search"===e.id?'<div class="entry">'+e.searchFor+" "+$.htmlentityEncode(Mo_SmartSelect.searchTerm)+"</div>":'<div class="entry" title="'+e.title+'"><img class="preview" src="'+e.thumbnail_60_url+'"/><span>'+$.truncate(e.title,32)+"</span><small>"+e.views_total+" views</small></div>"},formatSelectResult:function(e){return"search"===e.id?'<div class="entry">'+e.searchFor+" "+$.htmlentityEncode(Mo_SmartSelect.searchTerm)+"</div>":'<div class="entry" title="'+e.title+'"><img class="preview" src="'+e.thumbnail_60_url+'"/><span>'+$.truncate(e.title,32)+"</span></div>"},formatResultUser:function(e){return'<div class="entry"><img class="preview" src="'+e.avatar_60_url+'"/><span>'+$.truncate(e.screenname,24)+"</span></div>"},formatResultGame:function(e){return'<div class="entry"><span>'+$.truncate(e.title,38)+"</span></div>"},formatNoMatches:function(){var e=$(this).first().data("no-matches")||"";return'<div class="no_match_result">'+e+"</div>"},formatInputTooShort:function(){$(this).first().data("select2").dropdown.hide();var e=$(this).first().data("input-short")||"";return'<div class="too_short_result">'+e+"</div>"},initElementBySelector:function(t){e.initElement($(t))},initElement:function(t){var n,i,o,a,r,s,l=JSON.parse($.htmlentityDecode(t.data("params"))),c=JSON.parse($.htmlentityDecode(t.data("options"))),u=t.data("type"),d="dev"==DM_Context.env?"http://api."+document.location.hostname.replace("www.",""):"https://api.dailymotion.com";"video"==u?(n=d+"/videos?thumbnail_ratio=widescreen&"+$.param(l),i="video_selector_dropdown",o="id,title,views_total,thumbnail_60_url",a=e.formatInputResult,r=e.formatSelectResult,s=1):"user"==u?(n=d+l.request,i="bigdrop",o="id,username,screenname,avatar_60_url",a=e.formatResultUser,r=e.formatResultUser,s=1):"game"==u&&(n=d+"/games",i="game_selector_dropdown",o="id,title",a=e.formatResultGame,r=e.formatResultGame,s=1);var p={dropdownCssClass:i,minimumResultsForSearch:s,ajax:{url:n,dataType:"jsonp",data:function(t,n){$(this).first().data("select2").dropdown.show();$(this).first().attr("id");return e.searchTerm=null,l={page:n,limit:50,fields:o},"game"===u&&!e.isDev&&t&&(l.filters="suggest"),t&&(e.searchTerm=t,l.search=t,"game"!==u&&(l.sort="relevance")),getCookie("sid")&&(l.realm="dailymotion",l.access_token=getCookie("sid")),l},results:function(e){$(".mo_smartselect").trigger("dm:smartselect:on_data_received"),"string"==typeof e&&(e=$.parseJSON(e));var n=(e.has_more,e.list);return t.data("default-search")&&n&&n.length&&(n=[{id:"search",searchFor:t.data("search-for")}].concat(n)),{results:n,more:e.has_more}}},multiple:t.attr("multiple")||t.data("multiple")?!0:!1,formatResult:a,formatSelection:r,containerCssClass:t.attr("multiple")||t.data("multiple")?"icon-search":"",escapeMarkup:function(e){return e}};"game"==u&&(p.initSelection=function(e,t){var n=$(e).val();""!==n&&$.ajax({url:d+"/game/"+n,data:{fields:"id,title"},dataType:"jsonp"}).done(function(e){t(e)})}),t.data("no-matches")&&(p.formatNoMatches=e.formatNoMatches),t.data("input-short")&&(p.formatInputTooShort=e.formatInputTooShort);for(var h in c)p[h]=c[h];t.select2(p),PubSub.publish("dm:smartselect:created",t)},initEvents:function(){$(".mo_smartselect").each(function(){e.initElement($(this))})},__initialize:function(){$(function(){e.initEvents()})}};return e},!0)},108:function(e,t,n){n(1),n(2),n(312),n(107),_DM.define("Sd_Nav",function(){var e={onSmartselectCreated:function(t){t.on("select2-loaded",e.onSmartselectOpening).on("dm:smartselect:on_data_received",e.resizeIframe).on("select2-close",e.onSmartselectClose),t.on("change",function(){var e=$(this).select2("data")[0],n=t.data("user"),i=Mo_SmartSelect.searchTerm?Mo_SmartSelect.searchTerm:e.title,o=$(this).val();return $(this).val(""),
"search"==o?void(window.location="/relevance/user/"+n+"/search/"+i):(dm_browsingcontext&&dm_browsingcontext.put(window.location.protocol+window.location.host+"/video/"+o,"/relevance/user/"+n+"/search/"+encodeURIComponent(DM_Request.cleanSearch(i))),void(document.location.href="/video/"+o+"#user_search=1"))})},onSmartselectClose:function(){$("#user_search_iframe").hide()},onSmartselectOpening:function(){var t=$("#select2-drop");0===$("#user_search_iframe").length&&t.after('<iframe id="user_search_iframe">'),e.resizeIframe()},resizeIframe:function(){setTimeout(function(){var e=$("#select2-drop").outerHeight(!0),t=$("#select2-drop");$("#user_search_iframe").css({display:"block",width:t.width()+"px",height:e+"px",top:t.css("top"),left:t.css("left"),position:"absolute"})},10)},__initialize:function(){PubSub.subscribe("dm:smartselect:created",e.onSmartselectCreated)}};return e},!0)},109:function(e,t,n){n(1),n(2),_DM.define("Sd_Pixelle",function(){var e={start:null,waitPixelle:function(){+new Date-e.start>5e3||("function"==typeof pxl?e.listen():setTimeout(e.waitPixelle,100))},listen:function(){pxl("bind","insert",e.insert)},insert:function(e,t){PubSub.publish("dm:new_videos_loaded",$(t)),PubSub.publish("pixelle:ad_loaded")},__initialize:function(){e.start=+new Date,e.waitPixelle()}};return e},!1)},111:function(e,t,n){n(1),n(2),n(8),n(7),_DM.define("Pl_Videos_ListSwitcher",function(){var e={__onDomReady:function(){e.initEvents()},onSwitcherClicked:function(){var t=$(".js-list-grid").is(":visible")?"list":"grid",n=this;$("#ph_list").length>0?DM_WidgetV3.get("/controller/Page_Videos?method=getListHtml","#ph_list","",{listMode:t,isWithPlayer:0!==$(".pl_videos_listwithplayer").length},function(){e.afterSwitcherClick.call(n),PubSub.publish("dm:new_videos_loaded",$(".js-list-"+t))}):e.afterSwitcherClick.call(n)},afterSwitcherClick:function(){$(".js-list-grid, .js-list-list").toggle(),$(".js-switcher").toggleClass("clickable"),setCookie("duallist_video",$(this).data("list-mode"),365,"/"),DM_LazyLoad.findInContextAndlLoad()},initEvents:function(){$(".pl_videos_listswitcher").on("click",".js-switcher.clickable",e.onSwitcherClicked)}};return e})},116:function(e,t,n){n(1),n(2),n(3),_DM.define("DM_Alert",function(){var e={resendConfirmationRegistration:function(t){var n=t.data("login");ajax_call("alert","resendConfirmationRegistration",n,function(){t.parent().fadeOut(function(){t.parent().replaceWith("<p>"+e.resend_email_confirmation+"</p>").fadeIn()})})},onResendAlertClicked:function(){var t=$(this),n=t.data("type");"registration-confirmation"==n&&e.resendConfirmationRegistration(t)},initialize:function(){$(document).on("click",".js-resend-mail",e.onResendAlertClicked)}};return e},!0)},120:function(e,t,n){n(1),n(2),_DM.define("DM_Ezakus",function(){var e={__initialize:function(){"fr"==DM_Context.geoip_country&&PubSub.subscribe("stats:event",e.onEvent)},allowedEvents:["expand_player","share","follow","comment_video","report_video","add_to_watchlater","playlist"],onEvent:function(t){var n=t.event_action,i=t.event_context;if($.inArray(n,e.allowedEvents)>-1&&"undefined"!=typeof ezMarker)switch(n){case"share":var o=["twitter","blogger","wordpress","tumblr","reddit","pinterest","facebook","publishit"];$.inArray(i,o)>-1&&ezMarker.event(n+"_"+i),ezMarker.event(n);break;case"follow":switch(i){case null:case"from_channel_tooltip":case"with_push_tooltip":case"unlogged":ezMarker.event(n)}break;case"expand_player":ezMarker.event("player_expand");break;case"report_video":case"comment_video":ezMarker.event(n.split("_")[0]);break;case"playlist":"add_video"===i&&ezMarker.event("add_to_playlist");break;default:ezMarker.event(n)}}};return e},!0)},121:function(e,t,n){n(1),_DM.define("DM_Krux",function(){var e={allowedEvents:{expand_player:"I-fDdTS1",share:"JCq10IJg",follow:"JCrBcaU_",comment_video:"JCrBmxti",report_video:"JCrB1GJw",add_to_watchlater:"JCrCESJe",playlist:"JCrB935k"},__initialize:function(){"fr"!=DM_Context.geoip_country&&PubSub.subscribe("stats:event",e.onEvent)},onEvent:function(t){var n=t.event_action,i=t.event_context;if(e.allowedEvents[n]&&"undefined"!=typeof Krux)switch(n){case"share":var o={twitter:"JCq17ViP",blogger:"JCq2BEOW",wordpress:"JCq2IJwY",tumblr:"JCq2OHU6",reddit:"JCq2UL-i",pinterest:"JCrBId4p",facebook:"JCrBP5pP",use_embed_code:"JCrBWSM_"};o[i]&&Krux("admEvent",o[i],{}),Krux("admEvent",e.allowedEvents[n],{});break;case"follow":switch(i){case null:case"from_channel_tooltip":case"with_push_tooltip":case"unlogged":Krux("admEvent",e.allowedEvents[n],{})}break;case"playlist":"add_video"===i&&Krux("admEvent",e.allowedEvents[n],{});break;default:Krux("admEvent",e.allowedEvents[n],{})}}};return e},!0)},124:function(e,t,n){n(1),n(2),n(5),_DM.define("DM_Display_Skin",function(){var e={params:null,translateV1ParamstoV2:function(e){var t={skinName:"name",trackingTag:"tracking_tag",bodyClickUrl:"redirect_url",topBannerLink:"redirect_url",bodyClickUrlThroughTag:"click_count_urls",topBannerLinkThroughTag:"click_count_urls",countingPixel:"display_count_urls",countingPixelAlt:"display_count_urls"},n={};for(var i in t)if(""!==e[i]){var o=t[i];"bodyClickUrl"==i&&(n.body_redirect_enabled=!0),o.match(/urls/)?(n[o]||(n[o]=[]),$.isArray(e[i])?n[o]=n[o].concat(e[i]):n[o].push(e[i])):n[o]=e[i]}return n},onCodeReceived:function(e){this.setParams(e),this.build()},setParams:function(e){this.params=$.isString(e)?new Function("return "+e)():e},build:function(){log("Top3","Build",this.params);try{if("object"==typeof this.params){var e=this;this.params=this.translateV1ParamstoV2(this.params),this.params.from_oas=!0,PubSub.publish("masscast:loading_top3"),$.getJSON("/controller/Masscast?method=getSkin&method%3Aargs="+encodeURIComponent($.toJSONString([this.params.name])),function(t){PubSub.publish("masscast:loaded_top3",t,e.params)})}}catch(t){log("Top3","Error while loading skin",t.message,"- skinData:",this.params)}},__initialize:function(){PubSub.subscribe("masscast:position_Top3",this.onCodeReceived,this)}};return e},!0)},125:function(e,t,n){n(1),_DM.define("DM_RequestWatcher",function(){var e={initialize:function(e){if(window.performance&&performance.getEntries&&window.RUMReqsBeaconUrl){window.adRequestsTotal=0,window.adFramesTotal=0;var t=[0,10,30,60,120,300,600,1800,3600],n=0,i=0;!function o(){t[n+1]&&setTimeout(function(){i=performance.getEntries().length+adRequestsTotal;var a={r_c:i,i_c:adFramesTotal,w:t[n],p:e,cy:DM_Context.geoip_country};EventBus.send({name:"rum.requests_count",data:a}),o()},1e3*(t[n+1]-t[n++]))}()}}};return e},!0)},127:function(){/*!
	Waypoints - 3.0.0
	Copyright  2011-2014 Caleb Troughton
	Licensed under the MIT license.
	https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
	*/
!function(){"use strict";function e(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,i),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,t+=1}var t=0,n={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.destroyAll=function(){var e=[];for(var t in n)e.push(n[t]);for(var i=0,o=e.length;o>i;i++)e[i].destroy()},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=o.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},o=window.Waypoint,a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e,r=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&t&&(this.adapter.off(".waypoints"),delete i[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,a(e))})},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){(!t.didScroll||o.isTouch)&&(t.didScroll=!0,a(e))})},t.prototype.handleResize=function(){o.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var i=t[n],o=i.newScroll>i.oldScroll,a=o?i.forward:i.backward;for(var r in this.waypoints[n]){var s=this.waypoints[n][r],l=i.oldScroll<s.triggerPoint,c=i.newScroll>=s.triggerPoint,u=l&&c,d=!l&&!c;(u||d)&&(s.queueTrigger(a),e[s.group.id]=s.group)}}for(var p in e)e[p].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element===this.element.window?o.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element===this.element.window?o.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var i=0,o=e.length;o>i;i++)e[i].destroy()},t.prototype.refresh=function(){var e,t=this.element===this.element.window,n=this.adapter.offset(),i={};this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var o in e){var a=e[o];for(var r in this.waypoints[o]){var s,l,c,u,d,p=this.waypoints[o][r],h=p.options.offset,f=p.triggerPoint,g=0,m=null==f;p.element!==p.element.window&&(g=p.adapter.offset()[a.offsetProp]),"function"==typeof h?h=h.apply(p):"string"==typeof h&&(h=parseFloat(h),p.options.offset.indexOf("%")>-1&&(h=Math.ceil(a.contextDimension*h/100))),s=a.contextScroll-a.contextOffset,p.triggerPoint=g+s-h,l=f<a.oldScroll,c=p.triggerPoint>=a.oldScroll,u=l&&c,d=!l&&!c,!m&&u?(p.queueTrigger(a.backward),i[p.group.id]=p.group):!m&&d?(p.queueTrigger(a.forward),i[p.group.id]=p.group):m&&a.oldScroll>=p.triggerPoint&&(p.queueTrigger(a.forward),i[p.group.id]=p.group)}}for(var v in i)i[v].flushTriggers();return this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in i)i[e].refresh()},t.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){r&&r(),t.refreshAll()},o.Context=t}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function n(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},o=window.Waypoint;n.prototype.add=function(e){this.waypoints.push(e)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],o="up"===n||"left"===n;i.sort(o?t:e);for(var a=0,r=i.length;r>a;a+=1){var s=i[a];(s.options.continuous||a===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(t){this.waypoints.sort(e);var n=o.Adapter.inArray(t,this.waypoints),i=n===this.waypoints.length-1;return i?null:this.waypoints[n+1]},n.prototype.previous=function(t){this.waypoints.sort(e);var n=o.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},n.prototype.remove=function(e){var t=o.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(e){return i[e.axis][e.name]||new n(e)},o.Group=n}(),function(){"use strict";function e(e){this.$element=t(e)}var t=window.jQuery,n=window.Waypoint;t.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,n){e.prototype[n]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,e)}}),t.each(["extend","inArray","isEmptyObject"],function(n,i){e[i]=t[i]}),n.adapters.push({name:"jquery",Adapter:e}),n.Adapter=e}(),function(){"use strict";function e(e){return function(){var n=[],i=arguments[0];return e.isFunction(arguments[0])&&(i=e.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var o=e.extend({},i,{element:this});"string"==typeof o.context&&(o.context=e(this).closest(o.context)[0]),n.push(new t(o))}),n}}var t=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}()},128:function(e,t,n){n(1),n(2),n(331),_DM.define("DM_Relevant_Content_CTR",function(){var e={onScroll:function(e,t){if(t.scrolledItem.hasClass("js-validated-waypoint")&&t.scrolledItem.hasClass("js-waypoint-done-by-click")===!1){var n,i;switch(e){case"wtw":n=t.scrolledItem,i=n.data("video"),i&&t.detectedItems.push({video_id:n.data("video-id"),position:n.data("position"),source:n.find(".js-reason").children().data("source")});break;case"search":case"related":n=t.scrolledItem,i=n.find(".sd_video_preview").data("id"),i&&t.detectedItems.push({video_id:n.data("video-id"),position:n.data("position")})}}},onScrollStop:function(t,n,i){Object.keys(n.detectedItems).length&&e.send($.extend({context:t,context_label:t+"_feed",action:"display",action_label:"video_display",data:n.detectedItems},i||{}))},getSelector:function(e){switch(e){case"wtw":return".pl_wtw_page .pl_wtw_video:not(.js-validated-waypoint)";case"search":return".js-list-list .sd_video_listitem";case"related":return".js-video-related .js-video-itemrelated"}},getHomepageType:function(){return DM_Context.homepage_with_family_filter?DM_Context.reader_has_history?"family_filter custom":"family_filter regular":DM_Context.reader_has_history?"custom":"regular"},adjustVideosPositions:function(t){$(e.getSelector(t)).each(function(){var e=$(this).data("position");e>=2&&($(this).attr("data-position",e+1),$(this).data("position",e+1))})},initCTRTracking:function(t,n){if(window.PixelleAllowed){var i=!0,o=setTimeout(function(){e.initWaypoints(t,n),i=!1},2e3);PubSub.subscribe("pixelle:ad_loaded",function(){clearTimeout(o),e.adjustVideosPositions(t),i&&e.initWaypoints(t,n)})}else e.initWaypoints(t,n)},initWaypoints:function(t,n){new DM_Waypoint({selector:e.getSelector(t),options:{offset:"bottom-in-view"},clearDetectedItemsOnScrollStop:!0,onScroll:function(e){DM_Relevant_Content_CTR.onScroll(t,e)},onScrollStop:function(e){DM_Relevant_Content_CTR.onScrollStop(t,e,n)}})},getRandParameter:function(){var e=99999999998,t=e/2;return Math.floor(Math.random()*(e-t))+t},getRequestId:function(t){return e.request_id||(e.request_id=DM_Sha1(t+e.getRandParameter())),e.request_id},send:function(t){var n=t.context,i=t.action,o={visitor_user_id:DM_Context.reader_id,visitor_id:getCookie("v1st"),visitor_history:DM_Context.reader_has_history,visitor_country:DM_Context.geoip_country,visitor_browser_language:DM_Context.browser_language,visitor_source_domain:document.referrer,traffic_segment:DM_Context.traffic_segment,site_version:DM_Context.content_version};switch(o.request_id=e.getRequestId(o.visitor_id),n){case"wtw":o.homepage_type=e.getHomepageType();break;case"related":o.current_video_id=DM_Context.video_id,o.algorithm=t.related_algo}"display"===i?o.videos=t.data:"click"===i&&(o=$.extend(t.data,o)),log("CTR",o),EventBus.send({name:t.context_label+"."+t.action_label,data:o})}};return e},!0)},129:function(e,t,n){n(1),n(2),n(127),n(130),_DM.define("DM_Waypoint",function(){var e=function(e){this.id=e.id||null,this.selector=e.selector,this.options=e.options||{},this.onScroll=e.onScroll||function(){},this.onScrollStop=e.onScrollStop||function(){},this.clearDetectedItemsOnScrollStop=e.clearDetectedItemsOnScrollStop||!1,this.scrolledItem=null,this.detectedItems=[],this.init()};return e.prototype={init:function(){var e=this;$(this.selector).waypoint(function(){$(this.element).addClass("js-validated-waypoint"),e.scrolledItem=$(this.element),e.onScroll(e),this.destroy()},this.options),this.trigger(),$(window).on("scrollstop",function(){e.trigger()})},trigger:function(){this.onScrollStop(this),this.clear()},clear:function(){this.clearDetectedItemsOnScrollStop&&(this.detectedItems=[])}},e},!0)},130:function(e,t){!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof t?e.exports=n(require("jquery")):n(jQuery)}(function(){var e=$.event.dispatch||$.event.handle,t=$.event.special,n="D"+ +new Date,i="D"+(+new Date+1);t.scrollstart={setup:function(i){var o,a=$.extend({latency:t.scrollstop.latency},i),r=function(t){var n=this,i=arguments;o?clearTimeout(o):(t.type="scrollstart",e.apply(n,i)),o=setTimeout(function(){o=null},a.latency)};$(this).bind("scroll",r).data(n,r)},teardown:function(){$(this).unbind("scroll",$(this).data(n))}},t.scrollstop={latency:250,setup:function(n){var o,a=$.extend({latency:t.scrollstop.latency},n),r=function(t){var n=this,i=arguments;o&&clearTimeout(o),o=setTimeout(function(){o=null,t.type="scrollstop",e.apply(n,i)},a.latency)};$(this).bind("scroll",r).data(i,r)},teardown:function(){$(this).unbind("scroll",$(this).data(i))}}})},312:function(){!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,o=this.length;++i<o&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return N[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function o(e,t){for(var n=0,i=t.length;i>n;n+=1)if(r(e,t[n]))return n;return-1}function a(){var t=e(B);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function r(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function s(t,n){var i,o,a;if(null===t||t.length<1)return[];for(i=t.split(n),o=0,a=i.length;a>o;o+=1)i[o]=e.trim(i[o]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var o=e.data(n,i);o!==t&&n.val()!==o&&(e.removeData(n,i),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var i=F;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,i){i=i||t;var o;return function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(i,t)},e)}}function p(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){o(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus();var o=n.offsetWidth>0||n.offsetHeight>0;o&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var o=document.selection.createRange();i=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),n=o.text.length-i}return{offset:n,length:i}}function g(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!R){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);R=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),R.attr("class","select2-sizer"),e("body").append(R)}return R.text(t.val()),R.width()}function _(t,n,i){var o,a,r=[];o=e.trim(t.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),o=e.trim(n.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&r.push(a))})),t.attr("class",r.join(" "))}function y(e,t,n,o){var a=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),r=t.length;return 0>a?void n.push(o(e)):(n.push(o(e.substring(0,a))),n.push("<span class='select2-match'>"),n.push(o(e.substring(a,a+r))),n.push("</span>"),void n.push(o(e.substring(a+r,e.length))))}function b(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(n){var i,o=null,a=n.quietMillis||100,r=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,a=r,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);i=i?i.call(s,l.term,l.page,l.context):null,a="function"==typeof a?a.call(s,l.term,l.page,l.context):a,o&&"function"==typeof o.abort&&o.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(s)):e.extend(d,n.params)),e.extend(d,{url:a,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)}}),o=c.call(s,d)},a)}}function x(t){var n,i,o=t,a=function(e){return""+e.text};e.isArray(o)&&(i=o,o={results:i}),e.isFunction(o)===!1&&(i=o,o=function(){return i});var r=o();return r.text&&(a=r.text,e.isFunction(a)||(n=r.text,a=function(e){return e[n]})),function(t){var n,i=t.term,r={results:[]};return""===i?void t.callback(o()):(n=function(o,r){var s,l;if(o=o[0],o.children){s={};for(l in o)o.hasOwnProperty(l)&&(s[l]=o[l]);s.children=[],e(o.children).each2(function(e,t){n(t,s.children)}),(s.children.length||t.matcher(i,a(s),o))&&r.push(s)}else t.matcher(i,a(o),o)&&r.push(o)},e(o().results).each2(function(e,t){n(t,r.results)}),void t.callback(r))}}function C(n){var i=e.isFunction(n);return function(o){var a=o.term,r={results:[]},s=i?n(o):n;e.isArray(s)&&(e(s).each(function(){var e=this.text!==t,n=e?this.text:this;(""===a||o.matcher(a,n))&&r.results.push(e?this:{id:this,text:this})}),o.callback(r))}}function k(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function D(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function S(t){var n=0;return e.each(t,function(e,t){t.children?n+=S(t.children):n++}),n}function M(e,n,i,o){var a,s,l,c,u,d=e,p=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(s=-1,l=0,c=o.tokenSeparators.length;c>l&&(u=o.tokenSeparators[l],s=e.indexOf(u),!(s>=0));l++);if(0>s)break;if(a=e.substring(0,s),e=e.substring(s+u.length),a.length>0&&(a=o.createSearchChoice.call(this,a,n),a!==t&&null!==a&&o.id(a)!==t&&null!==o.id(a))){for(p=!1,l=0,c=n.length;c>l;l++)if(r(o.id(a),o.id(n[l]))){p=!0;break}p||i(a)}}return d!==e?e:void 0}function P(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function A(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var E,T,$,I,O,R,L,j,F={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},B="<div class='select2-measure-scrollbar'></div>",N={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};L=e(document),O=function(){var e=1;return function(){return e++}}(),T=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,o,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+O()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(D(n.containerCss,this.opts.element)),this.container.addClass(D(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",g),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",g),this.results=i=this.container.find(r),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",g),u(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),p(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,o){var a=i.scrollTop();o>0&&0>=a-o?(i.scrollTop(0),g(e)):0>o&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),g(e))}),c(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var s=n.element.prop("disabled");s===t&&(s=!1),this.enable(!s);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),j=j||a(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2");this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",this._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),P.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,o,a,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,o,a){var r,s=this.opts.id,l=this.liveRegion;(r=function(i,o,u){var d,p,h,f,g,m,v,_,y,b;i=n.sortResults(i,o,a);var w=[];for(d=0,p=i.length;p>d;d+=1)h=i[d],g=h.disabled===!0,f=!g&&s(h)!==t,m=h.children&&h.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(h)),v.attr("role","presentation"),_=e(document.createElement("div")),_.addClass("select2-result-label"),_.attr("id","select2-result-label-"+O()),_.attr("role","option"),b=n.formatResult(h,_,a,c.opts.escapeMarkup),
b!==t&&(_.html(b),v.append(_)),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),r(h.children,y,u+1),v.append(y)),v.data("select2-data",h),w.push(v[0]);o.append(w),l.text(n.formatMatches(i.length))})(o,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(e){return e[a]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind(function(e){var n,o,a,r={results:[],more:!1},s=e.term;a=function(t,n){var i;t.is("option")?e.matcher(s,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){a(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(o=this.getPlaceholderOption(),o&&(n=n.not(o))),n.each2(function(e,t){a(t,r.results)}),e.callback(r)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=C(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var o=[];e(s(t.val(),n.separator)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return r(this.id,t.id)?(t=this,!1):void 0}),o.push(t)}),i(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,o=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element)),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",o._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,o._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,n,i,o,a,r=this.dropdown,s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),d=e(window),p=d.width(),h=d.height(),f=d.scrollLeft()+p,g=d.scrollTop()+h,m=s.top+l,v=s.left,_=g>=m+u,y=s.top-u>=d.scrollTop(),b=r.outerWidth(!1),w=f>=v+b,x=r.hasClass("select2-drop-above");x?(n=!0,!y&&_&&(i=!0,n=!1)):(n=!1,!_&&y&&(i=!0,n=!0)),i&&(r.hide(),s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),f=d.scrollLeft()+p,g=d.scrollTop()+h,m=s.top+l,v=s.left,b=r.outerWidth(!1),w=f>=v+b,r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),b=r.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:j.width),b>c?c=b:b=c,u=r.outerHeight(!1),w=f>=v+b):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,v-=t.left),w||(v=s.left+this.container.outerWidth(!1)-b),o={left:v,width:c},n?(o.top=s.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(o.top=m,o.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),o=e.extend(o,D(this.opts.dropdownCss,this.opts.element)),r.css(o)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),L.on("mousemove.select2Event",function(e){F.x=e.pageX,F.y=e.pageY}),!0):!1},opening:function(){var t,i=this.containerEventName,o="scroll."+i,a="resize."+i,r="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var o,a=e("#select2-drop");a.length>0&&(o=a.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(a+" "+o+" "+r,function(){s.opened()&&s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(o)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),L.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,o,a,r,s,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),l=(i.offset()||{}).top||0,o=l+i.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results"),s.length>0&&(o=s.offset().top+s.outerHeight(!0))),a=c.offset().top+c.outerHeight(!0),o>a&&c.scrollTop(c.scrollTop()+(o-a)),r=l-c.offset().top,0>r&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var o=e(n[i]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,a=this.findHighlightableChoices();return 0===arguments.length?o(a.filter(".select2-highlighted")[0],a.get()):(t>=a.length&&(t=a.length-1),0>t&&(t=0),this.removeHighlight(),n=e(a[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,o=this,a=this.search.val(),r=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:a,page:i,context:r}),o.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(D(o.opts.formatLoadMore,o.opts.element,i+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):n.remove(),o.positionDropdown(),o.resultsPage=i,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),p.positionDropdown(),p.liveRegion.text(u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.text():p.opts.formatMatches(u.find(".select2-result-selectable").length))}function o(e){u.html(e),i()}var a,s,l,c=this.search,u=this.results,d=this.opts,p=this,h=c.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!r(h,f))&&(e.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(a=this.data(),e.isArray(a)&&a.length>=g&&k(d.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+D(d.formatSelectionTooBig,d.element,g)+"</li>");if(c.val().length<d.minimumInputLength)return o(k(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+D(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void o(k(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+D(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+D(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),s=this.tokenize(),s!=t&&null!=s&&c.val(s),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(a){var s;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=a.context===t?null:a.context,this.opts.createSearchChoice&&""!==c.val()&&(s=this.opts.createSearchChoice.call(p,c.val(),a.results),s!==t&&null!==s&&p.id(s)!==t&&null!==p.id(s)&&0===e(a.results).filter(function(){return r(p.id(this),p.id(s))}).length&&this.opts.createSearchChoicePosition(a.results,s)),0===a.results.length&&k(d.formatNoMatches,"formatNoMatches"))return void o("<li class='select2-no-results'>"+D(d.formatNoMatches,d.element,c.val())+"</li>");u.empty(),p.opts.populateResults.call(this,u,a.results,{term:c.val(),page:this.resultsPage,context:null}),a.more===!0&&k(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+d.escapeMarkup(D(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(a,n),i(),this.opts.element.trigger({type:"select2-loaded",items:a})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,o,a,r,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),a=0,r=i.length;r>a;a+=1)if(s=i[a].replace(/\s/g,""),o=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),$=A(T,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><i class='icon-arrow_down font-xxs'></i></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(o=this.search.val().length,n.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"selection","focusser")},initContainer:function(){var t,i,o=this.container,a=this.dropdown,r=O();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)return void g(e);switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),void g(e);case E.ENTER:return this.selectHighlighted(),void g(e);case E.TAB:return void this.selectHighlighted({noFocus:!0});case E.ESC:return this.cancel(e),void g(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.ESC){if(this.opts.openOnEnter===!1&&e.which===E.ENTER)return void g(e);if(e.which==E.DOWN||e.which==E.UP||e.which==E.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void g(e)}return e.which==E.DELETE||e.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),void g(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),g(i)})),a.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){g(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=n.val(),a=null;t.query({matcher:function(e,n,i){var s=r(o,t.id(i));return s&&(a=i),s},callback:e.isFunction(i)?function(){i(a)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){return r(o.id(t.data("select2-data")),o.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(S(e.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),o.empty(),null!==e&&(n=this.opts.formatSelection(e,o,this.opts.escapeMarkup)),n!==t&&o.append(n),i=this.opts.formatSelectionCssClass(e,o),i!==t&&o.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,o=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=o.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),n&&o.triggerChange({added:e,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),I=A(T,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var o=s(n.val(),t.separator),a=[];t.query({matcher:function(n,i,s){var l=e.grep(o,function(e){return r(e,t.id(s))}).length;return l&&a.push(s),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<o.length;n++)for(var s=o[n],l=0;l<a.length;l++){var c=a[l];if(r(s,t.id(c))){e.push(c),a.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+O()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),o=n.next(".select2-search-choice:not(.select2-locked)"),a=f(this.search);if(n.length&&(e.which==E.LEFT||e.which==E.RIGHT||e.which==E.BACKSPACE||e.which==E.DELETE||e.which==E.ENTER)){var r=n;return e.which==E.LEFT&&i.length?r=i:e.which==E.RIGHT?r=o.length?o:null:e.which===E.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),r=i.length?i:o):e.which==E.DELETE?this.unselect(n.first())&&(this.search.width(10),r=o.length?o:null):e.which==E.ENTER&&(r=null),this.selectChoice(r),g(e),void(r&&r.length||this.open())}if((e.which===E.BACKSPACE&&1==this.keydowns||e.which==E.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void g(e);if(this.selectChoice(null),this.opened())switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),void g(e);case E.ENTER:return this.selectHighlighted(),void g(e);case E.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case E.ESC:return this.cancel(e),void g(e)}if(e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.BACKSPACE&&e.which!==E.ESC){if(e.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)&&g(e),e.which===E.ENTER&&g(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused");

},updateSelection:function(t){var n=[],i=[],a=this;e(t).each(function(){o(a.id(this),n)<0&&(n.push(a.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o,a=!n.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?r:s,c=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),o=this.opts.formatSelectionCssClass(n,l.find("div")),o!=t&&l.addClass(o),a&&l.find(".select2-search-choice-close").on("mousedown",g).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),g(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,i,a=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=o(this.id(n),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),s=this;a.each2(function(e,t){var n=s.id(t.data("select2-data"));o(n,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&s.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,o,a=l(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,o=n-(t-i)-a,e>o&&(o=n-a),40>o&&(o=n-a),0>=o&&(o=e),this.search.width(Math.floor(o))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){o(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var o,a=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(o,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,o,a=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(o=this.data(),t||(t=[]),i=e.map(t,function(e){return a.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),e.fn.select2=function(){var n,i,a,r,s,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),i=s?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(o(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,i=e(this).data("select2"),i===t)return;if(a=l[0],"container"===a?r=i.container:"dropdown"===a?r=i.dropdown:(p[a]&&(a=p[a]),r=i[a].apply(i,l.slice(1))),o(l[0],u)>=0||o(l[0],d)>=0&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var o=[];return y(e.text,n.term,o,i),o.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:b,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:C},util:{debounce:d,markMatch:y,escapeMarkup:b,stripDiacritics:i},"class":{"abstract":T,single:$,multi:I}}}}(jQuery)},328:function(e,t,n){n(1),n(2),_DM.define("DM_Responsive",function(){"use strict";var e={nb_cols:12,current:{},breakpoints:{},breakpoint_names:[],getCssData:function(){var e=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content");return e=e.replace(/\\/g,""),e=e.substring(1),e=e.substring(0,e.length-1),JSON.parse(e)},getBreakpointByName:function(t){for(var n in e.breakpoints)if(e.breakpoints[n].name===t)return e.breakpoints[n]},getCurrentBreakpoint:function(){return e.current},getBreakpointFromWindowSize:function(t){var n=null,i=t+e.getScrollbarSize();for(var o in e.breakpoints){var a=e.breakpoints[o];if(i<parseInt(o,10))return{name:n.name,min_size:n.size,range:[n.size,a.size]};n=a}return{name:a.name,min_size:a.size,range:[a.size,"infinite"]}},initEvents:function(){$(window).on("resize",function(){var t=e.getBreakpointFromWindowSize($(window).width());t.name!=e.current.name&&PubSub.publish("responsive:change_breakpoint",{old:e.current.name,"new":t.name}),e.current=t})},getScrollbarSize:function(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},__initialize:function(){var t=e.getCssData();e.breakpoint_names=Object.keys(t);for(var n in t){var i=t[n];i.name=n,e.breakpoints[parseInt(i.size)]=i}e.current=e.getBreakpointFromWindowSize($(window).width()),e.initEvents()}};return e},!0)},331:function(e,t,n){n(1),_DM.define("DM_Sha1",function(){function e(e){if(null===e||"undefined"==typeof e)return"";var t,n,i=e+"",o="",a=0;t=n=0,a=i.length;for(var r=0;a>r;r++){var s=i.charCodeAt(r),l=null;if(128>s)n++;else if(s>127&&2048>s)l=String.fromCharCode(s>>6|192,63&s|128);else if(55296!=(63488&s))l=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(55296!=(64512&s))throw new RangeError("Unmatched trail surrogate at "+r);var c=i.charCodeAt(++r);if(56320!=(64512&c))throw new RangeError("Unmatched lead surrogate at "+(r-1));s=((1023&s)<<10)+(1023&c)+65536,l=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==l&&(n>t&&(o+=i.slice(t,n)),o+=l,t=n=r+1)}return n>t&&(o+=i.slice(t,a)),o}var t=function(t){var n,i,o,a,r,s,l,c,u,d=function(e,t){var n=e<<t|e>>>32-t;return n},p=function(e){var t,n,i="";for(t=7;t>=0;t--)n=e>>>4*t&15,i+=n.toString(16);return i},h=new Array(80),f=1732584193,g=4023233417,m=2562383102,v=271733878,_=3285377520;t=e(t);var y=t.length,b=[];for(i=0;y-3>i;i+=4)o=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),b.push(o);switch(y%4){case 0:i=2147483648;break;case 1:i=t.charCodeAt(y-1)<<24|8388608;break;case 2:i=t.charCodeAt(y-2)<<24|t.charCodeAt(y-1)<<16|32768;break;case 3:i=t.charCodeAt(y-3)<<24|t.charCodeAt(y-2)<<16|t.charCodeAt(y-1)<<8|128}for(b.push(i);b.length%16!=14;)b.push(0);for(b.push(y>>>29),b.push(y<<3&4294967295),n=0;n<b.length;n+=16){for(i=0;16>i;i++)h[i]=b[n+i];for(i=16;79>=i;i++)h[i]=d(h[i-3]^h[i-8]^h[i-14]^h[i-16],1);for(a=f,r=g,s=m,l=v,c=_,i=0;19>=i;i++)u=d(a,5)+(r&s|~r&l)+c+h[i]+1518500249&4294967295,c=l,l=s,s=d(r,30),r=a,a=u;for(i=20;39>=i;i++)u=d(a,5)+(r^s^l)+c+h[i]+1859775393&4294967295,c=l,l=s,s=d(r,30),r=a,a=u;for(i=40;59>=i;i++)u=d(a,5)+(r&s|r&l|s&l)+c+h[i]+2400959708&4294967295,c=l,l=s,s=d(r,30),r=a,a=u;for(i=60;79>=i;i++)u=d(a,5)+(r^s^l)+c+h[i]+3395469782&4294967295,c=l,l=s,s=d(r,30),r=a,a=u;f=f+a&4294967295,g=g+r&4294967295,m=m+s&4294967295,v=v+l&4294967295,_=_+c&4294967295}return u=p(f)+p(g)+p(m)+p(v)+p(_),u.toLowerCase()};return t},!0)},559:function(e,t,n){n(1),_DM.define("DM_GoogleAnalytics",function(){var e={signinPosition:null,featureIdentity:null,canTrackEvent:!0,getSigninSignupPosition:function(){e.signinPosition=$(this).data("signin-signup-position")},getFeatureIdentity:function(){var t=$(this).data("feature-identity");$.inArray(t,["subscribe","repost","playlist"])>-1&&"video_item"!==DM_Context.route_name&&(e.canTrackEvent=!1);var n={"signin-signup":"Sign In / Sign Up",upload:"Upload",subscribe:"Follow",repost:"Repost",playlist:"Create New Playlist"};if(!n[t])throw new Error("DM_GoogleAnalytics: featureIdentity is not defined");e.featureIdentity=n[t]},onHeaderUploadButtonClicked:function(){DM_Stats.trigger({action:"upload",context:"header_button"}),store.set("stats-ga-header-upload-button-clicked",!0)},onSigninSignupFormDisplayed:function(){if(e.canTrackEvent){if(store.get("stats-ga-header-upload-button-clicked")&&"signin"===DM_Context.route_name&&(e.featureIdentity="Upload",store.remove("stats-ga-header-upload-button-clicked"),store.set("stats-ga-signin-displayed-from-upload")),e.store.get("like-event"))return!1;e.featureIdentity&&DM_Stats.trigger({action:"signin_signup",context:"attempt",data:{ga_label:e.featureIdentity}})}},onSigninSignupFormSubmitted:function(t){e.canTrackEvent&&(store.get("stats-ga-signin-displayed-from-upload")&&"signin"===DM_Context.route_name&&(e.featureIdentity="Upload",store.remove("stats-ga-signin-displayed-from-upload")),e.featureIdentity&&(e.store.get("like-event")&&(e.featureIdentity="Like"),DM_Stats.trigger({action:t,context:"success",data:{ga_label:e.featureIdentity}})))},onSigninSignupFormClosed:function(){e.signinPosition=null,e.featureIdentity=null,e.canTrackEvent=!0,store.remove("stats-ga-header-upload-button-clicked"),store.remove("stats-ga-signin-displayed-from-upload"),store.remove("like-event")},onEvent:function(t){var n=t.event_context,i=null,o=t.event_label,a=t.event_data.ga_label,r=null;switch(t.event_action){case"like":i="Player Page";break;case"signin_signup":case"signin":case"signup":if(["attempt","success"].indexOf(n)>-1){if(i="video_item"===DM_Context.route_name?"Player Page":"Header","Like"===a){i="Player Page";break}switch(e.signinPosition){case"header":i="Header";break;case"burger":i="Burger Menu"}}break;case"follow":if(null===n){switch(DM_Context.route_name){case"video_item":i="Player Page";break;case"user_home":i="Channel Page";break;case"video_list":DM_Context.is_search&&(i="Search Page");break;case"home":i="Home Page"}o="Followed Channel",a=t.event_data.login}break;case"repost":["attempt","created","creation_fail"].indexOf(n)>-1&&(i="Player Page");break;case"live":i=n;break;case"upload":switch(n){case"header_button":i="Header";break;case"fail":case"success":case"save_edit_form":i="Upload"}break;case"wtw":i="Home Page"}i&&o&&e.send(i,o,a,r)},send:function(e,t,n,i){ga("send","event",e,t,n,i)},__onDomReady:function(){PubSub.subscribe("stats:event",e.onEvent),PubSub.subscribe("dm:register_or_login:displayed",e.onSigninSignupFormDisplayed),PubSub.subscribe("dm:register_or_login:sigin_page:displayed",e.onSigninSignupFormDisplayed),PubSub.subscribe("dm:register_or_login:submitted",e.onSigninSignupFormSubmitted),PubSub.subscribe("dm:register_or_login:closed",e.onSigninSignupFormClosed),$(document).on("click",".js-header-upload-button",e.onHeaderUploadButtonClicked).on("click","[data-signin-signup-position]",e.getSigninSignupPosition).on("click","[data-feature-identity]",e.getFeatureIdentity)}};return e},!1)},889:function(e,t){(function(t){"use strict";e.exports=function(){function e(){try{return r in o&&o[r]}catch(e){return!1}}var n,i={},o="undefined"!=typeof window?window:t,a=o.document,r="localStorage",s="script";if(i.disabled=!1,i.version="1.3.20",i.set=function(){},i.get=function(){},i.has=function(e){return void 0!==i.get(e)},i.remove=function(){},i.clear=function(){},i.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var o=i.get(e,t);n(o),i.set(e,o)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(e){return JSON.stringify(e)},i.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},e())n=o[r],i.set=function(e,t){return void 0===t?i.remove(e):(n.setItem(e,i.serialize(t)),t)},i.get=function(e,t){var o=i.deserialize(n.getItem(e));return void 0===o?t:o},i.remove=function(e){n.removeItem(e)},i.clear=function(){n.clear()},i.getAll=function(){var e={};return i.forEach(function(t,n){e[t]=n}),e},i.forEach=function(e){for(var t=0;t<n.length;t++){var o=n.key(t);e(o,i.get(o))}};else if(a&&a.documentElement.addBehavior){var l,c;try{c=new ActiveXObject("htmlfile"),c.open(),c.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),c.close(),l=c.w.frames[0].document,n=l.createElement("div")}catch(u){n=a.createElement("div"),l=a.body}var d=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),l.appendChild(n),n.addBehavior("#default#userData"),n.load(r);var o=e.apply(i,t);return l.removeChild(n),o}},p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),h=function(e){return e.replace(/^d/,"___$&").replace(p,"___")};i.set=d(function(e,t,n){return t=h(t),void 0===n?i.remove(t):(e.setAttribute(t,i.serialize(n)),e.save(r),n)}),i.get=d(function(e,t,n){t=h(t);var o=i.deserialize(e.getAttribute(t));return void 0===o?n:o}),i.remove=d(function(e,t){t=h(t),e.removeAttribute(t),e.save(r)}),i.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(r)}),i.getAll=function(){var e={};return i.forEach(function(t,n){e[t]=n}),e},i.forEach=d(function(e,t){for(var n,o=e.XMLDocument.documentElement.attributes,a=0;n=o[a];++a)t(n.name,i.deserialize(e.getAttribute(n.name)))})}try{var f="__storejs__";i.set(f,f),i.get(f)!=f&&(i.disabled=!0),i.remove(f)}catch(u){i.disabled=!0}return i.enabled=!i.disabled,i}()}).call(t,function(){return this}())}});