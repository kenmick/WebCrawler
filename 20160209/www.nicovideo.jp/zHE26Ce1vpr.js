/*!CK:2510983205!*//*1454451711,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["r3k+Y"]); }

__d("VideoBroadcastSubscriptionAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe"};},null);
__d('AsyncFormRequestUtils',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={subscribe:function(j,k,l){h.subscribe('AsyncRequest/'+k,function(m,n){var o=n.request.relativeTo;if(o&&o===j)l(n);});}};f.exports=i;},null);
__d('VideoRightButtonBase',['AsyncFormRequestUtils','cx','csx','CSS','DOM','Event','FormSubmit','LayerRefocusOnHide','Run','SubscriptionsHandler','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t,u,v,w,x,y,z,aa){'use strict';this.$VideoRightButtonBase1=[];this.$VideoRightButtonBase2=u;this.$VideoRightButtonBase3=y;this.$VideoRightButtonBase4=x;this.$VideoRightButtonBase5=t;this.$VideoRightButtonBase6=z.hiddenAfterFinish;this.$VideoRightButtonBase7=z.hiddenWhilePaused;this.$VideoRightButtonBase8=new q();this.$VideoRightButtonBase9=false;this.$VideoRightButtonBase10=false;this.$VideoRightButtonBase11=false;this.$VideoRightButtonBase12=aa;this.$VideoRightButtonBase13=false;if(this.$VideoRightButtonBase12){this.$VideoRightButtonBase12.disableBehavior(o);var ba=l.scry(this.$VideoRightButtonBase12.getContentRoot(),"._36gl")[0];if(ba)m.listen(ba,'click',(function(){this.$VideoRightButtonBase13=false;this.$VideoRightButtonBase12=null;this.nuxViewClicked();}).bind(this));this.$VideoRightButtonBase12.subscribe('hide',(function(){if(this.$VideoRightButtonBase13)this.nuxViewHidden();this.$VideoRightButtonBase13=false;this.$VideoRightButtonBase12=null;}).bind(this));}}s.prototype.setupAllHandlers=function(){'use strict';this.$VideoRightButtonBase8=new q();var t=this.$VideoRightButtonBase5.getRootNode();p.onLeave((function(){this.$VideoRightButtonBase8.release();}).bind(this));this.$VideoRightButtonBase8.addSubscriptions(m.listen(t,'mousemove',r((function(){return this.$VideoRightButtonBase14();}).bind(this),200)),m.listen(t,'mouseenter',(function(){if(this.$VideoRightButtonBase6&&this.$VideoRightButtonBase10||this.$VideoRightButtonBase7&&this.$VideoRightButtonBase11)return;this.$VideoRightButtonBase15=true;this.$VideoRightButtonBase14();if(this.$VideoRightButtonBase12){this.$VideoRightButtonBase12.show();this.$VideoRightButtonBase13=true;}}).bind(this)),m.listen(t,'mouseleave',(function(){this.$VideoRightButtonBase16();this.$VideoRightButtonBase15=false;}).bind(this)),this.$VideoRightButtonBase5.addListener('beginPlayback',(function(){this.$VideoRightButtonBase10=false;this.$VideoRightButtonBase11=false;}).bind(this)),this.$VideoRightButtonBase5.addListener('finishPlayback',(function(){this.$VideoRightButtonBase16();this.$VideoRightButtonBase10=true;}).bind(this)),this.$VideoRightButtonBase5.addListener('pausePlayback',(function(){this.$VideoRightButtonBase16();this.$VideoRightButtonBase11=true;}).bind(this)));m.listen(this.$VideoRightButtonBase2,'click',(function(){if(this.$VideoRightButtonBase17)clearTimeout(this.$VideoRightButtonBase17);if(this.$VideoRightButtonBase1.length===0){this.$VideoRightButtonBase3.setAttribute('value',this.nextActionOnToggle(this.$VideoRightButtonBase9));n.send(this.$VideoRightButtonBase4);}if(this.$VideoRightButtonBase9){this.toggleSwitchOffAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(false);this.$VideoRightButtonBase9=false;}else{this.toggleSwitchOnAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(true);this.$VideoRightButtonBase9=true;}}).bind(this));var u=(function(v){var w=this.$VideoRightButtonBase3.getAttribute('value')===this.nextActionOnToggle(true);if(this.$VideoRightButtonBase1.length>1){var x=this.$VideoRightButtonBase1[this.$VideoRightButtonBase1.length-1],y=x;if(w&&!y||!w&&y){this.$VideoRightButtonBase3.setAttribute('value',this.nextActionOnToggle(y));n.send(this.$VideoRightButtonBase4);}}this.$VideoRightButtonBase1=[];}).bind(this);h.subscribe(this.$VideoRightButtonBase4,'response',u);};s.prototype.$VideoRightButtonBase16=function(){'use strict';if(!this.$VideoRightButtonBase13)k.addClass(this.$VideoRightButtonBase2,"_55c1");};s.prototype.$VideoRightButtonBase14=function(){'use strict';if(this.$VideoRightButtonBase15){k.removeClass(this.$VideoRightButtonBase2,"_55c1");clearTimeout(this.$VideoRightButtonBase18);this.$VideoRightButtonBase18=setTimeout((function(){return this.$VideoRightButtonBase16();}).bind(this),3000);}};s.prototype.toggleSwitchOnAnimation=function(){'use strict';throw new Error('This should be overwritten by children');};s.prototype.toggleSwitchOffAnimation=function(){'use strict';throw new Error('This should be overwritten by children');};s.prototype.nextActionOnToggle=function(t){'use strict';throw new Error('This should be overwritten by children');};s.prototype.nuxViewClicked=function(){'use strict';throw new Error('This should be overwritten by children');};s.prototype.nuxViewHidden=function(){'use strict';throw new Error('This should be overwritten by children');};f.exports=s;},null);
__d("XLiveSubscribeAsyncNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/live\/subscribe\/nux\/",{action:{type:"String"},video_id:{type:"String"}});},null);
__d('VideoLiveSubscriptionButton',['AsyncRequest','cx','VideoRightButtonBase','fbt','CSS','VideoBroadcastSubscriptionAction','DOM','XLiveSubscribeAsyncNuxController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,j);q=p&&p.prototype;function r(s,t,u,v,w,x,y,z,aa,ba){'use strict';q.constructor.call(this,s,t,u,w,x,y,z,ba);this.$VideoLiveSubscriptionButton1=u;this.$VideoLiveSubscriptionButton2=w;this.$VideoLiveSubscriptionButton3=v;this.$VideoLiveSubscriptionButton4=y.getAttribute('value')===m.UNSUBSCRIBE;if(this.$VideoLiveSubscriptionButton4){this.setSwitchOnState(t);}else this.setSwitchOffState(t);this.$VideoLiveSubscriptionButton5=s.getVideoID();this.setupAllHandlers();this.$VideoLiveSubscriptionButton6=aa;}r.prototype.nuxViewClicked=function(){'use strict';this.sendNuxSeenRequest('dismiss');};r.prototype.sendNuxSeenRequest=function(s){'use strict';new h().setURI(o.getURIBuilder().getURI()).setData({action:s,video_id:this.$VideoLiveSubscriptionButton5}).send();};r.prototype.nuxViewHidden=function(){'use strict';this.sendNuxSeenRequest('hide');};r.prototype.setSwitchOffState=function(s){'use strict';var t=k._("Live Subscribe");l.removeClass(s,"_-kc");if(!this.$VideoLiveSubscriptionButton6)l.show(this.$VideoLiveSubscriptionButton3);l.removeClass(this.$VideoLiveSubscriptionButton1,"_knu");n.setContent(this.$VideoLiveSubscriptionButton2,t);};r.prototype.setSwitchOnState=function(s){'use strict';var t=k._("Live Subscribed");l.addClass(s,"_-kc");if(!this.$VideoLiveSubscriptionButton6)l.hide(this.$VideoLiveSubscriptionButton3);l.addClass(this.$VideoLiveSubscriptionButton1,"_knu");n.setContent(this.$VideoLiveSubscriptionButton2,t);};r.prototype.nextActionOnToggle=function(s){'use strict';if(s){return m.UNSUBSCRIBE;}else return m.SUBSCRIBE;};r.prototype.toggleSwitchOnAnimation=function(s){'use strict';this.setSwitchOnState(s);};r.prototype.toggleSwitchOffAnimation=function(s){'use strict';this.setSwitchOffState(s);};f.exports=r;},null);