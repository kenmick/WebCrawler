window.MLoginTimer=0;window.MLoginShow=0;KISSY.add("mui/minilogin/index",function(e,o,n){var i=function(e){var o=location.hostname.split(".");return o.splice(o.length-e>0?o.length-e:0,e).join(".")}(2),t=location.hostname.indexOf(".net")>=0||location.hostname.indexOf(".com.hk")>=0,a=t?"daily.taobao.net":"taobao.com",r=t?"daily.tmall.net":"tmall.com",l=t?"daily.tmall.com.hk":"tmall.hk",c,m="assets_css=3.0.5/login_pc.css",d="//login."+a+"/member/login.jhtml?style=miniall&newMini2=true&enup=true&from=tmall&allp="+escape(m);var s=window.location.protocol;var w={check:true,needRedirect:false,sub:false,proxy:{tmall:s+"//vip."+r+"/miniLoginProxy.htm",hk:s+"//www."+l+"/loginproxy.htm",yao:s+"//yao.95095.com/go/rgn/95095/loginproxy.php",etao:s+"//vip.daily.tmall.net/miniLoginProxy.htm"}};function f(e){var o=document.createElement("a");o.href=e;return o.hostname===location.hostname}var u={show:function(o,n){window.goldlog&&window.goldlog.send("//log.mmstat.com/tmallmember.9.2",{});u.Analytics.MLstar=new Date*1;var i=this;if(typeof o!=="function"){n=o;o=null}n=e.merge(w,n);var t=new Date;t.setDate(t.getDate()-1);document.cookie="cookie2=;expires="+t.toGMTString()+";path=/;domain=.tmall.com";if(n.check===false){this._show(o,n)}else{this._check(function(t){u.Analytics.MLcheckStar=new Date*1;if(t){if(window.MLoginShow<=1&&!e.UA.mobile){TB&&TB.Global&&TB.Global.updateLoginInfo()}o&&o();window.MLoginShow+=1}else{i._show(o,n)}},n)}},_checkPage:function(){return window.TB&&window.TB.userInfo&&window.TB.userInfo.isLogin},_check:function(o,n){u.Analytics.MLcheckStar=new Date*1;var i=this;var t=n.checkTimeout||5;var a=false,l=e.later(function(){if(!a){o(i._checkPage())}l&&l.cancel()},t*1e3);if(n&&n.checkApi&&n.checkApi.indexOf(".tmall.")==-1){n.checkApi=undefined}return e.io({type:"get",url:n.checkApi?n.checkApi:"//miaoxin."+r+"/member/user_login_info2.do",success:function(e){u.Analytics.MLcheckEnd=new Date*1;e=e||{};if(e.status==1111){a=true;o(i._checkPage());return}a=true;o(e.login)},error:function(){a=true;o(i._checkPage())},timeout:t,dataType:"jsonp",charset:"utf-8",cache:false,headers:{"X-Requested-With":false}})},_show:function(n,t){u.Analytics.MLshowStar=new Date*1;window.MLoginTimer+=1;if(!!t.insert){window.MLoginTimer=0}if(window.MLoginTimer>1){return}var r,l=d,m="",s=window.location.hostname,w="";if(!!e.UA.mobile){m=window.location.href;l="//login."+a+"/member/login.jhtml?redirectURL="+encodeURIComponent(m);window.location.href=l;window.MLoginTimer=0;return false}if(t.needRedirect){var h=t.redirectUrl?t.redirectUrl:location.href.split("#")[0];l+="&full_redirect=true&tpl_redirect_url="+encodeURIComponent(h)}else{r="g_tml_callbak"+(new Date).getTime();window[r]=function(){var e=window.TB||{};c&&c.hide();e&&e.Global&&e.Global.updateLoginInfo();window.MLoginTimer=0;window.MLoginShow+=1;n&&n.apply(this,arguments);try{delete window[r]}catch(o){}};if(t["proxyURL"]){m+=t["proxyURL"]}else if(s.indexOf(".hk")>=0){m+=t["proxy"]["hk"]}else if(s.indexOf("95095.com")>=0){m+=t["proxy"]["yao"]}else if(s.indexOf("95095.daily.etao.net")>=0){m+=t["proxy"]["etao"]}else{m+=t["proxy"]["tmall"]}m+=(m.indexOf("?")>0?"&":"?")+"callback="+r;if(!f(m)&&document.domain!==i){document.domain=i}if(f(m)&&document.domain===location.hostname){m+="&nsdomain=true"}l+="&full_redirect=false&tpl_redirect_url="+encodeURIComponent(m)}if(t.sub){l+="&sub=true"}if(window.g_config&&window.g_config.moduleTimeStamp&&window.g_config.moduleTimeStamp.minilogin){l+="&t="+window.g_config.moduleTimeStamp.minilogin}w='<iframe class="j_minilogin_iframe" style="background: rgb(250, 250, 250);" width="350" scrolling="no" height="400" frameborder="no" src="'+l+'"></iframe>';if(!!t.insert){e.all(t.insert).append(w);return}c=new o({width:350,height:436,bodyContent:w,mask:true,showCat:true,zIndex:999999,align:{points:["cc","cc"]}});c.render();c.show();var g=e.version.indexOf("1.3")>=0,p=e.all(g?c.__attrVals.el:c.$el),y=g?".mui-stdmod-body":".mui-dialog-body",k=g?".mui-ext-close":".mui-dialog-close",_=p.all(".j_minilogin_iframe");_.parent(y).style("background-color","#FAFAFA");u.Analytics.MLshowEnd=new Date*1;p.all(k).on("click",function(){t.closeCallback&&t.closeCallback();window.MLoginTimer=0;c.destroy()});_.on("load",function(){u.Analytics.MLloaded=new Date*1;u.sendTrack()})},Analytics:{},sendTrack:function(){if(!window.performance||window.performance&&!window.performance.getEntriesByType){return}var e;for(var o=0,n=window.performance.getEntriesByType("resource");o<n.length;o++){if(n[o]["initiatorType"]=="iframe"&&n[o]["name"].indexOf("https://login.taobao.com/member/login.jhtml")>=0){e=n[o];break}}if(!e){return}var i=[];for(var t in e){i.push(t+"="+(t=="name"?"//login.taobao.com":e[t]))}for(var t in u.Analytics){i.push(t+"="+u.Analytics[t])}i.push("MLtype=minilogin");var a=["[uhttp://login.tmall.com/track/0.2.0/]","[r10]"].join(""),r=document.cookie.match(/_nk_\=([^\;]*); /),l=r&&r[1]||"",c="//gm.mmstat.com/ued.1.1.2?type=9&id=jstracker&v=0.02&nick="+encodeURIComponent(l)+"&msg="+a+escape(i.join("&"));(new Image).src=c}};return u},{requires:["mui/overlay/dialog","io"]});KISSY.add("mui/overlay/dialog",function(e,t){function i(t){var n=this;n.config=e.merge(i.Config,t);n.config.elCls=n.config.elCls||"";n.config.elCls+=n.config.skin?" mui-dialog-"+n.config.skin:"";if(n.config.mask){n.config.elCls+=" mui-dialog-hasmask"}i.superclass.constructor.call(this,n.config);var s=true;function o(){var t=n.get("el"),i=e.UA.ie<8?"style='height:expression(this.parentNode.clientHeight);'":"";t.append("<div class='mui-dialog-skin' "+i+"></div>"+(n.config.showCat?"<i class='mui-dialog-cat'></i>":""));s=false}n.on("afterRenderUI",function(){o()});if(n.get("initRender")){n.render()}}i.Config={prefixCls:"mui-",showCat:true,zIndex:99999,initRender:false};e.extend(i,t.Dialog);e.augment(i,{setBodyContent:function(e){var t=this;t.set("bodyContent",e);t.render()},setHeaderContent:function(e){var t=this;t.set("headerContent",e);t.render()},setFooterContent:function(e){var t=this;t.set("footerContent",e);t.render()}});if(e.version.match(/^1\.[123]/)){e.getScript(location.protocol+"//g.alicdn.com/mui/overlay/1.0.6/overlay.css")}return i},{requires:["overlay","mui/overlay/overlay.css","mui/button/btn.css","mui/button/btn-tb.css","mui/msg/msg.css"]});