/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/autocomplete-list_en",function(e){e.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use up and down arrows to select."})},"3.18.0");
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("color-base",function(e,t){var n=/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})(\ufffe)?/,r=/^#?([\da-fA-F]{1})([\da-fA-F]{1})([\da-fA-F]{1})(\ufffe)?/,i=/rgba?\(([\d]{1,3}), ?([\d]{1,3}), ?([\d]{1,3}),? ?([.\d]*)?\)/,s={HEX:"hex",RGB:"rgb",RGBA:"rgba"},o={hex:"toHex",rgb:"toRGB",rgba:"toRGBA"};e.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},REGEX_HEX:n,REGEX_HEX3:r,REGEX_RGB:i,re_RGB:i,re_hex:n,re_hex3:r,STR_HEX:"#{*}{*}{*}",STR_RGB:"rgb({*}, {*}, {*})",STR_RGBA:"rgba({*}, {*}, {*}, {*})",TYPES:s,CONVERTS:o,convert:function(t,n){var r=e.Color.CONVERTS[n.toLowerCase()],i=t;return r&&e.Color[r]&&(i=e.Color[r](t)),i},toHex:function(t){var n=e.Color._convertTo(t,"hex"),r=n.toLowerCase()==="transparent";return n.charAt(0)!=="#"&&!r&&(n="#"+n),r?n.toLowerCase():n.toUpperCase()},toRGB:function(t){var n=e.Color._convertTo(t,"rgb");return n.toLowerCase()},toRGBA:function(t){var n=e.Color._convertTo(t,"rgba");return n.toLowerCase()},toArray:function(t){var n=e.Color.findType(t).toUpperCase(),r,i,s,o;return n==="HEX"&&t.length<5&&(n="HEX3"),n.charAt(n.length-1)==="A"&&(n=n.slice(0,-1)),r=e.Color["REGEX_"+n],r&&(i=r.exec(t)||[],s=i.length,s&&(i.shift(),s--,n==="HEX3"&&(i[0]+=i[0],i[1]+=i[1],i[2]+=i[2]),o=i[s-1],o||(i[s-1]=1))),i},fromArray:function(t,n){t=t.concat();if(typeof n=="undefined")return t.join(", ");var r="{*}";n=e.Color["STR_"+n.toUpperCase()],t.length===3&&n.match(/\{\*\}/g).length===4&&t.push(1);while(n.indexOf(r)>=0&&t.length>0)n=n.replace(r,t.shift());return n},findType:function(t){if(e.Color.KEYWORDS[t])return"keyword";var n=t.indexOf("("),r;return n>0&&(r=t.substr(0,n)),r&&e.Color.TYPES[r.toUpperCase()]?e.Color.TYPES[r.toUpperCase()]:"hex"},_getAlpha:function(t){var n,r=e.Color.toArray(t);return r.length>3&&(n=r.pop()),+n||1},_keywordToHex:function(t){var n=e.Color.KEYWORDS[t];if(n)return n},_convertTo:function(t,n){if(t==="transparent")return t;var r=e.Color.findType(t),i=n,s,o,u,a;return r==="keyword"&&(t=e.Color._keywordToHex(t),r="hex"),r==="hex"&&t.length<5&&(t.charAt(0)==="#"&&(t=t.substr(1)),t="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),r===n?t:(r.charAt(r.length-1)==="a"&&(r=r.slice(0,-1)),s=n.charAt(n.length-1)==="a",s&&(n=n.slice(0,-1),o=e.Color._getAlpha(t)),a=n.charAt(0).toUpperCase()+n.substr(1).toLowerCase(),u=e.Color["_"+r+"To"+a],u||r!=="rgb"&&n!=="rgb"&&(t=e.Color["_"+r+"ToRgb"](t),r="rgb",u=e.Color["_"+r+"To"+a]),u&&(t=u(t,s)),s&&(e.Lang.isArray(t)||(t=e.Color.toArray(t)),t.push(o),t=e.Color.fromArray(t,i.toUpperCase())),t)},_hexToRgb:function(e,t){var n,r,i;return e.charAt(0)==="#"&&(e=e.substr(1)),e=parseInt(e,16),n=e>>16,r=e>>8&255,i=e&255,t?[n,r,i]:"rgb("+n+", "+r+", "+i+")"},_rgbToHex:function(t){var n=e.Color.toArray(t),r=n[2]|n[1]<<8|n[0]<<16;r=(+r).toString(16);while(r.length<6)r="0"+r;return"#"+r}}},"3.18.0",{requires:["yui-base"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances,n;for(n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0,n;for(n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY",s;return n==="auto"&&(s=t.getStyle("position"),s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0),n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"3.18.0",{requires:["base-base","node-style","color-base"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"3.18.0",{requires:["anim-base"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"3.18.0",{requires:["anim-base","node-screen"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"3.18.0",{requires:["anim-xy"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"3.18.0",{requires:["anim-base"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-node-plugin",function(e,t){var n=function(t){t=t?e.merge(t):{},t.node=t.host,n.superclass.constructor.apply(this,arguments)};n.NAME="nodefx",n.NS="fx",e.extend(n,e.Anim),e.namespace("Plugin"),e.Plugin.NodeFX=n},"3.18.0",{requires:["node-pluginhost","anim-base"]});
/*
YUI 3.18.0 (build 790466e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-scroll",function(e,t){var n=Number;e.Anim.behaviors.scroll={set:function(e,t,r,i,s,o,u){var a=e._node,f=[u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)];f[0]&&a.set("scrollLeft",f[0]),f[1]&&a.set("scrollTop",f[1])},get:function(e){var t=e._node;return[t.get("scrollLeft"),t.get("scrollTop")]}}},"3.18.0",{requires:["anim-base"]});
YUI.add("comet",function(e){function t(e){t.superclass.constructor.apply(this,arguments)}e.namespace("Comet");var n={},r="comet:ready";e.initComet=function(i,s){var o=i.replace(/https:/,"http:");return o.substr(-1)==="/"&&(o=o.substring(0,o.length-1)),n[o]||(e.publish(r),n[o]=new t,n[o].clearListeners()),s&&n[o].addListener("/meta/handshake",s),n[o].initBayeux(i,function(t){t.successful&&e.fire(r,{message:t})}),n[o]},t.NAME="Comet",t.ATTRS={uri:{value:null,setter:function(e){if(e===null)return;var t=window.location.protocol;t.indexOf("https")!==-1?e=e.replace(/http:/,"https:"):t.indexOf("http")!==-1&&(e=e.replace(/https:/,"http:"));var n=e.toLowerCase();return n.indexOf("https://")!==-1?this.set("protocol","https://"):n.indexOf("http://")!==-1&&this.set("protocol","http://"),e}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}},e.extend(t,e.Base,{_clientState:"unconnected",_advice:{},_connected:!1,_config:{backoffIncrement:1e3,maxBackoff:1e4,maxNetworkDelay:3e5,delayedSendMaxCount:10,advice:{timeout:6e4,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5e3}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:!1,_isSendingQueue:!1,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new e.AsyncQueue,_ioQueue_c2s:e.io.queue,_ioQueue_s2c:e.io.queue,_jsonp:null,_listeners:{},initializer:function(t){this.setClientState("unconnected"),e.on("beforeunload",e.bind(function(){this.getClientState()!=="unconnected"&&this.disconnect()},this),window)},config:function(t,n){e.Object.setValue(this._config,t,n)},_Queue_send:function(t){var n=this;n._batch(t);if(!n.getClientId())return;if(n._isSendingQueue)return;if(n._outgoing.length<=0)return;e.each(n._outgoing,function(e){e=n._patchMessage(e)}),n._IO_send(!0,n._outgoing),n._outgoing=[]},_nextQueueSend:function(){this._Queue_send()},_IO_send:function(e,t){var n=this;if(!n.get("uri"))return;if(e){if(n._isSendingQueue||!t)return;n._IO_Queue_Send(t)}else{if(!n.getClientId())return;if(n._isLongpollingConnect||!t)return;n._IO_Longpolling_Send(t)}},_IO_Queue_Send:function(t){var n=this;n.setTokenHeader(n._token);var r=e.merge(n.get("ioCfg"),{context:n,timeout:n._config.maxNetworkDelay,data:e.JSON.stringify(t),xdr:{credentials:!0},on:{success:function(r,i){try{var s=e.JSON.parse(i.responseText);n._handleResponse(s)}catch(o){n._handleFailure(t,"json parse error");return}},failure:function(e,r){n._handleFailure(t,"500::io failed")},start:function(){n._isSendingQueue=!0},complete:function(){n._isSendingQueue=!1,n._nextQueueSend()}}});n._ioQueue_c2s.stop(),n._ioQueue_c2s(n.get("uri"),r),n._ioQueue_c2s.start()},_IO_Jsonp_Send:function(t){var n=this;if(!n.get("uri"))return;var r=n.get("uri")+"?callback={callback}",i=encodeURIComponent(e.JSON.stringify(t));r=r+"&data="+i,n._jsonp=new e.JSONPRequest(r,{on:{success:function(e){n._handleResponse(e)},timeout:function(e){n._handleFailure(t,"408:"+n._config.subscribe.jsonpTimeout+":jsonp timeout")},failure:function(){n._handleFailure(t,"500::jsonp failed")}},timeout:n._config.subscribe.jsonpTimeout}),n._jsonp.send()},_IO_Longpolling_Send:function(t){var n=this;n.setTokenHeader(n._token);var r=e.merge(n.get("ioCfg"),{context:n,timeout:n._config.maxNetworkDelay,xdr:{credentials:!0},data:e.JSON.stringify(t),on:{success:function(r,i){try{var s=e.JSON.parse(i.responseText);n._handleResponse(s)}catch(o){n._handleFailure(t,"json parse error");return}},failure:function(e,r){n._handleFailure(t,"500::io failed")},start:function(){n._isLongpollingConnect=!0},complete:function(){n._isLongpollingConnect=!1}}});n._ioQueue_s2c.stop(),n._ioQueue_s2c(n.get("uri"),r),n._ioQueue_s2c.start()},_handleResponse:function(t){if(t===undefined||t===null)return;var n=this;e.each(t,function(e){n._updateAdvice(e.advice),e.originalURI=n._urlOrigin;var t=e.channel;switch(t){case"/meta/handshake":n._handshakeResponse(e);break;case"/meta/connect":n._connectResponse(e);break;case"/meta/disconnect":n._disconnectResponse(e);break;case"/meta/subscribe":n._subscribeResponse(e);break;case"/meta/unsubscribe":n._unsubscribeResponse(e);break;default:n._messageResponse(e)}})},_updateAdvice:function(e){e&&(this._advice=this._mixin(!1,{},this._config.advice,e))},_handshakeResponse:function(e){var t=this;if(e.successful){t.setClientState("connected"),t._clientId=e.clientId,t._advice.VIP&&t.set("uri",t.get("protocol")+t._advice.VIP+"/comet"),t._notifyListeners("/meta/handshake",e),t._Queue_send();var n=t._isDisconnected()?"none":t._advice.reconnect;switch(n){case"retry":t._resetBackoff(),t._delayedConnect();break;case"handshake":t.setClientState("unconnected"),t._resetBackoff(),t._delayedHandshake();break;case"none":t._disconnect(!1)}}else t._failHandshake(e)},_failHandshake:function(e){var t=this;t.setClientState("unconnected"),t._clientId=null,t._notifyListeners("/meta/handshake",e),t._notifyListeners("/meta/unsuccessful",e);var n=t._advice.reconnect!=="none";n?(t._increaseBackoff(),t._delayedHandshake()):t._disconnect(!1)},_delayedHandshake:function(){var e=this;this._delayedSend(function(){e._handshake()})},_subscribeResponse:function(e){if(e.successful){if(!this._subscribeChannel[e.subscription]||this._subscribeChannel[e.subscription]!==!0)this._subscribeChannel[e.subscription]=!0;e.
ext["Comet-auth-token"]&&(this._token=e.ext["Comet-auth-token"]),this._notifyListeners("/meta/subscribe",e)}else this._failSubscribe(e)},_failSubscribe:function(e){this._notifyListeners("/meta/subscribe",e),this._notifyListeners("/meta/unsuccessful",e)},_connectResponse:function(e){var t=this;if(t._isDisconnected())return;t._connected=e.successful;if(t._connected){t.setClientState("connected"),t._notifyListeners("/meta/connect",e);var n=t._isDisconnected()?"none":t._advice.reconnect;switch(n){case"retry":t._resetBackoff(),t._delayedConnect();break;case"handshake":t.setClientState("unconnected"),t._resetBackoff(),t._delayedHandshake();break;case"none":t._disconnect(!1)}}else t._failConnect(e)},_failConnect:function(e){var t=this;t._notifyListeners("/meta/connect",e),t._notifyListeners("/meta/unsuccessful",e);var n=t._isDisconnected()?"none":t._advice.reconnect;switch(n){case"retry":t._delayedConnect(),t._increaseBackoff();break;case"subscribe":t._delayedConnect(),t._increaseBackoff();break;case"handshake":t.setClientState("unconnected"),t._resetBackoff(),t._delayedHandshake();break;case"none":t._disconnect(!1)}},_delayedConnect:function(){var e=this;this._delayedSend(function(){e._connect()})},_disconnectResponse:function(e){e.successful?(this._disconnect(!1),this._notifyListeners("/meta/disconnect",e)):this._failDisconnect(e)},_failDisconnect:function(e){this._disconnect(!0),this._notifyListeners("/meta/disconnect",e),this._notifyListeners("/meta/unsuccessful",e)},_unsubscribeResponse:function(e){e.successful?(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===!0&&delete this._subscribeChannel[e.subscription],this._notifyListeners("/meta/unsubscribe",e)):this._failUnsubscribe(e)},_failUnsubscribe:function(e){this._notifyListeners("/meta/unsubscribe",e),this._notifyListeners("/meta/unsuccessful",e)},_messageResponse:function(e){e.successful===undefined?e.data?this._notifyListeners(e.channel,e):this._notifyListeners("/meta/unsuccessful",e):e.successful?this._notifyListeners("/meta/publish",e):this._failMessage(e)},_failMessage:function(e){this._notifyListeners("/meta/publish",e),this._notifyListeners("/meta/unsuccessful",e)},_delayedSend:function(e){var t=this,n=t._advice.interval+t._backoff;t._config.maxBackoff<=t._backoff?t._delayedSendCount++:t._delayedSendCount=0;if(t._delayedSendCount>t._config.delayedSendMaxCount){var r=t.get("uri");t.set("uri",t._urlOrigin);if(r===t.get("uri"))return;t._resetBackoff(),t._delayedSendCount=0}t._queue.add({fn:e,timeout:n}),t._queue.run()},_handshakeFailure:function(e,t){this._failHandshake({successful:!1,failure:!0,channel:"/meta/handshake",request:e,advice:{reconnect:"retry",interval:this._backoff},error:t||"",ext:e.ext||{},id:e.id||""})},_connectFailure:function(e,t){this._connected=!1,this._failConnect({successful:!1,failure:!0,channel:"/meta/connect",request:e,advice:{reconnect:"retry",interval:this._backoff},clientId:e.clientId||"",error:t||"",ext:e.ext||{},id:e.id||""})},_disconnectFailure:function(e,t){this._failDisconnect({successful:!1,failure:!0,channel:"/meta/disconnect",request:e,advice:{reconnect:"none",interval:0},clientId:e.clientId||"",error:t||"",ext:e.ext||{},id:e.id||""})},_subscribeFailure:function(e,t){this._failSubscribe({successful:!1,failure:!0,channel:"/meta/subscribe",request:e,advice:{reconnect:"none",interval:0},clientId:e.clientId||"",subscription:e.subscription||"",error:t||"",ext:e.ext||{},id:e.id||""})},_unsubscribeFailure:function(e,t){this._failUnsubscribe({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:e,advice:{reconnect:"none",interval:0},clientId:e.clientId||"",subscription:e.subscription||"",error:t||"",ext:e.ext||{},id:e.id||""})},_messageFailure:function(e,t){this._failMessage({successful:!1,failure:!0,channel:e.channel,request:e,advice:{reconnect:"none",interval:0},clientId:e.clientId||"",subscription:e.subscription||"",error:t||"",ext:e.ext||{},id:e.id||""})},_handleFailure:function(e,t){var n,r,i;for(i=0;i<e.length;++i){n=e[i],r=n.channel;switch(r){case"/meta/handshake":this._handshakeFailure(n,t);break;case"/meta/connect":this._connectFailure(n,t);break;case"/meta/disconnect":this._disconnectFailure(n,t);break;case"/meta/subscribe":this._subscribeFailure(n,t);break;case"/meta/unsubscribe":this._unsubscribeFailure(n,t);break;default:this._messageFailure(n,t)}}},_notifyListeners:function(e,t){this._notify(e,t),this._notify(e+"/*",t);var n=e.split("/"),r=n.length-1,i=0;for(i=r;i>0;--i){var s=n.slice(0,i).join("/")+"/*";i===r&&this._notify(s,t),this._notify(s,t)}},_notify:function(t,n){var r=this._listeners[t];r&&e.each(r,function(t){e.Lang.isFunction(t.listener)&&t.listener(n)})},_isDisconnected:function(){return this._clientState==="unconnected"},_resetBackoff:function(){this._backoff=0},_nextMessageId:function(){return++this._lastMessageId+""},_increaseBackoff:function(){this._backoff<this._config.maxBackoff&&(this._backoff+=this._config.backoffIncrement)},_createMessage:function(t,n){n=n||{};var r=(new Date).valueOf(),i=window.location.host,s=[],o=e.merge(this.get("ext").all,this.get("ext")[t],n.ext||{},{timestamp:r,host:i||""});switch(t){case"handshake":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t]));break;case"connect":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t],{clientId:this.getClientId()}));break;case"subscribe":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t],{clientId:this.getClientId(),subscription:n.channel}));break;case"unsubscribe":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t],{clientId:this.getClientId(),subscription:n.channel}));break;case"publish":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t],{clientId:this.getClientId(),channel:n.channel,data:n.data}));break;case"disconnect":s.push(e.merge({id:this._nextMessageId(),ext:o},this.get("meta")[t],{clientId:this.getClientId()}))}return s},_handshake:function(e){var t=this;if(t.getClientState()!=="unconnected"
){if(t.getClientState()==="connected"){var n={successful:!0,channel:"/meta/handshake",clientId:t._clientId,originalURI:t._urlOrigin};t._notifyListeners("/meta/handshake",n)}return}e&&e.listener&&t._addListener(e,!1),t._clientId=null,t._token=null,t.resetTokenHeader(),t._clearSubscriptions(),t._updateAdvice(t._config.advice);var r=t._createMessage("handshake",e);t._IO_send(!0,r),t.setClientState("connecting")},_connect:function(e){var t=this;if(t.getClientState()!=="connected")return;if(t._isLongpollingConnect)return;var n=t._createMessage("connect",e);t._IO_send(!1,n)},_subscribeJSONP:function(e){if(!e||!e.channel)return;if(!this.getClientId())return;if(this._subscribeChannel[e.channel]&&this._subscribeChannel[e.channel]===!0)return;e.listener&&this._addListener(e,!0);var t=this._createMessage("subscribe",e);this._IO_Jsonp_Send(t)},_unsubscribe:function(e){if(!this.getClientId())return;e&&e.channel&&this.removeListeners(e.channel);if(e&&e.channel){var t=this._createMessage("unsubscribe",e);this._Queue_send(t)}},_disconnect:function(e){var t=this;e&&(t._ioQueue_c2s.stop(),t._ioQueue_s2c.stop()),t.setClientState("unconnected"),t._clientId=null,t._resetBackoff(),t._queue.stop();if(t._outgoing.length>0){var n=t._outgoing;t._outgoing=[],t._handleFailure(n,"500::canceled after disconnect")}t._clearSubscriptions()},_patchMessage:function(e){return e.id||(e.id=this._nextMessageId()),e.clientId=this.getClientId(),e.channel==="/meta/handshake"&&delete e.clientId,e},_batch:function(){e.each(arguments,function(t){if(t&&e.Lang.isArray(t)){var n=0;for(n=0;n<t.length;++n)this._outgoing.push(t[n])}else t&&this._outgoing.push(t)},this)},_clearSubscriptions:function(){e.each(this._listeners,function(t){t&&e.each(t,function(e,t,n){e&&e.isSub&&n.splice(t)})}),this._subscribeChannel={}},_reDoSubscriptions:function(){e.each(this._subscribeChannel,function(e,t){e&&(this._subscribeChannel[t]=!1,this._subscribeJSONP({channel:t}))},this)},isDuplicatedListener:function(e,t){var n=0;for(n=0;n<t.length;++n){var r=t[n];if(r&&r.listener&&r.listener.toString()===e.toString())return!0}return!1},_addListener:function(t,n,r){t&&t.listener&&e.Lang.isFunction(t.listener)&&(this._listeners[t.channel]?(r||!this.isDuplicatedListener(t.listener,this._listeners[t.channel]))&&this._listeners[t.channel].push({listener:t.listener,isSub:n}):this._listeners[t.channel]=[{listener:t.listener,isSub:n}])},_mixin:function(e,t,n){var r,i,s=t||{};for(r=2;r<arguments.length;++r){var o=arguments[r];if(o===undefined||o===null)continue;for(i in o){var u=o[i],a=s[i];if(u===t)continue;if(u===undefined)continue;e&&typeof u=="object"&&u!==null?u instanceof Array?s[i]=this._mixin(e,a instanceof Array?a:[],u):s[i]=this._mixin(e,{},u):s[i]=u}}return s},destructor:function(){},getClientState:function(){return this._clientState},setClientState:function(e){this._clientState=e},getClientId:function(){return this._clientId},initBayeux:function(e,t){this._urlOrigin=e,this.set("uri",e),this._handshake({channel:"/meta/handshake",listener:t})},subscribe:function(e,t){this._subscribeJSONP({channel:e,listener:t})},unsubscribe:function(e){this._unsubscribe({channel:e})},disconnect:function(e){var t=this;e&&t._addListener({channel:"/meta/disconnect",listener:e},!1);if(t.getClientState()==="unconnected")return;if(!t.getClientId())return;var n=t._createMessage("disconnect");t._Queue_send(n)},publishMsg:function(e,t){if(e&&t){var n={channel:e,data:t},r=this._createMessage("publish",n);this._Queue_send(r)}},clearListeners:function(){this._listeners={}},addListener:function(t,n,r){r=r||!1;if(!n&&e.Lang.isFunction(n))return;this._addListener({channel:t,listener:n},!1,r)},removeListeners:function(e){this._listeners[e]&&delete this._listeners[e]},setUserInfo:function(e,t){if(e&&t){var n=this.get("ext");n.subscribe["Comet-subscriber-auth-info"]={uid:e,user_type:"yahoo",user_cred:t}}},setUserInfoWithCookie:function(e,t){if(e){var n=this.get("ext");n.subscribe["Comet-subscriber-auth-info"]={uid:e,user_type:"yahoo",user_cred:"Any Value"}}},setTokenHeader:function(e){if(e){var t=this.get("ioCfg");t.headers.Authorization="Basic token="+e}},resetTokenHeader:function(){var e=this.get("ioCfg");e.headers.Authorization="Basic token="},setYcaHeader:function(e,t){if(e){var n=this.get("ioCfg");n.headers["Yahoo-App-Auth"]=e}if(t){var r=this.get("ext");r.publish["Comet-opaque-id"]=t}}}),e.Comet=t},"@VERSION@",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});
YUI.add("af-comet",function(e,t){"use strict";function j(e){var t,n=e.length,r=0;for(t=0;t<n;t++)r+=e[t];return Math.round(r/n)}function F(e){var t=Math.floor(e.length/2);return e.length%2?e[t]:Math.round((e[t-1]+e[t])/2)}function I(e){var r,i,s=a?a.trackLatency:u.trackLatency;if(!s||l||!c)return;e=parseInt(e,10);if(typeof e!="number")return;f.push(e),i=parseInt(a&&a.latencySampleSize,10)||u.latencySampleSize,f.length>=i&&(l=!0,f.sort(function(e,t){return e-t}),r=F(f),c.perf(t,{code:"onepushLatency",time:r,clientId:n[M]&&n[M].getClientId(),sampleSize:f.length,min:f[0],max:f[f.length-1],median:r,mean:j(f)}),f=[])}function q(e){return a.publicCometHost===a.privateCometHost?M:e.indexOf("*")>0?O:M}function R(t,n,i){var s=r[t],o=e.merge({clientId:s.clientId},i);p.each(s.proxies,function(t){t.fire(n,o)})}function U(e,t){var n=r[t];n.totalTries=n.totalTries?n.totalTries+1:1,n.tries=n.tries?n.tries+1:1,n.tries<=a.subscribeMaxTries&&n.totalTries<=a.subscribeMaxTotalTries&&e.subscribe(t)}function z(e){p.each(r,function(r,i){q(i)===e&&(r.state=k,r.tries=0,r.clientId="",U(n[e],i))})}function W(e){var t,s,o,u=[];for(t=0,s=i.length;t<s;t++)o=i[t],q(o)===e?r[o].state!==k&&r[o].state!==L&&(r[o].state=k,U(n[e],o)):u.push(o);i=u}function X(e){var i=n[e],s={};i.addListener(N,function(r){r.successful&&(s[e]?c&&c.info(t,{code:"rehandshake",type:e},y):s[e]=!0,z(e),W(e))}),i.addListener(x,function(t){var n=t.subscription,s=r[n],o;if(!t.successful){if(E.test(t.error))return;s&&(s.state=A),o=S.test(t.error);if(!o||s.tries>=a.subscribeMaxTries||s.totalTries>=a.subscribeMaxTotalTries){R(n,B,{code:"subscribe",message:t.error||"",clientId:t.clientId});return}U(i,n);return}s||(s=r[n]={state:C,proxies:{}}),s.state=L,s.clientId=t.clientId,R(n,D,{clientId:t.clientId,tries:s.tries}),i.addListener(n,function(t){var r=d.find(t),i;i=r&&r.parseFn(t),i&&R(n,H,{clientId:t.clientId,messages:i})})}),i.addListener(T,function(t){var n=t.subscription,i=r[n];if(!t.successful){R(n,B,{code:"unsubscribe",message:t.error||"",clientId:t.clientId});return}i&&(i.tries=0,i.state=A,R(n,P,{clientId:t.clientId}),delete r[n])})}function V(r){if(n[r])return;if(a.shutdown){c&&h.urlParseBoolean(a.trackShutdown)&&c.info(t,{code:"shutdown"},y);return}if(!v(e.initComet)){c&&c.error(t,{},{code:"nocomet"},y);return}var i=n[r]=e.initComet(a[r+"CometHost"]);i.config(["subscribe","jsonpTimeout"],a.subscribeTimeout),X(r),i.getClientState()===_&&W(r),c&&h.urlParseBoolean(a.trackInitComet)&&c.info(t,{code:r+"Comet"},y)}function $(t){var s=r[t],o=q(t),u=n[o];u&&s.state!==L&&s.state!==k&&(u.getClientState()===_?(s.tries=0,s.state=k,U(u,t)):e.Array.indexOf(i,t)<0&&i.push(t))}function J(e){this.id=++s,this.channel=e}var n={},r={},i=[],s=0,o="http://comet.yahoo.com/comet",u={publicCometHost:o,privateCometHost:o,shutdown:!1,subscribeMaxTries:1,subscribeTimeout:5e3,trackInitComet:!1,trackShutdown:!1,trackLatency:!0,latencySampleSize:50},a,f=[],l=!1,c=e.Af.Beacon,h=e.Af.Utils,p=e.Object,d,v=e.Lang.isFunction,m=e.Lang.isString,g=function(e){return e instanceof RegExp},y={once:!0},b=/^\d+$/,w=/^(\d+)\-(\d+)\-(\d+) (\d+):(\d+):(\d+)$/,E=/^408:\d+:jsonp timeout$/,S=/^500::jsonp failed$/,x="/meta/subscribe",T="/meta/unsubscribe",N="/meta/handshake",C=null,k="opening",L="open",A="closed",O="private",M="public",_="connected",D="open",P="close",H="message",B="error";(function(){function n(e){var t=window.location.protocol;return e&&(t.indexOf("https")===0?e=e.replace(/http:/,"https:"):e=e.replace(/https:/,"http:")),e}var r=e.Af.Config,i=r.get("context")||{},s=i.onepush_publicCometHost,o=i.onepush_privateCometHost;a=e.merge(u,r.get("onepush"),r.get("comet")),a.subscribeMaxTotalTries=a.subscribeMaxTotalTries||a.subscribeMaxTries*2,s&&(a.publicCometHost=s),o&&(a.privateCometHost=o),a.publicCometHost=n(a.publicCometHost),a.privateCometHost=n(a.privateCometHost)})(),d={parsers:[],parseLastUpdated:function(e){if(!e)return C;var t,n;return b.test(e)?(t=parseInt(e,10),n="D"+t,n.length<14&&(t*=1e3),t):(t=e.match(w),t?(t=Array.prototype.slice.call(t),t.shift(),t[1]=parseInt(t[1],10)-1,(new Date(t[0],t[1],t[2],t[3],t[4],t[5])).getTime()):C)},add:function(e,t){return e&&m(e)&&(e=new RegExp(e)),g(e)&&v(t)?(this.parsers.unshift({regex:e,parseFn:t}),!0):!1},find:function(e){var t,n,r=this.parsers.length;if(e)for(n=0;n<r;n++){t=this.parsers[n];if(t.regex&&t.regex.test(e.channel))return t}return C},addDefaults:function(){this.add(/^\/[\/\.\w\d]+$/,function(n){return!n||!n.data?C:e.Lang.isArray(n.data)?n:[n]}),this.add(/^\/\w*\/?sports\/games\/[\w\d\.]+$/,function(n){var r,i;try{r=e.JSON.parse(n.data)}catch(s){return C}return!r||n.channel!==r.chn?C:(i=[],e.Array.each(r.updates,function(t){var n=d.parseLastUpdated(t.lastUpdatedTs),r=d.parseLastUpdated(t.lastUpdated),s=(new Date).getTime(),o={};t.update&&t.update.length&&(e.Array.each(t.update,function(e){e._op==="up"&&h.objectSetValue(o,e.key,e.value)}),i.push({data:o,seq:t.seq,time:t.time,lastUpdated:r,lastUpdatedTs:n}));try{n?I(s-n):r&&I(s-r)}catch(u){}}),i)})}},d.addDefaults(),J.prototype={close:function(){var e=this,t=e.channel,i=r[t];e.fire(P),e.detachAll(),i&&(delete i.proxies[e.id],p.size(i.proxies)===0&&(i.state===L||i.state===k)&&n[q(t)].unsubscribe(t))}},e.augment(J,e.EventTarget,!0,C,{emitFacade:!0}),e.namespace("Af").CometChannelProxy=J,e.namespace("Af").Comet={addParser:function(e,t){return d.add(e,t)},open:function(e){if(!e)return C;var t;V(q(e)),r[e]=r[e]||{state:C,proxies:{}},t=new J(e),r[e].proxies[t.id]=t;switch(r[e].state){case L:window.setTimeout(function(){t.fire(D,{clientId:r[e].clientId})},0);break;case k:break;default:$(e)}return t},parseLastUpdated:d.parseLastUpdated}},"@VERSION@",{requires:["af-beacon","af-config","comet","event-custom-base","json-parse"]});
YUI.add("af-pipe",function(e,t){"use strict";function k(){this._items=[]}function L(){this._item=null}function A(r){var i=this;i._host=r.host,i._cfg=e.merge(p,n.get("pipe")),e.stamp(i),i._channel=r.pipe&&r.pipe.channel||i._host&&(i._host.pipeChannel||i._host.get("pipeChannel")),i._dataAdapterFn=r.pipe&&r.pipe.dataAdapterFn||i._host&&(i._host.pipeDataAdapterFn||i._host.get("pipeDataAdapterFn")),i._meta={channel:i._channel},i._publishEvents(),e.Af.Beacon&&i.on([T,x],function(n){var r=i._cfg.beacon_types;r[n.type]&&e.Af.Beacon.error(t,i._meta,e.merge({code:n.type},n.pipe))})}var n=e.Af.Config,r=e.Lang,i=e.Array,s=e.Af.Utils,o=n.isFeatureOn("pipedebug"),u=r.isFunction,a=r.isNumber,f=r.isObject,l=r.isValue,c="lastUpdated",h="noseq",p={beacon_types:{error:!0,idle:!0},msg_maxidle:3e5,msg_throttle:2e3,seq_algo:c},d={},v="host-missing-seq",m="invalid-seq",g="open-failed",y="close-failed",b="ts-outoforder",w=null,E=!0,S="close",x="error",T="idle",N="open",C="message";d[h]=k,k.prototype={empty:function(){return!this._items.length},pop:function(e,t){var n=this._items;return this._items=[],t&&t(w,n)},push:function(e,t){return this._items.push(e),t&&t(w)}},d[c]=L,L.prototype={empty:function(){return!this._item},pop:function(e,t){var n=this,r=n._item;return!r||!e?t&&t(w,w):(n._item=w,e.lastUpdatedTs&&r.lastUpdatedTs&&r.lastUpdatedTs>=e.lastUpdatedTs?t&&t(w,[r]):e.lastUpdated&&r.lastUpdated&&r.lastUpdated>=e.lastUpdated?t&&t(w,[r]):t&&t(w,w))},push:function(e,t){var n,r,i=this;return e?i._item?(e.lastUpdatedTs&&i._item.lastUpdatedTs?(n=i._item.lastUpdatedTs,r=e.lastUpdatedTs):e.lastUpdated&&i._item.lastUpdated&&(n=i._item.lastUpdated,r=e.lastUpdated),r?n>r?t&&t({code:b,message:n+">"+r}):(n===r?i._item=e:n<r&&(i._item=s.objectMerge(i._item,e)),t&&t(w)):t&&t({code:m,message:"invalid msg. algo=lastUpdated"})):(i._item=e,t&&t(w)):t&&t(w)}},A.addMessageParser=function(t,n){e.Af.Comet.addParser(t,n)},A.NS="pipe",A.prototype={open:function(t){t=e.merge({delay:0},t);var n=Math.max(0,t.delay-3e4),r=e.Lang.now(),i,s=this;n>0?(i=r+n,s._delayTimer&&i<s._delayTimer.when&&(s._delayTimer.cancel(),s._delayTimer=w),s._delayTimer||(s._delayTimer=e.later(n,s,s._open,[t]),s._delayTimer.when=i)):s._open(t)},close:function(){var e=this;e._delayTimer&&(e._delayTimer.cancel(),e._delayTimer=w),e._idleTimer&&(e._idleTimer.cancel(),e._idleTimer=w),e._io&&(e._io.close(),e._io=w)},config:function(t){this._cfg=e.merge(p,n.get("pipe"),t)},destroy:function(){this.close()},_getSeqId:function(){var t=this,n=t._host,r,i=e.Af.Comet.parseLastUpdated;if(t._cfg.seq_algo===c){r={lastUpdatedTs:i(t.lastUpdatedTs||n&&(n.lastUpdatedTs||n.get("lastUpdatedTs"))),lastUpdated:i(t.lastUpdated||n&&(n.lastUpdated||n.get("lastUpdated")))};if(a(r.lastUpdatedTs)||a(r.lastUpdated))return r}return w},_setIdleTimer:function(){var t=this;t._idleTimer&&t._idleTimer.cancel(),t._idleTimer=e.later(t._cfg.msg_maxidle,w,function(){t._fireEvent(T,{idleTime:t._cfg.msg_maxidle})})},_open:function(){var t=this,n=t._cfg.seq_algo;if(n!==h&&t._getSeqId()===w){t._fireEvent(x,{code:v,message:"algo="+n});return}t._delayTimer&&(t._delayTimer.cancel(),t._delayTimer=w),t._io||(t._io=e.Af.Comet.open(t._channel),t._io.on("open",function(n){t._meta.clientId=n.clientId,t._fireEvent(N)}),t._io.on("close",function(){t._msgQ=w,t._fireEvent(S)}),t._io.on("message",t._onMessage,t),t._io.on("error",t._onError,t))},_onError:function(e){e.code==="subscribe"?this._fireEvent(x,{code:g,message:e.message,clientId:e.clientId}):e.code==="unsubscribe"&&this._fireEvent(x,{code:y,message:e.message,clientId:e.clientId})},_onMessage:function(e){var t=this,n;t._msgQ||(n=d[t._cfg.seq_algo]||d[h],t._msgQ=new n),t.throttled_pop=t.throttled_pop||s.throttle(function(){if(!t._msgQ||t._msgQ.empty())return;t._msgQ.pop(t._getSeqId(),function(e,n){if(e)return;if(!n||!n.length)return;var r={},o,u;i.each(n,function(e){r=s.objectMerge(r,e.data),o=e.lastUpdatedTs,u=e.lastUpdated}),l(o)&&(r.lastUpdatedTs=o),l(u)&&(r.lastUpdated=u),t._fireEvent(C,{data:r})})},t._cfg.msg_throttle),i.each(e.messages,function(n){if(!n)return;t._setIdleTimer(),t._msgQ&&t._msgQ.push({lastUpdatedTs:n.lastUpdatedTs,lastUpdated:n.lastUpdated,data:n.data},function(e){e?t._fireEvent(x,e):t.throttled_pop()})})},_fireEvent:function(e,t){this.fire(e,{pipe:t||{}}),o&&console&&console.log&&console.log("pipe event:",this._meta,e,t||"")},_publishEvents:function(){var e=this;e.publish(S,{emitFacade:E}),e.publish(x,{defaultFn:e._defaultErrFn,emitFacade:E}),e.publish(T,{defaultFn:e._defaultIdleFn,emitFacade:E}),e.publish(N,{emitFacade:E}),e.publish(C,{defaultFn:e._defaultMessageFn,emitFacade:E})},_defaultErrFn:function(e){},_defaultIdleFn:function(){this.close()},_defaultMessageFn:function(t){var n=this,r={},i=n._host,o=n._dataAdapterFn,a=t.pipe.data;if(!a)return;i&&u(i.setAttrs)?(e.Object.each(a,function(e,t){var n=i.get(t);f(n)?r[t]=s.objectMerge(n,e):r[t]=e}),o&&(r=o(r,i)),i.setAttrs(r)):i||(a.lastUpdatedTs&&(n.lastUpdatedTs=a.lastUpdatedTs),a.lastUpdated&&(n.lastUpdated=a.lastUpdated))}},e.augment(A,e.EventTarget,E,null,{emitFacade:E}),e.namespace("Af").Pipe=A},"@VERSION@",{requires:["af-beacon","af-comet","af-config","af-utils","event-custom-base"]});
YUI.add("stencil-fx-collapse",function(e){"use strict";var t="Collapse-opened",n="Collapse",r="FastTrans",i="scrollHeight",s="height",o="px",u="offsetWidth",a="offsetHeight",f="0px",l;l=function(e){l.superclass.constructor.call(this,e),this.host=e.host},e.extend(l,e.Stencil.BaseFx),l.NS="collapse",l.prototype.show=function(n){return e.Stencil.getNodeList(n).each(function(e){e.get(a)<e.get(i)&&this.transition(e,function(e){var n=e.get(i)+o;e.get(a)===0&&e.setStyle(s,f).get(u),e.addClass(r).addClass(t).setStyle(s,n)})},this),this},l.prototype.hide=function(a){return e.Stencil.getNodeList(a).each(function(e){e.hasClass(t)&&this.transition(e,function(e){var a=e.get(i)+o;e.removeClass(n).setStyle(s,a).get(u),e.addClass(r).addClass(n).removeClass(t).setStyle(s,f)})},this),this},l.prototype.toggle=function(e){e.each(function(e){e.hasClass(t)?this.hide(e):this.show(e)},this)},e.Stencil.Hosts.Fx.plug(l)},"@VERSION@",{requires:["stencil-fx","node-style"]});
