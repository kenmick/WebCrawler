/*(c)2015 sovrn Holdings, Inc. All Rights Reserved 1447194062642*/
window.sovrn=window.sovrn||{};var lwp_ad_zoneid=null,LJT_executeCB=function(){return sovrn.ads.doPassback()};sovrn.config=sovrn.config||{},sovrn.config.ads=sovrn.config.ads||{instances:{},current_tid:""},sovrn.config.ads.globals=sovrn.config.ads.globals||{tids:[],lgq:[],lg_fired:[],beacon_fired:!1,ie_cleanup_flag:!0,dv:{loc:""},tag_regex:/^(https?:)?\/\/.*\.lijit\.(com|dev)(:\d+)?(\/\/)?(\/www)?(\/delivery)?\/(fp|sync)/i,origin_regex:/.*\.lijit\.(com|dev).*$/i,fprint:""},sovrn.ads={ad_url_regxs:[{dmn:"?(apr|ap|www)?\\.lijit\\.(com|dev)",pat:'.*(\\?|&)(loc)=([^"&;, ]+)'},{dmn:"?googleusercontent\\.com",pat:'.*?u=([^"&;, ]+)'},{dmn:"webcache.googleusercontent.com/search",pat:'\\?q=cache:[^:]+:([^"&;, \\+]+)'},{dmn:"?doubleclick.*?",pat:'(url|admu|click|dc_ref)=([^"&;, ]+)'},{dmn:"?yieldmanager\\.com",pat:".*?==,,([^,]+)"},{dmn:"?yieldmanager\\.com",pat:'.*?pub_url=(\\$)?([^"&;, ]+)'},{dmn:"?openx.*",pat:'(\\?|&)loc=([^"&;, ]+)'},{dmn:"?admeld.com.*",pat:'?url=([^"&;, ]+)'},{dmn:"?adnxs.com.*",pat:'?referrer=([^"&;, ]+)'},{dmn:"?ro2\\.biz.*",pat:'?rf=([^"&;, ]+)'},{dmn:"?ads.micklemedia\\.com",pat:'.*?&r=([^"&;, ]+)'},{dmn:"?c\\.lqw\\.me.*?",pat:'"url":"([^"& ]+)'},{dmn:"?mb\\.zam\\.com",pat:'.*?tr=([^"&;, ]+)'},{dmn:"?rubiconproject\\.com",pat:'.*?rf=([^"&;, ]+)'},{dmn:"?moocowads\\.com",pat:'.*?url=([^"&;, ]+)'},{dmn:"?pubmatic\\.com",pat:'.*?(\\?|&)(refurl|kadpageurl)=([^"&;, ]+)'},{dmn:"?tagcade\\.com",pat:'.*?(\\?|&)src=([^"&;, ]+)'},{dmn:"?burstdirectads\\.com",pat:'.*?(\\?|&)(pub_url|src)=([^"&;, ]+)'},{dmn:"?localpages\\.com",pat:'.*?(\\?|&)(pageUrl)=([^"&;, ]+)'},{dmn:"?888media\\.net",pat:'.*?(\\?|&)(page_address|uadr)=([^"&;, ]+)'}],http_rgx:"^http(s)?:\\/\\/.*",other_url_regxs:[{dmn:"",pat:"^{(.*)}$"},{dmn:"",pat:'#\\(parent_location\\)\\[([^\\]"&;, ]+)'}],appendCSS:function(){var a,b,c,d,e,f,g,h,i,j;if(a=this.getConfig(),b=a.css_class,i=this.dbgEnabled(),document.getElementById("css_"+b))return!1;f=i?"border: solid #F2CB14 4px;":"",g=i?'.sovrn_ad_unit:after{content:"";position:absolute;top:0;bottom:0;left:0;right:0;opacity:0.3;border:solid #F2CB14 5px;}':"",j=i?".sovrn_div_overlay{font-size:12px;font-family:Sans-Serif;text-align:right;position:absolute;right:0;bottom:0;opacity:0.6;background-color:#F2CB14;z-index:999999}":"",h=".sovrn_banner_ins{display:none;border:none;margin:0;padding:0;position:relative;visibility:visible;text-decoration:none;background-color:transparent;}";var k="";try{document.body&&(k=this.isInIframe()&&document.body.clientHeight===a.zone.h&&document.body.clientWidth===a.zone.w?"body{margin: 0 !important; padding: 0 !important;}":"")}catch(l){this.dbg(l)}return c=k+"."+b+"{display:inline-block !important;visibility: visible !important;opacity:1 !important;vertical-align:top;position:relative;width:"+a.zone.w+"px !important;height:"+a.zone.h+"px !important;z-index:999999 !important;"+f+" overflow:hidden}"+g+h+j,d=document.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("id","css_"+b),d.styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c)),e=document.head||document.body,e.appendChild(d),!0},asyncLevelUp:function(a){var b,c,d=parent.window;c=d.sovrn,b=this.getConfig(a),a=a||b.tid;try{return c=c||sovrn,c.config=c.config||sovrn.config,c.config.ads=c.config.ads||sovrn.config.ads,"undefined"==typeof c.config.ads.instances[a]&&(c.config.ads.instances[a]=b),c.config.ct=c.config.ct||sovrn.config.ct,"undefined"==typeof c.config.ct.instances[a]&&sovrn.ct.getConfig&&(c.config.ct.instances[a]=sovrn.ct.getConfig(a)),d.LJT_Ads=c.ads=c.ads||sovrn.ads,c.ct=c.containerTag=c.containerTag||sovrn.containerTag,this.log("Async Level UP ("+b.zone_id+" / "+a+")"),!0}catch(e){return this.dbg(e),!1}},atf:function(a){var b,c,d,e,f;if(b=this,b.isAsync())return b.getAsyncConfig("atf")||!1;try{a=a||b.getConfig().ad_unit_id,d=document.getElementById(a),d||b.reportError("ATF: Elem ID "+a+" not found",new Error),e=d.getClientRects()[0],f=self.document.documentElement,c=e.right>0&&e.left<f.clientWidth&&e.top+e.height/2<=f.clientHeight&&e.top>=0}catch(g){c=!1}return c+""},buildQS:function(a,b){var c,d,e,f;c=[],e=encodeURIComponent,f=b?"&amp;":"&";for(d in a)a.hasOwnProperty(d)&&""!==d&&""!==a[d]&&c.push(e(d)+"="+e(a[d]));return c.join(f)},callAdServer:function(){var a,b,c,d,e,f,g;if(a=this,b=a.getConfig(),b.called_ad_server)return a.log("DUPLICATE AD DELIVERY CALL ABORTED ("+b.zone_id+" / "+b.tid+")"),!1;b.called_ad_server=!0,c=document.createElement("div"),f={id:b.ad_unit_id,"data-tid":b.tid,"data-zid":b.zone_id};for(g in f)f.hasOwnProperty(g)&&c.setAttribute(g,f[g]);return a.isAsync()?(c.setAttribute("style","display:none"),a.docWrite(c.outerHTML)):(c.setAttribute("class",b.css_class+" sovrn_ad_unit"),a.docWrite(c.outerHTML.replace(/<\/div>/i,""))),d=this.createScript(a.build_cfg.adserver_url+"?"+a.getASParams()+a.getMoreParams()),e=a.isAsync()?"":"</div>",a.docWrite(d.outerHTML+e),a.log("*addelivery ("+b.zone_id+" / "+b.tid+")"),!0},chainCleanup:function(){var a,b,c,d,e,f,g,h;if(h=this.isOldIE()&&!this.isAsync(),h&&!sovrn.config.ads.globals.ie_cleanup_flag)return!1;for(sovrn.config.ads.globals.ie_cleanup_flag=!1,d=this.getConfig(),g=h?sovrn.config.ads.globals.tids.length:1,e=0;g>e;e++)f=h?sovrn.config.ads.globals.tids[e]:d.tid,a=document.querySelectorAll("ins.sovrn_banner_ins._"+f),0!==a.length?(b=a[a.length-1],b.style.display="block",c=this.getContainer(a[0],f),b.parentNode!==c&&c.appendChild(b),this.log("Chain Cleanup ("+f+")")):this.reportError("Could not find ins tags for tid: "+f,new Error);return this.unhideElem(b,d.zone.w,d.zone.h),this.insCleanup(b),!0},chainLG:function(a){var b,c,d,e,f;a||this.chainCleanup(),b=this;try{for("undefined"!=typeof Array.prototype.filter&&(sovrn.config.ads.globals.lgq=sovrn.config.ads.globals.lgq.filter(function(a,b,c){return sovrn.ads.utils.arrayIndexOf(c,a)>=b})),f=0;f<sovrn.config.ads.globals.lgq.length;f++){d=sovrn.config.ads.globals.lgq[f],c=b.getConfig(d),a&&(this.log("LDE ("+d+")"),c.chain.data.lde="1"),e="http://"+b.getPod(d)+b.build_cfg.lg_suffix+"?"+b.buildQS(c.chain.data);try{"1"!==sessionStorage.getItem("lg_"+d)&&((new Image).src=e,sovrn.config.ads.globals.lgq.shift(),sessionStorage.setItem("lg_"+d,"1"),sovrn.config.ads.globals.lg_fired.push(d),b.log("*lg ("+c.zone_id+" / "+d+" / "+c.chain.data.bannerid+" / "+c.chain.data.campaignid+")"),c.chain.data={})}catch(g){-1===this.utils.arrayIndexOf(sovrn.config.ads.globals.lg_fired,d)&&((new Image).src=e,sovrn.config.ads.globals.lgq.shift(),sovrn.config.ads.globals.lg_fired.push(d),b.log("*lg2 ("+c.zone_id+" / "+d+" / "+c.chain.data.bannerid+")"),c.chain.data={})}}a||b.finale()}catch(h){this.reportError("Error Firing LG",h)}},createiFrame:function(a,b,c){var d,e,f,g,h,i;d=document.createElement("iframe"),e=d.style,h={id:a,margin:"0",padding:"0",frameborder:"0",width:b+"",height:c+"",scrolling:"no",src:"about:blank"},i={margin:"0px",padding:"0px",border:"0px none",width:b+"px",height:c+"px",overflow:"hidden"};for(f in h)h.hasOwnProperty(f)&&d.setAttribute(f,h[f]);for(g in i)if(i.hasOwnProperty(g))try{e[g]=i[g]}catch(j){}return d},createScript:function(a){var b;return b=document.createElement("script"),b.type="text/javascript",b.src=a,b},dbg:function(a){var b;return"undefined"==typeof console?!1:(this.dbgEnabled()&&(b=a&&a.hasOwnProperty("stack")?a.stack:"",console.warn("[SQUELCHED ERROR]: "+a.message+"\n"+b)),!0)},dbgEnabled:function(){var a;try{a=localStorage.getItem("debug")}catch(b){a=(document.cookie.match(/(^|; )debug=([^;]*)/)||0)[2]}return 1==a},debug:function(a){a=parseInt(a,10);try{localStorage.setItem("debug",a)}catch(b){document.cookie="debug="+a+"; expires=Tue, 19 Jan 2038 00:00:00 GMT; path=/;"}return this.dbgEnabled()},directOnPage:function(){var a;return a=this.getFrameDepth(),a>1?!1:this.isAsync()?this.inFriendlyIframe():0===a},docWrite:function(a){try{document.writeln(a)}catch(b){this.reportError("docWrite Error",b)}},doFixBeacons:function(a){var b,c;if(a=a||document.body,b=a.childNodes,sovrn.ads.isTracker(a)&&(a.style.display="none",a.setAttribute("x-beacon","1")),a.hasChildNodes())for(c=0;c<b.length;c++)sovrn.ads.doFixBeacons(b[c])},doNotTrack:function(a,b){return a=a||navigator,b=b||window,"yes"===a.doNotTrack||"1"===a.doNotTrack||"1"===a.msDoNotTrack||"1"===b.doNotTrack},doPassback:function(a){"use strict";var b,c,d,e,f,g,h,i,j="";try{if(sovrn.config.ads.globals.lgq=sovrn.config.ads.globals.lgq||[],c=this.getConfig(),h=c.tid,"object"!=typeof c)throw new Error("Failed to find chain config");if(this.lgFired(h))return this.log("Passback Aborted; lg already fired; ("+c.zone_id+" / "+h+")"),!1;if(b=c.chain,b.index>0&&document.writeln("</ins>"),e=b.index++,g=b.ads[e],i=0===e?"Start Chain":"Passback",this.log(i+" ("+c.zone_id+" / "+h+")"),1===b.ads.length&&document.write("\n<!-- [sovrn] No Ads Returned From Server, Including a Passback ("+h+")-->\n"),e>=b.ads.length)return document.write("\n<!-- [sovrn] All Ads Exhausted, Including Default Ad;  ("+h+") -->\n"),this.reportError("Chain Pointer Exception",new Error),!1;b.data=JSON.parse(JSON.stringify(g.data)),b.data.tid=h,b.data.zoneid=c.zone_id,d={cids:g.data.campaignid,bids:g.data.bannerid,tss:new Date-b.start_time};for(f in d)d.hasOwnProperty(f)&&(b.history[f].push(d[f]),b.data[f]=b.history[f].join(","));return 232===g.campaignid&&(sovrn.config.ads.globals.lgq.push(h),this.chainLG()),a||document.writeln("<!-- [sovrn] Banner ("+c.zone_id+" / "+h+" / "+g.data.bannerid+" / "+g.data.campaignid+") -->"),document.writeln('<ins class="sovrn_banner_ins _'+h+'" id="'+this.getChainLinkID(g,h)+'">'),this.docWrite(decodeURIComponent(g.html)),this.log("Rendered Ad ("+c.zone_id+" / "+h+" / "+g.data.bannerid+" / "+g.data.campaignid+")"),b.banner_id=parseInt(g.data.bannerid,10),b.campaign_id=parseInt(g.data.campaignid,10),232!==g.campaignid&&0===e&&(sovrn.config.ads.globals.lgq.push(h),j=this.isOldIE()||b.pbi?'<script src="'+this.build_cfg.adserver_base+'/www/delivery/lg.js" defer="defer" type="text/javascript"></script>':'<script type="text/javascript">sovrn.ads.chainLG();</script>',document.writeln(j)),c.chain_finished||(c.chain_finished=!0,document.writeln("</ins>")),this.setDataAttribs(g,b,h),!0}catch(k){return this.reportError("Failed to Serve Chain Ad",k),b.data=b.data||{},b.data.campaignid=0,b.data.bannerid=0,b.data.tid=h,sovrn.config.ads.globals.lgq.push(h),this.chainLG(),!1}},extractLoc:function(a){var b,c,d,e,f,g,h,i,j,k,l="";if(!a)return"";i=/^http(s)?%/i,j=decodeURIComponent,k=[this.ad_url_regxs,this.other_url_regxs];try{try{for(b=["/^http(s)?://.*?adnxs.com/bounce.*referrer.*/"],e=0;e<b.length;e++)if(new RegExp(b[e]).test(a)){try{a=j(a)}catch(m){this.dbg(m)}break}}catch(n){this.dbg(n)}for(;i.test(a);)try{a=j(a)}catch(m){this.dbg(m)}for(d=0;d<k.length;d++)for(e=0;e<k[d].length;e++)if(h=k[d][e].dmn?this.http_rgx:"",c=new RegExp(h+k[d][e].dmn+k[d][e].pat,"i"),f=c.exec(a),f&&f.length>=1){l=j(f[f.length-1]);break}}catch(o){this.dbg(o)}return g=this.extractLoc(l),this.urlCheck(g)?g:a},finale:function(){var a,b;if(a=this.getConfig(),this.log("Finale ("+a.zone_id+" / "+a.tid+")"),this.sendBeacon(),a.chain.pbi||this.fireContainerTag(),this.fixBeacons(),this.dbgEnabled())if(!this.isAsync()&&this.isOldIE())for(b=0;b<sovrn.config.ads.globals.tids.length;b++)this.showOverlay(sovrn.config.ads.globals.tids[b]);else this.showOverlay();a.finale_fired=!0,this.inFriendlyIframe()&&this.isAsync()&&document.close(),this.asyncLevelUp(),this.log("EOL ("+a.zone_id+" / "+a.tid+")")},fireContainerTag:function(){var a;a=this.getConfig(),sovrn.containerTag.init(a.tid,1,a.zone_id),this.log("*container tag v2 ("+a.zone_id+" / "+a.tid+")")},fixBeacons:function(){var a;if(!this.isInIframe())return!1;if(a=this.getBrowserEngine(),"cr"===a||"sf"===a)try{self.addEventListener("load",function(){self.removeEventListener("load",arguments.callee,!1),sovrn.ads.doFixBeacons()},!1)}catch(b){this.dbg(b)}else sovrn.ads.doFixBeacons();return!0},fprint:function(a){var b=sovrn.config.ads.globals.fprint||"",c=navigator,d=window,e=document,f=this.utils.hasFont;if(b)return b;if(this.doNotTrack())return"DNT";try{b=(new Date).getTimezoneOffset()+c.platform+c.appCodeName+c.appName+c.language+c.javaEnabled()+!!c.cookieEnabled+c.oscpu+c.product+screen.colorDepth+function(){var a="Disabled";try{a=!!d.sessionStorage+!!d.localStorage}catch(b){}return a}()+!!d.Worker+!!d.applicationCache+!!e.getItems+!!d.WebGLRenderingContext+!!e.createElement("canvas").getContext+!!e.createElement("video").canPlayType+("geolocation"in c)+("Notification"in d)+("visibilityState"in e)+("onLine"in c)+("postMessage"in d)+("Worker"in d)+("WebSocket"in d)+("MessageChannel"in d)+("TouchEvent"in d)+("BatteryManager"in d)+("querySelector"in e)+("vibrate"in c)+("fullScreen"in d)+("ondevicelight"in d)+!(!d.history||!history.pushState)+f("cursive")+f("Arial Narrow")+f("Lucida Console")+function(){var a,b="",d=c.mimeTypes;for(a=0;a<d.length;a++)b+=d[a].description+d[a].type+d[a].suffixes;return b}()+function(){var a,b=document.createElement("canvas"),c="!@#$%^&*()EP";return"undefined"==typeof b.getContext?0:(a=b.getContext("2d"),a.textBaseline="top",a.font="12px 'Arial'",a.textBaseline="alphabetic",a.fillStyle="#F2CB14",a.fillRect(0,1,85,20),a.fillStyle="#000",a.fillText(c,2,15),a.fillStyle="rgba(102, 204, 0, 0.5)",a.fillText(c,4,17),b.toDataURL())}()+function(){var a,b="",d=c.plugins;for(a=0;a<d.length;a++)b+=d[a].name+d[a].filename;return b}()}catch(g){this.dbg(g)}return b?a?b:this.utils.murmurHash3(b):"err"},generateAdUnitID:function(a){var b="sovrn_ad_unit_"+a,c=0,d=1;if(!document.getElementById(b))return b;for(;d;)d=document.getElementById(b+"_"+ ++c);return b+"_"+c},getGeo:function(){var a={};try{if(localStorage){var b=localStorage.getItem("sovrn.geo");this.log("Using geo position data: "+b),a=JSON.parse(b)||{}}}catch(c){}return navigator.geolocation?navigator.geolocation.getCurrentPosition(this.geoSuccess,this.geoFail,this.build_cfg.geo.positionOptions):this.log("navigation.geolocation unavailable"),a},getContainer:function(a,b){var c;if(this.isAsync())if(this.inFriendlyIframe())c=document.body;else{if(!a)return null;c=a.parentNode}else c=document.getElementById(this.getAdUnitID(b));return c},geoSuccess:function(a){var b={lat:a.coords.latitude,lon:a.coords.longitude,acc:a.coords.accuracy,acquisitionDate:new Date};if(localStorage)try{var c=JSON.stringify(b);localStorage.setItem("sovrn.geo",c),this.log("Updated geo position data: "+c)}catch(d){}},geoFail:function(a){sovrn.ads.log("Failed to obtain geo position data: "+a.message)},getAdUnitID:function(a){var b;try{b=this.getConfig(a).ad_unit_id}catch(c){b="sovrn_ad_unit_"+Math.floor(99999*Math.random())+100}return b},getASParams:function(){var a,b,c;if(a=this,b=a.getConfig(),c=+(a.utils.isNativeCode(document.write)&&a.utils.isNativeCode(document.writeln)),!b.hasOwnProperty("zone"))return a.dbg("Missing Server Config"),!1;if(b.as_params={zoneid:b.zone_id,tid:a.getTID(),cb:b.zone.cb,mode:a.getMode(),flv:a.getFlashVersion(),fpr:a.fprint(),ifr:a.isInIframe(),od:a.getOD(),time:a.getTime(),fd:a.getFrameDepth(),be:a.getBrowserEngine(),lijit_kw:a.getRefSearch(),loc:a.getLoc(),orig_loc:a.getOriginalLoc(),referer:a.getRef(),abf:a.atf(),dpz:a.getDPZ(),cv:a.getCV(),dop:+a.directOnPage(),ndw:c,dv_to:b.dv.timedOut,dv_err:b.dv.error,dv_ms:b.dv.latency,dv_loc:a.hasOwnProperty("dv")&&a.dv.getLoc(),dtid:a.getDTID(),spif:a.getSpif()},1===b.zone.geo){var d=a.getGeo();if(a.isGeoDataFresh(d.acquisitionDate))for(var e in d)d.hasOwnProperty(e)&&"acquisitionDate"!==e&&(b.as_params[e]=d[e])}return a.buildQS(b.as_params)},isGeoDataFresh:function(a){return a&&new Date-new Date(a)<=this.build_cfg.geo.localStorageMaxAge},getAsyncConfig:function(a){var b;return this.isAsync()?(b=this.getConfig(),b.async?a?"undefined"!=typeof b.async[a]?b.async[a]:null:b.async:(this.reportError("Cant find Async Config",new Error),null)):null},getBannerID:function(a){var b=this.getConfig(a);return b.hasOwnProperty("chain")?parseInt(b.chain.banner_id):0},getBeaconFired:function(){return sovrn.config.ads.globals.beacon_fired},getBeaconURL:function(){var a,b,c;return a=this,b=a.getConfig(),c="undefined"!=typeof b.zone?b.zone.iid:0,b.beacon_params={viewId:b.tid,rand:Math.floor(9e3*Math.random()),informer:c,type:"fpads",lijit_kw:a.getRefSearch(),loc:a.getLoc(),rr:a.getRef(),v:"1.2"},this.directOnPage()&&this.utils.byChance(+this.build_cfg.page.percent_chance)?(b.beacon_params.title=this.page.getTitle(),b.beacon_params.desc=this.page.getDesc()):this.log("Page data not collected"),a.build_cfg.beacon_url+"?"+this.buildQS(b.beacon_params)},getBrowserEngine:function(a,b){var c,d;a=a||window,b=b||document,c=b.documentElement.style,d="un";try{a.chrome?d="cr":a.ActiveXObject||"-ms-ime-align"in c?d="ie":"mozInnerScreenX"in a&&"mozFullScreen"in b||"MozAppearance"in c?d="fx":"WebKitCSSMatrix"in a||"WebKitPoint"in a||"webkitStorageInfo"in a||"webkitURL"in a?d="sf":("OLink"in c||a.opera)&&(d="op")}catch(e){this.dbg(e)}return d},getBuildConfig:function(){return{adserver_base:"http://ap.lijit.com",adserver_url:"http://ap.lijit.com/addelivery",beacon_url:"http://gslbeacon.lijit.com/beacon",config_url:"http://ap.lijit.com/adcfg",cookie_domain:".lijit.com",container_url:"",error_url:"//ap.lijit.com/data/errors",lg_suffix:"/impressions",adcenter_base:"http://adcenter.lijit.com/",webserver_base:"http://www.lijit.com",log_all_js_errors:"1",cv:"f358f89",dv:{url:"http://cdn.doubleverify.com/dvtp_src.js",timeout:"1000"},geo:{localStorageMaxAge:"600000",positionOptions:{timeout:"30000",maximumAge:"0"}},page:{percent_chance:"1",title_size:"256",desc_size:"256"}}},getCampaignID:function(a){var b=this.getConfig(a);return b.hasOwnProperty("chain")?b.chain.campaign_id:0},getChainLinkID:function(a,b){return"sovrn_banner_"+b+"_"+a.data.bannerid+"_"+a.data.campaignid},getChainValues:function(a,b){var c,d=[];c=sovrn.ads.getConfig(b).chain.ads;for(var e=0;e<c.length;e++)c[e].data.hasOwnProperty(a)&&d.push(c[e].data[a]);return d},getConfig:function(a){return a=a||sovrn.config.ads.current_tid,"undefined"==typeof sovrn.config.ads.instances[a]&&(sovrn.config.ads.instances[a]={}),sovrn.config.ads.instances[a]},getConfigByIndex:function(a){var b,c=0;for(b in sovrn.config.ads.instances)if(sovrn.config.ads.instances.hasOwnProperty(b)){if(c===a)return sovrn.config.ads.instances[b];c++}return!1},getConfigFromServer:function(){var a,b,c;b=this.getConfig(),c={zoneid:b.zone_id,tid:b.tid,mode:this.getMode(),dmn:this.getLocHost()},a=this.createScript(this.build_cfg.config_url+"?"+this.buildQS(c)),this.docWrite(a.outerHTML),this.log("*adcfg ("+b.zone_id+" / "+b.tid+")")},getConfigParam:function(a,b){var c=this,d=null,e=c.getConfig();return this.isAsync()&&(d=c.getAsyncConfig(a)),null!==d?d:e.query_params.hasOwnProperty(a)?e.query_params[a]:b},getCV:function(){return this.build_cfg.cv||""},getCSSClass:function(){var a=this.getConfig();return"sovrn_ad_"+a.zone.w+"_"+a.zone.h},getDPZ:function(){var a=this.getTIDsByZoneID(this.getConfig().zone_id);return"undefined"==typeof a?!1:a.length>1},getFlashVersion:function(){function a(a){return a=a.match(/[\d]+/g),a.length=3,a.join(".")}var b,c,d;if(c=!1,d="",navigator.plugins&&navigator.plugins.length)b=navigator.plugins["Shockwave Flash"],b&&(c=!0,b.description&&(d=a(b.description))),navigator.plugins["Shockwave Flash 2.0"]&&(c=!0,d="2.0.0.11");else if(navigator.mimeTypes&&navigator.mimeTypes.length)(c=(b=navigator.mimeTypes["application/x-shockwave-flash"])&&b.enabledPlugin)&&(d=a(b.enabledPlugin.description));else try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),c=!0,d=a(b.GetVariable("$version"))}catch(e){try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),c=!0,d="6.0.21"}catch(f){try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),c=!0,d=a(b.GetVariable("$version"))}catch(g){}}}return c?d:"0.0.0"},getFrameDepth:function(a){return a=a||self,a===top?0:1+this.getFrameDepth(a.parent)},getFriendlyIframe:function(){var a,b;return this.inFriendlyIframe()?(a=this.getAsyncConfig("id"),b=self.parent.document.getElementById(a)):null},getGUID:function(){function a(b){return b?(b^16*Math.random()>>b/4).toString(16):([1e7]+1e3+4e3+8e3+1e19).replace(/[018]/g,a)}return a()},getOriginalLoc:function(){var a,b=document.location.href,c=this;try{this.isAsync()&&("1"===c.getAsyncConfig("ifr")&&c.getAsyncConfig("ref")?a=c.getAsyncConfig("ref"):document.referrer&&(a=document.referrer)),this.urlCheck(a)||(a=c.getAsyncConfig("loc")||b),a=this.extractLoc(a)}catch(d){this.reportError("getOriginalLoc failure",d)}return a=this.urlCheck(a)?a:b,"http://"+a.replace("http://","").substr(0,1024)},getLoc:function(){var a,b=document.location.href,c=this;try{c.isInIframe()&&(a=c.getTopParentLoc(),this.isAsync()&&"1"===c.getAsyncConfig("ifr")?a=a||c.getAsyncConfig("loc"):document.referrer&&(a=a||document.referrer)),this.urlCheck(a)||(a=c.getAsyncConfig("loc")||b),a=this.extractLoc(a)}catch(d){this.reportError("getLoc failure",d)}a=this.urlCheck(a)?a:b;var e=this.getConfig();return e.zone&&e.zone.hasOwnProperty("rl")&&1===e.zone.rl?a:"http://"+a.replace("http://","").substr(0,1024)},getTopParentLoc:function(){var a="";try{if(window.$sf)a=this.getCurrentDocument().referrer;else{var b=this.getCurrentDocument().location;if(b&&b.ancestorOrigins&&b.ancestorOrigins.length>1){var c=b.ancestorOrigins;a=c[c.length-1]}else b&&b.hasOwnProperty("ancestorOrigins")===!1&&(a=this.getNonWebKitTopParentLoc())}}catch(d){this.reportError("getTopParentLoc failure",d)}return a},getCurrentDocument:function(){return document},getNonWebKitTopParentLoc:function(){var a,b="",c="";do{a=a?a.parent:window;try{c=a.document.referrer}catch(d){return c}}while(a!==window.top);return b},getLocHost:function(){return this.parseUri(this.getLoc()).host},getMoreParams:function(){var a=this,b="",c=/(^ljt_|^x_)/;return b+=this.isAsync()?a.buildQS(a.matchProps(c,a.getAsyncConfig())):a.buildQS(a.matchQueryParams(c)),b.length>0?"&"+b:""},getOD:function(){var a,b=this;return b.getAsyncConfig("od")&&(a=b.getAsyncConfig("od")),b.isInIframe()&&("1"===b.getAsyncConfig("ifr")&&b.getAsyncConfig("ref")?a=b.getAsyncConfig("ref"):document.referrer&&(a=document.referrer)),a=a||document.location.href.replace(/["']/g,""),b.parseUri(a).host},getMode:function(){var a=0;return this.isAsync()&&(a=1),this.isOldIE()&&(a+=2),a},getPod:function(a){return this.getConfig(a).chain.pod},getRef:function(){var a;return a=this.isAsync()?this.getAsyncConfig("ref"):document.referrer,"string"==typeof a?a.substr(0,1024):""},getRefSearch:function(a){var b,c,d;if(c=["q","p","search","query","kw"],a=a||this.getRef(),!a)return"";try{a=decodeURI(a)}catch(e){this.dbg(e)}for(d=this.parseQueryString(a),b=0;b<c.length;b++)if(d.hasOwnProperty(c[b]))return d[c[b]].replace(/\+/g," ");return""},getScriptTag:function(){var a,b,c,d;if(a=sovrn.config.ads.globals.tag_regex,"currentScript"in document&&(d=document.currentScript,d&&a.test(d.src)))return d;for(b=document.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(a.test(b[c].src))return b[c];return null},getSpif:function(){return"undefined"!=typeof window.postMessage},getTID:function(){return this.getConfig().tid},getDTID:function(){return this.getConfigParam("dtid")||""},getTIDsByZoneID:function(a){var b,c,d=[];for(c=sovrn.config.ads.instances.length-1;c>=0;)b=this.getConfigByIndex(c),b.zone_id===a&&d.push(b.tid),c--;return d},getTime:function(a){return a=a||new Date,a.toUTCString().split(" ")[4]},getUsername:function(){return this.getConfigParam("u","")},getZoneID:function(){return parseInt(this.getConfigParam("z",0))},init:function(a){var b,c,d,e,f;if(b=sovrn.ads,b.build_cfg=b.getBuildConfig(),delete sovrn.config.ads.current_tid,sovrn.config.ads.current_tid=c=b.getGUID(),sovrn.config.ads.globals.tids.push(c),e=b.getConfig(c),e.start_time=+new Date,e.async=a||window.sovrn_async||{},e.tid=c,e.log="",d=b.getScriptTag(),!d)return f="Cant find Script Tag; URL: "+b.getLoc().substr(0,150)+"; REF: "+b.getRef().substr(0,150),b.log(f),b.reportError(f,new Error),!1;if(e.query_params=b.parseQueryString(d.src),e.zone_id="undefined"!=typeof e.query_params.z?e.query_params.z:b.getZoneID(),e.finale_fired=!1,e.chain_finished=!1,e.bad_origins_logged=0,e.ad_unit_id=b.generateAdUnitID(e.zone_id),e.called_ad_server=!1,e.dv={timeoutReference:null,called:!1,error:"",timedOut:"",latency:"",start:"",end:""},!e.zone_id)return f="Unknown Zone ID; URL: "+b.getLoc().substr(0,150)+"; REF: "+b.getRef().substr(0,150),b.log(f),b.reportError(f,new Error),!1;if("undefined"==typeof JSON)return b.reportError("JSON Browser support is required",new Error),!1;if(!window.onbeforeunload)try{window.onbeforeunload=function(){sovrn.ads.chainLG(!0)}}catch(g){b.dbg(g)}b.log("INIT ("+e.zone_id+" / "+c+")"),b.isAsync()&&b.initAsync(e),b.manageEventListeners(),b.getConfigFromServer()},inFriendlyIframe:function(){var a,b;if(!this.isAsync())return!1;b=this.getAsyncConfig("id");try{a=!!self.parent.document.getElementById(b)}catch(c){a=!1}return a},initAsync:function(a){var b,c,d=this;c=a.tid,d.build_cfg.log_all_js_errors&&this.inFriendlyIframe()&&(window.onerror=function(a,c,e,f,g){try{return g=g||new Error("Undetermined Error"),b="URL: "+c+" LINE: "+e+" COL: "+f+" MSG: "+a+" ERR: "+g,d.reportError(b,g),!0}catch(h){return d.reportError("Error in onerror handler",h),!1}}),d.log("Async Init ("+a.zone_id+" / "+c+")")},isAsync:function(){var a;return this.isInIframe()?(a=this.getConfig().async,"object"==typeof a&&"{}"!==JSON.stringify(a)):!1},isInIframe:function(){return self!==top},isOldIE:function(a){var b=new RegExp("MSIE ([0-9]+[\\.0-9]*)");return a=a||navigator.userAgent,"ie"===this.getBrowserEngine()&&!!b.exec(a)&&parseInt(RegExp.$1)<10},isTracker:function(a){try{var b=a.nodeName;return"IMG"!==b&&"IFRAME"!==b&&"DIV"!==b&&"SPAN"!==b&&"INS"!==b?!1:"undefined"==typeof a.height||"undefined"==typeof a.width||0!==a.height&&1!==a.height||0!==a.width&&1!==a.width?"undefined"!=typeof a.name&&a.name.match(/^google_conversion/)?!0:"undefined"==typeof a.style||"0px"!==a.style.height&&"1px"!==a.style.height||"0px"!==a.style.width&&"1px"!==a.style.width?!(1!==a.clientHeight&&1!==a.offsetHeight||1!==a.clientWidth&&1!==a.offsetWidth):!0:!0}catch(c){this.dbg(c)}return!1},matchProps:function(a,b){var c,d={};for(c in b)b.hasOwnProperty(c)&&c.match(a)&&(d[c]=b[c]);return d},log:function(a){var b,c,d,e,f;return e="",f="","undefined"==typeof console?!1:void(this.dbgEnabled()&&(d=this.getConfig(),b=new Date-d.start_time,c="[sovrn.ads] "+b+": "+a,"ie"!==this.getBrowserEngine()&&(f="%c",e="background-color: #FFED96"),console.log(f+c,e),d.log+=c+"\n"))},lgFired:function(a){var b=!1;try{"1"===sessionStorage.getItem("lg_"+a)&&(b=!0)}catch(c){try{-1!==this.utils.arrayIndexOf(sovrn.config.ads.globals.lg_fired,a)&&(b=!0)}catch(d){this.dbg(d)}}return b},manageEventListeners:function(){window.removeEventListener?removeEventListener("message",function(a){sovrn.ads.onMsg(a)},!1):window.detachEvent?detachEvent("onmessage",function(a){sovrn.ads.onMsg(a)}):this.reportError("remove message event error",new Error),window.addEventListener?addEventListener("message",function(a){sovrn.ads.onMsg(a)},!1):window.attachEvent?attachEvent("onmessage",function(a){sovrn.ads.onMsg(a)}):this.reportError("add message event error",new Error)},matchQueryParams:function(a){var b,c={},d=this.getConfig().query_params;for(b in d)d.hasOwnProperty(b)&&d[b].match(a)&&(c[b]=d[b]);return c},onMsg:function(a){var b,c,d,e;if(e=this.getConfig(),!sovrn.config.ads.globals.origin_regex.test(a.origin.toString()))return++e.bad_origins_logged<3&&this.log("[onMsg] Invalid Event Origin: "+a.origin),null;b=!1,c=JSON.parse(a.data),d=c.action;try{switch(d){case"passback":this.log("[onMsg] Passback Fired From iFrame"),this.doPassback(!0),b=!0;break;default:this.log("Invalid onMsg Action!")}}catch(f){this.reportError("onMsg Error",f)}return b},page:{getTitle:function(){var a,b,c,d;return d=sovrn.ads.inFriendlyIframe()?parent.document:document,c="",d.querySelector&&(b=d.querySelector("meta[property='og:title']"),b&&(c=b.getAttribute("content")||"")),c||(a=d.getElementsByTagName("title"),c=a.length>0?a[0].innerHTML+"":""),c.substr(0,parseInt(sovrn.ads.build_cfg.page.title_size,10))},getDesc:function(){var a,b,c,d;return document.querySelector?(d=sovrn.ads.inFriendlyIframe()?parent.document:document,c="",b=d.querySelector("meta[property='og:description']"),b?c=b.getAttribute("content"):(a=d.querySelector("meta[name='description']"),a&&(c=a.getAttribute("content"))),c.substr(0,parseInt(sovrn.ads.build_cfg.page.desc_size,10))):""}},parseQueryString:function(a){var b,c;return c={},b=a.split("?")[1]||"",(b=b.split("#")[0]||"")?(b.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,d,e){try{c[b]=decodeURIComponent(e)}catch(f){sovrn.ads.dbg(f)}}),c):{}},parseUri:function(a){var b,c,d,e;try{for(b={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=b.parser.exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d}catch(f){this.reportError(f)}},renderAd:function(a){"object"!=typeof a&&this.reportError("Invalid server config.",new Error),this.log("adcfg response: "+JSON.stringify(a));var b=this.getConfig();b.zone=a,b.css_class=this.getCSSClass(),this.appendCSS(),this.hasOwnProperty("dv")&&this.isAsync()&&b.zone.hasOwnProperty("dv")&&1===b.zone.dv?this.dv.call():this.callAdServer()},reportError:function(a,b){var c,d,e,f,g;d=this.getConfig(),e=d.zone_id;try{c=b&&b.hasOwnProperty("stack")?b.stack:"",f={zoneid:e,tid:d.tid,cv:this.getCV(),err:b&&b.hasOwnProperty("message")?b.message:"",msg:a,stack:c.substr(0,1024)},(new Image).src=this.build_cfg.error_url+"/fp?"+this.buildQS(f),this.dbgEnabled()&&(g="JS ERROR on Zone "+e+"\n\n"+a+"\n\n"+c,alert(g),window.console&&console.error(g))}catch(h){this.dbg(h)}return b},sendBeacon:function(){try{var a,b,c;if(this.getBeaconFired())return!1;c=this.getConfig(),a=this.getAdUnitID()+"_beacon",b=this.createiFrame(a,1,1),b.src=this.getBeaconURL(),document.body.appendChild(b),this.log("*beacon ("+c.zone_id+" / "+c.tid+")"),this.setBeaconFired(!0)}catch(d){return this.reportError("Error sending Beacon",d),!1}return!0},setBeaconFired:function(a){sovrn.config.ads.globals.beacon_fired=a},setDataAttribs:function(a,b,c){var d,e,f,g,h,i;return this.dbgEnabled()?(g=this.getConfig(),d=document.getElementById(g.ad_unit_id),h=this.isAsync()?"async":"sync",i=g.zone.w+"x"+g.zone.h,e=this.dbgEnabled()?"TID: "+c+"\nBID: "+a.data.bannerid+"\nCID: "+a.data.campaignid+"\nBH: "+b.history.bids.join(", ")+"\nCH: "+b.history.cids.join(", ")+"\nBIDs: "+this.getChainValues("bannerid")+"\nCIDs: "+this.getChainValues("campaignid")+"\nZID: "+g.zone_id+" ("+h+" "+i+")\nU: "+this.getUsername():"",d&&(d.setAttribute("data-bid",a.data.bannerid+""),d.setAttribute("data-cid",a.data.campaignid+""),d.setAttribute("title",e)),f=this.getFriendlyIframe(),f&&(f.setAttribute("data-tid",c),f.setAttribute("data-bid",a.data.bannerid+""),f.setAttribute("data-cid",a.data.campaignid+""),f.setAttribute("title",e)),!0):!1},setChainVars:function(a){var b=this.getConfig();b.chain={ads:a.ads,pod:a.pod,pbi:a.hasOwnProperty("pbi")?a.pbi:!1,start_time:+new Date,banner_id:0,campaign_id:0,index:0,history:{bids:[],cids:[],tss:[]}},b.chain.pbi&&this.fireContainerTag(),this.doPassback()},showOverlay:function(a){var b,c,d,e,f,g;return b=this.getContainer(null,a),b&&(d=this.getZoneID(),f=this.getBannerID(a),e="<a target = '_blank' href='"+this.build_cfg.adcenter_base+"adminpublisher/search/zone/"+d+"'>Zone: "+d+"</a>",g="<a target = '_blank' href='"+this.build_cfg.adcenter_base+"campaigns/banners_edit/"+f+"'>Banner: "+f+"</a>",c=document.createElement("div"),c.innerHTML=e+"<br>"+g,c.setAttribute("class","sovrn_div_overlay"),
b.appendChild(c)),!!b},unhideElem:function(a,b,c){var d;if(!a)return this.log("element does not exist"),!1;for(d=a.parentNode;d&&"HTML"!==d.nodeName&&"BODY"!==d.nodeName;)d.style&&(b&&d.clientWidth<b&&(d.style.width=null),c&&d.clientHeight<c&&(d.style.height=null),("undefined"!=typeof d.style.display&&""===d.style.display&&d.id&&0===d.id.indexOf("sovrn")||d.style.display&&"none"===d.style.display)&&(d.style.display="block"),d.style.visibility="visible",d.style.opacity="1"),d=d.parentNode;return!0},insCleanup:function(a){try{for(var b=a.parentNode.children,c=0;c<b.length;c++)"ins"===b[c].tagName.toLowerCase()&&b[c]!==a&&(b[c].style.display="none")}catch(d){return this.reportError("Error sending Beacon",d),!1}},urlCheck:function(a){var b=!0;(!a||-1===a.indexOf(".")||a.length<4||0===a.indexOf("file:")||a.indexOf("javascript:")>=0||a.indexOf("data:")>=0)&&(b=!1);try{decodeURI(a)}catch(c){b=!1}return b},utils:{arrayIndexOf:function(a,b){var c;if(Array.prototype.indexOf)return a.indexOf(b);for(c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},byChance:function(a){var b;return a=parseFloat(a),isNaN(a)?null:(b=Math.floor(100*Math.random()),a>=b)},hasClass:function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},/*!(c)Lalit Patel, MODIFIED apache.org/licenses/LICENSE-2.0*/
hasFont:function(a){function b(a){var b=!1;for(var i in c){f.fontFamily=a+","+c[i],d.appendChild(e);var j=e.offsetWidth!==g[c[i]]||e.offsetHeight!==h[c[i]];d.removeChild(e),b=b||j}return b}var c=["monospace","sans-serif","serif"],d=document.body,e=document.createElement("span"),f=e.style,g={},h={};f.fontSize="42px",f.visibility="hidden",e.innerHTML="OWTMwMmllii";for(var i in c)f.fontFamily=c[i],d.appendChild(e),g[c[i]]=e.offsetWidth,h[c[i]]=e.offsetHeight,d.removeChild(e);return b(a)},isNativeCode:function(a){var b;return b=(typeof a).toLowerCase(),("function"===b||"object"===b)&&/^\s*function\s*(\b[a-z$_][a-z0-9$_]*\b)*\s*\((|([a-z$_][a-z0-9$_]*)(\s*,[a-z$_][a-z0-9$_]*)*)\)\s*{\s*\[native code\]\s*}\s*$/i.test(a+"")},/*!(c)2011 Gary Court;MIT LICENSE*/
murmurHash3:function(a,b){var c,d,e,f,g,h,i,j;for(c=3&a.length,d=a.length-c,e=b,g=3432918353,h=461845907,j=0;d>j;)i=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=(65535&f)+27492+(((f>>>16)+58964&65535)<<16);switch(i=0,c){case 3:i^=(255&a.charCodeAt(j+2))<<16;case 2:i^=(255&a.charCodeAt(j+1))<<8;case 1:i^=255&a.charCodeAt(j),i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e^=a.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,e^=e>>>16,e>>>0}}},LJT_Ads=sovrn.ads,sovrn.config=sovrn.config||{},sovrn.config.ct=sovrn.config.ct||{current_tid:"",globals:{tag_regex:/^(https?:)?\/\/.*\.lijit\.(com|dev)(:\d+)?\/res\/sovrn\.containertag(\.min)?\.js/i,fired_tags:{}},instances:{},tag_functions:{}},sovrn.containerTag={buildQS:function(a,b){var c,d,e,f;c=[],e=encodeURIComponent,f=b?"&amp;":"&";for(d in a)a.hasOwnProperty(d)&&""!==d&&""!==a[d]&&c.push(e(d)+"="+e(a[d]));return c.join(f)},checkFreq:function(a){var b,c,d,e,f,g,h;if("number"==typeof a&&(a=this.getTagById(a)),!a.frequency)return!0;switch(a.frequency){case"sample":h=100===parseInt(a.percent,10)||100*Math.random()<=(parseFloat(a.percent)||0);break;case"users":h=!1,100===parseInt(a.percent,10)?h=!0:(g=Math.floor(1/((parseFloat(a.percent)||0)/100)),b=this.getData("ljt_reader"),32===b.length&&(c=parseInt(b.substr(0,8),16),d=parseInt(b.substr(8,8),16),e=parseInt(b.substr(16,8),16),f=parseInt(b.substr(24,8),16),h=(c+d+e+f)%g===0));break;case"timed":h=!0;break;default:this.reportError("Invalid Tag Freq. Type",new Error),h=!1}return h},checkRules:function(a,b){function c(a,b){var c;for(c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1}var d,e,f,g,h,i=!0,j=["gt","gte","lt","lte"];if("number"==typeof a&&(a=this.getTagById(a,b)),!a)return this.reportError("Invalid Container Tag passed to checkRules",new Error),!1;if(h=a.rules,0===h.length)return!0;for(d=0;d<h.length;d++){if(e=this.getData(h[d]["var"]),"undefined"==typeof e||""===e||null===e)return this.log("Empty data_value detected in checkRules; Tag: "+a.id),!1;if(g=h[d].operand,f=h[d].value,j.indexOf(g)>0&&(isNaN(e)||isNaN(f)))return sovrn.ct.reportError("Numeric operand used on non-numeric data-layer var; Tag: "+a.id,new Error),!1;if("ct"===g&&!(e instanceof Array))return this.reportError("Contains operator used on non-array data-layer var; Tag: "+a.id,new Error),!1;switch(g){case"eq":i=e+""==f+"";break;case"ne":i=e+""!=f+"";break;case"gt":i=parseFloat(e)>parseFloat(f);break;case"lt":i=parseFloat(e)<parseFloat(f);break;case"gte":i=parseFloat(e)>=parseFloat(f);break;case"lte":i=parseFloat(e)<=parseFloat(f);break;case"ct":i=Array.prototype.indexOf?e.indexOf(f)>=0:c(e,f)>=0;break;default:return this.log("checkRules: Unsupported Operand Detected; Tag: "+a.id),!1}}return i},createImage:function(a,b){var c,d,e;d=document.createElement("img"),e={id:b||"",src:a,width:"0",height:"0"};for(c in e)e.hasOwnProperty(c)&&""!==e[c]&&d.setAttribute(c,e[c]);return d},createScript:function(a,b){var c;return c=document.createElement("script"),c.type="text/javascript",c.src=a,b&&(c.id=b),c},createInlineScript:function(a,b){var c;return c=document.createElement("script"),c.type="text/javascript",c.innerHTML=c.text=a,b&&(c.id=b),c},dataCallback:function(a){var b;return b=this.getConfig(),b.data=a,this.setupDataLayer(),this.fireTags(),!0},dbgEnabled:function(){var a;try{a=localStorage.getItem("debug")}catch(b){a=(document.cookie.match(/(^|; )debug=([^;]*)/)||0)[2]}return 1==a},debug:function(a){a=parseInt(a,10);try{localStorage.setItem("debug",a)}catch(b){document.cookie="debug="+a+"; expires=Tue, 19 Jan 2038 00:00:00 GMT; path=/;"}return this.dbgEnabled()},fireTag:function(tag){var query_params,image_src,image_src_char,config;switch(config=this.getConfig(),"number"==typeof tag&&(tag=this.getTagById(tag)),tag.type){case"img":try{query_params=this.buildQS(this.getTagParams(tag)),0===query_params.length?image_src=tag.src:(image_src_char=tag.src.indexOf("?")>=0?"&":"?",image_src=tag.src+image_src_char+query_params),(new Image).src=image_src,config.img_tags_fired++}catch(e){return this.log("ERROR FIRING TAG "+tag.id),this.reportError("Tag "+tag.id+": "+tag.error.replace(/["']/g,""),e),!1}break;case"script":try{eval(tag.src),config.script_tags_fired++}catch(e){return this.log("ERROR FIRING TAG "+tag.id),this.reportError("Tag "+tag.id+": "+tag.error.replace(/["']/g,""),e),!1}}return this.getGlobalConfig().fired_tags[tag.id]=tag.id,config.fired_tags[tag.id]=tag.id,config.total_tags_fired++,!0},fireTags:function(){var a,b,c,d,e,f,g,h,i,j;for(b=this.getConfig(),i=[],h=[],a=0;a<b.data.tags.length;a++)c=b.data.tags[a],d=this.shouldTagFire(c),e=this.checkFreq(c),f=this.checkRules(c),g=d&&e&&f,this.log("CID: "+b.container_id+" Tag: "+c.id+" ("+c.type+") Should Fire: "+d+" | Rules Passed: "+f+" | Freq Check Passed: "+e+" | FIRED: "+g),g&&(j=this.fireTag(c),j&&("img"===c.type?h.push(c.id):"script"===c.type&&i.push(c.id)));this.log("Fired Image Tags: "+h.join(", ")+" / Script Tags: "+i.join(", "))},getBrowserEngine:function(a,b){var c,d;a=a||window,b=b||document,c=b.documentElement.style,d="un";try{a.chrome?d="cr":a.ActiveXObject||"-ms-ime-align"in c?d="ie":"mozInnerScreenX"in a&&"mozFullScreen"in b||"MozAppearance"in c?d="fx":"WebKitCSSMatrix"in a||"WebKitPoint"in a||"webkitStorageInfo"in a||"webkitURL"in a?d="sf":("OLink"in c||a.opera)&&(d="op")}catch(e){this.dbg(e)}return d},getBuildConfig:function(){return{blackbird_host:"//ap.lijit.com/containertag",error_url:"//ap.lijit.com/data/errors"}},getConfig:function(a){return a=a||sovrn.config.ct.current_tid,sovrn.config.ct.current_tid=a,"undefined"==typeof sovrn.config.ct.instances[a]&&(sovrn.config.ct.instances[a]={}),sovrn.config.ct.instances[a]},getConfigByIndex:function(a){var b,c=0;for(b in sovrn.config.ct.instances)if(sovrn.config.ct.instances.hasOwnProperty(b)){if(c===a)return sovrn.config.ct.instances[b];c++}return!1},getData:function(a){var b,c;return b=sovrn.containerTag.getDataLayerValue(a),null!==b?b:(c=sovrn.containerTag.getConfigValue(a),null!==c?c:null)},getConfigValue:function(a,b){var c;return c=this.getConfig(b),c.data&&c.data.hasOwnProperty(a)?c.data[a]:null},getDataLayerValue:function(a){return sovrn.dataLayer instanceof Array&&sovrn.dataLayer[0]&&sovrn.dataLayer[0].hasOwnProperty(a)?sovrn.dataLayer[0][a]:null},getDataFromServer:function(a,b,c){var d,e,f;return b=b||this.getQueryParam("zid"),c=c||this.getQueryParam("aid"),b||c?(c?e="affId="+c:b&&(e="zoneId="+b),f=this.getBuildConfig().blackbird_host+"?containerId="+a+"&"+e+"&v=2",d=this.createScript(f),document.writeln(d.outerHTML),!0):(this.reportError("Missing Zone ID and Affiliate ID",new Error),!1)},getGlobalConfig:function(){return sovrn.config.ct.globals},getGUID:function(){function a(b){return b?(b^16*Math.random()>>b/4).toString(16):([1e7]+1e3+4e3+8e3+1e19).replace(/[018]/g,a)}return a()},getQueryParam:function(a,b){var c;return c=this.getConfig(b).query_params||{},c.hasOwnProperty(a)?c[a]:null},getScriptTag:function(){var a,b,c,d;if(a=this.getGlobalConfig().tag_regex,"currentScript"in document&&(d=document.currentScript,d&&a.test(d.src)))return d;for(b=document.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(a.test(b[c].src))return b[c];return null},getTagParams:function(a){var b,c;for(c={},b=0;b<a.params.length;b++)c[a.params[b].key]=this.getData(a.params[b]["var"])+"";return c},getTagById:function(a,b){var c,d,e;for(c=this.getTags(b),d=0;d<c.length;d++)if(e=c[d],parseInt(e.id,10)===parseInt(a,10))return e;return null},getTagIds:function(a){var b,c,d;for(d=[],b=this.getTags(a),c=0;c<b.length;c++)d.push(parseInt(b[c].id),10);return d},getTags:function(a,b){var c,d,e,f,g,h;if(d=[],g=this.getConfig(a),f=g.data.tags,b){for(e=g.fired_tags,c=0;c<f.length;c++)h=parseInt(f[c].id,10),e.hasOwnProperty(h)>0&&d.push(f[c]);return d}return f},init:function(a,b,c,d){var e,f,g;if(this.isOldIE())return this.log("Legacy IE detected; Aborting"),!1;if(sovrn.config.ct.instances.hasOwnProperty(a))return this.log("Container Tag already fired for tid:"+a),!1;if(delete sovrn.config.ct.current_tid,sovrn.config.ct.current_tid=a=a||this.getGUID(),e=this.getConfig(a),e.start_time=+new Date,e.tid=a,e.query_params={},e.data={},e.fired_tags={},e.img_tags_fired=0,e.script_tags_fired=0,e.total_tags_fired=0,e.log="",!b&&!c&&!d){if(f=this.getScriptTag(),!f)return this.reportError("Could not find CT script tag",new Error),!1;e.query_params=this.parseQueryString(f.src)}return e.container_id=b=b||this.getQueryParam("cid"),b?(sovrn.containers=sovrn.containers||{},g="ct"+b,sovrn.containers[g]=sovrn.containers[g]||{getData:sovrn.containerTag.getData},this.getDataFromServer(b,c,d)):(this.reportError("Missing cid",new Error),!1)},isOldIE:function(a){var b=new RegExp("MSIE ([0-9]+[\\.0-9]*)");return a=a||navigator.userAgent,"ie"===this.getBrowserEngine()&&!!b.exec(a)&&parseInt(RegExp.$1)<10},log:function(a){var b,c,d,e,f;return e="",f="","undefined"==typeof console?!1:void(this.dbgEnabled()&&(d=this.getConfig(),b=new Date-d.start_time,c="[sovrn.ct] "+b+": ("+d.tid+"): "+a,"ie"!==this.getBrowserEngine()&&(f="%c",e="background-color: #FFED96"),console.log(f+c,e),d.log+=c+"\n"))},parseQueryString:function(a){var b,c={};return b=a.split("?")[1]||"",(b=b.split("#")[0]||"")?(b.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,d,e){try{c[b]=decodeURIComponent(e)}catch(f){sovrn.ads.dbg(f)}}),c):{}},reportError:function(a,b){var c,d,e,f;e=this.getConfig();try{d=b&&b.hasOwnProperty("stack")?b.stack:"",f={tid:e.tid,err:b&&b.hasOwnProperty("message")?b.message:"",msg:a,stack:d.substr(0,1024)},(new Image).src=this.getBuildConfig().error_url+"/ct?"+this.buildQS(f),this.dbgEnabled()&&(c="CT JS ERROR: \n\n"+a+"\n\n"+d,alert(c),window.console&&console.error(c))}catch(g){console.log(g)}return b},setupDataLayer:function(){var a,b,c;a=this.getConfig().data,sovrn.dataLayer=sovrn.dataLayer||[{}],b={commscoreCategory:a.commscoreCategory||"",sovrnApplications:a.application_ids||[],sovrnGeo:a.geo||"",sovrnIid:a.user.iid||"",sovrnRandom:Math.floor(9e6*Math.random()),sovrnReader:a.ljt_reader||"",sovrnUser:a.user.username||""};for(c in b)b.hasOwnProperty(c)&&(sovrn.dataLayer[0][c]=b[c])},shouldTagFire:function(a){return"number"==typeof a&&(a=this.getTagById(a)),"multi"===a.fire||!this.tagHasFired(a.id)},tagHasFired:function(a){return this.getGlobalConfig().fired_tags.hasOwnProperty(a)}},sovrn.ct=sovrn.containerTag,sovrn.ads=sovrn.ads||{},sovrn.ads.dv=sovrn.ads.dv||{call:function(){var a;a=sovrn.ads.getConfig(),a.dv.timeoutReference=setTimeout(function(){sovrn.ads.dv.setTimedOut("1"),sovrn.ads.callAdServer()},sovrn.ads.getBuildConfig().dv.timeout),sovrn.ads.docWrite(sovrn.ads.dv.buildTag().outerHTML),sovrn.ads.log("dv.call ("+sovrn.ads.getZoneID()+" / "+sovrn.ads.getTID()+")")},callback:function(a){var b,c;this.setEnd(+new Date),b=sovrn.ads.getConfig(),clearTimeout(b.dv.timeoutReference),b.dv.latency=b.dv.end-b.dv.start,"object"==typeof a&&a.hasOwnProperty("responseTypeId")?1===a.responseTypeId?a.hasOwnProperty("exUrl")&&null!==a.exUrl?this.setLoc(a.exUrl):b.dv.error=1:2===a.responseTypeId?b.dv.error=2:b.dv.error=4:b.dv.error=4,c=b.dv.error?"[INVALID RESPONSE]":JSON.stringify(a),sovrn.ads.log("dv.callback ("+b.zone_id+" / "+b.tid+" / "+c+")"),sovrn.ads.callAdServer()},buildTag:function(){var a,b,c;return a={dv_callback:"sovrn.ads.dv.callback",turl:sovrn.ads.getLocHost(),sid:sovrn.ads.getZoneID(),ctx:"2103755",cmp:"2397271",dvapi:5,region:30,dvtagver:"6.1.src"},c=+new Date,b=sovrn.ads.createScript(sovrn.ads.build_cfg.dv.url+"?"+sovrn.ads.buildQS(a)+"&timecheck="+c),this.setStart(c),b},setLoc:function(a){sovrn.config.ads.globals.dv.loc=a},getLoc:function(){return sovrn.config.ads.globals.dv.loc},setTimedOut:function(a){var b;this.setEnd(+new Date),b=sovrn.ads.getConfig(),b.dv.latency=b.dv.end-b.dv.start,b.dv.timedOut=a},setStart:function(a){sovrn.ads.getConfig().dv.start=a},setEnd:function(a){sovrn.ads.getConfig().dv.end=a}},sovrn.ads.init();