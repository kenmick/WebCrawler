(function(t){function e(t,e){return function(n){return u(t.call(this,n),e)}}function n(t){return function(e){return this.lang().ordinal(t.call(this,e))}}function i(){}function r(t){s(this,t)}function a(t){var e=this._data={},n=t.years||t.year||t.y||0,i=t.months||t.month||t.M||0,r=t.weeks||t.week||t.w||0,a=t.days||t.day||t.d||0,s=t.hours||t.hour||t.h||0,u=t.minutes||t.minute||t.m||0,c=t.seconds||t.second||t.s||0,l=t.milliseconds||t.millisecond||t.ms||0;this._milliseconds=l+1e3*c+6e4*u+36e5*s,this._days=a+7*r,this._months=i+12*n,e.milliseconds=l%1e3,c+=o(l/1e3),e.seconds=c%60,u+=o(c/60),e.minutes=u%60,s+=o(u/60),e.hours=s%24,a+=o(s/24),a+=7*r,e.days=a%30,i+=o(a/30),e.months=i%12,n+=o(i/12),e.years=n}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(t){return 0>t?Math.ceil(t):Math.floor(t)}function u(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function c(t,e,n){var i,r=e._milliseconds,a=e._days,s=e._months;r&&t._d.setTime(+t+r*n),a&&t.date(t.date()+a*n),s&&(i=t.date(),t.date(1).month(t.month()+s*n).date(Math.min(i,t.daysInMonth())))}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t,e){var n,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(n=0;i>n;n++)~~t[n]!==~~e[n]&&a++;return a+r}function h(t,e){return e.abbr=t,N[t]||(N[t]=new i),N[t].set(e),N[t]}function d(t){return t?(!N[t]&&I&&require("./lang/"+t),N[t]):C.fn._lang}function p(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var e,n,i=t.match(z);for(e=0,n=i.length;n>e;e++)i[e]=re[i[e]]?re[i[e]]:p(i[e]);return function(r){var a="";for(e=0;n>e;e++)a+="function"==typeof i[e].call?i[e].call(r,t):i[e];return a}}function v(t,e){function n(e){return t.lang().longDateFormat(e)||e}for(var i=5;i--&&$.test(e);)e=e.replace($,n);return ee[e]||(ee[e]=m(e)),ee[e](t)}function y(t){switch(t){case"DDDD":return H;case"YYYY":return W;case"YYYYY":return R;case"S":case"SS":case"SSS":case"DDD":return E;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return Z;case"X":return B;case"Z":case"ZZ":return P;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return q;default:return new RegExp(t.replace("\\",""))}}function g(t,e,n){var i,r=n._a;switch(t){case"M":case"MM":r[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":i=d(n._l).monthsParse(e),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(r[2]=~~e);break;case"YY":r[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~e;break;case"a":case"A":n._isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~e;break;case"m":case"mm":r[4]=~~e;break;case"s":case"ss":r[5]=~~e;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,i=(e+"").match(Q),i&&i[1]&&(n._tzh=~~i[1]),i&&i[2]&&(n._tzm=~~i[2]),i&&"+"===i[0]&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}null==e&&(n._isValid=!1)}function _(t){var e,n,i=[];if(!t._d){for(e=0;7>e;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];i[3]+=t._tzh||0,i[4]+=t._tzm||0,n=new Date(0),t._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),t._d=n}}function w(t){var e,n,i=t._f.match(z),r=t._i;for(t._a=[],e=0;e<i.length;e++)n=(y(i[e]).exec(r)||[])[0],n&&(r=r.slice(r.indexOf(n)+n.length)),re[i[e]]&&g(i[e],n,t);t._isPm&&t._a[3]<12&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),_(t)}function b(t){for(var e,n,i,a,o=99;t._f.length;){if(e=s({},t),e._f=t._f.pop(),w(e),n=new r(e),n.isValid()){i=n;break}a=f(e._a,n.toArray()),o>a&&(o=a,i=n)}s(t,i)}function T(t){var e,n=t._i;if(J.exec(n)){for(t._f="YYYY-MM-DDT",e=0;4>e;e++)if(G[e][1].exec(n)){t._f+=G[e][0];break}P.exec(n)&&(t._f+=" Z"),w(t)}else t._d=new Date(n)}function x(e){var n=e._i,i=L.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?T(e):l(n)?(e._a=n.slice(0),_(e)):e._d=n instanceof Date?new Date(+n):new Date(n)}function M(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function D(t,e,n){var i=O(Math.abs(t)/1e3),r=O(i/60),a=O(r/60),s=O(a/24),o=O(s/365),u=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===a&&["h"]||22>a&&["hh",a]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",O(s/30)]||1===o&&["y"]||["yy",o];return u[2]=e,u[3]=t>0,u[4]=n,M.apply({},u)}function S(t,e,n){var i=n-e,r=n-t.day();return r>i&&(r-=7),i-7>r&&(r+=7),Math.ceil(C(t).add("d",r).dayOfYear()/7)}function k(t){var e=t._i,n=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=d().preparse(e)),C.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):n?l(n)?b(t):w(t):x(t),new r(t))}function Y(t,e){C.fn[t]=C.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function F(t){C.duration.fn[t]=function(){return this._data[t]}}function j(t,e){C.duration.fn["as"+t]=function(){return+this/e}}for(var C,A,U="2.0.0",O=Math.round,N={},I="undefined"!=typeof module&&module.exports,L=/^\/?Date\((\-?\d+)/i,z=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,$=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,q=/\d\d?/,E=/\d{1,3}/,H=/\d{3}/,W=/\d{1,4}/,R=/[+\-]?\d{1,6}/,Z=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,P=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,B=/[\+\-]?\d+(\.\d{1,3})?/,J=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,X="YYYY-MM-DDTHH:mm:ssZ",G=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Q=/([\+\-]|\d\d)/gi,K="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),te={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ee={},ne="DDD w W M D d".split(" "),ie="M D H h m s w W".split(" "),re={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return u(~~(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(~~(t/60),2)+":"+u(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(~~(10*t/6),4)},X:function(){return this.unix()}};ne.length;)A=ne.pop(),re[A+"o"]=n(re[A]);for(;ie.length;)A=ie.pop(),re[A+A]=e(re[A],2);for(re.DDDD=e(re.DDD,3),i.prototype={set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=C([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return S(t,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},C=function(t,e,n){return k({_i:t,_f:e,_l:n,_isUTC:!1})},C.utc=function(t,e,n){return k({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:e})},C.unix=function(t){return C(1e3*t)},C.duration=function(t,e){var n,i=C.isDuration(t),r="number"==typeof t,s=i?t._data:r?{}:t;return r&&(e?s[e]=t:s.milliseconds=t),n=new a(s),i&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},C.version=U,C.defaultFormat=X,C.lang=function(t,e){return t?(e?h(t,e):N[t]||d(t),C.duration.fn._lang=C.fn._lang=d(t),void 0):C.fn._lang._abbr},C.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),d(t)},C.isMoment=function(t){return t instanceof r},C.isDuration=function(t){return t instanceof a},C.fn=r.prototype={clone:function(){return C(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return C.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!f(this._a,(this._isUTC?C.utc(this._a):C(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){var e=v(this,t||C.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?C.duration(+e,t):C.duration(t,e),c(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?C.duration(+e,t):C.duration(t,e),c(this,n,-1),this},diff:function(t,e,n){var i,r,a=this._isUTC?C(t).utc():C(t).local(),s=6e4*(this.zone()-a.zone());return e&&(e=e.replace(/s$/,"")),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+a.daysInMonth()),r=12*(this.year()-a.year())+(this.month()-a.month()),r+=(this-C(this).startOf("month")-(a-C(a).startOf("month")))/i,"year"===e&&(r/=12)):(i=this-a-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?i/864e5:"week"===e?i/6048e5:i),n?r:o(r)},from:function(t,e){return C.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(C(),t)},calendar:function(){var t=this.diff(C().startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<C([this.year()]).zone()||this.zone()<C([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t=t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.day(0),this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+C(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+C(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+C(t).startOf(e)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return C.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=O((C(this).startOf("day")-C(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},isoWeek:function(t){var e=S(this,1,4);return null==t?e:this.add("d",7*(t-e))},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},lang:function(e){return e===t?this._lang:(this._lang=d(e),this)}},A=0;A<K.length;A++)Y(K[A].toLowerCase().replace(/s$/,""),K[A]);Y("year","FullYear"),C.fn.days=C.fn.day,C.fn.weeks=C.fn.week,C.fn.isoWeeks=C.fn.isoWeek,C.duration.fn=a.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=D(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},lang:C.fn.lang};for(A in te)te.hasOwnProperty(A)&&(j(A,te[A]),F(A.toLowerCase()));j("Weeks",6048e5),C.lang("en",{ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),I&&(module.exports=C),"undefined"==typeof ender&&(this.moment=C),"function"==typeof define&&define.amd&&define("moment",[],function(){return C})}).call(this),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,a=Function.prototype,s=i.push,o=i.slice,u=i.concat,c=r.toString,l=r.hasOwnProperty,f=i.forEach,h=i.map,d=i.reduce,p=i.reduceRight,m=i.filter,v=i.every,y=i.some,g=i.indexOf,_=i.lastIndexOf,w=Array.isArray,b=Object.keys,T=a.bind,x=function(t){return t instanceof x?t:this instanceof x?(this._wrapped=t,void 0):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.4.4";var M=x.each=x.forEach=function(t,e,i){if(null!=t)if(f&&t.forEach===f)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,a=t.length;a>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s in t)if(x.has(t,s)&&e.call(i,t[s],s,t)===n)return};x.map=x.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(M(t,function(t,r,a){i[i.length]=e.call(n,t,r,a)}),i)};var D="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=x.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(M(t,function(t,a,s){r?n=e.call(i,n,t,a,s):(n=t,r=!0)}),!r)throw new TypeError(D);return n},x.reduceRight=x.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=x.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var s=x.keys(t);a=s.length}if(M(t,function(o,u,c){u=s?s[--a]:--a,r?n=e.call(i,n,t[u],u,c):(n=t[u],r=!0)}),!r)throw new TypeError(D);return n},x.find=x.detect=function(t,e,n){var i;return S(t,function(t,r,a){return e.call(n,t,r,a)?(i=t,!0):void 0}),i},x.filter=x.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(M(t,function(t,r,a){e.call(n,t,r,a)&&(i[i.length]=t)}),i)},x.reject=function(t,e,n){return x.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},x.every=x.all=function(t,e,i){e||(e=x.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,i):(M(t,function(t,a,s){return(r=r&&e.call(i,t,a,s))?void 0:n}),!!r)};var S=x.some=x.any=function(t,e,i){e||(e=x.identity);var r=!1;return null==t?r:y&&t.some===y?t.some(e,i):(M(t,function(t,a,s){return r||(r=e.call(i,t,a,s))?n:void 0}),!!r)};x.contains=x.include=function(t,e){return null==t?!1:g&&t.indexOf===g?-1!=t.indexOf(e):S(t,function(t){return t===e})},x.invoke=function(t,e){var n=o.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){return(i?e:t[e]).apply(t,n)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e,n){return x.isEmpty(e)?n?null:[]:x[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},x.findWhere=function(t,e){return x.where(t,e,!0)},x.max=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return M(t,function(t,r,a){var s=e?e.call(n,t,r,a):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},x.min=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return M(t,function(t,r,a){var s=e?e.call(n,t,r,a):t;s<i.computed&&(i={value:t,computed:s})}),i.value},x.shuffle=function(t){var e,n=0,i=[];return M(t,function(t){e=x.random(n++),i[n-1]=i[e],i[e]=t}),i};var k=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,n){var i=k(e);return x.pluck(x.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var Y=function(t,e,n,i){var r={},a=k(e||x.identity);return M(t,function(e,s){var o=a.call(n,e,s,t);i(r,o,e)}),r};x.groupBy=function(t,e,n){return Y(t,e,n,function(t,e,n){(x.has(t,e)?t[e]:t[e]=[]).push(n)})},x.countBy=function(t,e,n){return Y(t,e,n,function(t,e){x.has(t,e)||(t[e]=0),t[e]++})},x.sortedIndex=function(t,e,n,i){n=null==n?x.identity:k(n);for(var r=n.call(i,e),a=0,s=t.length;s>a;){var o=a+s>>>1;n.call(i,t[o])<r?a=o+1:s=o}return a},x.toArray=function(t){return t?x.isArray(t)?o.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:o.call(t,0,e)},x.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},x.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var F=function(t,e,n){return M(t,function(t){x.isArray(t)?e?s.apply(n,t):F(t,e,n):n.push(t)}),n};x.flatten=function(t,e){return F(t,e,[])},x.without=function(t){return x.difference(t,o.call(arguments,1))},x.uniq=x.unique=function(t,e,n,i){x.isFunction(e)&&(i=n,n=e,e=!1);var r=n?x.map(t,n,i):t,a=[],s=[];return M(r,function(n,i){(e?i&&s[s.length-1]===n:x.contains(s,n))||(s.push(n),a.push(t[i]))}),a},x.union=function(){return x.uniq(u.apply(i,arguments))},x.intersection=function(t){var e=o.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.indexOf(e,t)>=0})})},x.difference=function(t){var e=u.apply(i,o.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=o.call(arguments),e=x.max(x.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=x.pluck(t,""+i);return n},x.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},x.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(g&&t.indexOf===g)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},x.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},x.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,a=new Array(i);i>r;)a[r++]=t,t+=n;return a},x.bind=function(t,e){if(t.bind===T&&T)return T.apply(t,o.call(arguments,1));var n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}},x.partial=function(t){var e=o.call(arguments,1);return function(){return t.apply(this,e.concat(o.call(arguments)))}},x.bindAll=function(t){var e=o.call(arguments,1);return 0===e.length&&(e=x.functions(t)),M(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var n={};return e||(e=x.identity),function(){var i=e.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},x.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(o.call(arguments,1)))},x.throttle=function(t,e){var n,i,r,a,s=0,o=function(){s=new Date,r=null,a=t.apply(n,i)};return function(){var u=new Date,c=e-(u-s);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,s=u,a=t.apply(n,i)):r||(r=setTimeout(o,c)),a}},x.debounce=function(t,e,n){var i,r;return function(){var a=this,s=arguments,o=function(){i=null,n||(r=t.apply(a,s))},u=n&&!i;return clearTimeout(i),i=setTimeout(o,e),u&&(r=t.apply(a,s)),r}},x.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},x.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},x.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)x.has(t,n)&&(e[e.length]=n);return e},x.values=function(t){var e=[];for(var n in t)x.has(t,n)&&e.push(t[n]);return e},x.pairs=function(t){var e=[];for(var n in t)x.has(t,n)&&e.push([n,t[n]]);return e},x.invert=function(t){var e={};for(var n in t)x.has(t,n)&&(e[t[n]]=n);return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=function(t){return M(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},x.pick=function(t){var e={},n=u.apply(i,o.call(arguments,1));return M(n,function(n){n in t&&(e[n]=t[n])}),e},x.omit=function(t){var e={},n=u.apply(i,o.call(arguments,1));for(var r in t)x.contains(n,r)||(e[r]=t[r]);return e},x.defaults=function(t){return M(o.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var j=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;n.push(t),i.push(e);var s=0,o=!0;if("[object Array]"==r){if(s=t.length,o=s==e.length)for(;s--&&(o=j(t[s],e[s],n,i)););}else{var u=t.constructor,l=e.constructor;if(u!==l&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(l)&&l instanceof l))return!1;for(var f in t)if(x.has(t,f)&&(s++,!(o=x.has(e,f)&&j(t[f],e[f],n,i))))break;if(o){for(f in e)if(x.has(e,f)&&!s--)break;o=!s}}return n.pop(),i.pop(),o};x.isEqual=function(t,e){return j(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=w||function(t){return"[object Array]"==c.call(t)},x.isObject=function(t){return t===Object(t)},M(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return l.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var C={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};C.unescape=x.invert(C.escape);var A={escape:new RegExp("["+x.keys(C.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(C.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return C[t][e]})}}),x.result=function(t,e){if(null==t)return null;var n=t[e];return x.isFunction(n)?n.call(t):n},x.mixin=function(t){M(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),L.call(this,n.apply(x,t))}})};var U=0;x.uniqueId=function(t){var e=++U+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,n){var i;n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),a=0,s="__p+='";t.replace(r,function(e,n,i,r,o){return s+=t.slice(a,o).replace(I,function(t){return"\\"+N[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=o+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return i(e,x);var u=function(t){return i.call(this,t,x)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},x.chain=function(t){return x(t).chain()};var L=function(t){return this._chain?x(t).chain():t};x.mixin(x),M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),M(["concat","join","slice"],function(t){var e=i[t];x.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(t,e){"use strict";if("undefined"!=typeof exports)exports.Voicebox=e(i,r.moment);else if("function"==typeof define&&define.amd)define("voicebox",["jquery/nyt","underscore/nyt","moment"],function(t,n,i){return e(t,n,i)});else{var n=t.NYTD=t.NYTD||{},i=n.jQuery||t.jQuery,r=t._,a=t.moment;n.NYTINT=n.NYTINT||{},n.NYTINT.Voicebox=n.NYTINT.Voicebox||e(i,r,a)}}(this,function(t,e,n){var i;return function(t,e){"use strict";var n=function(t,n){var i,r=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},e.extend(i,r,n);var a=function(){this.constructor=i};return a.prototype=r.prototype,i.prototype=new a,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i},r=function(){var t=Date.parse(new Date);return function(e){return t+=1,(e||"")+"nytintvb-"+t}}(),a=function(t){this.message=t,this.name="VbException"},s=function(t){this.context=t,this.events={},this.queues={}};s.prototype={defineEvent:function(t,e){this.queues[t]=[],this.events[t]=e},trigger:function(t,n){e(this.queues[t]).each(function(t){t.apply(this.context,n)},this)},on:function(t,n){var i=this.events[t];this.queues[t]||(this.queues[t]=[]),i&&i.onListen&&(!e.isFunction(i.onListen)||i.onListen())?n.apply(this.context):this.queues[t].push(n)},off:function(t,n){this.queues[t]&&(this.queues[t]=e.without(this.queues[t],n))}};var o={slug:"",layout:"",contentType:"",feedType:"",feedUrl:"",configUrl:"",referUrl:"",effect:"fade",autoplay:!1,effectSpeed:500,effectPause:2e3,limit:"",title:"",containerTemplate:"",slideTemplate:""},u=function(t,e,n){this.wrapperId=t?t.replace(/^#/,""):r("vbwrapper-"),this.containerTemplate=null,this.slideTemplate=null,this.feed=null,this.config={},this.opts=e||{},this.remoteOpts={},this.slideWidth=0,this.slideHeight=0,this.slideInterval=null,this.nextInterval=null,this.currentSlide=0,this.advancing=!1,this.$wrapper=null,this.$inner=null,this.$slides=null,this.debugMode=n===!0,this.ready=!1,this.activated=!1,this.monitor=this.setupMonitor()};u.prototype={init:function(e){this.ready=!1;var n=new t.Deferred,i=this;return this.fetchConfig().then(function(){i.configure(e).fetchFeed().then(function(t){i.debug(t,t),i.render(e),n.resolve(),i.ready=!0,i.monitor.trigger("ready",[])})}),n.promise()},setupMonitor:function(){var t=new s(this);return t.defineEvent("ready",{onListen:e.bind(function(){return this.ready},this)}),t.defineEvent("error"),t},refresh:function(t){return this.opts=t||this.opts,this.init(!0)},destroy:function(){var t=this.getWrapper();t&&(t.remove(),this.$wrapper=this.$inner=this.$slides=null,this.stop()),i.voxes=e.without(i.voxes,this)},debug:function(t,n){this.debugMode&&t&&(e.isFunction(n)&&!n()||!n)&&this.monitor.trigger("error",[new a(t)])},fetchConfig:function(){var n,i=new t.Deferred,r=e.bind(function(){var t="Remote configuration could not be retrieved.";this.debug(t),i.reject(t)},this),a=this.opts.previewConfigUrl||this.opts.configUrl;return this.opts.configUrl?(n=setTimeout(r,2e3),t.ajax({url:a,type:"GET",dataType:"jsonp",jsonpCallback:"vb_"+this.opts.slug+"_config",success:e.bind(function(t){clearTimeout(n),this.remoteOpts=t,i.resolve()},this)})):(i.resolve(),i.promise())},getTemplate:function(n,r){var a,s,o,u,c=this.config,l=n.replace("Template","");return c[n]&&(o="#"+c[n].replace(/^#/,""),u=t(o)),u&&u.length?(s=t(o).html(),this.debug("Expected inline template ("+c[n]+"), but none found.",s),a=r?s:e.template(s)):c[n+"Raw"]?a=r?c[n+"Raw"]:e.template(c[n+"Raw"]):(a=i.getTemplate(l,c.contentType,c.layout,r),this.debug("No template "+l+" template exists for this configuration: "+c.contentType+", "+c.layout+" .",r&&e.isString(a)||e.isFunction(a))),a},configure:function(t){if(0===e.size(this.config)||t===!0){var n=e.extend(e.defaults(this.config,o),this.remoteOpts,this.opts),r=i.feeds[n.feedType]||c;e.each(["containerTemplate","slideTemplate"],function(t){this[t]=this.getTemplate(t)},this),this.feed=new r({feedUrl:n.previewFeedUrl||n.feedUrl,dataType:r.dataType,jsonpCallback:r.jsonpCallback||"vb_"+n.slug+"_data"}),this.feed.init(n)}return this},fetchFeed:function(){return this.feed.fetch()},on:function(t,e){this.monitor.on(t,e)},off:function(t,e){this.monitor.off(t,e)},getWrapper:function(){return this.$wrapper||(this.$wrapper=t("#"+this.wrapperId),this.$wrapper.length||(this.$wrapper=t('<div id="'+this.wrapperId+'"></div>'))),this.$wrapper},render:function(t){if(!this.containerTemplate||!this.slideTemplate)return!1;t&&(this.getWrapper().empty(),clearTimeout(this.slideInterval),clearTimeout(this.nextInterval));var e=this.feed.as(this.config.contentType,this.config.limit),n={feed:this.feed,shared:i.templates.shared,config:this.config};e.length&&(this.renderModule(n),this.renderSlides(e,n,t),this.activate())},renderModule:function(t){var n=e.extend({width:this.config.width,height:this.config.height,title:this.config.title},t);
this.getWrapper().html(this.containerTemplate(n))},renderSlides:function(n,i,a){var s,o=t('<div class="nytint-vb-slides-inner"></div>'),u=this.config.effect,c=t(".nytint-vb-slides",this.getWrapper()),l=document.all&&!window.opera&&window.XMLHttpRequest?!0:!1;c.append(o).addClass("nytint-vb-effect-"+u),a&&this.$slides&&(this.$slides.remove(),this.$slides=null,this.currentSlide=0),this.$inner=o,e(n).each(function(n){var a,f;s=t('<div class="nytint-vb-slide" id="'+r("slide")+'">'+this.slideTemplate(e.extend({item:n},i))+"</div>"),o.append(s),this.$slides=this.$slides?this.$slides.add(s):s,f=s.outerHeight(),a=s.outerWidth(),a>this.slideWidth&&(this.slideWidth=a),f>this.slideHeight&&("slide"==u&&l&&c.height(f),this.slideHeight=f)},this),"none"!=u&&("fade"==u?(this.$slides.hide().eq(0).show(),o.width(this.slideWidth).height(this.slideHeight)):"slide"==u&&(c.width(this.slideWidth).height(this.slideHeight),o.width(this.slideWidth*n.length),this.$slides.width(this.slideWidth)),this.config.autoplay&&this.play())},activate:function(){var e=this;this.activated||(this.getWrapper().on("click",".nytint-vb-controls a",function(){var n=t(this).hasClass("nytint-vb-prev")?-1:1;return e.advanceSlide(n),!1}),this.config.autoplay&&(this.getWrapper().on("mouseenter",function(){e.stop()}),this.getWrapper().on("mouseleave",function(){e.play()})),this.activated=!0)},advanceSlide:function(t){if(!this.$slides)return!1;t=t||1;var e=this.config.effect,n=this.currentSlide+t,i=this.config.effectSpeed,r=this.$slides.length,a=0;n>r-1?n=0:0>n&&(n=r-1,t=n),"fade"==e?(this.$slides.eq(this.currentSlide).fadeOut(i),this.$slides.eq(n).fadeIn(i)):"slide"==e&&(0!==n&&(a=0>t?"+=":"-=",a+=Math.abs(t)*this.slideWidth),this.$inner.animate({left:a},i)),this.currentSlide=n},play:function(){var t=this.config.effectSpeed,n=this.config.effectPause;this.slideInterval=setTimeout(e.bind(function(){this.advanceSlide(1),this.nextInterval=setTimeout(e.bind(this.play,this),t)},this),n)},stop:function(){clearTimeout(this.slideInterval),clearTimeout(this.nextInterval)},embed:function(n){n=n||{editableTemplates:[],fullConfig:!1};var i=function(t){return t.join("\n")},a=e.omit(this.config,["containerTemplate","slideTemplate"]),s=a.configUrl,u=function(){var t,n=[],i=e.reduce(a,function(t,i,r){if(e.isUndefined(o[r])&&0!==r.search(l))return t;var a=e.isString(i)?"'"+i.replace(/'/g,"\\'")+"'":i,u=e.contains(["configUrl","slug"],r),c=s&&!u?"// ":"",f="  "+c+r+": "+a+",";return u?n.push(f):t.push(f),t},[]);return s&&i.splice(0,0,"  // Uncomment a parameter to override remote configuration"),t=n.concat(i),t[t.length-1]=t[t.length-1].replace(/,$/,""),t},c=function(e){return t.trim(e.replace(/(<\/[a-zA-Z0-9\"]+>)/g,"$1\n").replace(/(\/{0}[a-zA-Z0-9\"]+)><(%*\s*[a-zA-Z]+)/g,"$1>\n<$2").replace(/\n{2,}/g,"\n"))},l=/^[a-z]{1}[a-zA-Z]*Template$/,f=window.VOICEBOX_ASSET_PATH||"/assets/voicebox.js",h='<script type="text/javascript" src="'+f+'"></script>',d='<div id="'+this.wrapperId+'"></div>',p=i(['<script type="text/javascript">',"(function() {"]),m=s?[]:e.map(n.editableTemplates,function(t){var e=a[t+"Template"]||r(t+"-template-"),n=this.getTemplate(t+"Template",!0);return a[t+"Template"]=e,i(["\n<!-- BEGIN "+t.toUpperCase()+" TEMPLATE -->",'<script type="text/template" id="'+e+'">',c(n),"</script>","<!-- END "+t.toUpperCase()+" TEMPLATE -->"])},this),v=i(u()),y=i(["var elemId = '"+this.wrapperId+"';","var config = {",v,"};"]),g=i(['if (typeof define === "function" && define.amd) {',"  require(['foundation/main'], function(main) {","    require(['voicebox'], function(Voicebox) {","      Voicebox.vox(elemId, config);","    });","  });","} else {","  NYTD.NYTINT.Voicebox.vox(elemId, config);","}"]),_=i(["})();","</script>"]),w=[h,d,p,y,g,_];return m.length&&w.push(i(m)),i(w)}};var c=function(t){var n={dataType:"jsonp",feedUrl:"",jsonpCallback:null};this.opts=e.defaults(t||{},n),this.dataType=this.opts.dataType,this.feedUrl=this.opts.feedUrl,this.jsonpCallback=this.opts.jsonpCallback,this.items=[]};c.prototype={adaptors:{},init:function(){},fetch:function(){var n=t.Deferred(),i=2e3,r=this.feedUrl,a=setTimeout(function(){n.reject("The request to "+r+" timed out after "+i+"ms.")},i),s={url:r,method:"GET",dataType:this.dataType,success:e.bind(function(t){this.fetchComplete(t),clearTimeout(a),n.resolve()},this)};return"jsonp"==this.dataType&&e.extend(s,{jsonpCallback:this.jsonpCallback}),t.ajax(s),n.promise()},fetchComplete:function(t){return this.items=this.parse(t),e.isArray(this.items)||(this.items=[]),this.items},parse:function(t){return t},as:function(t,n){var r=[],a=n?e(this.items.slice(0,n)):e(this.items),s=i.models[t],o=this.adaptors[t],u=this,c=[],l=[];return"generic"==t?a.map(function(t){return t}):(s&&(e.each(s,function(t,n){e.isFunction(t)?l.push(n):c.push(n)}),r=a.map(function(t){var n=e.reduce(c,function(n,i){var r=o&&o[i]?o[i]:null;return n[i]=r?e.isFunction(r)?r.apply(u,[t]):t[r]:t[i],n},{});return e.reduce(l,function(t,e){return t[e]=s[e](t),t},n)})),r)},linkify:function(t){return t.replace(/(((http|ftp|https):\/\/){1}([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9_-]+)+([\S,:\/\.\?=a-zA-Z0-9_-]+))/gi,'<a target="_blank" href="$1">$1</a>')},linkifyTweet:function(t){return t.replace(/#([A-Za-z0-9_]*)/g,'<a target="_blank" href="http://twitter.com/search?q=%23$1">#$1</a>').replace(/@([A-Za-z0-9_]*)/g,'<a target="_blank" href="http://twitter.com/$1">@$1</a>')},mobilizeLinks:function(t){return t.replace(/((http|ftp|https):\/\/){1}/gi,"nytinteractive://")}},c.extend=n,i=function(){var n="//int.nyt.com/applications/voicebox/assets/voicebox-6367c2800c45ce2bbd27383ec1e35431.css",a=!1,s=function(){window.twttr||t.getScript("//platform.twitter.com/widgets.js")},o=function(){var e;a||(document.createStyleSheet?document.createStyleSheet(n):(e=t('<link rel="stylesheet" type="text/css" href="'+n+'"/>'),t("head").append(e)),a=!0)};return{voxes:[],models:{comment:{link:"#",author:"",location:"",text:"",timestamp:""},quote:{link:"#",author:"",text:"",context:"",timestamp:""},instagram:{thumbnail:"#",permalink:""},tweet:{id:"",id_str:"",user_screen_name:"",user_name:"",user_id:"",user_profile_image_url:"",created_at:"",text:"",timestamp:"",tweet_url:function(t){return"http://twitter.com/"+t.user_screen_name+"/status/"+t.id_str},user_url:function(t){return"http://twitter.com/intent/user?screen_name="+t.user_screen_name},reply_url:function(t){return"https://twitter.com/intent/tweet?in_reply_to="+t.id_str},retweet_url:function(t){return"https://twitter.com/intent/retweet?tweet_id="+t.id_str},favorite_url:function(t){return"https://twitter.com/intent/favorite?tweet_id="+t.id_str}}},templates:{container:{},slide:{},shared:{}},feeds:{},Vox:u,vox:function(e,n,r){o(),s();var a=new u(e,n,r);return t(document).ready(function(){a.init()}),i.voxes.push(a),a},registerTemplate:function(t,n,r,a){var s=i.templates[t];s[n]||(s[n]=a?{raw:r,compiled:e.template(r)}:e.template(r))},registerContainerTemplate:function(t,e){i.registerTemplate("container",t,e,!0)},registerSlideTemplate:function(t,e){i.registerTemplate("slide",t,e,!0)},registerSharedTemplate:function(t,e){i.registerTemplate("shared",t,e)},registerFeed:function(t,e,n){var r=i.feeds;return r[t]||(r[t]=c.extend(e,n)),r[t]},getTemplate:function(t,e,n,r){var a,s=i.templates;return s[t]?(a=s[t][e+"-"+n]||s[t][e],a?r===!0?a.raw:a.compiled:void 0):void 0},configure:function(t){var e=new u(r("wrapper-"),t,!0);return e.configure()},last:function(){return i.voxes[i.voxes.length-1]},layouts:function(t){return e.reduce(i.templates.container,function(e,n,i){return 0===i.indexOf(t)&&e.push(i.substr(0,t.length)),e},[])}}}()}(t,e,n),function(t){var e='<% if (effect) { %><div class="nytint-vb-controls"><a href="#" class="nytint-vb-prev"></a><a href="#" class="nytint-vb-next"></a></div><% } %>';t.registerSharedTemplate("slide_controls",e)}(i),function(t){var e='<a href="<%= item.tweet_url %>" target="_blank" class="nytint-vb-timestamp"><span><%= item.timestamp %></span></a><span> &middot; </span><a class="nytint-vb-twitter-reply nytint-vb-twitter-intent" href="<%= item.reply_url %>" target="_blank">Reply</a><a class="nytint-vb-twitter-retweet nytint-vb-twitter-intent" href="<%= item.retweet_url %>" target="_blank">Retweet</a><a class="nytint-vb-twitter-favorite nytint-vb-twitter-intent" href="<%= item.favorite_url %>" target="_blank">Favorite</a>';t.registerSharedTemplate("twitter_intents",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Readers\' Reactions" %></h5><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("comment-ipad-strip",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("comment-iphone",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Readers\' Reactions" %></h5><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div><% if (feed.leadallUrl) { %><div class="nytint-vb-comment-share"><a href="<%= feed.leadallUrl %>">Share your thoughts</a></div><% } %></div>';t.registerContainerTemplate("comment",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><% if (title) { %><h5 class="nytint-vb-title"><%= title %></h5><% } %><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("generic",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "From Instagram" %></h5><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("instagram-ipad-strip",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("instagram-iphone",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "From Instagram" %></h5><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div><% if (config.referUrl) { %><p class="nytint-vb-instagram-gallery-refer"><a href="<%= config.referUrl %>">Browse the Gallery Â»</a></p><% } %></div>';t.registerContainerTemplate("instagram",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Quotes" %></h5><div class="nytint-vb-slides"></div><% if (config.referUrl) { %><p class="nytint-vb-quote-refer"><a href="<%= config.referUrl %>">Read More Â»</a></p><% } %></div>';t.registerContainerTemplate("quote-ipad-strip",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><div class="nytint-vb-slides"></div><% if (config.referUrl) { %><p class="nytint-vb-quote-refer"><a href="<%= config.referUrl %>">Read More Â»</a></p><% } %></div>';t.registerContainerTemplate("quote-iphone",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Quotes" %></h5><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div><% if (config.referUrl) { %><p class="nytint-vb-quote-refer"><a href="<%= config.referUrl %>">Read More Â»</a></p><% } %></div>';t.registerContainerTemplate("quote",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Reactions on Twitter" %></h5><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("tweet-ipad-strip",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("tweet-iphone",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h6 class="nytint-vb-title"><%= title || "Reactions on Twitter" %></h6><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("tweet-nyt5",e)}(i),function(t){var e='<div class="nytint-vb-container nytint-vb-<%= config.contentType %>-<%= config.layout %>" style="<% if (width > 0) { %>width: <%= width %>;<% } %><% if (height > 0) { %>height: <%= height %>;<% } %>"><h5 class="nytint-vb-title"><%= title || "Reactions on Twitter" %></h5><%= shared.slide_controls({ effect: config.effect }) %><div class="nytint-vb-slides"></div></div>';t.registerContainerTemplate("tweet",e)}(i),function(t){var e='<div class="nytint-vb-comment"><div class="nytint-vb-commenter"><% if (item.link) { %><a href="<%= item.link %>" class="nytint-vb-commenter-name"><%= item.author %></a><% } else { %><span class="nytint-vb-commenter-name"><%= item.author %></span><% } %><span> &middot; </span><span class="nytint-vb-commenter-location"><%= item.location %></span></div><div class="nytint-vb-comment-text"><%= item.text %></div><div class="nytint-vb-comment-metadata""><% if (item.timestamp) { %><span class="nytint-vb-comment-timestamp"><%= item.timestamp %></span><% } %></div></div>';t.registerSlideTemplate("comment",e)}(i),function(t){var e='<div class="nytint-vb-generic"></div>';t.registerSlideTemplate("generic",e)}(i),function(t){var e='<div class="nytint-vb-instagram"><a href="<%= item.permalink %>"><img src="<%= item.thumbnail %>" /></a></div>';t.registerSlideTemplate("instagram",e)}(i),function(t){var e='<div class="nytint-vb-quote"><div class="nytint-vb-comment-text"><% if (item.link) { %><a href="<%= feed.mobilizeLinks(item.link) %>"><% } %><%= item.text %><% if (item.link) { %></a><% } %></div><div class="nytint-vb-author"><span>â</span><% if (item.link) { %><a href="<%= feed.mobilizeLinks(item.link) %>" class="nytint-vb-author-name"><%= item.author %></a><% } else { %><span class="nytint-vb-author-name"><%= item.author %></span><% } %><% if (item.context) { %><span class="nytint-vb-context">, <%= item.context %></span><% } %></div></div>';t.registerSlideTemplate("quote-iphone",e)}(i),function(t){var e='<div class="nytint-vb-quote"><div class="nytint-vb-comment-text"><%= item.text %></div><div class="nytint-vb-author"><span>â</span><% if (item.link) { %><a href="<%= item.link %>" class="nytint-vb-author-name"><%= item.author %></a><% } else { %><span class="nytint-vb-author-name"><%= item.author %></span><% } %><% if (item.context) { %><span class="nytint-vb-context">, <%= item.context %></span><% } %></div></div>';t.registerSlideTemplate("quote",e)}(i),function(t){"use strict";var e='<div class="nytint-vb-tweet"><a href="<%= feed.mobilizeLinks(item.user_url) %>" class="nytint-vb-tweet-avatar"><img height="30" width="30" src="<%= item.user_profile_image_url %>" /></a><a class="nytint-vb-tweet-person" href="<%= feed.mobilizeLinks(item.user_url) %>"><span class="nytint-vb-tweet-name"><%= item.user_name %></span><span class="nytint-vb-tweet-separator"> &middot; </span><span class="nytint-vb-tweet-handle">@<%= item.user_screen_name %></span></a><p class="nytint-vb-tweet-text"><%= item.text %></p><div class="nytint-vb-tweet-metadata"><a href="<%= feed.mobilizeLinks(item.tweet_url) %>" target="_blank" class="nytint-vb-timestamp"><span><%= item.timestamp %></span></a></div></div>';t.registerSlideTemplate("tweet-ipad-strip",e)}(i),function(t){"use strict";var e='<div class="nytint-vb-tweet"><a href="<%= feed.mobilizeLinks(item.user_url) %>" class="nytint-vb-tweet-avatar"><img height="30" width="30" src="<%= item.user_profile_image_url %>" /></a><a class="nytint-vb-tweet-person" href="<%= feed.mobilizeLinks(item.user_url) %>"><span class="nytint-vb-tweet-name"><%= item.user_name %></span><span class="nytint-vb-tweet-separator"> &middot; </span><span class="nytint-vb-tweet-handle">@<%= item.user_screen_name %></span></a><p class="nytint-vb-tweet-text"><%= item.text %></p></div>';t.registerSlideTemplate("tweet-iphone",e)}(i),function(t){"use strict";var e='<div class="nytint-vb-tweet"><a href="<%= item.user_url %>" class="nytint-vb-tweet-avatar"><img height="30" width="30" src="<%= item.user_profile_image_url %>" /></a><a class="nytint-vb-tweet-person" href="<%= item.user_url %>"><span class="nytint-vb-tweet-name"><%= item.user_name %></span><span class="nytint-vb-tweet-separator"> &middot; </span><span class="nytint-vb-tweet-handle">@<%= item.user_screen_name %></span></a><p class="nytint-vb-tweet-text"><%= item.text %></p><div class="nytint-vb-tweet-metadata"><%= shared.twitter_intents({ item: item }) %></div></div>';t.registerSlideTemplate("tweet",e)}(i),function(t){var e={},n={init:function(){this.dataType="script"},parse:function(){var t=window.Chameleon,e=t?this.projectId?t.projectIndex[this.projectId]:t.projectList[t.projectList.length-1]:{projectData:{comments:[]}};return this.leadallUrl=e.link,e.comments},adaptors:{comment:{location:function(t){return t.subtext}},quote:{context:function(t){return t.subtext}}}};t.registerFeed("chameleon",n,e)}(i),function(t,n){var i=window.NYTD||{},r=i.NYTINT||{};i.NYTINT=i.NYTINT||r,"undefined"==typeof r.Stream&&(r.Stream={}),"undefined"==typeof r.Stream.AllStreams&&(r.Stream.AllStreams={});var a,s={dataType:"script"},o={fetch:function(){return i.NYTINT.Stream.AllStreams["twitter-stream"]=i.NYTINT.Stream.AllStreams["twitter-stream"]||{},this.origParse=i.NYTINT.Stream.AllStreams["twitter-stream"]._parse||function(){},i.NYTINT.Stream.AllStreams["twitter-stream"]._parse=e.bind(function(t){this.response=t||{},i.NYTINT.Stream.AllStreams["twitter-stream"]._parse=this.origParse},this),a.__super__.fetch.apply(this,[])},parse:function(){return this.response=this.response||{},e.filter(this.response.items,function(t){return"tweet"==t.type})},adaptors:{tweet:{id:"tweet_id",user_profile_image_url:"user_image",text:function(t){return this.linkifyTweet(this.linkify(t.tweet_text))},timestamp:function(t){var i=e.isNumber(t.tweeted_at)?1e3*t.tweeted_at:Date.parse(t.tweeted_at);return e.isNaN(i)?"Details":n(i).fromNow()}}}};a=t.registerFeed("live_dashboard",o,s)}(i,n),function(t){var e,n={},i={adaptors:{quote:{author:function(t){return t.author_override||t.author}},comment:{},generic:{}}};e=t.registerFeed("data_vault",i,n)}(i),function(t,e){var n={},i={parse:function(t){var n=e.pluck(t,"comment_payload");return this.leadallUrl=n.length?n[0].assetURL+"#commentsContainer":null,n},adaptors:{comment:{text:"commentBody",author:"userDisplayName",link:function(t){return t.assetURL+"?comments#permid="+t.commentSequence}}}};t.registerFeed("lasso",i,n)}(i,e),function(t){var n,i={dataType:"jsonp"},r={init:function(t){this.referUrl=t.referUrl},parse:function(t){var n=t.elements,i=this.referUrl,r=e(n).map(function(t){return t.referUrl=i,t});return r},adaptors:{instagram:{}}};n=t.registerFeed("storify",r,i)}(i),function(t,e,n){var i={},r={adaptors:{tweet:{user_profile_image_url:function(t){return t.user.profile_image_url},user_id:function(t){return t.user.id},user_screen_name:function(t){return t.user.screen_name},user_name:function(t){return t.user.name},text:function(t){return this.linkifyTweet(this.linkify(t.text))},timestamp:function(t){return n(t.created_at).fromNow()}}}};t.registerFeed("twitter",r,i)}(i,t,n),i});