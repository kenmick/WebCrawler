/*!CK:3444899090!*//*1454967221,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oyL0f"]); }

__d('CLoggerX',['Banzai','DOM','Event','Keys','Parent','debounce','ge','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=10*60*1000,q=k.RETURN,r={},s=function(v){var w=(v.target||v.srcElement).id,x=(v.target||v.srcElement).value.trim().length,y=t.getTracker(w);if(!y)return;if(x>5&&!y.submitted){h.post('censorlogger',{cl_impid:y.impid,clearcounter:y.clearcounter,instrument:y.type,elementid:w,parent_fbid:y.parent_fbid=='unknown'?null:y.parent_fbid,version:"x"},h.VITAL);t.setSubmitted(w,true);}else if(x===0&&y.submitted&&v.which!=q){r[w]=u(w);r[w]();}else if(x>0&&y.submitted)if(r[w])r[w].reset();},t={init:function(){this.trackedElements=this.trackedElements||{};this.feedbackForms=this.feedbackForms||{};},setImpressionID:function(v){this.init();this.impressionID=v;this.clean();},setComposerTargetData:function(v){this.cTargetID=v.targetID||'unknown';this.cTargetFBType=v.targetType||'unknown';},clean:function(){for(var v in this.trackedElements){if(r[v]){r[v].reset();delete r[v];}delete this.trackedElements[v];}},trackComposer:function(v,w,x){this.setComposerTargetData(x);this.startTracking(v,'composer',this.cTargetID,this.cTargetFBType,w);},trackFeedbackForm:function(v,w,x){this.init();this.impressionID=this.impressionID||x;var y,z;y=w?w.targetID||'unknown':'unknown';z=w?w.targetType||'unknown':'unknown';this.feedbackForms[v]={parent_fbid:y,parent_type:z};},trackMentionsInput:function(v,w){this.init();var x,y,z;if(!v)return;x=l.byTag(v,'form');if(!x)return;y=o(x);z=this.feedbackForms[y];if(!z)return;var aa=w||z.parent_fbid,ba=w?416:z.parent_type;this.startTracking(v,'comment',aa,ba,x);},startTracking:function(v,w,x,y,z){this.init();var aa=o(v);if(this.getTracker(aa))return;var ba=o(z);j.listen(v,'keyup',s.bind(this));this.trackedElements[aa]={submitted:false,clearcounter:0,type:w,impid:this.impressionID,parent_fbid:x,parent_type:y,parentElID:ba};this.addJoinTableInfoToForm(z,aa);},getTracker:function(v){return this.trackedElements?this.trackedElements[v]:null;},setSubmitted:function(v,w){if(this.trackedElements[v])this.trackedElements[v].submitted=w;},incrementClearCounter:function(v){var w=this.getTracker(v);if(!w)return;w.clearcounter++;w.submitted=false;var x=i.scry(n(w.parentElID),'input[name="clp"]')[0];if(x)x.value=this.getJSONRepForTrackerID(v);this.trackedElements[v]=w;},addJoinTableInfoToForm:function(v,w){var x=this.getTracker(w);if(!x)return;var y=i.scry(v,'input[name="clp"]')[0];if(!y)i.prependContent(v,i.create('input',{type:'hidden',name:'clp',value:this.getJSONRepForTrackerID(w)}));},getCLParamsForTarget:function(v,w){if(!v)return "";var x=o(v);return this.getJSONRepForTrackerID(x,w);},getJSONRepForTrackerID:function(v,w){var x=this.getTracker(v);if(!x)return "";return JSON.stringify({cl_impid:x.impid,clearcounter:x.clearcounter,elementid:v,version:"x",parent_fbid:w||x.parent_fbid});}},u=function(v){return m(function(){t.incrementClearCounter(v);},p,t);};f.exports=t;},null);
__d('CensorLogger',['Banzai','DOM','Event','Keys','debounce','ge','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=10*60*1000,p=k.RETURN,q=function(t){var u=(t.target||t.srcElement).id,v=(t.target||t.srcElement).value.trim().length,w=r.tracker(u);if(!w)return;if(v>5&&!w.submitted){if(w.type=='comment'&&w.parent_fbid=='unknown'){if(!r.syncTrackerWithForm(u))r.snowliftSync(u);w=r.tracker(u);}h.post('censorlogger',{impid:w.impid,clearcounter:w.clearcounter,instrument:w.type,elementid:u,parent_fbid:w.parent_fbid=='unknown'?null:w.parent_fbid,version:"original"},h.VITAL);r.setSubmitted(u,true);}else if(v===0&&w.submitted&&t.which!=p){r.debouncers[u]=s(u);r.debouncers[u]();}else if(v>0&&w.submitted)if(r.debouncers[u])r.debouncers[u].reset();},r={init:function(t){this.impressionID=t;for(var u in this.trackedElements)if(!m(u))this.stopTracking(u);for(var v in this.unmatchedForms)if(!m(v))delete this.unmatchedForms[v];},trackElement:function(t,u,v){var w,x,y;this.debouncers=this.debouncers||{};this.trackedElements=this.trackedElements||{};this.unmatchedForms=this.unmatchedForms||{};u=u.toLowerCase();if(u=='composer'){w=v?i.find(t,'div.uiMetaComposerMessageBox textarea.input'):i.find(t,'div.uiComposerMessageBox textarea.input');x=i.find(t,'form.attachmentForm');var z=i.scry(t,'input[name="xhpc_targetid"]')[0];if(z)y=z.value;}else if(u=='comment')w=i.find(t,'div.commentBox textarea.textInput');if(w==null)return;var aa=n(w);if(x)this.addJoinTableInfoToForm(x,n(w));j.listen(w,'keyup',q.bind(this));this.trackedElements[aa]={submitted:false,clearcounter:0,type:u,impid:this.impressionID,parent_fbid:y||'unknown',formID:x?n(x):null};if(u=='comment')this.syncTrackerWithForm(aa);},registerForm:function(t,u){this.unmatchedForms=this.unmatchedForms||{};this.unmatchedForms[t]=u;},syncTrackerWithForm:function(t){for(var u in this.unmatchedForms){var v=m(u);if(v){var w=i.scry(v,'div.commentBox textarea.textInput')[0];if(w){var x=n(w);if(x&&x==t){this.trackedElements[t].parent_fbid=this.unmatchedForms[u];this.trackedElements[t].formID=u;this.addJoinTableInfoToForm(v,t);delete this.unmatchedForms[u];return true;}}}}return false;},snowliftSync:function(t){var u,v=m(t);if(v&&(u=i.scry(v,'^.fbPhotosSnowboxFeedbackInput')[0])){var w=i.find(u,'input[name="feedback_params"]'),x=JSON.parse(w.value).target_fbid;this.trackedElements[t].parent_fbid=x;this.trackedElements[t].formID=u.id;this.addJoinTableInfoToForm(u,t);return true;}return false;},stopTracking:function(t){delete this.trackedElements[t];if(this.debouncers[t]){this.debouncers[t].reset();delete this.debouncers[t];}},tracker:function(t){return this.trackedElements[t];},getSubmitted:function(t){return this.trackedElements[t]?this.trackedElements[t].submitted:false;},setSubmitted:function(t,u){if(this.trackedElements[t])this.trackedElements[t].submitted=u;},incrementClearCounter:function(t){if(!this.tracker(t))return;this.trackedElements[t].clearcounter++;this.trackedElements[t].submitted=false;var u=i.scry(m(this.trackedElements[t].formID),'input[name="clp"]')[0];if(u)u.value=JSON.stringify({censorlogger_impid:this.trackedElements[t].impid,clearcounter:this.trackedElements[t].clearcounter,element_id:t});},addJoinTableInfoToForm:function(t,u){i.prependContent(t,i.create('input',{type:'hidden',name:'clp',value:JSON.stringify({censorlogger_impid:this.impressionID,clearcounter:0,element_id:u,version:"original"})}));}},s=function(t){return l(function(){r.incrementClearCounter(t);},o,r);};f.exports=r;},null);
__d('legacy:ScrollAwareDOM',['ScrollAwareDOM'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.ScrollAwareDOM=c('ScrollAwareDOM');},3);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d('EntstreamAttachmentRelatedShare',['Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CSS','DOM','Event','XPubcontentInlinePhotoPivotsEventsController','csx','cx','ge','getOrCreateDOMID','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=2,u=3,v={loadRelatedAttachment:function(w,x,y){var z=null;if(typeof w==="string"){z=q(w);}else z=w;if(!z)return;var aa=m.listen(z,'click',function(){aa.remove();h.inform(j.ARTICLE_CLICK,{attachment:z,global_share_id:x,is_right_click:false,share_id:y});}),ba=m.listen(z,'mousedown',function(event){if(event.which===u||event.button===t){ba.remove();h.inform(j.ARTICLE_CLICK,{attachment:z,global_share_id:x,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(w,x){var y=q(w);if(!y)return;var z=m.listen(y,'click',function(){z.remove();h.inform(j.PHOTO_CLICK,{attachment:y,storyid:x});});},loadRelatedGameAttachment:function(w,x){var y=null;if(typeof w==="string"){y=q(w);}else y=w;if(!y)return;s(m.listen(y,'click',function(){h.inform(j.GAME_CLICK,{attachment:y,global_share_id:x});}));s(m.listen(y,'mousedown',function(event){if(event.which===u||event.button===t)h.inform(j.GAME_CLICK,{attachment:y,global_share_id:x});}));},loadRelatedLSCVideoAttachment:function(w,x){var y=null;if(typeof w==='string'){y=q(w);}else y=w;if(!y)return;var z="^div._4-u2",aa=l.scry(y,z),ba=m.listen(y,'click',function(){ba.remove();h.inform(j.VIDEO_CLICK,{attachment:y,global_share_id:x});});},loadRelatedLSCInlineVideoAttachment:function(w,x){var y=null;if(typeof w==='string'){y=q(w);}else y=w;if(!y)return;m.listen(y,'click',function(){var z="^div._4-u2",aa="_1d8v",ba=l.scry(y,z),ca=ba.length===1?ba[0]:null,da=ca.parentNode,ea=da.previousSibling;while(!ea){da=da.parentNode;ea=da.previousSibling;}if(!k.hasClass(ea,aa)){var fa=l.create('div',{className:aa}),ga=l.insertBefore(ca.parentNode,fa),ha=ga.length>=1?ga[0]:null;}else ha=ea;var ia=r(ha);new i().setURI('/ajax/flash/expand_inline.php').setData({share_id:x,target_div:ia,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(y.parentNode).send();});},loadRelatedEventsPivotAttachment:function(w,x){var y=null;if(typeof w==="string"){y=q(w);}else y=w;if(!y)return;s(m.listen(y,'click',function(){h.inform(j.EVENT_JOIN,{attachment:y,event_id:x});}));},closeButton:function(w,x){m.listen(w,'click',function(){l.remove(x);});},closeButtonPhotoPivots:function(w,x,y,z){m.listen(w,'click',function(){var aa=n.getURIBuilder(),ba={story_id:y,search_query_type:z,event:'hide'};new i().setMethod('POST').setURI(aa.getURI()).setData(ba).send();l.remove(x);});},seeAllLinkPhotoPivots:function(w,x,y){m.listen(w,'click',function(){var z=n.getURIBuilder(),aa={story_id:x,search_query_type:y,event:'see_all'};new i().setMethod('POST').setURI(z.getURI()).setData(aa).send();});},removeOldSuggestions:function(w){var x=q(w);if(!x)return;var y=l.scry(x.parentNode,"._5d73");for(var z=1;z<y.length;z++)l.remove(y[z]);setTimeout(function(){k.show(y[0]);},1000);},showHiddenSuggestions:function(w){var x=m.listen(w,'click',function(){x.remove();var y="^._1ui8",z=l.scry(w,y);if(!z)return;k.hide(z[0]);var aa=z[0].previousSibling;while(aa){k.show(aa);aa=aa.previousSibling;}});}};f.exports=v;},null);
__d('FeedTrackingAsync',['Arbiter','Run','collectDataAttributes'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k;f.exports.init=function(){if(k)return;k=h.subscribe('AsyncRequest/send',function(l,m){var n=m.request,o=n.getRelativeTo();if(o){var p=n.getData(),q=j(o,['ft']);if(q.ft&&Object.keys(q.ft).length)Object.assign(p,q);}});i.onLeave(function(){k.unsubscribe();k=null;});};},null);
__d('ViewportTrackingHelper',['Event','Vector','getViewportDimensions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getScrollListener:function(l){return h.listen(window,'scroll',l);},looseIsVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=i.getScrollPosition().y,o=j().height,p=o+m-n;return l.y<p;},isVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=j().height,o=Math.max(l.y,0),p=Math.min(l.y+l.height,n),q=Math.min(l.height,m);return p-o>=q;},isDescendantOf:function(l,m){if(l===m)return l;while(l&&l.parentNode){if(l.parentNode===m)return l;l=l.parentNode;}return false;}};f.exports=k;},null);
__d('ViewportTracking',['Arbiter','AsyncSignal','Banzai','BanzaiScuba','CSS','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','UserActivity','Vector','ViewportTrackingHelper','clickRefAction','collectDataAttributes','cx','debounce','getElementPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=97,fa=51,ga='vpv',ha='/feed/feed_tracking/vpv_waterfall_logging',ia=3,ja=2,ka=1,la=0,ma=1,na=2,oa=3,pa=4;function qa(){'use strict';}qa.prototype.init=function(ra){'use strict';this.useBanzai=true;this.viewportHeightRatio=ra.viewport_height_ratio?ra.viewport_height_ratio:.25;this.vpvDebug=!!ra.vpv_debug;this.vpvdDebug=!!ra.vpvd_debug;this.vpvdAnalysis=!!ra.vpvd_analysis;this.useWaterfallLogging=!!ra.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=ca().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(ra);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=na;this.latestUserFocus=na;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!ra.is_loose;this.maxScrollPosition=0;if(ra.tracking_duration_config){this.scrollThrottlingInterval=ra.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=ra.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=ra.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=ra.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=ra.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=ra.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=ra.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=ra.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=ra.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=ra.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=ra.tracking_duration_config.discard_vpvd_interval_threshold;}var sa,ta=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;sa=da((function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,v.getScrollPosition().y);ta();}).bind(this));}else sa=ta;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(xa){this.waterfallLogStep(xa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=ra.vpv_heartbeat_interval;this.passVPVHeartbeatGK=ra.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval((function(){this._sendSignal('interval');}).bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new t();this.subscriptions.addSubscriptions(this._getScrollListener(sa),p.listen(window,'resize',(function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=ca().height;sa();}).bind(this)),p.listen(window,'focus',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}).bind(this)),p.listen(window,'blur',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}).bind(this)),h.subscribe(r.NAVIGATION_BEGIN,this.cleanup.bind(this)),h.subscribe('Stream/totalHeadLoadedStories',(function(xa,ya){this._headLoadStoryCount=ya.count;}).bind(this)),h.subscribe(q.STORIES_INSERTED,(function(){if(!this.initialStoriesLogged){var xa=this.getStoriesInView();xa.forEach(this.logAnnotatedVPV,this);}else sa();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}).bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ua=da((function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}).bind(this),this.scrollThrottlingInterval),va=da((function(event){this.handleKeyboard(event);}).bind(this),this.keyboardThrottlingInterval),wa=da((function(event){this.handleMouse(event);}).bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(p.listen(window,'scroll',ua),p.listen(document.documentElement,'DOMMouseScroll',ua),p.listen(document.documentElement,'mousewheel',ua));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'keydown',va));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'mouseover',wa),p.listen(document.documentElement,'mousemove',wa));this.subscriptions.addSubscriptions(h.subscribe('Event/stop',(function(xa,ya){this.handleMouse(ya.event);}).bind(this)));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'click',(function(event){this.handleMouse(event);}).bind(this)),h.subscribe('PhotoSnowlift.OPEN',(function(){this.userFocus=oa;this.handleLayers();}).bind(this)),h.subscribe('PhotoSnowlift.CLOSE',(function(){this.userFocus=ma;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}).bind(this)));this._userActivityPoller();}s.onLeave(this.cleanup.bind(this));s.onUnload(this.cleanup.bind(this));};qa.prototype._getScrollListener=function(ra){'use strict';return p.listen(window,'scroll',ra);};qa.prototype.cleanup=function(){'use strict';if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var ra=this.getStoriesInView();ra.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};qa.prototype.fireTimer=function(){'use strict';if(this.useWaterfallLogging){var ra=this.getStoriesInViewIgnoreHeight();ra.forEach(function(sa){this.waterfallLogStep(sa,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};qa.prototype.heartBeatIsEnabled=function(){'use strict';return false;};qa.prototype.getSessionID=function(){'use strict';return null;};qa.prototype._sendSignal=function(ra){'use strict';if(!this.heartBeatIsEnabled())return;var sa=-1;if(ra=='interval'){sa=this.intervalCount++;}else if(ra=='fireTimer')sa=this.fireTimerCount++;var ta=-1,ua=-1,va=-1;if(this.storiesInView.length>0){ta=this.getStoryID(this.storiesInView[0]);ua=this.getQueryID(this.storiesInView[0]);va=this.getFBFeedLocations(this.storiesInView[0]);}var wa=new k('vpv_heartbeat_js');wa.addInteger('qid',ua);wa.addInteger('uid',m.getID());wa.addInteger('firststoryid',ta);wa.addInteger('time',Math.round(Date.now()/1000));wa.addNormal('type',ra);wa.addInteger('count',sa);wa.addInteger('fbfeed_location',va);wa.post();};qa.prototype._userActivityPoller=function(){'use strict';if(!this.userInactiveLock&&!u.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=na;this.updateTimeTrackingData(false,'user_activity_inactive');u.subscribeOnce((function(){this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}).bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};qa.prototype.getQueryID=function(ra){'use strict';return -1;};qa.prototype.getFBFeedLocations=function(ra){'use strict';return -1;};qa.prototype.getFBFeedInsertionPosition=function(ra){'use strict';return -1;};qa.prototype.createVPVDTimer=function(ra){'use strict';var sa=document.createElement("Label");sa.setAttribute("for",ra);sa.setAttribute("class",'vpvd_debug_timer');return sa;};qa.prototype.updateVPVDTimer=function(ra){'use strict';var sa=this.activeStories[ra].story,ta=n.scry(sa,'.vpvd_debug_timer');if(!ta.length){ta=[this.createVPVDTimer(sa),this.createVPVDTimer(sa)];var ua=n.scry(sa,'.UFIRow');if(ua.length&&ua[ua.length-1].clientWidth>0){ua[ua.length-1].appendChild(ta[0]);}else sa.appendChild(ta[0]);sa.insertBefore(ta[1],sa.firstChild);}var va=this.totalVPVDuration[ra],wa=Math.floor(va/1000)+'.'+Math.floor(va%1000/100);n.setContent(ta[0],wa);n.setContent(ta[1],wa);};qa.prototype.updateVPVDTimers=function(){'use strict';for(var ra in this.activeStories)if(this.activeStories.hasOwnProperty(ra))this.updateVPVDTimer(ra);};qa.prototype.logVpvdAnalysis=function(ra,sa,ta,ua,va,wa){'use strict';var xa=new k('vpv_duration');xa.addDenorm('qid',this.getQueryID(this.activeStories[ra].story));xa.addDenorm('uid',m.getID());xa.addDenorm('vsid',ra);xa.addInteger('time',Math.round(Date.now()/1000));xa.addInteger('duration',ua);xa.addInteger('total_duration',va);xa.addNormal('story_state',this.activeStories[ra].state);xa.addNormal('is_active_state',ta);xa.addNormal('num_visible_stories',this.numVisibleStories);xa.addInteger('story_height',this.activeStories[ra].story_height);xa.addInteger('story_visible_height',this.activeStories[ra].height);xa.addInteger('state_visible_height',wa);xa.addInteger('total_visible_height',this.totalVisibleHeight);xa.addInteger('total_height',this.totalHeight);xa.addNormal('user_focus',this.latestUserFocus);xa.addNormal('next_user_focus',this.userFocus);xa.addInteger('vpvd',sa);xa.addInteger('accumulated_vpvd',this.activeStories[ra].vpvd);xa.addNormal('user_activity',this.latestUserActivity);xa.addNormal('next_user_activity',this.userActivity);xa.addInteger('story_position_y',this.activeStories[ra].y);xa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[ra].story));xa.addNormal('visible_position',this.activeStories[ra].visible_position);xa.addNormal('is_focused_story',this.activeStories[ra].is_focused);xa.post();};qa.prototype.shouldDiscardStory=function(ra){'use strict';return this.activeStories[ra].height!=this.activeStories[ra].story_height&&this.activeStories[ra].height<this.totalHeight/2;};qa.prototype.calculateTotalHeight=function(){'use strict';this.totalHeight=0;for(var ra in this.activeStories)if(this.activeStories.hasOwnProperty(ra))this.totalHeight+=this.activeStories[ra].height;};qa.prototype.updateVPVDurations=function(ra){'use strict';if(this.latestUserFocus===na||ra-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var sa={1:0,2:0,3:0},ta=ra-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var ua in this.activeStories)if(this.activeStories.hasOwnProperty(ua))if(!(this.latestUserFocus===ma&&ta&&this.shouldDiscardStory(ua))){sa[this.activeStories[ua].state]+=this.activeStories[ua].height;this.totalVisibleHeight+=this.activeStories[ua].height;}var va=0,wa=ra-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===ma){wa=sa[ia]>0?this.focused_state_duration:this.active_state_duration;wa=Math.min(wa,ra-this.latestTimeTrackingTimestamp);va=ra-this.latestTimeTrackingTimestamp-wa;}var xa=0,ya=ia;for(var za=ia;za>=ka;za--)if(sa[za]>0){xa=sa[za];ya=za;break;}var ab=sa[ia]+sa[ja]+sa[ka],bb=0;for(ua in this.activeStories)if(this.activeStories.hasOwnProperty(ua)){if(this.latestUserFocus===ma&&ta&&this.shouldDiscardStory(ua))continue;if(xa>0&&this.activeStories[ua].state>=ya){bb=wa*(this.activeStories[ua].height/xa);if(this.vpvdAnalysis&&wa>0)this.logVpvdAnalysis(ua,bb,true,wa,wa+va,xa);this.activeStories[ua].vpvd+=bb;this.totalVPVDuration[ua]+=bb;}if(ab>0){bb=va*(this.activeStories[ua].height/ab);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ua,bb,false,va,wa+va,ab);this.activeStories[ua].vpvd+=bb;this.totalVPVDuration[ua]+=bb;}}};qa.prototype.updateActiveStory=function(ra,sa,ta,ua){'use strict';this.activeStories[ra].state=sa;this.activeStories[ra].ts=ta;this.activeStories[ra].height_snapshot=ua[ra].height;this.activeStories[ra].is_focused=this.focusedStory===ua[ra].story;this.activeStories[ra].story_height=ua[ra].story_height;if(this.vpvdAnalysis){this.activeStories[ra].visible_position=ua[ra].visible_position;this.activeStories[ra].y=ua[ra].y;}};qa.prototype.updateActiveStories=function(ra,sa){'use strict';for(var ta in ra)if(ra.hasOwnProperty(ta))if(ta in this.activeStories){this.activeStories[ta].height=ra[ta].height;var ua=ra[ta].height-this.activeStories[ta].height_snapshot;if(this.focusedStory===ra[ta].story){this.updateActiveStory(ta,ia,sa,ra);}else if(ua<=-this.height_diff_to_change_state){this.updateActiveStory(ta,this.shouldDiscardStory(ta)?la:ka,sa,ra);}else if(ua>=this.height_diff_to_change_state||this.activeStories[ta].is_focused||this.activeStories[ta].height===this.activeStories[ta].story_height)this.updateActiveStory(ta,ja,sa,ra);}else{this.activeStories[ta]={evp_ts:sa,story:ra[ta].story,height:ra[ta].height,vpvd:0};if(!this.totalVPVDuration[ta])this.totalVPVDuration[ta]=0;this.updateActiveStory(ta,ja,sa,ra);}};qa.prototype.recordVPVDurations=function(ra,sa){'use strict';for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(sa||!(ta in ra)){if(this.activeStories[ta].vpvd>this.focused_state_duration||this.activeStories[ta].vpvd===this.totalVPVDuration[ta])this.recordTimeStoryWasInView(this.activeStories[ta]);delete this.activeStories[ta];}};qa.prototype.updateTimeTrackingData=function(ra,sa){'use strict';this.userActivity=sa;if(!this.activeStories)this.activeStories={};var ta=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=ta;var ua=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(ta);this.updateActiveStories(ua,ta);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ua,ra);if(ra){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=ta;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};qa.prototype.needsToUpdateTimeTrackingData=function(){'use strict';return !(this.latestUserFocus===this.userFocus&&(this.userFocus===na||this.userFocus===ma&&!this.latestFocusedStory&&!this.focusedStory));};qa.prototype.getfocusedStory=function(ra){'use strict';var sa=this.getVisibleStoriesFromCache();for(var ta in sa)if(sa.hasOwnProperty(ta))if(w.isDescendantOf(ra,sa[ta].story))return sa[ta].story;return null;};qa.prototype.handleLayers=function(){'use strict';if(this.userFocus===oa||this.userFocus===pa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};qa.prototype.didInteractWithStream=function(ra){'use strict';return w.isDescendantOf(ra,this.getStream())||w.isDescendantOf(this.getStream(),ra);};qa.prototype.handleScroll=function(event){'use strict';if(this.handleLayers())return;var ra=Date.now(),sa=ba(this.getStream()).y;if(sa!=this.lastStreamY||ra-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=ra;this.userFocus=ma;}else this.userFocus=na;this.lastStreamY=sa;if(this.userFocus===ma||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};qa.prototype.handleKeyboard=function(event){'use strict';if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=ma;this.focusedStory=this.getfocusedStory(event.target);}else if(l.hasClass(event.target,'shareInput')){this.userFocus=ma;this.focusedStory=this.latestActiveStory;}else this.userFocus=na;if(this.userFocus===ma||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};qa.prototype.handleMouse=function(event){'use strict';if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=ma;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=na;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};qa.prototype.getStoriesInView=function(){'use strict';var ra=this.getAllStories(),sa=[],ta=false;for(var ua=0;ua<ra.length;ua++){var va=ra[ua],wa=this.getStoryID(va);if(this.hasBeenVisible(wa))continue;if(this.isVisible(va)){if(va.getAttribute('data-insertion-position')===null)va.setAttribute('data-insertion-position',ua-this._headLoadStoryCount);sa.push(va);ta=true;}else if(ta)break;}return sa;};qa.prototype.getStoriesInViewIgnoreHeight=function(){'use strict';var ra=this.getAllStories(),sa=false,ta=[];for(var ua=0;ua<ra.length;ua++){var va=ra[ua];if(this.isVisible(va,false,0)){ta.push(va);sa=true;}else if(sa)break;}return ta;};qa.prototype.getAllStoriesFromCache=function(){'use strict';if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};qa.prototype.invalidateAllStoriesCache=function(){'use strict';this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};qa.prototype.getVisibleStoriesFromCache=function(){'use strict';if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};qa.prototype.invalidateVisibleStoriesCache=function(){'use strict';this.cachedVisibleStories=null;};qa.prototype.getAllStoriesInView=function(){'use strict';var ra=this.getAllStoriesFromCache(),sa={},ta=false,ua=0,va=ra.length,wa=1,xa=ra.length;if(this._indexOfLastVisibleStoryOnPreviousPass>va/2){ua=va-1;va=-1;wa=-wa;}for(var ya=ua;ya!=va;ya+=wa){var za=ra[ya],ab=this.getHeightIfVisible(za,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*o.getElementDimensions(za).height));if(ab>0||za===this.focusedStory){if(za.getAttribute('data-insertion-position')===null)za.setAttribute('data-insertion-position',ya-this._headLoadStoryCount);var bb=this.getStoryID(za);sa[bb]={story:za,height:ab,story_height:o.getElementDimensions(za).height};ta=true;if(this.vpvdAnalysis){sa[bb].y=ba(za).y;sa[bb].visible_position=ya;xa=Math.min(xa,ya);}}else if(ta){this._indexOfLastVisibleStoryOnPreviousPass=ya-wa;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(bb in sa)if(sa.hasOwnProperty(bb)){sa[bb].visible_position-=xa;this.numVisibleStories++;}}return sa;};qa.prototype.getTimetrackingDataToLog=function(ra){'use strict';var sa={evt:ea,vpvd_start_timestamp:ra.evp_ts,vpvd_time_delta:Math.round(ra.vpvd),story_height:o.getElementDimensions(ra.story).height,viewport_height:this.cachedViewportHeight};return {ft:sa};};qa.prototype.recordTimeStoryWasInView=function(ra){'use strict';if(this.isTimetrackingEnabled&&ra.vpvd>0){var sa=this.getTimetrackingDataToLog(ra),ta=y(ra.story,['ft']);Object.assign(sa.ft,ta.ft);var ua=!!ta.ft.ei&&sa.ft.vpvd_time_delta>this.minTimeToReportImmediately;delete sa.ei;this.sendDataToLog(ra.story,sa,ua);}};qa.prototype.hasBeenVisible=function(ra){'use strict';return ra in this.readStoryIDs;};qa.prototype.isVisible=function(ra,sa,ta){'use strict';return this.getHeightIfVisible(ra,sa,ta)>0;};qa.prototype.getHeightIfVisible=function(ra,sa,ta){'use strict';if(sa===undefined)sa=this.isLoose;if(ta===undefined)ta=this.minSizeToBeVisible;var ua=v.getScrollPosition().y,va=ca().height,wa=ba(ra),xa=o.getElementDimensions(ra),ya=va+this.maxScrollPosition-ua;if(!wa.x&&!wa.y&&!xa.x&&!xa.y)return false;if(sa&&wa.y<ya)return true;var za=Math.max(wa.y,0),ab=Math.min(wa.y+xa.height,va),bb=Math.min(xa.height,ta);return ab-za>=bb?ab-za:0;};qa.prototype.getHeightInViewport=function(ra){'use strict';var sa=ca().height,ta=ba(ra),ua=o.getElementDimensions(ra);if(!ta.x&&!ta.y&&!ua.x&&!ua.y)return false;var va=Math.max(ta.y,0),wa=Math.min(ta.y+ua.height,sa);return wa-va;};qa.prototype.sendDataToLog=function(ra,sa,ta){'use strict';if(this.useBanzai){var ua={};if(ta)ua.delay=3000;var va=this.getSessionID();if(va)sa.ft.session_id=va;if(this.useWaterfallLogging&&sa.ft.evt==fa){sa.ft.should_waterfall_logging=1;sa.ft['interface']='www';var wa=!this.initialStoriesLogged;this.waterfallLogStep(ra,'200_sent_to_banzai',wa);}j.post('feed_tracking',sa,ua);}else x(ga,ra,null,'FORCE',sa);};qa.prototype.waterfallLogStep=function(ra,sa,ta){'use strict';var ua=this.getStoryID(ra);if(this.loggedStoryIDs[sa]&&this.loggedStoryIDs[sa][ua])return;var va=this.getWaterfallData(ra,sa,ta);if(!va.qid)return;new i(ha,va).send();if(!this.loggedStoryIDs[sa])this.loggedStoryIDs[sa]={};this.loggedStoryIDs[sa][ua]=true;};qa.prototype.getWaterfallData=function(ra,sa,ta){'use strict';var ua=this._getDataToLogImpl(ra),va=y(ra,['ft']);Object.assign(ua.ft,va.ft);var wa=ua.ft;wa.height_in_viewport=this.getHeightInViewport(ra);wa.step=sa;wa.is_initial_story=ta?1:0;wa['interface']='www';return wa;};qa.prototype.addSeenClassToStory=function(ra){'use strict';l.addClass(ra,"_50nb");l.removeClass(ra,"_50mx");l.removeClass(ra,"_2z-5");};qa.prototype.markStoryRead=function(ra){'use strict';var sa=this.getStoryID(ra);if(!sa||this.hasBeenVisible(sa))return;this.readStoryIDs[sa]=true;this.annotatedStoryIDs[sa]=true;var ta=this._getDataToLogImpl(ra),ua=y(ra,['ft']);Object.assign(ta.ft,ua.ft);delete ta.ei;this.sendDataToLog(ra,ta,false);l.addClass(ra,"_x72");if(this.vpvDebug)l.addClass(ra,"_5m7s");this.addSeenClassToStory(ra);};qa.prototype.logAnnotatedVPV=function(ra){'use strict';var sa=this.getStoryID(ra);if(!sa||sa in this.annotatedStoryIDs)return;this.annotatedStoryIDs[sa]=true;var ta=this._getDataToLogImpl(ra),ua=y(ra,['ft']);Object.assign(ta.ft,ua.ft);delete ta.ei;ta.ft.vpv_ft_only=1;this.sendDataToLog(ra,ta,false);};qa.prototype._getDataToLogImpl=function(ra){'use strict';var sa=this.getDataToLog(ra);if(!sa.ft)sa.ft={};return sa;};f.exports=qa;},null);
__d('collectSubtreeData',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r]);}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n);}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1);}else n[u][v].push(')');}return n;}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o;}f.exports=i;},null);
__d("getFullScreenElement",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;}f.exports=h;},null);
__d('recordTNTreeData',['collectSubtreeData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={},m=h(j,['ft']);for(var n in m.ft){l[n+'_tree']=m.ft[n];if(n==='tn-debug')j.setAttribute('tn-debug_subtree',m.ft[n]);}l.evt_value=j.offsetHeight;if(k)l.offset=Math.max(0,j.offsetTop-k.offsetTop);return l;}f.exports=i;},null);
__d('StreamViewportTracking',['DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n,o=51;m=babelHelpers.inherits(p,j);n=m&&m.prototype;p.prototype.init=function(q,r){'use strict';if(r)this.$StreamViewportTracking1=r;n.init.call(this,q);this.initSubscriptions();};p.prototype.initSubscriptions=function(){'use strict';};p.prototype.getDataFromConfig=function(q){'use strict';this.isTimetrackingEnabled=1;this.timeout=q.record_delay;};p.prototype.getTimeout=function(){'use strict';return this.timeout;};p.prototype.getStorySelector=function(){'use strict';return '.uiStreamStory';};p.prototype.getAllStories=function(){'use strict';var q=h.scry(this.getStream(),this.getStorySelector());return q.filter(function(r){return r.getAttribute('data-ft');});};p.prototype.getStoryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.mf_story_key;};p.prototype.getQueryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.qid;};p.prototype.getFBFeedLocations=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.fbfeed_location;};p.prototype.getFBFeedInsertionPosition=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.insertion_position;};p.prototype.getDataToLog=function(q){'use strict';var r={},s=this.getStream();r=l(q,s);var t=q.getAttribute('data-insertion-position');if(t!==null)r.inspos=t;r.evt=o;r.vpv_time=Math.round(Date.now()/1000);var u=h.scry(q,".fbStoryAttachmentImage")[0];if(u){var v=i.getElementDimensions(u);r.story_image_height=v.height;r.story_image_width=v.width;}return {ft:r};};p.prototype.getStream=function(){'use strict';if(this.$StreamViewportTracking1)return this.$StreamViewportTracking1;return k('home_stream');};p.prototype.heartBeatIsEnabled=function(){'use strict';return true;};p.init=function(q,r){'use strict';p.instance=new p();p.instance.init(q,r);};p.getInstance=function(){'use strict';return p.instance;};function p(){'use strict';m.apply(this,arguments);}f.exports=p;},null);
__d('FbFeedAccessible',['AccessibilityConfig','Arbiter','ARIA','Bootloader','BootloadedComponent.react','CSS','DOMQuery','JSResource','React','ReactDOM','cx','csx','fbt','ge','getOrCreateDOMID','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x='Accessibility/StoriesRequested',y='Accessibility/StoriesLoaded',z='Accessibility/StoryContentInserted',aa='Accessibility/SubstreamInserted',ba=undefined,ca=undefined,da={init:function(ea){ba=ea;if(h.a11yNewsfeedStoryEnumeration)k.loadModules(["LitestandMessages","SubscriptionsHandler"],(function(fa,ga){var ha=new ga();ha.addSubscriptions(i.subscribe(fa.STORIES_REQUESTED,this._onStoriesRequested.bind(this)),i.subscribe(fa.STORIES_INSERTED,this._onInsertedSubstream.bind(this)),i.subscribe(fa.NEWER_STORIES_INSERTED,this._onInsertedSubstream.bind(this)),i.subscribe(y,this._processStoriesLoaded.bind(this)),i.subscribe(x,this._processStoriesRequested.bind(this)),i.subscribe(z,this._processStoryContentInserted.bind(this)),i.subscribe(aa,this._processInsertedSubstream.bind(this)));this._enumerateStories();}).bind(this));},informStoryContentInserted:function(ea){i.inform(z,ea);this.setAriaLabelledBy(ea);},setAriaLabelledBy:function(ea){var fa=u(ea),ga;if(fa&&this._isStory(fa)){if(fa.getAttribute('aria-labelledby'))return;ga=this._filterForElement(fa,["._4gns","._5pbw",".timestampContent",".uiStreamSponsoredLink","._5pbx"]);if(ga.length>0)fa.setAttribute('aria-labelledby',ga.map(function(ha){return v(ha);}).join(' '));}},_getStories:function(ea){return n.scry(ea||ba,"._5jmm");},_onInsertedSubstream:function(ea,fa){if(fa&&fa.substream_id)i.inform(aa,fa.substream_id);},_onStoriesRequested:function(){i.inform(x);},_setEnumerationText:function(ea,fa,ga){var ha=p.createElement(l,{bootloadLoader:o('FbFeedPager.react'),bootloadPlaceholder:p.createElement('div',null),position:fa,total:ga,'aria-hidden':'true'});q.render(ha,ea);},_enumerateStories:function(){var ea=this._getStories(ba);ca=ea.length;ea.forEach((function(fa,ga){this._enumerateStory(fa,ga+=1);}).bind(this));},_enumerateSubstream:function(ea){var fa=this._getStories();ca=fa.length;var ga=this._getStories(u(ea)),ha=ga.length||0;for(var ia=0;ia<ha;ia++)this._registerStoryEnumerationPosition(ga[ia],ca-ha+(ia+1),ia+1);},_enumerateStory:function(ea,fa){!this._isStory(ea)?w(0):undefined;if(fa>0){var ga=n.scry(ea,"._4gns");if(ga&&ga[0])this._setEnumerationText(ga[0],fa,ca);}},_processStoriesLoaded:function(){j.notify(t._("More stories loaded."));},_processStoriesRequested:function(){j.notify(t._("More stories requested."));},_processInsertedSubstream:function(ea,fa){this._enumerateSubstream(fa);this._enumerateStories();},_processStoryContentInserted:function(ea,fa){var ga=undefined,ha=u(fa);if(ha)ga=JSON.parse(ha.getAttribute('data-ft'));if(ga&&ga.ordinal_position){var ia=ga.ordinal_position.split(':'),ja=ia[0],ka=ia[1];ja=parseInt(ja,10);ka=parseInt(ka,10);this._enumerateStory(ha,ja);if(ka===1)i.inform(y);}},_registerStoryEnumerationPosition:function(ea,fa,ga){var ha=JSON.parse(ea.getAttribute('data-ft'));if(ha){ha.ordinal_position=fa+':'+ga;ea.setAttribute('data-ft',JSON.stringify(ha));}},_isStory:function(ea){return m.hasClass(ea,"_5jmm");},_filterForElement:function(ea,fa){return fa.map(function(ga){return n.scry(ea||document,ga)[0];}).filter(function(ga){return !!ga;});}};f.exports=da;},null);
__d('VideoFrameBuffer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){'use strict';this.$VideoFrameBuffer1=j;this.$VideoFrameBuffer2=i;this.$VideoFrameBuffer3=k||'contain';}h.prototype.updateFrameBuffer=function(){'use strict';if(this.$VideoFrameBuffer4){this.$VideoFrameBuffer2.width=this.$VideoFrameBuffer4;this.$VideoFrameBuffer4=null;}if(this.$VideoFrameBuffer5){this.$VideoFrameBuffer2.height=this.$VideoFrameBuffer5;this.$VideoFrameBuffer5=null;}var i=this.$VideoFrameBuffer2.clientWidth||this.$VideoFrameBuffer2.width,j=this.$VideoFrameBuffer2.clientHeight||this.$VideoFrameBuffer2.height,k=i,l=j,m=this.$VideoFrameBuffer1.videoWidth/this.$VideoFrameBuffer1.videoHeight,n=k/l;if(this.$VideoFrameBuffer3==='cover'){n*=-1;m*=-1;}if(n>m){k=l*m;}else if(n<m)l=k/m;var o=this.$VideoFrameBuffer2.getContext('2d');if(!(o instanceof window.CanvasRenderingContext2D))return;o.drawImage(this.$VideoFrameBuffer1,(i-k)/2,(j-l)/2,k,l);};h.prototype.getDOMNode=function(){'use strict';return this.$VideoFrameBuffer2;};h.prototype.updateDimensions=function(i,j){'use strict';this.$VideoFrameBuffer4=i;this.$VideoFrameBuffer5=j;};f.exports=h;},null);