function twttrWidgetTweetButtonClickHandler(e){"use strict";if(e&&"function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: twitter"}}})}catch(t){}}function initAnalytics(){"use strict";var e=CNN.Analytics.utils;e.addMetadataObject(),e.jsmdTracking(),e.addTrackingTags(document),e.addSocialMediaInteractionMetrics(),CNN.Gallery.analytics.init(document),jQuery(document).on("jumbotron-initialization-complete",CNN.Gallery.analytics.initJumbotronTracking)}var CNN=window.CNN||{},timeout;CNN.Analytics=CNN.Analytics||{},CNN.Gallery=CNN.Gallery||{},CNN.Analytics.utils=function(){"use strict";function e(){var e=CNN.CurrentWidth.getClientWidth(),t=640,n=960,a=1120,i="no-value-set";return i=e>=a?"14col":a>e&&e>=n?"12col":n>e&&e>=t?"8col":"4col"}function t(e){var t={};return t.section="section front",t.special="specials",t.videos="video","string"==typeof e&&e in t&&(e=t[e]),"undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.sectionName||"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(e="index"),e}function n(e,t,n){var a=e.split(";"),i=0;for(t="string"==typeof t&&t.length>0?";expires="+t:"",n="string"==typeof n&&n.length>0?";path="+n:";path=/";i<a.length;i++)document.cookie=a[i]+n+t+";"}function a(e,t){"string"==typeof t&&t.length>0&&n(t),e.currentTarget.attributes.hasOwnProperty("data-vr-track")&&window._vrtrack(e.currentTarget.hrefUrl)}function i(){var n,a,i,r,l=CNN.contentModel.pageType,c="no-value-set",s=c,d=e(),u=jQuery(CNN.Carousel.carouselSelector).first(),p=jQuery("div[data-analytics-pivit]").length>0,h=c,g=c,_=c,y=jQuery(".js-media__video").length,m=CNN.contentModel.env||c,f=CNN.contentModel.analytics&&CNN.contentModel.analytics.showName||"",N=CNN.contentModel.title||c,b=[],v=c,C=c,w=c,k=c,j=c,T=c,M="none",Q=0,z="";if("undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.pageType||"undefined"==typeof CNN.contentModel.sectionName||"section"!==CNN.contentModel.pageType&&"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(N=c),"undefined"!=typeof CNN.contentModel&&"undefined"!=typeof CNN.contentModel.layout&&"error"===CNN.contentModel.layout&&(l="error"),u.length)switch(l){case"article":h=u.data("galleryname"),g=u.find("[data-slidename]").first().data("slidename");break;case"gallery":h=N,g=u.find("[data-slidename]").first().data("slidename"),Q=1}"undefined"!=typeof CNN.contentModel.analytics&&("undefined"!=typeof CNN.contentModel.analytics.publishDate&&(_=CNN.contentModel.analytics.publishDate,b=CNN.contentModel.analytics.publishDate.split("T")[0].split("-"),3===b.length&&(_=b[0]+"/"+b[1]+"/"+b[2])),v=CNN.contentModel.analytics.author||c,C=CNN.contentModel.analytics.cap_genre||c,w=CNN.contentModel.analytics.cap_franchise||c,k=CNN.contentModel.analytics.cap_mediaType||c,j=CNN.contentModel.analytics.cap_topics||c,T=CNN.contentModel.pageType||c,r=CNN.contentModel.analytics.branding_content_page||c,n=CNN.contentModel.analytics.branding_content_zone||c,a=CNN.contentModel.analytics.branding_content_container||c,i=CNN.contentModel.analytics.branding_content_card||c,"gallery"===T&&"string"==typeof CNN.contentModel.analytics.branding_content_page&&"default"!==CNN.contentModel.analytics.branding_content_page&&(z=CNN.contentModel.analytics.branding_content_page),p&&(M="pivit widget")),CNN.omniture={branding_ad_page:c,branding_ad_zone:c,branding_ad_container:c,branding_ad_card:c,branding_content_page:r,branding_content_zone:n,branding_content_container:a,branding_content_card:i,branding_gallery:z,cap_author:v,cap_content_type:T,cap_genre:C,cap_franchise:w,cap_media_type:k,cap_show_name:f,cap_topic:j,video_opportunity:y,content_type:M,friendly_name:s,full_gallery:Q,gallery_name:h,gallery_slide:g,grid_size:d,headline:N,ireport_assignment:c,publish_date:_,rs_flag:m,section:o(CNN.contentModel),template_type:t(l)},"error"===CNN.omniture.template_type&&(CNN.omniture.section=["error",c]),jQuery(document).trigger("cnn-analytics-metadata-added")}function o(e){var t="",n="",a="",i=e,o=e.analytics||{};return a="undefined"!=typeof i.sectionName?i.sectionName:"undefined"!=typeof o.parentPath?o.parentPath.indexOf("/")>-1?o.parentPath.split("/")[1]:o.parentPath:"undefined"!=typeof i.layout&&"search"===i.layout?"search":"no-value-set",u[a]?(t=u[a].section,n=u[a].subsection||""):(t=a,n=""),[t,n]}function r(){var e=location.href.toLowerCase();window.jsmd=_jsmd.init(),-1===e.indexOf("/.element/ssi/ads.iframes/")&&-1===e.indexOf("/doubleclick/dartiframe.html")&&-1===e.indexOf("/search/")&&(_jsmd.plugin.gQuery("refresh")?jsmd.trackMetrics("dynamic-autoRefresh","autorefresh","cnn-autorefresh"):"gallery"!==CNN.omniture.template_type_content&&jsmd.send())}function l(e){var t=jQuery("nav.nav"),n=jQuery("footer.l-footer"),a=CNN.Analytics.hpt;jQuery(e).find("a").each(function(){var i,o,r=jQuery(this),l=r.attr("href");"string"==typeof l&&(o="page",r.closest(".nav",t).length?(o="header",r.data("analytics")?o="header":"string"==typeof e&&e.indexOf("mega-nav")>-1&&(o="meganav")):r.closest(".l-footer",n).length&&(o="footer"),a.getHptValues(r,o).done(function(e){"object"==typeof e&&-1===l.indexOf(e.hptValue)?(i="'hpt="+e.hptValue+";hpt2="+e.hpt2Value+"'",r.attr("onclick","CNN.Analytics.utils.clickEventTracker(event, "+i+")")):"string"==typeof r.data("vr-track")&&l.length>1&&r.attr("onclick","CNN.Analytics.utils.clickEventTracker(event)")}))})}function c(){var e=jQuery("a","div.metadata-header__follow-icon"),t=jQuery("div.share-bar-whatsapp-container");e.click(function(){return d(this)}),t.click(function(){var e,t=window.location.href,n=document.querySelector(".share-bar-whatsapp-container").dataset,a=n.url+" "+n.title+" "+n.storyurl,i=document.getElementById("whatsappIframe");return jQuery("html").hasClass("phone")&&(jQuery("html").hasClass("ios")?i.innerHTML='<iframe src="'+a+'"></iframe>':jQuery("html").hasClass("android")&&(e=window.open(a,"whatsappWindow","innerHeight=100,innerWidth=100"),e.blur())),timeout=setTimeout(function(){null!==e&&"object"==typeof e&&e.close(),document.location=t},1e3),window.addEventListener("pagehide",s),d(this)})}function s(){clearTimeout(timeout),timeout=null,window.removeEventListener("pagehide",s)}function d(e){var t=e.getAttribute("data-social-media-name");if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+t}}})}catch(n){}return!0}var u={videos:{section:"videos"},"watch-cnn":{section:"watch-cnn"},intl_homepage:{section:"cnn homepage",subsection:""},homepage:{section:"cnn homepage",subsection:""},us:{section:"us",subsection:""},world:{section:"world",subsection:""},politics:{section:"politics",subsection:""},tech:{section:"tech",subsection:""},health:{section:"health",subsection:""},entertainment:{section:"entertainment",subsection:""},living:{section:"living",subsection:""},aviation:{section:"travel",subsection:"aviation"},destinations:{section:"travel",subsection:"destinations"},foodanddrink:{section:"travel",subsection:"foodanddrink"},hotels:{section:"travel",subsection:"hotels"},intl_travel:{section:"travel",subsection:""},travel:{section:"travel",subsection:""},china:{section:"world",subsection:"china"},africa:{section:"world",subsection:"africa"},americas:{section:"world",subsection:"americas"},asia:{section:"world",subsection:"asia"},europe:{section:"world",subsection:"europe"},middleeast:{section:"world",subsection:"middleeast"},football:{section:"sport",subsection:"football"},motorsport:{section:"sport",subsection:"motorsport"},sailing:{section:"sport",subsection:"sailing"},golf:{section:"sport",subsection:"golf"},tennis:{section:"sport",subsection:"tennis"},horseracing:{section:"sport",subsection:"horseracing"},equestrian:{section:"sport",subsection:"equestrian"},skiing:{section:"sport",subsection:"skiing"},architecture:{section:"style",subsection:"architecture"},arts:{section:"style",subsection:"arts"},autos:{section:"style",subsection:"autos"},design:{section:"style",subsection:"design"},fashion:{section:"style",subsection:"fashion"},luxury:{section:"style",subsection:"luxury"},style:{section:"style",subsection:""}};return CNN.omniture=CNN.omniture||{},{gridSize:e,renamingTemplateType:t,addMetadataObject:i,jsmdTracking:r,addTrackingTags:l,setCookie:n,clickEventTracker:a,addSocialMediaInteractionMetrics:c}}(),CNN.Analytics.hpt=function(){"use strict";function e(e){var t="";return e="undefined"==typeof e?"":e.replace(/^zn-/,""),t=l[e]?l[e]:"no-value-set"}function t(e){var t="";return e="undefined"==typeof e?"":e.replace(/^cn-/,""),t=r[e]?r[e]:"no-value-set"}function n(n,a){var i,o={},r="no-value-set",l=r,c=CNN.contentModel.pageType,s=CNN.contentModel.sectionName||r,d=CNN.contentModel.type||r,u=r,p=r,h=r,g=r,_=r,y=r,m=r,f="zone-level",N=[],b=r,v=r,C=r,w=n.closest("[data-analytics]"),k=n.closest("[class^='zn zn-']"),j=n.closest("section.zn"),T=n.closest(".cn"),M=n.closest("[data-analytics-header]"),Q=r,z=r,L=r,x=[],O=CNN.Analytics.utils;return f=n.text().length>0?n.text().toLowerCase():"zone-level",k.length&&"A"!==k[0].tagName&&k[0].className&&(i=k[0].className,"undefined"!=typeof i&&(_=i.split(" ").length>1?i.split(" ")[2]:r)),j.length&&(i=j.data("zone-label"),"undefined"!=typeof i&&i.length&&(g=i),i=j.data("vr-zone"),"undefined"!=typeof i&&i.length&&(y=i)),i=w.length?w.data("analytics"):n[0].className.indexOf("cd-banner")>=0?n.nextAll("[data-analytics]").data("analytics"):void 0,"undefined"!=typeof i&&i.length&&(l=i.split("_"),l=l.length?l:[],b=l[0].length>0?l[0]:r,v=l[1],h=l.length>2?l[2]:r,l.length>=4&&l[3].length>0?m=l[3]:0===n.text().length||n.text().indexOf("<img")>=0?(m="image",f="image"):m="text"),n.eq(0).text()&&(p=n.eq(0).text(),p=p.replace(/[ ]/g,"-"),p.indexOf("<img")>=0&&(p="image-file")),i=M.data("analytics-header"),"meganav"===a&&"undefined"!=typeof i&&i.split("_").length&&(u="header",x=i.split("_"),x=x.length?x:[],Q=x[0].toLowerCase()||r,z=x[1].toLowerCase()||r,L=x.length>2&&"level3"===x[2]?f.toLowerCase():"zone-level"),i=w.data("analytics"),"header"===a&&"undefined"!=typeof i&&i.split("_").length&&(x=w.data("analytics").split("_"),x=x.length?x:[],u=x.length>0?x[0].toLowerCase():r,Q=x.length>1?x[1].toLowerCase():r,z=x.length>2?x[2].toLowerCase():r,L=r),i=w.data("analytics"),"footer"===a&&"undefined"!=typeof i&&i.split("_").length&&(x=i.split("_"),x=x.length?x:[],1===x.length&&(u="footer",Q=x[0].toLowerCase(),z=r,L=r),2===x.length&&(u=x[0].toLowerCase(),Q=x[1].toLowerCase(),z=r,L=r),3===x.length&&(u=x[0].toLowerCase(),Q=x[1].toLowerCase(),z=x[2].toLowerCase(),L=r)),"page"===a&&T.length&&(i=T[0].className,"undefined"!=typeof i&&(N=i.split(/\s+/),N.length&&(C=N[N.length-1]))),o={linkText:f,hpt_page_pageIndicator:d,hpt_page_gridSize:O.gridSize(),hpt_page_section:s,hpt_page_template:O.renamingTemplateType(c),hpt_page_zoneId:y,hpt_page_zoneLabel:g,hpt_page_containerId:C,hpt_page_containerLabel:b,hpt2_page_pageIndicator:d,hpt2_page_gridSize:O.gridSize(),hpt2_page_section:s,hpt2_page_template:O.renamingTemplateType(c),hpt2_page_zoneId:y,hpt2_page_zoneType:e(_),hpt2_page_containerId:C,hpt2_page_containerType:t(v),hpt_header_globalIndicator:u,hpt_header_gridSize:O.gridSize(),hpt_header_section:s,hpt_header_template:O.renamingTemplateType(c),hpt_header_level1:Q,hpt_header_level2:z,hpt_header_level3:L,hpt_header_linkElement:f,hpt_header_linkType:m,hpt2_header_globalIndicator:u,hpt2_header_gridSize:O.gridSize(),hpt2_header_section:s,hpt2_header_template:O.renamingTemplateType(c),hpt2_header_level1:Q,hpt2_header_level2:z,hpt2_header_level3:L,hpt2_header_linkElement:f,hpt2_header_linkType:m}}function a(e,t,n){var a=jQuery.Deferred();return fastdom.read(function(){var i,o,r,l=t.data("filter-hpt"),c=t.data("filter-"+e),s="string"==typeof l,d="string"==typeof c,u="",p=n.split("_");if(d||s){for(u=d?c:l,i=u.split("_"),o=0,r=i.length;r>o;o+=1)p[o]&&""!==i[o]&&(p[o]=i[o]);n=p.join("_")}a.resolve(n)}),a.promise()}function i(e,t){return{hptValue:CNN.Utils.b64Encode(e.replace("â¦","")).replace(/\r\n/g,""),hpt2Value:CNN.Utils.b64Encode(t.replace("â¦","")).replace(/\r\n/g,"")}}function o(e,t){var o=n(e,t),r="",l="";return"page"===t?(r=o.hpt_page_pageIndicator+"_"+o.hpt_page_gridSize+"_"+o.hpt_page_section+"_"+o.hpt_page_template+"_"+o.hpt_page_zoneId+"_"+o.hpt_page_zoneLabel+"_"+o.hpt_page_containerId+"_"+o.hpt_page_containerLabel,l=o.hpt2_page_pageIndicator+"_"+o.hpt2_page_gridSize+"_"+o.hpt2_page_section+"_"+o.hpt2_page_template+"_"+o.hpt2_page_zoneId+"_"+o.hpt2_page_zoneType+"_"+o.hpt2_page_containerId+"_"+o.hpt2_page_containerType):(r=o.hpt_header_globalIndicator+"_"+o.hpt_header_gridSize+"_"+o.hpt_header_section+"_"+o.hpt_header_template+"_"+o.hpt_header_level1+"_"+o.hpt_header_level2+"_"+o.hpt_header_level3+"_"+o.hpt_header_linkElement+"_"+o.hpt_header_linkType,l=o.hpt2_header_globalIndicator+"_"+o.hpt2_header_gridSize+"_"+o.hpt2_header_section+"_"+o.hpt2_header_template+"_"+o.hpt2_header_level1+"_"+o.hpt2_header_level2+"_"+o.hpt2_header_level3+"_"+o.hpt2_header_linkElement+"_"+o.hpt2_header_linkType),jQuery.when(a("hpt1",e,r),a("hpt2",e,l)).then(i)}var r={"list-hierarchical-small-horizontal":"lead+list:lead+headlines-w/images","list-hierarchical-xs":"lead+list:lead+headlines","list-large-horizontal":"list:full-cards","list-large-vertical":"vertical-strip:full-cards","list-small-horizontal":"list:headlines+images","list-small-vertical":"vertical-strip:headlines+images","list-xs":"headlines","grid-medium":"grid:grid(spaced)","grid-small":"grid:grid","stack-large-horizontal":"list:full-cards(spaced)","stack-large-vertical":"vertical-strip:full-cards(spaced)","stack-medium-horizontal":"list:headlines+images(spaced)","stack-medium-vertical":"vertical-strip:headlines+images(spaced)","carousel-large-strip":"carousel:large","carousel-medium-matrix":"carousel:double-deck","carousel-medium-strip":"carousel:standard","stack-ul":"unknown name","section-preview":"unknown name"},l={"left-fluid-right-stack":"hero-3","left-fluid-bg-bleed":"superhero","left-fluid":"priority+2","right-stack-bg-inline":"hero-plus","right-stack-bg-bleed":"full-bleed",staggered:"staggered",balanced:"balanced","60-40":"priority+1","30-70":"grid-right","40-60":"unknown name","70-30":"unknown name",body:"unknown name","single-column":"unknown name","zone-background":"unknown name","zone-banner":"unknown name","zone-header":"unknown name"};return{getHptValues:o}}(),CNN.Gallery.analytics=function(){"use strict";function e(e,t){var n=jQuery(e),a={},i=[],o="",r={},l="",c=!1,s=[],d="",u="",p=1;for(c="boolean"==typeof n.data("is-gallery")?n.data("is-gallery"):!1,a={video:0,article:0,gallery:0,image:0,hyperlink:0,matched:0},jQuery("div.owl-item div[data-analytics]",e).each(function(){var e,t=jQuery(this);e=t.data("analytics").split("_"),s.push(e[2]||""),u=e[1]}),d=s.length>0?s[0]:d;p<s.length;p++)if(s[p]!==d){d="multimedia";break}return"boolean"==typeof t&&t&&(o="owl-nav"===e.className?e.offsetParent.id.split("_")[1]:e.id.split("_")[1],r=document.getElementById("cn-jumbotron-details-container_"+o),jQuery.each(jQuery(r).find(".js-jumbotron-card-wrapper.jumbotron-card-wrapper.active-card"),function(e,t){i=t.firstChild.className.match(/cd\-\-article/),null===i&&(i=t.firstChild.className.match(/cd\-\-(video|image|gallery|hyperlink)/)),null!==i&&(l=i[0].replace("cd--",""))}),jQuery.each(jQuery(r).find("article.cd"),function(e,t){t.className.indexOf("cd--video")>-1?a.video++:t.className.indexOf("cd--article")>-1?a.article++:t.className.indexOf("cd--image")>-1?a.image++:t.className.indexOf("cd--gallery")>-1?a.gallery++:t.className.indexOf("cd--hyperlink")>-1&&a.hyperlink++}),a.video>0&&(d="video",a.matched++),a.article>0&&(d="article",a.matched++),a.image>0&&(d="image",a.matched++),a.hyperlink>0&&(d="hyperlink",a.matched++),a.gallery>0&&(d="gallery",a.matched++),a.matched>1&&(d="multimedia")),d=d.length>0?"carousel_"+d:d,{contentType:d,carouselType:u,isGallery:c}}function t(e){return"undefined"!=typeof jQuery(e).data(d)?jQuery(e).data(d):""}function n(e){var t=-1,n="",a=jQuery(e),i=a.find(u)||[];return t=a.data("active")||"",jQuery.isNumeric(t)&&t>0&&(n=jQuery(i[t-1]).find("img").attr("src"),n="undefined"!=typeof n?n.substring(n.lastIndexOf("/")+1):""),n}function a(e,t){var n=[],a=0;return t?(n=jQuery(CNN.Jumbotron.Constants.CONST_SMALL_CAROUSEL_SELECTOR),n.find(".owl-item").each(function(e,t){jQuery(t).hasClass("cloned")||a++})):a="undefined"!=typeof jQuery(e).data(p)?jQuery(e).data(p):"",a}function i(e,t){var n=jQuery(e).data("owl.carousel"),a=[],i=0;return t?(a=jQuery(CNN.Jumbotron.Constants.CONST_SMALL_CAROUSEL_SELECTOR),a.find(".owl-item").each(function(e,t){return!jQuery(t).hasClass("cloned")&&(i++,jQuery(t).hasClass("active"))?!1:void 0})):i=n._current-n._clones.length/2+1,i}function o(o,r){var l={};return l=e(o,r),l.galleryName=t(o),l.galleryType=l.isGallery?"photo gallery":"carousel",l.imageName="carousel"!==l.galleryType?n(o):"",l.slideCount=a(o,r),l.slideNumber=i(o,r),"carousel"!==l.galleryType&&(l.carouselType=""),l}function r(e,t){"undefined"!=typeof t.isJumbotron&&t.isJumbotron===!0&&(e.data.page_view=!0,e.data.carousel_type="jumbotron")}function l(e){var t=CNN.CurrentWidth.getClientWidth()*CNN.CurrentHeight.getClientHeight(),n=t/2+1,a=e.target.clientWidth*e.target.clientHeight,i=o(e.currentTarget,e.isJumbotron),l=CNN.Analytics.hpt;l.getHptValues(jQuery(e.currentTarget),"page").done(function(t){var o={type:"cnngallery-click",data:{page_view:!1,gallery_name:i.galleryName,image_name:i.imageName,content_type:i.contentType,carousel_type:i.carouselType,gallery_type:i.galleryType,gallery_slide_count:i.slideCount,gallery_slide:i.slideNumber,hpt:t.hptValue,hpt2:t.hpt2Value}};o.data.page_view=a>=n?!0:!1,r(o,e),CNN.ads.events.refreshGalleryRailAd(e),null!==window.trackMetrics&&void 0!==window.trackMetrics&&window.trackMetrics(o)})}function c(e){jQuery(CNN.Carousel.carouselSelector,e).off("carousel-action-event").on("carousel-action-event",l)}function s(){var e,t,n=0;try{if(t=function(e,t){"undefined"!=typeof t&&t.actionType===CNN.Jumbotron.Constants.CONST_EVENT_CAROUSEL_ACTION_TYPE_CLICK?(e.isJumbotron=!0,l(e)):("click"===e.type||"changed"===e.type||"dragged"===e.type)&&(e.isJumbotron=!0,l(e))},window.cnnJumbotronManager&&window.cnnJumbotronManager.getJumbotrons)for(e=window.cnnJumbotronManager.getJumbotrons();n<e.length;n++)e[n]instanceof CNN.Jumbotron.Container&&"undefined"!=typeof e[n].jumbotronElementRaw&&(jQuery(e[n].jumbotronElementRaw).on("carousel-action-event",t),Modernizr.touch?jQuery(e[n].jumbotronElementRaw).find(".cn-jumbotron-card-details").on(CNN.Carousel.events.changed,t):(jQuery(e[n].jumbotronElementRaw).find(".owl-nav").on("click",t),jQuery(e[n].jumbotronElementRaw).find(".jumbotron-small-carousel").on(CNN.Carousel.events.dragged,t)))}catch(a){console.log("Error caught in initJumbotronTracking: %s",a.message)}}var d="galleryname",u="[data-slidename]",p="slide-count";return{init:c,initJumbotronTracking:s,trackGalleryClick:l}}(),"object"==typeof CNN.contentModel&&CNN.contentModel.lazyLoad?jQuery(document).onZonesAndDomReady(function(){"use strict";initAnalytics()}):jQuery(document).ready(function(){"use strict";initAnalytics()}),jQuery(window).on("load",function(){"use strict";window.hasOwnProperty("twttr")&&window.twttr.hasOwnProperty("widgets")&&window.twttr.ready(function(){window.twttr.events.bind("click",twttrWidgetTweetButtonClickHandler)})});
//# sourceMappingURL=cnn-analytics.min.js.map