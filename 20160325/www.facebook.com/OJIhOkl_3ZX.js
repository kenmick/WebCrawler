/*!CK:3210989385!*//*1458894170,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["+ClWy"]); }

__d('QuickSandHeader',['sha256','Int64'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){'use strict';this.$QuickSandHeader1=1<<j;this.$QuickSandHeader2=this.$QuickSandHeader1/2;this.$QuickSandHeader3=c('Int64').fromInt(this.$QuickSandHeader2-1);this.$QuickSandHeader4=[];this.$QuickSandHeader5=0;this.$QuickSandHeader6=0;this.$QuickSandHeader7=0;this.$QuickSandHeader8=0;var k=c('sha256')(i),l=this.$QuickSandHeader9(this.$QuickSandHeader10(k)),m=this.$QuickSandHeader9(this.$QuickSandHeader10(k).slice(8));this.$QuickSandHeader4.push(l.xor(c('Int64').fromString('736f6d6570736575',16)));this.$QuickSandHeader4.push(m.xor(c('Int64').fromString('646f72616e646f6d',16)));this.$QuickSandHeader4.push(l.xor(c('Int64').fromString('6c7967656e657261',16)));this.$QuickSandHeader4.push(m.xor(c('Int64').fromString('7465646279746573',16)));}h.prototype.sipEdge=function(i){'use strict';return [this.sipNode(i,0),this.sipNode(i,1)];};h.prototype.sipNode=function(i,j){'use strict';return this.$QuickSandHeader11(2*i+j).and(this.$QuickSandHeader3).toInt();};h.prototype.getSize=function(){'use strict';return this.$QuickSandHeader1;};h.prototype.getHalfSize=function(){'use strict';return this.$QuickSandHeader2;};h.prototype.$QuickSandHeader12=function(i,j){'use strict';return i.shiftLeft(j).or(i.shiftRightUnsigned(64-j));};h.prototype.$QuickSandHeader9=function(i){'use strict';var j=new (c('Int64').fromInt)(i[0]),k=c('Int64').fromInt(i[1]).shiftLeft(8),l=c('Int64').fromInt(i[2]).shiftLeft(16),m=c('Int64').fromInt(i[3]).shiftLeft(24),n=c('Int64').fromInt(i[4]).shiftLeft(32),o=c('Int64').fromInt(i[5]).shiftLeft(40),p=c('Int64').fromInt(i[6]).shiftLeft(48),q=c('Int64').fromInt(i[7]).shiftLeft(56);return j.or(k).or(l).or(m).or(n).or(o).or(p).or(q);};h.prototype.$QuickSandHeader13=function(){'use strict';this.$QuickSandHeader5=this.$QuickSandHeader5.add(this.$QuickSandHeader6);this.$QuickSandHeader7=this.$QuickSandHeader7.add(this.$QuickSandHeader8);this.$QuickSandHeader6=this.$QuickSandHeader12(this.$QuickSandHeader6,13);this.$QuickSandHeader8=this.$QuickSandHeader12(this.$QuickSandHeader8,16);this.$QuickSandHeader6=this.$QuickSandHeader6.xor(this.$QuickSandHeader5);this.$QuickSandHeader8=this.$QuickSandHeader8.xor(this.$QuickSandHeader7);this.$QuickSandHeader5=this.$QuickSandHeader12(this.$QuickSandHeader5,32);this.$QuickSandHeader7=this.$QuickSandHeader7.add(this.$QuickSandHeader6);this.$QuickSandHeader5=this.$QuickSandHeader5.add(this.$QuickSandHeader8);this.$QuickSandHeader6=this.$QuickSandHeader12(this.$QuickSandHeader6,17);this.$QuickSandHeader8=this.$QuickSandHeader12(this.$QuickSandHeader8,21);this.$QuickSandHeader6=this.$QuickSandHeader6.xor(this.$QuickSandHeader7);this.$QuickSandHeader8=this.$QuickSandHeader8.xor(this.$QuickSandHeader5);this.$QuickSandHeader7=this.$QuickSandHeader12(this.$QuickSandHeader7,32);};h.prototype.$QuickSandHeader10=function(i){'use strict';for(var j=[],k=0;k<i.length;k+=2)j.push(parseInt(i.substr(k,2),16));return j;};h.prototype.$QuickSandHeader11=function(i){'use strict';var j=c('Int64').fromInt(i);this.$QuickSandHeader5=this.$QuickSandHeader4[0];this.$QuickSandHeader6=this.$QuickSandHeader4[1];this.$QuickSandHeader7=this.$QuickSandHeader4[2];this.$QuickSandHeader8=this.$QuickSandHeader4[3].xor(j);for(var k=0;k<2;k++)this.$QuickSandHeader13();this.$QuickSandHeader5=this.$QuickSandHeader5.xor(j);this.$QuickSandHeader7=this.$QuickSandHeader7.xor(c('Int64').fromString('ff',16));for(k=0;k<4;k++)this.$QuickSandHeader13();return this.$QuickSandHeader5.xor(this.$QuickSandHeader6).xor(this.$QuickSandHeader7).xor(this.$QuickSandHeader8);};f.exports=h;},null);
__d('QuickSandSolver',['AsyncRequest','Base64','Form','QuickSandHeader','sha256'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={solveAndEncode:function(i,j,k,l,m,n){var o=JSON.stringify([this.solve(i,j,k,l,m),n]);return c('Base64').encode(o);},solveAndUpdateForm:function(i,j,k,l,m,n,o){var p=this.solveAndEncode(i,j,k,l,m,o),q=document.getElementById(n);c('Form').createHiddenInputs({qsstamp:p},q);},solveAndSendRequestBack:function(i,j){var k=this.solveAndEncode(j.__iterations,j.__header,j.__graphSizeShift,j.__proofSize,j.__edgePercentage,j.__blob);i.data.qsstamp=k;i.send();},solveAndCallAsyncController:function(i,j,k,l,m,n){var o=this.solveAndEncode(i,j,k,l,m,n);new (c('AsyncRequest'))().setURI('/qs/').setData({qsstamp:o}).send();},solve:function(i,j,k,l,m){var n=[],o=j;for(var p=0;p<i;p++){n.push(h.solveOneIteration(o,k,l,m));o=h.hashList(n[p]);}return n;},solveOneIteration:function(i,j,k,l){var m=8192,n=new (c('QuickSandHeader'))(i,j),o=l*n.getSize()/100,p=[],q=[],r=[];for(var s=0;s<o;s++){var t=n.sipEdge(s),u=t[0],v=t[1];u+=1;v+=1+n.getHalfSize();var w=p[u],x=p[v];if(w==v||x==u)continue;q[0]=u;r[0]=v;var y=h.path(w,q,p,m),z=h.path(x,r,p,m);if(q[y]==r[z]){var aa=Math.min(y,z);for(y-=aa,z-=aa;q[y]!=r[z];y++,z++);var ba=y+z+1;if(ba==k)return h.recoverSolution(y,z,q,r,n,k,o);continue;}if(y<z){while(y--)p[q[y+1]]=q[y];p[u]=v;}else{while(z--)p[r[z+1]]=r[z];p[v]=u;}}return [];},path:function(i,j,k,l){var m=0;for(m=0;i;i=k[i]){if(++m>=l){while(m--&&j[m]!=i);if(m<0){throw "Maximum path length was exceeded";}else throw "Illegal cycle has occurred";}j[m]=i;}return m;},recoverSolution:function(i,j,k,l,m,n,o){var p=function(){};p.prototype.add=function(v){this[v]=true;};p.prototype.remove=function(v){delete this[v];};var q=[],r=new p();r.add([k[0],l[0]]);while(i--)r.add([k[i+1&~1],k[i|1]]);while(j--)r.add([l[j|1],l[j+1&~1]]);var s=0;for(var t=0;t<o;t++){var u=[1+m.sipNode(t,0),1+m.getHalfSize()+m.sipNode(t,1)];if(u in r){q[s++]=t;r.remove(u);}}return q;},hashList:function(i){var j=i.join('-');return c('sha256')(j);}};f.exports=h;},null);