!function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){var i;i=function(e){window.glb.fnCommonReady?e():document.addEventListener("glb.fn.commonReady",e,!1)},"undefined"!=typeof t&&t.exports&&(t.exports=i)},{}],2:[function(e,t,n){var i;i={},i.menuContainer='<nav id="menu-container" class="regua-navegacao-tab menu-container menu-no-animation">{{>menu_container_partial}}</nav>',i.menuBase='<div id="menu-rounder" class="menu-rounder">\n    {{>items_partial}}\n</div>',i.menuBaseExtra='<style>#menu-container { display: none; }</style>\n<div id="menu-content-overlay"></div>',i.menuCarousel='<div id="menu-carousel-header" class="menu-carousel menu-carousel-header swiper-container">\n    <ul class="menu-brands swiper-wrapper">\n        {{#portals}}\n        <li data-produto="{{name}}" class="menu-carousel-item menu-carousel-{{name}} {{#active}}menu-carousel-item-active{{/active}} swiper-slide">\n            <a href="{{link}}" class="menu-carousel-link" data-index="{{index}}">\n                <svg class="brand-icon">\n                    <use class="menu-logo" xmlns:xlink="//www.w3.org/1999/xlink" xlink:href="#{{svgIconName}}"></use>\n                </svg>\n            </a>\n            <div class="menu-carousel-link-shadow"></div>\n        </li>\n        {{/portals}}\n    </ul>\n</div>\n<div id="menu-carousel-body" class="menu-carousel menu-carousel-body swiper-container">\n    <ul class="menu-brands swiper-wrapper">\n        {{#portals}}\n        <li data-produto="{{name}}" class="menu-carousel-item menu-carousel-{{name}} {{#active}}menu-carousel-item-active{{/active}} swiper-slide">\n            <div id="menu-rounder" class="menu-rounder">{{>menu_portal_partial}}</div>\n        </li>\n        {{/portals}}\n    </ul>\n</div>',i.menuRounder='<div id="menu-cascade" class="menu-cascade" data-menu-index="{{index}}">\n  <ul class="menu-root menu-level menu-level-0">{{#items}}{{>recursive_partial}}{{/items}}</ul>\n</div>\n<div id="menu-addon" class="menu-addon"></div>',i.menuCustom="{{#items}}{{>recursive_partial}}{{/items}}",i.menuDinamico='<li id="menu-{{deepness}}-{{tituloSlug}}" class="menu-item {{#separador}} menu-item-separator{{/separador}}{{#destacado}} menu-item-highlighted{{/destacado}}{{#agrupador}} menu-item-grouped{{/agrupador}}{{#hasChildren}} is-father{{/hasChildren}}{{#hasSubmenuBroken}} menu-item-submenu-broken{{/hasSubmenuBroken}}{{#personalizationChoice}} menu-item-personalized{{/personalizationChoice}}{{#recommendation}} menu-item-recommendation{{/recommendation}}">\n    {{#personalizationChoice}}<a {{#color}}style="color:{{.}}"{{/color}} class="menu-personalization-choice" href="{{link}}">{{#label}}{{.}}{{/label}}{{#loading}}{{.}}{{/loading}}</a>{{^loading}}<a href="#" class="menu-item-link menu-personalization-change-link"><span class="menu-item-title menu-personalization-change">trocar</span></a>{{/loading}}{{/personalizationChoice}}\n    {{#shouldBeLink}}<a href="{{link}}" class="menu-item-link menu-navegacao-color">{{/shouldBeLink}}\n    {{^shouldBeLink}}<span class="menu-item-link menu-navegacao-color">{{/shouldBeLink}}\n        <span class="menu-item-title">{{titulo}}<span class="menu-item-arrow menu-navegacao-color"><svg class="regua-navegacao-icon"><use xmlns:xlink="//www.w3.org/1999/xlink" xlink:href="#regua-arrow"></use></svg></span></span>\n    {{#shouldBeLink}}</a>{{/shouldBeLink}}\n    {{^shouldBeLink}}</span>{{/shouldBeLink}}\n\n    {{#hasChildren}}\n        <div class="menu-level menu-submenu menu-submenu-level{{deepness}}{{#hasSubmenuBroken}} menu-item-submenu-broken{{/hasSubmenuBroken}} menu-submenu-column-1">\n            <a class="menu-submenu-title menu-item-back"><span class="menu-item-arrow menu-navegacao-color"><svg class="regua-navegacao-icon"><use xmlns:xlink="//www.w3.org/1999/xlink" xlink:href="#regua-arrow"></use></svg></span><span class="regua-navegacao-menu-item">{{titulo}}</span></a>\n            {{#personalization}}{{{.}}}{{/personalization}}\n            {{^personalization}}<ul class="menu-submenu-vertical-scroll">{{/personalization}}\n            {{#children}}\n                {{>recursive_partial}}\n            {{/children}}\n            {{^personalization}}<ul>{{/personalization}}\n        </div>\n    {{/hasChildren}}\n</li>',i.getMenuItemDefaultKeys=function(){return["separador","destacado","agrupador","quebra","tituloSlug"]},i.getMenuItemDefaultValues=function(e){var t;return t={},t.separador=null!=e.separador?e.separador:!1,t.destacado=null!=e.destacado?e.destacado:!1,t.agrupador=null!=e.agrupador?e.agrupador:!1,t.quebra=null!=e.quebra?e.quebra:!1,t.tituloSlug=glb.slugify(e.titulo),t},i.getMenuItemExtraContext=function(e,t){var n,i,o,s,r;if(t=null!=t?t:1,e.deepness=t,n=this.getMenuItemDefaultValues(e),e=extendObjs(e,n),e.link=null!=e.link?e.link:"",e.hasSubmenuBroken=!1,e.hasChildren=!1,e.shouldBeLink=e.link&&""!==e.link.trim()?e:!1,e.quebra&&(e.quebra={deepness:t}),e.children&&e.children.length>0)for(e.shouldBeLink=!1,e.hasChildren=e,o=i=0,s=e.children.length-1;s>=0?s>=i:i>=s;o=s>=0?++i:--i)r=e.children[o],r.quebra&&(e.hasSubmenuBroken=!0),e.children[o]=this.getMenuItemExtraContext(r,t+1);return e},i.getMenuDataExtraContext=function(e){var t,n,i,o;if(o=[],e&&e.length>0)for(t=0,n=e.length;n>t;t++)i=e[t],o.push(this.getMenuItemExtraContext(i));return o},i.getMenuItemHtml=function(e){var t;return t=this.getMenuItemExtraContext(e),Mustache.render(this.menuDinamico,t,{recursive_partial:this.menuDinamico})},i.getMenuHtml=function(e){var t,n;return n="",Mustache.parse(this.menuDinamico),e&&e.length>0&&(t=this.getMenuDataExtraContext(e),t.length>0&&(n=Mustache.render(this.menuContainer,{items:t,index:0},{menu_container_partial:this.menuBase,items_partial:this.menuRounder,recursive_partial:this.menuDinamico}))),n},i.insertOrUpdateMenuHtml=function(e){var t,n;n=$("#menu-container"),t=$("body"),0===n.length?e&&t.append(e):e&&n.replaceWith(e)},i.createMenuBaseHtml=function(e){var t,n,i,o;return i=this.getMenuHtml(e),o=$("#menu-content-overlay"),t=$("body"),this.insertOrUpdateMenuHtml(i),n=$("#menu-container"),n.length>0&&0===o.length&&t.append(this.menuBaseExtra),i},i.getCarouselHtml=function(e){var t,n,i,o;for(Mustache.parse(this.menuDinamico),t=n=0,i=e.length;i>n;t=++n)o=e[t],o.items=this.getMenuDataExtraContext(o.items),o.index=t,o.active=null!=o.active?o.active:!1;return Mustache.render(this.menuContainer,{portals:e},{menu_container_partial:this.menuCarousel,menu_portal_partial:this.menuRounder,recursive_partial:this.menuDinamico})},i.createCarouselHtml=function(e,t){return null==t&&(t=this.getCarouselHtml(e)),this.insertOrUpdateMenuHtml(t),t},"undefined"!=typeof t&&t.exports&&(t.exports=i)},{}],3:[function(e,t,n){var i,o,s,r,a,u,l,c,m,h;a=null,m={},c=function(e,t){var n,i,o;for(n=0,o=e.length;o>n;n++)if(i=e[n],glb.slugify(i.label)===glb.slugify(t.label)||i.permalink===t.permalink)return!0;return!1},h=function(e,t){var n,i,o,s;for(o=[],n=0,s=e.length;s>n;n++)i=e[n],i.permalink&&i.label&&(null!=t&&c(t,i)||o.push(i));return o},u=function(e,t){var n,i,o,s;for(e=h(e,t),o=[],n=0,s=e.length;s>n;n++)i=e[n],o.push({agrupador:!1,children:[],deepness:1,destacado:!0,hasChildren:!1,hasSubmenuBroken:!1,quebra:!1,separador:!1,shouldBeLink:{link:i.permalink},titulo:i.label,tituloSlug:glb.slugify(i.label),permalink:i.permalink,label:i.label});return o},l=function(e){return Mustache.render(m.custom,{items:e},{recursive_partial:m.partial})},s=function(){function e(e,t){var n,i;n="local"===glb.cdnConfig.fnEnv?"/":glb.cdnConfig.fnCdnBaseUrl,i="local"===glb.cdnConfig.fnEnv?"templates/personalization/mosaico.html":"templates/latest/personalization/mosaico.min.html",this.cocoonUrl=t||"//cocoon.globo.com/preferences/",this.customItems=e||{ge:{titulo:"Escolha seu time",url:n+i,navigationItemId:"menu-1-times",cocoonKey:"esportes",gaEventName:"times",defaultColor:"#3B9C00",loadingText:"carregando times...",loadingColor:"#999999",getPersonalizationItem:function(e,t){var n;return e&&t?(n=t.time_url||t.link,$(e).find(".personalization-item[href='"+n+"']")):[]},getColor:function(e,t){return e&&e.attr("data-color")||t.color||this.defaultColor},getLabel:function(e,t){return e&&e.attr("data-label")||t.label||null},getLink:function(e,t){return e&&e.attr("href")||t.link||"#"},getCocoonLabelValue:function(e){return function(e){return["time",e&&e.attr("data-value")]}}(this),getCocoonLinkValue:function(e){return function(e){return["time_url",e&&e.attr("href")]}}(this)}},this.slugifyCustomItems(),this.cacheBaseKey="fn-top-items-personalization-",this.cacheExpiration=a,this.personalizationChoices=this.loadChoicesCache(),this.personalizationHtmls=this.loadHtmlCache(),this.json=null}return e.prototype.slugifyCustomItems=function(){var e,t,n,i;n=this.customItems,i=[];for(t in n)e=n[t],i.push(e.tituloSlug=glb.slugify(e.titulo));return i},e.prototype.loadHtmlCache=function(){return localStorageCache.load(this.cacheBaseKey+"html")||{}},e.prototype.loadChoicesCache=function(){return localStorageCache.load(this.cacheBaseKey+"json")||{}},e.prototype.saveHtmlCache=function(){localStorageCache.save(this.cacheBaseKey+"html",this.personalizationHtmls,this.cacheExpiration)},e.prototype.saveChoicesCache=function(){localStorageCache.save(this.cacheBaseKey+"json",this.personalizationChoices,this.cacheExpiration)},e.prototype.personalizationChoiceAsTopItem=function(e){return{permalink:e.link,label:e.label,tituloSlug:glb.slugify(e.label)}},e.prototype.getPersonalizationChoiceAsTopItem=function(e){var t,n,i,o,s,r,a,u;return n=this.customItems[e],t=window.extendObjs({},this.personalizationChoices[e]),null!=n?(a=n.getCocoonLabelValue(null),o=a[0],i=a[1],u=n.getCocoonLinkValue(null),r=u[0],s=u[1],t.label=t[o],t.link=t[r],this.personalizationChoiceAsTopItem(t)):{}},e.prototype.initPersonalizationChoices=function(e){var t,n,i;n=this.customItems;for(t in n)i=n[t],this.personalizationChoices[t]=e[i.cocoonKey]},e.prototype.createNavigationItem=function(e){var t,n;t=this.customItems[e],t&&(n=$("#"+t.navigationItemId),n.find(".menu-submenu-vertical-scroll").replaceWith(this.personalizationHtmls[e].item),n.find(".personalization-item").addClass("navigational-item").removeClass("personalization-item"))},e.prototype.createPersonalizationItemHtml=function(e,t,n){var i,o;return glb.isEmpty(n)?n=null:n.label?n.loading=null:(n.loading=e.loadingText,n.color=e.loadingColor),i=window.extendObjs(e,{agrupador:!1,children:[],deepness:1,destacado:!0,personalizationChoice:n,personalization:t,hasSubmenuBroken:!1,quebra:!1,separador:!1,shouldBeLink:!1,tituloSlug:e.tituloSlug}),i.hasChildren=i,o=Mustache.render(m.custom,{items:[i]},{recursive_partial:m.partial})},e.prototype.request=function(e,t){return-1===e.indexOf(".json")?ajaxCache.getJsonp(e,t):ajaxCache.get(e,t)},e.prototype.getChoices=function(e,t){var n,i;return n=this.personalizationChoices[e],null!=n?("function"==typeof t&&t(n),n):void(this.json?"function"==typeof t&&t(this.personalizationChoices[e]):(i={expire:a,success:function(n){return function(i){return n.json=i,n.initPersonalizationChoices(n.json),n.saveChoicesCache(),"function"==typeof t?t(n.personalizationChoices[e]):void 0}}(this)},this.request(this.cocoonUrl,i)))},e.prototype.completeChoice=function(e,t,n,i){var o,s,r,a,u,l;return null==n&&(n={}),null==i&&(i=n),n.color=e.getColor(t,i),n.label=e.getLabel(t,i),n.link=e.getLink(t,i),null!=t&&t&&(u=e.getCocoonLabelValue(t),s=u[0],o=u[1],l=e.getCocoonLinkValue(t),a=l[0],r=l[1],n[s]=o,n[a]=r),n},e.prototype.changeChoice=function(e,t,n,i){var o,s,r;o=this.personalizationChoices[e],null==i&&(i=o),r=t.getPersonalizationItem(n,i),r.length>0?(o=this.completeChoice(t,r,o,i),s=this.createPersonalizationItemHtml(t,n,o)):s=this.createPersonalizationItemHtml(t,n,null),this.personalizationHtmls[e]={item:n,personalization:s},this.personalizationChoices[e]=o,this.saveChoicesCache(),this.saveHtmlCache()},e.prototype.getHtml=function(e,t){var n,i;return n=this.customItems[e],i=this.personalizationHtmls[e]||"",null==n||i&&""!==i?("function"==typeof t&&t(i),i):void this.getChoices(e,function(i){return function(){return ajaxCache.get(n.url,{expire:a,success:function(o){return i.changeChoice(e,n,o),"function"==typeof t?t(i.personalizationHtmls[e]):void 0}})}}(this))},e.prototype.saveOnCocoonRequest=function(e,t,n,i){var o,s;s=e+"/"+t+"?value="+n,i=i||function(){},o={skipCache:!0,success:i},this.request(s,o)},e.prototype.saveOnCocoon=function(e,t){var n,i,o,s,r,a;r=e.getCocoonLabelValue(t),i=r[0],n=r[1],a=e.getCocoonLinkValue(t),s=a[0],o=a[1],i?this.saveOnCocoonRequest(this.cocoonUrl+e.cocoonKey,i,n,function(t){return function(){return s?t.saveOnCocoonRequest(t.cocoonUrl+e.cocoonKey,s,o):void 0}}(this)):s&&this.saveOnCocoonRequest(this.cocoonUrl+e.cocoonKey,s,o)},e.prototype.bind=function(e,t,n){var i,o,s,r,a,u;s=this.customItems[e],s&&(i=$(document),u=function(e){return function(t,n){return e.saveOnCocoon(t,n)}}(this),o=function(t){return function(n,i){var o,s,r,a,u,l,c;return l=n.getCocoonLabelValue(i),s=l[0],o=l[1],c=n.getCocoonLinkValue(i),a=c[0],r=c[1],u={},u[s]=o,u[a]=r,t.changeChoice(e,n,t.personalizationHtmls[e].item,u)}}(this),a=this.personalizationHtmls,r=this.personalizationChoices,"string"==typeof t&&(t=$(t)),t.on("click",".menu-personalization-choice",function(){var t;return t=$(this),i.trigger("glb.menu.item-personalizado",[e,t.text().trim()])}),t.on("click",".menu-personalization-change-link",function(){var t;return t=$(this),i.trigger("glb.menu.personalizacao",[e,s.gaEventName,t.text().trim()])}),t.on("click",".personalization-item",function(l){var c,m;return event.preventDefault(),m=$(this),u(s,m),o(s,m),c=$(a[e].personalization),t.hasClass("menu-item-personalized")?t.find(".menu-personalization-choice").replaceWith(c.find(".menu-personalization-choice")):(t.addClass("menu-item-personalized"),t.prepend(c.find(".menu-personalization-change-link")),t.prepend(c.find(".menu-personalization-choice"))),i.trigger("glb.menu.personalizacao",[e,s.gaEventName,r[e].label]),n(s,m),!1}))},e}(),r=function(){function e(e,t,n){t=t||7,this.excelsiorCacheExpiration=1440,this.maxRecommendation=2,this.excelsiorUrl=n||"//excelsior.globo.com/profile/",this.query=e||{detail:!0,smart:!0,group_by:"product",product:{techtudo:{klass:["http://semantica.globo.com/techtudo/Software","http://semantica.globo.com/techtudo/Hardware"],limit:t},ge:{klass:["http://semantica.globo.com/esportes/Campeonato","http://semantica.globo.com/esportes/Esporte"],limit:t},ego:{klass:["http://semantica.globo.com/ego/Famoso"],limit:t},gshow:{klass:["http://semantica.globo.com/gshow/Obra"],limit:t}}},this.productsNamesMap={ego:"famosos"},this.excludeItems={ge:[{tituloSlug:"futebol",permalink:"http://globoesporte.globo.com/futebol/"}]},this.json=null,this.recommendationItems={}}return e.prototype.getProductNameWithExcelsiorName=function(e){return this.productsNamesMap[e]||e},e.prototype.refreshProductsName=function(e){var t,n,i;for(t in e)i=e[t],n=this.getProductNameWithExcelsiorName(t),n!==t&&(e[n]=i,e[t]=null);return e},e.prototype.doExcelsiorRequest=function(e){ajaxCache.post(this.excelsiorUrl,{type:"json",expire:this.excelsiorCacheExpiration,data:this.query,xhrConfigsCallback:function(e){return e.withCredentials=!0},success:function(t){return function(n){return t.json=t.refreshProductsName(n),e(t.json)}}(this),error:function(){return console.error("Error getting excelsior data"),e(null)}})},e.prototype.getItemsFromJson=function(e){var t,n,i;if("home"===e){if(n=function(){var n,i;n=this.json,i=[];for(e in n)t=n[e],t&&null!=t[0]&&i.push(t[0]);return i}.call(this),n.length<this.maxRecommendation){n=[],i=this.json;for(e in i)t=i[e],t&&null!=t[0]&&glb.extendArrays(n,t)}return n.sort(function(e,t){return t.score-e.score}),n}return null==this.json[e]?[]:this.json[e]},e.prototype.getProductItemsWithJson=function(e,t){return this.json?u(this.getItemsFromJson(e),t):[]},e.prototype.getProductItems=function(e,t,n){return null!=this.recommendationItems[e]?("function"==typeof n&&n(this.recommendationItems[e]),this.recommendationItems[e]):(t||(t=[]),t=glb.extendArrays(t,this.excludeItems[e]||[]),this.json?(this.recommendationItems[e]=this.getProductItemsWithJson(e,t),"function"==typeof n&&n(this.recommendationItems[e]),this.recommendationItems[e]):void this.doExcelsiorRequest(function(i){return function(){return i.recommendationItems[e]=i.getProductItemsWithJson(e,t),"function"==typeof n?n(i.recommendationItems[e]):void 0}}(this)))},e.prototype.createRecommendationHtml=function(e){var t,n,i;for(t=0,i=e.length;i>t;t++)n=e[t],n.recommendation=!0;return l(e)},e}(),o=function(){function e(e){this.menuRootsPerProduct=e,this.highlightedItems={},this.highlightedItemsJson={}}return e.prototype.getHighlightedItems=function(e){var t;return null!=this.highlightedItems[e]?this.highlightedItems[e]:(t=this.menuRootsPerProduct[e],this.highlightedItemsJson[e]=[],t&&t.length>0&&(this.highlightedItems[e]=t.find(".menu-item-highlighted").detach(),this.highlightedItems[e].each(function(t){return function(n,i){var o,s;return o=$(i),s=o.find(".menu-item-link"),t.highlightedItemsJson[e].push({permalink:s.attr("href"),label:s.text().trim()})}}(this)),this.highlightedItemsJson[e]=u(this.highlightedItemsJson[e])),this.highlightedItemsJson[e])},e.prototype.createHighlightedHtml=function(e){return l(e)},e}(),i=function(){function e(e,t){var n,i,u,l,c,h,d,p,_;this.menuRoots=e,m={partial:glb.MenuTemplates.menuDinamico,custom:glb.MenuTemplates.menuCustom},i=glb.cdnConfig||{},t=t||i.menuTopItemsOptions||{},h=t.product,l=t.maxItems,_=t.totalItems,c=t.personalizationCustomItems,u=t.excelsiorUrl,n=t.cocoonUrl,p=t.recommendationQuery,d=t.recommendationLimit,this.totalItems=_||5,this.maxItems=l||{recommendation:2,highlighted:5},a=glb.cdnConfig.fnExpire,Mustache.parse(m.custom),this.currentProduct=h||glb.cdnConfig.fnProduct.name,this.menuRootsPerProduct={},this.initMenuRootsPerProduct(),this.recommendation=new r(p,d,u),this.personalization=new s(c,n),this.highlighted=new o(this.menuRootsPerProduct),this.initCalled=!1,this.callbacks=[],this.recommendation.getProductItems(this.currentProduct,[],function(e){return function(){return null!=e.personalization.json?e.init():void 0}}(this)),this.personalizationPlaceholders={},this.personalization.getChoices(this.currentProduct,function(e){return function(){return null!=e.recommendation.json?e.init():void 0}}(this))}return e.prototype.initMenuRootsPerProduct=function(){this.menuRoots.parents("[data-produto]").each(function(e){return function(t,n){var i,o;return i=$(n),o=i.attr("data-produto"),e.menuRootsPerProduct[o]=i.find(".menu-root")}}(this))},e.prototype.whenReady=function(e){return this.initCalled?e():void this.callbacks.push(e)},e.prototype.init=function(){var e,t,n,i;if(!this.initCalled)for(this.initCalled=!0,i=this.callbacks,t=0,n=i.length;n>t;t++)(e=i[t])()},e.prototype.personalizationInCache=function(e){return this.personalization.personalizationHtmls[e]},e.prototype.personalize=function(e,t,n){null!=this.personalizationPlaceholders[e]&&this.personalization.getHtml(e,function(i){return function(o){var s,r,a;return a=i.personalizationPlaceholders[e].id,s=$(a),r=s.hasClass("is-activated"),s.replaceWith(o.personalization),r&&s.addClass("is-activated"),i.personalization.createNavigationItem(e),i.personalization.bind(e,a,function(e,n){return"function"==typeof t?t(e,n):void 0}),"function"==typeof n?n(o):void 0}}(this))},e.prototype.outerHtml=function(e){return $("<div>").append(e.clone()).html()},e.prototype.createHtml=function(e,t,n,i){var o,s,r,a,u,l,c;return a="",o=0,s=this.personalization.customItems[e],null!=s&&(l=this.personalization.createPersonalizationItemHtml(s,null,t[0]),c=$(l),this.personalizationPlaceholders[e]={item:c,id:"#"+c.attr("id")},a+=this.outerHtml(c),o++,t=[this.personalization.getPersonalizationChoiceAsTopItem(e)]),n.length>0&&(r=[],glb.extendArrays(r,t),n=h(n,r),n=n.slice(0,this.maxItems.recommendation),a+=this.recommendation.createRecommendationHtml(n),o+=n.length),i.length>0&&(r=[],glb.extendArrays(r,t),glb.extendArrays(r,n),i=h(i,r),u=Math.min(this.maxItems.highlighted,this.totalItems-o),i=i.slice(0,u),a+=this.highlighted.createHighlightedHtml(i),o+=i.length),o>this.totalItems&&console.warn("More top items were created than the maximum allowed:","Created: "+o,"Max: "+this.totalItems),[a,o]},e.prototype.get=function(e,t){var n,i,o,s,r,a;r=[],a=[],o=[],s=2,n=0,i=function(i){return function(){var u,l,c;return n++,n>=s?(c=i.createHtml(e,r,a,o),l=c[0],u=c[1],t(l)):void 0}}(this),this.whenReady(function(t){return function(){return o=t.highlighted.getHighlightedItems(e),t.personalization.getChoices(e,function(n){var o;return null!=n&&(o=t.personalization.customItems[e],null!=o&&(n=t.personalization.completeChoice(o,null,n),r=[n])),i()}),t.recommendation.getProductItems(e,[],function(e){return a=e||[],i()})}}(this))},e}(),glb.MenuTopItems=i,"undefined"!=typeof t&&t.exports&&(t.exports=i)},{}],4:[function(e,t,n){!function(t){"use strict";var n,i,o=e("./__menu-web-carousel-topitems.coffee"),s=function(){var e,t;t=glb.cdnConfig||{},n=$(document),i=$("html"),e="//c.api.globo.com",this.attr={ajaxCacheExpiration:t.fnExpire||60,initCalled:!1,onInitProcess:!1,itemsCreated:!1,globoapiHost:e,menuItemsUrl:t.globoApiMenuUrl||e+"/menus/all.json",htmlCacheKey:"fn-menu-web-carousel-html",portals:{name:t.fnProduct.name||"",all:t.fnProductsNames||[],links:t.fnProductsHomes||[]},iconNames:{famosos:"famosos_secundario",g1:"g1_primario",home:"globocom_secundario",ge:"globoesporte_secundario",globoplay:"globoplay_terciario_white",globosatplay:"globosatplay_secundario",gshow:"gshow_smile_primario",techtudo:"techtudo_secundario"}},this.attr.portals.len=this.attr.portals.all.length,this.menuContainer=null,this.menuWeb=null,this.menuTopItems=null,this.carouselInfo=null,this.createCarouselHtml()};s.prototype.init=function(){!this.attr.initCalled&&this.attr.itemsCreated&&(this.attr.initCalled=!0,this.attr.onInitProcess=!0,this.cacheVariables(),this.initMenuTouch(),this.initSwiper(),this.resetMenuWebAnimation(),this.bind(),this.initTopItems(),this.mergeBrokenColumns(),this.carouselInfo.menuRemoved&&this.refreshMenuDataAfterRemovals(),this.overrideCarouselItems(),this.reset(),this.refreshOnAndroidBrowserWebview(),this.notifyReady(),this.attr.onInitProcess=!1)},s.prototype.restore=function(){this.carouselInfo.carouselVisible=!0,this.refreshTopItems()},s.prototype.resetAction=function(){this.menuContainer.addClass("menu-no-animation"),this.resetMenusLevel(),this.resetMenuVerticalScroll(),this.containerHeader.removeAttr("style"),this.containerBody.removeAttr("style"),this.menuContainer.removeClass("menu-no-animation")},s.prototype.reset=function(){this.carouselInfo.carouselVisible=!1,this.menuContainer.addClass("menu-invisible"),this.resetAction(),this.refresh(),this.setHorizontalCarouselsToInitialPage(),this.openSubmenuOnConfig(),this.menuContainer.removeClass("menu-invisible")},s.prototype.isIos8=function(){return!!navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i)},s.prototype.isAndroidBrowser=function(){var e=navigator.userAgent;return e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&-1===e.indexOf("Chrome")},s.prototype.isAndroidBrowserWebview=function(){var e=navigator.userAgent;return e.indexOf("AndroidBrowserWebview")>-1},s.prototype.capitalizeString=function(e){return e[0].toUpperCase()+e.substring(1,e.length)},s.prototype.mergeBrokenColumns=function(){var e=this.menuElms.menuRoot.find(".menu-submenu-column-2");e.each(function(){var e=$(this),t=e.children().remove(),n=e.prev();n.append(t)})},s.prototype.refreshOnAndroidBrowserWebview=function(){this.detections.isAndroidBrowserWebview&&(this.menuElms.menuArrowNavegacaoIcon=this.containerBody.find(".menu-item-arrow .regua-navegacao-icon"),this.menuElms.menuArrowNavegacaoIcon.replaceWith('<svg class="regua-navegacao-icon"><use xmlns:xlink="//www.w3.org/1999/xlink" xlink:href="#regua-arrow"></use></svg>'))},s.prototype.getPortalIndex=function(e){var t;for(t=0;t<this.attr.portals.len;t++)if(this.attr.portals.all[t]===e)return t;return-1},s.prototype.sortDataMenuIndex=function(){var e,t,n;for(e=0;e<this.attr.portals.len;e++)t=this.currentItemsHeader.eq(e),n=this.currentItemsBody.eq(e),t&&t.length>0&&t.find(".menu-carousel-link").attr("data-index",e),n&&n.length>0&&n.find(".menu-cascade").attr("data-menu-index",e)},s.prototype.initTopItems=function(){this.menuTopItems=new o(this.menuElms.menuRoot)},s.prototype.initMenuTouch=function(){this.menuWeb=new glb.MenuWebTouch},s.prototype.refreshMenuDataAfterRemovals=function(){var e=!0;this.cacheCarouselItemsVariables(e),this.cacheMenuElmsVariables(e),this.sortDataMenuIndex(),this.menuWeb.cache_dom(),this.menuWeb.attrPerMenu=[],this.menuWeb.init_deepness()},s.prototype.loadHtmlCache=function(){return localStorageCache.load(this.attr.htmlCacheKey)||null},s.prototype.saveHtmlCache=function(e){localStorageCache.save(this.attr.htmlCacheKey,e,this.attr.ajaxCacheExpiration)},s.prototype.carouselHtmlCreated=function(){this.attr.itemsCreated=!0,this.init()},s.prototype.createCarouselHtml=function(){var e,t,n,i,o,s=[],r=this;if(!this.attr.itemsCreated)return(o=this.loadHtmlCache())?(glb.MenuTemplates.createCarouselHtml(null,o),void this.carouselHtmlCreated()):void tinyBasket.require({url:this.attr.menuItemsUrl,success:function(a){for(e=0;e<r.attr.portals.len;e++)t=r.attr.portals.all[e],i=r.attr.portals.links[e],n=a[t],n?s.push({name:t,link:i,items:n,svgIconName:r.attr.iconNames[t],active:t==r.attr.portals.name}):r.carouselInfo.menuRemoved=!0;o=glb.MenuTemplates.createCarouselHtml(s),r.saveHtmlCache(o),r.carouselHtmlCreated()},expire:this.attr.ajaxCacheExpiration})},s.prototype.overrideCarouselItems=function(){var e,t,n,i,o,s,r,a,u,l,c=glb.cdnConfig||{},m=c.carouselMenuItems||{},h=this;for(e=0;e<h.attr.portals.len;e++)if(n=h.attr.portals.all[e],r=h.attr.portals.links[e],i=m[n])for(t=0;t<i.length;t++)o=i[t],a=this.getPortalIndex(n),s=o.id,-1===s.indexOf("#")&&(s="#"+s),s+=".is-father",u=this.currentItemsBody.eq(a).find(s),u&&u.length>0&&(l=glb.MenuTemplates.getMenuItemHtml(o.item),u.replaceWith(l))},s.prototype.cacheCarouselItemsVariablesWithSuffix=function(e,t){var n,i,o,s,r;t="undefined"!=typeof t&&t,n=this.capitalizeString(e),i=!t&&this["container"+n]||$("#menu-carousel-"+e),o=!t&&this["currentList"+n]||i.find(".menu-brands").first(),s=!t&&this["currentItems"+n]||i.find(".menu-carousel-item"),r=!t&&this["screenWidth"+n]||i.outerWidth(!1),this["screenCenter"+n]=r/2,this["itemWidth"+n]=s.first().outerWidth(!1),this["container"+n]=i,this["currentList"+n]=o,this["currentItems"+n]=s,"header"!==e||this.currentLinksHeader||(this.currentLinksHeader=s.find(".menu-carousel-link"),this.currentLinksHeaderFirst=this.currentLinksHeader.first(),this.currentLinksShadowHeader=s.find(".menu-carousel-link-shadow"),this.currentLinksShadowHeaderFirst=this.currentLinksShadowHeader.first())},s.prototype.cacheCarouselItemsVariables=function(e){this.cacheCarouselItemsVariablesWithSuffix("header",e),this.cacheCarouselItemsVariablesWithSuffix("body",e)},s.prototype.cacheMenuElmsVariables=function(e){e="undefined"!=typeof e&&e,this.menuElms=this.menuElms||{},this.menuElms.menuRounder=!e&&this.menuElms.menuRounder||this.menuContainer.find(".menu-rounder"),this.menuElms.menuCascade=!e&&this.menuElms.menuCascade||this.menuContainer.find(".menu-cascade"),this.menuElms.menuRoot=!e&&this.menuElms.menuRoot||this.menuContainer.find(".menu-root:not(.mosaic-states-list)"),this.menuElms.menuSizesInfo=!e&&this.menuElms.menuSizesInfo||$("#menu-carousel-header-sizes-infos")[0],this.menuElms.menuVerticalScroll=!e&&this.menuElms.menuVerticalScroll||this.menuElms.menuRoot.find(".menu-submenu-vertical-scroll"),this.menuElms.count=this.menuElms.menuCascade.length},s.prototype.cacheVariables=function(e){this.menuContainer=$("#menu-container"),this.currentLinksHeader=null,this.cacheCarouselItemsVariables(e),this.cacheMenuElmsVariables(e),this.swiperHeader=null,this.swiperBody=null,this.carouselInfo={resize:!1,transitionAnimationTime:100,initialActivePage:{header:this.currentItemsHeader.index(this.currentItemsHeader.filter(".menu-carousel-item-active")),body:this.currentItemsBody.index(this.currentItemsBody.filter(".menu-carousel-item-active"))},menuTopItems:{created:{},creationCallbacks:{},finishedCreation:{},personalized:{}},menuRemoved:!1,carouselVisible:!1,swiperMoving:!1,thresholdX:5,lastTimeLinkClicked:null,snapSpeed:300,resetTimeout:0,spaceBetween:0},this.previousMenuLevel=0,this.menuLevel=0,this.elmsHeights={},this.menusLevel={},this.animationEnd="webkitAnimationEnd oanimationend msAnimationEnd animationend",this.detections={isAndroidBrowser:this.isAndroidBrowser(),isAndroidBrowserWebview:this.isAndroidBrowserWebview(),isIos8:this.isIos8()}},s.prototype.refresh=function(){(this.carouselInfo.resize||this.attr.onInitProcess)&&(this.cacheCarouselItemsVariables(),this.refreshHorizontalCarousels())},s.prototype.injectExtraWidth=function(e){var t,n=this["currentList"+e];this.attr["extraWidth"+e]||(t=this.attr["extraWidth"+e]=parseInt(n.css("width"),10)+this.carouselInfo.thresholdX,n.css("width",t))},s.prototype.refreshHorizontalCarousels=function(){var e=this;null!==this.swiperHeader&&this.swiperHeader.update(),null!==this.swiperBody&&this.swiperBody.update(),setTimeout(function(){e.detections.isAndroidBrowserWebview&&(e.injectExtraWidth("Header"),e.injectExtraWidth("Body"))},500)},s.prototype.setHorizontalCarouselsToPage=function(e,t){t=t||0,this.swiperHeader.slideTo(e,t),this.swiperBody.slideTo(e,t)},s.prototype.setHorizontalCarouselsToInitialPage=function(e){this.setHorizontalCarouselsToPage(this.carouselInfo.initialActivePage.header,e)},s.prototype.setHorizontalCarouselsToCurrentPage=function(e){this.setHorizontalCarouselsToPage(this.swiperHeader.activeIndex,e)},s.prototype.openSubmenuOnConfig=function(){this.menuWeb.refresh(),this.menuWeb.open_submenu_on_config()},s.prototype.notifyReady=function(){document.dispatchEvent(new CustomEvent("glb.menu-carousel.ready"))},s.prototype.slideToHeaderLink=function(e){var t,i,o,s=this.swiperBody.activeIndex,r=new Date;return t=parseInt(e.attr("data-index"),10),i=e.parents(".menu-carousel-item"),o=i.attr("data-produto"),t!==s||this.carouselInfo.swiperMoving?(this.setHorizontalCarouselsToPage(t,this.carouselInfo.snapSpeed),n.trigger("glb.menu.marca_navigation",[o]),this.carouselInfo.lastTimeLinkClicked=r,!1):(n.trigger("glb.menu.marca_click",[o]),window.location.href=e.attr("href"),!0)},s.prototype.resetMenusActive=function(){this.menuElms.menuRoot.find(".is-activated.menu-item").removeClass("is-activated")},s.prototype.resetMenusLevel=function(){var e,t,n,i,o=function(e,t){return(t.match(/\bmenu-level-\d+/g)||[]).join(" ")};for(t=0;t<this.menuElms.count;t++)n=this.menuElms.menuCascade.eq(t),i=this.menuElms.menuRoot.eq(t),this.menusLevel[t]=0,i.removeClass(o).addClass("menu-level-0"),e=parseInt(n.attr("data-menu-index"),10),this.menuWeb.move_to_level(0,e,!1)},s.prototype.resetMenuWebAnimation=function(){this.menuWeb.attr.menu_animation_duration=0},s.prototype.getFromActiveSubmenu=function(e){var t=this.swiperBody.activeIndex,n=this.menuLevel,i=this.menuElms.menuRoot.eq(t);return i.find(".is-activated.menu-item > .menu-submenu-level"+n+" > "+e)},s.prototype.refreshMenuLevel=function(e){var t=this,n=this.swiperHeader.activeIndex,i=this.menuElms.menuRoot.eq(this.swiperBody.activeIndex),o=function(e){(t.detections.isAndroidBrowserWebview||t.detections.isIos8)&&t.forceRepainting(e)};return"undefined"==typeof e?void(this.menuLevel=this.menusLevel[n]):(this.previousMenuLevel=this.menusLevel[n]||0,this.menuLevel=this.menusLevel[n]=e||0,
0===this.menuLevel&&this.previousMenuLevel>0?setTimeout(function(){i.addClass("menu-level-"+t.menuLevel),o(i)},this.carouselInfo.transitionAnimationTime):(i.addClass("menu-level-"+this.menuLevel),o(i)),void((0!==this.menuLevel||0!==this.previousMenuLevel)&&(0===this.previousMenuLevel&&this.menuLevel>0?setTimeout(function(){i.removeClass("menu-level-"+t.previousMenuLevel),o(i)},this.carouselInfo.transitionAnimationTime):(i.removeClass("menu-level-"+this.previousMenuLevel),o(i)))))},s.prototype.resetMenuVerticalScroll=function(){this.menuElms.menuRoot.scrollTop(0),this.menuElms.menuVerticalScroll.scrollTop(0)},s.prototype.forceRepainting=function(e){e.hide().show(0),setTimeout(function(){e.css({overflow:"",display:""})})},s.prototype.refreshMenuVerticalScroll=function(e){this.menuLevel>e&&this.getFromActiveSubmenu(".menu-submenu-vertical-scroll").scrollTop(0)},s.prototype.initSwiper=function(){var e,t,n,i=this,o={runCallbacksOnInit:!1,resistance:!0,resistanceRatio:0,threshold:0,spaceBetween:this.carouselInfo.spaceBetween,setWrapperSize:!0,slideActiveClass:"menu-carousel-item-active",centeredSlides:!0,speed:i.carouselInfo.snapSpeed,longSwipesMs:i.carouselInfo.snapSpeed,roundLengths:!0,onTouchStart:function(e){i.carouselInfo.initialSwiperTranslation=e.translate},onSliderMove:function(o){e=o.translate,t=i.carouselInfo.initialSwiperTranslation-e,n=Math.abs(t),n>i.carouselInfo.thresholdX&&!i.carouselInfo.swiperMoving&&(i.carouselInfo.swiperMoving=!0,manageElementClasses.addClass(i.swiperHeader.container[0],"swiper-moving"),i.carouselInfo.startPosition=o.activeIndex)},onTouchEnd:function(){manageElementClasses.removeClass(i.swiperHeader.container[0],"swiper-moving")},onSlideChangeStart:function(){manageElementClasses.removeClass(i.swiperHeader.container[0],"swiper-moving")},onSlideChangeEnd:function(e){i.carouselInfo.swiperMoving=!1,i.carouselInfo.endPosition=e.activeIndex,manageElementClasses.removeClass(i.swiperHeader.container[0],"swiper-moving"),i.refreshTopItems()}};this.swiperHeader=new Swiper(this.containerHeader[0],$.extend({slidesPerView:"auto"},o)),this.swiperBody=new Swiper(this.containerBody[0],$.extend({slidesPerView:1,control:this.swiperHeader,onSlideChangeEnd:function(){i.refreshMenuLevel()}},o)),this.swiperHeader.params.control=this.swiperBody},s.prototype.refreshSubmenuClass=function(){var e=this.swiperBody.activeIndex,t=this.currentItemsBody.eq(e);0!==this.menuLevel?t.addClass("is-carousel-submenu-active"):t.removeClass("is-carousel-submenu-active")},s.prototype.bind=function(){var e=this;this.menuContainer.on("menu_shown",function(){document.dispatchEvent(new CustomEvent("glb.menu-carousel.shown.before")),e.restore(),document.dispatchEvent(new CustomEvent("glb.menu-carousel.shown.after"))}),this.menuContainer.on("menu_off",function(){document.dispatchEvent(new CustomEvent("glb.menu-carousel.off.before")),setTimeout(function(){e.reset(),document.dispatchEvent(new CustomEvent("glb.menu-carousel.off.after"))},e.carouselInfo.resetTimeout)}),this.menuContainer.on("menu_pre_move",function(t,n){e.refreshMenuVerticalScroll(n)}),this.menuContainer.on("menu_moved",function(t,n){e.refreshMenuLevel(n),e.refreshSubmenuClass()}),$(window).on("resize",glb.debounce(function(){e.carouselInfo.resize=!0,e.carouselInfo.carouselVisible?(e.resetAction(),e.menuContainer.addClass("menu-no-animation"),e.refresh(),e.menuContainer.removeClass("menu-no-animation"),e.setHorizontalCarouselsToCurrentPage()):e.reset(),setTimeout(function(){e.resetMenusActive()},e.carouselInfo.transitionAnimationTime),e.carouselInfo.resize=!1},250)),this.currentLinksHeader.bind("tap",function(){return e.slideToHeaderLink($(this))})},s.prototype.backAfterPersonalization=function(e){var t,n;t=e.parents(".menu-submenu"),n=t.find(".menu-item-back"),n.click()},s.prototype.refreshTopItemsForProduct=function(e,t){var n,i,o,s,r,a,u=this,l=this.attr.portals.all[e],c=this.menuElms.menuRoot.eq(e);this.carouselInfo.menuTopItems.created[l]||(this.carouselInfo.menuTopItems.created[l]=!0,this.carouselInfo.menuTopItems.creationCallbacks[l]||(this.carouselInfo.menuTopItems.creationCallbacks[l]=[]),this.menuTopItems.get(l,function(e){if(c.prepend(e),u.carouselInfo.menuTopItems.finishedCreation[l]=!0,a=u.carouselInfo.menuTopItems.creationCallbacks[l],r&&r.length>0)for(s=0;s<a.length;s++)(r=a[s])()})),n=this.carouselInfo.menuTopItems.created[l]&&!this.carouselInfo.menuTopItems.personalized[l]&&this.carouselInfo.carouselVisible&&(t||this.menuTopItems.personalizationInCache(l)),n&&(this.carouselInfo.menuTopItems.personalized[l]=!0,i=function(e,t){u.backAfterPersonalization(t)},o=function(){u.menuTopItems.personalize(l,i)},this.carouselInfo.menuTopItems.finishedCreation[l]?o():this.carouselInfo.menuTopItems.creationCallbacks[l].push(o))},s.prototype.refreshTopItems=function(){var e,t,n=this.swiperBody.activeIndex;"undefined"!=typeof this.menuTopItems&&this.attr.itemsCreated&&(n>0&&(e=n-1,this.refreshTopItemsForProduct(e,!1)),n<this.attr.portals.len-1&&(t=n+1,this.refreshTopItemsForProduct(t,!1)),this.refreshTopItemsForProduct(n,!0))},t.glb||(t.glb={}),t.glb.MenuWebCarousel=s}(window),"undefined"!=typeof t&&t.exports&&(t.exports=window.glb.MenuWebCarousel)},{"./__menu-web-carousel-topitems.coffee":3}],5:[function(e,t,n){!function(e){"use strict";var t=function(e){this.version="{{ version }}",this.attr={hover_class:"is-hovered",active_class:"is-activated",father_class:"is-father",floated_class:"is-floated",ready_class:"is-menu-ready",desktop_class:"is-menu-desktop",column_break_class:"menu-item-submenu-broken",item_selector:".menu-item",link_selector:".menu-item-link",title_selector:".menu-item-title",menu_leave_timeout:200,submenu_leave_timeout:350,animation_duration:300,submenu_with_break_aditional:90,column_width:null,activation_stack:[],submenu_opened:null,$submenu_to_open:null,hover_item:null},$.extend(this.attr,e),this.timers={},this.cache_dom(),this.move_markup(),this.init_tracking(),this.createProxies(),this.listen_events(),this.mark_as_ready()};t.prototype={cache_dom:function(){var e={};e.$window=$(window),e.$document=$(document),e.$html=$("html"),e.$body=$("body"),e.$menu_button=$(".menu-button"),e.$menu_container=$("#menu-container"),e.$previous_container_sibling=e.$menu_container.prev(),e.$menu_cascade=e.$menu_container.find("#menu-cascade"),e.$menu_addon=e.$menu_container.find("#menu-addon"),e.$menu_root=e.$menu_cascade.children(".menu-root"),this.dom=e},move_markup:function(){var e=this.dom;e.$body.append(e.$menu_container.detach())},init_tracking:function(){this.attr.tracking=new e.glb.MenuWebTracker(this.dom.$menu_root)},createProxies:function(){var e,t={};t.reveal_menu=$.proxy(this,"reveal_menu"),t.hide_menu=$.proxy(this,"hide_menu"),t.cancel_menu_leave_timeout=$.proxy(this,"cancel_menu_leave_timeout"),t.enter_item=$.proxy(this,"enter_item"),t.set_hover=$.proxy(this,"set_hover"),t.leave_item=$.proxy(this,"leave_item"),t.cancel_submenu_leave_timeout=$.proxy(this,"cancel_submenu_leave_timeout");for(e in t)t.hasOwnProperty(e)&&(this["prx_"+e]=t[e])},listen_events:function(){var e=this.dom,t=this.attr.item_selector;e.$document.on("header_fixed.menu_web",this.prx_hide_menu),e.$menu_button.on("mouseenter.menu_web",this.prx_reveal_menu).on("mouseleave.menu_web",this.prx_hide_menu),e.$menu_container.on("mouseenter.menu_web",this.prx_cancel_menu_leave_timeout).on("mouseleave.menu_web",this.prx_hide_menu),e.$menu_addon.on("mouseenter.menu_web",this.prx_cancel_submenu_leave_timeout),e.$menu_cascade.on("mouseover.menu_web",t,this.prx_enter_item).on("mouseleave.menu_web",t,this.prx_leave_item).find(t).on("mouseenter.menu_web",this.prx_set_hover)},mark_as_ready:function(){var e=this.dom,t=this.attr,n=t.desktop_class+" "+t.ready_class;e.$html.addClass(n),e.$menu_container.trigger("menu_ready")},reveal_menu:function(e){var t,n,i=$(e.target).closest(".menu-button"),o=i.offset(),s=o.top,r=o.left,a=i.height(),u=this.dom,l=this.attr;this.cancel_menu_leave_timeout(),i.closest(".floating-bar")[0]?(n=u.$window.scrollTop(),t=s-n+a,u.$menu_container.addClass(l.floated_class)):(t=s+a-10,u.$menu_container.removeClass(l.floated_class)),u.$menu_container.css({top:t,left:r-11,display:"block"}),this.measure_column_width(),this.open_first_item(),u.$menu_container.trigger("menu_shown")},open_first_item:function(){var e=this.dom.$menu_root.children(".is-father").eq(0),t={};e.length>0&&(t.target=e[0],this.set_hover(t),this.enter_item(t))},measure_column_width:function(){var e=this.attr,t=this.dom;e.column_width=t.$menu_root.width(),t.$menu_cascade.width(e.column_width),this.measure_column_width=$.noop},hide_menu:function(){this.cancel_menu_leave_timeout(),this.timers.menu_leave_timeout=this._late(function(){var e=this.attr;this.dom.$menu_container.hide().trigger("menu_leave_timeout"),e.activation_stack=[],e.submenu_opened=null,e.$submenu_to_open=null,this.change_columns(),this.timers.menu_leave_timeout=null,this._cancel_late(this.timers.submenu_leave_timeout),this._cancel_late(this.timers.submenu_closing_timeout),this.dom.$menu_root.find(e.item_selector).filter("."+e.active_class+", ."+e.hover_class).removeClass(e.active_class+" "+e.hover_class)},this.attr.menu_leave_timeout)},cancel_menu_leave_timeout:function(){this._cancel_late(this.timers.menu_leave_timeout),this.timers.menu_leave_timeout=null},cancel_submenu_leave_timeout:function(){this._cancel_late(this.timers.submenu_leave_timeout),this._cancel_late(this.timers.submenu_closing_timeout)},set_hover:function(e){var t,n,i,o,s,r=this.attr,a=$(e.target),u=a.closest(r.item_selector),l=this._is_father(u),c=this._is_stack_head(u[0]);u.addClass(r.hover_class),r.hover_item=u[0],i=u.parents("."+r.column_break_class).length>0,!l||c||i?r.$submenu_to_open=null:(t=r.submenu_opened&&u.siblings().filter(r.submenu_opened).length>0,o=$(r.submenu_opened).parents(r.item_selector).length,s=u.parents(r.item_selector).length,n=r.submenu_opened&&o>s,(t||n)&&(r.$submenu_to_open=u))},enter_item:function(e){var t,n,i,o,s,r,a,u=this.attr,l=this._stack_head(),c=$(e.target),m=c.closest(u.item_selector),h=m.parents(),d=this._is_father(m),p=this._is_stack_head(m[0]);l&&(t=h.filter(l).length>0,(t||p)&&this._cancel_late(this.timers.submenu_leave_timeout)),o=m.parents("."+u.column_break_class).length>0,a=u.submenu_opened&&u.submenu_opened[0]===m[0],!d||p||o||(n=u.submenu_opened&&m.siblings().filter(u.submenu_opened).length>0,s=$(u.submenu_opened).parents(u.item_selector).length,r=m.parents(u.item_selector).length,i=u.submenu_opened&&s>r,n||i||(this._cancel_late(this.timers.submenu_closing_timeout),this.activate_submenu(m)))},activate_submenu:function(e){var t=this.attr,n=0;t.$submenu_to_open=null,t.submenu_opened=e[0],e.addClass(t.active_class),e.hasClass(t.column_break_class)&&(n=t.submenu_with_break_aditional),t.activation_stack.push(e),this.change_columns(n)},leave_item:function(e){var t,n=this.attr,i=$(e.target),o=i.closest(n.item_selector),s=n.$submenu_to_open,r=o.parents(),a=this._stack_head(),u=s&&s[0]===o[0],l=this._is_father(o);o.removeClass(n.hover_class),n.hover_item=null,l?u?n.$submenu_to_open=null:this.deactivate_menu_item(o):(t=a&&r.filter(a).length>0,t&&this.deactivate_menu_item(o))},deactivate_menu_item:function(e){var t=this.attr;this._cancel_late(this.timers.submenu_leave_timeout),this.timers.submenu_leave_timeout=this._late(function(){var n,i,o,s,r,a=this._stack_head(),u=null!==t.hover_item,l=!1,c=e,m=!1;if(u&&(o=0===$(t.hover_item).parents().filter(a).length,o&&(l=!0)),t.$submenu_to_open&&(n=t.$submenu_to_open.hasClass(t.father_class),i=t.$submenu_to_open.parents().filter(a).length>0,n&&i&&(m=!0)),m)return void this.activate_submenu(t.$submenu_to_open);if(l)for(c=$(),s=t.activation_stack.length;s>0&&(r=t.activation_stack[s-1],c=c.add(r),!($(r).siblings().filter(t.hover_item).length>0));s--);t.activation_stack=t.activation_stack.slice(0,-c.length),t.$submenu_to_open?this.deactivate_submenus(c):(this.change_columns(),this.timers.submenu_closing_timeout=this._late(function(){this.deactivate_submenus(c)},t.animation_duration))},t.submenu_leave_timeout)},deactivate_submenus:function(e){var t=this.attr,n=this._stack_head();t.submenu_opened=n||null,e.removeClass(t.active_class+" "+t.hover_class),t.$submenu_to_open&&this.activate_submenu(t.$submenu_to_open)},change_columns:function(e){var t,n=this.attr;e=e||0,t=n.column_width*(n.activation_stack.length+1),this.dom.$menu_cascade.width(t+e)},_is_father:function(e){var t=this.attr;return e.hasClass(t.father_class)},_stack_head:function(){var e=this.attr,t=e.activation_stack;return t[t.length-1]},_is_stack_head:function(e){var t=this._stack_head();return t&&e===t[0]},_cancel_late:function(e){null!=e&&window.clearTimeout(e)},_late:function(e,t){var n=$.proxy(e,this);return t?window.setTimeout(n,t):(n(),null)},destroy:function(){var e,n=this.attr,i=this.dom,o=this.timers,s=n.item_selector;i.$previous_container_sibling.after(i.$menu_container.detach()),i.$document.off(".menu_web"),i.$menu_button.off(".menu_web"),i.$menu_container.off(".menu_web"),i.$menu_addon.off(".menu_web"),i.$menu_cascade.off(".menu_web").find(s).off(".menu_web"),i.$menu_root.off(".menu_web"),i.$html.removeClass(n.desktop_class+" "+n.ready_class);for(e in o)o.hasOwnProperty(e)&&window.clearTimeout(o[e]);return n.tracking.destroy(),t}},e.glb||(e.glb={}),e.glb.MenuWebDesktop=t}(window),"undefined"!=typeof t&&t.exports&&(t.exports=window.glb.MenuWebDesktop)},{}],6:[function(e,t,n){!function(e){"use strict";var t=function(e){this.version="{{ version }}",this.$document=$(document),this.attr={pushing_class:"is-menu-pushing",pushed_class:"is-menu-pushed",touch_class:"is-menu-touch",hover_class:"is-hovered",active_class:"is-activated",back_class:"menu-item-back",father_class:"is-father",personalization_class:"menu-personalization-choice",auto_created_class:"is-auto-created",ready_class:"is-menu-ready",menu_button_selector:".menu-button",container_selector:"#menu-container",overlay_selector:"#menu-content-overlay",menu_rounder_selector:".menu-rounder",menu_cascade_selector:".menu-cascade",menu_area_selector:".menu-area",root_selector:".menu-root",submenu_selector:".menu-submenu",item_selector:".menu-item",link_selector:".menu-item-link",title_selector:".menu-item-title",submenu_title_selector:".menu-submenu-title",back_selector:".menu-item-back",father_selector:".is-father",activated_selector:".is-activated",hovered_selector:".is-hovered",second_column_selector:".menu-submenu-column-2",clickable_item_selector:".menu-item, .menu-item-back",header_selector:"#header-produto",event_namespace:".menu_touch",menu_animation_duration:300,submenu_animation_duration:300,testing_mode:!1,menu_width:null,menu_opened:!1,items_created:!1,second_columns:[],is_mouse_capable:!1,is_scrolls_capable:!1},this.attr.menuFramework=glb.hasRegua,this.attrPerMenu=[],$.extend(this.attr,e),this.create_html(),this.cache_dom(),this.init_tracking(),this.init_deepness(),this.move_to_body(),this.move_overlay_to_body(),this.create_proxies(),this.merge_broken_columns(),this.listen_events(),this.notify_of_boot(),this.force_menu_bind()};t.prototype={create_html:function(){var e,t=[];this.attr.menuFramework||(e=glb.cdnConfig||{},t=e.menuItems||t,glb.MenuTemplates.createMenuBaseHtml(t))},cache_dom:function(){var e=this.attr,t={};t.$html=$("html"),t.$window=$(window),t.$body=e.testing_mode?$("#fake-body"):$("body"),t.$menu_button=$(e.menu_button_selector),t.$menu_container=$(e.container_selector),t.$menu_area=$(e.menu_area_selector),t.$previous_container_sibling=t.$menu_container.prev(),t.$overlay=$(e.overlay_selector),t.$header=$(e.header_selector),this.dom=t,this.cache_menu_rounder_dom()},cache_menu_rounder_dom:function(){this.dom.$menu_rounder=this.dom.$menu_container.find(this.attr.menu_rounder_selector),this.dom.$menu_cascade=this.dom.$menu_container.find(this.attr.menu_cascade_selector),this.dom.$menu_root=this.dom.$menu_cascade.children(this.attr.root_selector),this.attr.number_of_menus=this.dom.$menu_root.length},init_tracking:function(){var t=!0;this.attr.tracking=new e.glb.MenuWebTracker(this.dom.$menu_root,t)},init_deepness:function(){var e;for(e=0;e<this.attr.number_of_menus;e++)this.attrPerMenu.push({deepness:0})},move_to_body:function(){this.dom.$menu_container.detach().prependTo(this.dom.$body)},move_overlay_to_body:function(){this.dom.$overlay.detach().prependTo(this.dom.$body)},create_proxies:function(){var e,t={};t.reveal_menu=$.proxy(this,"reveal_menu"),t.collapse_menu=$.proxy(this,"collapse_menu"),t.reset_menu=$.proxy(this,"reset_menu"),t.reveal_submenu=$.proxy(this,"reveal_submenu"),t.hide_submenu=$.proxy(this,"hide_submenu"),t.enter_item=$.proxy(this,"enter_item"),t.leave_item=$.proxy(this,"leave_item"),t.refresh=$.proxy(this,"refresh");for(e in t)t.hasOwnProperty(e)&&(this["prx_"+e]=t[e])},merge_broken_columns:function(){var e=this.attr,t=e.second_columns,n=this.dom.$menu_root.find(e.second_column_selector);n.each(function(){var e=$(this),n=e.children().remove(),i=e.prev();i.append(n),t.push({first_column:i,second_column:e.remove(),children:n})})},refresh:function(){this.attr.menu_width=this.dom.$menu_cascade.first().outerWidth(!1)},open_submenu_on_config:function(){var e,t,n=this.dom.$menu_container,i=glb.cdnConfig||{},o=i.openSubmenuId||null;return o?(-1===o.indexOf("#")&&(o="#"+o),e=o+"."+this.attr.father_class,t=$(e),0===t.length?!1:(n.addClass("menu-no-animation"),this.reveal_submenu({target:t}),setTimeout(function(){n.removeClass("menu-no-animation")},0),!0)):!1},listen_events:function(){var e=this.dom,t=this.attr,n=t.event_namespace,i=!1,o=function(e,t){var i=[e,n];return t&&i.push(t),i.join("")};e.$body.one(o("mousedown"),$.proxy(function(){i=!1})),e.$body.on(o("mousemove"),$.proxy(function(){i&&(t.is_mouse_capable=!0,e.$body.off(o("mousemove")),e.$menu_rounder.on(o("mouseenter"),t.clickable_item_selector,this.prx_enter_item).on(o("mouseleave"),t.clickable_item_selector,this.prx_leave_item)),i=!0},this)),e.$overlay.on(o("click"),this.prx_collapse_menu),e.$menu_root.on(o("click"),t.father_selector,this.prx_reveal_submenu).on(o("click"),t.back_selector,this.prx_hide_submenu),e.$window.on("resize",glb.debounce(this.prx_refresh,250)),this.$document.on("glb.menu.open",this.prx_reveal_menu),this.$document.on("glb.menu.close",this.prx_collapse_menu)},notify_of_boot:function(){var e=this.attr,t=this.dom,n=this._join(e.touch_class,e.ready_class);t.$html.addClass(n),t.$menu_container.trigger("menu_ready",[this])},check_scrolls_support:function(){var t=e.document,n=t.documentElement,i=this.attr.is_mouse_capable,o=i||"WebkitOverflowScrolling"in n.style||"msOverflowStyle"in n.style||function(){var t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),i=n&&n[1],o=n&&i>=534;return t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&o||t.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&e.blackberry&&o||t.indexOf("PlayBook")>-1&&o&&t.indexOf("Android 2")>-1||t.match(/Firefox\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&o||t.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&n&&i>=533}();this.attr.is_scrolls_capable=o,this.dom.$html.addClass((o?"has-":"has-not-")+"native-scrolls")},reveal_menu:function(){var e,t=this.dom,n=this.attr,i=this._join(n.pushing_class,n.pushed_class);n.menu_opened||(this.check_scrolls_support(),t.$html.addClass(i),this.refresh(),n.menuFramework||(e=this.open_submenu_on_config(),e||this.dom.$menu_container.removeClass("menu-no-animation")),t.$menu_container.trigger("menu_shown"),n.menu_animation_duration>0?setTimeout(function(){n.menu_opened=!0},n.menu_animation_duration):n.menu_opened=!0)},force_menu_bind:function(){var e=this,t=this.dom.$menu_button;this.dom.$header.hasClass("header-navegacao")||t.on("click",function(){return e.reveal_menu(),!1})},collapse_menu:function(){var e=this.attr,t=this;e.menu_opened&&(e.menu_opened=!1,this.dom.$html.removeClass(e.pushed_class),e.menu_animation_duration>0?(setTimeout(this.prx_reset_menu,e.menu_animation_duration),setTimeout(function(){t.dom.$menu_container.trigger("menu_off")},e.menu_animation_duration)):(this.reset_menu(),this.dom.$menu_container.trigger("menu_off")))},reveal_submenu:function(e){var t=this.attr,n=$(e.target),i=n.closest(t.activated_selector),o=n.closest(t.item_selector),s=o.hasClass(t.father_class),r=i[0]!==o[0],a=!n.hasClass(t.personalization_class);s&&r&&a&&(o.addClass(t.active_class),this.navigate("forward",o),e.preventDefault&&e.preventDefault())},hide_submenu:function(e){var t=this.attr,n=$(e.target),i=n.parents(t.activated_selector).first();i.removeClass(t.hover_class),this.navigate("back",i),setTimeout(function(){i.removeClass(t.active_class)},t.submenu_animation_duration)},navigate:function(e,t){var n,i,o={back:-1,forward:1},s=t?t.parents(this.attr.menu_cascade_selector):null;e in o&&(n=o[e],i=parseInt(s.attr("data-menu-index"),10),this.move_to_level(this.attrPerMenu[i].deepness+n,i))},move_to_level:function(e,t,n){var i,o,s=this.dom,r=this.attr;n="undefined"!=typeof n?n:!0,e=e>=0?e:0,"undefined"!=typeof t&&null!==t&&this.attrPerMenu[t]?(this.attrPerMenu[t].deepness=e,o=s.$menu_cascade.eq(t)):o=s.$menu_cascade,n&&s.$menu_container.trigger("menu_pre_move",[e]),i=e*r.menu_width,this.attr.menuFramework||s.$body.scrollTop(0),s.$menu_rounder.scrollTop(0),o.css("left",-i),n&&s.$menu_container.trigger("menu_moved",[e])},enter_item:function(e){var t=this.attr;$(e.target).closest(t.clickable_item_selector).addClass(t.hover_class)},leave_item:function(e){var t=this.attr;$(e.target).closest(t.clickable_item_selector).removeClass(t.hover_class)},reset_menu:function(){var e,t=this.dom,n=this.attr;for(n.menu_opened=!1,n.items_created=!1,e=0;e<this.attr.number_of_menus;e++)this.move_to_level(0,e);t.$html.removeClass(this._join(n.pushing_class,n.pushed_class)),t.$menu_root.find(n.activated_selector).removeClass(n.active_class),t.$menu_root.find(n.hovered_selector).removeClass(n.hover_class),t.$menu_container.trigger("menu_reset")},destroy:function(){var e,n,i,o,s=this.dom,r=this.attr,a=r.event_namespace,u=r.second_columns;for(s.$body.off(a),s.$overlay.off(a),s.$menu_button.off(a),s.$menu_root.off(a),r.tracking.destroy(),this.reset_menu();u.length>0;)e=u.shift(),n=e.first_column,i=e.second_column,o=e.children,i.append(o.remove()),n.after(i);return s.$html.removeClass(this._join(r.touch_class,r.ready_class)),s.$previous_container_sibling.after(s.$menu_container.remove()),s.$menu_container.after(s.$overlay.remove()),t},_join:function(){var e=Array.prototype.slice.call(arguments,0);return e.join(" ")}},e.glb||(e.glb={}),e.glb.MenuWebTouch=t}(window),"undefined"!=typeof t&&t.exports&&(t.exports=window.glb.MenuWebTouch)},{}],7:[function(e,t,n){!function(e){"use strict";var t=function(e,t){this.attr={item_selector:".menu-item",link_selector:".menu-item-link",title_selector:".menu-item-title",item_back_selector:".menu-item-back",item_highlighted_selector:".menu-item-highlighted",product_selector:".menu-carousel-item",item_highlighted_class:"menu-item-highlighted",item_recommendation_class:"menu-item-recommendation",item_personalized_class:"menu-item-personalized",event_namespace:".ga_tracking",accent_matcher:null,translate_table:null,shouldTrack:!window.noTrackingMenuWeb,track_item_events_flag:!1,onMobile:t||!1},this.attr.menuFramework=glb.hasRegua,this.cache_dom(e),this.prepare_translation(),this.listen_events()};t.prototype={cache_dom:function(e){var t={};t.$menu_button=$(".menu-button"),t.$menu_root=e,this.dom=t},listen_events:function(){var e,t,n=this,i=function(){e=!window.noTrackingMenuWeb,window.noTrackingMenuWeb=!0,setTimeout(function(){window.noTrackingMenuWeb=!e},300)},o=this.dom,s=this.attr,r=s.item_selector,a=s.item_back_selector,u=s.event_namespace,l=function(e){return e+u};o.$menu_button.on(l("click"),function(e){n.track_menu_shown(e)}),o.$menu_root.on(l("click"),r,function(e){n.track_item_events(e)}),o.$menu_root.on(l("click"),a,function(){t=$(this),n.track_item_back_events(t)}),glb.$document.on("glb.menu.item-personalizado",function(e,t,o){n.register_event("item","clique | top itens | "+t+" | personalizado | "+o),i()}),glb.$document.on("glb.menu.navegacional",function(e,t,o,s){n.register_event("item","clique | estrutura | "+t+" | "+o+" > "+s),i()}),glb.$document.on("glb.menu.personalizacao",function(e,t,o,s){n.register_event("interacoes","personalizacao | "+t+" | "+o+" | "+s,0,!0),i()}),glb.$document.on("glb.menu.marca_click",function(e,t){n.register_event("marca","clique | "+t)}),glb.$document.on("glb.menu.marca_navigation",function(e,t){n.register_event("marca","interacao | "+t,0,!0)}),glb.$document.on("glb.menu.swipe",function(e,t){n.register_event("interacoes","swipe | "+t,0,!0)})},register_event:function(){var t=["_trackEvent"];this.attr.menuFramework?t.push("menu_framework"):t.push("Menu");var n=Array.prototype.slice.call(arguments,0),i=t.concat(n);this.attr.shouldTrack=!window.noTrackingMenuWeb,this.attr.shouldTrack&&(e._gaq?e._gaq.push(i):window.debugFnGATracking&&console.log(i))},track_menu_shown:function(){this.attr.menuFramework||this.register_event("exibicao","menu exibido",0,!0)},prepare_translation:function(){var e,t=this.attr,n="",i="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY",o={};for(e=0;e<n.length;e++)o[n[e]]=i[e];t.accent_matcher=new RegExp("["+n+"]","g"),t.translate_table=o},accent_replacer:function(e){return this.attr.translate_table[e]||e},strip_accents:function(e){var t=this;return e.replace(this.attr.accent_matcher,function(e){return t.accent_replacer(e)})},track_item_events:function(e){var t,n,i,o,s,r,a,u,l,c,m,h=this.attr,d=[h.item_selector,h.link_selector,h.title_selector].join(", "),p=$(e.target).filter(d);if(!h.track_item_events_flag&&(h.track_item_events_flag=!0,setTimeout(function(){h.track_item_events_flag=!1},300),p.length)){if(t=p.closest(h.item_selector),r=t.children(h.link_selector),a=t.parents(h.item_selector),u=$.trim(r.text()),s=t.parents(h.product_selector),m=s.attr("data-produto"),a.each(function(){c=$(this).children(h.link_selector).text(),u=$.trim(c)+" > "+u}),u=this.strip_accents(u.toLowerCase()),t.hasClass(h.item_highlighted_class)&&h.menuFramework)return n=t.parent().find(h.item_highlighted_selector),i=n.index(t)+1,o="editorial",t.hasClass(h.item_recommendation_class)&&(o="recomendado"),o&&(o=" | "+o),u="clique | top itens | "+m+o+" | posicao "+i+" | "+u,void this.register_event("item",u);l=u,u="clique | estrutura | "+m+" | "+u,r.attr("href")?h.menuFramework?this.register_event("item",u):this.register_event("Links clicaveis",l):h.menuFramework?this.register_event("item agregador",u,0,!0):this.register_event("Links nao clicaveis",l,0,!0)}},track_item_back_events:function(e){var t=this.attr,n=e.parents(t.product_selector),i=n.attr("data-produto"),o="interacao | back | "+i+" | "+$.trim(e.text());this.register_event("item",o,0,!0)},destroy:function(){var e=this.dom,t=this.attr.event_namespace;e.$menu_button.off(t),e.$menu_root.off(t)}},e.glb||(e.glb={}),e.glb.MenuWebTracker=t}(window),"undefined"!=typeof t&&t.exports&&(t.exports=window.glb.MenuWebTracker)},{}],8:[function(e,t,n){var i,o,s,r,a,u,l,c;u=e("../common/__common-ready.coffee"),a=e("./__menu-web-tracking.js"),o=e("./__menu-web-carousel.js"),s=e("./__menu-web-desktop.js"),r=e("./__menu-web-touch.js"),i=e("./__menu-templates.coffee"),l=window.glb=window.glb||{},l.MenuTemplates=i,window.glb.initMenuWeb=function(){var e,t,n;return t=window.isTouchable,n=960,e=l.hasRegua,t||$(window).width()<n?e?l.currentMenuWeb=new o:l.currentMenuWeb=new r:l.currentMenuWeb=new s},c=null!=window.noAutoLoadMenuWeb&&window.noAutoLoadMenuWeb,c||u(window.glb.initMenuWeb)},{"../common/__common-ready.coffee":1,"./__menu-templates.coffee":2,"./__menu-web-carousel.js":4,"./__menu-web-desktop.js":5,"./__menu-web-touch.js":6,"./__menu-web-tracking.js":7}]},{},[8]);