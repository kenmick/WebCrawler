!function(){function e(){var e;try{return e=top.document,e.piximediaiframetest=!0,top}catch(t){}try{return e=a.parent.parent.parent.document,e.piximediaiframetest=!0,a.parent.parent.parent.window}catch(t){}try{return e=a.parent.parent.document,e.piximediaiframetest=!0,a.parent.parent.window}catch(t){}try{return e=a.parent.document,e.piximediaiframetest=!0,a.parent.window}catch(t){}return window}var t,i,a=window,o='!function(e,t){window._piximediaBrowserDetect=function(){"use strict;";function i(e){var i=t.createElement("a");return i.href=e,i}function a(){try{return""===top.document.referrer?!0:i(top.document.referrer).hostname==top.window.location.hostname?!1:!0}catch(a){}try{return""===t.referrer?!0:i(t.referrer).hostname==e.location.hostname?!1:!0}catch(a){return!1}}function o(){var t="",i="";return e.screen&&e.screen.width&&e.screen.height&&(t=e.screen.width,i=e.screen.height),{width:t,height:i,resolution:parseInt(t,10)&&parseInt(i,10)?t+"x"+i:"n/a"}}function n(){try{var e,t,i=parent.window?parent.window:window;return"undefined"!=typeof i.innerWidth?(e=i.innerWidth,t=i.innerHeight):"undefined"!=typeof i.document.documentElement&&"undefined"!=typeof i.document.documentElement.clientWidth&&0!==i.document.documentElement.clientWidth?(e=i.document.documentElement.clientWidth,t=i.document.documentElement.clientHeight):(e=i.document.getElementsByTagName("body")[0].clientWidth,t=i.document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t}}catch(a){return{width:"",height:""}}}function r(){var e="unknown";return-1!=navigator.appVersion.indexOf("Win")?e="windows":-1!=navigator.appVersion.indexOf("Mac")?e="mac_os":-1!=navigator.appVersion.indexOf("X11")?e="unix":-1!=navigator.appVersion.indexOf("Linux")&&(e="linux"),{name:e}}function s(){var e,t,i,a=navigator.userAgent,o=navigator.appName,n=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(t=a.indexOf("Opera"))?(o="opera",n=a.substring(t+6),-1!=(t=a.indexOf("Version"))&&(n=a.substring(t+8))):-1!=(t=a.indexOf("MSIE"))?(o="msie",n=a.substring(t+5)):-1!=(t=a.indexOf("Edge"))?(o="edge",n=a.substring(t+5)):-1!=(t=a.indexOf("Trident"))?(o="trident",n=a.substring(t+8)):-1!=(t=a.indexOf("Chrome"))?(o="chrome",n=a.substring(t+7)):-1!=(t=a.indexOf("Safari"))?(o="safari",n=a.substring(t+7),-1!=(t=a.indexOf("Version"))&&(n=a.substring(t+8))):-1!=(t=a.indexOf("Firefox"))?(o="firefox",n=a.substring(t+8)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(o=a.substring(e,t),n=a.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(i=n.indexOf(";"))&&(n=n.substring(0,i)),-1!=(i=n.indexOf(" "))&&(n=n.substring(0,i)),r=parseInt(""+n,10),isNaN(r)&&(n=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>100&&(r=""),o.indexOf("/")>=0&&(o=o.split("/")[0]),{name:o,full_version:n,major_version:r}}function l(){var e=new Date;return{hour:e.getHours(),week_day:e.getDay()}}function d(){var t=e.name,i=/^pm\\-(\\S*)\\-(\\S*)\\-(\\d*)\\-(\\d*)\\-(\\S*)\\-(\\d*)$/,a=[];return t&&""!==t&&i.exec(t)?(a=i.exec(t),{site_id:a[1]&&""!==a[1]?a[1]:"",placement_id:a[2]&&""!==a[2]?a[2]:"",ad_id:a[3]&&""!==a[3]?a[3]:"",creative_id:a[4]&&""!==a[4]?a[4]:"",options:a[5]&&""!==a[5]?a[5]:"",sequence_number:a[6]&&""!==a[6]?a[6]:""}):{site_id:"",placement_id:"",ad_id:"",creative_id:"",options:"",sequence_number:""}}function p(){return{adr:function(){return void 0}()||""}}function c(){try{return window.top._piximediaiframetest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty?!0:!1}catch(e){return!0}}function u(){var e,t;try{e=top.location.hostname,t=top.location.pathname}catch(i){}if(!e)try{e=parent.parent.parent.location.hostname,t=parent.parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.parent.location.hostname,t=parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.location.hostname,t=parent.location.pathname}catch(i){}if(!e)try{e=window.location.hostname,t=window.location.pathname}catch(i){}return{crossdomain:c()?1:0,hostname:e,path:(t||"").substring(0,128),section:(((t||"").match(/^\\/([a-z0-9]+)/)||[])[1]||"").substring(0,32),firstpage:a()?1:0}}function m(e){var t,i,a={};if(e){for(t in e)if(e.hasOwnProperty(t)&&v[t])if("all"===e[t])for(i in v[t])v[t].hasOwnProperty(i)&&(a[t+"_"+i]=v[t][i]);else for(i in e[t])e[t].hasOwnProperty(i)&&v[t][i]&&(a[t+"_"+i]=v[t][i])}else for(t in v)if(v.hasOwnProperty(t))for(i in v[t])v[t].hasOwnProperty(i)&&(a[t+"_"+i]=v[t][i]);return a}var h={flash_major:"F",flash_minor:"f",flash_release:"r",viewport_width:"w",viewport_height:"h",screen_width:"W",screen_height:"H",screen_resolution:"R",os_name:"O",browser_name:"b",browser_full_version:"U",browser_major_version:"u",external_site_id:"s",external_placement_id:"p",external_ad_id:"a",external_creative_id:"c",external_options:"o",external_sequence_number:"n",time_hour:"T",time_week_day:"y",location_crossdomain:"X",location_hostname:"N",location_section:"S",location_path:"P",location_firstpage:"i",alliance_adr:"A",alliance_rtapos:"x"},f=function(){var e="undefined",t="object",i="Shockwave Flash",a="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",n=window,r=document,s=navigator,l=!1,d=function(){var d=typeof r.getElementById!=e&&typeof r.getElementsByTagName!=e&&typeof r.createElement!=e,p=s.userAgent.toLowerCase(),c=s.platform.toLowerCase(),u=c?/win/.test(c):/win/.test(p),m=c?/mac/.test(c):/mac/.test(p),h=/webkit/.test(p)?parseFloat(p.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,"$1")):!1,f=!function(){return 1}(),v=[0,0,0],g=null;if(typeof s.plugins!=e&&typeof s.plugins[i]==t)g=s.plugins[i].description,!g||typeof s.mimeTypes!=e&&s.mimeTypes[o]&&!s.mimeTypes[o].enabledPlugin||(l=!0,f=!1,g=g.replace(/^.*\\s+(\\S+\\s+\\S+$)/,"$1"),v[0]=parseInt(g.replace(/^(.*)\\..*$/,"$1"),10),v[1]=parseInt(g.replace(/^.*\\.(.*)\\s.*$/,"$1"),10),v[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof n.ActiveXObject!=e)try{var y=new n.ActiveXObject(a);y&&(g=y.GetVariable("$version"),g&&(f=!0,g=g.split(" ")[1].split(","),v=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:d,pv:v,wk:h,ie:f,win:u,mac:m}}();return{getFlashPlayerVersion:function(){return{major:d.pv[0],minor:d.pv[1],release:d.pv[2]}}}}(),v={};v.flash=f.getFlashPlayerVersion(),v.viewport=n(),v.screen=o(),v.os=r(),v.browser=s(),v.external=d(),v.time=l(),v.location=u(),v.alliance=p();var g="";return{getData:function(){var e=arguments[0]||!1;return m(e)},setId:function(e){g=e},toString:function(e,t){e=e||!1;var i,a=t?t:this.getData(e),o="";for(i in a)a.hasOwnProperty(i)&&(o+=(h[i]?h[i]:i)+"="+a[i].toString().replace(/\\||%7c/gi,"-")+";");return o+=g+";"}}}()}(window,document),function(){"use strict";function e(){try{var e=window.piximedia&&window.piximedia.pam?window.piximedia.pam:{},t=(e.globalOptions||{}).pageLoadStart||new Date(0),i=((new Date-t)/1e3).toString();return i.match(/\\..$/)&&(i+="00"),i.match(/\\...$/)&&(i+="0"),"[pam]["+i+"] "}catch(a){return"[pam] "}}function t(){try{var e,i,a=!1;if(C.piximedia&&C.piximedia.pmLastLogPrefixTime&&(e=C.piximedia.pmLastLogPrefixTime,a=!0),C.piximedia&&C.piximedia.pam){var o=C.piximedia&&C.piximedia.pam?C.piximedia.pam:{};i=(o.globalOptions||{}).pageLoadStart||new Date(0),e||(e=i)}var n=new Date,r=((n-e)/1e3).toString(),s=i?((n-i)/1e3).toString():"";return C.piximedia&&(C.piximedia.pmLastLogPrefixTime=n),t.last=n,r.match(/\\..$/)&&(r+="00"),r.match(/\\...$/)&&(r+="0"),s.match(/\\..$/)&&(s+="00"),s.match(/\\...$/)&&(s+="0"),a||(r=""),"[pam]["+(s?s+(r?" +":""):"")+r+"] "}catch(l){return"[pam] "}}function i(t,a){i.trail=i.trail||[],i.trail.push("["+t+"] "+e()+Array.prototype.slice.call(a).join(", "))}function a(){i("debug",arguments);var e=Array.prototype.slice.call(arguments);e[0]&&(e[0]=t()+e[0]),C.console&&C.console.debug&&(C.console.debug.apply?C.console.debug.apply(C.console,e):C.console.debug(e[0]))}function o(){if(i("debug",arguments),B){var t=Array.prototype.slice.call(arguments);t[0]&&(t[0]=e()+t[0]),C.console&&C.console.debug&&(C.console.debug.apply?C.console.debug.apply(C.console,t):C.console.debug(t[0]))}}function n(){if(i("warn",arguments),B){var t=Array.prototype.slice.call(arguments);t[0]&&(t[0]=e()+t[0]),C.console&&C.console.warn&&(C.console.warn.apply?C.console.warn.apply(C.console,t):C.console.warn(t[0]))}}function r(){if(i("error",arguments),B){var t=Array.prototype.slice.call(arguments);t[0]&&(t[0]=e()+t[0]),C.console&&C.console.error&&(C.console.error.apply?C.console.error.apply(C.console,t):C.console.error(t[0]))}}function s(){if(i("log",arguments),B){var t=Array.prototype.slice.call(arguments);t[0]&&(t[0]=e()+t[0]),C.console&&C.console.log&&(C.console.log.apply?C.console.log.apply(C.console,t):C.console.log(t[0]))}}function l(e){return"document.write(\'"+e.replace(/\\\\/g,"\\\\\\\\").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n").replace(/\'/g,"\\\\\'")+"\');"}function d(e){for(var t=e.replace(/\\\\r/g,"\\n").split("\\n"),i="",a=0;a<t.length;a++){var o=t[a];o&&(i+="document.write(\'"+o.replace(/\\\\/g,"\\\\\\\\").replace(/\'/g,"\\\\\'")+"\');")}return i}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function u(e,t,i){for(var a=[],o=0;o<e.length;o++){var n,r=e[o];n="function"==typeof t?t(r):i?r[t]===i:r===t,n||a.push(r)}return a}function m(e){var t=new Image;C._piximedia.images.push(t),t.src=e}function h(e){var t=(e||"").split("."),i=t.shift();return t.sort(function(e,t){var i=e.match(/^[0-9]+$/),a=t.match(/^[0-9]+$/);if(i&&a){var o=parseInt(e,10),n=parseInt(t,10);return n>o?-1:o>n?1:0}return a&&!i?-1:i&&!a?1:t>e?-1:e>t?1:0}),i+(t.length?"."+t.join("."):"")}function f(e){var t=e.match(/^ *([a-zA-Z0-9_.-]+) *=>/);return t?t[1]:e}function v(e){return e.toString().match(/^[0-9]+%$/)?parseInt(e,10)+"pct":parseInt(e,10)}function g(e){if(Object.keys)return Object.keys(e);var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=a.length;if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var n,r,s=[];for(n in e)t.call(e,n)&&s.push(n);if(i)for(r=0;o>r;r++)t.call(e,a[r])&&s.push(a[r]);return s}function y(e){switch(e.nodeType){case Node.DOCUMENT_NODE:return y(e.documentElement||e.children[0]);case Node.ELEMENT_NODE:var t={name:e.nodeName,children:[]},i=e.attributes;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];t[o.nodeName]=o.nodeValue}for(var n={},r=0;r<e.childNodes.length;r++){var s=y(e.childNodes[r]);"object"==typeof s&&(n[s.name]=!0,t[s.name]=t[s.name]||[],t[s.name].push(s)),t.children.push(s)}1===t.children.length&&(t.value=t.children[0]);for(var l in n)n.hasOwnProperty(l)&&1===t[l].length&&(t[l+"_value"]=t[l][0]);return t;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:return e.textContent}}function b(e){e.style.margin=0,e.style.padding=0,e.style.border=0,e.style.position="relative",e.style.overflow="visible",e.style.cursor="default",e.style.lineHeight="normal",e.style.wordSpacing="normal",e.style.fontSize="11px",e.style.fontStyle="normal",e.style.letterSpacing="0px",e.style.WebkitFontSmoothing="antialiased",e.style.MozOsxFontSmoothing="grayscale",e.style.fontFamily="Arial, Helvetica, sans-serif",e.style.left=e.style.right=0,e.style.textAlign="left",e.style.display="block",e.style.clear="both",e.style.maxWidth="none"}function w(e,t){this.events={},this.id=t,this.target=e||this}function x(e,t){var i=this;this.pam=e;for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);e&&e.eventEmitterForObject&&(e.eventEmitterForObject(this,this.uniqid),i.pam.master&&(e.on("something-has-been-seen",function(){i.somethingHasBeenSeen()}),i.on("send-cpmview-click",function(){i.sendCpmviewClick()}),i.on("load-event-once",function(e,t,a){i.loadEventOnce(e,t,a)})))}function k(e,t,i){x.call(this,e,i),this.position=t}function _(e,t){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);this.cgAd=e,this.cgOptions=t,this.cgOptions.id_reporting&&(this.creativeId=this.cgOptions.id_reporting),this.cgOptions.args&&(this.args=this.cgOptions.args)}function S(e,t,i){var a=this;this.pam=e,this.options=i||{},this.position=t,this.active=!0,t.iframes=t.iframes||[],t.iframes.push(this),this.pam.eventEmitterForObject(this,"iframe:"+t.positionId),a.pam.master&&(this.on("host-room",function(e,t){a.hostRoom(e,t)}),this.on("enable-responsive-events",function(){a.enableResponsiveEvents()}),this.on("remove",function(){a.pam.emit("iframe:remove",t.positionId),t.decoratedBy&&t.decoratedBy.emit("iframe:remove",t.positionId)})),this.trackVisibility=this.pam.master&&t.decoratedBy?t.decoratedBy.getAllVisibilityForPixiPositionId(t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)):[],this.trackingVisibility=!1,this.on("error",function(e){a.lastError=e}),this.options.doNotResize||this.on("resize",function(i){if(i.resizedAt||(i.resizedAt=new Date),a.active){var n=function(){if(!a.iframe)return setTimeout(n,50);if(a.pam.master)if(i.onlyIfNoSurface&&(parseInt(a.iframe.style.width,10)||0)>1&&(parseInt(a.iframe.style.height,10)||0)>1)o("Not resizing iframe because it already has a surface");else if(setTimeout(function(){e.emit("position-has-been-decorated",t.positionId),e.tryAndActivateAds()},0),i.animation)a.pam.loadLibrary("sweetlib.js",function(){C.piximedia.SweetLib.animate(a.iframe,i.animation).play()}),a.pam.debug("** Resizing iframe for PAM "+a.pam.siteId+"/"+a.pam.placementId+":"+a.pam.mode+" to animation="+JSON.stringify(i.animation),a.iframe);else{var s,l,d,p,c,u,m,h,f=i.css||{},g=f.position,y=!1;if(a.position.positionId.match(/^room\\./))for(var w=a.iframe.parentNode;w&&void 0!==w.className;w=w.parentNode)if(w.className.match(/pmRoom|pmBodyPosition/)){s=w;break}for(var x=a.iframe.parentNode;x&&void 0!==x.className;x=x.parentNode)if(x.className.match(/pmContainer/)){l=x;break}l&&l.parentNode&&l.parentNode.parentNode&&l.parentNode.parentNode.className.match(/pmMarkerContainer/)&&(d=l.parentNode.parentNode),l&&l.parentNode&&l.parentNode&&l.parentNode.className.match(/pmMarkerContainer/)&&(d=l.parentNode),l&&l.parentNode&&l.parentNode&&l.parentNode.className.match(/pmFillerRoomContainer/)&&(p=l.parentNode),i.width&&(i.width.toString().match(/^.*%$/)?(m=i.width,c=1):c=parseInt(i.width,10)),i.height&&(i.height.toString().match(/^.*%$/)?(h=i.height,y=!0,u=1):u=parseInt(i.height,10)),c&&p&&p.parentNode&&(p.parentNode.style.width=m||c+"px"),(c||u)&&l&&(i.resizeParent||l.className.match(/pmZeroSurface/))&&(l.className=l.className.replace(/pmZeroSurface/,""),l.style.position="relative"),f.hasOwnProperty("display")&&(""===f.display||"none"===f.display||"block"===f.display)&&l&&(l.style.display=f.display),function(e){return i.wallpaper?(i.container=i.container||{},i.container.css=i.container.css||{},i.container.css.position=i.container.css.position||"relative",i.container.css.overflow=i.container.css.overflow||"hidden",i.container.css.left=i.container.css.left||"50%",i.container.css.right=i.container.css.right||"",i.container.css.marginLeft=i.container.css.marginLeft||-c/2+"px",i.container.css.maxWidth=i.container.css.maxWidth||c+"px",a.pam.loadLibrary("sweetlib.js",function(){var o=C.piximedia.SweetLib,n=function(e){for(e=e.parentNode;e;e=e.nextSibling)if(e.children&&e.children.length&&!(e.id||"").match(/^(pm|pixi)/)){for(var t,i=0;i<e.children.length;i++){var a=e.children[i];if(a&&!(a.id||"").match(/^(pm|pixi)/)&&!(a.className||"").match(/pm|pixi/)){t=!0;break}}if(!t)continue;var n=o.gbcr(e);if(n.width&&n.height)return e}r("Couldn\'t find page container after marker")};a.pam.loadMarkerForPosition(t,function(r){var s,l=n(r);return o.fixPageContainerForWallpaper(l),void 0!==i.moveTop&&(s=o.moveTopOfPageContainer(l,i.moveTop,i.moveTopOptions),a.pageContainer=l,a.moveTop=i.moveTop),i.bodyBackgroundColor&&o.setBodyBackgroundColor({color:i.bodyBackgroundColor}),s&&!s.pmHostedRoom&&(s.pmHostedRoom=!0,a.pam.hostRoom("pcfiller",{masterPositionId:t.positionId},function(){var e=s.ownerDocument.createElement("div");return e.className="pmFillerRoomContainer",b(e),s.style.marginLeft="auto",s.style.marginRight="auto",s.appendChild(e),e})),e()})}),void 0):e()}(function(){if(!c&&!u||t.firstResizedAt||(t.firstResizedAt=i.resizedAt,W("First resized "+t.positionId+": "+i.width+"x"+i.height)),c){var e,n=(m||"").match(/^([0-9]+)%$/);n&&(e=parseFloat(n[1],10)),"absolute"!==g||i.takeover||(a.iframe.parentNode.style.width=m||c+"px"),o("Resizing iframe to width="+(m||c),a.iframe),a.iframe.style.width=m||c+"px",a.iframe.style.maxWidth="none",l&&(t.decoratedBy&&t.decoratedBy.shouldBeBeforeBody&&t.decoratedBy.shouldBeBeforeBody(t)?(e?l.style.left=(100-e)/2+"%":(l.style.left="50%",l.style.marginLeft=-parseFloat(a.iframe.style.width,10)/2+"px"),l.style.marginRight=""):(parseInt(l.style.width||0,10)<=1||i.wallpaper)&&(l.style.width=m||c+"px",l.style.marginLeft=l.style.marginRight="auto")),s&&(s.style.width=m||c+"px",s.className.match(/pmCentered/)&&(s.style.marginLeft=Math.round(-c/2)+"px"))}u&&("absolute"!==g||i.takeover||(a.iframe.parentNode.style.height=h||u+"px"),o("Resizing iframe to height="+(h||u),a.iframe),a.iframe.style.height=s&&y?"100%":h||u+"px",s&&!i.takeover&&(s.style.height=h||u+"px"),s&&y&&(s.style.height=h||u+"px",l&&(l.style.height="100%")),i.resizeFifContainer&&l&&(l.style.height=h||u+"px"));for(var r in f)if(f.hasOwnProperty(r))try{a.iframe.style[r]=f[r]}catch(p){}if(l){var b="pmContainerSurface"+v(a.iframe.style.width||0)+"x"+v(a.iframe.style.height||0);if(l.className=(l.className||"").replace(/ +pmContainerSurface[0-9%pct]+x[0-9%pct]+/g,"")+" "+b,i.wallpaper&&(l.className=(l.className||"").replace(/ +pmContainerSurfaceWallpaper/,"")+" pmContainerSurfaceWallpaper"),i.container){var w=i.container.css;if(w)for(var x in w)if(w.hasOwnProperty(x))try{l.style[x]=w[x]}catch(p){}}}a.pam.debug("** Resizing iframe for PAM "+a.pam.siteId+"/"+a.pam.placementId+":"+a.pam.mode+" to width="+i.width+", height="+i.height,a.iframe),!i.dontCenter&&i.width,a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.breakOverflow(a.iframe,i)}),i.stickToTop?a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t,o,n,r,s,l,p=C.piximedia.SweetLib.gbcrfp(a.iframe).top,c=function(t){if(t){var i=a.iframe.parentNode.style.paddingTop;a.iframe.parentNode.style.paddingTop="0px";var o=e.gbcr(a.iframe.parentNode);a.iframe.parentNode.style.paddingTop=i;var n=o.top,r=Math.max(0,t-n);Math.round(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)!==Math.round(r)&&(a.iframe.parentNode.style.hasOwnProperty("transition")?(a.iframe.parentNode.style.transition="padding 0.2s",a.iframe.parentNode.style.paddingTop=r+"px",C.piximedia.SweetLib.addEventOnce(a.iframe.parentNode,"transitionend",function(){a.iframe.parentNode.style.transition=""})):a.iframe.parentNode.style.paddingTop=r+"px")}else a.iframe.parentNode.style.paddingTop=""},u=function(){if(a.iframe.pmFixed)a.iframe.pmFixed=!1,a.iframe.style.position="",a.iframe.style.marginTop="",a.iframe.parentNode.style.position=t,a.iframe.parentNode.style.height=o,a.iframe.parentNode.style.top=n,d&&(d.style.position=r,d.style.top=s,d.style.overflow=l);else{var e=C.piximedia.SweetLib.gbcrfp(a.iframe).top;e&&(p=e)}},m=function(e){a.iframe.pmFixed||(a.iframe.pmFixed=!0,a.iframe.style.position="relative",a.iframe.style.top="0px",t=a.iframe.parentNode.style.position,o=a.iframe.parentNode.style.height,n=a.iframe.parentNode.style.top,a.iframe.parentNode.style.position="fixed",a.iframe.parentNode.style.top=-(e.translateX||0)+"px",a.iframe.parentNode.style.height=(parseFloat(a.iframe.style.height,10)||0)+(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)+"px",d&&(r=d.style.position,s=d.style.top,l=d.style.overflow,d.style.position="fixed",d.style.top=0,d.style.overflow=""))},h=function(){if(!(a.iframe.ownerDocument.body.className||"").match(/pmBodyAnimation/)&&!(a.pam.getTopmostDocument().body.className||"").match(/pmBodyAnimation/)){var e=a.iframe.ownerDocument.getElementById("pmFiller"),t=0,o=0;if(e)if(t=C.piximedia.SweetLib.gbcr(e).top,i.stickToTopFromTop)t+=i.stickToTopFromTop,o=-i.stickToTopFromTop;else if(i.stickToTopOnPCTop){var n=C.piximedia.SweetLib.gbcr(e);t=n.bottom,o=-n.height}else t=C.piximedia.SweetLib.gbcr(e).top;var r=C.piximedia.SweetLib.getHeightOfPositionFixedHeaders(a.iframe.ownerDocument,void 0,{force:!0})||0;c(r),Math.round(t)>Math.round(r)?u():m({hopfh:r,translateX:-o})}};h();var f=setInterval(h,100);return{remove:function(){clearInterval(f),u()}}};a.scrollToTheTop&&a.scrollToTheTop.remove(),a.scrollToTheTop=t()}}):i.stickToTop===!1&&a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t=function(){var t=a.iframe.ownerDocument.getElementById("pmFiller"),i=C.piximedia.SweetLib.getHeightOfPositionFixedHeaders(a.iframe.ownerDocument,void 0,{force:!0})||0;if(t){t.style.marginTop="0px";var o=e.gbcrfp(t).top;t.style.marginTop=Math.max(0,i-o)+"px"}var n=e.gbcrfp(a.iframe).top;a.iframe.parentNode.style.paddingTop=Math.max(0,(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)+i-n)+"px"},i=setInterval(t,100);return{remove:function(){clearInterval(i),t()}}};a.scrollToTheTop&&a.scrollToTheTop.remove(),a.scrollToTheTop=t()}})})}else{a.iframe.style.width="100%",a.iframe.style.height="100%";var k=a.iframe.parentNode,_=a.iframe.contentDocument&&a.iframe.contentDocument.body?a.iframe.contentDocument.body:void 0,S=_?_.parentNode:void 0;k&&(k.style.width="100%",k.style.height="100%"),_&&(_.style.width="100%",_.style.height="100%"),S&&(S.style.width="100%",S.style.height="100%"),i&&i.css&&i.css.background&&(a.iframe.style.background=i.css.background)}if(a.trackVisibility.length&&!a.trackingVisibility&&parseInt(a.iframe.style.width,10)&&parseInt(a.iframe.style.height,10)){a.trackingVisibility=!0,o("Tracking visibility for",a);var I=function(e){return function(){if(o("Reached visibility for position"),t.loadEventWait(e.event?e.event:10===e.duration&&.6===e.threshold?"AP_VIEWABLE":"AP_VIEWABLE:"+Math.round(100*e.threshold)+"PCT:"+e.duration+"S",{detail:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)||t.positionId}),.5===e.threshold&&1===e.duration){var i="isAnyViewable50pct1sForCampaign"+(t.decoratedBy||t.decoratedByCG||{}).campaignId;a.pam[i]||(a.pam[i]=!0,t.loadEventWait("AP_VIEWABLE:50PCT:1S:CAMPAIGN"))}}};a.pam.loadLibrary("sweetlib.js",function(){for(var e=0;e<a.trackVisibility.length;e++){var t=a.trackVisibility[e];t.threshold||(t.threshold=.6),t.duration||(t.duration=10),C.piximedia.SweetLib.bindViewTracker({object:a.iframe,threshold:100*t.threshold,duration:t.duration},I(t))}})}};n()}else o("(not resizing inactive iframe)")}),a.pam.master&&(this.on("set-message-duration",function(e){return a.setMessageDuration(e)}),this.on("register-visibility-callback",function(e){var t=e.callback;a.pam.loadLibrary("sweetlib.js",function(){if(!a.iframe)return void(a.visibilityCallbackOnHold=e);var i={object:a.iframe};for(var o in e)if(e.hasOwnProperty(o))switch(o){case"callback":break;default:i[o]=e[o]}C.piximedia.SweetLib.bindVisibilityTracker(i,function(e){a.emit(t,e)})})}))}function I(e,t){var i=this;this.pam=e,this.eventQueue=[];for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);this.pam.eventEmitterForObject(this,"position:"+this.positionId),this.pam.master&&(this.on("start-timetracker-hover",function(){i.startTimetrackerHover()}),this.on("stop-timetracker-hover",function(){i.stopTimetrackerHover()}),this.on("load-event-once",function(e,t,a){i.loadEventOnce(e,t,a)})),this.on("expand",function(){if(i.expandedCount=(i.expandedCount||0)+1,i.pam.master&&1===i.expandedCount&&i.decoratedBy){var e=i.pixiPositionId||i.decoratedBy.getPixiPositionIdForPositionId(i.positionId);i.loadEventWait("EXPAND",{detail:e}),i.pam.loadLibrary("sweetlib.js",function(){i.timetrackerExpand=C.piximedia.SweetLib.setTimer("EXPAND",function(t,a){i.decoratedBy&&i.loadEventWait("TIMETRACKER::"+t,{duration:a,detail:e})}),i.timetrackerExpand.start()})}}),this.on("collapse",function(){if(!i.expandedCount)return r("Position has been collapsed, but was not expanded",i);if(!--i.expandedCount&&i.pam.master){var e=i.pixiPositionId||i.decoratedBy.getPixiPositionIdForPositionId(i.positionId);i.loadEventWait("COLLAPSE",{detail:e}),i.pam.loadLibrary("sweetlib.js",function(){i.timetrackerExpand.stop(),i.timetrackerExpand=void 0})}}),this.on("responsive",function(e){e.pageContainerWidth&&(this.pageContainerWidth=e.pageContainerWidth)}),this.pam.master&&(this.on("injected-into-pixi-position-id",function(e){o("Host injected as "+e),i.pixiPositionId=e}),this.on("injected-into-creative-group",function(e){o("Host injected as create group member"),i.setDecoratedByCG(new _(i.decoratedBy,e))}))}function E(e){if(this.pam=e,this.deferredObjects=[],C.pmAdData&&C.pmAdData.ajax)for(;C.pmAdData.ajax.length>0;){var t=C.pmAdData.ajax.shift();t&&(this.pam.msie&&6===this.pam.msie&&(t.use_pb=!0),this.loadAd(t))}}function P(e,t,i,n,s){var l,d,p,u=this,m=(n||{}).mode||"alliance",h=e+"/"+t+":"+m,f=n&&n.uniqid?n.uniqid:"pam"+Math.round(1e16*Math.random());if(this.numberOfEventsSent={},this.birthdateCookie=this.getBirthdateCookie(),this.birthdateLS=this.getBirthdateLS(),C.piximedia._.pams=C.piximedia._.pams||{},C.piximedia._.pams[h]=C.piximedia._.pams[f]=C.piximedia.pam=this,!n.pageLoadStart){var v=this.getTopmostWindow();v.performance&&v.performance.timing&&v.performance.timing.responseStart?n.pageLoadStart=v.performance.timing.responseStart:n.pageLoadStart=new Date}if(this.msie=function(){var e=!1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),this.chrome=function(){try{return navigator.userAgent.search("Chrome")>=0?parseInt(navigator.userAgent.match(/Chrome\\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.safari=function(){try{return-1===navigator.userAgent.search("Chrome")&&navigator.userAgent.search("Safari")>=0?parseInt(navigator.userAgent.match(/Version\\/([.0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.firefox=function(){try{return navigator.userAgent.search("Firefox")>=0?parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.cssCalc=!(this.msie&&this.msie<9||this.safari&&this.safari<8||this.firefox&&this.firefox<31||this.chrome&&this.chrome<34),this.window=C,this.document=O,this.pixelQueue=[],this.animations={},this.containerClassName=B?"pmContainer_"+h.replace(/[^A-Za-z0-9]/g,"-"):"",this.globalEmitter=new w,this.globalOptions=n||{},this.master=!this.globalOptions.hosted,this.mode=m,this.positions={},this.winlostIframeIds={},this.allAvailableAds=i,this.explicitlyRegisteredPositionIds={},this.trackingAdPixelsCalled={},this.trackingAdCreativePixelsCalled={},this.availableAds=[],this.decorativeAds=[],this.realAds=[],this.clickUrl=s,this.siteId=e,this.placementId=t,this.uniqKey=f,this.globalOptions.uniqid=f,this.campaignIdsWithImpressions={},this.adIdsWithImpressions={},this.checkTopDomain(),this.numberOfExplicitPositions=0,this.globalOptions.loadPixelRandom=this.globalOptions.loadPixelRandom||Math.random(),this.master&&!this.globalOptions.location)try{this.globalOptions.location=this.getTopmostWindow().location.toString()}catch(g){}if(this.globalOptions.autoFacetPosition)try{(function(){var e=this.getTopmostWindow();"resources.pm"===e.location.hostname&&"/tools/preview/"===e.location.pathname&&(this.globalOptions.autoFacetPosition=void 0,this.globalOptions.facets=void 0)}).apply(this)}catch(g){}if(this.globalOptions.autoFacetPosition)switch(this.facets=JSON.parse(JSON.stringify(this.globalOptions.facets||[])),this.currentFacetIndex=0,this.globalOptions.autoFacetPosition){case"shuffle":this.facets=this.facets.sort(function(){return Math.random()<.5})}this.eventEmitterForObject(this,"pam:"+this.globalOptions.uniqid),n.hasOwnProperty("documentHasFocus")&&(this.documentHasFocus=n.documentHasFocus),this.syncDocumentHasFocus(),this.master&&(this.on("js-impression-ad-campaign",function(e,t,i,a){u.sendJSImpressionAdCampaign(e,t,i,a)}),this.on("create-opaque-animation",function(e,t,i){u.createOpaqueAnimation(e,t,i)}),this.on("play-opaque-animation",function(e,t,i){u.playOpaqueAnimation(e,t,i)}),this.on("reverse-opaque-animation",function(e,t,i){u.reverseOpaqueAnimation(e,t,i)}),this.on("clear-opaque-animation",function(e){u.clearOpaqueAnimation(e)}),this.on("wait-top-dom-loaded",function(e){u.waitTopDomLoaded(function(){u.emit(e)})}),this.on("bind-visibility-tracker",function(e,t,i,a){u.bindVisibilityTracker(e,t,i,a)}),this.on("start-navigation-tracking",function(e){u.startNavigationTracking(e)}));var y=!1;try{var b;if(C.piximedia.topWindowName)b=C.piximedia.topWindowName;else{var k=u.getTopmostWindow();C.piximedia.topWindowName=b=k.name}(b||"").match(/pmpassback/)&&(y=!0),(b||"").match(/pmtimepos/)&&(P.debugTime=W=a)}catch(g){}for(W("PAM()"),l=0;l<i.length;l++){if(p=i[l],p.uniqid||(p.uniqid="ad"+this.rand()),p.use&&p.use.positions&&p.use.positions.length)for(var _=0;_<p.use.positions.length;_++)"string"==typeof p.use.positions[_]&&(p.use.positions[_]=p.use.positions[_].replace(/\\s+[a-z0-9]+:optional_mp/g,"").replace(/\\s+[a-z0-9]+:block_mp/g,""));if(p.require&&p.require.positions&&p.require.positions.length)for(var S=0;S<p.require.positions.length;S++)"string"==typeof p.require.positions[S]&&(p.require.positions[S]=p.require.positions[S].replace(/\\s+[a-z0-9]+:optional_mp/g,"").replace(/\\s+[a-z0-9]+:block_mp/g,""));if(p.remapSnippets&&p.remapSnippets.length)for(var I=0;I<p.remapSnippets.length;I++){var A=p.remapSnippets[I];try{new Function(["pam"],A).call(p,u)}catch(g){r(g)}}var T=!0;if(p.require&&p.require.context)for(d=0;d<p.require.context.length;d++)if(!p.require.context[d]()){T=!1;break}if(y&&!p.passback&&(T=!1),T){var D=new x(this,p);this.availableAds.push(D),D.passback||this.realAds.push(D),p.require&&p.require.positions&&p.require.positions.length||!p.use||!p.use.positions||!p.use.positions.length||this.decorativeAds.push(D)}}if(!this.realAds.length&&this.globalOptions.keepAdringForRTA){var N=u.canWriteCookies();N&&(O.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT");var F=this.globalOptions.pixiAdrName;N&&(O.cookie=F+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie=F="=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}C.piximedia.request_pos=C.piximedia.request_pos||{},C.piximedia.request_pos_sp=C.piximedia.request_pos_sp||{},C.piximedia.request_pos_sp[this.siteId]=C.piximedia.request_pos_sp[this.siteId]||{};var j=this.request_pos=C.piximedia.request_pos_sp[this.siteId][this.placementId]=C.piximedia.request_pos_sp[this.siteId][this.placementId]||{},M=this.globalOptions.rtaPositionsToRequestOnlyWhenRequired||[];for(l=0;l<this.availableAds.length;l++){if(p=this.availableAds[l],p.require&&p.require.positions)for(var R=this.parseRequestedPositions(p.require.positions),U=0;U<R.length;U++){j[R[U]]=!0,C.piximedia.request_pos[R[U]]=!0;var V=u.getPrerequisiteVirtualPosition(R[U]);V&&(j[V]=!0,C.piximedia.request_pos[V]=!0)}if(!p.passback&&p.use&&p.use.positions)for(var q=this.parseRequestedPositions(p.use.positions),H=0;H<q.length;H++){var J=q[H];if(-1===c(M,J)){j[J]=!0,C.piximedia.request_pos[J]=!0;var G=u.getPrerequisiteVirtualPosition(J);G&&(j[G]=!0,C.piximedia.request_pos[G]=!0)}}}if(this.globalOptions.requestPosJSSnippet)try{new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(u,C.piximedia.request_pos,u),new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(u,j,u)}catch(X){r("Could not execute request_pos JS snippet: ",X)}if(m.match(/^alliance/)){C.piximedia.core||(C.piximedia.core=new E(this));var $=this.siteId+"|"+this.placementId,K=setInterval(function(){try{var e=u.getTopmostWindow();e&&e.pmLoopBlocker&&e.pmLoopBlocker.hasOwnProperty($)&&(clearInterval(K),u.loadEvent("PANIC",void 0,void 0,{fail_reason:"both_v1_and_position_tags"}))}catch(t){}},2e3);setTimeout(function(){u.sendStatistics()},1.5*(this.globalOptions.rendezvous_duration||L));\n}if(this.globalOptions.enableFooter&&this.hello({implicit:!0,ajax:!0,positionId:"footer"}),this.globalOptions.bwd_probability&&Math.random()<this.globalOptions.bwd_probability)try{var Z=z.getData();this.loadEvent("BWD",void 0,void 0,{c1:Z.browser_name,c2:Z.browser_major_version,c3:Z.os_name})}catch(g){}o(this.master?"Master PAM Created":"Hosted PAM Created"),this.globalOptions.pamela&&this.waitDomLoaded(function(){var e=u.getTopmostDocument(),t=e.createElement("script");e.body.appendChild(t),t.src="http://resources.pm/tools/pamela/pamelight.js"})}function A(e,t){for(var i=h(e.positionId||""),a=h(t.positionId||""),o=i.split("."),n=a.split("."),r=0;r<o.length;r++){if(r>=n.length)return 1;var s=o[r],l=n[r];if(s.match(/^[0-9]+$/)&&l.match(/^[0-9]+$/)&&(s=parseInt(s,10),l=parseInt(l,10)),l>s)return-1;if(s>l)return 1}return n.length>o.length?-1:0}function T(e,t,i,a){var o,n=e.split(":"),s=[],l=[];o=n[0].split(".");for(var d in i)if(i.hasOwnProperty(d)){var p=i[d],u=p.positionId,m=u.split("."),f=m.slice(1);if(""===o[0]||"*"===o[0]||o[0]===m[0]){for(var v=!0,g=1;g<o.length;g++)if(-1===c(f,o[g])){v=!1;break}if(v){if(s.push(p),t.activeAndNotUsed&&(!p.active||p.used))continue;if(t.notRequestedByActiveAd&&(!p.active||p.used||p.requested))continue;if(t.decoratedBy&&p.decoratedBy!==t.decoratedBy)continue;l.push(p)}}}l.sort(A);for(var y=1;y<n.length;y++){var b=n[y];if("free_mp"===b&&(b=a?"optional":"free"),l.length){switch(b){case"odd":b="mod2=0";break;case"even":b="mod2=1"}if("first"===b)l=[l[0]];else if("last"===b)l=[l[l.length-1]];else if("#"===b.charAt(0)){var w=parseInt(b.substr(1),10);l=l[w-1]?[l[w-1]]:[]}else if("optional"===b)l.length||l.push({});else if("decorated"===b){for(var x=[],k=0;k<l.length;k++)for(var _=l[k].iframes||[],S=0;S<_.length;S++){var I=_[S].iframe;I&&parseInt(I.style.width,10)>1&&parseInt(I.style.height,10)>1&&x.push(l[k])}l=x}else if("used"===b||"free"===b){for(var E="used"===b,P=[],T=!0,C=0;C<s.length;C++)(s[C].used?!0:!1)!==E&&(T=!1);if(T)for(var O=0;O<l.length;O++)(l[O].used?!0:!1)===E&&P.push(l[O]);l=P}else if("exact"===b){for(var D=h(n[0]),N=[],F=0;F<l.length;F++){var L=h(l[F].positionId||"");D===L&&N.push(l[F])}l=N}else if("primaryposition"===b)l=l;else{var j=b.match(/^mod([0-9]+)={1,3}([0-9]+)$/);if(j){for(var M=parseInt(j[1],10),R=parseInt(j[2],10),B=[],U=0;U<l.length;U++)U%M===R&&B.push(l[U]);l=B}else r("Unknown restrictive: "+b),l=[]}}else switch(b){case"free":case"optional":if(!t.positions){var V=!0;if("free"===b)for(var W=0;W<s.length;W++)s[W].used&&(V=!1);V&&l.push({})}}}return l}var C=window,O=document;if(!C.piximedia){try{!C.piximedia&&parent.piximedia&&(C.piximedia=parent.piximedia)}catch(D){}try{!C.piximedia&&parent.parent.piximedia&&(C.piximedia=parent.parent.piximedia)}catch(D){}try{!C.piximedia&&top.piximedia&&(C.piximedia=top.piximedia)}catch(D){}C.piximedia=C.piximedia||{}}try{parent.piximedia=C.piximedia}catch(D){}try{parent.parent.piximedia=C.piximedia}catch(D){}try{top.piximedia=C.piximedia}catch(D){}C.piximedia._=C.piximedia._||{},C._piximedia=C._piximedia||{},C._piximedia.images=C._piximedia.images||[];var N,F=2014031001,L=1e3,j="http://static.adserver.pm/host.html/revision=be0ffc50bbc1a297b8d6bc5f8cf74506",M="ad.piximedia.com",R="static.adserver.pm",B=!1,U=1200,V=.05;i.get=function(){return i.trail||[]};var W=function(){},q="margin: 0; padding: 0; border: 0; position: relative; overflow: visible; cursor: default; word-spacing: normal; font-size: 11px; font-style: normal; letter-spacing: 0px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-family: Arial, Helvetica, sans-serif; left: 0; right: 0; /*top: 0; bottom: 0;*/ text-align: left; display: block; clear: both",z=window._piximediaBrowserDetect;w.globalEmitter=new w,w.forObject=function(e,t,i){if(i=i||{},e._eventEmitter&&!i.purge)return e._eventEmitter;var a=new w(e);if(e.fire=e.emit=function(){return a.fire.apply(a,arguments)},e.fireLocal=e.emitLocal=function(){return a.fireLocal.apply(a,arguments)},e.addListener=e.on=function(){return a.addListener.apply(a,arguments)},e.removeListener=function(){return a.removeListener.apply(a,arguments)},e.removeAllListeners=function(){return a.removeAllListeners.apply(a,arguments)},e._eventEmitter=a,t){a.id=t;var o=i.globalEmitter||w.globalEmitter;a.globalEmitter=o,o.ids=o.ids||{},o.ids[t]=e}return a},w.getID=function(e){return e instanceof w?e.id:e._eventEmitter?e._eventEmitter.id:void 0},w.prototype.fireEventToID=function(e,t,i){if(i=i||{},this.ids&&this.ids.hasOwnProperty(e)){var a=this.ids[e];try{for(var o=[],n=0;n<t.length;n++)o.push(t[n]);"string"==typeof t[0]&&(t[0]={name:t[0]}),i.exceptTo&&(t[0].exceptTo=i.exceptTo),a.fire.apply(a,t)}catch(s){r("Caught error when handling event",s)}}},w.prototype.fire=function(e){var t,i=arguments.length-1,a=this.target||this;"string"==typeof e&&(e={name:e}),t=e.name;var o=this.globalEmitter||w.globalEmitter;if(this!==o&&!e.local&&!this.ids){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);o.fire({name:"event",exceptTo:e.exceptTo},a,n)}if(this.events[t]){var s,l=[];for(s=0;s<this.events[t].length;s++)l.push(this.events[t][s]);for(s=0;s<l.length;s++){var d,p=l[s];if(!e.exceptTo||e.exceptTo!==p){switch(i){case 0:d=p.call(a);break;case 1:d=p.call(a,arguments[1]);break;case 2:d=p.call(a,arguments[1],arguments[2]);break;default:for(var c=[],u=0;i>u;u++)c[u]=arguments[u+1];try{d=p.apply(a,c)}catch(m){}}if(void 0!==d)return d}}}return void 0},w.prototype.fireLocal=function(e){for(var t=[{name:e,local:!0}],i=1;i<arguments.length;i++)t.push(arguments[i]);return this.fire.apply(this,t)},w.prototype.emit=w.prototype.fire,w.prototype.emitLocal=w.prototype.fireLocal,w.prototype.addListener=function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this.target},w.prototype.on=w.prototype.addListener,w.prototype.removeListener=function(e,t){var i=this.events[e];if(i){for(var a=[],o=i.length-1;o>=0;o--){var n=i[o];n!==t&&a.push(n)}this.events[e]=a}return this.target},w.prototype.removeAllListeners=function(){return this.events={},this.target},x.prototype.queryPosition=function(e){return this.pam.queryPosition(e,{decoratedBy:this})},x.prototype.sendCpmviewClick=function(){var e=this;return e.pam.master?void(this.cpmviewClickSent||(this.loadEvent("CLICK",{c5:"cpmview"}),this.cpmviewClickSent=!0)):void(e.emit&&e.emit("send-cpmview-click"))},x.prototype.somethingHasBeenSeen=function(){var e=this;return e.pam.master?void("string"==typeof e.args.delayed_display&&"{}"!==e.args.delayed_display&&(window.pmBypassImpression||e.sentImpression||(e.pam.loadPixel(e.args.impression_pixel),e.sentImpression=!0))):void(e.emit&&e.emit("something-has-been-seen"))},x.prototype.purgeEventEmitter=function(){this.pam.eventEmitterForObject(this,this.uniqid,{purge:!0})},x.prototype.inject=function(e,t,i){"function"!=typeof t||i||(i=t,t={}),o("Ad #"+this.adId+\' called inject("\'+e+\'")\'),t.pixiPositionId||(t.pixiPositionId=f(e)),t.room&&(e="room."+t.room),void 0===t.future&&(t.future=!0),t.future&&(t.present=!0),this.rooms&&this.rooms[e]&&(i=this.makeHostRooms(i,this.rooms[e])),o("Ad["+this.adId+\'].inject("\'+e+\'")\');var a;if("string"==typeof e||p(e)){if("string"==typeof e){t.future&&this.injectFuture(e,t,i);var n=this.remapPositions||{};for(var r in n)if(n.hasOwnProperty(r)){var s=new RegExp("\\\\b"+r+"\\\\b","g");e=e.replace(s,n[r])}}a=C.piximedia.preview?this.pam.queryPositions("*"):this.positions,a=this.pam.queryPositions(e,{positions:a})}else"object"==typeof e&&(a=[e]);for(var l=0;l<a.length;l++){var d=a[l];d.decoratedBy&&d.decoratedBy!==this&&d.decoratedBy!==this.cgAd||!d.active||d.hosted||(o("Injecting contents into "+d.positionId),t.present&&!d.used&&(d.decoratedBy=this,d.decoratedAt=d.decoratedAt||new Date,d.used=!0,d.justUsed&&d.justUsed(),o("Taking position "+d.positionId),this.positions.push(d)),this.cgOptions&&!d.decoratedByCG&&(d.setDecoratedByCG(this),this.pam.master||d.emit("injected-into-creative-group",this.cgOptions)),d.pixiPositionId=t.pixiPositionId,this.pam.master||d.emit("injected-into-pixi-position-id",d.pixiPositionId||e),this.shouldHostPosition(d)?this.pam.hostPosition(this,d):this.injectPosition(d,t,i))}},x.prototype.injectFuture=function(e,t,i){"function"!=typeof t||i||(i=t,t={});var a=this,n=this.remapPositions||{};for(var r in n)if(n.hasOwnProperty(r)){var s=new RegExp("\\\\b"+r+"\\\\b","g");e=e.replace(s,n[r])}var l=function(e){o("Injecting contents into future "+e.positionId),e.decoratedBy=a,e.decoratedAt=e.decoratedAt||new Date,a.cgOptions&&e.setDecoratedByCG(a),e.pixiPositionId=t.pixiPositionId,a.shouldHostPosition(e)?a.pam.hostPosition(a,e):a.injectPosition(e,t,i)};if(this.on("hello",function(t){if(!a.disabled){var i={};i[t.positionId]=t,o("Ad #"+this.adId+" is considering new position");var n=a.pam.queryPositions(e,{positions:i,ignoreConditions:!0});if(n.length){o("Ad #"+this.adId+" is considering new position, and is using it");var r=a.pam.queryPositions(e,{positions:i,conditionPositions:a.pam.positions});if(r.length)l(t);else{o("Found a position to inject that fails to meet its condition, waiting for future positions");var s=!1;a.pam.on("pre-hello",function(){if(!s){var o=a.pam.queryPositions(e,{positions:i,conditionPositions:a.pam.positions});o.length&&(s=!0,l(t))}})}return o("Grabbing position "+t.positionId),a.positions.push(t),t.decoratedAt=new Date,!0}}}),e.match(/=>/)){var d=function(){var t=a.pam.queryPosition(e,{positions:a.positions});t.length&&(a.pam.removeListener("position-has-been-decorated",d),l(t[0]))};a.pam.on("position-has-been-decorated",d)}},x.prototype.makeHostRooms=function(e,t){return function(i,a,o,n){try{e.apply(this,arguments)}catch(s){r("Could not execute callback: "+s)}for(var l=0;l<t.length;l++){var d=t[l];n.hostRoom(d.id,d)}}},x.prototype.makeInject=function(e,t){var i=this;return function(a,o){try{if(i.pam.debug("Calling makeInject()"),!e.clickUrl&&e.positionId.match(/^room\\./)&&e.pixiPositionId){var n=e.pixiPositionId,s=this.remapPositions||{};for(var l in s)if(s.hasOwnProperty(l)){var d=new RegExp("\\\\b"+l+"\\\\b","g");n=n.replace(d,s[l])}e.clickUrl=e.allClickUrls&&e.allClickUrls[n]||i.pam.positions[n]&&i.pam.positions[n].clickUrl,e.advertiserClickUrl=e.allAdvertiserClickUrls&&e.allAdvertiserClickUrls[n]||i.pam.positions[n]&&i.pam.positions[n].advertiserClickUrl}t.call(e,a,o,e,o.framedIframe),N.emitLocal("ad.inject",a,o,e,o.framedIframe);var c=(i.args||{})["position-css"];c&&i.pam.loadLibrary("sweetlib.js",function(){if(p(c))for(var e=0;e<c.length;e++)C.piximedia.SweetLib.createCSSs(c[e],a);else C.piximedia.SweetLib.createCSSs(c,a)})}catch(u){r("Could not inject position "+e.positionId+": "+u)}}},x.prototype.injectPosition=function(e,t,i){var a=this;i?t=t||{}:(i=t,t={}),a.pam.debug("Injecting into "+e.positionId);var n=t.htmlComments,r="inject"+this.pam.rand();C.piximedia._[r]=this.makeInject(e,i);var l={name:"pmInject_"+e.positionId,javascript:"window.piximedia._."+r+"(document,window)"};n&&(l.htmlComments=n);for(var d in t)t.hasOwnProperty(d)&&(l[d]=t[d]);if(e.decoratedBy||(e.decoratedBy=this,e.decoratedAt=e.decoratedAt||new Date,o("Marking position not yet marked decorated by any ad"),this.positions.push(e)),this.cgOptions&&!e.decoratedByCG&&e.setDecoratedByCG(this),e.decoratedBy&&e.decoratedBy.masterPosition&&e.decoratedBy.iframe&&e.positionId===e.decoratedBy.masterPosition.positionId&&(e.decoratedBy.iframe.doNotSendPixels=!0),this.pam.master&&(e.injectionIndex=e.injectionIndex||0),!e.hosted&&!e.injectionIndex){e.loadEvent("JS:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId)});var p=a.campaignId,c=a.adId;if(a.pam.sendJSImpressionAdCampaign(p,c,e.positionId,this.getPixiPositionIdForPositionId(e.positionId)),e.decoratedAt){var u=Math.round((new Date-e.decoratedAt)/1e3);e.loadEvent("JS:DELAY:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId),duration:u})}}var m=function(){var t,i=function(){s("Position removed",e),a.pam.unloadPosition(e)},n=function(){s("Position winlost: "+e.positionId,e),e.injectionIndex++,t.unload({hide:!0}),t.removeListener("remove",i),t.removeListener("winlose",n);for(var a=!1,r=0;r<(e.iframes||[]).length;r++)if(e.iframes[r]===t){a=!0;break}a?(o("ZZZ Position still active, reloading"),m()):o("ZZZ Position no longer active")};t=a.pam.injectFriendlyContent(e,l,a).on("remove",i).on("winlose",n)};m()},x.prototype.getTrackedUrl=function(e,t,i){return i=i||{},i=JSON.parse(JSON.stringify(i)),i.detail&&(i.detail=f(i.detail)),!i.c1&&this.args&&this.args.c1&&(i.c1=this.args.c1.toString()),!i.c2&&this.args&&this.args.c2&&(i.c2=this.args.c2.toString()),!i.c3&&this.args&&this.args.c3&&(i.c3=this.args.c3.toString()),!i.c4&&this.args&&this.args.c4&&(i.c4=this.args.c4.toString()),!i.c5&&this.args&&this.args.c5&&(i.c5=this.args.c5.toString()),i.campaignIdAlliance=this.campaignId,i.adIdAlliance=this.adId,i.creativeIdAlliance=this.creativeId,this.pam.getTrackedUrl(e,t,i,this.ticketInfo)},x.prototype.loadEvent=function(e,t){t&&(t=JSON.parse(JSON.stringify(t)),t.detail&&(t.detail=f(t.detail))),!t.c1&&this.args&&this.args.c1&&(t.c1=this.args.c1.toString()),!t.c2&&this.args&&this.args.c2&&(t.c2=this.args.c2.toString()),!t.c3&&this.args&&this.args.c3&&(t.c3=this.args.c3.toString()),!t.c4&&this.args&&this.args.c4&&(t.c4=this.args.c4.toString()),!t.c5&&this.args&&this.args.c5&&(t.c5=this.args.c5.toString()),this.pam.loadEvent(e,{campaignIdAlliance:this.campaignId,adIdAlliance:this.adId,creativeIdAlliance:this.creativeId},this.ticketInfo,t),"AP_SOMETHINGHASBEENSEEN"===e&&this.somethingHasBeenSeen()},x.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var a=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(a)){this.loadEventOnceSems[a]=!0,this.loadEvent(e,t);for(var o=0;o<i.length;o++)this.pam.loadPixel(i[o])}},x.prototype.getPixiPositionIdForPositionId=function(e){if(this.pam.positions&&this.pam.positions[e]&&this.pam.positions[e].pixiPositionId)return this.pam.positions[e].pixiPositionId;if(e.match(/^room\\./))return e;var t=this.remapPositions||{},i={},a=e.split(".");a.length>1&&(e=a[0]),i[e]={positionId:e};var o=[];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];this.pam.queryPositions(r,{positions:i}).length&&o.push(n)}return o.length?c(o,"mpu")>=0?"mpu":o[0]:e},x.prototype.queryAssets=function(e){var t=((this.args||{}).assets||{}).pool||[];return N.assetsMatchQuery(e,t)},k.prototype=new x({},{}),k.prototype.constructor=k,k.prototype.injectPosition=function(e,t){if(this.position.positionId===e.positionId&&this.pam.positionCurrentlyInline===e.positionId)try{t.call(e,this.framedDocument,this.framedWindow,e)}catch(i){r("Could not inject friendly position: "+e.positionId+": "+i)}else x.prototype.injectPosition.apply(this,arguments)},_.prototype=new x({},{}),_.prototype.constructor=_,S.prototype.registerResponsiveCallback=function(e){this.on("responsive",e),this.enableResponsiveEvents()},S.prototype.setMessageDuration=function(e){var t=this;return t.pam.master?void t.pam.loadLibrary("sweetlib.js",function i(){return t.iframe?void C.piximedia.SweetLib.bindViewTracker({object:t.iframe,threshold:50,duration:e},function(){t.position.loadEventWait("AP_CONSUMED");var e="isAnyConsumedForCampaign"+(t.position.decoratedBy||t.position.decoratedByCG||{}).campaignId;t.pam[e]||(t.pam[e]=!0,t.position.loadEventWait("AP_CONSUMED:CAMPAIGN"))}):setTimeout(i,500)}):t.emit("set-message-duration",e)},S.prototype.enableResponsiveEvents=function(){var e=this;return this.pam.master?void(this.responsiveEventsEnabled||(this.responsiveEventsEnabled=!0,this.pam.loadLibrary("sweetlib.js",function(){var t=C.piximedia.SweetLib,i=t.getPageContainer();t.enableResponsiveEventsForPageContainer(i,function(t){e.position.emit("responsive",t),e.emit("responsive",t)})}))):this.emit("enable-responsive-events")},S.prototype.hostRoom=function(e,t){if(t=t||{},!this.pam.master)return this.emit("host-room",e,t);var i=this;this.pam.hostRoom(e,{injectionIndex:this.position.injectionIndex},function(){var e=i.iframe,a=e.ownerDocument,o=a.createElement("div"),n=a.createElement("div");switch(o.className="pmRoomContainer",o.style.position="absolute",n.className="pmRoom",n.style.position="absolute",t.align||"center"){case"left":break;case"right":7===i.pam.msie&&(o.style.minWidth="100%"),o.style.width="100%",o.style.position="absolute",n.style.position="absolute",n.style.right=0;break;case"center":o.style.width="100%",7===i.pam.msie&&(o.style.minWidth="100%"),n.style.left="50%",n.className+=" pmCentered"}if(t.left&&(o.style.left=parseInt(t.left)+"px"),t.top&&(o.style.top=parseInt(t.top)+"px"),t.css)for(var r in t.css)if(t.css.hasOwnProperty(r))try{n.style[r]=t.css[r]}catch(s){}return o.appendChild(n),e.parentNode.insertBefore(o,e),n})},S.prototype.unload=function(e){var t=this;if(e=e||{},this.active=!1,o("Iframe.unload()"),this.iframe){if(this.pam.isInDOM(this.iframe))o("Iframe is still in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",o("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe);else{o("Iframe is no longer in DOM: "+this.iframe.id);var i=this.iframe.ownerDocument.getElementById(this.iframe.id);i?(o("Found winlost iframe in DOM: "+this.iframe.id),e.hide?(i.style.display="none",o("Setting iframe display: none")):i.parentNode&&i.parentNode.removeChild(i)):o("Winlost iframe not in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",o("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}if(this.moveTop&&this.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.moveTopOfPageContainer(t.pageContainer,-t.moveTop)}),e.hide){var a=function(){var e=t.iframe.ownerDocument.getElementById(t.iframe.id);"none"!==e.style.display&&(o("Iframe must be hidden again: "+t.iframe.id),e.style.display="none")},n=setInterval(a,20);setTimeout(function(){clearInterval(n),setInterval(a,500)},1e4)}}else o("no known iframe")},S.prototype.setIframe=function(e){var t=this,i=e.id,a=e.ownerDocument;if(i||(i=e.id="pmAnonIframe"+this.pam.rand()),this.iframe=e,this.visibilityCallbackOnHold&&(this.emit("register-visibility-callback",this.visibilityCallbackOnHold),this.visibilityCallbackOnHold=void 0),t.pam.master&&(this.iframe.onmouseover=function(){t.emitLocal("mouseover")},this.iframe.onmouseout=function(){t.emitLocal("mouseout")},t.position&&t.position.decoratedBy&&t.position.decoratedBy.timetracker&&t.position.decoratedBy.timetracker.hover)){var n=t.position,r=t.position.decoratedBy,l=r.timetracker.hover,d=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);"string"==typeof l&&(l=l.split(/ +/)),c(l,d)>=0&&(this.on("mouseover",function(){n.startTimetrackerHover()}),this.on("mouseout",function(){n.stopTimetrackerHover()}))}var p=function(){t.active&&setTimeout(function(){var e=a.getElementById(i);return e?(s("Iframe has been winlost"),t.emitLocal("winlose"),void t.setIframe(e)):void(t.pam.winlostIframeIds[i]?(t.active=!1,s("Iframe has been removed by PAM because of a winlose"),t.emitLocal("winlose")):(s("Iframe has been removed"),t.emitLocal("remove")))},0)};(t.safari||t.chrome)&&e.addEventListener("DOMNodeRemovedFromDocument",function(){p()});var u=e.contentWindow,m=setInterval(function(){var n=a.getElementById(i),r=n?n.contentWindow:void 0;n!==e?(o("Iframe changed, is there a winlose?"),clearInterval(m),p()):t.active&&r!==u&&(o("Iframe content window has changed by an external JavaScript"),e.parentNode.innerHTML="<!--winlose-->"+e.parentNode.innerHTML+"<!--winlose-->")},50)},I.prototype.setDecoratedByCG=function(e){this.decoratedByCG=e;var t=this.eventQueue;this.eventQueue=[];for(var i=0;i<t.length;i++){var a=t[i];this.loadEvent(a.eventId,a.options)}},I.prototype.justUsed=function(){var e=this,t=e.positionId;if(e.pam&&e.pam.globalOptions&&e.pam.globalOptions.positionsUniqueOnPage&&c(e.pam.globalOptions.positionsUniqueOnPage,t)>=0)for(var i in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(i)&&i.match(/^pam/)){var a=window.piximedia._.pams[i];a&&a.positions&&a.positions[t]&&(a.debug("Registering this position "+t+" as being used"),a.positions[t].used=!0,a.positions[t].usedUniqueOnPage=!0)}if(e.pam.master&&!e.trackingPositionSent){e.trackingPositionSent=!0;var o=e.decoratedBy||{},n=function(t){if(t){"string"==typeof t&&e.pam.loadPixel(t);for(var i=0;i<t.length;i++)e.pam.loadPixel(t[i])}};o.args&&o.args["tracking.ad_creative:impression"]&&o.args["tracking.ad_creative:impression"].pixelUrl&&n(o.args["tracking.ad_creative:impression"].pixelUrl),o.args&&o.args["tracking.ad:impression"]&&o.args["tracking.ad:impression"].pixelUrl&&n(o.args["tracking.ad:impression"].pixelUrl),o.args&&o.args["tracking.creative:impression"]&&o.args["tracking.creative:impression"].pixelUrl&&n(o.args["tracking.creative:impression"].pixelUrl)}},I.prototype.getTrackedUrl=function(e,t,i){var a={};if(i)for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return a.detail||(a.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG&&this.decoratedByCG.getTrackedUrl?this.decoratedByCG.getTrackedUrl(e,t,a):this.decoratedBy&&this.decoratedBy.getTrackedUrl?this.decoratedBy.getTrackedUrl(e,t,a):this.pam.getTrackedUrl(e,t,a)},I.prototype.loadEvent=function(e,t){var i={};if(t)for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);i.detail||(i.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG?this.decoratedByCG.loadEvent(e,i):this.decoratedBy?this.decoratedBy.loadEvent(e,i):this.pam.loadEvent(e,void 0,void 0,i)},I.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var a=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(a)){this.loadEventOnceSems[a]=!0,this.loadEvent(e,t);for(var o=0;o<i.length;o++)this.pam.loadPixel(i[o])}},I.prototype.loadEventWait=function(e,t){return this.decoratedBy||r("Cannot use Position.loadEventWait() on positions not associated to an ad"),this.decoratedBy.is_creative_group?this.decoratedByCG?this.loadEvent(e,t):void this.eventQueue.push({eventId:e,options:t}):this.loadEvent(e,t)},I.prototype.startTimetrackerHover=function(){var e=this;if(!e.pam.master)return e.emit("start-timetracker-hover");if(!this.timetrackerHover){var t,i=0,a=0,o=function(){e.pam.loadLibrary("sweetlib.js",function(){i&&!a?t.pause():!i&&a&&(t?t.resume():(t=C.piximedia.SweetLib.setTimer("HOVER",function(t,i){e.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e.pixiPositionId||e.decoratedBy.getPixiPositionIdForPositionId(e.positionId)})}),t.start())),i=a})};this.timetrackerHover={start:function(){a++,o()},stop:function(){a--,o()}}}this.timetrackerHover.start()},I.prototype.stopTimetrackerHover=function(){return this.pam.master?void(this.timetrackerHover&&this.timetrackerHover.stop()):this.emit("start-timetracker-hover")},E.prototype.loadActivity=function(e){this.pam.loadActivityPixel(e)},E.prototype.loadAd=function(e){var t=this.getUrl(e);if(e.dw)try{O.write(\'<script type="text/javascript" src="\'+t+\'"></script>\')}catch(i){}else e.defer&&"complete"!==O.readyState?this.deferObj(e):(C.pmIsAlreadyActive&&(e.use_pb=!0,t=this.getUrl(e)),this.pam.loadScript(t))},E.prototype.getUrl=function(e){var t="";return e.use_pb&&(t+=";pb=1"),this.pam.globalOptions.serialId&&(t+=";serial_id="+this.pam.globalOptions.serialId),"//"+M+"/ads_js/stage2.php?"+e.mode+"|"+e.site_id+"|"+e.placement_id+"|"+e.params+t+"|"+z.toString()+"|"+this.pam.rand()+"|click="+e.click},E.prototype.deferObj=function H(e){var t=this;this.deferredObjects.push(e),H.listening||(H.listening=!0,this.pam.waitDomLoaded(function(){t.loadDeferedObjects()}))},E.prototype.loadDeferedObjects=function(){if(!this.deferredObjectsLoaded){this.deferredObjectsLoaded=!0;for(var e=0;e<this.deferredObjects.length;e++)this.loadDeferedAd(this.deferredObjects[e])}},E.prototype.loadDeferedAd=function(e){C.pmIsAlreadyActive&&(e.use_pb=!0),C.pmIsAlreadyActive=!0;var t=this.getUrl(e);this.loadScript(t)},E.prototype.getClickCommand=function(){for(var e=0;e<this.pam.positions.length;e++){var t=this.pam.positions[e];if(t.clickUrl)return t.clickUrl}return this.pam.clickUrl},E.prototype.loadEvent=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos)},E.prototype.loadEventWithPrefix=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos,{prefixURI:this.getClickCommand()})},E.prototype.loadScript=function(e){try{var t=O.createElement("script");t.type="text/javascript",t.async="async",t.src=e,O.getElementsByTagName("head")[0].appendChild(t)}catch(i){}},E.prototype.setTicket=function(e,t){this.ticketInfos={ticket:e,signature:t}},N=P,P.prototype.runPixeldisTest=function(){var e=this.getTopmostWindow();if(this.master&&e===top&&!(Math.random()<.9)){var t;switch(Math.round(5*Math.random())+1){case 1:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/a.html";break;case 2:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/b.html";break;case 3:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/c.html";break;case 4:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/d.html";break;case 5:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/e.html";break;default:case 6:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/f.html"}this.waitDomMutable(function(){var i=e.document.getElementsByTagName("head");if(1===i.length){var a=i[0],o=e.document.createElement("iframe");o.id="pixipixeldis",o.src=t,a.appendChild(o)}})}},P.prototype.sendJSImpressionAdCampaign=function(e,t,i,a){if(!this.master)return this.emit("js-impression-ad-campaign",e,t,i,a);var o=this.positions[i];e&&!this.campaignIdsWithImpressions[e]&&(this.campaignIdsWithImpressions[e]=e,o.loadEvent("JS:IMPRESSION:CAMPAIGN",{detail:a})),t&&!this.adIdsWithImpressions[t]&&(this.adIdsWithImpressions[t]=t,o.loadEvent("JS:IMPRESSION:AD",{detail:a}))},P.prototype.log=s,P.prototype.warn=n,P.prototype.error=r,P.prototype.loadPixel=function(e){if(e&&" "!==e&&"PIXEL_URL"!==e){var t=e.toString().match(/^([0-9.]+)%:(.*)/);if(t){var i=parseFloat(t[1],10)/100;if(this.globalOptions.loadPixelRandom>i)return;e=t[2]}m(e.replace(/%n|\\[random_number\\]|\\[random\\]|\\[timestamp\\]/gi,Math.round(1e16*Math.random()).toString()))}},P.prototype.eventEmitterForObject=function(e,t,i){var a={};if(i)for(var o in a)a.hasOwnProperty(o)&&(a[o]=i[o]);return a.globalEmitter=this.globalEmitter,w.forObject(e,t,a)},P.prototype.syncDocumentHasFocus=function(){var e=this;if(this.master){var t=e.getTopmostDocument();e.documentHasFocus=t.hasFocus(),setInterval(function(){var i=t.hasFocus();i!==e.documentHasFocus&&(e.documentHasFocus=i,e.emit("focus-change",i))},1e3)}else this.on("focus-change",function(t){e.documentHasFocus=t})},P.prototype.cleanupPixiRTAPosCookie=function(e){e=e||{};var t=C.piximedia.request_pos_sp[this.siteId][this.placementId],i=!1;for(var a in t)if(t.hasOwnProperty(a)){i=!0;break}this.canWriteCookies()&&(i||"alliance"!==this.mode||(e.keepRTAPos||(O.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),O.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(O.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")))},P.prototype.canWriteCookies=function(){var e,t=this;try{var i=t.getTopmostDocument();e=i.domain}catch(a){}return e=(e||"").toString(),e.match(/googlesyndication\\.com|doubleclick\\.net|google\\.com/)?!1:!0},P.prototype.getBirthdateCookie=function(){if(this.canWriteCookies())for(var e=O.cookie.split(/; */),t=/pixi_birthdate=(.*)/,i=e.length-1;i>=0;i--){var a=e[i].match(t);if(a&&a[1])return parseInt(a[1],10)}},P.prototype.getBirthdateLS=function(){try{if(C.localStorage&&C.localStorage.getItem)return parseInt(C.localStorage.getItem("pixi_birthdate"),10)||void 0}catch(e){}},P.prototype.exposePixiRTAPosCookie=function(e){if(e=e||{},this.canWriteCookies()){e.expires||(e.expires=new Date((new Date).getTime()+1e3*U)),e.pixiRTAPosExpires||(e.pixiRTAPosExpires=new Date((new Date).getTime()+1e3*(this.globalOptions.pixiRTAPosExpires||U)));var t=[];for(var i in C.piximedia.request_pos)C.piximedia.request_pos.hasOwnProperty(i)&&t.push(i);if(O.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_rta_pos="+escape(t.join(";"))+"; path=/; "+this.getDomainPartForCookies()+(e.pixiRTAPosExpires?"; expires="+e.pixiRTAPosExpires.toUTCString():""),O.cookie="pixi_rta_v="+escape("1;"+(new Date).getTime())+"; path=/; "+this.getDomainPartForCookies()+(e.expires?"; expires="+e.expires.toUTCString():""),this.globalOptions.exposeRTAPosHelperJS){var a=this.getTopmostWindow();try{a.Function(["req_pos","window","document"],this.globalOptions.exposeRTAPosHelperJS).call(a,t,a,a.document)}catch(o){r("Could not execute RTA position helper: "+o)}}var n=+new Date,s=void 0!==this.getBirthdateCookie();s||(O.cookie="pixi_birthdate="+escape(n)+"; path=/; "+this.getDomainPartForCookies()+"; expires="+new Date((new Date).getTime()+31536e6).toUTCString());try{C.localStorage&&C.localStorage.getItem&&C.localStorage.setItem&&(C.localStorage.getItem("pixi_birthdate")||C.localStorage.setItem("pixi_birthdate",n))}catch(l){}}},P.prototype.stringify=function(e){return void 0===e?"undefined":null===e?"null":"number"==typeof e?e:(e=e.toString(),\'"\'+e.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,\'\\\\"\')+\'"\')},P.get=P.prototype.get=function(e,t,i){var a=e+"/"+t+":"+(i||"alliance");return(C.piximedia._.pams||{})[a]},P.prototype.loadActivityPixel=function(e,t){t=t||{};var i=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;m("//"+M+"/activity/?|||advertiser_id="+e.advertiser_id+";page_id="+e.page_id+";activity_type="+e.activity_type+";sale_amount="+e.sale_amount+";sale_quantity="+e.sale_quantity+";sale_currency="+e.sale_currency+";customer_user_id="+e.customer_user_id+";http_secure="+C.location.protocol+";save_last_url="+(e.save_last_url?"true":"false")+";|"+i+"|"+this.rand()+"|")},P.prototype.getTrackedUrl=function(e,t,i,a){i=i||{};var o=(void 0===i.c1?"":i.c1.toString()).replace(/;/g,","),n=(void 0===i.c2?"":i.c2.toString()).replace(/;/g,","),r=(void 0===i.c3?"":i.c3.toString()).replace(/;/g,","),s=(void 0===i.c4?"":i.c4.toString()).replace(/;/g,","),l=(void 0===i.c5?"":i.c5.toString()).replace(/;/g,","),d=(this.globalOptions.l_id?this.globalOptions.l_id.toString():"").replace(/;/g,","),p=void 0===i.firstOnAd?"":i.firstOnAd?1:0,c=void 0===i.firstOnUnit?"":i.firstOnUnit?1:0,u=void 0===i.duration?"":i.duration.toString(),m=void 0===i.fail_reason?"":i.fail_reason.toString(),h=void 0===i.detail?"":i.detail.toString(),f=";c1="+o+";c2="+n+";c3="+r+";c4="+s+";c5="+l+";l_id="+d+";duration="+u+";first_on_ad="+p+";first_on_unit="+c+";detail="+h+";error="+m;i.campaignIdAlliance&&(f+=";campaign_id="+i.campaignIdAlliance),i.adIdAlliance&&(f+=";ad_id="+i.adIdAlliance),i.creativeIdAlliance&&(f+=";creative_id="+i.creativeIdAlliance);var v=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;return v||(v=z.toString(),C.piximedia._.contextBySP=C.piximedia._.contextBySP||{},C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=v),(this.globalOptions.protocol||"http")+"://"+M+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+f+(a?";ticket="+a.ticket+";signature="+a.signature:"")+"|"+v+"|"+this.rand()+"|click="+t},P.prototype.loadEvent=function(e,t,i,a){\nswitch(a=a||{},e){case"IMPRESSION":case"CLICK":break;default:if(this.numberOfEventsSent[e]=(this.numberOfEventsSent[e]||0)+1,this.numberOfEventsSent[e]>=50){if(50!==this.numberOfEventsSent[e])return;a.detail=(a.detail||"").toString()+":"+e,e="TOO_MANY_EVENTS"}}!t||i&&i.ticket&&i.signature||a.noTicket||this.globalOptions.noTicket||!this.mode.match(/^alliance/)||r("Required ticketInfos");var o,n=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;if(n||(n=z.toString(),C.piximedia._.contextBySP=C.piximedia._.contextBySP||{},C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=n),t&&t.params)o=";"+t.params;else{var s=(void 0===a.c1?"":a.c1.toString()).replace(/;/g,","),l=(void 0===a.c2?"":a.c2.toString()).replace(/;/g,","),d=(void 0===a.c3?"":a.c3.toString()).replace(/;/g,","),p=(void 0===a.c4?"":a.c4.toString()).replace(/;/g,","),c=(void 0===a.c5?"":a.c5.toString()).replace(/;/g,","),u=(void 0===this.globalOptions.l_id?"":this.globalOptions.l_id.toString()).replace(/;/g,","),h=void 0===a.firstOnAd?"":a.firstOnAd?1:0,f=void 0===a.firstOnUnit?"":a.firstOnUnit?1:0,v=void 0===a.duration?"":a.duration.toString(),g=void 0===a.fail_reason?"":a.fail_reason.toString(),y=void 0===a.detail?"":a.detail.toString();o=";c1="+s+";c2="+l+";c3="+d+";c4="+p+";c5="+c+";l_id="+u+";duration="+v+";first_on_ad="+h+";first_on_unit="+f+";detail="+y+";error="+g,t&&(o+=";campaign_id="+t.campaignIdAlliance+";ad_id="+t.adIdAlliance+";creative_id="+t.creativeIdAlliance)}this.globalOptions.serialId&&(o+=";serial_id="+this.globalOptions.serialId);var b;if(a.prefixURI)b=!1;else switch(e){case"IMPRESSION":case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":b=!1;break;default:b=!1}if(b){var w=this,x=o+(i?";ticket="+i.ticket+";signature="+i.signature:"");this.pixelQueue[x]=this.pixelQueue[x]||[],this.pixelQueue[x].push(e),this.pixelQueueTimer||(this.pixelQueueTimer=setTimeout(function(){w.pixelQueueTimer=void 0;var e=w.pixelQueue;w.pixelQueue=[];for(var t in e)e.hasOwnProperty(t)&&m("//"+M+"/eventq/?P|"+w.siteId+"|"+w.placementId+"|eventq="+e[t].join(",")+t+"|"+n+"|"+w.rand()+"|")},1500))}else m((a.prefixURI||"")+"//"+M+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+o+(i?";ticket="+i.ticket+";signature="+i.signature:"")+"|"+n+"|"+this.rand()+"|");switch(e){case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":m("//"+M+"/profile/location.php?e="+e+"&p="+escape(o))}switch(e){case"JS:POSITION_USED":var k=(a.detail||"").toString(),_=Math.random()<V;if(k){var S=this.mode+"/"+this.siteId+"/"+this.placementId+"/"+k,I=this.getTopmostWindow();if(I.pmTimePositions&&I.pmTimePositions[S]){var E=I.pmTimePositions[S];if(E.events=E.events||{},!E.events[e]){E.events[e]=!0;var A,T=Math.round((new Date-E.date)/1e3);if(T>=0&&120>T){switch(e){case"JS:POSITION_USED":A="JS:DELAY:POSITION_USED"}var O=z.getData();if(_&&this.loadEvent(A,t,i,{detail:k,duration:T,c1:O.browser_name,c2:O.browser_major_version}),"JS:POSITION_USED"===e&&I.performance&&I.performance.timing&&I.performance.timing.responseStart){var D=new Date(I.performance.timing.responseStart);T=Math.round((E.date-D)/1e3),T>=0&&120>T&&_&&this.loadEvent("JS:DELAY:POSITION",t,i,{detail:k,duration:T,c1:O.browser_name,c2:O.browser_major_version})}}}}}}setTimeout(function(){P.emit("event",e,t,a)},0)},P.prototype.getDomainPartForCookies=function J(){if(J.cache)return J.cache;try{var e=this.getDocumentAndWindowInfos().window;switch(e.location.protocol){case"http:":case"https:":return J.cache="domain=."+e.location.hostname.split(".").slice(-2).join(".")+"; "}}catch(t){}return""},P.prototype.getTopmostWindow=function(){return this.getDocumentAndWindowInfos().window},P.prototype.watchForRemoval=function(e,t){var i=this;if(this.safari||this.chrome)e.addEventListener("DOMNodeRemovedFromDocument",t);else var a=setInterval(function(){return i.isInDOM(e)?void 0:(clearInterval(a),t())},500)},P.prototype.isInDOM=function(e){try{for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}}catch(t){return!1}},P.prototype.isInHead=function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HEAD"===t.parentNode.tagName)return!0;if("HTML"===t.parentNode.tagName)return!1}},P.prototype.getTopmostDocument=function(){return this.getDocumentAndWindowInfos().document},P.prototype.loadLibraries=function(e,t){var i=this,a=function(){try{return t.call(i)}catch(e){return void r("Caught exception when calling loadLibraries() callback: "+e)}},o=e.length;if(!o)return a();for(var n=function(){return--o?void 0:a()},s=0;s<e.length;s++)this.loadLibrary(e[s],n)},P.prototype.getPmLoaderDoc=function(){var e,t=this.getTopmostDocument();if(this.msie&&this.msie<8)e=t;else{var i=t.getElementById("pmFiFLoader");if(!i){var a,o=t.getElementsByTagName("head")[0];i=t.createElement("iframe"),i.id="pmFiFLoader";var n=t.createElement("iframe"),r=t.createElement("iframe");n.id="pmFiFLoader_protect_before",r.id="pmFiFLoader_protect_after",n.className="this_should_be_empty web_designer",r.className="this_should_be_empty web_designer",o.appendChild(n),o.appendChild(i),o.appendChild(r);try{a=i.contentWindow,e=i.contentDocument||i.contentWindow.document}catch(s){var l=this.getTopmostDocument();try{i.src="javascript:document.write(\'<head><script>document.domain=\\""+l.domain+"\\";</script></head><body></body>\')",e=i.contentDocument||i.contentWindow.document,a=i.contentWindow}catch(s){i.src="javascript:document.write(\'<head><script>document.domain=\\""+i.ownerDocument.domain+"\\";</script></head><body></body>\')",e=i.contentDocument||i.contentWindow.document,a=i.contentWindow}}e.write("<html><head></head><body><script>setTimeout(function(){document.close();},0);</script></body></html>"),i.contentWindow._piximediaIsFiFLoader=!0}i.contentWindow.piximedia=i.contentWindow.piximedia||C.piximedia,e=i.contentDocument||i.contentWindow.document}return e},P.prototype.loadLibrary=function(e,t){if(p(e))return this.loadLibraries(e,t);var i,a=this,n=function(){try{return t.apply(a,arguments)}catch(i){return void r("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},s=C.piximedia.libraryLoader=C.piximedia.libraryLoader||{};if(s.hasOwnProperty(e))i=s[e],i.loaded?n():i.callbacks.push(n);else{if(!this.globalOptions.libs){var l=z.getData();this.loadEvent("PANIC",void 0,void 0,{fail_reason:"no_libs",c1:l.browser_name})}var d=(this.globalOptions.libs||{})[e];d||(d="//"+R+"/lib/"+e+(B?"/debug":"")),i=s[e]={callbacks:[n]},a.debug("Loading library "+e);var c=this.getPmLoaderDoc(),u=c.createElement("script");u.src=d;var m,h,f=function(){if(!i.loaded){i.loaded=!0;for(var t=i.callbacks,n=0;n<t.length;n++)t[n]();var r=setInterval(function(){if(!a.isInDOM(u)){var t=z.getData();a.loadEvent("PANIC",void 0,void 0,{fail_reason:"loader_winlost",c1:t.browser_name}),o("No longer in DOM: "+e),i.loaded=!1,delete s[e],clearInterval(r),a.loadLibrary(e,function(){o("Back in DOM: "+e)})}},50)}},v=function(){i.complete&&f()},g=function(){i.complete&&(h.clearInterval(m),f())};i.onloads=i.onloads||[],i.onloads.push(g);var y=function(){var e=c.getElementsByTagName("head")[0];if(e){e.appendChild(u);var t=a.getTopmostWindow();h=t,m=h.setInterval(g,50)}else C.setTimeout(y,50)};u.addEventListener?u.addEventListener("load",v,!1):u.readyState&&(u.onreadystatechange=v),y()}},P.prototype.loadCSSs=function(e,t){var i=this,a=function(){try{return t.call(i)}catch(e){return void r("Caught exception when calling loadCSSs() callback: "+e)}},o=e.length;if(!o)return a();for(var n=function(){return--o?void 0:a()},s=0;s<e.length;s++)this.loadCSS(e[s],n)},P.prototype.loadCSS=function(e,t){if(p(e))return this.loadCSSs(e,t);var i,a=this,o=function(){if(t)try{return t.apply(a,arguments)}catch(i){return void r("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},n=C.piximedia.cssLoader=C.piximedia.cssLoader||{};if(n.hasOwnProperty(e))i=n[e],i.loaded?i.callCallback(t):i.callbacks.push(o);else{var s=this.globalOptions.css[e];if(!s)throw new Error("Unknown CSS: "+e);i=n[e]={callbacks:[o]};var l=this.getPmLoaderDoc(),d=l.createElement("script");d.src=s;var c=function(){if(!i.loaded){i.loaded=!0;for(var e=i.callbacks,t=0;t<e.length;t++)i.callCallback(e[t])}},u=function(){i.complete&&c()};i.onloads=i.onloads||[];var m,h,f=function(){i.complete&&(h.clearInterval(m),c())};i.onloads.push(f);var v=function(){var e=l.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=a.getTopmostWindow();h=t,m=h.setInterval(f,50)}else C.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",u,!1):d.readyState&&(d.onreadystatechange=u),v()}},P.prototype.loadCSSInDocument=function(e,t,i){this.loadCSS(e,function(e){return e.loadCSSInDocument(t),i()})},P.prototype.getDocumentAndWindowInfos=function G(){if(G._cache)return G._cache;var e,t={};if(!t.window)try{e=C.parent.parent.parent.document,e._piximediaiframetest=!0,t.window=C.parent.parent.parent.window}catch(i){}if(!t.window)try{e=C.parent.parent.document,e._piximediaiframetest=!0,t.window=C.parent.parent.window}catch(i){}if(!t.window)try{e=C.parent.document,e._piximediaiframetest=!0,t.window=C.parent.window}catch(i){}if(t.window||(t.window=window),!t.document)try{e=C.parent.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=C.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=C.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}return t.document||(t.document=document),(!this.msie||this.msie>8)&&(G._cache=t),t},P.prototype.hello=function(e){var t=this;if(!e.implicit&&this.master){var i=this.globalOptions.autoFacetDevice;switch(this.globalOptions.autoFacetPosition){case"shuffle":case"sequence":var a=this.facets[this.currentFacetIndex++];this.currentFacetIndex>=this.facets.length&&(this.currentFacetIndex=0),e.positionId+="."+a;break;case"device":i=!0}i&&(e.positionId+="."+t.globalOptions.device)}if(t.globalOptions.addFacets&&(e.positionId+="."+t.globalOptions.addFacets.join(".")),o(e.positionId?\'hello({positionId:"\'+e.positionId+\'"})\':"hello()"),this.globalOptions&&this.globalOptions.virtualPositions&&this.globalOptions.virtualPositions[e.originalPositionId]&&(this.globalOptions.virtualPositions[e.positionId]=this.globalOptions.virtualPositions[e.originalPositionId]),e||r("Missing options"),this.globalOptions.positionsUniqueOnPage&&c(this.globalOptions.positionsUniqueOnPage,e.positionId)>=0)for(var n in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(n)&&n.match(/^pam/)){var s=window.piximedia._.pams[n];if(s&&s!==this&&s.positions&&s.positions[e.positionId]&&s.positions[e.positionId].used)return r("Cannot register "+e.positionId+" because another PAM has a used footer"),void this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_multiple_"+e.positionId})}if(e.implicit){if(this.master){var l=function(e){if(e){"string"==typeof e&&t.loadPixel(e);for(var i=0;i<e.length;i++)t.loadPixel(e[i])}},d={};d[e.positionId]={positionId:e.positionId};for(var p in t.globalOptions.positionArgs||{})if(t.globalOptions.positionArgs.hasOwnProperty(p)&&t.queryPosition(p,{positions:d}).length){var u=t.globalOptions.positionArgs[p],h=u["tracking.position"],f=u["tracking.placement"];h&&(l(h.pixelUrl),e.advertiserClickUrl=((h||{}).clickUrl||[])[0]||e.advertiserClickUrl,e.advertiserClickUrls=(h||{}).clickUrl||[]||(e.advertiserClickUrls?e.advertiserClickUrls:e.advertiserClickUrl?[e.advertiserClickUrl]:[]));var v=t.globalOptions.l_id||"";m("//"+M+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:POSITION:IMPLICIT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|");try{var g=t.getTopmostWindow(),y=t.mode+"/"+t.siteId+"/"+t.placementId;g._piximedia=g._piximedia||{},g._piximedia.pixelSPSent=g._piximedia.pixelSPSent||{},g._piximedia.pixelSPSent[y]||(g._piximedia.pixelSPSent[y]=!0,f&&l(f.pixelUrl),m("//"+M+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:PLACEMENT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|"))}catch(b){}break}}}else this.numberOfExplicitPositions++;if(this.mode.match(/^alliance/)&&!this.globalOptions.inline&&!this.globalOptions.enableRTA&&!this.globalOptions.legacyPosition)switch(e.positionId){case"default":case"footer":break;default:this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_position_"+e.positionId+"_without_RTA_support"})}if(e.masterPositionId){var x=this.positions[e.masterPositionId];x&&(e.clickUrl||(e.clickUrl=x.clickUrl),e.advertiserClickUrl||(e.advertiserClickUrl=x.advertiserClickUrl),e.advertiserClickUrls||(e.advertiserClickUrls=x.advertiserClickUrls))}if(!e.virtual&&this.globalOptions.virtualPositions&&this.globalOptions.virtualPositions.hasOwnProperty(e.positionId)&&(e.virtual=this.globalOptions.virtualPositions[e.positionId]),e.document,e.document&&!e.id&&!e.virtual)if(e.id="pixiMarker"+Math.round(1e16*Math.random()),e.element){var k=e.element.ownerDocument,_=k.createElement("div");_||r("markerDiv is not as real as expected: "+JSON.stringify(_)),_.id=e.id,this.isInHead(e.element)||!t.isInDOM(e.element)?(e.element.ownerDocument.body||e.element.ownerDocument.write("<body>"),e.element.ownerDocument.body.appendChild(_)):e.element.parentNode.insertBefore(_,e.element)}else e.document.write(\'<div style="display:none" id="\'+e.id+\'"></div>\');var S,E=e.positionId;if(e.implicit||(t.explicitlyRegisteredPositionIds[E]=!0),this.positions.hasOwnProperty(E))for(var P=2;;P++)if(!this.positions.hasOwnProperty(E+"."+P)){E=E+"."+P,S=P;break}switch((e.virtual||{}).type){case"immediate":if(!e.implicit&&t.master)return r("Virtual position cannot be explicit: "+E),t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_immediate_cannot_be_explicit"}),void setTimeout(function(){t.registerVirtualPositions()},0);break;case"override":if(S)return r("Virtual override cannot be multiple: "+E),void t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_override_cannot_be_multiple"})}o("Registering position "+E+" on "+(this.master?"master pam":"hosted pam"));var A=new Date;this.firstPositionRegisteredAt||(this.firstPositionRegisteredAt=A);var T=this.positions[E]=new I(this,{positionId:E,registeredAt:A,active:!0,id:e.id,clickUrl:t.globalOptions.disablePublisherCC?"":e.clickUrl||this.clickUrl||"",advertiserClickUrl:e.advertiserClickUrl,advertiserClickUrls:e.advertiserClickUrls,document:e.document,window:e.window,implicit:e.implicit,virtual:e.virtual,injectionIndex:e.injectionIndex,pageContainerWidth:e.pageContainerWidth,decoratedAt:e.decoratedAt?new Date(e.decoratedAt):void 0,allAdvertiserClickUrls:e.allAdvertiserClickUrls,allClickUrls:e.allClickUrls,alwaysHosted:e.alwaysHosted,inlineScript:e.inlineScript,positionCalledAt:e.positionCalledAt,passbackSrc:e.passbackSrc,dynamicArgs:e.dynamicArgs,originalPositionId:e.originalPositionId});e.alwaysHosted&&(this.somePositionsAreAlwaysHosted=!0),w.forObject(T),e.window&&!e.window.piximedia&&(e.window.piximedia=C.piximedia),void 0!==e.implicit&&(T.implicit=e.implicit),"footer"!==E&&this.globalOptions.enableFooter&&this.positions.footer&&!this.positions.footer.clickUrl&&e.clickUrl&&!t.globalOptions.disablePublisherCC&&(this.positions.footer.clickUrl=e.clickUrl),e.ajax||(this.positionCurrentlyInline=E),e.last&&this.stopWaitingForOtherPositions(),T.implicit||t.registerVirtualPositions(),this.emitLocal("pre-hello",T);var O={};if(O[E]={positionId:E},e.activateAds!==!1){var D,N=!1,F={};F[E]=T;for(var L=0;1>=L;L++){for(var j=0===L,R=0;R<this.availableAds.length;R++){var B=this.availableAds[R];if(B.active){if(B.require&&B.require.positions&&this.queryPositions(B.require.positions,{positions:F,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){N=!0,D=B;break}if(B.use&&B.use.positions&&this.queryPositions(B.use.positions,{conditionPositions:this.positions,positions:F,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){N=!0,D=B;break}}else{if(j)continue;if(B.require&&B.require.positions){var U=!!this.queryPositions(B.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length,V=!!this.queryPositions(B.require.positions,{spaceIsOr:!0,positions:O}).length;if(V&&!U&&this.loadEvent("DEBUG:PRED20160219"),U&&V){if(this.queryPositions(B.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length){N=!0,D=B;break}if(!this.performedRendezVous){N=!0,this.scheduleRendezVous();break}}else if(B.use&&B.use.positions&&this.queryPositions(B.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length&&!this.performedRendezVous){N=!0,this.scheduleRendezVous();break}}else if(B.use&&B.use.positions){var W=!!this.queryPositions(B.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0}).length;if(W){N=!0,D=B;break}}}}if(N)break}if(N&&D)if(D.passback||this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions)if(D.active&&!D.disabled){if(D.active){T.requested=!0,T.requestedBy=D;var q=D.emitLocal("hello",T);T.used=!0,T.justUsed&&T.justUsed(),T.decoratedBy=D,!T.implicit&&this.mode.match(/^alliance/)&&T.loadEvent("JS:POSITION_USED",{detail:E}),q||(o("Pushing position "+T.positionId),D.positions.push(T))}}else this.activateAd(D);else this.performedRendezVous||this.scheduleRendezVous();if(t.globalOptions.reportPositionWithNoAds&&!T.implicit){var z,H,J,G=t.availableAds.length,X="",$=0;for(var K in t.positions)if(t.positions.hasOwnProperty(K)){var Z=t.positions[K];if(X+=K+(Z.used?".USED,":".NOTUSED,"),++$>4)break}if(t.availableAds.length){var Y=t.availableAds[0];z=((Y.require||{}).positions||[])[0],H=((Y.use||{}).positions||[])[0],J="active="+(Y.active?1:0)+","}var Q=setInterval(function(){(!t.scheduledRendezVous||t.performedRendezVous)&&(clearInterval(Q),(!T.used||T.decoratedBy&&T.decoratedBy.passback)&&t.loadEvent("JS:NO_ADS",void 0,void 0,{detail:T.positionId,c1:G,c2:z,c3:H,c4:J,c5:X}))},500)}}return this.positionCurrentlyInline=void 0,this.decorativeAds.length&&T.id&&(o("schedule rendez-vous because of decorative ads"),this.scheduleRendezVous()),this.emitLocal("post-hello",T),this.master&&T.positionId.match(/^1x1\\b/)&&this.globalOptions.enableImplicitTakeover&&!this.registeredImplicitTakeover&&(this.registeredImplicitTakeover=!0,setTimeout(function(){t.hello({implicit:!0,ajax:!0,positionId:"takeover",advertiserClickUrl:T.advertiserClickUrl,advertiserClickUrls:T.advertiserClickUrls,clickUrl:T.clickUrl})},0)),this.master&&setTimeout(function(){T.used||T.sentBlank||T.implicit||(T.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:T.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:T.positionId}))},1e4),T},P.prototype.registerVirtualPositions=function(){var e=this;if(e.globalOptions.virtualPositions){var t,i=e.getTopmostDocument(),a=e.getTopmostWindow(),n=!1;for(var r in e.positions)if(e.positions.hasOwnProperty(r)){var s=e.positions[r];if(!s.implicit&&s.clickUrl){t=s.clickUrl;break}}var l=[];for(var d in e.globalOptions.virtualPositions)if(e.globalOptions.virtualPositions.hasOwnProperty(d)){if(e.positions.hasOwnProperty(d))continue;var p=e.globalOptions.virtualPositions[d];if(p.prerequisite&&!(e.queryPositions(p.prerequisite)||[]).length)continue;"override"!==p.type&&(p.immediate||"immediate"===p.type||e.performedRendezVous||p.prerequisite?(o("Registering virtual position"),l.push({siteId:e.siteId,placementId:e.placementId,positionId:d,clickUrl:t,document:i,window:a,id:null,ajax:!0,implicit:!0,virtual:p,advertiserClickUrl:((p["tracking.position"]||{}).clickUrl||[])[0],advertiserClickUrls:(p["tracking.position"]||{}).clickUrl||[]})):n=!0)}if(1===l.length)e.hello(l[0]);else if(l.length>1){for(var c=0;c<l.length;c++){var u=l[c];u.activateAds=!1,e.hello(u)}e.tryAndActivateAds()}n&&(o("Scheduling rendez-vous for non-immediate virtual position"),e.scheduleRendezVous())}},P.prototype.tryAndActivateAds=function(e){o("try and activate ads");var t=this;e=e||{};for(var i=[],a=function(e){return function(){e.passback||t.numberOfExplicitPositions||t.globalOptions.allowActiveAdsWithNoExplicitPositions?t.activateAd(e):t.performedRendezVous||t.scheduleRendezVous()}},n=0;n<this.availableAds.length;n++){var r=this.availableAds[n];if(!r.active){var s=a(r);if(r.require&&r.require.positions){var l=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length;if(l){var d=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length;d?s():this.performedRendezVous||(i.push(r),this.scheduleRendezVous())}}else if(r.use&&r.use.positions&&r.use.positions.length&&!e.onlyConsiderRequires){var p=this.queryPositions(r.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0});if(p.length){var c=!1;e:for(var u=0;u<i.length;u++){var m=i[u],h=!1,f=!1;if(m.require&&m.require.positions&&(h=!!this.queryPositions(m.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:p}).length),m.use&&m.use.positions&&(f=!!this.queryPositions(m.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:p}).length),h||f){c=!0;break e}}c||s()}}}}if(!this.scheduledRendezVous||this.performedRendezVous){var v=function(e){setTimeout(function(){e.used||e.sentBlank||e.implicit||(e.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:e.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:e.positionId}))},1e4)};for(var g in this.positions)this.positions.hasOwnProperty(g)&&v(this.positions[g])}},P.prototype.scheduleRendezVous=function(){var e=this;this.scheduledRendezVous||(o("Schedule rendez-vous"),this.scheduledRendezVous=!0,this.globalOptions.rendezvous_fast_duration&&(this.timeoutRendezVousFast=setTimeout(function(){o("Rendez-vous fast!"),e.tryAndActivateAds(),e.on("post-hello",function(){e.performedRendezVous||setTimeout(function(){e.tryAndActivateAds()},0)})},this.globalOptions.rendezvous_fast_duration)),this.timeoutRendezVous=setTimeout(function(){e.timeoutRendezVous=void 0,this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),o("Rendez-vous!"),e.performedRendezVous=!0,e.registerVirtualPositions(),e.tryAndActivateAds(),setTimeout(function(){e.sendStatistics()},2e3)},this.globalOptions.rendezvous_duration||L))},P.prototype.sendStatistics=function(){if(!this.sentStatistics&&(this.sentStatistics=!0,this.mode.match(/^alliance/)&&this.master&&!C.piximedia.preview)){for(var e=(this.globalOptions.context||{}).alliance_rtapos?",had_rta_pos":",no_rta_pos",t=g(this.explicitlyRegisteredPositionIds).length,i=g(this.explicitlyRegisteredPositionIds).sort().slice(0,10),a=g(this.positions).sort().slice(0,10),o=[],n=[],r=0;r<i.length;r++){var s=i[r].replace(/\\.[0-9]+/,"");-1===c(o,s)&&o.push(s)}o=o.join(",");for(var l=0;l<a.length;l++){var d=a[l].replace(/\\.[0-9]+/,"");-1===c(n,d)&&n.push(d)}n=this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions?n.join(","):"";var p=this.numberOfActiveAds||0;p>=3&&(p="3MORE");var u=this.realAds.length;if(u>=10?u="10MORE":u>=5?u="5-10":u>0&&(u="1-4"),this.loadEvent("JS:STATS",void 0,void 0,{c1:p||0,c2:u,c3:e,c4:o,c5:n,duration:t}),!this.numberOfActiveAds)for(var m=0;m<this.allAvailableAds.length;m++){var h=this.allAvailableAds[m];if(!h.passback&&h.args&&h.args.not_enough_pos_pixel){this.loadPixel(h.args.not_enough_pos_pixel);break}}}},P.prototype.stopWaitingForOtherPositions=function(){o("We no longer expect other positions"),this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),this.timeoutRendezVous&&(clearTimeout(this.timeoutRendezVous),this.timeoutRendezVous=void 0),this.scheduledRendezVous=!0,this.performedRendezVous=!0},P.prototype.queryPositions=function(e,t){"string"==typeof e&&(e=[e]),t=t||{};for(var i=[],a=0;a<e.length;a++){var o=this.queryPosition(e[a],t);if(t.requireAll&&!o.length)return[];if(t.seekOverlapWith)for(var n=0;n<o.length;n++)-1===c(i,o[n])&&-1!==c(t.seekOverlapWith,o[n])&&i.push(o[n]);else for(var r=0;r<o.length;r++)-1===c(i,o[r])&&i.push(o[r])}if(t.onlyActive){for(var s=[],l=0;l<i.length;l++)i[l].active&&s.push(i[l]);i=s}return i},P.prototype.parseRequestedPositions=function(e){p(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++)for(var a=e[i].split(","),o=0;o<a.length;o++)for(var n=a[o],r=n.split(" "),s=0;s<r.length;s++){var l=r[s];if(l){var d=l.split(":"),u=d[0];-1===c(t,u)&&t.push(u)}}return t},P.prototype.queryPosition=function(e,t){if("string"!=typeof e)return this.queryPositions(e);e=e.replace(/\\s+[a-z0-9]+:optional_mp/g,"").replace(/\\s+[a-z0-9]+:block_mp/g,"");var i,a=e.split(/ *=> */);if(a&&a.length>=2){for(var o=0;o<a.length-1;o++){var n=a[o];if(!t.ignoreConditions&&!this.queryPosition(n,{positions:t.conditionPositions||t.positions||this.positions}).length)return[]}i=a[a.length-1]}else i=e.replace(/, +/g,",");t=t||{};var r=t.positions||this.positions,s=i.split(" "),l=[];e:for(var d=0;d<s.length;d++){var p=s[d];if(p){for(var u=p.split(","),m=[],h=0;h<u.length;h++){var f=u[h];if(f)for(var v=T(f,t,r,this.globalOptions.isRedirect),g=0;g<v.length;g++)m.push(v[g])}if(!m.length&&!t.seekOverlapWith&&!t.spaceIsOr){l=[];break e}for(var y=0;y<m.length;y++)l.push(m[y])}}var b=[];if(t.seekOverlapWith)for(var w=0;w<l.length;w++)-1===c(b,l[w])&&-1!==c(t.seekOverlapWith,l[w])&&b.push(l[w]);else for(var x=0;x<l.length;x++)-1===c(b,l[x])&&b.push(l[x]);return b},P.prototype.addEvent=function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var a=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),a.apply(e,arguments)}}}else e["on"+t]=i},P.prototype.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},P.prototype.waitTopDomLoaded=function(e){if(!this.master){var t="waitTopDomLoadedCallback"+this.rand();return this.emit("wait-top-dom-loaded",{callbackId:t})}var i=this.getTopmostWindow(),a=i.document,o=this,n=!1,r=function(){return n?void 0:(n=!0,"function"==typeof e?void e.apply(o):"string"==typeof e?void window[e].apply(o):!1)},s=function(){"complete"===a.readyState&&(a.detachEvent("onreadystatechange",s),r())};if("interactive"===a.readyState||"complete"===a.readyState)return void r();if(a.addEventListener?a.addEventListener("DOMContentLoaded",function(){r()},!1):a.all&&!C.opera&&a.attachEvent&&a.attachEvent("onreadystatechange",s),/Safari/i.test(navigator.userAgent))var l=i.setInterval(function(){/loaded|complete/.test(a.readyState)&&(r(),i.clearInterval(l))},50);this.addEvent(i,"load",r,!1)},P.prototype.waitDomLoaded=function X(e){var t=new Date,i=this,a=!1,o=function(){var o=new Date;return o-t>500&&W(X.once?"waitDomLoaded() took "+(o-t)/1e3+"s":"waitDomLoaded() [first] took "+(o-t)/1e3+"s"),a?void 0:(X.once=!0,a=!0,"function"==typeof e?void e.apply(i):"string"==typeof e?void window[e].apply(i):!1)},n=function(){"complete"===O.readyState&&(O.detachEvent("onreadystatechange",n),o())};if(X.once||"interactive"===O.readyState||"complete"===O.readyState)return void o();if(O.addEventListener?O.addEventListener("DOMContentLoaded",function(){o()},!1):O.all&&!C.opera&&O.attachEvent&&O.attachEvent("onreadystatechange",n),/Safari/i.test(navigator.userAgent))var r=i.getTopmostWindow(),s=r.setInterval(function(){/loaded|complete/.test(O.readyState)&&(o(),r.clearInterval(s))},50);this.addEvent(C,"load",o,!1)},P.prototype.waitDomMutable=function(e){var t=this,i=new Date;this.waitDomLoaded(function(){var a=new Date;if(a-i>500&&W("waitDomMutable() took "+(a-i)/1e3+"s"),t.msie&&t.msie<=8&&-1===navigator.userAgent.search("Trident/"))var o=t.getTopmostDocument(),n=t.getTopmostWindow(),r=n.setInterval(function(){"complete"===o.readyState&&(n.clearInterval(r),e.apply(t))},50);else e.apply(t)})},P.prototype.getMarkerForPosition=function(e){var t;return this.loadMarkerForPosition(e,function(e){t=e}),t},P.prototype.loadMarkerForPosition=function(e,t){var i=this;if("function"!=typeof t&&r("cb should be a function"),"string"==typeof e){var a=this.queryPosition(e);if(1!==a.length)return t();e=a[0]}if(e.virtualMarker)return this.isInDOM(e.virtualMarker)?t(e.virtualMarker,e.virtualMarker2||e.virtualMarker):t(e.virtualMarker=e.virtualMarker.ownerDocument.getElementById(e.virtualMarker.id));var o,n,s=function(){var t,a=i.getTopmostWindow(),n=a.document;if(e.virtual.javascript)if(i.master){var r;try{r=a.localStorage.getItem("pixi_test_virtual_js_"+e.positionId)}catch(s){}r||(r=e.virtual.javascript);try{t=new Function("return function(document, window) {\\n"+r+"\\n}")()(n,a)}catch(s){}}else t=document.body;else e.virtual.getContainer&&(t=e.virtual.getContainer());if(t){var l=t.ownerDocument.createElement("div");e.id=l.id="pixiMarkerVirtual"+Math.round(1e16*Math.random()),t.appendChild(l),e.marker=e.virtualMarker=l,o=e.marker}};if(e.virtual&&"override"===e.virtual.type)s();else if(e.id&&e.document){var l=e.document.getElementById(e.id);if(l&&(o=l),e.window||(o=void 0),!o)try{o=e.window.parent.document.getElementById(e.id)}catch(d){o=void 0}if(o){var p=i.getTopmostFiFForElement(o);if(p){p.style.height=0,p.style.display="block",p.style.width=0,(p.id||"").match(/^sas_/)&&(p.className+=" pmIframeContainer",this.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib,t=!0;try{var i=p.ownerDocument,a=i.getElementById("pmStyles");a||(a=i.createElement("style"),a.id="pmStyles",i.getElementsByTagName("head")[0].appendChild(a)),a.sheet.insertRule(".pmIframeContainer: height: 0 !important; width: 0 !important",0),t=!0}catch(o){}t||e.createCSS(".pmIframeContainer","height: 0 !important; width: 0 !important",p.ownerDocument)})),n=e.virtualMarker2=o;var c=p.ownerDocument.createElement("div");c.id="pixiMarkerTopmostIframe"+Math.round(1e16*Math.random()),b(c),p.parentNode.insertBefore(c,p),o=c}e.virtualMarker=o}}else o=e.marker?e.marker:void 0;if(!o&&e.virtual&&s(),!e.decoratedBy||!e.decoratedBy.shouldBeBeforePageContainer(e)){if(e.decoratedBy&&e.decoratedBy.shouldBeBeforeBody(e)){n=o,e.virtualMarker2=n;var u=i.getTopmostDocument(),m=u.getElementsByTagName("body")[0],h=u.createElement("div");b(h),h.className="pmTakeoverFiller";var f=u.createElement("div"),v=u.createElement("div");return f.appendChild(v),f.className="pmBodyPosition pmCentered",v.id="pixiMarkerBody"+Math.round(1e16*Math.random()),m.insertBefore(f,m.firstChild),m.insertBefore(h,f),e.virtualMarker=v,t(v,n)}return t(o)}W("PBPC: Preparing position for injection before page container: "+e.positionId),n=o,e.virtualMarker2=n,this.loadLibrary("sweetlib.js",function(){W("PBPC: SweetLib Loaded for position: "+e.positionId);var a=C.piximedia.SweetLib,o=i.getTopmostDocument();W("PBPC: Loading page container"),a.loadPageContainer({document:o,hints:i.globalOptions.pagecontainerHints},function(o,r){W("PBPC: Page container loaded");var s=o.ownerDocument,l=s.createElement("div"),d=s.createElement("div");d.className="pmMarkerContainer",d.id="pixiMarkerPCContainer"+Math.round(1e16*Math.random()),d.appendChild(l),b(d),d.style.position="absolute",d.style.overflow="hidden";var p=a.getScrollbarWidth();i.cssCalc?(d.style.width="calc(100vw - "+p+"px)",d.style.left="50%",d.style.marginLeft="calc(-50vw + "+p/2+"px)"):(d.style.left="50%",setInterval(function(){var e=a.getViewportSize()[0]-p;parseFloat(d.style.minWidth,10)!==e&&(d.style.minWidth=e+"px",d.style.marginLeft=-(e/2)+"px")},50)),l.id="pixiMarkerPC"+Math.round(1e16*Math.random());var c;for(c=o;c&&"pmFiller"!==c.id;c=c.previousSibling);o.parentNode.insertBefore(d,c||o),e.virtualMarker=l,e.pageContainerWidth=r.width;var u=a.getPropertyValue(o,"clear");if("left"===u||"right"===u||"both"===u){var m=d.ownerDocument.createElement("div");b(m),m.style.clear=u,d.parentElement.insertBefore(m,d)}return t(l,n)})})},P.prototype.loadMarkersForPositions=function(e,t){\nvar i=[],a=this,o=0,n=function(){if(o===e.length)return t(i);var r=e[o];a.loadMarkerForPosition(r,function(e){i.push(e),o++,n()})};n()},P.prototype.rand=function(){return Math.round(1e16*Math.random())},P.prototype.htmlentities=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},P.prototype.injectFriendlyContent=function(e,t,i){C.piximedia.callbacks=C.piximedia.callbacks||{};var a,n,r,s=this,p=e.document,c="pmFif"+Math.round(1e16*Math.random()),u=0,m=0,h="callbackWrite"+c,f="callbackOnLoad"+c,v="";o("Injecting friendly contents "+e.positionId),W("Preparing to inject friendly content: "+e.positionId);var g=t.htmlComments||null;n=new S(this,e,t.iframeOptions||{}),!i||i.iframe||e.hosted||(i.iframe=n,i.iframe.on("remove",function(){o("Ad has been removed from DOM"),s.unloadAd(i)}).on("winlose",function(){o("Ad has been winlost");var e=i.positions;s.unloadAd(i,{hide:!0}),s.activateAd(i,{positions:e})}),i.injectedOnce=!0),C.piximedia.callbacks[f]=function(t,i){W("FiF loaded: "+e.positionId);var r=i.name||"untitled";o("["+r+"] Iframe loaded, checking surface ***",a);var l,d=function(){var e,a,h,f,v=t.body;s.globalOptions.ignoreSiteResizes&&(n.iframe&&parseFloat(n.iframe.width,10)&&parseFloat(n.iframe.width,10)>1&&(e=n.iframe.width,n.iframe.width=""),n.iframe&&parseFloat(n.iframe.height,10)&&parseFloat(n.iframe.height,10)>1&&(a=n.iframe.height,n.iframe.height=""),n.iframe&&n.iframe.style&&parseFloat(n.iframe.style.width,10)&&parseFloat(n.iframe.style.width,10)>1&&(h=n.iframe.style.width,n.iframe.style.width=""),n.iframe&&n.iframe.style&&parseFloat(n.iframe.style.height,10)&&parseFloat(n.iframe.style.height,10)>1&&(f=n.iframe.style.height,n.iframe.style.height=""));var g=v.scrollWidth,y=v.scrollHeight;if(s.globalOptions.ignoreSiteResizes&&(void 0!==e&&(n.iframe.width=e),void 0!==a&&(n.iframe.height=a),void 0!==h&&(n.iframe.style.width=h),void 0!==f&&(n.iframe.style.height=f)),g&&y&&g!==u&&y!==m){o("["+r+"] Found surface: "+g+"x"+y),l&&i.clearInterval(l);var b=(p||O).getElementById(c);o("["+r+"] Found iframe: ",b),n.options.doNotResize?o("["+r+"] (not resizing)"):(o("["+r+"] (resizing)"),n.emit("resize",{width:g,height:y,onlyIfNoSurface:!0}))}else l||(l=i.setInterval(d,10))};d()};var y,w="",x="",k="";if(C.piximedia._.iframes=C.piximedia._.iframes||{},C.piximedia._.iframes[c]=n,g&&(x+="<!-- Pixi Begin Javascript: "+g.label+"-->\\n"),w+="window.inFIF=true; window.inDapIF=true;\\n",w+="window.name="+this.stringify(t.name||"untitled")+";\\n",w+="window.pmFIFID="+this.stringify(c)+";\\n",w+="window.piximedia = parent.piximedia;\\n",w+="window.framedPam = parent.piximedia._.pams["+this.stringify(this.uniqKey)+"];\\n",w+="window.framedIframe = parent.piximedia._.iframes["+this.stringify(c)+"];\\n",w+="window.pmContext = window.framedPam.globalOptions.context || {};\\n",i&&i.injectedOnce&&(w+="window.pmBypassImpression = 1;\\n"),i){var _="ad"+this.rand();C.piximedia._.ads=C.piximedia._.ads||{},C.piximedia._.ads[_]=i,w+="window.framedAd = parent.piximedia._.ads["+this.stringify(_)+"];\\n",w+="window.framedAd.framedDocument=document;window.framedAd.framedWindow=window;\\n"}var I="position"+this.rand();C.piximedia._.positions=C.piximedia._.positions||{},C.piximedia._.positions[I]=e,w+="window.framedPosition = parent.piximedia._.positions["+this.stringify(I)+"];\\n",w+="try{for(var pmk in window.piximedia){if(window.piximedia.hasOwnProperty(pmk)){var s=pmk.toString();if(s.match(/^pmData/)){window[s]=window.piximedia[s];}}}}catch(e){}\\n";for(var E in C)if(E.toString().match(/^pmData/)){var P=this.stringify(E);w+="window["+P+"] = parent["+P+"];\\n"}if(t.javascript?(t.javascript=t.javascript.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),y=this.msie?"<script>"+t.javascript+"</script><script>\\nfunction pmCloseDocument() { setTimeout(function() { document.close(); }, 200); }\\nfunction pmWaitAllScripts(secondTry) { document.pmWaiting = (document.pmWaiting || 0) + 1; var scripts = document.getElementsByTagName(\'script\'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== \'complete\') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? pmCloseDocument(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\\nsetTimeout(pmWaitAllScripts, 1000);\\n</script>":"<script>"+t.javascript+"</script><script>setTimeout(function() { document.close(); }, 200)</script>\\n"):t.src&&(t.src=t.src.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),v+=this.msie?l("<script>\\nfunction pmWaitAllScripts(secondTry) { var scripts = document.getElementsByTagName(\'script\'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== \'complete\') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? document.close(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\\n</script><script src=\\""+t.src.replace(/\\\\/g,"\\\\\\\\").replace(/\'/g,"\\\\\'")+\'" onreadystatechange="pmWaitAllScripts()"></script>\\n\'):d(\'<script src="\'+t.src.replace(/\\\\/g,"\\\\\\\\").replace(/\'/g,"\\\\\'")+\'"></script>\\n<script>setTimeout(function() { document.close(); }, 200); </script>\\n\')),g&&(k+="\\n<!-- Pixi End Javascript: "+g.label+"-->"),y?s.msie&&s.msie>6?(C.piximedia.callbacks[h+"_w"]=l("<head></head><body onload=\'if(parent.piximedia&&parent.piximedia.callbacks){return parent.piximedia.callbacks."+f+"(document,window)}\'>\\n"+x+"<script>"+w+"</script>\\n"+y+k),C.piximedia.callbacks[h]=l("<script>setTimeout(function() { if(parent.piximedia&&parent.piximedia.callbacks)window.location.replace(\'javascript:new Function(parent.piximedia.callbacks."+h+"_w)()\'); }, 0)\\n</script>\\n")):C.piximedia.callbacks[h]=l("<head></head><body onload=\'parent.piximedia.callbacks."+f+"(document,window)\'>\\n"+x+"<script>"+w+"</script>\\n"+y+k):C.piximedia.callbacks[h]=d("<head></head>\\n<body onload=\'parent.piximedia.callbacks."+f+"(document,window)\'>\\n"+x+"<script>"+w+"</script>\\n")+v+d(k+"</body>\\n"),(C.piximedia.topWindowName||"").match(/pmtimepos/)){var A="callbackTimeWrite"+c,T=new Date;C.piximedia.callbacks[A]=function(){W("Iframe wrote back after "+(new Date-T)/1e3+"s")},C.piximedia.callbacks[h]="document.write(\'<script>parent.piximedia.callbacks."+A+"();</script>\');"+C.piximedia.callbacks[h]}return this.msie&&(u=1,m=1),function(i){return e.positionId===s.positionCurrentlyInline&&e.document&&!s.globalOptions.ajax&&!t.container&&(o("Injecting inline position"),e.document.write(\'<div style="\'+q+\'"><iframe allowfullscreen name="\'+t.name+\'" src="javascript:false" class="pmFiF" id="\'+c+\'" style="display: block; background: white; height: \'+m+"px; width: "+u+\'px" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="\'+u+\'" height="\'+m+\'"></iframe></div>\'),a=e.document.getElementById(c))?i(a):void(a||s.waitDomMutable(function(){!function(i){return t.container?i(t.container):void s.loadMarkerForPosition(e,i)}(function(e,l){if(!e){var d=s.getTopmostDocument();e=d.createElement("div");var p="pixiMarkerAuto"+Math.round(1e16*Math.random());e.id=p,d.body.appendChild(e)}var h=e.ownerDocument;if(a=h.createElement("iframe"),a.name=t.name,a.id=c,a.className="pmFiF",a.style.display="block",a.style.background="white",a.style.height=m+"px",a.style.width=u+"px",a.marginWidth=0,a.marginHeight=0,a.frameBorder=0,a.scrolling="no",a.allowFullscreen=!0,a.width=u,a.height=m,"HEAD"===e.nodeName)e.appendChild(a);else{var f=h.createElement("div");if(f.className="pmFiFContainer pmContainer "+s.containerClassName,b(f),t.container?e.appendChild(f):e.parentNode.insertBefore(f,e),g&&(r=f.ownerDocument.createComment("Pixi Iframe Container: "+g.label),f.parentNode.insertBefore(r,f),r=f.ownerDocument.createComment("Pixi Iframe: "+g.label),f.appendChild(r)),f.appendChild(a),(u||m)&&7!==s.msie){f.style.position="absolute",f.className+=" pmZeroSurface";var v=h.defaultView||h.parentWindow,y=0,w=v.setInterval(function(){var e;try{e=f.getBoundingClientRect()}catch(t){return o("couldn\'t fetch getBoundingClientRect()"),void(y++>10&&clearInterval(w))}var i=e.right-e.left,a=e.bottom-e.top;i>1&&a>1&&(f.className.match(/pmZeroSurface/)&&(f.className=f.className.replace(/pmZeroSurface/,""),f.style.position="relative"),v.clearInterval(w))},50)}}return l&&s.watchForRemoval(l,function(){n.emit("remove")}),i(a)})}))}(function(t){t.onerror=function(){n.emit("error",arguments)};var i,a=s.getTopmostDocument();try{i=t.contentWindow.document}catch(o){s.debug("Couldn\'t acess content document, probably because of mismatching document.domain");try{t.src="javascript:document.write(\'<head><script>document.domain=\\""+a.domain+"\\";</script></head><body></body>\')",i=t.contentDocument||t.contentWindow.document}catch(o){try{s.warn("Couldn\'t still access document, probably because of still mismatching document.domain"),t.src="javascript:document.write(\'<head><script>document.domain=\\""+t.ownerDocument.domain+"\\";</script></head><body></body>\')",i=t.contentDocument||t.contentWindow.document}catch(o){s.error("Couldn\'t REALLY access document :-(")}}i=t.contentDocument||t.contentWindow.document}W("Injecting friendly content: "+e.positionId);for(var r="",l=0;1e3>l;l++)r+="<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->\\n";if(s.msie)i.open().write("<script>window.location.replace(\\"javascript:var x;try{x=parent.piximedia.callbacks;}catch(e){document.domain=\'"+a.domain+"\';}new Function(parent.piximedia.callbacks."+h+\')()")</script>\');else{var d;if((C.piximedia.topWindowName||"").match(/pmtimepos/)){var p="callbackTime"+c,u=new Date;C.piximedia.callbacks[p]=function(){W("Iframe called back after "+(new Date-u)/1e3+"s")},d="parent.piximedia.callbacks."+p+"();"}else d="";var m="callbackSetiframe"+c;C.piximedia.callbacks[m]=function(){W("Setting iframe"),n.setIframe(t)};var f="parent.piximedia.callbacks."+m+"();";i.open().write("<html><body><script>"+d+f+"new Function(parent.piximedia.callbacks."+h+")()</script>"+r+"</body></html>")}n.iframe||(W("*** Iframe unknown, setting ***"),n.setIframe(t))}),i&&!i.passback&&(n.on("remove",function(){if(!n.doNotSendPixels){if(!n.sentRemoved){n.sentRemoved=!0;var t=e.registeredAt?(new Date-e.registeredAt)/1e3:void 0;e.loadEvent("JS:REMOVED",{detail:e.positionId,duration:t})}i.shouldBeBeforePageContainer(e)&&this.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.setBodyBackgroundColor({color:null}),e.moveTopOfPageContainer(e.getPageContainer(),0)})}}),n.on("winlose",function D(){D.ids=D.ids||{},n.doNotSendPixels||D.ids[e.positionId]||(D.ids[e.positionId]=!0,e.loadEvent("JS:WINLOSE",{detail:e.positionId}),setTimeout(function(){D.ids[e.positionId]=!1},1e4))})),n},x.prototype.getAllVisibilityForPixiPositionId=function(e){if(!this.visibility)return[];var t={};t[e]={positionId:{}};for(var i in this.visibility)if(this.visibility.hasOwnProperty(i)&&this.pam.queryPositions(i,t).length)return this.visibility[i];return[]},x.prototype.loadLibrary=function(e,t){if((C.piximedia.topWindowName||"").match(/pmtimepos/)){var i=new Date,a=t;t=function(){var t=new Date;t-i>50&&W("loadLibrary("+JSON.stringify(e)+") took "+(t-i)/1e3+"s"),a.apply(this,arguments)}}return p(e)?this.loadLibraries(e,t):void this.pam.loadLibrary(this.args[e]||e,t)},x.prototype.loadLibraries=function(e,t){var i=this,a=function(){try{return t.call(i)}catch(e){return void r("Caught exception when calling loadLibraries() callback: "+e)}},o=e.length;if(!o)return a();for(var n=function(){return--o?void 0:a()},s=0;s<e.length;s++)this.loadLibrary(e[s],n)},x.prototype.shouldHostPosition=function(e){var t=this.pam.getTopmostWindow();return"always-host"!==t.name?!1:!0},x.prototype.shouldBeBeforeBody=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_body)return!1;var i=this.positions_before_body;"string"==typeof i&&(i=i.split(/ +/));for(var a=0;a<i.length;a++){var o=i[a];for(var n in t)if(t.hasOwnProperty(n)){var r=new RegExp("\\\\b"+n+"\\\\b","g");o=o.replace(r,t[n])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(o,{positions:s}).length)return!0}return!1},x.prototype.shouldBeBeforePageContainer=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_page_container)return!1;var i=this.positions_before_page_container;"string"==typeof i&&(i=i.split(/ +/));for(var a=0;a<i.length;a++){var o=i[a];for(var n in t)if(t.hasOwnProperty(n)){var r=new RegExp("\\\\b"+n+"\\\\b","g");o=o.replace(r,t[n])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(o,{positions:s}).length)return!0}return!1},P.prototype.activateAd=function(e,t){var i=this,a=this.canWriteCookies();t=t||{},o("Activating ad: ",e.adId+"/"+e.creativeId);var n=new Date;if(e.active&&o("Ad was already active"),i.master&&(i._adImpressionPixelSent=i._adImpressionPixelSent||{},i._adImpressionPixelSent[e.adId]||(i._adImpressionPixelSent[e.adId]=!0,e.impressionPixel&&i.loadPixel(e.impressionPixel))),e.active=!e.alwaysAvailable,!e.passback){if(i.numberOfActiveAds=i.numberOfActiveAds||0,i.numberOfActiveAds++,i.globalOptions.enableActiveAdsCapping&&void 0!==i.globalOptions.numberOfActiveAdsCapping&&i.globalOptions.numberOfActiveAdsCapping>=i.numberOfActiveAds){o("Deactivating other ads because capping was met");for(var l=0;l<i.availableAds.length;l++){var d=i.availableAds[l];d===e||d.passback||d.active||(d.require={positions:["disabled-ad-capping"]},d.disabledBecauseAdCapping=!0,d.disabledBecauseAdCappingLog="active-ads-capping")}}if(i.globalOptions.enableTvCodeProtection&&e.tv_code){o("Deactivating other ads with code "+e.tv_code);for(var c=0;c<i.availableAds.length;c++){var u=i.availableAds[c];u===e||u.passback||u.active||u.tv_code!==e.tv_code||u.campaignId===e.campaignId||(u.require={positions:["disabled-tv-code"]},u.disabledBecauseAdCapping=!0,u.disabledBecauseAdCappingLog="tv-code")}}i.globalOptions.keepAdringForRTA||a&&(O.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),a&&(O.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),this.globalOptions.pixiAdrName&&(i.globalOptions.keepAdringForRTA||a&&(O.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",O.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))}if(e.active&&e.use&&e.use.positions&&i.on("hello",function(t){var a={};a[t.positionId]=t,i.queryPositions(e.use.positions,{spaceIsOr:!0,positions:a}).length&&(t.requested=!0,t.requestedBy=e)}),t.positions){e.positions=t.positions;for(var m=0;m<e.positions.length;m++){var h=e.positions[m];this.positions.hasOwnProperty(h.positionId)||(this.positions[h.positionId]=h)}}else{if(e.positions=[],e.require&&e.require.positions){var f=this.queryPositions(e.require.positions,{activeAndNotUsed:!0,requireAll:!0});o("Found "+f.length+" required position"+(1===f.length?"":"s"));for(var v=0;v<f.length&&!e.disabled;v++){var g=f[v];g.active&&(o("Associating required position "+g.positionId),g.used=!0,g.decoratedBy=e,g.decoratedAt=n,g.justUsed&&g.justUsed(),e.positions.push(g))}}if(e.use&&e.use.positions){var b=this.queryPositions(e.use.positions,{activeAndNotUsed:!0,spaceIsOr:!0});o("Found "+b.length+" used position"+(1===b.length?"":"s"));for(var w=0;w<b.length&&!e.disabled;w++){var x=b[w];x.active&&(o("Associating used position "+b[w]),e.positions.push(x))}}}for(var k=0;k<e.positions.length;k++)if(e.positions[k].used=!0,e.positions[k].decoratedBy=e,e.positions[k].decoratedAt=n,e.positions[k].justUsed&&e.positions[k].justUsed(),!e.positions[k].implicit&&!e.passback&&this.mode.match(/^alliance/)){var _=e.positions[k];this.master?void 0===_.injectionIndex&&_.loadEvent("JS:POSITION_USED",{detail:_.positionId}):_.loadEvent("JS:POSITION_USED:HOSTED",{detail:_.positionId})}if(this.master){var S=function(e){if(e){"string"==typeof e&&i.loadPixel(e);for(var t=0;t<e.length;t++)i.loadPixel(e[t])}};this.trackingAdPixelsCalled[e.adId]||(this.trackingAdPixelsCalled[e.adId]=!0,e.passback||e.loadEvent("JS:ACTIVATE:AD",{}),e.args&&e.args["tracking.ad"]&&e.args["tracking.ad"].pixelUrl&&S(e.args["tracking.ad"].pixelUrl)),this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]||(this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]=!0,e.passback||e.loadEvent("JS:ACTIVATE:CREATIVE",{}),e.args&&e.args["tracking.creative"]&&e.args["tracking.creative"].pixelUrl&&S(e.args["tracking.creative"].pixelUrl))}!function(t){if(!i.master)return t();for(var a=e.args&&e.args.assets&&e.args.assets.pool?e.args.assets.pool:[],o=0,n=function(){return o--,o?void 0:t()},r=function(t){var a=!1,r=!1,s=function(){return a=!0,n()};t.name.match(/^vast/)&&(r=!0,setTimeout(function(){var a=t.uri,o=new window.XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){"object"!=typeof t.metadata&&(t.metadata={}),t.metadata.vast=y(o.responseXML);try{var a=t.metadata.vast.Ad_value.InLine_value.Impression;e.loadEvent("JS:IMPRESSION:VAST_LOADED",{c3:"asset:"+t.id});for(var n=0;n<a.length;n++){var r=a[n].value;i.loadPixel(r)}}catch(l){}return s()}},o.open("GET",a,!0),o.send()},0)),r&&(setTimeout(function(){a||e.loadEvent("COULD_NOT_LOAD_ASSET",{c1:t.id})},1e4),o++)},s=0;s<a.length;s++)r(a[s]);return o?void 0:t()}(function(){W("Loading markers"),i.loadMarkersForPositions(e.positions,function(t){W("Markers loaded");try{if((C.piximedia.topWindowName||"").match(/pmdebugactivatead/)&&new Function("debugger")(),e.tag)e.tag.apply(i,t);else if(e.fif){var a=e.positions[0];if(i.master){var l=[],d=null,c=!!e.main_js_in_head,u=!!e.main_js_always_in_head;if(i.somePositionsAreAlwaysHosted||e.hosted_positions&&e.hosted_positions.length){e.shouldHostPosition(a)?l.push(a):d=a,e.on("hello",function(t){return e.shouldHostPosition(t)?(t.decoratedBy=e,t.decoratedAt=t.decoratedAt||new Date,i.hostPosition(e,t),!1):void 0});for(var m=1;m<e.positions.length;m++){var h=e.positions[m];e.shouldHostPosition(h)?l.push(h):d||(d=h)}}else d=a;for(var f=0;f<l.length;f++){var v=l[f];v.decoratedBy=e,v.decoratedAt=new Date,i.hostPosition(e,v)}var g=!1,y=!1;if(e.use&&e.use.positions&&p(e.use.positions)&&(g=e.use.positions.length),e.require&&e.require.positions&&e.require.positions&&p(e.require.positions))for(var b=0;b<e.require.positions.length;b++){if(b>=1){y=!0;break}var w=e.require.positions[b];if("string"==typeof w&&w.match(/ /)){y=!0;break}}if(d||u||e.use&&e.use.positions||g||y){o("Injecting master ad");var x=e.fif;if((C.piximedia.topWindowName||"").match(/pmdebugad/)&&(x.javascript="debugger;\\n"+x.javascript),!d||c||u||e.use&&e.use.positions){var k=i.getTopmostDocument();i.injectFriendlyContent({positionId:"head",document:k,marker:k.head},x,e)}else e.masterPosition=d||a,i.injectFriendlyContent(e.masterPosition,x,e)}}else i.injectFriendlyContent(a,e.fif,e)}else if(e.passback){e.active=!1;var _={htmlComments:{label:"Passback for "+(e.use||{}).positions}},S=i.globalOptions.passbackMode;switch(e.passback.type){case"javascript":case"inline":case"redirect":o("Activating JavaScript passback");var I;switch(I="var callPbSrc;if(window.framedPosition.passbackSrc){\\n",I+="  callPbSrc=function(){\\n",I+="    window.framedPosition.loadEvent(\'JS:PASSBACK_CALL\');\\n",I+="    var s = document.createElement(\'script\'); s.src = window.framedPosition.passbackSrc; s.appendChild(document.createTextNode(window.framedPosition.inlineScript)); document.write(s.outerHTML); \\n",I+="  };\\n",I+="}\\n",e.passback.type){case"javascript":I+=e.passback.contents?"var platformScript = "+JSON.stringify(e.passback.contents).replace(/script/g,\'scr"+"ipt\')+";\\n":"var platformScript;\\n";break;case"redirect":I+=e.passback.contents?"var platformScript = "+JSON.stringify("document.write(\'<script src=\\""+e.passback.contents+"\\"></script>\');").replace(/script/g,\'scr"+"ipt\')+";\\n":"var platformScript;\\n";break;default:I+="var platformScript;\\n"}switch(I+="var passbackScript, inlineScript = window.framedPosition.inlineScript, hasInlineScript = (inlineScript||\'\').replace(/s/g, \'\').length;\\n",S||"dynamic,platform"){case"platform":I+="passbackScript = platformScript;\\n";break;case"platform,dynamic":I+="passbackScript = platformScript || (callPbSrc? callPbSrc(): inlineScript);\\n";break;case"dynamic,platform":I+="passbackScript = callPbSrc? callPbSrc(): (hasInlineScript? inlineScript: platformScript);\\n"}I+="if(passbackScript) {\\n",I+="  window.framedPosition.loadEvent(\'JS:PASSBACK_CALL\');\\n",I+="  new Function(passbackScript)();\\n",I+="}\\n";var E;E="for(var k in parent){ if((!parent.hasOwnProperty || parent.hasOwnProperty(k)) && k.match(/^(sas|Smart|weborama_url_backup)/) && !k.match(/^(sas_ajax)$/)){ window[k] = parent[k]; } }\\n";try{(top.window.name||"").match(/pmdebugpassback/)&&(E+="debugger;\\n")}catch(P){}_.javascript=E+I;break;default:_=void 0}if(_)for(var A=function(e,t,a){var n=i.injectFriendlyContent(e,t,a);n.iframe&&n.iframe.style&&(n.iframe.style.marginLeft="auto",n.iframe.style.marginRight="auto"),n.on("winlose",function(){o("Passback has been winlost"),e.injectionIndex=(e.injectionIndex||0)+1,i.loadEvent("JS:PASSBACK_WINLOST",void 0,void 0,{detail:e.positionId});var r=n.iframe.ownerDocument.getElementById(n.iframe.id);r&&r.parentNode.removeChild(r),A(e,t,a)}),n.on("error",function(){s("Passback error",arguments),i.loadEvent("JS:PASSBACK_ERROR",void 0,void 0,{detail:e.positionId});try{var t=n.iframe.contentDocument.createComment("Passback Failed To Load (Error)");n.iframe.contentDocument.body.appendChild(t),t=n.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Error)"),n.iframe.parentNode.insertBefore(t,n.iframe),t=n.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Error)"),n.iframe.parentNode.parentNode.insertBefore(t,n.iframe.parentNode)}catch(a){}});var r=setTimeout(function(){s("Passback timeout"),a.emit("passback-timeout"),i.loadEvent("JS:PASSBACK_TIMEOUT",void 0,void 0,{detail:e.positionId});try{var t=n.iframe.contentDocument.createComment("Passback Failed To Load (Timeout)");n.iframe.contentDocument.body.appendChild(t),t=n.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Timeout)"),n.iframe.parentNode.insertBefore(t,n.iframe),t=n.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Timeout)"),n.iframe.parentNode.parentNode.insertBefore(t,n.iframe.parentNode)}catch(o){}},1e4);n.on("resize",function(t){t&&t.width>1&&t.height>1&&(i.loadEvent("JS:PASSBACK_OK",void 0,void 0,{detail:e.positionId}),clearTimeout(r))})},T=0;T<e.positions.length;T++){var O=e.positions[T],D=O.positionId;if(i.scheduledRendezVous){var N=n-i.firstPositionRegisteredAt,F=3*(i.globalOptions.rendezvous_duration||L),j=Math.round(10*N/F);D+=0>j?":0":j>10?":MORE":":"+j}var M=C.piximedia.request_pos_sp[i.siteId][i.placementId],R=[];for(var B in M)M.hasOwnProperty(B)&&R.push(B);O.implicit||(D+=":explicit"),D+=":pos="+R.join(","),i.scheduledRendezVous&&i.performedRendezVous&&(D+=":rv"),i.loadEvent("JS:PASSBACK",void 0,void 0,{detail:D}),A(O,_,e)}}}catch(P){r("Could not activate ad: "+P)}e.timetracker&&e.timetracker.global&&i.master&&i.loadLibrary("sweetlib.js",function(){e.timetrackerGlobal||(e.timetrackerGlobal=C.piximedia.SweetLib.setTimer("GLOBAL",function(t,i){e.loadEvent("TIMETRACKER::"+t,{duration:i})}),e.timetrackerGlobal.start())});var U;try{var V=C.localStorage?C.localStorage.getItem("pmCustomFieldsCSS"):"";if(V){var q=JSON.parse(V);q&&q.css&&(U=q.css)}}catch(P){}!U&&e&&e.args&&(U=e.args.css),U&&i.master&&i.loadLibrary("sweetlib.js",function(){var e=i.getTopmostDocument();if(p(U))for(var t=0;t<U.length;t++)C.piximedia.SweetLib.createCSSs(U[t],e);else C.piximedia.SweetLib.createCSSs(U,e)})})})},P.prototype.unloadPosition=function(e){o("Unloading position",e);for(var t=0;t<(e.iframes||[]).length;t++){var i=e.iframes[t];o("Unloading iframe"),i.unload()}var a=e.decoratedBy;a&&(a.positions=u(a.positions,"positionId",e.positionId)),delete this.positions[e.positionId]},P.prototype.unloadAd=function(e,t){if(o("Unloading ad",e),t=t||{},e.positions)for(var i=0;i<e.positions.length;i++){for(var a=e.positions[i],n=0;n<(a.iframes||[]).length;n++){var r=a.iframes[n];o("Unloading iframe"),r.unload({hide:t.hide})}a.iframes=[],a.decoratedAt=a.decoratedBy=void 0,a.used=!1,delete this.positions[a.positionId]}e.iframe&&(e.iframe.unload({hide:t.hide}),e.iframe=void 0),e.purgeEventEmitter(),e.active=!1},P.prototype.hostPosition=function(e,t){var i=this;t.hosted=!0,o("Prepare to host position "+t.positionId,t),this.waitDomMutable(function(){o("DOM is mutable for hosted position",t);var a,n;n=function(e,t){var i=w.getID(e);if(i)try{a.fireEventToID(i,t,function(){},function(){})}catch(o){r("Caught exc, maybe destroyed rpc channel",o)}},i.globalEmitter.on("event",n),o("Injecting hosted position "+t.positionId,t,e.positions),e.injectPosition(t,{iframeOptions:{doNotResize:!0}},function(r,s){o("Loading marker for hosted position",t),i.loadMarkerForPosition(t,function(r,l){if(!r){var d=i.getTopmostDocument();r=d.createElement("div");var p="pixiMarkerHosted"+Math.round(1e16*Math.random());r.id=p,d.body.appendChild(r)}if(o("Found marker for position "+t.positionId,r),a){o("Destroying dangling RPC channel");try{a.destroy()}catch(c){}}for(var u,m=r.childNodes,h=new S(i,t),f=0;f<m.length;f++)if(m[f].className.indexOf("pmContainer")>=0){u=m[f];for(var v=u.getElementsByTagName("iframe"),g=0;g<v.length;g++){var y=v[g];i.winlostIframeIds[y.id]=!0}u.parentNode.removeChild(u);break}u=r.ownerDocument.createElement("div"),u.className="pmHostedContainer pmContainer "+i.containerClassName,b(u),u.style.fontSize=0,r.appendChild(u);var w=u.getElementsByTagName("iframe");if(w.length)for(var x=0;x<w.length;x++){var k=w[x];i.winlostIframeIds[k.id]=!0,u.removeChild(k)}var _,I,E;I=u.ownerDocument,E=I.defaultView||I.parentWindow,E._piximedia=E._piximedia||{},function(e){return E._piximedia.easyXDM||(s.piximedia.injectEasyXDM(E,I,i.getTopmostWindow().location),E._piximedia.easyXDM=E.easyXDM.noConflict("_piximedia")),e()}(function(){_=E._piximedia.easyXDM,o("Creating RPC channel"),a=new _.Rpc({container:u,hash:!0,props:{style:{width:i.msie?1:0,height:i.msie?1:0},allowfullscreen:"allowfullscreen",scrolling:"no",width:i.msie?1:0,height:i.msie?1:0},remote:j,onReady:function(){o("master is ready")}},{local:{getConfig:function(){for(var a=[],n=[],r=0;r<i.allAvailableAds.length;r++)if(e.uniqid===i.allAvailableAds[r].uniqid){var s=i.allAvailableAds[r];s.injectedOnce=e.main_js_always_in_head||e.injectedOnce,a=[s];break}e.injectedOnce=!0;var l={},d={};for(var p in i.positions)if(i.positions.hasOwnProperty(p)){var c=i.positions[p];c.clickUrl&&(l[p]=c.clickUrl),c.advertiserClickUrl&&(d[p]=c.advertiserClickUrl)}var u={positionId:t.positionId,pixiPositionId:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId),decoratedAt:t.decoratedAt,clickUrl:t.clickUrl,implicit:t.implicit,injectionIndex:t.injectionIndex,pageContainerWidth:t.pageContainerWidth,advertiserClickUrl:t.advertiserClickUrl,advertiserClickUrls:t.advertiserClickUrls,allAdvertiserClickUrls:d,allClickUrls:l};o("Config position: ",u),n.push(u);var m={siteId:i.siteId,placementId:i.placementId,globalOptions:i.globalOptions,allAvailableAds:a,positions:n,documentHasFocus:i.documentHasFocus};return m},fireEventToID:function(e,t,a,o){try{return i.globalEmitter.fireEventToID(e,t,{exceptTo:n}),a()}catch(r){return o()}}},remote:{fireEventToID:{}}});var r=function(){var e=u.getElementsByTagName("iframe");if(!e.length)return setTimeout(r,10);var t=e[0];o("Found RPC iframe",t),h.setIframe(t),l&&i.watchForRemoval(l,function(){o("Secondary marker has been removed"),h.emit("remove")})};o("Looking for RPC iframe"),r()})})})})},P.prototype.hostRoom=function(e,t,i){if(!this.master)return r("PAM.prototype.hostRoom() might only be called on the master PAM");t=t||{},o("Hosting room "+e),W("Hosting room "+e);var a="room."+e,n={siteId:this.siteId,placementId:this.placementId,positionId:a,ajax:!0,implicit:!0,virtual:{getContainer:i}};for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);this.hello(n)},P.prototype.getTopmostFiFForElement=function(e){var t=e.ownerDocument,i=t.defaultView||t.parentWindow,a=this.getTopmostWindow();if(!i.inFIF&&!i.inDapIF&&!i.inDapMgrIf)return void 0;for(var o,n="pmBeacon"+this.rand(),r=i.name,s=a.document.getElementsByTagName("iframe"),l=0;l<s.length;l++){var d=s[l];if(d.contentWindow&&d.contentWindow===n){o=d;break}}if(!o){i.name=n;for(var p=0;p<s.length;p++){var c=s[p];try{if(c.contentWindow&&c.contentWindow.name===n){o=c;break}}catch(u){}}if(!o)e:for(var m=0;m<s.length;m++){var h=s[m];try{if(h.contentWindow&&(h.contentWindow.inFIF||h.contentWindow.inDapIF||h.contentWindow.inDapMgrIf))for(var f=h.contentWindow.document,v=f.getElementsByTagName("iframe"),g=0;g<v.lenght;g++){var y=v[g];try{if(y.contentWindow&&y.contentWindow.name===n){o=h;break e}}catch(u){}}}catch(u){}}i.name=r}return o},P.prototype.checkTopDomain=function(){var e,t=this;try{e=top.pmOriginalDomain}catch(i){return}if(e){var a=function(){var i;try{i=top.document.domain}catch(o){return r("Top document changed from "+e+" to unknown value!"),void t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:"EXCEPTION"})}i!==e?(r("Top document changed from "+e+" to "+i+"!"),t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:i})):setTimeout(a,1e4)};setTimeout(a,1e4)}},P.prototype.debug=function(){return arguments.length?o.apply(this,arguments):(B=!0,void(C.console&&C.console.log&&C.console.log(i.get().join("\\n"))))},P.prototype.clearCSS=function(e){b(e)},P.prototype.createOpaqueAnimation=function $(e,t,i){var a=this;return $.prefix||($.prefix="animation-"+a.rand()+"-",$.seq=0),i||(i=$.prefix+$.seq++),a.master?a.loadLibrary("sweetlib.js",function(){var o=a.getTopmostDocument(),n=C.piximedia.SweetLib.querySelector(e,o);a.animations[i]=C.piximedia.SweetLib.animate(n,t)}):a.emit("create-opaque-animation",e,t,i),i},P.prototype.createAnimation=function(e,t){var i=this,a=i.createOpaqueAnimation(e,t);return{play:function(e){i.playOpaqueAnimation(a,e)},reverse:function(e){i.reverseOpaqueAnimation(a,e)},clear:function(){i.clearOpaqueAnimation(a)}}},P.prototype.playOpaqueAnimation=function(e,t,i){var a=this;i||(i="fire-"+a.rand());var o="play-opaque-animation:callback:"+i;if(a.master){var n=a.animations[e];if(!n)return r("Could not find animation "+e);n.play(function(){a.emit(o)})}else a.on(o,function s(){a.removeListener(o,s),t(e)}),a.emit("play-opaque-animation",e,void 0,i)},P.prototype.reverseOpaqueAnimation=function(e,t,i){var a=this;i||(i="fire-"+a.rand());var o="reverse-opaque-animation:callback:"+i;if(a.master){var n=a.animations[e];if(!n)return r("Could not find animation "+e);n.reverse(function(){a.emit(o)})}else a.on(o,function s(){a.removeListener(o,s),t(e)}),a.emit("reverse-opaque-animation",e,void 0,i)},P.prototype.clearOpaqueAnimation=function(e){var t=this;if(t.master){var i=t.animations[e];if(!i)return r("Could not find animation "+e);i.clear()}else t.emit("clear-opaque-animation",e)},P.prototype.listBroadcastPm=function(e,t){var i=C.XMLHttpRequest?new C.XMLHttpRequest:void 0;if(e.match(/\\/$/)||(e+="/"),"withCredentials"in i)i.open("GET","//"+R+"/list-of-broadcast.pm/"+e+"json",!0),i.onreadystatechange=function(){return 4===i.readyState?t(200!==i.status?{error:"failed: "+i.responseText}:JSON.parse(i.responseText)):void 0},i.send(null);else{var a="listbroadcastpm"+this.rand(),o=C.document.getElementsByTagName("head")[0],n=C.document.createElement("script");n.async=!0,n.src="//"+R+"/list-of-broadcast.pm/"+e+"jsonp=piximedia._."+encodeURIComponent(a),o.appendChild(n),C.piximedia._[a]=t}},P.prototype.startNavigationTracking=function(e){var t=this;return t.master?void t.loadLibrary("sweetlib.js",function(){\nvar t=C.piximedia.SweetLib;t.startNavigationTracking(e)}):t.emit("start-navigation-tracking",e)},P.prototype.bindVisibilityTracker=function(e,t,i,a){var o=this;return a||(a="fire-"+o.rand()),o.master?void o.loadLibrary("sweetlib.js",function(){var n=C.piximedia.SweetLib,r={object:n.querySelector(e)};for(var s in t)if(t.hasOwnProperty(s))switch(s){case"callback":break;default:r[s]=t[s]}n.bindVisibilityTracker(r,function(e){return i?i(e):void o.emit(a,e)})}):(o.on(a,i),o.emit("bind-visibility-tracker",e,t,void 0,a))},P.upscaleAssetQuery=function(e){if("object"==typeof e.match)return e;"string"==typeof e&&"{"===e.substr(0,1)&&(e=JSON.parse(e));var t=function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t],a=[];if("object"==typeof i&&!p(i)){var o=void 0;for(var n in i)i.hasOwnProperty(n)&&("_default"===n?o=i[n]:(a.push(n),a=a.concat(i[n])));o&&(a=a.concat(o)),e[t]=a}}return e},i=function(e){switch(e.length){case 5:break;case 4:e=[e[0],e[1],null,e[2],e[3]];break;case 3:e=[null,e[0],e[1],e[2],null];break;case 2:e=[null,e[0],null,e[1],null];break;case 1:e=[null,null,e[0],null,null];break;default:e=e}for(var t=0;t<e.length;t++)null!==e[t]&&e[t].toString().match(/^[0-9.]+$/)&&(e[t]=null===e[t]?null:parseFloat(e[t],10));for(var i=0;i<e.length;i+=5)i+5<e.length&&i++,null===e[i+0]&&(null!==e[i+1]?e[i+0]=e[i+1]:e[i+0]=e[i+2]),null===e[i+4]&&(null!==e[i+3]?e[i+4]=e[i+3]:e[i+4]=e[i+2]);return e},a=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e,10);return t.toString()===e?t:e};if("string"==typeof e.require){var o=P.upscaleAssetQuery(e.require);if(e.use){var n=P.upscaleAssetQuery(e.require).match.grabAllAssets;o.match.grabSomeAssets=[];for(var r in n)n.hasOwnProperty(r)&&(o.match.grabSomeAssets=o.match.grabSomeAssets.concat(n[r].grabSomeAssets))}return o}if("string"==typeof e){for(var s=e.replace(/,\\s+/g,",").split(/\\s+/),l={grabAllAssets:[]},d=0;d<s.length;d++){var c=s[d],u=c.split(","),m={grabSomeAssets:[]};l.grabAllAssets.push(m);for(var h=0;h<u.length;h++){var f=u[h],v={and:[]};m.grabSomeAssets.push(v);var g=f.split("."),y=g.shift();y&&v.and.push([{property:"type"},"==",y]);for(var b in g)if(g.hasOwnProperty(b)){var w=g[b],x=w.match(/^[0-9]+x[0-9]+$/);if(x)v.and.push([{property:"surface"},"==",w]);else if(x=w.match(/^([a-z_]+)\\*(.*)$/))v.and.push([{property:x[1]},"*",i(x[2].split("*"))]);else if(x=w.match(/^([a-z_]+)(=|<=|<|>=|>|<>|!=)(.*)$/)){var k=x[1],_=x[2],S=x[3];"provides"===k?v.and.push({property:k+"_"+S}):v.and.push([{property:k},_,a(S)])}else v.and.push({property:w})}}}e={match:l}}else if("object"==typeof e){var I=Object.keys(e)[0];if(void 0===I)throw new Error("Invalid query (1)");var E=e[I];if(void 0===E)throw new Error("Invalid query (2)");if(E.desc||E.requires){var A={grabAllAssets:[],grabMatchingAssets:[]};for(var T in e)if(e.hasOwnProperty(T)){var C=e[T];a(C.mandatory)?A.grabAllAssets.push({grabName:T,value:P.upscaleAssetQuery(t(C.requires))}):A.grabMatchingAssets.push({grabName:T,value:P.upscaleAssetQuery(t(C.requires))})}e={match:A}}else{var O={and:[]},D={grabAllAssets:[O]},N=function(e,t){var o=function(e){return e};switch(e){case"weight":o=function(e){return null===e?e:1024*e},e="file_size";break;case"iframable":e="iframeable"}if(p(t)){for(var n=[],r=0;r<t.length;r++)n[r]="string"==typeof t[r]?t[r]:o(t[r]);return[{property:e},"*",i(n)]}if("string"!=typeof t)return[{property:e},"==",a(t)];var s=t.substr(t.length-1,1),l=t.substr(0,t.length-1);switch(s){case"+":case"-":case"!":switch(t=o(a(l)),s){case"+":return[{property:e},">=",t];case"-":return[{property:e},"<=",t];case"!":return[{property:e},"!==",t]}break;default:return[{property:e},"==",o(a(t))]}};e=t(e);for(var F in e)if(e.hasOwnProperty(F)){var L=e[F];if("mandatory"===F)continue;"provides"===F?O.and.push(N("provides_"+L,!0)):""!==L&&O.and.push(N(F,L))}e={match:D}}}return e},P.assetsMatchQuery=function(e,t,i){i=i||{};var a,o,n,r,s=i.trailMissing||[],l={},d=i.assetsUsedOnce||{},u=i.assetsUsedByName||{},m={},h=[],f={},v=[],g=function(e){a=e,a.name===a._splitname?(o=a._classes,n=a._asset_type):(o=a.name.split(".").splice(1),n=a.name.split(".")[0],a._classes=o,a._asset_type=n,a._splitname=a.name),a.metadataObject?r=a.metadataObject||{}:(r=a.metadata||{},"string"==typeof r&&(r=JSON.parse(r)||{},a.metadataObject=r))},y=function(e){if(e.length<=5)return e;for(var t=0;t<e.length;t+=6){if(t+5===e.length)return e.slice(t);if(e[t]===a._asset_type)return e.slice(t+1,5)}return[null,null,null,null,null]},b=function(e){switch(e){case"asset_id":return a.asset_id;case"type":return n;case"bytes":case"file_size":return a.file_size;case"ratio":return a.metadataObject&&a.metadataObject.width&&a.metadataObject.height?a.metadataObject.width/a.metadataObject.height:void 0;case"provides_contents":return a._classes.indexOf("provides_contents")>=0||"video"===a._asset_type||"vast"===a._asset_type||"url"===a._asset_type&&a._classes.indexOf("redirect")>=0||"image"===a._asset_type||"html5"===a._asset_type;case"provides_url":return a._classes.indexOf("provides_url")>=0||"url"===a._asset_type&&a._classes.indexOf("advertiser")>=0||"vast"===a._asset_type;case"provides_animation":return a._classes.indexOf("provides_animation")>=0||"image"===a._asset_type||"html5"===a._asset_type;case"provides_movie":return a._classes.indexOf("provides_movie")>=0||"video"===a._asset_type||"vast"===a._asset_type;case"site":return a._classes.indexOf("provides_site")>=0||"url"===a._asset_type;default:if(!a)return void 0;var t=r.tags;return t&&c(t,e)>=0?!0:r[e]}},w=function(e){var t=e.id||e.asset_id,i=v.length&&v[v.length-1]?v[v.length-1]:void 0;i&&(u[i]=u[i]||[],-1===u[i].indexOf(t)&&u[i].push(t)),d[t]=!0;for(var a=0;a<v.length;a++)i=v[a],f[i]=f[i]||[],m[i+":"+t]||(m[i+":"+t]=!0,f[i].push(e));m[t]||(m[t]=!0,h.push(e))},x=function(e){e=e.grabName&&e.value?e.value:e,e.match&&(e=e.match);var t=JSON.stringify(e);l[t]||(l[t]=!0,s.push(JSON.parse(t)))},k=function(e){if(!e)return e;e.value&&(e=e.value),"object"==typeof e&&e.match&&(e=e.match);var o,n,r,s,l,d,c,u,m;if((!a&&!e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets)&&(e={grabAllAssets:[e]}),e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets){for(var h=e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets,f=[],_=!1,S=h.length?!0:!1,I=0;I<h.length;I++){for(var E=h[I],P=!1,A=0;A<t.length;A++){g(t[A]);var T;if(E.and){T=!0;e:do for(c=0;c<E.and.length;c++)if(u=E.and[c],u&&void 0!==u.length&&p(u)){if(m=void 0,n=u[0],o=n&&n.property?b(n.property):k(n),1===u.length)m=o;else if(l=u[1],d=u[2],"*"===l)d=y(d),r=d[0],s=d[4],m=void 0===o?!1:r&&r>o?!1:s&&o>s?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=k(u[2])}switch(l){case"<":m=d>o;break;case">":m=o>d;break;case"<=":m=d>=o;break;case">=":m=o>=d;break;case"=":case"==":case"===":m=o===d||"*"===d;break;case"<>":case"!==":case"!=":m=o!==d}}if(!m){T=!1;break e}}else if(!k(E.and[c])){T=!1;break e}while(!1)}else{var C=E.grabName;C&&v.push(C),T=k(E),C&&v.pop()}T&&(P=!0,w(a))}P?_=!0:(f.push(E),S=!1)}var O;if(O=e.grabAllAssets&&!i.forceOr?S:_,!O)for(var D=0;D<f.length;D++){var N=f[D];x(N)}return _}if(void 0===e.length||!p(e)){if(e.property)return b(e.property);if(e.and){for(c=0;c<e.and.length;c++)if(u=e.and[c],u&&void 0!==u.length&&p(u)){if(m=void 0,n=u[0],o=n&&n.property?b(n.property):k(n),1===u.length)m=o;else if(l=u[1],d=u[2],"*"===l)d=y(d),r=d[0],s=d[4],m=r&&r>o?!1:s&&o>s?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=k(u[2])}switch(l){case"<":m=d>o;break;case">":m=o>d;break;case"<=":m=d>=o;break;case">=":m=o>=d;break;case"=":case"==":case"===":m=o===d;break;case"<>":case"!==":case"!=":m=o!==d}}if(!m)return!1}else if(!k(e.and[c]))return!1;return!0}if(e.or){for(var F=0;F<e.and.length;F++)if(k(e.or[F]))return!0;return!1}return"object"==typeof e&&e.match?k(e.match):e}if(n=e[0],o=n&&n.property?b(n.property):k(e[0]),1===e.length)return o;if(l=e[1],d=e[2],"*"===l)return d=y(d),r=d[0],s=d[4],r&&r>o?!1:s&&o>s?!1:!0;switch(typeof e[2]){case"string":case"number":case"boolean":d=e[2];break;default:d=k(e[2])}switch(l){case"<":return d>o;case">":return o>d;case"<=":return d>=o;case">=":return o>=d;case"=":case"==":case"===":return o===d;case"<>":case"!==":case"!=":return o!==d}};if(e=P.upscaleAssetQuery(e),!e.match||!e.match.grabAllAssets)throw new Error("Don\'t know how to parse this expression");for(var _=!0,S=!1,I=0;I<e.match.grabAllAssets.length;I++){var E=e.match.grabAllAssets[I],A=E.grabName;v.push(A),k(E)?S=!0:_=!1,v.pop()}if(e.match.grabMatchingAssets)for(var T=0;T<e.match.grabMatchingAssets.length;T++){var C=e.match.grabMatchingAssets[T],O=C.grabName;v.push(O),k(C),v.pop()}var D;return _?D=h:(S&&(i.partial=!0),D=[]),D},P.convertTrailMissing=function(e){var t=function(e){for(var t="*",i=[],a=function(e){if(e.property)-1===i.indexOf(e.property)&&i.push(e.property);else{if(!p(e))throw new Error("Unexepcted trail entry (4)");var a=e[0],o=e[1],n=e[2];if(a&&a.property){if("type"===a.property){if("=="!==o&&"==="!==o)throw new Error("Unexpected trail entry (3)");return void(t=n)}a=a.property}var r;switch(o){case"*":r=a+"*"+n.join("*");break;case"=":case"==":case"===":r=a+"="+n;break;case"!=":case"<>":case"!==":r=a+"!="+n;break;default:r=a+o+n}-1===i.indexOf(r)&&i.push(r)}};e.grabAllAssets&&e.grabAllAssets&&1===e.grabAllAssets.length;)e=e.grabAllAssets[0];if(e.and)for(var o=0;o<e.and.length;o++)a(e.and[o]);return t+(i.length?"."+i.join("."):"")};if(e.grabSomeAssets){for(var i=[],a=0;a<e.grabSomeAssets.length;a++)i.push(t(e.grabSomeAssets[a]));return i.join(",")}return t(e)},P.prototype.getPrerequisiteVirtualPosition=function(e){try{if(!this.globalOptions||!this.globalOptions.virtualPositions)return;for(var t in this.globalOptions.virtualPositions)if(this.globalOptions.virtualPositions.hasOwnProperty(t)){var i=this.globalOptions.virtualPositions[t];if(i.prerequisite){var a={};if(a[t]={positionId:t},this.queryPosition(e,{positions:a}).length)return i.prerequisite}}}catch(o){return}},P.prototype.debugTime=function(){W.apply(this,arguments)},P.prototype.getPositionById=function(e){return this.positions[e]||null},P.VERSION=F,P.DEBUG=B,P.RENDEZVOUS_DURATION=L,P.SUPPORTS_TRACKING_AD=!0,P.SUPPORTS_TRACKING_CREATIVE=!0,P.browserDetect=z,P.EventEmitter=w,P.Ad=x,P.Position=I,P.Iframe=S,P.AdProxy=k,P.CGAdProxy=_,P.isArray=p,P.debugTime=W,w.forObject(P),C.piximedia["PAM"+F]=P,(!C.piximedia.PAM||C.piximedia.PAM.VERSION<F)&&(C.piximedia.PAM=P,C.piximedia.browserDetect=z)}(),window.piximedia._.injectEasyXDM=function(e,t,i){!function(e,t,i,a,o,n){function r(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!b(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!b(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(A=i.match(/\\d+/g))}if(!A){var a;try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),A=Array.prototype.slice.call(a.GetVariable("$version").match(/(\\d+),(\\d+),(\\d+),(\\d+)/),1),a=null}catch(o){}}if(!A)return!1;var n=parseInt(A[0],10),r=parseInt(A[1],10);return T=n>9&&r>0,!0}function p(){if(!z){z=!0;for(var e=0;e<H.length;e++)H[e]();H.length=0}}function c(t,i){return e.piximedia&&e.piximedia.pam&&e.piximedia.pam.waitDomMutable?e.piximedia.pam.waitDomMutable(function(){t.call(i)}):z?void t.call(i):void H.push(function(){t.call(i)})}function u(){var e=parent;if(""!==R)for(var t=0,i=R.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function m(t){return e.easyXDM=U,R=t,R&&(V="easyXDM_"+R.replace(".","_")+"_"),B}function h(e){return e.match(L)[3]}function f(e){return e.match(L)[4]||""}function v(e){var t=e.toLowerCase().match(L),i=t[2],a=t[3],o=t[4]||"";return("http:"==i&&":80"==o||"https:"==i&&":443"==o)&&(o=""),i+"//"+a+o}function g(e){if(e=e.replace(M,"$1/"),!e.match(/^(http||https):\\/\\//)){var t="/"===e.substring(0,1)?"":i.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=i.protocol+"//"+i.host+t+e}for(;j.test(e);)e=e.replace(j,"");return e}function y(e,t){var i="",a=e.indexOf("#");-1!==a&&(i=e.substring(a),e=e.substring(0,a));var o=[];for(var r in t)t.hasOwnProperty(r)&&o.push(r+"="+n(t[r]));return e+(W?"#":-1==e.indexOf("?")?"?":"&")+o.join("&")+i}function b(e){return"undefined"==typeof e}function w(e,t,i){var a;for(var o in t)t.hasOwnProperty(o)&&(o in e?(a=t[o],"object"==typeof a?w(e[o],a,i):i||(e[o]=t[o])):e[o]=t[o]);return e}function x(){var e=t.body.appendChild(t.createElement("form")),i=e.appendChild(t.createElement("input"));i.name=V+"TEST"+N,P=i!==e.elements[i.name],t.body.removeChild(e)}function k(e){b(P)&&x();var i;P?i=t.createElement(\'<iframe name="\'+e.props.name+\'"/>\'):(i=t.createElement("IFRAME"),i.name=e.props.name),i.id=i.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(w(i.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var a=e.props.src;if(e.props.src="javascript:false",w(i,e.props),i.border=i.frameBorder=0,i.allowTransparency=!0,e.container.appendChild(i),e.onLoad&&C(i,"load",e.onLoad),e.usePost){var o,n=e.container.appendChild(t.createElement("form"));if(n.target=i.name,n.action=a,n.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(P?o=t.createElement(\'<input name="\'+r+\'"/>\'):(o=t.createElement("INPUT"),o.name=r),o.value=e.usePost[r],n.appendChild(o));n.submit(),n.parentNode.removeChild(n)}else i.src=a;return e.props.src=a,i}function _(e,t){"string"==typeof e&&(e=[e]);for(var i,a=e.length;a--;)if(i=e[a],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\\*)/g,".$1").replace(/\\?/g,".")+"$"),i.test(t))return!0;return!1}function S(a){var o,n=a.protocol;if(a.isHost=a.isHost||b(G.xdm_p),W=a.hash||!1,a.props||(a.props={}),a.isHost)a.remote=g(a.remote),a.channel=a.channel||"default"+N++,a.secret=Math.random().toString(16).substring(2),b(n)&&(n=v(i.href)==v(a.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":a.swf&&r(e,"ActiveXObject")&&d()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":a.remoteHelper?"2":"0");else if(a.channel=G.xdm_c.replace(/["\'<>\\\\]/g,""),a.secret=G.xdm_s,a.remote=G.xdm_e.replace(/["\'<>\\\\]/g,""),n=G.xdm_p,a.acl&&!_(a.acl,a.remote))throw new Error("Access denied for "+a.remote);switch(a.protocol=n,n){case"0":if(w(a,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),a.isHost){if(!a.local){for(var s,l=i.protocol+"//"+i.host,p=t.body.getElementsByTagName("img"),c=p.length;c--;)if(s=p[c],s.src.substring(0,l.length)===l){a.local=s.src;break}a.local||(a.local=e)}var u={xdm_c:a.channel,xdm_p:0};a.local===e?(a.usePolling=!0,a.useParent=!0,a.local=i.protocol+"//"+i.host+i.pathname+i.search,u.xdm_e=a.local,u.xdm_pa=1):u.xdm_e=g(a.local),a.container&&(a.useResize=!1,u.xdm_po=1),a.remote=y(a.remote,u)}else w(a,{channel:G.xdm_c,remote:G.xdm_e,useParent:!b(G.xdm_pa),usePolling:!b(G.xdm_po),useResize:a.useParent?!1:a.useResize});o=[new B.stack.HashTransport(a),new B.stack.ReliableBehavior({}),new B.stack.QueueBehavior({encode:!0,maxLength:4e3-a.remote.length}),new B.stack.VerifyBehavior({initiate:a.isHost})];break;case"1":o=[new B.stack.PostMessageTransport(a)];break;case"2":a.isHost&&(a.remoteHelper=g(a.remoteHelper)),o=[new B.stack.NameTransport(a),new B.stack.QueueBehavior,new B.stack.VerifyBehavior({initiate:a.isHost})];break;case"3":o=[new B.stack.NixTransport(a)];break;case"4":o=[new B.stack.SameOriginTransport(a)];break;case"5":o=[new B.stack.FrameElementTransport(a)];break;case"6":A||d(),o=[new B.stack.FlashTransport(a)]}return o.push(new B.stack.QueueBehavior({lazy:a.lazy,remove:!0})),o}function I(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},a=0,o=e.length;o>a;a++)t=e[a],w(t,i,!0),0!==a&&(t.down=e[a-1]),a!==o-1&&(t.up=e[a+1]);return t}function E(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var P,A,T,C,O,D=e,N=Math.floor(1e4*Math.random()),F=Function.prototype,L=/^((http.?:)\\/\\/([^:\\/\\s]+)(:\\d+)*)/,j=/[\\-\\w]+\\/\\.\\.\\//,M=/([^:])\\/\\//g,R="",B={},U=e.easyXDM,V="easyXDM_",W=!1;if(r(e,"addEventListener"))C=function(e,t,i){e.addEventListener(t,i,!1)},O=function(e,t,i){e.removeEventListener(t,i,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");C=function(e,t,i){e.attachEvent("on"+t,i)},O=function(e,t,i){e.detachEvent("on"+t,i)}}var q,z=!1,H=[];if("readyState"in t?(q=t.readyState,z="complete"==q||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==q||"interactive"==q)):z=!!t.body,!z){if(r(e,"addEventListener"))C(t,"DOMContentLoaded",p);else if(C(t,"readystatechange",function(){"complete"==t.readyState&&p()}),t.documentElement.doScroll&&e===top){var J=function(){if(!z){try{t.documentElement.doScroll("left")}catch(e){return void a(J,1)}p()}};J()}C(e,"load",p)}var G=function(e){e=e.substring(1).split("&");for(var t,i={},a=e.length;a--;)t=e[a].split("="),i[t[0]]=o(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash),X=function(){var e={},t={a:[1,2,3]},i=\'{"a":[1,2,3]}\';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(X=function(){return e},e):null)};w(B,{version:"2.4.19.3",query:G,stack:{},apply:w,getJSONObject:X,whenReady:c,noConflict:m}),B.DomHelper={on:C,un:O,requiresJSON:function(i){s(e,"JSON")||t.write(\'<script type="text/javascript" src="\'+i+\'"></script>\')}},function(){var e={};B.Fn={set:function(t,i){e[t]=i},get:function(t,i){if(e.hasOwnProperty(t)){var a=e[t];return i&&delete e[t],a}}}}(),B.Socket=function(e){var t=I(S(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=v(e.remote);this.origin=v(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,i)},t.init()},B.Rpc=function(e,t){if(t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var a=t.local[i];"function"==typeof a&&(t.local[i]={method:a})}var o=I(S(e).concat([new B.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=v(e.remote),this.destroy=function(){o.destroy()},o.init()},B.stack.SameOriginTransport=function(e){var t,o,n,r;return t={outgoing:function(e,t,i){n(e),i&&i()},destroy:function(){o&&(o.parentNode.removeChild(o),o=null)},onDOMReady:function(){r=v(e.remote),e.isHost?(w(e.props,{src:y(e.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:e.channel,xdm_p:4}),name:V+e.channel+"_provider"}),o=k(e),B.Fn.set(e.channel,function(e){return n=e,a(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(n=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),a(function(){t.up.callback(!0)},0))},init:function(){c(t.onDOMReady,t)}}},B.stack.FlashTransport=function(e){function o(e,t){a(function(){s.up.incoming(e,d)},0)}function r(i){var a=e.swf+"?host="+e.isHost,o="easyXDM_swf_"+Math.floor(1e4*Math.random());B.Fn.set("flash_loaded"+i.replace(/[\\-.]/g,"_"),function(){B.stack.FlashTransport[i].swf=p=u.firstChild;for(var e=B.stack.FlashTransport[i].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?u="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(u=t.createElement("div"),w(u.style,T&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(u));var r="callback=flash_loaded"+n(i.replace(/[\\-.]/g,"_"))+"&proto="+D.location.protocol+"&domain="+n(h(D.location.href))+"&port="+n(f(D.location.href))+"&ns="+n(R);u.innerHTML="<object height=\'20\' width=\'20\' type=\'application/x-shockwave-flash\' id=\'"+o+"\' data=\'"+a+"\'><param name=\'allowScriptAccess\' value=\'always\'></param><param name=\'wmode\' value=\'transparent\'><param name=\'movie\' value=\'"+a+"\'></param><param name=\'flashvars\' value=\'"+r+"\'></param><embed type=\'application/x-shockwave-flash\' FlashVars=\'"+r+"\' allowScriptAccess=\'always\' wmode=\'transparent\' src=\'"+a+"\' height=\'1\' width=\'1\'></embed></object>"}var s,l,d,p,u;return s={outgoing:function(t,i,a){p.postMessage(e.channel,t.toString()),a&&a()},destroy:function(){try{p.destroyChannel(e.channel)}catch(t){}p=null,l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){d=e.remote,B.Fn.set("flash_"+e.channel+"_init",function(){a(function(){s.up.callback(!0)})}),B.Fn.set("flash_"+e.channel+"_onMessage",o),e.swf=g(e.swf);var t=h(e.swf),n=function(){B.stack.FlashTransport[t].init=!0,p=B.stack.FlashTransport[t].swf,p.createChannel(e.channel,e.secret,v(e.remote),e.isHost),e.isHost&&(T&&e.swfNoThrottle&&w(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),w(e.props,{src:y(e.remote,{xdm_e:v(i.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:V+e.channel+"_provider"}),l=k(e))};B.stack.FlashTransport[t]&&B.stack.FlashTransport[t].init?n():B.stack.FlashTransport[t]?B.stack.FlashTransport[t].queue.push(n):(B.stack.FlashTransport[t]={queue:[n]},r(t))},init:function(){c(s.onDOMReady,s)}}},B.stack.PostMessageTransport=function(t){function o(e){if(e.origin)return v(e.origin);if(e.uri)return v(e.uri);if(e.domain)return i.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function n(e){var i=o(e);i==d&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),i)}var r,s,l,d;return r={outgoing:function(e,i,a){l.postMessage(t.channel+" "+e,i||d),a&&a()},destroy:function(){O(e,"message",n),s&&(l=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(d=v(t.remote),t.isHost){var o=function(i){i.data==t.channel+"-ready"&&(l="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,O(e,"message",o),C(e,"message",n),a(function(){r.up.callback(!0)},0))};C(e,"message",o),w(t.props,{src:y(t.remote,{xdm_e:v(i.href),xdm_c:t.channel,xdm_p:1}),name:V+t.channel+"_provider"}),s=k(t)}else C(e,"message",n),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(t.channel+"-ready",d),a(function(){r.up.callback(!0)},0)},init:function(){c(r.onDOMReady,r)}}},B.stack.FrameElementTransport=function(o){var n,r,s,l;return n={outgoing:function(e,t,i){s.call(this,e),i&&i()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){l=v(o.remote),o.isHost?(w(o.props,{src:y(o.remote,{xdm_e:v(i.href),xdm_c:o.channel,xdm_p:5}),name:V+o.channel+"_provider"}),r=k(o),r.fn=function(e){return delete r.fn,s=e,a(function(){n.up.callback(!0)},0),function(e){n.up.incoming(e,l)}}):(t.referrer&&v(t.referrer)!=G.xdm_e&&(e.top.location=G.xdm_e),s=e.frameElement.fn(function(e){n.up.incoming(e,l)}),n.up.callback(!0))},init:function(){c(n.onDOMReady,n)}}},B.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(s?"#_3":"#_2")+e.channel;l.contentWindow.sendMessage(t,i)}function i(){s?2!==++p&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function o(e){r.up.incoming(e,m)}function n(){u&&a(function(){u(!0)},0)}var r,s,l,d,p,u,m,h;return r={outgoing:function(e,i,a){u=a,t(e)},destroy:function(){l.parentNode.removeChild(l),l=null,s&&(d.parentNode.removeChild(d),d=null)},onDOMReady:function(){s=e.isHost,p=0,m=v(e.remote),e.local=g(e.local),s?(B.Fn.set(e.channel,function(t){s&&"ready"===t&&(B.Fn.set(e.channel,o),i())}),h=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),w(e.props,{src:h+"#"+e.channel,name:V+e.channel+"_provider"}),d=k(e)):(e.remoteHelper=e.remote,B.Fn.set(e.channel,o));var t=function(){var o=l||this;O(o,"load",t),B.Fn.set(e.channel+"_load",n),function r(){"function"==typeof o.contentWindow.sendMessage?i():a(r,50)}()};l=k({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){c(r.onDOMReady,r)}}},B.stack.HashTransport=function(t){function i(e){if(f){var i=t.remote+"#"+m++ +"_"+e;(l||!g?f.contentWindow:f).location=i}}function o(e){u=e,s.up.incoming(u.substring(u.indexOf("_")+1),y)}function n(){if(h){var e=h.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=u&&o(t)}}function r(){d=setInterval(n,p)}var s,l,d,p,u,m,h,f,g,y;return s={outgoing:function(e,t){i(e)},destroy:function(){e.clearInterval(d),(l||!g)&&f.parentNode.removeChild(f),f=null},onDOMReady:function(){if(l=t.isHost,p=t.interval,u="#"+t.channel,m=0,g=t.useParent,y=v(t.remote),l){if(w(t.props,{src:t.remote,name:V+t.channel+"_provider"}),g)t.onLoad=function(){h=e,r(),s.up.callback(!0)};else{var i=0,o=t.delay/50;!function n(){if(++i>o)throw new Error("Unable to reference listenerwindow");try{h=f.contentWindow.frames[V+t.channel+"_consumer"]}catch(e){}h?(r(),s.up.callback(!0)):a(n,50)}()}f=k(t)}else h=e,r(),g?(f=parent,s.up.callback(!0)):(w(t,{props:{src:t.remote+"#"+t.channel+new Date,name:V+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),f=k(t))},init:function(){c(s.onDOMReady,s)}}},B.stack.ReliableBehavior=function(e){var t,i,a=0,o=0,n="";return t={incoming:function(e,r){var s=e.indexOf("_"),l=e.substring(0,s).split(",");e=e.substring(s+1),l[0]==a&&(n="",i&&i(!0)),e.length>0&&(t.down.outgoing(l[1]+","+a+"_"+n,r),o!=l[1]&&(o=l[1],t.up.incoming(e,r)))},outgoing:function(e,r,s){n=e,i=s,t.down.outgoing(o+","+ ++a+"_"+e,r)}}},B.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void E(i);if(!l&&0!==s.length&&!r){l=!0;var o=s.shift();i.down.outgoing(o.data,o.origin,function(e){l=!1,o.callback&&a(function(){o.callback(e)},0),t()})}}var i,r,s=[],l=!0,d="",p=0,c=!1,u=!1;return i={init:function(){b(e)&&(e={}),e.maxLength&&(p=e.maxLength,u=!0),e.lazy?c=!0:i.down.init()},callback:function(e){l=!1;var a=i.up;t(),a.callback(e)},incoming:function(t,a){if(u){var n=t.indexOf("_"),r=parseInt(t.substring(0,n),10);d+=t.substring(n+1),0===r&&(e.encode&&(d=o(d)),i.up.incoming(d,a),d="")}else i.up.incoming(t,a)},outgoing:function(a,o,r){e.encode&&(a=n(a));var l,d=[];if(u){for(;0!==a.length;)l=a.substring(0,p),a=a.substring(l.length),d.push(l);for(;l=d.shift();)s.push({data:d.length+"_"+l,origin:o,callback:0===d.length?r:null})}else s.push({data:a,origin:o,callback:r});c?i.down.init():t()},destroy:function(){r=!0,i.down.destroy()}}},B.stack.VerifyBehavior=function(e){function t(){a=Math.random().toString(16).substring(2),i.down.outgoing(a)}var i,a,o;return i={incoming:function(n,r){var s=n.indexOf("_");-1===s?n===a?i.up.callback(!0):o||(o=n,e.initiate||t(),i.down.outgoing(n)):n.substring(0,s)===o&&i.up.incoming(n.substring(s+1),r)},outgoing:function(e,t,o){i.down.outgoing(a+"_"+e,t,o)},callback:function(i){e.initiate&&t()}}},B.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",n.down.outgoing(r.stringify(e))}function a(e,t){var a=Array.prototype.slice;return function(){var o,n=arguments.length,r={method:t};n>0&&"function"==typeof arguments[n-1]?(n>1&&"function"==typeof arguments[n-2]?(o={success:arguments[n-2],error:arguments[n-1]},r.params=a.call(arguments,0,n-2)):(o={success:arguments[n-1]},r.params=a.call(arguments,0,n-1)),d[""+ ++s]=o,r.id=s):r.params=a.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r)}}function o(e,t,a,o){if(!a)return void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));var n,r;t?(n=function(e){n=F,i({id:t,result:e})},r=function(e,a){r=F;var o={id:t,error:{code:-32099,message:e}};a&&(o.error.data=a),i(o)}):n=r=F,l(o)||(o=[o]);try{var s=a.method.apply(a.scope,o.concat([n,r]));b(s)||n(s)}catch(d){r(d.message)}}var n,r=t.serializer||X(),s=0,d={};return n={incoming:function(e,a){var n=r.parse(e);if(n.method)t.handle?t.handle(n,i):o(n.method,n.id,t.local[n.method],n.params);else{var s=d[n.id];n.error?s&&s.error&&s.error(n.error):s&&s.success&&s.success(n.result),delete d[n.id]}},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=a(t.remote[i],i));n.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];n.down.destroy()}}},D.easyXDM=B}(e,t,i,e.setTimeout,decodeURIComponent,encodeURIComponent)},window.piximedia.injectEasyXDM=function(e,t,i){window.piximedia._.injectEasyXDM.call(e,e,t,i)},window.piximedia.injectEasyXDM(window,document,window.location),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?\'"\'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+\'"\':\'"\'+e+\'"\'}function str(e,t){var i,a,o,n,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=l.length,i=0;n>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\\n"+gap+r.join(",\\n"+gap)+"\\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;n>i;i+=1)"string"==typeof rep[i]&&(a=rep[i],o=str(a,l),o&&r.push(quote(a)+(gap?": ":":")+o));else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(o=str(a,l),o&&r.push(quote(a)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\\n"+gap+r.join(",\\n"+gap)+"\\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,meta={"\\b":"\\\\b","	":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"},JSON.stringify=function(e,t,i){var a;if(gap="",indent="","number"==typeof i)for(a=0;i>a;a+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,a,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(a=walk(o,i),void 0!==a?o[i]=a:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:["\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\\\\n\\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,"]").replace(/(?:^|:|,)(?:\\s*\\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(){"use strict";function e(){var e=this;i.on("event",function(t,i,a){e.validateEvent(t,i,a)})}var t=window,i=t.piximedia.PAM;e.prototype.validateEvent=function(e,a,o){a=a||{};var n=a.adIdAlliance,r=a.creativeIdAlliance,s=o.c1,l=o.c2,d=o.c3,p=o.c4,c=o.c5;i.DEBUG&&t.console.log("Event: "+e+", adId="+n+", creativeId="+r+", c1="+s+", c2="+l+", c3="+d+", c4="+p+", c5="+c)},t.piximedia.Validatr=e,\ne.instance||(e.instance=new e),t.piximedia.libraryLoader&&t.piximedia.libraryLoader["validatr.js"]&&(t.piximedia.libraryLoader["validatr.js"].complete=!0)}(),function(){var e=window,t="validatr.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["validatr.js"]=window.piximedia.libraryLoader["validatr.js"]||{},window.piximedia.libraryLoader["validatr.js"].loaded=!0,!function(){"use strict";var e=window;e.piximedia=e.piximedia||{},e.piximedia._=e.piximedia._||{};var t,i="2014031402",a=2500,o=2147483647,n=2147483646,r=2147483645,s=2147483644,l=10;try{t=window.top&&window.top.name&&"debug"===window.top.name?!0:!1}catch(d){t="debug"===window.name?!0:!1}var p=t,c={start:function(){c.setWindowAndDocument(),c.bindFocusEvent(),c.lastMouseCoordinate=[0,0],c.addEvent(c.d,"mouseout",function(e){c.lastMouseCoordinate=[e.clientX,e.clientY]}),c.browser=c.getBrowser(),c.device=c.getDevice(),e.piximedia.preview&&e.piximedia.preview.emulation&&(c.browser=e.piximedia.preview.emulation.browser||c.browser,c.device=e.piximedia.preview.emulation.device||c.device),"msie"!==c.browser.name&&"trident"!==c.browser.name&&"desktop"===c.device.name&&c.hasFlash()&&!function(){function e(e){e.parentNode&&"piximedia-sweetlib-flashcheckobject-wrapper"===e.parentNode.id?c.remove(e.parentNode):c.remove(e)}c.flashCheckCallback=function(){if("safari"===c.browser.name)var t=0,i=setInterval(function(){t++,c.overrideFlashValue="undefined"!=typeof c.flashCheckObject.PercentLoaded,(c.overrideFlashValue||10===t)&&(clearInterval(i),e(c.get("piximedia-sweetlib-flashcheckobject")))},0);else c.overrideFlashValue="undefined"!=typeof c.flashCheckObject.PercentLoaded,e(c.get("piximedia-sweetlib-flashcheckobject"))};var t=function(){c.flashCheckObject=c.d.createElement("object"),c.flashCheckObject.type="application/x-shockwave-flash",c.flashCheckObject.id="piximedia-sweetlib-flashcheckobject",c.d.body.appendChild(c.flashCheckObject),c.flashCheckCallback()};c.d.body?t():(c.overrideFlashValue=!1,c.domload(t))}(),c.browserCSSLoaded=!1;var t=["piximedia.style.20161402.css"],i=function(){c.w.piximedia.pam?c.w.piximedia.pam.loadCSSs(t,function(){c.browserCSSLoaded=!0}):setTimeout(i,200)};i()},logstack:[],pageActive:!1,stylesheets:{},resizeCallbacks:{},resizeObjects:[],pcBonusWidthWhenGluedText:20,blockContentTagNames:["DIV","P","SPAN","TABLE","SECTION","NAV","FORM","CENTER","HEADER","MAIN"],registeredMouseEventsObjects:{},allowedFlashVideoFormat:["mp4","f4v","flv"],allowedHTML5VideoFormat:["mp4","ogv","ogg","webm","dailymotion"],html5VideoRules:function(e){var t=c.browser,i=c.device;if("msie"===t.name)return!1;if("dailymotion"===e)return!0;if("vp9"===e){if("firefox"===t.name)return t.version>=28?!0:!1;if("chrome"===t.name)return t.version>=29?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("vp8"===e){if("firefox"===t.name)return t.version>=26?!0:!1;if("chrome"===t.name)return t.version>=20?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("mp4"===e){if("msie"===t.name&&t.version>=9||"trident"===t.name)return!0;if("mobile"===i.name||"tablet"===i.name)return!0;if("safari"===t.name&&"windows"!==i.os||"chrome"===t.name||"edge"===t.name)return!0}return void 0},prefixedEvent:{chrome:{transitionend:"webkitTransitionEnd"},safari:{transitionend:"webkitTransitionEnd"},firefox:{transitionend:"transitionend"},msie:{transitionend:"transitionend"},"default":{transitionend:"transitionend"}},prefixedProperty:{chrome:{transform:"-webkit-transform"},safari:{transform:"-webkit-transform"},firefox:{},msie:{transform:"-ms-transform"}},translations:{fr_FR:{},en_EN:{fermer:"close"}},setWindowAndDocument:function(){c.w=function(){var e;try{return e=parent.parent.parent.document,e.piximediaiframetest=!0,parent.parent.parent.window}catch(t){}try{return e=parent.parent.document,e.piximediaiframetest=!0,parent.parent.window}catch(t){}try{return e=parent.document,e.piximediaiframetest=!0,parent.window}catch(t){}return window}(),c.d=c.w.document},getNavigator:function(){return window.navigator&&window.navigator.userAgent?window.navigator:{userAgent:"",appName:""}},print:function(){c.console("log",arguments,!1,!0)},log:function(){c.console("log",arguments)},warn:function(){c.console("warn",arguments)},console:function(e,t,i,a){var o=i?"Saved message : ":"["+c.getDeltaTime()+"] "+e+" : ",n=!1,r=!1;"object"==typeof t[0]||a?n=!0:o+=c.sprintf(t,!0),a&&(r=c.copy(t),r.unshift(o)),p&&window.console&&window.console[e]&&(n&&!a?window.console[e](t[0]):a?window.console[e].apply(window.console,r):window.console[e](o)),c.logstack.push&&!i&&c.logstack.push({message:n?t[0]:o,method:e,new_way:r})},hardlog:function(e,t,i){window.console&&window.console[e]&&(i?window.console[e].apply(window.console,t):window.console[e](t))},debug:function(){p=!0,c.each(c.logstack,function(){c.hardlog(this.method,this.new_way?this.new_way:this.message,this.new_way?!0:!1)})},hasClass:function(e,t){return e&&e.className?new RegExp("(\\\\s|^)"+t+"(\\\\s|$)").test(e.className):!1},removeClass:function(e,t){return e?void(c.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\\\s|^)"+t+"(\\\\s|$)")," ").replace(/^\\s+|\\s+$/g,""))):!1},addClass:function(e,t){return e?void(c.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)):!1},isSecured:function(){return"https:"===c.w.location.protocol?!0:!1},getDeltaTime:function(){for(var e=c.now(),t=c.ref,i=(e-t).toString();i.length<5;)i="0"+i;return i+"ms"},now:function(){return c.ref||(c.ref=(new Date).getTime()),(new Date).getTime()},random:function(){return Math.floor(1e13*Math.random())},getTime:function(){return c.now()},isArray:function(e){var t=c.getTrueType(e);switch(t){case"array":case"arguments":case"htmlcollection":case"htmlallcollection":case"nodelist":return!0;case"boolean":case"string":case"number":return!1;default:return e&&e[0]&&"number"==typeof e.length?!0:!1}},getTrueType:function(e){return Object.prototype.toString.call(e).match(/\\[object (.*?)\\]/)[1].toLowerCase()},copy:function(e,t){var i;if(Array.prototype.slice&&(c.isArray(e)||t))return Array.prototype.slice.call(e);if(c.isArray(e)||t)i=[],c.each(e,function(t){i[t]=e[t]});else{i={};var a=function(e,t){c.each(e,function(i){if("object"==typeof e[i]&&null!==e[i])try{JSON.stringify(e[i]),t[i]=c.isArray(e[i])?[]:{},a(e[i],t[i])}catch(o){t[i]=e[i]}else t[i]=e[i]})};a(e,i)}return i},shuffle:function(e){for(var t,i,a=e.length;a;t=Math.floor(Math.random()*a),i=e[--a],e[a]=e[t],e[t]=i);return e},sprintf:function(e,t){var i=c.copy(e,!0),a=i.shift();if("string"==typeof a){for(;a.match(/%[sSd]/);){var o=i.shift(),n=a.match(/%[sSd]/)?a.match(/%[sSd]/)[0]:"",r="%S"===n,s="%d"===n;o=void 0===o?"":""===o?t?"(Empty String)":"":t?o.toString():o,r?o=o.toUpperCase():s&&(o=parseFloat(o,10)),a=a.replace(/%[sSd]/,o)}return a}return a},camelize:function(e){return e.replace(/(?:^|[-_])(\\w)/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\\s]+/g,"-").toLowerCase()},htmlentities:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},shorten:function(e,t){return e.length>t?e.substr(0,t).replace(/\\s\\S+$/,"")+"...":e},addZero:function(e){var t=parseFloat(e,10);return 10>t?"0"+e:e},cleanTime:function(e){if(isNaN(parseInt(e,10)))return"00:00";if(parseInt(e,10)/60<=1)return"00:"+c.addZero(parseInt(e,10));var t=parseInt(e/60,10),i=parseInt(e-60*t,10);return c.sprintf(["%s:%s",t,c.addZero(i)])},twiterize:function(e){return e},each:function(e,t){function i(i){try{var a=t.call(e[i],i);if(void 0!==a)return a}catch(o){c.warn("Error looping through %s at key %d",c.getFnName(t),i),c.warn(o)}}var a,o;if(!e)return e;if(c.isArray(e)){for(a=0;a<e.length;a++)if(o=i(a),void 0!==o)return o}else for(var n in e)if(e.hasOwnProperty(n)&&(o=i(n),void 0!==o))return o},exist:function(e,t){return!c.isArray(t)||c.isArray(e)?!1:c.each(t,function(i){return t[i].toLowerCase&&t[i].toLowerCase()===e.toLowerCase()?this:void 0})},getFnName:function(e){if(e.name&&""!==e.name)return e.name;var t="Anonymous function";return e.toString&&e.toString.match&&e.toString.match(/function(.*)?\\(/)?e.toString.match(/function(.*)?\\(/)[1]:t},extend:function(e,t){c.each(t,function(i){try{var a=e[i],o=t[i];"undefined"==typeof a||""===a||null===a?e[i]=o:"number"!=typeof o||isNaN(parseFloat(a,10))||a===o?"object"!=typeof a&&"undefined"!=typeof a||"object"!=typeof o||c.extend(e[i],o):e[i]=parseFloat(a,10)}catch(n){c.warn(n)}})},isIframed:function(e){var t=e||window;return t.parent&&t.parent.location?t.parent.location!==t.location:!1},isCrossDomained:function(e){try{var t=e||window;return t.parent.document.piximediaCrossDomainTest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty}catch(i){return!0}},getDocument:function(e){return e.ownerDocument},getWindow:function(e,t){var i=t?c.getDocument(t):e;return"defaultView"in i?i.defaultView:i.parentWindow},getOwnerFif:function(e){var t,i="pm-"+c.random(),a=c.getWindow(c.d,e),o=a.name,n=c.d.getElementsByTagName("iframe");return a.name=i,c.each(n,function(e){try{if(n[e]&&n[e].contentWindow&&n[e].contentWindow.name===i)return t=n[e],!0}catch(a){}}),a.name=o,t?t:void 0},addEvent:function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var a=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),a.apply(e,arguments)}}}else e["on"+t]=i},addEventOnce:function(e,t,i){c.addEvent(e,t,function a(){return c.removeEvent(e,t,a),i.apply(this,arguments)})},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},preventDefault:function(e){var t=e||window.event;t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1},fireEvent:function(e){if(document.addEventListener){var t=document.createEvent("UIEvents");t.initEvent(e,!1,!1),document.dispatchEvent(t)}else document.documentElement[e]++},bindEvent:function(e,t){document.addEventListener?document.addEventListener(e,function(){t()},!1):(document.documentElement[e]||(document.documentElement[e]=0),document.documentElement.attachEvent("onpropertychange",function(i){i.propertyName===e&&t()}))},onResize:function(e,t){e.pmResizeId||(e.pmResizeId="pmResizeId-"+c.random()),c.resizeCallbacks[e.pmResizeId]||(c.resizeCallbacks[e.pmResizeId]=[]),c.resizeCallbacks[e.pmResizeId].push(t),c.exist(e.pmResizeId,c.resizeObjects)||c.resizeObjects.push(e),c.intervalStarted||(c.intervalStarted=!0,c.checkResize())},checkResize:function(){var e,t,i,a=100,o=a;i=function(){var i,n;c.each(c.resizeObjects,function(){if(n=this.pmResizeId,this.getBoundingClientRect)i=c.gbcr(this),(Math.abs(i.width-(this.pmResizePreviousWidth||0))>.5||Math.abs(i.height-(this.pmResizePreviousHeight||0))>.5||o===a)&&c.resizeCallbacks[n].length>0&&(this.pmResizePreviousWidth=i.width,this.pmResizePreviousHeight=i.height,c.each(c.resizeCallbacks[n],function(){c.call(this)}));else{i=c.getViewportSize();var r=i[0],s=i[1];(e!==r||t!==s||o===a)&&c.resizeCallbacks[n].length>0&&(e=r,t=s,c.each(c.resizeCallbacks[n],function(){c.call(this)}))}}),o===a?o=0:o++},c.addEvent(c.w,"resize",function(){i()}),setInterval(function(){i()},20)},centerMeVertically:function(e,t,i){var a,o=c.getPropertyValue(e,"position");c.applyStyle(e,{position:"static"===o?"absolute":o}),a=function(){var i=0;if("fixed"===o)i=(c.getViewportSize()[1]-c.gbcr(e).height)/2;else if(t){for(var a=(c.getViewportSize()[1]-c.gbcr(e).height)/2,n=e.parentNode,r=0;n!==c.getDocument(n).body;)r+=c.gbcr(n).top-c.gbcr(n.parentNode).top,n=n.parentNode;i=a+c.getPageScroll()[1]-r}else i=(c.gbcr(e.parentNode).height-c.gbcr(e).height)/2;c.applyStyle(e,{top:i+"px"})},c.onResize(e,a),c.onResize(e.parentNode,a),c.onResize(c.w,a),i&&c.addEvent(c.w,"scroll",a)},getPrefixedEvent:function(e){return c.prefixedEvent[c.browser.name]&&c.prefixedEvent[c.browser.name][e]?c.prefixedEvent[c.browser.name][e]:e},getPrefixedProperty:function(e){return c.prefixedProperty[c.browser.name]&&c.prefixedProperty[c.browser.name][e]?c.prefixedProperty[c.browser.name][e]:e},track:function(e,t,i,a){var o,n=!1,r=!1,s=t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"detail",l="undefined"!=typeof i?i:"default";if(e.trackedEvents||(e.trackedEvents={}),e.trackedEvents[t]||(e.trackedEvents[t]={},n=!0),e.trackedEvents[t][l]||(e.trackedEvents[t][l]=!0,r=!0),c.log("Loging event : %s, %s : %s | Custom ? %s | First on ad ? %s, First on unit ? %s",t,t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"unit",l,a?a:"(no custom)",n,r),o=c.sprintf(["ad_id=%d;creative_id=%d;c1=%s;c2=%s;c3=%s;c4=%s;c5=%s;first_on_ad=%s;first_on_unit=%s;%s=%s",e.adIdAlliance,e.creativeIdAlliance,e.custom1?e.custom1:"",e.custom2?e.custom2:"",e.custom3?e.custom3:"",e.custom4?e.custom4:"",a||"",n?"1":"0",r?"1":"0",s,i]),!e.adIdAlliance||!e.creativeIdAlliance)return c.log("Not sending it, because adIdAlliance wan\'t provided nor creativeIdAlliance"),void c.log("Query string should like that : %s",o);var d={c1:e.custom1?e.custom1:"",c2:e.custom2?e.custom2:"",c3:e.custom3?e.custom3:"",c5:a||"",firstOnAd:n?"1":"0",firstOnUnit:r?"1":"0",duration:"duration"===s?i:"",failReason:"error"===s?i:""};e.framedPosition&&e.framedPosition.loadEvent?e.framedPosition.loadEvent(t,d):e.framedAd&&e.framedAd.iframe&&e.framedAd.iframe.position&&e.framedAd.iframe.position.loadEvent?e.framedAd.iframe.position.loadEvent(t,d):e.framedAd&&e.framedAd.loadEvent?(d.detail=i,e.framedAd.loadEvent(t,d)):window.piximedia.core&&window.piximedia.core.loadEvent&&999!==e.adIdAlliance?window.piximedia.core.loadEvent(t,{mode:"P",site_id:e.c1,placement_id:e.c2,params:o,click:""}):c.PixelPrinter("http://ad.piximedia.com/event/?P|"+e.c1+"|"+e.c2+"|event="+t+";"+o+"|"+c.random()+"|")},gbcr:function(e){if(!e)return{};var t,i=0;return e.getBoundingClientRect?(t=e.getBoundingClientRect(),"msie"===c.browser.name&&c.browser.version<=7&&(i=2),{left:t.left-i,right:t.right-i,top:t.top-i,bottom:t.bottom-i,width:t.width?t.width:t.right-t.left,height:t.height?t.height:t.bottom-t.top}):{left:0,top:0,right:0,bottom:0,width:0,height:0,error:!0}},gbcrfp:function(e){var t=c.gbcr(e),i=c.getPageScroll(),a=i[0],o=i[1];return t.left+=a,t.right+=a,t.top+=o,t.bottom+=o,t},getPositionTop:function(e){var t=[],i=[],a=c.getPageScroll()[1];return t=c.isArray(e)?e:[e],c.each(t,function(){if("#pmFiller"===this.toString()){if(c.d.querySelector("#pmFiller")){var e=c.gbcr(c.d.querySelector("#pmFiller"));i.push(e.top+e.height+a)}}else c.w.piximedia.pam.positions[this.toString()]&&c.each(c.w.piximedia.pam.positions[this.toString()].iframes,function(){var e=c.gbcr(this.iframe);i.push(e.top+e.height+a)})}),0===i.length?0:Math.max.apply(null,i)},getBodyHeight:function(e){var t=e||c.d,i=parseInt(c.gbcr(t.body).height,10),a=i-c.getViewportSize(c.getWindow(t))[1];if(a>-1||1>a){var o=t.body.childNodes;i=0;for(var n=0;n<o.length;n++){var r=c.gbcr(o[n]),s=1===o[n].nodeType?c.getPropertyValue(o[n],"position"):"",l="relative"===s||"static"===s?r.height:0;i+=l}}return i},getTextWidth:function(e,t){var i=c.getTextWidth.canvas||(c.getTextWidth.canvas=document.createElement("canvas")),a=i.getContext("2d");a.font=t;var o=a.measureText(e);return Math.floor(o.width)+1},registerMouseEventObject:function(e,t,i){e.customPmId||(e.customPmId="pmMouseEventId-"+c.random()),c.registeredMouseEventsObjects[e.customPmId]||(c.registeredMouseEventsObjects[e.customPmId]={enter:{callbacks:[]},leave:{callbacks:[]},object:e}),c.registeredMouseEventsObjects[e.customPmId][i].callbacks.push(t)},mouseenter:function(e,t){c.registerMouseEventObject(e,t,"enter"),c.addEvent(e,"mouseover",function(){e.isMouseOvered||(e.isMouseOvered=!0,c.each(c.registeredMouseEventsObjects[e.customPmId].enter.callbacks,function(t){c.call(c.registeredMouseEventsObjects[e.customPmId].enter.callbacks[t])}))}),c.mouseleave(e,function(){},!0)},mouseleave:function(e,t,i){function a(){try{e.isMouseOvered=!1}catch(t){return}c.each(c.registeredMouseEventsObjects[e.customPmId].leave.callbacks,function(t){c.call(c.registeredMouseEventsObjects[e.customPmId].leave.callbacks[t])})}i||c.registerMouseEventObject(e,t,"leave"),c.addEvent(e,"mouseout",function(t){var i,o=c.gbcr(e),n=t.clientX<=o.left||t.clientX>=o.right,r=t.clientY<=o.top||t.clientY>=o.bottom;try{i=e.isMouseOvered}catch(s){}(n||r)&&i&&a()}),c.bindEvent("focus-change",function(){var t;try{t=e.isMouseOvered}catch(i){}!c.pageActive&&t&&a()})},isMouseInside:function(e){function t(e,t,i){var a="top"===e||"bottom"===e?"y":"x",o="y"===a?["left","right"]:["top","bottom"],n="y"===a?i.height:i.width;return t[e]<10&&t[e]>-1*n&&t[o[0]]<0&&t[o[1]]<0?!0:!1}var i=c.gbcr(e),a=c.lastMouseCoordinate,o={top:parseInt(i.top-a[1],10),right:parseInt(a[0]-i.right,10),bottom:parseInt(a[1]-i.bottom,10),left:parseInt(i.left-a[0],10)};return t("top",o,i)||t("right",o,i)||t("bottom",o,i)||t("left",o,i)},getMousePosition:function(e,t,i){return e.clientX-c.gbcr(t)[i]},bindRollTracker:function(e,t,i){t.pmRollTracked||(t.pmRollTracked=!0,c.mouseenter(t,function(){clearTimeout(t.pmRollTrackerTimeout),clearTimeout(t.pmRollTrackerTimeoutInstant),t.pmRollTrackerTimeoutInstant=setTimeout(function(){t.cantTrackInstantHover||(c.track(e,"HOVER:0MS",i),setTimeout(function(){t.cantTrackInstantHover=!1},2e3)),t.cantTrackInstantHover=!0},0),t.pmRollTrackerTimeout=setTimeout(function(){c.track(e,"HOVER:2500MS",i)},a)}),c.mouseleave(t,function(){clearTimeout(t.pmRollTrackerTimeout)}))},call:function(e,t){if(e)try{e.apply(this,t||[])}catch(i){c.warn("Callback error"),c.warn(i)}},contentload:function(e){var t=c.d,i=400,a=function(){return t.body&&(c.getWindow(t).outerHeight>=i||t.body.scrollHeight>=i||c.gbcr(t.body).height>=i)?e():void setTimeout(a,10)};a()},domload:function(e,t){function i(){n||(n=!0,o())}var a=t||c.d,o=function(){a.pmdomready||(a.pmdomready=!0),c.call(e)},n=!1,r=function(){"complete"!==a.readyState||n||(a.detachEvent("onreadystatechange",r),n=!0,o())};if("complete"===a.readyState||a.pmdomready)return n=!0,o(),!0;if(a.addEventListener?a.addEventListener("DOMContentLoaded",function(){n||(n=!0,o())},!1):a.all&&!window.opera&&a.attachEvent&&a.attachEvent("onreadystatechange",r),/Safari/i.test(c.getNavigator().userAgent))var s=setInterval(function(){/loaded|complete/.test(a.readyState)&&!n&&(n=!0,o(),clearInterval(s))},50);return c.addEvent(c.getWindow(a),"load",i,!1),!1},getBrowser:function(){var e=c.getNavigator(),t=e.userAgent;if(t.search("Edge")>=0)try{return{name:"edge",version:parseInt(t.match(/Edge\\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Chrome")>=0)try{return{name:"chrome",version:parseInt(t.match(/Chrome\\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Safari")>=0)try{return{name:"safari",version:parseInt(t.match(/Version\\/([.0-9]+)/)[1],10)}}catch(i){}else if(t.search("Firefox")>=0)try{return{name:"firefox",version:parseInt(t.match(/Firefox\\/([0-9]+)/)[1],10)}}catch(i){}else if("Microsoft Internet Explorer"===e.appName)try{var a=!1,o=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!==o.exec(t)&&(a=parseFloat(RegExp.$1)),10===a?{name:"trident",version:6}:{name:"msie",version:a}}catch(i){}else if(e.userAgent.match(/Trident/))try{return{name:"trident",version:e.userAgent.match(/Trident\\/([0-9])\\./)[1]}}catch(i){}return{name:"other",version:1}},getDevice:function(){var e,t,i,a=c.getNavigator(),o=a.userAgent,n=o.match(/iPad|iPod|iPhone/)?"ios":o.match(/Android/)?"android":o.match(/Windows/)?"windows":o.match(/Macintosh/)?"mac":"";return i=o.match(/GoogleTV|SmartTV|Internet TV|NetCast|NETTV|AppleTV|boxee|Kylo|Roku|DLNADOC|CE\\-HTML/i)?"desktop":o.match(/Xbox|PLAYSTATION 3|Wii/i)?"desktop":o.match(/iP(a|ro)d/i)||o.match(/tablet/i)&&!o.match(/RX-34/i)||o.match(/FOLIO/i)?"tablet":o.match(/Linux/i)&&o.match(/Android/i)&&!o.match(/Fennec|mobi|HTC Magic|HTCX06HT|Nexus One|SC-02B|fone 945/i)?"tablet":o.match(/Kindle/i)||o.match(/Mac OS/i)&&o.match(/Silk/i)?"tablet":o.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||o.match(/MB511/i)&&o.match(/RUTEM/i)?"tablet":o.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google Wireless Transcoder/i)?"mobile":o.match(/Opera/i)&&o.match(/Windows NT 5/i)&&o.match(/HTC|Xda|Mini|Vario|SAMSUNG\\-GT\\-i8000|SAMSUNG\\-SGH\\-i9/i)?"mobile":o.match(/Windows (NT|XP|ME|9)/)&&!o.match(/Phone/i)&&!o.match(/Bot|Spider|ia_archiver|NewsGator/i)||o.match(/Win( ?9|NT)/i)?"desktop":o.match(/Macintosh|PowerPC/i)&&!o.match(/Silk/i)?"desktop":o.match(/Linux/i)&&o.match(/X11/i)&&!o.match(/Charlotte/i)?"desktop":o.match(/CrOS/)?"desktop":o.match(/Solaris|SunOS|BSD/i)?"desktop":o.match(/curl|Bot|B-O-T|Crawler|Spider|Spyder|Yahoo|ia_archiver|Covario-IDS|findlinks|DataparkSearch|larbin|Mediapartners-Google|NG-Search|Snappy|Teoma|Jeeves|Charlotte|NewsGator|TinEye|Cerberian|SearchSight|Zao|Scrubby|Qseero|PycURL|Pompos|oegp|SBIder|yoogliFetchAgent|yacy|webcollage|VYU2|voyager|updated|truwoGPS|StackRambler|Sqworm|silk|semanticdiscovery|ScoutJet|Nymesis|NetResearchServer|MVAClient|mogimogi|Mnogosearch|Arachmo|Accoona|holmes|htdig|ichiro|webis|LinkWalker|lwp-trivial|facebookexternalhit/i)&&!o.match(/phone|Playstation/i)?"bot":"desktop",e=o.match(/(OS|Android|Windows Phone OS) ([0-9._]+)/),t=e?parseFloat(e[2].replace(/[_.]/,"@").replace(/[._]/g,"").replace("@","."),10):o.match(/Windows NT 6.1/)?7:o.match(/Windows NT 6.2/)?8:o.match(/Windows NT 6.1/)?9:void 0,"tablet"===i&&"windows"===n&&(i="desktop"),{name:i,version:t,os:n}},hasFlash:function(){if("undefined"!=typeof c.overrideFlashValue)return c.overrideFlashValue;var e=!1,t=c.getNavigator();try{t.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}catch(i){}var a;if(!e)try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=!!a}catch(i){}if(!e)try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=!!a}catch(i){}if(!e)try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e=!!a}catch(i){}return"safari"===c.browser.name&&(e=!1),e},canPlayVideo:function(e){return c.canPlayHTML5Video(e)||c.canPlayFlashVideo(e)},canPlayHTML5Video:function(e){var t=[];if("string"==typeof e){if(!c.exist(c.getExtention(e),c.allowedHTML5VideoFormat))return void 0;c.canPlayThisVideo(e)&&t.push(c.canPlayThisVideo(e))}else"object"==typeof e&&c.each(e,function(){c.exist(c.getExtention(this),c.allowedHTML5VideoFormat)&&c.canPlayThisVideo(this)&&t.push(c.canPlayThisVideo(this))});if(t.length>0){for(var i=0;i<t.length;i++)if("vp9"===c.getCodec(t[i]))return t[i];return t[0]}return void 0},canPlayFlashVideo:function(e){return c.hasFlash()?"string"==typeof e?c.exist(c.getExtention(e),c.allowedFlashVideoFormat)?e:void 0:"object"==typeof e?c.each(e,function(){return c.exist(c.getExtention(this),c.allowedFlashVideoFormat)?this:void 0}):void 0:void 0},canPlayThisVideo:function(e){var t,i="video/"+c.getExtention(e),a=document.createElement("video"),o=c.getCodec(e);return t=c.html5VideoRules(c.getCodec(e)),void 0===t&&(t=a.canPlayType&&"probably"===a.canPlayType(i+(o.match(/^vp/)?";codecs="+o:""))?!0:!1),t?e:void 0},getCodec:function(e){return"webm"===c.getExtention(e)?e.match(/\\.vp9\\.webm/i)?"vp9":"vp8":c.getExtention(e)},getExtention:function(e){if(!e)return"";if(e.match(/dai\\.ly/)||e.match(/\\:\\/\\/www.dailymotion.com/))return"dailymotion";var t=e.replace(/\\?.*?$/gi,"").match(/\\.([a-zA-Z0-9]{2,5})$/);return t&&t[1]?t[1].toLowerCase():""},getFileName:function(e){if(!e)return"";var t=e.replace(/\\?.*?$/gi,"").split("/").pop();return t.replace("."+t.getExtention,"")},getFileType:function(e){var t=e;"object"==typeof e&&(t=e[0]);var i=(t||"").toString().match(/^data:([^\\/]+)/);if(i)return i[1];switch(c.getExtention(t)){case"swf":return"swf";case"png":case"gif":case"jpg":case"jpeg":return"image";case"flv":case"f4v":case"mp4":case"ogg":case"ogv":case"webm":case"video":case"dailymotion":return"video";case"php":case"html":return"html";default:return"html"}},getVideoCodec:function(e){if(!e)return"";var t=e.replace(/\\?.*?$/gi,"").match(/.{1,}\\.([a-zA-Z0-9]{2,5})\\.[a-zA-Z0-9]{2,5}$/);return t&&t[1]?t[1].toLowerCase():""},applyStyle:function(e,t){c.each(t,function(t){try{c.setPropertyValue(e,t,this.toString())}catch(i){}})},addBorders:function(e,t){var i={color:"#000",size:1,side:["top","right","bottom","left"],zIndex:2147483647};"static"===c.getPropertyValue(e,"position")&&(e.style.position="relative",e.style.top="0px",e.style.left="0px"),c.extend(t,i),c.log("Adding border to %s %s",e,t);var a=c.getDocument(e),o=function(i){var o=a.createElement("div");c.applyStyle(o,{width:"top"===i||"bottom"===i?"100%":t.size+"px",height:"top"===i||"bottom"===i?t.size+"px":"100%",background:t.color,position:"absolute",zIndex:t.zIndex,top:"bottom"===i?"auto":0,bottom:"bottom"===i?0:"auto",left:"right"===i?"auto":0,right:"right"===i?0:"auto"}),e.appendChild(o)};c.each(t.side,function(){o(this.toString())})},createCSS:function(e,t,i){if("string"!=typeof t){var a=[];for(var o in t)t.hasOwnProperty(o)&&a.push(o+": "+t[o]);t=a.join("; ")}try{var n=i||c.d;if(!n.styleSheets||0===n.getElementsByTagName("head").length)return;n.pmCreateCSSId||(n.pmCreateCSSId=c.random()),"undefined"==typeof c.stylesheets[n.pmCreateCSSId]&&(c.stylesheets[n.pmCreateCSSId]=!1);var r,s,l,d=c.stylesheets[n.pmCreateCSSId];if(d||(l=n.createElement("style"),l.type="text/css",n.getElementsByTagName("head")[0].appendChild(l),c.stylesheets[n.pmCreateCSSId]=l.sheet||n.styleSheets[n.styleSheets.length-1],d=c.stylesheets[n.pmCreateCSSId]),s=d.media,r=typeof s,"string"===r){for(var p=0;p<d.rules.length;p++)if(d.rules[p].selectorText.toLowerCase()===e.toLowerCase())return void(d.rules[p].style.cssText+=t);d.addRule(e,t)}else if("object"===r){for(var u=0;u<d.cssRules.length;u++)try{if(d.cssRules[u]&&d.cssRules[u].selectorText&&d.cssRules[u].selectorText.toLowerCase()===e.toLowerCase())return void(d.cssRules[u].style.cssText+=t)}catch(m){}d.insertRule(e+"{"+t+"}",0)}}catch(m){c.warn(m)}},createCSSs:function(e,t){for(var i in e)e.hasOwnProperty(i)&&c.createCSS(i,e[i],t)},loadScript:function(e){var t=e.document||c.d,i=t.createElement("script");i.src=e.uri,t.body.appendChild(i);var a=function(){e.validate?e.validate()&&!i.validated?(i.validated=!0,e.callback()):setTimeout(a,50):e.callback()};i.addEventListener?i.addEventListener("load",a,!1):i.onreadystatechange=function(){"loaded"===this.readyState&&a()}},getPropertyValue:function(e,t){if(e){switch(t){case"scrollTop":case"scroll-top":return"BODY"===e.nodeName?c.getPageScroll()[1]:(e.documentElement||e).scrollTop||e.scrollTop}return c.w.getComputedStyle?c.w.getComputedStyle(e).getPropertyValue(c.dasherize(t)):e.currentStyle?e.currentStyle[t]:void 0}},setPropertyValue:function(e,t,i){switch(t){case"scrollTop":return"BODY"===e.nodeName&&e.ownerDocument.documentElement&&"number"==typeof e.ownerDocument.documentElement.scrollTop&&(e.ownerDocument.documentElement.scrollTop=parseInt(i,10)),e.scrollTop=parseInt(i,10)}return e.style[t]=i},returnAbsolute:function(e,t){return e.match(/^(http|\\/\\/)/i)?e:t+e},get:function(e,t){var i=t||c.d;return i.getElementById(e)?i.getElementById(e):document.getElementById(e)},remove:function(e){e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)},getPrevElement:function(e){for(var t=0,i=e.previousSibling;1!==i.nodeType&&20>t;)i=i.previousSibling,t++;return 1===i.nodeType?i:null},getNextElement:function(e){for(var t=0,i=e.nextSibling;1!==i.nodeType&&20>t;)i=i.nextSibling,t++;return 1===i.nodeType?i:null},handleAsset:function(t,i,a,o,n){var r,s=null,l=t.files||t.file;if(l&&""!==l||(t.backup&&""!==t.backup?(l=t.backup,s=!1):c.warn("No file provided to handleAsset for %s",a)),r=c.getFileType(t.file),s=null!==s&&""!==s?c.getExtention(t.backup):!1,c.log("Load assets for "+a+", type : "+r),t.overrideFileType&&(r=t.overrideFileType),"video"===r||"dailymotion"===r){if(e.piximedia.Video&&t.handleVideo){var d=c.copy(t);return d.position=n.position,new e.piximedia.Video(i,{files:l,width:t.enforceSize?t.width:100,height:t.enforceSize?t.height:100,unit:t.enforceSize?"px":"%",poster:t.backup,packshot:t.packshot||!1,options:d})}return"video"}return c.isArray(t.file)&&(t.file=t.file[0]),"swf"===r?c.hasFlash()?c.embedSWF({file:c.returnAbsolute(l,o),wrapper:i,id:a,width:t.width,height:t.height,version:t.flashversion,flashvars:t.flashvars,params:t.params,attributes:t.attributes}):t.backup?(c.log("Flash is off, switching to backup"),c.loadImage(c.returnAbsolute(t.backup,o),i,a,t.width,t.height)):(c.log("Flash is off and no backup provided"),!1):"image"===r?c.loadImage(c.returnAbsolute(t.file,o),i,a,t.width,t.height):"html"===r?(t.zoom=parseFloat(t.zoom,10)||1,t.width="number"==typeof t.width?t.width/t.zoom:t.width,t.height="number"==typeof t.height?t.height/t.zoom:t.height,c.loadIframe(c.returnAbsolute(t.file,o),i,a,t.width,t.height,n,t.zoom,t.scaleIframe,t.waitExpandToDecorate,t.options)):!1},loadImage:function(e,t,i,a,o){if(e&&""!==e){var n=c.getDocument(t).createElement("img");return c.applyStyle(n,{width:a+(c.getUnit(a,!0)?"":"px"),height:o+(c.getUnit(o,!0)?"":"px"),display:"block",border:"0"}),n.id="pm-image-"+i,n.src=e,t.appendChild(n),n}},loadIframe:function(t,i,a,o,n,r,s,l,d,p){if(p=p||{},t&&""!==t){var u,m=!1,h=!1,f={getOptions:{method:function(){return p}},getClickActions:{method:function(){return r?r.clickUrl:[]}},track:{method:function(e,t){return r?(c.track(r,e,a,t),{event:[e,t],success:!0}):(c.warn("pmData not here"),{event:[e,t],success:!1})}},show:{method:function(){c.getWindow(i.ownerDocument).setStage&&c.getWindow(i.ownerDocument).setStage(!1,"show")}},hide:{method:function(){c.getWindow(i.ownerDocument).setStage&&c.getWindow(i.ownerDocument).setStage(!1,"hide")}},close:{method:function(){c.getWindow(i.ownerDocument).setStage&&c.getWindow(i.ownerDocument).setStage(!1,"close")}},replayTakeover:{method:function(){r.framedAd&&r.framedAd.pam.emit("replay-takeover",{id_ad:r.adIdAlliance})}},"footer-action":{method:function(e,t){switch(e){case"expand":m.expand(r.clickUrl&&r.clickUrl[t].url?r.clickUrl[t].url:t,m.isExpanded?!0:!1);break;case"collapse":m.collapse();break;case"show":m.show();break;case"hide":m.hide()}}}};if(r)var v=0,g=setInterval(function(){e.piximedia.pmData5418_1&&e.piximedia.pmData5418_1.adIdAlliance===r.adIdAlliance&&"click"!==e.piximedia.pmData5418_1.openmode&&(m=e.piximedia.pmData5418_1,h&&u()),(m||200===v)&&clearInterval(g),v++},50);var y,b,w="pm_iframe_"+c.random();return y=c.getDocument(i).createElement("iframe"),y.style.width=o+(c.getUnit(o,!0)?"":"px"),y.style.height=n+(c.getUnit(n,!0)?"":"px"),y.style.border="0",y.allowfullscreen=!0,y.scrolling="no",y.name=w,t.match(/%%click_tracker%%/)&&(t=t.replace(/%%click_tracker%%/,encodeURIComponent(r.clickUrl[1].tracking))),d?y.src="":y.src=t,y.setAttribute("data-src",t),i.appendChild(y),1!==s&&(y.style.zoom=s),u=function(){y.contentWindow.postMessage({method:"allowFooterExpand"},"*")},b=function(e){if((!e.data.id||e.data.id===w)&&e.data.method&&f[e.data.method]){var t=f[e.data.method].method.apply(this,e.data.args);e.source&&e.source.postMessage({method:e.data.callback,args:t},e.origin),"getClickActions"===e.data.method&&m&&e.source&&e.source.postMessage({method:"allowFooterExpand"},e.origin),h=!0}},c.addEvent(c.getWindow(i.ownerDocument),"message",b),y.destroy=function(){c.removeEvent(c.getWindow(i.ownerDocument),"message",b)},l&&(y.style.position="relative",c.onResize(i,function(){var e=c.gbcr(i);y.style.transform="scale("+e.width/o+")",y.style.left=(e.width-o)/2+"px",y.style.top=(e.height-n)/2+"px"})),y}},insertText:function(e,t,i){var a=c.getDocument(i),o=a.createElement("div");o.appendChild(a.createTextNode(e)),\nc.applyStyle(o,t),i.appendChild(o)},embedSWF:function(t){function i(){var e="";return c.each(t.params,function(t){e+="<param name=\'"+t+"\' value=\'"+this+"\'>"}),e}function a(){var e=" ";return c.each(t.attributes,function(t){e+=" "+t+"=\'"+this+"\'"}),e}function o(){var i="";return c.each(t.flashvars,function(a){var o=t.flashvars[a];"function"!=typeof o&&"object"!=typeof o&&(o="undefined"!=typeof o?o.toString():"undefined","string"==typeof o?(o.match(/^\\/\\//)&&(o=(e.piximedia.pam?e.piximedia.pam.globalOptions.protocol+":":c.w.location.protocol)+o),i+=o.match(/&/)?a+"="+encodeURIComponent(o)+"&":a+"="+o+"&"):i+=a+"="+o+"&")}),i=i.replace(/\\&$/i,"")}if(!c.hasFlash())return void c.warn("Flash is not available");if(!t.file||!t.wrapper)return void c.warn("embedSWF improper arguments");var n={file:"",wrapper:{},id:"unit",width:"300",height:"250",version:"9.0.0",flashvars:c.flashdata.getDefaultFlashvars(),params:c.flashdata.getDefaultParams(),attributes:c.flashdata.getDefaultAttributes(),addWrapper:!1},r="",s=c.getDocument(t.wrapper).createElement("div");c.extend(t,n),r=\'<!--[if !IE]> --><object id="pmfooter-flash-\'+t.id+\'" type="application/x-shockwave-flash"  data="\'+t.file+\'" width="\'+t.width+\'" height="\'+t.height+\'"\'+a()+\'><!-- <![endif]--><!--[if IE]><object id="pmfooter-flash-\'+t.id+\'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="\'+t.width+\'" height="\'+t.height+\'"><param name="movie" value="\'+t.file+\'"/><!--><!--dgx--> <param name="allowscriptaccess" value="always" />\'+i()+\'<param name="flashvars" value="\'+o()+\'" /></object>\',t.addWrapper?(t.wrapper.appendChild(s),s.innerHTML=r):t.wrapper.innerHTML+=r;var l=c.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id);return l&&!l.style.width&&(l.style.width=t.width+(c.hasUnit(t.width)?"":"px")),l&&!l.style.height&&(l.style.height=t.height+(c.hasUnit(t.height)?"":"px")),c.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id)},flashdata:{getDefaultFlashvars:function(){return{}},getDefaultParams:function(){return{loop:!0,menu:!1,quality:"high",salign:"tr",allowfullscreen:"true",wmode:"opaque",scale:"noscale"}},getDefaultAttributes:function(){return{salign:"bottom",wmode:"opaque",style:"position : relative; visibility : visible;"}}},isMobileSite:function(e){var t=e||c.d,i=c.getViewportSize(c.getWindow(t)),a=i[0]>i[1]?1:0;return screen.width&&parseInt(i[a]-screen.width,10)<10?!0:!1},canUseCSS3:function(){var e=function(){var e=document.createElement("div"),t="Khtml Ms O Moz Webkit".split(" "),i=t.length;return function(a){if(a in e.style)return!0;for(a=a.replace(/^[a-z]/,function(e){return e.toUpperCase()});i--;)if(t[i]+a in e.style)return!0;return!1}}();return e("transition")?!0:!1},fixTracking:function(e,t){if("string"!=typeof e.clickUrl[0]){if(e.tracking&&e.tracking.clickUrl)for(var i=0;i<e.tracking.clickUrl.length;i++)e.clickUrl[i]||(e.clickUrl[i]={url:""}),e.clickUrl[i].url=e.tracking.clickUrl[i];if(e.tracking&&e.tracking.pixelUrl)for(var a=0;a<e.tracking.pixelUrl.length;a++)e.pixelUrl[a]=e.tracking.pixelUrl[a];t.advertiserClickUrls&&"object"==typeof t.advertiserClickUrls&&null!==t.advertiserClickUrls&&c.each(t.advertiserClickUrls,function(i){e.clickUrl[i]||(e.clickUrl[i]={url:"",tracking:""}),e.clickUrl[i].url=t.advertiserClickUrls[i]}),t.advertiserClickUrl&&(e.clickUrl[0].url=t.advertiserClickUrl),c.each(e.clickUrl,function(){this.tracking=t.getTrackedUrl("CLICK",""),t.clickUrl&&(this.url=t.clickUrl+this.url)}),"string"==typeof e.clickUrl[0].url&&e.clickUrl.unshift(""),e.trackingFixed=!0}},PixelPrinter:function(e,t){if(e){var i=e.replace(/\\[timestamp\\]/gi,c.random()).replace(/\\[random\\]/gi,c.random()).replace(/\\[random_number\\]/gi,c.random());if(c.log("Printing pixel : "+i),"msie"===c.browser.name&&c.browser.version<9||!document.body||!t){var a=new Image;a.src=i}else{var o=document.createElement("img");o.style.display="none",o.width=o.height=o.border="0",t.appendChild(o),o.src=i}}},getViewportSize:function(e){var t,i,a=e||c.w,o=c.getNavigator();return o.userAgent.match(/ipad/i)?(t=a.innerWidth,i=a.innerHeight):"undefined"!=typeof a.innerWidth?(t=a.innerWidth,i=a.innerHeight):"undefined"!=typeof a.document.documentElement&&"undefined"!=typeof a.document.documentElement.clientWidth&&0!==a.document.documentElement.clientWidth?(t=a.document.documentElement.clientWidth,i=a.document.documentElement.clientHeight):(t=a.document.getElementsByTagName("body")[0].clientWidth,i=a.document.getElementsByTagName("body")[0].clientHeight),[t,i]},getPageScroll:function(e){var t=e||c.w,i=t.document,a=0,o=0;return void 0!==t.self.pageYOffset?(o=t.pageYOffset,a=t.pageXOffset):i.documentElement&&void 0!==i.documentElement.scrollTop&&i.documentElement.scrollTop?(o=i.documentElement.scrollTop,a=i.documentElement.scrollLeft):i.body&&i.body.scrollTop&&(o=i.body.scrollTop,a=i.body.scrollLeft),[a,o]},setDocumentFocus:function(){c.pageActive||(c.pageActive=!0,c.fireEvent("focus-change",c.pageActive))},bindFocusEvent:function(){function t(){c.pageActive||(c.pageActive=!0,c.fireEvent("focus-change",c.pageActive)),c.removeEvent(c.d,"mousemove",t)}function i(){c.pageActive&&(c.pageActive=!1,c.fireEvent("focus-change",c.pageActive))}var a=c.getBrowser(),o=c.getDevice();("mobile"===o.name||"tablet"===o.name)&&t(),"msie"===a.name&&a.version<10?(c.mouseenter(c.d,t),c.addEvent(c.d,"focusin",function(){t()}),c.addEvent(c.d,"focusout",function(){i()})):(c.addEvent(c.w,"focus",t),c.addEvent(c.w,"blur",function(){var e=c.d.getElementsByTagName("iframe"),t=!1;c.each(e,function(){try{t=c.isMouseInside(this)}catch(e){}}),t||i(),i()}),c.mouseenter(c.d,t)),c.addEvent(c.w,"scroll",t),c.addEvent(c.d,"mousemove",t),e.piximedia.preview&&t()},bindVisibilityTracker:function(e,t){var i,a={object:null,threshold:60},o=!1;if(c.extend(e,a),!e.object&&!e.query)return void c.warn("bindVisibilityTracker %s","object missing or not an object");if(e.query&&(e.object=c.querySelector(e.query)),c.getDocument(e.object)!==c.d){var n=c.getOwnerFif(e.object);e.object=n||e.object}return i=setInterval(function(){if(c.pageActive){var a=c.gbcr(e.object),n=c.getViewportSize(),r={top:parseInt((a.height+a.top)/Math.min(a.height,n[1])*100,10),right:parseInt((a.right-n[0]-a.width)/Math.min(a.width,n[0])*-100,10),bottom:parseInt((a.bottom-n[1]-a.height)/Math.min(a.height,n[1])*-100,10),left:parseInt((a.width+a.left)/Math.min(a.width,n[0])*100,10)},s=!1;if(a.error)return clearInterval(i),void c.call(t,[!1,!0]);r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==o&&(c.call(t,[s]),o=s),e.object.isVisible=s}},500),c.bindEvent("focus-change",function(){c.pageActive?o&&(e.object.isVisible=!0,c.call(t,[!0])):(e.object.isVisible=!1,c.call(t,[!1]))}),{clear:function(){clearInterval(i)}}},bindVisibilityTrackerWithoutFocus:function(e,t){var i,a={object:null,threshold:60},o=!1;if(c.extend(e,a),!e.object)return void c.warn("bindVisibilityTracker %s","object missing or not an object");if(c.getDocument(e.object)!==c.d){var n=c.getOwnerFif(e.object);e.object=n||e.object}return i=setInterval(function(){var a=c.gbcr(e.object),n=c.getViewportSize(),r={top:parseInt((a.height+a.top)/Math.min(a.height,n[1])*100,10),right:parseInt((a.right-n[0]-a.width)/Math.min(a.width,n[0])*-100,10),bottom:parseInt((a.bottom-n[1]-a.height)/Math.min(a.height,n[1])*-100,10),left:parseInt((a.width+a.left)/Math.min(a.width,n[0])*100,10)},s=!1;return a.error?(clearInterval(i),void c.call(t,[!1,!0])):(r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==o&&(c.call(t,[s]),o=s),void(e.object.isVisibleWithoutFocus=s))},500),{clear:function(){clearInterval(i)}}},getVisibility:function(e){var t,i,a,o=c.gbcr(e);if(t=o.top>0?0:o.top,i=o.bottom>0?0:o.bottom,a=o.height+t+i,!c.pageActive)return 0;if(0>a)return 0;var n=o.top>c.getViewportSize()[1]||isNaN(a/o.height)?0:a/o.height;return n},watchVisibility:function(e){e.percents=[],e.getAverage=function(){var i=t(e.percents);return e.percents=[],i};var t=function(e){var t,i=0;return c.each(e,function(){i+=this}),t=i/e.length},i=function(){var i=0;e.objects.length&&(c.each(e.objects,function(){var e=c.getVisibility(this.dom);if(i+=e,!this.percents){var a=this;a.percents=[],a.getAverage=function(){var e=t(a.percents);return a.percents=[],e}}this.percents.push(e)}),i>1&&(i=1),e.percents.push(i))};i(),setInterval(function(){i()},500)},bindViewTracker:function(e,t){var i,a,o={object:null,threshold:60,duration:10},n=0,r=!1;return c.extend(e,o),e.object?(a=c.bindVisibilityTracker(e,function(e,t){t?clearInterval(i):r=e}),void(i=setInterval(function(){r&&n++,e.object.viewTimer=n,n===e.duration&&(clearInterval(i),a.clear(),c.call(t))},1e3))):void c.warn("bindViewTracker %s","object missing or not an object")},gettext:function(e,t){return t&&c.translations[t]&&c.translations[t][e]?c.translations[t][e].toUpperCase():e.toUpperCase()},Loader:function(e){e.duration||(e.duration=1e3);var t,i=c.getDocument(e.wrapper),a=i.createElement("div"),o=i.createElement("div");a.className="pm-loader-background",o.className="pm-loader",e.wrapper.appendChild(a),e.wrapper.appendChild(o),c.createCSSs({"@keyframes pm-loader-rotate-anim":"100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }","@keyframes pm-loader-dash-anim":"0% { stroke-dasharray: 1,200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px; } 100% { stroke-dasharray: 89,200; stroke-dashoffset: -124px; }","@keyframes pm-loader-color-anim":"100%, 0% { stroke: #F2F2F2; } 40% { stroke: #F2F2F2; } 66% { stroke: #F2F2F2; } 80%, 90% { stroke: #F2F2F2; }"},i);var n=function(){c.addClass(e.wrapper,"pm-loader-start"),"circle"===e.type&&(o.innerHTML=\'<svg class="pm-loader-circular" style="\'+c.getPrefixedEvent("animation")+": pm-loader-rotate-anim "+e.duration/1e3+\'s linear;" viewbox="25 25 50 50">	<circle class="back" cx="50" cy="50" r="20" fill="none" stroke="#9D9D9D" stroke-width="3" stroke-miterlimit="10"/>	<circle class="pm-loader-circular-path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10" style="\'+c.getPrefixedEvent("animation")+": pm-loader-dash-anim "+e.duration/1e3+"s ease-in-out, pm-loader-color-anim "+e.duration/1e3+\'s ease-in-out;"/></svg>\',t=setTimeout(function(){e.complete()},e.duration))},r=function(){c.removeClass(e.wrapper,"pm-loader-start"),"circle"===e.type&&(o.innerHTML="",clearTimeout(t))};return{start:n,clear:r}},Browser:function(e){var t=e.uri;e.openmode?"overtake"===e.openmode&&(e.exposureTime=0):e.openmode=e.newtab?"newtab":"expand",e.uri=e.exposureTime>0?"newtab"===e.openmode?e.position.getTrackedUrl("AP_VISIT_NEW_TAB",e.uri):e.position.getTrackedUrl("AP_VISIT",e.uri):e.position.getTrackedUrl("CLICK",e.uri);var i=c.d.createElement("div");i.id="pm-browser",i.innerHTML="<div id=\'pm-browser-header\'>	<div id=\'pm-browser-title\'><span>"+(e.title||"")+"</span></div>	<div id=\'pm-browser-tools\'>		<div id=\'pm-browser-facebook\' class=\'pm-browser-tool\'>			<span class=\'pm-browser-icon pm-browser-facebook\'></span>			<span class=\'pm-browser-tooltip\'>"+c.gettext("Partage sur Facebook")+"</span>		</div>		<div id=\'pm-browser-twitter\' class=\'pm-browser-tool\'>			<span class=\'pm-browser-icon pm-browser-twitter\'></span>			<span class=\'pm-browser-tooltip\'>"+c.gettext("Partage sur Twitter")+"</span>		</div>		<div id=\'pm-browser-close\' class=\'pm-browser-tool\'>			"+c.gettext("FERMER")+" X		</div>	</div></div><div id=\'pm-browser-iframe\'></div>",c.each(i.querySelectorAll(".pm-browser-tool"),function(){var e=this;c.addEvent(e,"mouseenter",function(){c.addClass(e,"pm-browser-tool-display-tooltip")}),c.addEvent(e,"mouseleave",function(){c.removeClass(e,"pm-browser-tool-display-tooltip")})}),c.addEvent(i.querySelector("#pm-browser-facebook"),"click",function(){e.position.loadEvent("AP_FACEBOOK"),window.open("http://www.facebook.com/share.php?v=4&src=bm&u="+encodeURIComponent(t),"_blank")}),c.addEvent(i.querySelector("#pm-browser-twitter"),"click",function(){e.position.loadEvent("AP_TWITTER"),window.open("http://twitter.com/share?url="+t+"&text="+e.title,"_blank")}),c.addEvent(i.querySelector("#pm-browser-close"),"click",function(){e.position.loadEvent("AP_CLOSE"),n()}),e.disableSocial&&(i.querySelector("#pm-browser-facebook").style.display="none",i.querySelector("#pm-browser-twitter").style.display="none"),c.addEvent(i.querySelector("#pm-browser-title span"),"click",function(){n(),e.openmode="newtab";var t=new c.Browser(e);t.open()});var a,o=function(){if("overtake"===e.openmode)e.position.loadEvent("AP_VISIT_SAME_TAB"),top.location=e.uri;else if("newtab"===e.openmode)window.open(e.uri,"_blank"),c.startNavigationTrackingForBrowser(e);else{if(!c.browserCSSLoaded)return setTimeout(o,100);c.d.body.appendChild(i);var t=function(){i.querySelector("#pm-browser-iframe").innerHTML="";var t={},o=c.handleAsset({width:"100%",height:"100%",file:e.uri},i.querySelector("#pm-browser-iframe"),"pm-browser-frame","",t);o.scrolling="auto",o.name=e.name||"piximedia-frame",o.setAttribute("allowfullscreen",!0),a=c.startNavigationTrackingForBrowser(e)};setTimeout(function(){c.animate(i,{height:"100%",oncompleted:function(){if(e.prehome){e.dontSendImpression=!0,e.prehome.width="100%",e.prehome.height="100%",e.wrapper=i.querySelector("#pm-browser-iframe"),e.framedAd=e.position.decoratedBy;var a=new c.w.piximedia.Decoratr({data:e});a.decorate(),a.onclick=function(){n(),e.openmode="newtab";var t=new c.Browser(e);t.open()}}else t();c.animate(i.querySelector("#pm-browser-header"),{top:0}).play()}}).play()},0),c.setTimer("OUVERTURE",function(t,i){e.position.loadEvent("TIMETRACKER::"+t,{duration:i})}).start()}e.exposureTime||c.sendKpiPixels(e.kpiPixels)},n=function(t){a&&a.clear&&a.clear(),c.animate(i.querySelector("#pm-browser-header"),{top:30,duration:100,oncompleted:function(){c.animate(i,{height:"0%",oncompleted:function(){c.d.body.removeChild(i),t||e.clearCallback()}}).play()}}).play()};return{open:o,close:function(){n(!0)}}},sendKpiPixels:function(e){e&&""!==e&&e.length>0&&("string"==typeof e?c.PixelPrinter(e):c.each(e,function(){c.PixelPrinter(this.toString())}))},startNavigationTrackingForBrowser:function(e){var t,i=function(t){return"NAV"===t?"newtab"===e.openmode?"AP_NEW_TAB_NAV_":"AP_NAV_":"VISIT"===t?"newtab"===e.openmode?"AP_VISIT_NEW_TAB":"AP_VISIT":void 0},a=[3,5,10,15,20,30],o=!0,n=0,r=setInterval(function(){n++,-1!==a.indexOf(n)&&e.position.loadEvent(i("NAV")+n),e.exposureTime&&e.exposureTime===n&&(e.position.loadEvent("CLICK"),c.sendKpiPixels(e.kpiPixels))},1e3);return setTimeout(function(){o=!1},5e3),t=function(){o&&e.position.loadEvent("AP_REBOUND"),clearInterval(r),"newtab"===e.openmode&&(c.removeEvent(c.w,"focus",t),c.removeEvent(c.w,"focusin",t),c.removeEvent(c.w,"mousemove",t))},"newtab"===e.openmode&&(c.addEvent(c.w,"focus",t),c.addEvent(c.w,"focusin",t),c.addEvent(c.w,"mousemove",t)),e.exposureTime||e.position.loadEvent(i("VISIT")),{clear:t}},startViewTracking:function(t){var i={isVisible:!1};e.piximedia["view_"+t.adIdAlliance]||(e.piximedia["view_"+t.adIdAlliance]={viewableMetrics:{1:!0,2:!0,5:!0,10:!0,20:!0,30:!0,40:!0},viewableCount:0});var a=e.piximedia["view_"+t.adIdAlliance];return setInterval(function(){i.isVisible&&a.viewableCount++,a.viewableMetrics[a.viewableCount]&&(a.viewableMetrics[a.viewableCount]=!1,t.framedAd.loadEventOnce("AP_VIEWABLE_GLOBAL:"+a.viewableCount+"S")),"cpm"===t.saleMode&&t.minExposureTime>0&&(a.viewableCount!==t.minExposureTime||a.clickSent||(a.clickSent=!0,c.sendKpiPixels(t.kpiPixels),t.position.loadEvent("CLICK",{c5:"cpmview"})))},1e3),i},startNavigationTracking:function(e){e.positionId&&(e.framedPosition=window.piximedia.pam.positions["1x1"]);var t,i=[3,5,10,15,20,30],a=!0,o=0,n=setInterval(function(){o++,-1!==i.indexOf(o)&&c.track(e,"AP_NEW_TAB_NAV_"+o)},1e3);setTimeout(function(){a=!1},5e3),t=function(){a&&c.track(e,"AP_REBOUND"),clearInterval(n),c.removeEvent(c.w,"focus",t),c.removeEvent(c.w,"focusin",t),c.removeEvent(c.w,"mousemove",t)},c.addEvent(c.w,"focus",t),c.addEvent(c.w,"focusin",t),c.addEvent(c.w,"mousemove",t),c.track(e,"AP_VISIT_NEW_TAB")},setTimer:function(e,t){function i(){n||(n=!0,c.call(t,[e,o])),clearInterval(a),c.removeEvent(window,"beforeunload",i),c.removeEvent(window,"unload",i)}var a,o=0,n=!1,r=!1;return c.addEvent(window,"beforeunload",i),c.addEvent(window,"unload",i),{start:function(){a=setInterval(function(){c.pageActive&&!r&&o++},1e3)},pause:function(){r=!0},resume:function(){r=!1},stop:function(){i()}}},setObjectTimer:function(e,t,i){function a(){r||(r=!0,c.call(i,[e,n])),clearInterval(o),c.removeEvent(window,"beforeunload",a),c.removeEvent(window,"unload",a)}var o,n=0,r=!1,s=!1;return c.addEvent(window,"beforeunload",a),c.addEvent(window,"unload",a),c.bindVisibilityTracker({object:t}),{start:function(){o=setInterval(function(){t.isVisible&&!s&&n++},1e3)},pause:function(){s=!0},resume:function(){s=!1},stop:function(){a()}}},cookie:{set:function(e,t,i){var a=i||1,o=new Date,n=o.getTime()+864e5*parseInt(a,10);n=new Date(n),document.cookie=e+"="+t+(a?";expires="+n.toGMTString():"")+";path=/"},get:function(e){var t=document.cookie.split(";"),i="",a="",o="",n=!1;return c.each(t,function(){return i=this.split("="),a=i[0].replace(/^\\s+|\\s+$/g,""),a===e?(n=!0,i.length>1&&(o=window.unescape(i[1].replace(/^\\s+|\\s+$/g,""))),o):(i=null,void(a=""))}),n?o:null}},supportFullScreen:function(e){var t=e||c.d;return t.documentElement.requestFullscreen||t.documentElement.msRequestFullscreen||t.documentElement.mozRequestFullScreen||t.documentElement.webkitRequestFullscreen||!1},toggleFullScreen:function(e,t){var i=t||c.d;if(i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement)i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen();else{if(!e)return;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},hasUnit:function(e){return parseInt(e,10).toString()!==e.toString()},getUnit:function(e,t){var i="px";return"number"==typeof e||parseFloat(e,10)===e?t?!1:i:e.replace(/^(\\-|[0-9]|\\.)+/i,"")},animate:function(e,t){function i(i){l.clear();var a=!1;if(null!==t.zindex&&c.applyStyle(e,{zIndex:t.zindex}),t.css){var o={},n=function(o){a||(a=!0,setTimeout(function(){a=!1},200),c.removeEvent(e,c.getPrefixedEvent("transitionend"),n),l.clear=function(){},setTimeout(function(){c.call(t.onplayed),c.call(t.oncompleted),c.call(i),o||c.call(t.onchange)},0))};c.addEvent(e,c.getPrefixedEvent("transitionend"),n),l.clear=function(){c.removeEvent(e,c.getPrefixedEvent("transitionend"),n)};var r=!0;c.each(d,function(t){var i=d[t];i.hack?(i.getHack(e,i.rule).toString()!==i.end.toString()&&(r=!1),i.hack(e,i.end+i.unit)):(c.getPropertyValue(e,i.rule).toString()!==(i.end+i.unit).toString()&&(r=!1),o[i.rule]=i.end+i.unit)}),r?n(!0):(c.applyStyle(e,o),0===t.duration&&n(!0))}else{m=m?d[0].length-m:0;var s=setInterval(function(){c.each(d,function(t){var i=d[t],a={};a[i.rule]=i.play_array[m]+i.unit,c.applyStyle(e,a),d[t].hack&&d[t].hack(e,i.play_array[m]+i.unit)}),m++,m===d[0].length&&(clearInterval(s),a||(a=!0,setTimeout(function(){a=!1,m=0},200),c.call(t.onplayed),c.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(s)}}}function a(i){l.clear();var a=!1;if(t.css){var o={},n=function(o){a||(a=!0,setTimeout(function(){a=!1},200),c.removeEvent(e,c.getPrefixedEvent("transitionend"),n),l.clear=function(){},setTimeout(function(){c.call(t.onreversed),c.call(t.oncompleted),c.call(i),o||c.call(t.onchange)},0))};c.addEvent(e,c.getPrefixedEvent("transitionend"),n),c.each(d,function(t){var i=d[t];i.hack?i.hack(e,i.start+i.unit):o[i.rule]=i.start+i.unit}),l.clear=function(){c.removeEvent(e,c.getPrefixedEvent("transitionend"),n)},c.applyStyle(e,o)}else{m=m?d[0].length-m:0;var r=setInterval(function(){c.each(d,function(t){var i=d[t],a={};a[i.rule]=i.reverse_array[m]+i.unit,c.applyStyle(e,a),d[t].hack&&d[t].hack(e,i.reverse_array[m]+i.unit)}),m++,m===d[0].length&&(clearInterval(r),a||(a=!0,setTimeout(function(){a=!1,m=0},200),c.call(t.onreversed),c.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(r)}}}if(!e||!t)return c.warn("No object or no options provided"),{play:function(){},reverse:function(){}};if(!c.isInDOM(e))return c.warn("Object is not in DOM!"),{play:function(){},reverse:function(){}};c.log("New animation on :"),c.log(e),c.log("Options :"),c.log(t);var o,n,r,s,l={},d=[],p=e.id||"sweetlib-animate-id-"+c.random(),u=c.getDocument(e),m=0,h=t.framerate||10;if(l.play=i,l.reverse=a,l.options=t,l.properties=d,l.clear=function(){},o={forcejs:!1,nojs:!1,effect:"ease-in",css:!1,animateanyway:!1,zindex:null,oncompleted:function(){},onplayed:function(){},onreversed:function(){}},r=["forcejs","nojs","duration","effect","css","animateanyway","oncompleted","onplayed","onreversed","anchor","zindex"],s=["width","height","top","right","bottom","left"],n={opacity:{unit:"",hack:{set:function(e,t){"msie"===c.browser.name&&c.browser.version<=8?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t},get:function(e){if("msie"===c.browser.name&&c.browser.version<=8)return c.getPropertyValue(e,"filter")&&c.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)?parseInt(c.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)[1],10)/100:1;var t=c.getPropertyValue(e,"opacity");return void 0===t||""===t?1:t}}},transform:{unit:"",hack:{set:function(e,t){e.style[c.getPrefixedProperty("transform")]=t},get:function(e,t){var i=c.getPropertyValue(e,c.getPrefixedProperty("transform"));if(!i||"none"===i){var a=t.match(/^[a-z]+\\((.*?)\\)/i)[1];i=t.replace(a,"0")}return i}}},zIndex:{unit:""},zoom:{unit:""}},c.extend(t,o),"undefined"==typeof t.duration&&(t.duration=500),e.SweetLibAnimate)e.SweetLibAnimate.clear();else if(t.anchor)switch(e.parentNode.style.width=c.gbcr(e).width+"px",e.parentNode.style.height=c.gbcr(e).height+"px",e.style.position="absolute",t.anchor){case"TR":e.style.right="0",e.style.top="0"}if(e.SweetLibAnimate=l,(c.canUseCSS3()&&!t.forcejs||t.nojs)&&(t.css=!0),e.id||(e.id=p),c.each(t,function(i){if(!c.exist(i,r)){var a,o,l,p,u=t[i],m="",h=!1;"string"==typeof u?(u.match(/^(\\+|\\-)=/i)?(m=u.match(/(^.*?)[0-9]/i)[1],l=u.replace(m,"")):u.match(/^[a-z]+\\(.*?\\)/i)?(l=u,h=!0):l=u,h||(parseFloat(l,10).toString()!==l&&(p=c.getUnit(l)),l=parseFloat(l,10))):l=u,o=n[i]&&n[i].hack&&n[i].hack.get?n[i].hack.get(e,t[i]):parseFloat(c.getPropertyValue(e,i),10),!isNaN(o)||n[i]&&n[i].hack&&n[i].hack.get||(o="auto"===c.getPropertyValue(e,i)&&c.exist(i,s)?c.gbcr(e)[i]:0),a={rule:i,rawvalue:t[i],start:o,end:m?"+="===m?o+l:"-="===m?o-l:l:l,unit:p?p:n[i]?n[i].unit:"px",hack:n[i]&&n[i].hack&&n[i].hack.set?n[i].hack.set:!1,getHack:n[i]&&n[i].hack&&n[i].hack.get?n[i].hack.get:!1,duration:t.duration,effect:t.effect},d.push(a)}}),t.css){var f=[];c.each(d,function(t){var i=d[t],a=c.getPrefixedProperty(c.dasherize(i.rule));f.push(a+" "+i.duration/1e3+"s "+i.effect),e.style[a]=i.start+i.unit}),f=f.join(",")+" !important;";var v=c.getPropertyValue(e,"transition")||"",g=c.getPropertyValue(e,"-ms-transition")||"";v.match(/all /)&&(v=""),g.match(/all /)&&(g=""),v.match(/[a-z]/)&&(v+=", "),g.match(/[a-z]/)&&(g+=", "),c.createCSS("#"+e.id,"transition : "+v+" "+f,u),c.createCSS("#"+e.id,"-ms-transition : "+g+" "+f,u)}else c.each(d,function(e){d[e].play_array=[],d[e].reverse_array=[];for(var t=parseInt(d[e].duration/h,10),i=(d[e].end-d[e].start)/t,a=d[e].start,o=d[e].end,n=0;t>=n;n++)n===t-1?(d[e].play_array.push(o),d[e].reverse_array.push(a)):(d[e].play_array.push(a+i*n),d[e].reverse_array.push(o-i*n));d[e].length=t});return l},parseCSSInt:function(e){switch(e){case"auto":case"inherit":return 0;case"thin":return 1;case"medium":return 3;case"thick":return 5;default:return e?parseInt(e,10):0}},hasGluedText:function(e,t){t||(t=0);var i,a,o,n,r,s=e.getClientRects();if(!s)return!1;for(r=0;r<s.length;r++)(void 0===i||s[r].left<i)&&(i=s[r].left),(void 0===a||s[r].top<a)&&(a=s[r].top),(void 0===o||s[r].bottom>o)&&(o=s[r].bottom);n=o-a;var l=function(e){var o;try{if(e.innerHTML&&!e.innerHTML.match(/</)&&e.innerHTML.match(/\\S/)){var r=e.getClientRects();for(o=0;o<r.length;r++)if(r[o].right-r[o].left>0&&r[o].left>=i&&r[o].left-i<=t){var s;try{s=c.getPropertyValue(e,"padding-left")}catch(d){}if(r[o].left-i+c.parseCSSInt(s)<=t&&"center"!==c.getPropertyValue(e,"text-align"))return r[o].top}}else{var p,u;for(o=0;e.children&&e.children.length&&o<e.children.length;o++){var m=e.children[o],h=c.gbcrfp(m);if(h.left>=i){var f=l(e.children[o]);f&&(!u||u>f)&&(u=f,p=m)}}if(u){var v=u-a;return.9*n>v}}return!1}catch(d){}};return l(e)},getInheritedBackground:function(e){var t=c.getPropertyValue(e,"background"),i=!1;if(!e.ownerDocument.pmDefaultBackground){var a=e.ownerDocument.createElement("div");a.style.background="none",e.ownerDocument.body.appendChild(a),e.ownerDocument.pmDefaultBackground=c.getPropertyValue(a,"background"),e.ownerDocument.body.removeChild(a)}switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":i=!0;break;default:t===e.ownerDocument.pmDefaultBackground&&(i=!0)}return i?"HTML"===e.tagName?"white":c.getInheritedBackground(e.parentNode):t},getInheritedBackgroundColor:function(e){var t=c.getPropertyValue(e,"background-color");switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":return"HTML"===e.tagName?"white":c.getInheritedBackgroundColor(e.parentNode);default:return t}},hardenWidthOfPageContainer:function(e,t){e.pmNodesWithHardenedWidth=[];for(var i=c.getAllFlowedSiblings(e),a=e.ownerDocument.pmPagecontainerHints,o="pc-only"===a["harden-width-of"],n=0;n<i.length;n++){var r=i[n];if(!o||r===e){var s=c.gbcr(r);if(!n||s.width>t){if(c.isWidthInPercentage(r)){var l=c.getPropertyValue(r,"left"),d=c.getPropertyValue(r,"margin-left"),p=c.getPropertyValue(r,"margin-right");"auto"!==l&&"0px"!==l||"0px"!==d||"0px"!==p||(r.style.margin="0 auto")}if("content-box"===c.getPropertyValue(r,"box-sizing")){var u=parseFloat(c.getPropertyValue(r,"padding-left")||0,10),m=parseFloat(c.getPropertyValue(r,"padding-right")||0,10);u>0&&(t-=u),m>0&&(t-=m)}r.style.width=t+"px",r.style.maxWidth=t+"px",e.pmNodesWithHardenedWidth.push(r)}}}if("mobile"===c.device.name){for(var h,f,v=e.ownerDocument,g=v.getElementsByTagName("meta"),y=0;y<g.length;y++)if(f=g[y],"viewport"===f.name){h=!0;break}if(!h){f=v.createElement("meta"),f.name="viewport",f.content="width="+t;var b=v.getElementsByTagName("head")[0];b&&b.appendChild(f)}}},getPositionFixedHeaders:function(e,t){e=e||c.d,t=t||{};var i=!!t.force;if(i){if(e._pmPositionFixedHeadersForcedAt){var a=Date.now()-e._pmPositionFixedHeadersForcedAt;if(200>a)return e._pmPositionFixedHeadersForcedData}}else if(e._pmPositionFixedHeaders)return e._pmPositionFixedHeaders;var o,n=[],r=c.getViewportSize(),s=0,l=c.getPageScroll(),d=l[0];do{o=!1;for(var p=0;p<c.blockContentTagNames.length;p++)for(var u=e.getElementsByTagName(c.blockContentTagNames[p]),m=0;m<u.length;m++){var h=u[m],f=c.gbcr(h);if(!(f.right<=0||f.bottom<=0)&&"0px"!==c.getPropertyValue(h,"bottom")){var v=c.getPropertyValue(h,"top"),g=c.getPropertyValue(h,"position");if(f.left+=d,f.right+=d,("fixed"===g||(g=c.getPropertyValue(h.parentNode,"position"),"fixed"===g))&&("auto"===v&&0===f.top&&(v=0),(!v||Math.abs(f.top-s)<=4&&Math.abs(parseInt(v,10)-s)<=4)&&f.width>300&&0!==f.height&&f.height<500&&Math.round(f.height)!==r[1])){if(!c.isVisible(h))continue;try{if("auto"===v)continue;if(h.className.match(/pmContainer|oPmTV_sticker|pmMarkerContainer/))continue;if("clickable"===h.id)continue;var y=parseInt(f.bottom,10);y>s&&(s=y,o=!0),n.push(h)}catch(b){}}}}}while(o);return i?(e._pmPositionFixedHeadersForcedAt=Date.now(),e._pmPositionFixedHeadersForcedData=n):e._pmPositionFixedHeaders=n,n},getHeightOfPositionFixedHeaders:function(e,t,i){var a=c.getPositionFixedHeaders(e,i);if(i=i||{},a&&a.length){var o=0,n=0;t&&(n=c.gbcr(t).top),i.fillerHeight&&(n-=i.fillerHeight);for(var r,s,l=0;l<a.length;l++){var d=c.gbcr(a[l]);d.height&&((void 0===r||d.top<r)&&(r=d.top),(void 0===s||d.bottom>s)&&(s=d.bottom)),d.top>=n&&(o+=d.height)}return void 0!==r&&void 0!==s?s-r:o}},preventMarginCollapse:function(e,t){if(!e.pmPreventedMarginCollapse){var i=e.ownerDocument.createElement("div");return e.pmPreventedMarginCollapse=i,i.style.display="block",i.style.padding="0.1px 0 0 0",i.style.margin="-0.1px 0 0 0",i.style.border="none",i.className="pmPreventMarginCollapse",e.insertBefore(i,t||e.firstChild),i}},isWidthInPercentage:function(e){if(!e.parentNode)return!1;var t=c.gbcr(e.parentNode),i=e.parentNode.style.width,a=c.getPropertyValue(e,"width");e.parentNode.style.width=t.width+2+"px";var o=c.getPropertyValue(e,"width");e.parentNode.style.width=i,e.parentNode.style.width=t.width-2+"px";var n=c.getPropertyValue(e,"width");return e.parentNode.style.width=i,a!==o&&a!==n},fixPageContainerForWallpaper:function u(e){if(e){e.id||(e.id="pmPageContainer");var t=e.ownerDocument.pmPagecontainerHints||c.getPageContainerHints()||{},i=t["enable-fix-pc-static"]===!1?!1:!0;if(t.cssFixForPageContainerAndWallpaper&&c.applyStyle(e,t.cssFixForPageContainerAndWallpaper),t.css&&c.createCSSs(t.css),!t.noDefaultFixPageContainerForWallpaper){u.store=u.store||{};var a=u.store[e.id]=u.store[e.id]||{},o=c.getPropertyValue(e,"left");if(("0px"===o||"0"===o||"auto"===o)&&(o=0),e&&!o){var n;if("object"==typeof t.width&&t.width.query)n=a.pageContainerOriginalWidth=c.getPageContainerWidth(e);else if(a.pageContainerOriginalWidth)n=a.pageContainerOriginalWidth;else if(e.pmPCWidth)n=a.pageContainerOriginalWidth=e.pmPCWidth;else{if(n=c.getPageContainerWidth(e),c.hasGluedText(e)){c.log("Text is glued to the PC, can we add some bonus?"),n+=c.pcBonusWidthWhenGluedText;var r=e.style.width;e.style.width=n+"px",c.hasGluedText(e)&&(c.log("We cannot enlarge the PC, maybe we can add some padding, though"),n-=c.pcBonusWidthWhenGluedText,e.style.width=r,e.style.paddingLeft=c.parseCSSInt(c.getPropertyValue(e,"padding-left"))+c.pcBonusWidthWhenGluedText/2+"px",e.style.paddingRight=c.parseCSSInt(c.getPropertyValue(e,"padding-right"))+c.pcBonusWidthWhenGluedText/2+"px")}try{var s=c.gbcrfp(e.parentNode),l=c.parseCSSInt(c.getPropertyValue(e.parentNode,"padding-left")),d=c.parseCSSInt(c.getPropertyValue(e.parentNode,"padding-right")),p=c.parseCSSInt(c.getPropertyValue(e,"border-left-width")),m=c.parseCSSInt(c.getPropertyValue(e,"border-right-width"));n-=p,n-=m;var h=s.width-l-d;if((n===h||n+p+m===h)&&c.isWidthInPercentage(e)&&c.isWidthInPercentage(e.parentNode)){var f=function(e){for(var t=null,i=0;e.children&&e.children.length&&i<e.children.length;i++){var a=e.children[i],o=c.gbcrfp(a),n=o.width,r=parseInt(c.getPropertyValue(a,"max-width"),10)||0;r&&r===Math.round(h)&&(t=Math.max(t,Math.min(h,r))),n>=h&&(n=f(a)),h>n&&n>t&&o.height>50&&(t=n)}return t},v=f(e);if(v){v>n&&(n=v);for(var g=!0,y=e.parentNode;y&&"BODY"!==y.tagName;y=y.parentNode)if(!c.isWidthInPercentage(y)){g=!1;break}g&&(n=v)}}a.pageContainerOriginalWidth=n}catch(b){}}e.style.position="relative",c.createCSS("#"+e.id,"position: relative !important",e.ownerDocument),n&&c.hardenWidthOfPageContainer(e,n);var w=c.getPropertyValue(e,"float"),x=c.getPropertyValue(e,"display");"left"===w||"right"===w||"inline-block"===x?(e.style.left="50%",e.style.marginLeft=-(n/2)+"px"):e.style.marginLeft=e.style.marginRight="auto",a.preventMarginCollapse||(a.preventMarginCollapse=c.preventMarginCollapse(e));for(var k=c.getAllFlowedSiblings(e),_=0;_<k.length;_++){var S=k[_];try{var I=c.getPropertyValue(S,"background-image");if(!I.match(/url/)){var E=c.getInheritedBackgroundColor(S);S.style.backgroundColor=E}}catch(b){}}for(var P=c.getPositionFixedHeaders(e.ownerDocument),A=0;A<P.length;A++){var b=P[A];try{var T=c.getPropertyValue(b,"top");\nT&&0!==parseInt(T,10)||(b.style.top="0px")}catch(C){}}for(var O=!1,D=e.parentNode.children||[],N=!1,F=0;F<D.length;F++){var L=D[F];if(L!==e){if(N&&"static"===c.getPropertyValue(L,"position")){var j=c.gbcr(L);if(j.width>1&&j.height>1){O=!0;break}}}else N=!0}for(var M=[],R=0;R<k.length;R++){var B=k[R];if("static"===c.getPropertyValue(B,"position")){var U=c.gbcr(B);U.width>1&&U.height>1&&(O=!0,M.push(B))}}if(O){if("android"===c.device.os)for(var V=e.parentNode.children||[],W=0;W<V.length;W++){var q=V[W];"static"===c.getPropertyValue(q,"position")&&(q.className+=" pmFixPCChildStatic")}else"BODY"!==e.parentNode.tagName&&(i&&(e.parentNode.className+=" pmFixPCStatic"),c.createCSS(".pmFixPCStatic > *","transform: translateZ(0.001px)"),c.createCSS(".pmFixPCStatic > .pmBodyPosition","transform: none"));for(var z=0;z<M.length;z++)M[z].className+=" pmFixPCChildStatic";c.createCSS(".pmFixPCChildStatic","position: relative; float: none !important")}}c.fixSite(e)}}},getHeightOfNextSiblings:function(e){for(var t=0;e&&(e=e.nextSibling);)if(1===e.nodeType)switch(c.getPropertyValue(e,"position")){case"absolute":case"fixed":break;default:var i=c.gbcrfp(e);i.height&&(t+=i.height)}return t},getAllFlowedSiblings:function m(e,t){t=t||{};var i,a=function(e){var t=c.gbcrfp(e);if(!t.height)for(var i=0;e.children&&e.children.length&&i<e.children.length;i++){var a=e.children[i],o=c.gbcrfp(a);if(o.height)return o}return t},o=[e],n=a(e),r=n.bottom,s=n.width,d=c.isWidthInPercentage(e)||n.width===c.getViewportSize()[0],p=c.getViewportSize()[0],u=!1,h=e.pmPCHintedAbove;m.revision=m.revision||0;for(var f=m.revision++;;){var v=0;do{i=!1;e:for(var g=e.parentNode.firstChild;g;g=g.nextElementSibling||g.nextSibling)if(1===g.nodeType)switch(c.getPropertyValue(g,"position")){case"absolute":case"fixed":break;default:var y=a(g);if(d&&y.height&&y.width<s)break e;if(d&&y.height&&s===p&&y.width>s)break e;if(e.pmPCHintedAbove)y.top>=n.top+1&&o.push(g);else if(Math.abs(y.top-r)<.5&&y.height){if(u&&y.width-l>s)break e;if(g.pmGetAllFlowedSiblingsRevision!==f){g.pmGetAllFlowedSiblingsRevision=f,o.push(g),r=y.bottom,i=!0;break e}}}}while(i&&!h&&v++<300);if(i||h)break;if(t.lookupParent===!1)break;if(e=e.parentNode,u=!0,!e||"HTML"===e.tagName)break}return o},getAllFlowedSiblingsHeight:function(e){for(var t=c.getAllFlowedSiblings(e),i=0,a=0;a<t.length;a++)i+=c.gbcr(t[a]).height||0;return i},setBodyBackgroundColor:function(e){if(e=e||{},void 0!==e.color){for(var t=e.hints||c.getPageContainerHints()||{},i=(t.bodyBackgroundSelector||"body").split(","),a=[],o=c.d,n=0;n<i.length;n++)a.push("html.pmBodyBackground "+i[n]);null!==e.color?(c.createCSS(a.join(","),"background-color: "+e.color+" !important",o),o.body.parentNode.className.match("pmBodyBackground")||(o.body.parentNode.className+=" pmBodyBackground")):o.body.parentNode.className=o.body.parentNode.className.replace(/ pmBodyBackground/g,"")}},moveTopOfPageContainer:function h(e,t,i){if(e){e.id||(e.id="pmPageContainer"),i=i||{},h.store=h.store||{};var a=h.store[e.id]=h.store[e.id]||{};if(a.movedTopOfPageContainer=!0,a.oldPageContainerMetrics=a.oldPageContainerMetrics||{},!a.filler){var o=e.ownerDocument.getElementById("pmFiller");if(o)a.filler=o;else{var n=function(e){for(var t,i,a=c.gbcr(e).top,o=e.children||[],r=0;r<o.length;r++){var s=o[r];if("absolute"!==c.getPropertyValue(s,"position")){var l=parseFloat(c.getPropertyValue(s,"margin-top"),10),d=c.gbcr(s).top;Math.abs(d-l-a)<.5>0&&(!t||l>t)&&(t=l,i=s)}if(s.children&&s.children.length){var p=n(s),u=p.marginTop;u>0&&(!t||u>t)&&(t=u,i=p.element)}}return{marginTop:t,element:i}},r=n(e)||{},s=r.marginTop,l=r.element;a.filler=e.ownerDocument.createElement("span"),a.filler.id="pmFiller",a.filler.style.margin=0,a.filler.style.padding=0,a.filler.style.border="none",a.filler.style.display="block";var d=c.getOverflowYScroll(e),p=!d,u=c.getHeightOfPositionFixedHeaders(e.ownerDocument,e);s&&u>=s&&(p&&(a.filler.style.marginTop=s+"px"),l&&l.style&&(l.style.marginTop="0")),e.parentNode.insertBefore(a.filler,e);var m=c.gbcrfp(a.filler),f=m.top;if(u&&u>f){var v=parseInt(a.filler.style.marginTop,10)||0;if(p){a.filler.style.marginTop=v+(u-f)+"px";var g=c.gbcrfp(a.filler);g.top<u&&(a.filler.style.marginTop=v+"px")}}}}return i.duration?(void 0===a.filler.style.height&&(a.filler.style.height=0),c.animate(a.filler,{height:t+"px",duration:i.duration}).play()):a.filler.style.height=t+"px",a.filler.style.width=0,a.filler}},getVisiblePreviousSiblingUpwards:function(e){if(e||(e=this.getPageContainer())){var t=c.gbcrfp(e);if(t&&t.top){var i=function(e){for(var a=e.previousSibling;a;a=a.previousSibling)try{var o=c.gbcrfp(a),n=a.id.toString().match("ad")||a.id.toString().match("728x90")||a.className.match("728x90"),r=n&&o.height<20;if(o&&o.height&&!r&&o.width&&o.bottom>=0&&o.bottom<=t.top&&o.width>100)return a}catch(s){}return e=e.parentNode,"BODY"===e.tagName?void 0:i(e)};return i(e)}}},fixSite:function(e){if(c.log("Applying global fixes"),e){var t=e.ownerDocument;c.createCSS("body","margin: 0; width: 100% !important;",t);var i=c.gbcrfp(e),a=e.id;if(i.height){var o=c.parseCSSInt(c.getPropertyValue(e,"margin-top")),n=c.getVisiblePreviousSiblingUpwards(e),r=0;if(n){var s=c.gbcrfp(n);s&&(r=Math.max(0,i.top-s.bottom))}else r=i.top;r&&(a=e.id,a||(a="pmPageContainer",e.id=a),c.createCSS("body #"+a,"top: "+c.parseCSSInt(c.getPropertyValue(e,"top"))-r+"px",t),"static"===c.getPropertyValue(e,"position")&&c.createCSS("body #"+a,"position: relative",t),i.top-=r);var l,d=i.top,p=0,u=c.parseCSSInt(c.getPropertyValue(e,"margin-top")),m=c.parseCSSInt(c.getPropertyValue(e,"padding-top"));u>0&&(a||(a=e.id="pmPageContainer"),u-r>=0?c.hasGluedText(e)?(c.log("Merging page container margin-top: "+u+"px + paddingTop: "+m+"px"),c.createCSS("body #"+a,"margin-top: 0;	padding-top: "+(u+m)+"px !important",t)):(c.log("Dropping margin-top above page container: "+u+"px + paddingTop: "+m+"px"),c.createCSS("body #"+a,"margin-top: 0 !important",t)):r>0&&(c.log("Dropping margin-top above page container and below content: "+u+"px + paddingTop: "+m+"px"),c.createCSS("body #"+a,"margin-top: 0 !important",t)));for(var h=c.getPositionFixedHeaders(t),f=0;f<h.length;f++){var v=h[f];i=c.gbcrfp(v),i.height&&(p+=i.height)}if(d-o>=p){var g=c.getInheritedBackground(e),y=c.getInheritedBackground(e.parentNode);if(50>r&&g!==y)for(var b=c.gbcrfp(e).top,w=e.parentNode;"HTML"!==w.tagName&&c.gbcrfp(w).top===b;w=w.parentNode)if(parseInt(c.getPropertyValue(w,"margin-top"),10)===r){w.id||(w.id="pmPageContainerParentMarginZero"),c.createCSS("body #"+w.id,"margin-top: 0 !important",w.ownerDocument);break}}if(l=d-o,p>l){var x=p-l;l+=x}c.log("positionFixedHeaderHeight="+p),c.log("pageContainerTop="+d),c.log("pageContainerMarginTop="+o),c.log("setGoToTheTop="+l),l&&c.createCSS("body .pmGoToTheTop","top: "+l+"px !important;",t);var k=function(e){var t=c.gbcrfp(e);if(t.width&&t.height&&t.bottom<=d){c.log("Fixing background for header: ",e);var i=c.getInheritedBackgroundColor(e);e.style.backgroundColor=i}},_=function(e){for(var t=e.previousSibling;t;t=t.previousSibling)k(t);e.parentNode&&"HTML"!==e.parentNode.tagName&&_(e.parentNode)};_(e)}}},isInDOM:function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}},isVisible:function(e){var t=e.ownerDocument,i=function(e,i){return window.getComputedStyle?t.defaultView.getComputedStyle(e,null)[i]:e.currentStyle?e.currentStyle[i]:void 0},a=function(e){for(;e=e.parentNode;)if(e===t)return!0;return!1},o=function(e,t,n,r,s,l,d){var p=e.parentNode,c=2;return a(e)?9===p.nodeType?!0:"0"===i(e,"opacity")||"none"===i(e,"display")||"hidden"===i(e,"visibility")?!1:(("undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof s||"undefined"==typeof l||"undefined"==typeof d)&&(t=e.offsetTop,s=e.offsetLeft,r=t+e.offsetHeight,n=s+e.offsetWidth,l=e.offsetWidth,d=e.offsetHeight),p?"hidden"!==i(p,"overflow")&&"scroll"!==i(p,"overflow")||!(s+c>p.offsetWidth+p.scrollLeft||s+l-c<p.scrollLeft||t+c>p.offsetHeight+p.scrollTop||t+d-c<p.scrollTop)?(e.offsetParent===p&&(s+=p.offsetLeft,t+=p.offsetTop),o(p,t,n,r,s,l,d)):!1:!0):!1};return o(e)},breakOverflow:function(e,t){c.breakOverflowCalledOnce||(c.breakOverflowCalledOnce=!0,c.createCSS("body .pixi-break-overflow","overflow : visible !important;"));for(var i=c.getDocument(e).body,a=e.parentNode;a!==i;){var o="hidden"===c.getPropertyValue(a,"overflow"),n=!1;(a.className||"").match(/pmMarkerContainer/)||o&&(t.width&&c.gbcr(a).width<t.width&&(n=!0),t.height&&c.gbcr(a).height<t.height&&(n=!0),n?c.addClass(a,"pixi-break-overflow"):c.removeClass(a,"pixi-break-overflow")),a=a.parentNode}},coolDown:function(e,t){"function"==typeof e&&(t=e,e={});var i,a,o=e.interval||20,n=e.interval||21,r=e.duration||2e3,s=new Date,l=!1,d=0,p=function(){return l?void 0:(clearTimeout(i),clearInterval(a),l=!0,t())};i=setTimeout(p,r),a=setInterval(function(){var e=new Date;return d++,e.getTime()-s.getTime()<=n?p():void(s=e)},o)},querySelector:function(e,t){if(t=t||c.d,t.querySelector)return t.querySelector(e);var i=c.querySelectorAll(e);return i&&i.length?i[0]:null},querySelectorAll:function(e,t){if(t=t||c.d,t.querySelectorAll)return t.querySelectorAll(e);var i,a=t.createElement("style"),o=[];for(t.documentElement.firstChild.appendChild(a),t._qsa=[],a.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),a.parentNode.removeChild(a);t._qsa.length;)i=t._qsa.shift(),i.style.removeAttribute("x-qsa"),o.push(i);return t._qsa=null,o},getPageContainerHints:function f(){var e;if(f.cache)return f.cache;try{var t=c.getWindow(c.d);if(t.pmPageContainerHints)e=t.pmPageContainerHints;else{var i=c.w.localStorage.getItem("pmCustomFields");if(i){var a=JSON.parse(i);a.pageContainerHints&&(e=a.pageContainerHints)}}}catch(o){}if(!e&&c.w.piximedia&&c.w.piximedia._&&c.w.piximedia._.pams)for(var n in c.w.piximedia._.pams)if(c.w.piximedia._.pams.hasOwnProperty(n)){var r=c.w.piximedia._.pams[n];if(r&&r.globalOptions&&r.globalOptions.pageContainerHints){e=r.globalOptions.pageContainerHints;break}}if(e){for(var s in e)e.hasOwnProperty(s)&&null===e[s]&&delete e[s];return f.cache=e,e}},getPageContainerWidth:function(e,t){t=t||{};var i=t.hints||c.getPageContainerHints()||{};if(void 0!==e.pmPCWidth&&("object"!=typeof i.width||!i.width.query))return e.pmPCWidth;var a;if("object"==typeof i.width){var o=c.querySelector(i.width.query);o?a=c.gbcr(o).width:void 0!==i.width.defaults&&(a=parseFloat(i.width.defaults,10))}void 0===a&&(a=void 0!==i.width?parseFloat(i.width,10):void 0);var n=c.getAllFlowedSiblings(e);if(void 0===a){a=c.gbcr(e).width;for(var r=0,s=0;s<n.length;s++){var d=n[s],p=c.gbcr(d).width,u=parseFloat(c.getPropertyValue(d,"padding-left"),10),m=parseFloat(c.getPropertyValue(d,"padding-right"),10);p=p-(isNaN(u)?0:u)-(isNaN(m)?0:m),r=a+l>p?Math.max(r,Math.min(a+l,p)):(980===p||990===p||1e3===p||1200===p)&&a+5*l>p?Math.max(r,Math.min(a+5*l,p)):Math.max(r,a)}r>a&&(a=r)}return e.pmPCWidth=a,a},loadPageContainer:function v(e,t){"function"!=typeof e||t||(t=e,e={}),e=e||{};var i=e.hints||c.getPageContainerHints()||{},a=e.document||c.d;a.pmPagecontainerHints||(a.pmPagecontainerHints=i);var o=function(e){for(var o=c.getPageContainerWidth(e),n=c.getAllFlowedSiblings(e),r=0,s=0;s<n.length;s++){var l=c.gbcr(n[s]);l.height&&(r+=l.height)}for(var d=0,p=0;p<n.length;p++){var u=n[p];if(!c.isWidthInPercentage(u)){var m=c.gbcr(u);d+=m.height,!i.width&&m.width>o&&m.height&&.3*r>d&&(o=m.width)}}a.pmPageContainerSL=e;try{var h=c.getWindow(a);if(h.localStorage&&h.localStorage.getItem&&h.localStorage.setItem&&a.querySelectorAll){e.pmRandom=Math.random().toString();var f,g=h.localStorage.getItem("pmpccache"),y=h.localStorage.getItem("pmpccache_stats"),b=y?JSON.parse(y):{creation_date:Date.now(),counters:{}};if(g){var w=!1,x=JSON.parse(g)||{};if(x){if(Date.now()-x.date<864e5){var k=a.querySelector(x.query);w=k&&k.pmRandom===e.pmRandom}f=w?"match":"did-not-match"}else f="too-old"}else f="not-in-cache";f&&(h.piximedia&&h.piximedia.pam&&f!==v.lastStatus&&(v.lastStatus=f,h.piximedia.pam.loadEvent("JS:PC_CACHE",void 0,void 0,{detail:f})),b.counters[f]=(b.counters[f]||0)+1);var _=e.tagName;e.id&&!e.id.match(/^pm/)&&(_+="#"+e.id),e.className&&(_+="."+e.className.split(/\\s+/).join("."));var S=a.querySelectorAll(_);if(1===S.length){var I=S[0];I.pmRandom===e.pmRandom&&h.localStorage.setItem("pmpccache",JSON.stringify({date:Date.now(),version:1,query:_}))}h.localStorage.setItem("pmpccache_stats",JSON.stringify(b))}}catch(E){}return t(e,{width:o})},n=function(e){e=e||{};var n=c.getPageContainer(a,{lastChance:e.lastChance});switch(i.heuristics){case"above":for(var r,s,l=0;a.body.children&&a.body.children.length&&l<a.body.children.length;l++){var d=a.body.children[l],p=c.gbcrfp(d);c.innerHTML(d).length>100&&p.height>1&&p.top>=0&&(void 0===r||p.top<r)&&(r=p.top,s=d)}return a.pmPageContainerSL=s,s.pmPCWidth=c.getPageContainerWidth(n),s.pmPCHintedAbove=!0,t(s,{width:s.pmPCWidth});case"below":return o(n);default:return o(n)}};c.contentload(function(){if(i.query){var e=!1;c.domload(function(){setTimeout(function(){e=!0},2e3)},a);var t=function(){var r=c.querySelector(i.query,a);return r?o(r):e?n({lastChance:!0}):setTimeout(t,50)};t()}else c.domload(function(){return n()},a)})},innerHTML:function(e){try{return e.innerHTML}catch(t){try{return e.innerText}catch(i){return""}}},getOverflowYScroll:function(e){for(var t=0;e&&"HTML"!==e.tagName&&50>t;e=e.parentNode,t++)if("scroll"===c.getPropertyValue(e,"overflow-y"))return e;return void 0},getPageContainer:function(e,t){t=t||{},e=e||c.d;var i=e.pmPagecontainerHints||c.getPageContainerHints()||{};if(i.query){var a=c.querySelector(i.query,e);if(!t.lastChance||a)return a}if(e.pmPageContainerSL&&c.isInDOM(e.pmPageContainerSL))return e.pmPageContainerSL;for(var o,n,r=c.innerHTML,s=r(e.body).length,l=0,d=e.getElementsByTagName("script"),p=0;p<d.length;p++)try{l+=r(d[p]).length}catch(u){}s=r(e.body).length;var m,h=0,f=c.getViewportSize()[0],v=c.gbcr(e.body),g=function(e){var t,i=e.clientWidth,a=e.clientHeight,o=c.gbcrfp(e);return o&&(t=o.top),t>=0&&2>t&&a>0&&i>0&&100>a&&((e.id||"").toString().match(/cookie/i)||(e.className||"").match(/cookie/i)||(r(e)||"").match(/cookie/i))?("absolute"!==e.style.position&&"fixed"!==e.style.position&&(h=((o||{}).top||0)+a),!0):void 0},y=function(e,t){var i=e.clientWidth;t=t||c.getAllFlowedSiblings(e);for(var a=0,o=0;o<t.length;o++)a+=c.gbcr(t[o]).height;if(i===f){var n=m(e);if(n){var r=c.gbcr(n);if(r.width&&r.width<i)return n===e?e:y(n)}}var s=c.gbcrfp(t[0]);if(c.isWidthInPercentage(e))for(var l=0;l<t.length;l++){var d=c.gbcrfp(t[l]);if(d.top-s.top<500&&d.height>10){var p=m(t[l]);return p?p===e?e:y(p):t[l]===e?e:y(t[l])}}return e};m=function(e){for(var t=0;e.children&&e.children.length&&t<e.children.length;t++){var i=e.children[t];if(!g(i)){for(var a=0;a<c.blockContentTagNames.length;a++)if(i.tagName===c.blockContentTagNames[a]){var d,p=i.clientWidth,u=c.gbcrfp(i);if(u&&(d=u.top),0!==i.id.toString().search("pm")&&p>=Math.min(.5*v.width,890)&&u.height>0&&"fixed"!==i.style.position&&c.isVisible(i)&&i.children&&i.children.length>0){for(var f=c.getAllFlowedSiblings(i,{lookupParent:!1}),b=0,w=0;w<f.length;w++)b+=c.gbcr(f[w]).height;if(b>400){for(var x=0,k=0;k<f.length;k++)x+=r(f[k]).length;if(x>.05*(s-l)){if(!(h>=d)||c.getOverflowYScroll(i))return y(i,f);var _=m(i);if(_)return _;o=_||i}else o||(o=i),d>0&&!n&&(n=i)}}break}if(i.children&&i.children.length){var S=m(i);if(S)return S}}}};var b=m(e.body);return!b&&n&&(b=n),!b&&o&&(b=o),e.pmPageContainerSL=b,b},addOverlay:function(e){var t={root:c.d.body,fade:!1,timeout:0,onclick:null,before:!0,css:{width:"100%",height:"100%",background:"#000",opacity:.6,position:"fixed",top:"0",left:"0",display:"none",zIndex:2147483392}};e||(e={}),c.extend(e,t),e.onclick&&(e.css.cursor="pointer");var i,a=c.getDocument(e.root).createElement("div");return c.applyStyle(a,e.css),e.before?e.root.insertBefore(a,e.root.firstChild):e.root.appendChild(a),e.onclick&&c.addEvent(a,"click",e.onclick),{show:function(){e.fade&&c.applyStyle(a,{display:"block",opacity:0}),i=setTimeout(function(){e.fade?c.animate(a,{opacity:e.css.opacity}).play():c.applyStyle(a,{display:"block"})},e.timeout)},hide:function(){clearTimeout(i),e.fade?c.animate(a,{opacity:0,oncompleted:function(){c.applyStyle(a,{display:"none"})}}).play():c.applyStyle(a,{display:"none"})}}},makeUnderlay:function(e,t){e=e||{};var i=e.opacityDuration||250,a=top.document,o=a.createElement("div");o.id="pmUnderlay",o.className="pmUnderlay",o.style.position="fixed",t&&(o.style.cursor="pointer"),o.style.background="#222",o.style.border="3px solid #555",o.style.left=0,o.style.top=0,o.style.width="100%",o.style.height="100%",o.style.zIndex=s,o.style.opacity=0,c.addEvent(o,"click",t),a.body.appendChild(o);var n=c.animate(o,{duration:i,opacity:1});return n.play(),{remove:function(e){e=e||{},void 0!==e.duration&&(n.duration=e.duration),n.reverse(function(){o.parentNode.removeChild(o)})}}},getScrollbarWidth:function g(e){if(!e&&void 0!==g.cache)return g.cache;var t=(e||c.d.body).ownerDocument.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.margin="0",t.style.padding="0",(e||c.d.body).appendChild(t);var i=t.offsetWidth-t.clientWidth;return(e||c.d.body).removeChild(t),e||(g.cache=i),i},makeClose:function(e,t){e=e||{};var i=e.opacityDuration||250,a=top.document,o=a.createElement("div");o.style.position=e.position||"fixed",o.style.background="#555",o.style.border="3px solid #555",o.style.padding=e.padding,o.style.left=0,o.style.fontSize="18pt",o.style.color="white",o.style.top=e.top||0,o.style.cursor="pointer",o.style.textDecoration=e.textDecoration,o.innerHTML=e.text||"X",o.style.zIndex=c.LAYER_CLOSE,o.style.boxShadow="grey 2px 0px 10px",o.style.opacity=0,c.addEvent(o,"click",t),o.style.transition="all "+i/1e3+"s",a.body.appendChild(o);var n=c.animate(o,{duration:i,opacity:1});return n.play(),{element:o,remove:function(e){e=e||{},void 0!==e.duration&&(n.duration=e.duration),n.reverse(function(){o.parentNode.removeChild(o)})}}},enableResponsiveEventsForPageContainer:function(e,t){var i=c.getPageContainerHints()||{},a=c.gbcr(e).width;if("object"==typeof i.width&&i.width.query){var o=function(){var a=c.querySelector(i.width.query);return a?void setInterval(function(){for(var i=c.gbcr(e).width,o=e.pmNodesWithHardenedWidth||[],n=[],r=0;r<o.length;r++){var s=o[r];n[r]={width:s.style.width,maxWidth:s.style.maxWidth},s.style.width="",s.style.maxWidth=""}for(var l=c.gbcr(a).width,d=0;d<o.length;d++){var p=o[d];p.style.width=n[d].width,p.style.maxWidth=n[d].maxWidth}if(l!==i){c.hardenWidthOfPageContainer(e,l);var u={pageContainerWidth:l};t(u)}},500):setTimeout(o,100)};o()}c.onResize(e,function(){e.ownerDocument.body.className.match(/pmBodyAnimation/)||c.loadPageContainer({document:e.ownerDocument},function(e,i){var o=i.width;if(!(Math.abs(a-o)<.5)){a=o;var n={pageContainerWidth:o};t(n)}})})},eachSeries:function(e,t,i){e=e||[],i=i||function(){};var a=0,o=function(){a>=e.length?i():t(e[a],function(){a++,setTimeout(function(){o()},0)})};o()}};e.piximedia.PAM&&e.piximedia.PAM.on("ad.inject",function(e,t,i){i.pam.loadCSSInDocument("piximedia.style.20161402.css",e,function(){})}),c.VERSION=i,c.LAYER_CLOSE=o,c.LAYER_HIGHEST=n,c.LAYER_ALPHA=r,c.LAYER_UNDERLAY=s,e.piximedia["SweetLib"+i]=c,(!e.piximedia.SweetLib||e.piximedia.SweetLib.VERSION<i)&&(e.piximedia.SweetLib=c,c.start()),e.piximedia.libraryLoader&&e.piximedia.libraryLoader["sweetlib.js"]&&(e.piximedia.libraryLoader["sweetlib.js"].complete=!0)}(),function(){var e=window,t="sweetlib.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["sweetlib.js"]=window.piximedia.libraryLoader["sweetlib.js"]||{},window.piximedia.libraryLoader["sweetlib.js"].loaded=!0,!function(e){"use strict";function t(t,i){function a(){R=re("div"),R.id="pm-video-wrapper-"+X,R.className="pm-video-wrapper",W.applyStyle(R,{position:"relative",width:i.width+i.unit,height:i.height+i.unit,display:"block",background:i.options.transparent?"transparent":i.options.background,overflow:"hidden",textAlign:"left"}),t.appendChild(R)}function o(){R.parentNode===t,W.call(i.options.onerror)}function n(){function e(e){n?t(e):r.push(e)}function t(e){var t=W.getWindow(W.getDocument(R));t.sendMessage(e)}var a,o=j.split("?").shift().split("/").pop().split("_").shift(),n=!1,r=[];q("Load Dailymotion Video : %s",o),a=re("iframe"),a.id="pm-video-"+X,a.paused=!0,a.src="//www.dailymotion.com/embed/video/"+o+"?chromeless=1&html=1&wmode=transparent&api=postMessage&muted="+(i.options.muted?1:0)+"&start="+i.options.startTime+"&id="+X+"&autoplay="+(i.options.autoplay?"1":"0"),W.applyStyle(a,{width:"100%",height:"100%",border:0,position:"absolute"}),B={volume:i.options.muted?0:1,currentTime:0,paused:!1,play:function(t){"undefined"!=typeof t&&B.seek(t),e("play")},seek:function(t){0===t&&(t=.1),e("seek="+t)},pause:function(){e("pause")},mute:function(){e("mute")},unmute:function(){e("unmute")},eventList:{},addEventListener:function(e,t){B.eventList[e]||(B.eventList[e]=[]),B.eventList[e].push(t)},removeEventListener:function(e,t){B.eventList[e]&&-1!==B.eventList[e].indexOf(t)&&B.eventList[e].splice(B.eventList[e].indexOf(t),1)},triggerEnd:function(){p()},dailymotion:!0};var s=function(e){if(e.data.match(/event=(.*?)&/)&&e.data.match(/&id=/)&&parseFloat(e.data.match(/&id=(.*?)$/)[1],10)===X){var a=e.data.match(/event=(.*?)&/)[1];if("apiready"===a){if(n=!0,r.length>0)for(var o=0;o<r.length;o++)t(r[o]);var s=i.options.muted?0:1,l=0;setInterval(function(){B.volume!==s&&(s=B.volume,0===B.volume?B.mute():1===B.volume&&B.unmute()),Math.abs(B.currentTime-B.duration)<1&&l===B.currentTime&&B.triggerEnd(),l=B.currentTime},200),x()}else"timeupdate"===a?B.currentTime=parseFloat(e.data.match(/time=(.*?)(&|$)/)[1],10):"playing"===a?B.paused=!1:"durationchange"===a?B.duration=parseFloat(e.data.match(/duration=(.*?)(&|$)/)[1],10):"pause"===a?B.paused=!0:"ended"===a?p():"ad_end"===a&&B.play();if(("seeked"===a||"playing"===a)&&(a="canplay"),B.eventList[a]&&B.eventList[a].length>0)for(var d=0;d<B.eventList[a].length;d++)B.eventList[a][d]()}};W.addEvent(W.getWindow(R.ownerDocument),"message",s),R.appendChild(a)}function r(){q("Load HTML5 Video : %s",j),B=re("video"),B.id="pm-video-"+X,B.src=j,B.autoplay=!1,B.volume=i.options.muted?0:i.options.maxVol,W.applyStyle(B,{width:"100%",height:"100%",position:"absolute",background:"transparent"}),"desktop"!==W.device.name&&i.poster?B.poster=W.returnAbsolute(i.poster,i.baseUrl):B.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",B.addEventListener("loadstart",function(){q("Loadstart Event")}),B.addEventListener("abort",function(){z("Video aborted"),o()}),B.addEventListener("error",function(e){switch(z("Video error"),e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:z("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:z("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:z("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:z("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:z("An unknown error occurred.")}o()}),B.addEventListener("onloadeddata",function(){q("Data loaded, duration : %s",B.duration)}),B.addEventListener("loadedmetadata",function(){q("Metadata loaded, duration : %s",B.duration),c(),x(),"canvas"===M&&i.options.autoplay&&l(),("filledletterbox"===i.options.resizeMode||i.options.alphaChannel)&&(U=document.createElement("canvas"),U.style.position="absolute",U.width=W.gbcr(R).width,U.height=W.gbcr(R).height,R.insertBefore(U,B),l()),_()}),B.addEventListener("durationchange",function(){q("Duration changed"),x()}),B.addEventListener("ended",function(){p()}),R.appendChild(B)}function s(){q("Prepare canvas for video"),U=document.createElement("canvas"),U.style.position="relative",R.appendChild(U),U.width=W.gbcr(R).width,U.height=W.gbcr(R).height,B.playsinline=!0,B.webKitPlaysInline=!0,B.pausedonstart=!0,B.allowsInlineMediaPlayback=!0,B.preload="auto",B.autoplay="autoplay",B.load()}function l(){q("Start canvas video playing"),U.setAttribute("data-time",0),U.setAttribute("data-paused",!1);var e,t,a,o,n=function(e,t,i){return Math.round(128+-.168736*e-.331264*t+.5*i)},r=function(e,t,i){return Math.round(128+.5*e-.418688*t-.081312*i)},s=function(i,a){var o=Math.sqrt((e-i)*(e-i)+(t-a)*(t-a));return o};if(i.options.alphaChannel){var l=[],d=i.options.alphaChannel,c=d.chroma;l.push(parseInt(c.substr(1,2),16)),l.push(parseInt(c.substr(3,2),16)),l.push(parseInt(c.substr(5,2),16)),e=n.apply(null,l),t=r.apply(null,l),a=d.tolerance,o=d.tolerance+d.blur}var u,m=(new Date).getTime(),h=function(){if(window.requestAnimationFrame?window.requestAnimationFrame(h):setTimeout(h,1e3/i.options.framerate),F()){if(U.width=U.getAttribute("data-width"),U.height=U.getAttribute("data-height"),"canvas"===M){if("false"===U.getAttribute("data-paused")){var e=parseInt(((new Date).getTime()-m)/100,10)/10;e>B.duration?(C(),p(),m=(new Date).getTime(),e=0):u!==e&&(B.currentTime=e),u=e,U.setAttribute("data-time",e)}}else i.options.alphaChannel||(U.getContext("2d").fillStyle="rgba(0, 0, 0, 0.5)",U.getContext("2d").fillRect(0,0,U.getAttribute("data-width"),U.getAttribute("data-height")));if(U.getContext("2d").drawImage(B,0,0,U.getAttribute("data-width"),U.getAttribute("data-height")),i.options.alphaChannel&&U.width*U.height!==0){for(var t=U.getContext("2d").getImageData(0,0,U.width,U.height),l=U.width*U.height*4,d=0;l>d;d+=4){var c=[t.data[d+0],t.data[d+1],t.data[d+2]],f=n.apply(null,c),v=r.apply(null,c),g=s(f,v);if(a>g)t.data[d+3]=0;else if(o>g){var y=(g-a)/(o-a);t.data[d+3]=255*y}}U.getContext("2d").putImageData(t,0,0)}}};h()}function d(){var e=re("div"),t=!1;R.insertBefore(e,te),W.applyStyle(e,{position:"absolute",width:i.options.layer.width+"px",height:i.options.layer.height+"px",top:i.options.layer.top+"px",left:i.options.layer.left+"px",opacity:i.options.layer.animate?0:1,display:"none"}),W.handleAsset(i.options.layer,e,"video-layer",i.baseUrl),setInterval(function(){N()>=i.options.layer.time&&(N()<i.options.layer.time+i.options.layer.duration||!i.options.layer.duration)&&!t&&(t=!0,e.style.display="block",i.options.layer.animate&&W.animate(e,{opacity:1}).play(),setTimeout(function(){t=!1,i.options.layer.animate?W.animate(e,{opacity:0,onplayer:function(){e.style.display="none"}}).play():e.style.display="none"},1e3*i.options.layer.duration))},50)}function p(){function e(){i.options.loop?(W.each(fe,function(){this.sentThisLoop=!1}),T(0),B.hasBeenPaused=!1,Se++):(i.options.smartEnd&&(B._smartEndCalled||(B._smartEndCalled=!0,L(ve))),C(),k()),W.call(i.options.onend)}if(B.hasBeenPaused=!0,W.call(i.options.videoend),i.packshot&&i.packshot.file){var t=re("div");R.insertBefore(t,te),W.applyStyle(t,{position:"absolute",top:i.packshot.top?i.packshot.top+"px":"0",right:i.packshot.right?i.packshot.right+"px":"0",width:i.packshot.width?i.packshot.width+"px":"100%",height:i.packshot.height?i.packshot.height+"px":"100%"}),i.packshot.width="100%",i.packshot.height="100%",W.handleAsset(i.packshot,t,"video-packshot",i.baseUrl),ae&&(ae.style.display="none"),K&&(K.style.display="none"),i.packshot.duration&&setTimeout(function(){e(),t.parentNode.removeChild(t),ae&&(ae.style.display="block"),K&&(K.style.display="block")},1e3*i.packshot.duration)}else e()}function c(){var e,t=B.videoWidth/B.videoHeight;W.onResize(B.parentNode,function(){var a,o,n,r,s=W.gbcr(B.parentNode),l=s.width/s.height;if("canvas"===M)"fullsize"===i.options.resizeMode?t>l?(o=s.height,a=o*t,r=(s.width-a)/2,n=0):(a=s.width,o=a/t,r=0,n=(s.height-o)/2):(r=0,n=0,t>l?(a=s.width,o=a/t,n=(s.height-o)/2):(o=s.height,a=o*t,r=(s.width-a)/2)),a=parseInt(10*a,10)/10,o=parseInt(10*o,10)/10,n=parseInt(10*n,10)/10,r=parseInt(10*r,10)/10,U.setAttribute("data-width",a),U.setAttribute("data-height",o),U.style.top=n+"px",U.style.left=r+"px";else{var d=t>l?"fullsize"===i.options.resizeMode?"vertical":"horizontal":"fullsize"!==i.options.resizeMode?"vertical":"horizontal",p="auto",c="100%";"safari"===W.browser.name&&("vertical"===d?(p=s.height*t+"px",c=s.height+"px"):(p=s.width/t+"px",c=s.width+"px")),W.applyStyle(B,{height:"horizontal"===d?p:c,width:"horizontal"===d?c:p,left:"auto",right:"auto",top:"auto",bottom:"auto",transform:"none",webkitTransform:"none"}),"horizontal"===d?("B"===i.options.align[1]?B.style.bottom=0:"M"===i.options.align[1]?(B.style.top="50%",B.style.transform="translate(0, -50%)",B.style.webkitTransform="translate(0, -50%)"):B.style.top=0,B.style.right=0):("R"===i.options.align[0]?B.style.right=0:"M"===i.options.align[0]?(B.style.right="50%",B.style.transform="translate(50%, 0)",B.style.webkitTransform="translate(50%, 0)"):B.style.left=0,B.style.top=0),("filledletterbox"===i.options.resizeMode||i.options.alphaChannel)&&U&&(i.options.alphaChannel?i.options.framerate=25:(i.options.framerate=20,U.style.webkitFilter="blur(5px)"),U.setAttribute("data-width","vertical"===d&&"filledletterbox"===i.options.resizeMode?s.width:s.height*t),U.setAttribute("data-height","vertical"===d&&"filledletterbox"===i.options.resizeMode?s.width/t:s.height),U.style.left=("vertical"===d?0:(s.width-s.height*t)/2)+"px",U.style.top=("vertical"===d?(s.height-s.width/t)/2:0)+"px"),i.options.alphaChannel&&(B.style.visibility="hidden")}oe&&!i.options.fullsize&&W.applyStyle(oe,{width:B.style.width,height:B.style.height,left:B.style.left,right:B.style.right,top:B.style.top,bottom:B.style.bottom}),e=i.options.resizeMode})}function u(){q("Load Flash Video : %s",j);var e,t,a=(new Date).getTime();t=W.embedSWF({file:me,wrapper:R,width:"100%",height:"100%",id:i.id+"-"+a,flashvars:{src:j,resizeMode:i.options.resizeMode,callback:"pmFlashNotification"+a,maxVol:i.options.maxVol},params:{wmode:i.options.transparent?"transparent":"opaque"},attributes:{wmode:i.options.transparent?"transparent":"opaque"}}),e=function(e,i){try{if(t.control)return t.control(e,i)}catch(a){z("Flash communication error : %s",a)}},G["pmFlashNotification"+a]=function(t,a){"ready"===t?(q("Flash framework ready - js side"),B.duration=a,B.ready=!0,i.options.muted||B.unmute(),_(),e("resize"),x()):"video-end"===t?p():"log"===t&&q(a)},B={unmute:function(){e("unmute")},mute:function(t){t?e("mute",t):e("mute")},play:function(t){B.paused=!1,e("play",t)},pause:function(){return B.paused=!0,e("pause")},getTime:function(){return e("getTime")},seek:function(t){e("seek",t)},object:t,duration:30,paused:!0,id:i.id,ready:!1}}function m(){function e(){B.paused?(W.applyStyle(t,{display:"block"}),W.applyStyle(i,{display:"none"})):(W.applyStyle(i,{display:"block"}),W.applyStyle(t,{display:"none"}))}Z=re("div"),Z.className="pm-video-controls-play-button",W.applyStyle(Z,{width:"20px",height:"20px",position:"absolute",bottom:"5px",left:"9px",cursor:"pointer"});var t,i;if(ge){t=re("canvas"),i=re("canvas");var a=t.getContext("2d"),o=i.getContext("2d");t.width=t.height=i.width=i.height=20,a.fillStyle="#FFFFFF",a.moveTo(4,4),a.lineTo(4,16),a.lineTo(16,10),a.lineTo(4,4),a.fill(),o.fillStyle="#FFFFFF",o.fillRect(5,5,3,10),o.fillRect(10,5,3,10)}else t=re("div"),i=re("div"),W.applyStyle(t,{background:"url("+ue+he+") 0 0 no-repeat transparent",width:"20px",height:"20px"}),W.applyStyle(i,{background:"url("+ue+he+") -20px 0 no-repeat transparent",width:"20px",height:"20px"});W.applyStyle(t,{position:"absolute",top:"0px",left:"0px"}),W.applyStyle(i,{position:"absolute",top:"0px",left:"0px"}),e(),setInterval(function(){e()},100),W.addEvent(Z,"click",function(e){\nW.preventDefault(e),B.isEnded?(T(0,!0),B.isEnded=!1,le=!1,E("PLAY")):(le=!B.paused,B.paused?(T(void 0,!0),E("PLAY"),B.hasBeenPaused=!1):(C(!0),E("PAUSE"),B.hasBeenPaused=!0))}),Z.appendChild(t),Z.appendChild(i),ae.appendChild(Z)}function h(){Y=re("div"),Y.className="pmvideo-controls-scrubbar",Q=re("div");var e=re("div"),t=ne?110:140;W.applyStyle(Y,{width:t+"px",height:"20px",position:"absolute",left:"40px",top:"5px",cursor:"pointer"}),W.applyStyle(e,{width:"100%",height:"2px",position:"relative",left:"0px",top:"9px",background:"#FFF"}),W.applyStyle(Q,{width:"0px",height:"2px",position:"absolute",left:"0px",top:"0px",background:pe}),e.appendChild(Q),Y.appendChild(e),ae.appendChild(Y),setInterval(function(){B.isEnded||W.applyStyle(Q,{width:N()/B.duration*100+"%"})},500),W.addEvent(Y,"click",function(e){W.preventDefault(e);var i=e||G.event,a=W.getMousePosition(i,Y,"left")/t,o=parseInt(B.duration*a,10);q("Scrubbar action, seek to %s% -> %s",parseInt(1e3*a,10)/10,o),L(o)})}function f(){ee=re("div"),ee.className="pmvideo-controls-timer",W.applyStyle(ee,{width:"50px",height:"16px",paddingTop:"4px",position:"absolute",left:ne?"153px":"183px",top:"5px",textAlign:"center",fontSize:"10px",fontFamily:"Arial, Helvetica, sans-serif",color:"#FFFFFF",letterSpacing:"normal",fontStyle:"bold"}),setInterval(function(){B.isEnded||(ee.innerHTML=W.sprintf(["%s",W.cleanTime(parseInt(N(),10))]))},100),ae.appendChild(ee)}function v(){ie=re("div"),W.applyStyle(ie,{width:"20px",height:"20px",position:"absolute",left:"205px",top:"5px",cursor:"pointer"});var e,t;ge?(e=re("canvas"),t=e.getContext("2d"),e.width=20,e.height=20,t.fillStyle="#FFFFFF",t.fillRect(3,5,14,1),t.fillRect(16,5,1,10),t.fillRect(3,14,14,1),t.fillRect(3,5,1,10),t.fillRect(6,8,10,6)):(e=re("div"),W.applyStyle(e,{width:"20px",height:"20px",background:"url("+ue+he+") 0 -20px  no-repeat transparent"})),W.addEvent(ie,"click",function(e){W.preventDefault(e),I(R,!0),D(),T()}),ie.appendChild(e),ae.appendChild(ie)}function g(e){K=re("div"),K.className="pm-video-controls-sound-button",W.applyStyle(K,{width:"20px",height:"20px",position:"absolute",bottom:"5px",right:"5px",cursor:"pointer"});var t,a;ge?(t=re("canvas"),a=t.getContext("2d"),t.width=20,t.height=20):(t=re("div"),W.applyStyle(t,{width:"20px",height:"20px",background:"url("+ue+he+") -40px -20px  no-repeat transparent"})),K.appendChild(t),ge&&b("#FFFFFF"),(e?e:R).appendChild(K),i.options.muted||(y(!0),de=!1),W.addEvent(K,"click",function(e){W.preventDefault(e),de?(D(),se=!1,E("UNMUTE")):(O(),se=!0,E("MUTE"))})}function y(e){ge?b(e?pe:"#FFF"):W.applyStyle(K.getElementsByTagName("div")[0],{background:"url("+ue+he+") "+(e?"-20px":"-40px")+" -20px  no-repeat transparent"}),W.removeClass(K,"pm-sound-state-"+(e?"muted":"unmuted")),W.addClass(K,"pm-sound-state-"+(e?"unmuted":"muted"))}function b(e){var t=1,i=K.querySelector("canvas").getContext("2d");for(i.fillStyle=e;6>t;){var a=10*t/5;i.fillRect(3*t,15-a,2,a),t++}}function w(){ae=re("div"),ae.className="pm-video-controls",W.applyStyle(ae,{width:i.options.soundbutton?"260px":"235px",height:"30px",position:"absolute",margin:"-50px 0 0 "+(i.options.soundbutton?"-130px":"-117px"),left:"50%",top:"100%"});var e=re("div");if(e.className="pm-video-controls-background",W.applyStyle(e,{width:"100%",height:"100%",display:"block",position:"absolute",top:"0px",left:"0px"}),ge?W.applyStyle(e,{background:"#000",opacity:"0.7",borderRadius:"5px"}):W.applyStyle(e,{background:"url("+ue+he+") 0px "+(i.options.soundbutton?"-40px":"-70px")+" no-repeat transparent"}),ae.appendChild(e),m(),h(),f(),ne&&v(),i.options.soundbutton&&g(ae),R.appendChild(ae),i.options.hidecontrols){var t;W.addEvent(R,"mousemove",function(){ae.style.display="block",clearTimeout(t),t=setTimeout(function(){ae.style.display="none"},5e3)})}}function x(){i.trackinginterval||(i.trackinginterval=setInterval(function(){var t=parseInt(N()/B.duration*100,10),a=parseInt(i.currentTimeWv/B.duration*100,10);W.each(fe,function(){if((t>=this.threshold||Se>0&&99===this.threshold)&&!this.wv){var o=!1;if(!this.sent)if(this.sent=!0,i.options.uniqueTracking&&i.options.asset_id&&this.name.match(/LECTURE/)){o=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10);var n=e.piximedia.vastTrackings&&i.options.asset_id&&e.piximedia.vastTrackings[i.options.asset_id]?e.piximedia.vastTrackings[i.options.asset_id][this.name]:{};i.options.framedAd.loadEventOnce(this.name,{c3:"asset_id="+i.options.asset_id,duration:o},n)}else i.options.quartilePixels&&i.options.position&&i.options.position.loadEventOnce?i.options.position.loadEventOnce(this.name,{},i.options.quartilePixels[this.name]):E(this.name,i.id);if(ke&&this.name.match(/LECTURE[0-9]+/)&&!this.sentThisLoop){this.sentThisLoop=!0,o===!1&&(o=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10));var r=function(e,t){return"LECTURE25"===e?t?"VIDEO_ERP:25PCT":"VIDEO_GRP:25PCT":"LECTURE50"===e?t?"VIDEO_ERP:50PCT":"VIDEO_GRP:50PCT":"LECTURE75"===e?t?"VIDEO_ERP:75PCT":"VIDEO_GRP:75PCT":"LECTURE100"===e?t?"VIDEO_ERP:100PCT":"VIDEO_GRP:100PCT":null};if(0===o)return;this.previousGRPDuration||(this.previousGRPDuration=0),this.previousERPDuration||(this.previousERPDuration=0);var s=o,l=o;1e4!==this.previousGRPDuration&&(this.previousGRPDuration+o>1e4&&(s=1e4-this.previousGRPDuration),i.options.framedAd.loadEvent(r(this.name),{duration:s}),this.previousGRPDuration+=s),1e4!==this.previousERPDuration&&o>5e3&&(this.previousERPDuration+o>1e4&&(l=1e4-this.previousERPDuration),i.options.framedAd.loadEvent(r(this.name,!0),{duration:l}),this.previousERPDuration+=l)}}a>=this.threshold&&!this.sent&&this.wv&&0===i.options.threshold&&(this.sent=!0,E(this.name,i.id))})},50))}function k(){B.isEnded=!0,ae&&(Q&&W.applyStyle(Q,{width:"0"}),ee&&(ee.innerHTML="--:--"))}function _(){ve=i.options.packshotTime?i.options.packshotTime:Math.ceil(parseInt(.99*B.duration*10,10)/10),q("End pause time -> %s",ve)}function S(){return J.documentElement.requestFullscreen||J.documentElement.msRequestFullscreen||J.documentElement.mozRequestFullScreen||J.documentElement.webkitRequestFullscreen||!1}function I(e,t){if(J.fullscreenElement||J.mozFullScreenElement||J.webkitFullscreenElement||J.msFullscreenElement)t&&E("FULLSCREENOFF"),J.exitFullscreen?J.exitFullscreen():J.msExitFullscreen?J.msExitFullscreen():J.mozCancelFullScreen?J.mozCancelFullScreen():J.webkitExitFullscreen&&J.webkitExitFullscreen();else{if(!e)return;t&&E("FULLSCREENON"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}}function E(e){i.options.track&&"function"==typeof i.options.track?W.call(i.options.track,[e,i.id]):W.w["pmData"+i.options.pmord]?W.track(W.w["pmData"+i.options.pmord],e,i.id):W.log("Event ready %s for %s",e,i.id)}function P(e){var t=setInterval(function(){var i=N();i>e.time&&!e.called&&(e.callback(),e.called=!0,clearInterval(t))},500)}function A(){C(),p()}function T(e){"html5"===M?(B.play(),"undefined"==typeof e||isNaN(parseInt(e,10))||(B.dailymotion?B.play(e):B.currentTime=e)):"flash"===M?(clearInterval(B.playInterval),B.ready?B.play(e):B.playInterval=setInterval(function(){B.ready&&(clearInterval(B.playInterval),B.play(e))},20)):"canvas"===M&&("undefined"==typeof e||isNaN(parseInt(e,10))||L(e),U.getAttribute("data-fullscreened",!1)||U.setAttribute("data-paused",!1))}function C(){return"html5"===M?(B.pause(),B.currentTime):"flash"===M?(clearInterval(B.playInterval),B.pause()):void("canvas"===M&&U.setAttribute("data-paused",!0))}function O(e){if("html5"===M){if(e)return B.volume=0,void(de=!0);clearInterval($),$=setInterval(function(){B.volume=parseInt(10*(B.volume-.1<0?0:B.volume-.1),10)/10,B.volume<=0&&(B.volume=0,de=!0,clearInterval($))},25)}else if("flash"===M)B.mute(e),de=!0;else if("canvas"===M)return;K&&y(!1)}function D(){if("html5"===M)clearInterval($),$=setInterval(function(){var e=B.volume+.1;e=e>1?1:e,B.volume=e,B.volume>=i.options.maxVol&&(B.volume=i.options.maxVol,de=!1,clearInterval($))},50);else if("flash"===M)B.unmute(),de=!1;else if("canvas"===M)return;K&&y(!0)}function N(){return"html5"===M?B.currentTime:"flash"===M?B.getTime():"canvas"===M?U.getAttribute("data-time"):void 0}function F(){return"canvas"===M?"false"===U.getAttribute("data-paused"):!B.paused}function L(e){"html5"===M?B.currentTime=e:"flash"===M?B.seek(e):"canvas"===M&&U.setAttribute("data-time",e)}if(!e.piximedia.SweetLib||!t)return!1;var j,M,R,B,U,V={files:"",baseUrl:"",width:300,height:250,unit:"px",id:"VIDEO",options:{forceCss:!1,icon_file:!1,autoplay:!0,controls:!0,soundbutton:"auto",rollover:!0,muted:!0,maxVol:1,nofullscreen:!1,loop:!0,packshotTime:!1,smartEnd:!0,resizeMode:"letterbox",hidecontrols:!1,threshold:0,syncMaxDelta:1.5,onend:function(){},videoend:function(){},onclick:function(){},onerror:function(){},track:!1,pmord:!1,framerate:15,align:"MM",background:"#000",overlay:!1,startTime:0}},W=e.piximedia.SweetLib,q=W.log,z=W.warn,H=W.print,J=W.getDocument(t),G=W.getWindow(J),X=(new Date).getTime(),$=null,K=!1,Z=!1,Y=!1,Q=!1,ee=!1,te=!1,ie=!1,ae=!1,oe=!1,ne=S()&&!i.options.nofullscreen,re=function(e){return J.createElement(e)},se=!1,le=!1,de=!0,pe="#04B2F6",ce="//broadcast.pm/",ue=ce+"assets/video/",me=ue+"videoFramework.swf",he={light:"video_icon.v2.png",dark:"video_icon.v2.dark.png"},fe=[{threshold:1,name:"LECTUREDEBUT"},{threshold:24,name:"LECTURE25"},{threshold:49,name:"LECTURE50"},{threshold:74,name:"LECTURE75"},{threshold:99,name:"LECTURE100"},{threshold:1,wv:!0,name:"LECTUREDEBUT_WV"},{threshold:24,wv:!0,name:"LECTURE25_WV"},{threshold:49,wv:!0,name:"LECTURE50_WV"},{threshold:74,wv:!0,name:"LECTURE75_WV"},{threshold:99,wv:!0,name:"LECTURE100_WV"}],ve=0,ge=!1,ye="dailymotion"===W.getExtention("object"==typeof i.files?i.files[0]:i.files),be=W.canPlayHTML5Video(i.files),we=i.options.forbidFlash?!1:W.canPlayFlashVideo(i.files),xe=!1,ke=!1,_e=!1,Se=0;if(this.play=function(e){B.hasBeenPaused=!1,T(e)},this.pause=function(){B.hasBeenPaused=!0,C(!0)},this.seek=L,this.mute=O,this.unmute=D,this.getTime=N,this.isPlaying=F,this.data=i,this.forceError=o,this.addCuePoint=P,this.triggerEnd=A,this.toggleFullScreen=function(){I("desktop"===W.device.name?R:B,!0),"canvas"===M?(U.setAttribute("data-paused",!0),U.setAttribute("data-fullscreened",!0),B.play(),B.addEventListener("webkitendfullscreen",function(){U.setAttribute("data-fullscreened",!1),U.setAttribute("data-paused",!1),U.setAttribute("data-time",B.currentTime)})):T(),D()},q("New video, file : %s, wrapper : ",i.files),q(t),W.extend(i,{options:e.piximedia.videoOptions||{}}),W.extend(i,V),i.options.align.toString().match(/^[LMR][TMB]$/)||(i.options.align="MM"),i.id=i.id.toString().replace(/\\s/g,"").replace(/[^a-zA-Z0-9_]/g,""),q("Options : "),q(i),i.options.forceCss&&(ge=!1),he=i.options.icon_file?i.options.icon_file:he[i.options.controls.theme]?he[i.options.controls.theme]:he.light,"ios"===W.device.os&&(i.options.soundbutton=!1),i.packshot&&0===i.packshot.duration&&(i.options.loop=!1),i.options.controls.type?"sound"===i.options.controls.type?(i.options.controls=!1,i.options.soundbutton=!0):i.options.controls=!0:i.options.controls||(i.options.soundbutton="auto"===i.options.soundbutton?!1:i.options.soundbutton),i.options.alphaChannel&&(i.options.controls=!1,i.options.soundbutton=!1,i.options.transparent=!0),be||we){a(),ye?(j=i.files,M="html5",n()):be?(j=W.returnAbsolute(be,i.baseUrl),M="html5",r()):(j=W.returnAbsolute(we,i.baseUrl),M="flash",u());var Ie=W.getFileName(j);if(e.piximedia.videoFiles||(e.piximedia.videoFiles={}),e.piximedia.videoFiles[Ie]&&e.piximedia.videoFiles[Ie].id!==i.id?(_e=!0,e.piximedia.videoFiles[Ie].slaves||(e.piximedia.videoFiles[Ie].slaves=[]),e.piximedia.videoFiles[Ie].slaves.push(this),e.piximedia.videoFiles[Ie].number_of_slaves++):(e.piximedia.videoFiles[Ie]={time:0,playing:!1,insync:!1,number_of_slaves_waiting:0,number_of_slaves:0,video:B,masterPlaying:F,id:i.id},xe=!0),"undefined"!=typeof i.options.adId){e.piximedia.visibleVideos||(e.piximedia.visibleVideos={}),e.piximedia.visibleVideos[i.options.adId]||(ke=!0,e.piximedia.visibleVideos[i.options.adId]={objects:[]},W.watchVisibility(e.piximedia.visibleVideos[i.options.adId]));var Ee=W.d!==J?W.getOwnerFif(t):t;if(e.piximedia.visibleVideos[i.options.adId].objects.push({dom:Ee,position:i.options.position}),W.setObjectTimer){var Pe=W.setObjectTimer("LECTURE",Ee,function(e,t){i.options.position.loadEvent("TIMETRACKER::"+e,{duration:t})});Pe.start()}}if(xe)setInterval(function(){e.piximedia.videoFiles[Ie].time=N(),e.piximedia.videoFiles[Ie].playing=F()},100);else{var Ae=function(){var t=Math.abs(e.piximedia.videoFiles[Ie].time-N());if(F()&&e.piximedia.videoFiles[Ie].masterPlaying()&&t>i.options.syncMaxDelta){if(!e.piximedia.videoFiles[Ie].insync){e.piximedia.videoFiles[Ie].insync=!0,H("Slave out of sync, delta",t),H("Slaves global sync :",function(){for(var t=[],i=0;i<e.piximedia.videoFiles[Ie].slaves.length;i++){var a=e.piximedia.videoFiles[Ie].slaves[i];a!==B&&t.push(Math.abs(e.piximedia.videoFiles[Ie].time-a.getTime()))}return t.join(", ")}());for(var a=function(){if(e.piximedia.videoFiles[Ie].number_of_slaves_waiting--,H("Slave back in sync",e.piximedia.videoFiles[Ie].number_of_slaves_waiting,"left"),e.piximedia.videoFiles[Ie].number_of_slaves_waiting<=0){e.piximedia.videoFiles[Ie].number_of_slaves_waiting=0,e.piximedia.videoFiles[Ie].video.play();for(var t=0;t<e.piximedia.videoFiles[Ie].slaves.length;t++){var i=e.piximedia.videoFiles[Ie].slaves[t];i.wasPlaying&&(i.wasPlaying=!1,i.play(),i.object.removeEventListener("canplay",a))}}},o=0;o<e.piximedia.videoFiles[Ie].slaves.length;o++){var n=e.piximedia.videoFiles[Ie].slaves[o];n.isPlaying()||n.wasPlaying?(n.wasPlaying=!0,Math.abs(e.piximedia.videoFiles[Ie].time-n.getTime())>i.options.syncMaxDelta?(e.piximedia.videoFiles[Ie].number_of_slaves_waiting++,n.seek(e.piximedia.videoFiles[Ie].time),n.object.addEventListener("canplay",a)):n.pause()):n.wasPlaying=!1}H("Total out of sync slaves",e.piximedia.videoFiles[Ie].number_of_slaves_waiting),e.piximedia.videoFiles[Ie].number_of_slaves_waiting>0&&e.piximedia.videoFiles[Ie].video.pause()}}else e.piximedia.videoFiles[Ie].insync=!1};setInterval(Ae,500),Ae()}if(i.options.blur)if(W.canUseCSS3()){var Te="number"==typeof i.options.blur?i.options.blur:3;W.applyStyle(B,{"-webkit-filter":"blur("+Te+"px)","-moz-filter":"blur("+Te+"px)","-o-filter":"blur("+Te+"px)","-ms-filter":"blur("+Te+"px)",filter:"blur("+Te+"px)"})}else{var Ce=re("div");Ce.className="pm-video-blur-wrapper",W.applyStyle(Ce,{position:"absolute",width:i.width+i.unit,height:i.height+i.unit,display:"block",left:"0",top:"0",background:"url("+ue+"blur.png) 0 0 / 100% 100% no-repeat transparent"}),R.appendChild(Ce)}if(i.options.overlay&&(oe=re("div"),W.applyStyle(oe,{position:"absolute",background:i.options.overlay.color,opacity:i.options.overlay.opacity}),i.options.fullsize&&W.applyStyle(oe,{width:"100%",height:"100%",top:"0",left:"0"}),R.appendChild(oe)),this.object=B,this.wrapper=R,te=re("div"),te.className="pm-video-clicktag",W.applyStyle(te,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer",display:"block",background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) 0 0 no-repeat transparent"}),W.addEvent(te,"click",function(){q("Click on video"),O(!0),W.call(i.options.onclick)}),("desktop"!==W.getDevice().name||i.options.forceCanvasPlayback)&&(i.options.controls=!1,i.options.soundbutton=!1,i.options.autoplay))if("ios"===W.device.os&&W.device.version>=8||i.options.forceCanvasPlayback)q("We\'re on mobile, resorting to canvas"),M="canvas",B.style.display="none",R.appendChild(B),s();else{var Oe=function(){B.play(),W.removeEvent(W.w,"touchstart",Oe)};W.addEvent(W.w,"touchstart",Oe)}W.mouseenter(te,function(){i.options.rollover&&!se&&F()&&i.options.muted&&D()}),W.mouseleave(te,function(){i.options.rollover&&!se&&F()&&i.options.muted&&O()}),R.appendChild(te),i.options.layer&&i.options.layer.file&&d(),i.options.controls?w():i.options.soundbutton&&g(),R.className+=" pm-video-"+M;var De,Ne;i.currentTimeWv=0,0===i.options.threshold&&(De=setInterval(function(){Ne&&F()&&i.currentTimeWv++},1e3)),W.bindVisibilityTracker({object:this.wrapper,threshold:0===i.options.threshold?60:i.options.threshold},function(e){Ne=e,i.options.threshold>0?e?i.options.autoplay&&!le&&T():C():i.options.autoplay&&!B.hasBeenPaused&&e&&T()}),i.options.autoplay&&T()}else z("Sorry, can\'t play any of this"),this.play=function(){},this.pause=function(){},this.stop=function(){},this.mute=function(){},this.unmute=function(){},this.getTime=function(){},this.isPlaying=function(){},this.forceError=function(){},this.data={error:"Can\'t play this video"},W.call(i.options.onerror)}if(e.piximedia){try{parent.piximedia||(parent.piximedia=e.piximedia)}catch(i){}window.piximedia.SweetLib&&window.piximedia.SweetLib.log("Piximedia 2014 - Video framework loaded")}else try{e.piximedia=parent.piximedia||{}}catch(i){e.piximedia={}}e.piximedia.Video=t,e.piximedia.libraryLoader&&e.piximedia.libraryLoader["video.js"]&&(e.piximedia.libraryLoader["video.js"].complete=!0)}(window),function(){var e=window,t="video.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["video.js"]=window.piximedia.libraryLoader["video.js"]||{},window.piximedia.libraryLoader["video.js"].loaded=!0,!function(e){function t(t){try{if(i=e.piximedia.SweetLib,i.print("Decoratr v1",t),this.data=t.data,this.meta=t.meta||{},this.main=this.data.standard||this.data.footer||this.data.interstitial||this.data.companion||this.data.takeover||this.data.pushdown||this.data.pushdown_v2||this.data.allpapr||this.data.cube||this.data.native_ads||this.data.prehome||!1,!this.main)return void this.track("PANIC",{error:"CRITICAL_JS_ERROR"});if(this.extra=this.main.video||this.data.pushdown_expand_v2||this.data.standard_expand||this.data.allpapr_header||!1,(this.data.pushdown_v2||this.data.pushdown)&&(this.extra.top=this.data.pushdown&&this.data.pushdown.stickToTop||this.data.stickToTop||this.main.height),this.data.openmode=this.data.openmode||"newtab",this.enhance(this.main),this.enhance(this.extra),this.data.expand={width:this.getHighestValue("width"),height:this.getHighestValue("height")},this.main.expand&&(this.main.expand.right&&(this.data.expand.right=this.main.expand.right),this.main.expand.top&&(this.data.expand.top=this.main.expand.top)),this.data.width=this.main.width,this.data.height=this.main.height,this.data.expand.width===this.data.width&&this.data.expand.height===this.data.height?this.isExpandingUnit=!1:(this.isExpandingUnit=!0,this.main.clicktag?this.rollExpand=!1:(this.rollExpand=this.extra&&this.extra.openmode?"hover"===this.extra.openmode:this.main.expand&&this.main.expand.openmode?"hover"===this.main.expand.openmode:!0,this.clickExpand=this.rollExpand?!1:this.extra&&this.extra.openmode?"click"===this.extra.openmode:this.main.expand&&this.main.expand.openmode?"click"===this.main.expand.openmode:!1),this.data.transparent=!0),this.extra.file||this.extra.files||(this.extra=!1),this.objects={},this.extra)if(this.extra.center&&(this.extra.left=(this.main.width-this.extra.width)/2+"px"),this.extra.reloadOnExpand&&(this.extra.waitExpandToDecorate=!0),this.main.options.placeholder){var a=this.main.options.placeholder.position;this.extra.width=a.width,this.extra.height=a.height,this.extra.top=a.top,this.extra.right=a.right}else"undefined"==typeof this.extra.left&&"undefined"==typeof this.extra.right&&(this.extra.right=0),"undefined"==typeof this.extra.top&&"undefined"==typeof this.extra.bottom&&(this.extra.top=0);"overtake"===this.data.openmode&&(this.isExpandingUnit=!1,this.rollExpand=!1,this.clickExpand=!1),this.data.locale||(this.data.locale="fr_FR"),this.data.takeover_like&&(this.main.closebutton.action="remove")}catch(o){i.warn(o)}}var i,a=800;t.prototype.onerror=function(e){window.console.warn(e)},t.prototype.enhance=function(t){try{if(t){if(t.handleVideo=!0,t.uniqueTracking=!0,t.framedAd=this.data.framedAd,"object"!=typeof t.file||i.isArray(t.file))"string"==typeof t.options?t.options=e.JSON.parse(t.options):t.options={},"string"==typeof t.metadata?t.metadata=e.JSON.parse(t.metadata):t.metadata={};else{var a,o,n=this;if(t.file.id?"number"==typeof t.file.id?a=".asset_id="+t.file.id:(o=[],i.each(t.file.id,function(){o.push(".asset_id="+this)})):a=t.file,o){var r=[];i.each(o,function(e){var t=n.data.framedAd.queryAssets(o[e]);r.push(t[0])}),t.file=r}else if(a&&(t.file=this.data.framedAd.queryAssets(a),!t.file.length&&a.mandatory))return void this.track("PANIC",{error:"NO_MATCHING_ASSETS"});if(i.isArray(t.file)){var s=[];i.each(t.file,function(){s.push(this.uri)}),t.file[0].value=s}"vast"===t.file[0].type?this.parseVastData(t):(t.metadata=t.file[0].metadataObject||("string"==typeof t.file[0].metadata?e.JSON.parse(t.file[0].metadata):t.file[0].metadata),t.options=t.file[0].optionsObject||(t.file[0].options?"string"==typeof t.file[0].options?e.JSON.parse(t.file[0].options):t.file[0].options:{}),t.autoenc=t.file[0].autoenc||!1,t.file=("undefined"!=typeof t.file[0].value&&t.file[0].value?t.file[0].value:!1)||t.file[0].uri)}if("image"===i.getFileType(t.file)||"html"===i.getFileType(t.file))!t.options.piximedia_listen_for_click&&!t.clicktag||"overtake"===this.data.openmode?t.needClickTag=!0:t.clicktag=!0,"html"===i.getFileType(t.file)&&"undefined"==typeof t.options.duration&&(t.options.duration=15),t.options.transparent&&(this.data.transparent=!0);else if("video"===i.getFileType(t.file)){if(t.autoenc&&t.autoenc.length&&1===t.file.length){var l=[];i.each(t.autoenc,function(){this.name.match(/autoenc\\./)&&l.push(this.uri)}),t.file=l}if(!this.expectVideoSent){var d=t.metadata.duration?t.metadata.duration:t.metadata.ffprobe&&t.metadata.ffprobe.format&&t.metadata.ffprobe.format.duration?t.metadata.ffprobe.format.duration:30;this.track("EXPECT:VIDEO",t.metadata?{duration:parseInt(d,10)}:{}),this.expectVideoSent=!0}}"undefined"==typeof t.right&&"undefined"==typeof t.left&&(this.meta.rightExpand?t.left=0:t.right=0),"undefined"==typeof t.top&&"undefined"==typeof t.bottom&&(t.top=0)}}catch(p){i.warn(p)}},t.prototype.getHighestValue=function(e){var t=[],i="width"===e?this.meta.rightExpand?"left":"right":"top";return this.extra&&(this.extra.expand&&this.extra.expand[e]?t.push(this.extra.expand[e]+(this.extra.expand[i]||this.extra[i]||0)):this.extra[e]&&(t.push(this.extra[e]+(this.extra[i]||0)),this.extra.expand||(this.extra.expand={}),this.extra.expand[e]=this.extra[e])),this.main.expand&&"undefined"!=typeof this.main.expand[e]?t.push(this.main.expand[e]):(t.push(this.main[e]),this.main.expand||(this.main.expand={}),this.main.expand[e]=this.main[e]),Math.max.apply(null,t)},t.prototype.onclick=function(e,t){if(e&&this.isExpandingUnit&&this.clickExpand)return void this.trigger("expand");this.track("AP_CLICK"),this.track("CLICK_OOB"),this.track("EXPECT:VISIT"),this.data.clickUrl[t]&&this.data.clickUrl[t].url||(t=1);var a=new i.Browser({uri:(this.data.position.clickUrl&&!this.data.trackingFixed?this.data.position.clickUrl:"")+this.data.clickUrl[t].url,openmode:this.data.openmode,exposureTime:this.data.minExposureTime&&"cpm"!==this.data.saleMode?this.data.minExposureTime:0,kpiPixels:this.data.kpiPixels&&"cpc"===this.data.saleMode?this.data.kpiPixels:!1,position:this.data.position});a.open(),this.data.clickPixels&&(i.isArray(this.data.clickPixels)?i.each(this.data.clickPixels,function(){i.PixelPrinter(this.toString())}):i.PixelPrinter(this.data.clickPixels))},t.prototype.extendVideoOptions=function(e){var t={handleVideo:!0,id:this.data.position.positionId,loop:this.meta&&this.meta.isTakeover?!1:e.loop,adId:this.data.adIdAlliance,transparent:this.data.transparent,controls:{type:"sound"}};i.extend(e,t);var a=this;e.onclick=function(){a.onclick()},e.track=function(e){a.track(e)},(e.closeOnEnd||e.expand&&e.expand.closeOnEnd)&&(e.onend=function(){a.trigger("collapse")})},t.prototype.gettext=function(e){return i.gettext(e,this.data.locale)},t.prototype.prepareBillboard=function(){this.data.wrapper.style.opacity=1,this.data.wrapper.style.top=0,this.data.wrapper.style.left="50%",this.data.wrapper.style.marginLeft=this.data.width/-2+"px",i.getDocument(this.data.wrapper).body.style.background=this.main.bgcolor||"#000";var e=i.getDocument(this.data.wrapper).createElement("div"),t=i.getDocument(this.data.wrapper).createElement("div"),a=i.getDocument(this.data.wrapper).createElement("div"),o={expanded:this.gettext("fermer")+\'<img src="http://broadcast.pm/assets/html5/xBtFermer_white.png" style="position: relative; width: 10px; top: 1px; margin-left: 9px;">\',collapsed:this.gettext("ouvrir")};i.applyStyle(e,{position:"absolute",bottom:"3px",right:"5px","font-family":"Arial, sans-serif","font-weight":"bold","font-size":"12px",color:this.main.color||"#FFF",padding:"5px",cursor:"pointer"}),i.applyStyle(t,{position:"absolute",width:"100%",top:"7px",left:"0px","text-align":"center",opacity:0}),i.applyStyle(a,{"font-family":"Arial, sans-serif","font-weight":"bold","font-size":"12px",color:this.main.color||"#FFF",cursor:"pointer"}),t.appendChild(a),a.innerHTML=this.main.title;var n=this,r="expanded";e.innerHTML=o[r];var s=function(){"collapsed"===r?(r="expanded",n.trigger("expand"),e.innerHTML=o.expanded):(r="collapsed",n.trigger("close"),e.innerHTML=o.collapsed)};i.getDocument(this.data.wrapper).body.appendChild(t),i.getDocument(this.data.wrapper).body.appendChild(e),i.addEvent(e,"click",s),i.addEvent(a,"click",function(){n.onclick()}),this.rollExpand=!1,this.animate=!0,this.data.height=30,this.main.title=t},t.prototype.addClickTag=function(e,t){var a=i.getDocument(e).createElement("div"),o=this;if(a.className="pm-clicktag",i.addEvent(a,"click",function(){o.onclick(t)}),e.appendChild(a),"overtake"===this.data.openmode&&"desktop"===i.device.name&&"safari"!==i.browser.name){var n=new i.Loader({type:"circle",wrapper:a,duration:this.data.overrideOvertakeHoverDuration||2500,complete:function(){o.onclick(t)}});i.addEvent(a,"mouseenter",function(){n.start()}),i.addEvent(a,"mouseleave",function(){n.clear()})}},t.prototype.addCloseButton=function(e,t){if(!this.hasAlreadyAClickButton){this.hasAlreadyAClickButton=!0,this.objects.closebutton=i.getDocument(e).createElement("div"),this.objects.closebutton.className="pm-closebutton",this.objects.closebutton.innerHTML=this.gettext("fermer")+" X",t.position&&"tr"===t.position?this.objects.closebutton.style.right="0px":this.objects.closebutton.style.left="0px",t.color&&(this.objects.closebutton.style.color=t.color),t.bgcolor&&t.bgcolor.color&&(this.objects.closebutton.style.background=t.bgcolor.color),t.action&&"remove"===t.action||this.meta.isTakeover||(this.objects.closebutton.style.display="none");var a=this;i.addEvent(this.objects.closebutton,"click",function(){t.action?a.trigger(t.action):a.trigger("close"),a.main.expand&&a.main.expand.closebutton&&a.main.expand.closebutton.triggerEnd&&a.objects.main.triggerEnd()}),e.appendChild(this.objects.closebutton)}},t.prototype.decorate=function(){var t=this;if(this.data.cube){this.data.wrapped=!0;var a=new e.piximedia.Cube({data:this.data});return a.onclick=function(e){t.onclick(!1,e)},a.extendVideoOptions=t.extendVideoOptions,void a.setCube()}if(this.data.native_ads){this.data.wrapped=!0;var o=new e.piximedia.Native_Ads({data:this.data});return o.onclick=function(e){t.onclick(!1,e)},o.extendVideoOptions=t.extendVideoOptions,void o.setNative_Ads()}this.data.autoexpand&&!this.data.autoexpand.duration&&(this.extra&&"video"===i.getFileType(this.extra.file)?this.extra.videoend=function(){t.trigger("collapse")}:"video"===i.getFileType(this.main.file)&&(this.main.videoend=function(){t.trigger("collapse")})),this.extendVideoOptions(this.main),this.applyStyle(this.data.wrapper,this.main,!0),this.main.billboard&&this.prepareBillboard();var n=i.copy(this.main);if(this.main.expand&&this.main.expand.useExpandSize&&(n.width=this.main.expand.width,n.height=this.main.expand.height,n.enforceSize=!0,this.applyStyle(this.data.wrapper,this.main.expand)),this.objects.main=i.handleAsset(n,this.data.wrapper,"","",this.data),!this.main.expand||this.main.expand.width===this.main.width&&this.main.expand.height===this.main.height||this.expand.useExpandSize||i.applyStyle(this.objects.main,{width:"100%",height:"100%"}),this.main.options.transparent&&this.objects.main.style&&(this.objects.main.style.background="transparent"),this.main.needClickTag&&this.addClickTag(this.data.wrapper,!0),this.main.expand&&this.main.expand.closebutton&&this.addCloseButton(this.data.wrapper,this.main.expand.closebutton),this.main.closebutton&&this.addCloseButton(this.data.wrapper,this.main.closebutton),this.extra&&(this.extendVideoOptions(this.extra),this.data.extra_wrapper=i.getDocument(this.data.wrapper).createElement("div"),this.applyStyle(this.data.extra_wrapper,this.extra),this.data.wrapper.appendChild(this.data.extra_wrapper),this.objects.extra=i.handleAsset(this.extra,this.data.extra_wrapper,"","",this.data),this.extra.needClickTag&&this.addClickTag(this.data.extra_wrapper),this.extra.closebutton&&this.addCloseButton(this.data.extra_wrapper,this.extra.closebutton),this.extra.displayOnExpand&&(this.data.extra_wrapper.style.top="-3000px"),this.extra.options.transparent&&this.objects.extra.style&&(this.objects.extra.style.background="transparent"),"video"===i.getFileType(this.extra.file)&&this.extra.displayOnExpand&&this.objects.extra.pause()),this.data.dontSendImpression||this.track("AP_IMPRESSION"),i.bindRollTracker(this.data,this.data.wrapper),this.data.autoexpand&&(this.data.autoexpand.delay&&"video"===i.getFileType(this.main.file)?this.objects.main.addCuePoint({time:this.data.autoexpand.delay,callback:function(){t.trigger("expand")}}):setTimeout(function(){t.trigger("expand")},this.data.autoexpand.delay?1e3*this.data.autoexpand.delay:1e3),this.data.autoexpand.duration&&(this.data.autoexpand.timeout=setTimeout(function(){t.trigger("collapse")},1e3*(this.data.autoexpand.duration+1)))),this.meta.adaptive&&!i.isCrossDomained()&&this.data.iframe){var r,s=i.getOwnerFif(this.data.wrapper).parentNode.parentNode;i.onResize(s,function(){var e=Math.round(i.gbcr(s).width);e!==r&&(t.resize(e),r=e)})}},t.prototype.resize=function(e){var t=e/this.data.width;1>t?(this.data.wrapper.style.transform="scale("+t+")",this.data.wrapper.style.top=(this.data.height*t-this.data.height)/2+"px",this.data.wrapper.style.left=(this.data.width*t-this.data.width)/2+"px",this.data.iframe.emit("resize",{width:e,height:Math.round(this.data.height*t),resizeFifContainer:!0})):(this.data.wrapper.style.transform="",this.data.wrapper.style.top="0",this.data.wrapper.style.left="0",this.data.iframe.emit("resize",{width:this.data.width,height:this.data.height,resizeFifContainer:!0,css:{textAlign:"center"}}))},t.prototype.on=function(e,t){this.events||(this.events={}),this.events[e]||(this.events[e]=[]),this.events[e].push(t)},t.prototype.trigger=function(e){var t=this;this.events&&this.events[e]&&i.each(this.events[e],function(){this.call(t)})},t.prototype.track=function(e,t){"PANIC"===e&&window.console&&window.console.warn("PANIC",t),this.data.position.loadEvent(e,t)},t.prototype.applyStyle=function(e,t,a){var o=function(e){return"undefined"==typeof e?"auto":"number"==typeof e?e+"px":parseFloat(e,10).toString()===e?e+"px":e};i.applyStyle(e,{position:"absolute",width:o(t.width),height:o(t.height),top:this.meta.isTakeover?0:o(t.top),right:o(t.right),bottom:o(t.bottom),left:o(t.left)}),this.meta.isTakeover&&a&&this.data.animate&&(e.style.opacity=0)},t.prototype.expand=function(){this.main.billboard&&(this.main.title.style.opacity="0",i.animate(this.data.wrapper,{opacity:1,top:0}).play());var e={width:this.main.expand.width+"px",\nheight:this.main.expand.height+"px",duration:this.main.clicktag||this.main.expand&&this.main.expand.noAnimation?0:500};if(this.meta.isTakeover&&this.data.animate&&(e.opacity=1),this.main.expand&&this.main.expand.useExpandSize&&(e.top="0px",e.right="0px"),i.animate(this.data.wrapper,e).play(),this.extra){var t={width:this.extra.expand.width+"px",height:this.extra.expand.height+"px"};this.extra.displayOnExpand&&(this.data.extra_wrapper.style.top=this.extra.top+"px",t.opacity=1),i.animate(this.data.extra_wrapper,t).play(),(this.extra.waitExpandToDecorate||this.extra.reloadOnExpand)&&(this.extra.waitExpandToDecorate=!1,"html"!==i.getFileType(this.extra.file)||this.objects.extra.getAttribute("src")||(this.objects.extra.src=this.objects.extra.getAttribute("data-src"))),"video"===i.getFileType(this.extra.file)&&this.extra.displayOnExpand&&this.objects.extra.play()}this.main.video&&(this.main.restart_on_expand&&this.main.play(.1),this.main.pause_on_expand&&this.main.pause(),this.main.unmute()),this.objects.closebutton&&(this.objects.closebutton.style.display="block")},t.prototype.collapse=function(e){var t=this;this.main.billboard&&(this.main.title.style.opacity="1",i.animate(this.data.wrapper,{opacity:0,top:30}).play());var a={width:this.main.expand&&this.main.expand.useExpandSize?this.main.expand.width+"px":this.main.width+"px",height:this.main.expand&&this.main.expand.useExpandSize?this.main.expand.height+"px":this.main.height+"px",duration:this.main.clicktag||this.main.expand&&this.main.expand.noAnimation?0:500,onplayed:function(){t.extra||"function"!=typeof e||e()}};if(this.meta.isTakeover&&this.data.animate&&(a.opacity=0),this.main.expand&&this.main.expand.useExpandSize&&(a.top=this.main.expand.top+"px",a.right=this.main.expand.right+"px"),i.animate(this.data.wrapper,a).play(),this.extra){var o={width:this.extra.width+"px",height:this.extra.height+"px"};this.extra.displayOnExpand&&(o.opacity=0),o.oncompleted=function(){(t.extra.reloadOnExpand||t.data.autoexpand)&&("html"!==i.getFileType(t.extra.file)||t.objects.extra.getAttribute("data-src")||t.objects.extra.setAttribute("data-src",t.objects.extra.src),t.objects.extra.src="",t.data.autoexpand&&(t.data.autoexpand=!1,setTimeout(function(){"html"===i.getFileType(t.extra.file)&&(t.objects.extra.src=t.objects.extra.getAttribute("data-src"))},0))),t.extra.displayOnExpand&&(t.data.extra_wrapper.style.top="-3000px"),"function"==typeof e&&e(),"video"===i.getFileType(t.extra.file)&&t.extra.displayOnExpand&&(t.extra.restartOnExpand?(t.objects.extra.seek(.1),t.objects.extra.pause()):t.objects.extra.pause())},i.animate(this.data.extra_wrapper,o).play()}this.objects.closebutton&&(this.objects.closebutton.style.display="none")},t.prototype.parseVastData=function(t){var o=t.file;if(!o[0].metadata.vast.Ad)return this.onerror("vast not parsed");var n=o[0].metadata.vast.Ad[0].InLine[0].Creatives[0].Creative[0].Linear[0].MediaFiles[0].MediaFile,r=o[0].metadata.vast.Ad[0].InLine[0].Creatives[0].Creative[0].Linear[0].TrackingEvents[0].Tracking,s=o[0].metadata.vast.Ad[0].InLine[0].Creatives[0].Creative[0].Linear[0].VideoClicks[0].ClickThrough[0].value;this.data.clickUrl[1].url=s;var l={},d=[];if(i.each(n,function(){var e=this.type.split("/")[1];if(-1!==i.allowedHTML5VideoFormat.indexOf(e)||-1!==i.allowedFlashVideoFormat.indexOf(e)){var t=!0;l[e]&&(t=Math.abs(parseFloat(this.bitrate,10)-a)<l[e].delta?!0:!1),t&&(l[e]={uri:this.value,delta:Math.abs(parseFloat(this.bitrate,10)-a)})}}),e.piximedia.vastTrackings||(e.piximedia.vastTrackings={}),t.asset_id=o[0].id||o[0].asset_id,!e.piximedia.vastTrackings[t.asset_id]){e.piximedia.vastTrackings[t.asset_id]={};var p=function(e){var t=["LECTUREDEBUT","LECTURE25","LECTURE50","LECTURE75","LECTURE100"],i=["start","firstQuartile","midpoint","thirdQuartile","complete"];return t[i.indexOf(e)]};i.each(r,function(){var i=p(this.event);i&&(e.piximedia.vastTrackings[t.asset_id][i]||(e.piximedia.vastTrackings[t.asset_id][i]=[]),e.piximedia.vastTrackings[t.asset_id][i].push(this.value))})}i.each(l,function(){d.push(this.uri)}),t.file=d},e.piximedia.Decoratr=t,e.piximedia.libraryLoader&&e.piximedia.libraryLoader["decoratr.js"]&&(e.piximedia.libraryLoader["decoratr.js"].complete=!0)}(window),function(){var e=window,t="decoratr.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["decoratr.js"]=window.piximedia.libraryLoader["decoratr.js"]||{},window.piximedia.libraryLoader["decoratr.js"].loaded=!0,!function(){"use strict";function e(e,i){this.pmData=e,this.options=i||{},this.debugTime("Allpapr() created"),t.piximedia.PAM.EventEmitter.forObject(this);var a=e.saleMode;e.minEngagementTime=e.minEngagementTime?parseInt(e.minEngagementTime,10):0,e.minExposureTime=e.minExposureTime?parseInt(e.minExposureTime,10):0,"cpc"===a&&e.minEngagementTime>0?a="cpc":"cpm"===a&&e.minExposureTime>0&&(a="cpmview"),this.salemode=a}var t=window;e.prototype.doWait=function(e){return e()},e.prototype.start=function(){var e=this.pmData,i=e.framedAd,a=i.pam,o=this;this.framedPam=a,this.debugTime("Allpapr.start()"),i&&i.args&&i.args.doNotScaleAllpapr&&(e.doNotScaleAllpapr=i.args.doNotScaleAllpapr),a.loadLibrary("sweetlib.js",function(){o.first=!0;var a=t.piximedia.SweetLib;o.debugTime("Allpapr ready to inject"),i.inject(e.position||"1x1",{},function n(r,s,l,d){if(o.debugTime("Allpapr injected"),s.piximedia=t.piximedia,a.fixTracking(e,l),o.first&&0===l.injectionIndex)for(var p=e.pixelUrl||[],c=0;c<p.length;c++)a.PixelPrinter(p[c]);var u=!0,m=a.startViewTracking(e);d.emit("register-visibility-callback",{callback:"visibility-changed",threshold:70}),d.on("visibility-changed",function(e){m.isVisible=e,u&&(u=!1,l.loadEvent("AP_ALLPAPRHASBEENSEEN"),i.loadEventOnce("AP_SOMETHINGHASBEENSEEN"))}),o.injectedDocument=r,o.injectedWindow=s,e.iframe=d,e.position=l;var h=e.allpapr,f=l.pageContainerWidth,v=a.getPageContainerHints()||{},g=function(){o.debugTime("Allpapr proceed()"),e.wrapper=r.createElement("div"),e.wrapper.id="allpapr-wrapper",r.body.appendChild(e.wrapper),e.decorate_extra_immediately=!0;var i=new t.piximedia.Decoratr({data:e,meta:{adaptive:!!e.doNotScaleAllpapr}});e.asset=i,i.decorate(),i.main.options&&("undefined"!=typeof i.main.options.arch_height&&(h.arch_height=parseInt(i.main.options.arch_height,10)),"undefined"!=typeof i.main.options.container_width&&(h.pc_width=parseInt(i.main.options.container_width,10))),e.allpapr_header&&(h.arch_height=Math.max(h.arch_height,(e.allpapr_header.height||0)+(e.allpapr_header.top||0)));var p=h.inset||v.inset||{},c=p.thickness?parseFloat(p.thickness,10):0,u=f+2*c,m=e.doNotScaleAllpapr?1:u/h.pc_width,g=Math.round(m*h.arch_height)+c,y=Math.round(m*h.width),b=Math.round(m*h.height);o.debugTime("asset.resize()"),i.resize(y),o.debugTime("Allpapr about to resize"),d.emit("resize",{wallpaper:!0,moveTop:g,width:y,height:b,stickToTop:!!o.pmData.stickToTop,moveTopOptions:{duration:0},bodyBackgroundColor:o.pmData.enableBodyBackgroundColor?o.pmData.enableBodyBackgroundColor.bodyBackgroundColor:void 0}),o.debugTime("Allpapr just resized"),e.externalScriptsForPositions&&e.externalScriptsForPositions[l.positionId]&&a.each(e.externalScriptsForPositions[l.positionId],function(t){var i=r.createElement("script");i.src=e.externalScriptsForPositions[l.positionId][t],r.getElementsByTagName("head")[0].appendChild(i)}),setTimeout(function(){o.registeredResponsiveCallback||(o.registeredResponsiveCallback=!0,d.registerResponsiveCallback(function(){return r.close(),r.open(),o.first=!1,null===r.body&&(r.write("<html></html>"),t.piximedia.PAM.emit("ad.inject",r,s,l)),n(r,s,l,d)}))},0)};o.debugTime("Allpapr ready to proceed"),o.first?o.doWait(g):g()})})},e.prototype.debugTime=function(e){this.pmData&&this.pmData.framedAd&&this.pmData.framedAd.pam&&this.pmData.framedAd.pam.debugTime&&this.pmData.framedAd.pam.debugTime("["+(this.pmData.position&&this.pmData.position.positionId?this.pmData.position.positionId:this.pmData.position)+"] "+e)},t.piximedia.Allpapr20150917=e,t.piximedia.libraryLoader&&t.piximedia.libraryLoader["allpapr.20150917.js"]&&(t.piximedia.libraryLoader["allpapr.20150917.js"].complete=!0)}(),function(){var e=window,t="allpapr.20150917.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["allpapr.20150917.js"]=window.piximedia.libraryLoader["allpapr.20150917.js"]||{},window.piximedia.libraryLoader["allpapr.20150917.js"].loaded=!0,!function(){"use strict";function e(t){e.timer?e.callbacks.push(t):(e.callbacks=[],e.timer=setTimeout(function(){e.timer=void 0;var t=e.callbacks;a.console.log("setImmediate(): #"+t.length);for(var i=0;i<t.length;i++)t[i]()},0))}function t(e,t){this.pmData=e,this.options=t||{};var o=e.saleMode,n=setInterval(function(){h=piximedia.pmData5418_1&&piximedia.pmData5418_1.adIdAlliance===parseFloat(e.adIdAlliance,10)?!0:!1,i=h?piximedia.pmData5418_1:{},r++,(h||100===r)&&clearInterval(n)},50),r=0;e.minEngagementTime=e.minEngagementTime?parseInt(e.minEngagementTime,10):0,e.minExposureTime=e.minExposureTime?parseInt(e.minExposureTime,10):0,"cpc"===o&&e.minEngagementTime>0?o="cpc":"cpm"===o&&e.minExposureTime>0&&(o="cpmview"),this.salemode=o,a.piximedia.PAM.EventEmitter.forObject(this)}var i,a=window,o=100,n=1500,r=100,s=1500,l=4e3,d=250,p=.5,c=100,u=250,m=250,h=!1;t.prototype.start=function(){var e=this.pmData,t=e.framedAd,n=t.pam;t&&t.args&&t.args.doNotScaleAllpapr&&(e.doNotScaleAllpapr=t.args.doNotScaleAllpapr);var r=this;if(this.framedPam=n,window.piximedia["pmData"+e.creativeIdAlliance+"_1"]=e,e.tracking&&e.tracking.clickUrl)for(var s=0;s<e.tracking.clickUrl.length;s++)e.clickUrl[s]||(e.clickUrl[s]={url:"",tracking:e.clickUrl[s-1].tracking}),e.clickUrl[s].url=e.tracking.clickUrl[s];if(e.tracking&&e.tracking.pixelUrl)for(var l=0;l<e.tracking.pixelUrl.length;l++)e.pixelUrl[l]=e.tracking.pixelUrl[l];"string"==typeof e.clickUrl[0].url&&e.clickUrl.unshift(""),r.pmData.allpapr_custom&&(r.pmData.allpapr_custom.clickindex=r.pmData.allpapr_custom.clickindex&&e.clickUrl[r.pmData.allpapr_custom.clickindex]&&e.clickUrl[r.pmData.allpapr_custom.clickindex].url?r.pmData.allpapr_custom.clickindex:1);var d={1:!0,2:!0,5:!0,10:!0,20:!0,30:!0,40:!0},p=0;n.loadLibrary("sweetlib.js",function(){var s,l,c=!1,u=!0,m=a.piximedia.SweetLib,h=m.log,f=e.openmode;t.inject(((t||{}).args||{}).primary_position||r.pmData.position||"wallpaper",{},function v(g,y,b,w){function x(){return e.pub_cc+e.clickUrl[r.pmData.allpapr_custom.clickindex].tracking+e.clickUrl[r.pmData.allpapr_custom.clickindex].url}function k(){var t=r.pmData.allpapr?r.pmData.allpapr.clickAction:r.pmData.allpapr_video?r.pmData.allpapr_video.clickAction:void 0;if(t)return r.framedPam.emit(t,{id_ad:r.pmData.adIdAlliance});var i=r.pmData.allpapr_custom?r.pmData.allpapr_custom.clickindex:1;e.clickUrl[i].custom&&m.track(e,"CLICK_OOB",r.pmData.allpapr_custom.position,e.clickUrl[i].custom);var o=b.clickUrl+(r.pmData&&r.pmData.clickUrl&&r.pmData.clickUrl[i]&&r.pmData.clickUrl[i].tracking?r.pmData.clickUrl[i].tracking:"")+(b.advertiserClickUrl||(r.pmData&&r.pmData.clickUrl&&r.pmData.clickUrl[i]&&r.pmData.clickUrl[i].url?r.pmData.clickUrl[i].url:""));return a.open(o,"_blank"),!0}function _(t,i,a,o){if(h("setStage call %s, %s %s",i,a,o),"tracking"===i)m.track(r.pmData,a,o&&"!!"!==o?o:"");else switch(i){case"show":_(!1,"tracking","AP_EXPAND",o),G&&(G.style.display="none"),te&&(te.style.display="block"),n.createAnimation("#pmFiller",{duration:1e3,height:r.pmData.allpapr_custom.arch_height_expand*ae}).play(),X.style.display="block";var s=function(){if(R.play(),M&&M.play(),f&&e.openmode_timer){f=!1,ie.style.display="block",ie.style.marginLeft="-"+m.gbcr(ie).width/2+"px";var t=r.pmData.openmode_timer.openmode_value;l=setInterval(function(){return t--,g.getElementById("auto_open_button_text").innerHTML=r.pmData.openmode_timer.openmode_timer_text+t,0>t?(l&&clearInterval(l),ie.style.display="none",void _(!1,"hide")):void 0},1e3),m.addEvent(ie,"click",function(){l&&clearInterval(l),ie.style.display="none"})}};r.pmData.allpapr_video.no_display_animation?($.style.opacity=1,te.style.display="block",Y.style.opacity=1,Q.style.width=r.pmData.allpapr_video.video_front_width*ae+"px",s()):m.animate($,{duration:1e3,opacity:1,onplayed:function(){te.style.display="block",m.animate(Y,{duration:1e3,opacity:1}).play(),m.animate(Q,{width:r.pmData.allpapr_video.video_front_width*ae,duration:1e3,onplayed:s}).play()}}).play();break;case"close":case"hide":"close"===i?_(!1,"tracking","AP_CLOSE",o):_(!1,"tracking","AP_COLLAPSE",o),R.pause(),G&&(G.style.display="block"),te&&(te.style.display="none"),f=!1,l&&clearInterval(l),ie.style.display="none",n.createAnimation("#pmFiller",{height:r.pmData.allpapr_custom.arch_height*ae}).play(),m.animate(X,{opacity:0,onplayed:function(){X.style.display="none",X.style.opacity="1",X.style.filter="alpha(opacity=100)",$.style.opacity="0",$.style.filter="alpha(opacity=0)",Y.style.opacity="0",Y.style.filter="alpha(opacity=0)",Q.style.width="0px",R.play(0),R.pause(),M&&(M.play(0),M.pause()),ie.style.display="none"}}).play()}}y.piximedia=a.piximedia,m.each(e.clickUrl,function(){this&&"undefined"!=typeof this.tracking&&b&&b.getTrackedUrl&&(this.tracking=b.getTrackedUrl("CLICK",""))});var S={};if(e.object=S,e.pub_cc=b.clickUrl&&b.clickUrl.match(/\\/\\/|http/)?b.clickUrl:"",a.pmGetUrl=x,a.click=k,a.setStage=_,u&&0===b.injectionIndex)for(var I=e.pixelUrl||[],E=0;E<I.length;E++)m.PixelPrinter(I[E]);e.css&&m.each(e.css,function(){""!==this.selector&&""!==this.rule&&m.createCSS(this.selector,this.rule,g)});var P=!1;if(w.emit("register-visibility-callback",{callback:"visibility-changed",threshold:70}),w.on("visibility-changed",function(e){P=e}),setInterval(function(){P&&p++,d[p]&&(d[p]=!1,m.track(e,"AP_VIEWABLE_GLOBAL:"+p+"S"))},1e3),"cpmview"===r.salemode){t.on("ad-unit-visible",function(){P||T++});var A=setInterval(function(){P&&T++,T>=e.minExposureTime&&!C&&(C=!0,clearInterval(A),t.sendCpmviewClick(),e.kpiPixels&&e.kpiPixels&&""!==e.kpiPixels&&e.kpiPixels.length>0&&("string"==typeof e.kpiPixels?m.PixelPrinter(e.kpiPixels):m.each(e.kpiPxels,function(){m.PixelPrinter(this.toString())})))},1e3),T=0,C=!1}r.iframe=w,r.injectedDocument=g,r.injectedWindow=y;var O=n.globalOptions.location,D=r.options.wallpaper,N=r.options.video,F=r.options&&r.options.iframe?r.options.iframe.file:void 0;D||(D=O.match(/movetop4.html/)?{top:{asset:"http://resources.pm/sandbox/inline/frozentop.jpg",width:1795,height:195,mode:"stretch"},left:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679},right:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679}}:O.match(/movetop3.html/)?{top:{asset:"http://resources.pm/sandbox/inline/frozentop.jpg",width:1795,height:195,mode:"center"},left:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679},right:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679}}:O.match(/movetop2.html/)?{left:{asset:"http://resources.pm/sandbox/inline/left.jpg",width:500,height:1080},right:{asset:"http://resources.pm/sandbox/inline/right.jpg",width:500,height:1080}}:O.match(/movetop.html/)?{asset:"http://resources.pm/sandbox/inline/parkentrance.jpg",top:550,contentWidth:1300,width:2e3,height:1190}:{asset:"http://resources.pm/sandbox/inline/wallpaper_ysl.jpg",top:350,contentWidth:1050,width:1518,height:1500,room:{top:214,left:449.588,width:698.824,height:396,onactivated:function(e){n.loadLibrary("video.js",function(){var t=a.piximedia.Video;r.video=new t(e,{files:"http://piximedia.com/video/ALLIANCE_HD.mp4",width:e.style.width,height:e.style.height,options:{}}),r.video.play()})}}});var L=b.pageContainerWidth,j=m.getPageContainerHints()||{};g.write("<div id=\'background_container\' style=\'cursor: pointer\'><img style=\'-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;\' src=\'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\' id=\'background\' ondragstart=\'return false\' style=\'pointer-events: none; width: 0; height: 0\'><div id=\'top\'></div><div id=\'left\'></div><div id=\'middle\'></div><div id=\'right\'></div></div><div id=\'background_mask\'></div><div id=\'video_container\'></div>"),g.write("<div id=\'replay_button\'></div><div id=\'container_wallpaper_video\'><div id=\'video_background\'><div id=\'opacity_background\'></div><div id=\'player_background\'></div></div><div id=\'image_top\'></div><div id=\'video_front\'><div id=\'auto_open_button\'></div><div id=\'player_front\'></div></div></div><div id=\'close_button\'></div>");var M,R,B=g.getElementById("background"),U=g.getElementById("background_container"),V=g.getElementById("background_mask"),W=g.getElementById("video_container"),q=g.getElementById("top"),z=g.getElementById("left"),H=g.getElementById("middle"),J=g.getElementById("right"),G=g.getElementById("replay_button"),X=g.getElementById("container_wallpaper_video"),$=g.getElementById("video_background"),K=g.getElementById("opacity_background"),Z=g.getElementById("player_background"),Y=g.getElementById("image_top"),Q=g.getElementById("video_front"),ee=g.getElementById("player_front"),te=g.getElementById("close_button"),ie=g.getElementById("auto_open_button"),ae=r.pmData.doNotScaleAllpapr?1:L/(r.pmData.allpapr_custom||r.pmData.allpapr).pc_width;if(D.left&&D.right){var oe=0,ne=0;if(z.style.display=H.style.display=J.style.display="inline-block",z.style.width=D.left.width+"px",z.style.height=D.left.height+"px",J.style.width=D.right.width+"px",J.style.height=D.right.height+"px",H.style.width=L+"px",H.style.height="1px",z.style.backgroundImage="url("+D.left.asset+")",z.style.backgroundRepeat="no-repeat",J.style.backgroundImage="url("+D.right.asset+")",J.style.backgroundRepeat="no-repeat",D.top){var re,se=D.left.width+L+D.right.width;switch(D.top.mode){case"stretch":re=se/D.top.width;break;default:case"center":re=se<D.top.width?se/D.top.width:1}oe=re*D.top.width,ne=re*D.top.height,q.style.width=oe+"px",q.style.height=ne+"px",q.style.margin="0 auto",q.style.backgroundImage="url("+D.top.asset+")",q.style.backgroundRepeat="no-repeat",q.style.backgroundPosition="0% 50%"}U.style.position="absolute",U.style.width=D.left.width+L+D.right.width+"px",U.style.height=ne+Math.max(D.left.height,D.right.height)+"px",w.emit("resize",{wallpaper:!0,moveTop:ne,width:D.left.width+L+D.right.width,height:Math.max(D.left.height,D.right.height),stickToTop:!!r.pmData.stickToTop,stickToTopOnPCTop:r.pmData.stickToTop?r.pmData.stickToTop.stickToTopOnPCTop:r.pmData.stickToTopOnPCTop,moveTopOptions:{duration:void 0!==r.pmData.fadeInDuration?r.pmData.fadeInDuration:o},bodyBackgroundColor:r.pmData.enableBodyBackgroundColor?r.pmData.enableBodyBackgroundColor.bodyBackgroundColor:void 0})}else if(D.asset||F){var le=D.inset||j.inset||{},de=le.thickness?parseFloat(le.thickness,10):0,pe=le.color||"#555",ce=L+2*de,ue=e.doNotScaleAllpapr?1:ce/D.contentWidth,me=Math.round(ue*D.top)+de,he=Math.round(ue*D.width),fe=Math.round(ue*D.height);u&&(U.style.opacity=0);var ve=void 0!==r.pmData.fadeInDuration?r.pmData.fadeInDuration:o;U.style.position="absolute",U.style.width="100%",U.style.height="100%",U.style.transition="opacity "+ve/1e3+"s ease-in",U.style.WebkitTransition="opacity "+ve/1e3+"s ease-in",F?D.asset=F:"swf"===m.getExtention(D.asset)&&!m.hasFlash()&&D.backup&&(D.asset=D.backup);var ge,ye;if(r.callbackLoad)ge=function(){var e={document:g,window:y,wallpaper:D,background:B,backgroundMask:V,ratio:ue,realWidth:he,realHeight:fe,pcWidth:ce};r.callbackLoad(e,function(){ue=e.ratio,he=e.realWidth,fe=e.realHeight,ye()})};else if("string"==typeof D.asset&&"html"!==m.getExtention(D.asset)&&"swf"!==m.getExtention(D.asset))B.src=D.asset,ge=function(){var e=!1;B.onload=function(){e||(e=!0,ye())}};else{var be=g.createElement("div");B.parentNode.insertBefore(be,B),be.style.width="100%",be.style.height="100%",B.parentNode.removeChild(B),D.flashvars||(D.flashvars={}),D.attributes||(D.attributes={}),D.params||(D.params={}),D.attributes.scale=D.params.scale="exactfit",D.params.wmode=D.params.wmode="transparent",D.flashvars.clickTag||(D.flashvars.clickTag=b.clickUrl+(r.pmData&&r.pmData.clickUrl[1]?r.pmData.clickUrl[1].tracking+r.pmData.clickUrl[1].url:""));var we=m.handleAsset({file:D.asset,width:"html"===m.getExtention(D.asset)?D.width:"100%",height:"html"===m.getExtention(D.asset)?D.height:"100%",flashvars:D.flashvars,params:D.params,attributes:D.attributes,scaleIframe:!0},be,"allpapr");if("html"===m.getExtention(D.asset)){r.onclick=!1;var xe=we.ownerDocument.createElement("div");xe.style.position="absolute",xe.style.left=0,xe.style.top=0,xe.style.width="100%",xe.style.height="100%",xe.style.cursor="pointer",we.parentNode.insertBefore(xe,we.nextSibling)}else r.onclick=function(){};ge=function(){ye()},y.setStage=function(t,i,a){"tracking"===t&&m.track(e,i,"1x1",a?a.replace(/^!!/,""):"")}}ye=function(){if(B.style.width=he+"px",B.style.height=fe+"px",V.style.position="absolute",V.style.left="50%",V.style.marginLeft=-ce/2+"px",V.style.top=me-de+"px",V.style.width=ce+"px",V.style.height=fe-me+de+"px",V.style.background=r.pmData.backgroundMaskColor||"white",V.style.opacity=r.pmData.backgroundOpacity,V.style.filter="alpha(opacity="+100*r.pmData.backgroundOpacity+")",de&&(V.style.boxSizing="border-box",V.style.borderTop=de+"px solid "+pe,V.style.borderLeft=de+"px solid "+pe,V.style.borderRight=de+"px solid "+pe),W.style.position="absolute",N&&N.file&&N.file.length){W.style.left=parseFloat(N.left,10)*ue+"px",W.style.top=parseFloat(N.top,10)*ue+"px",W.style.width=parseFloat(N.width,10)*ue+"px",W.style.height=parseFloat(N.height,10)*ue+"px";var e=W.ownerDocument.createElement("div");W.appendChild(e),n.loadLibrary("video.js",function(){n.loadLibrary("sweetlib.js",function(){var e=a.piximedia.SweetLib,t={onclick:function(){U.onclick()},track:function(e,t){a.piximedia.SweetLib.track(r.pmData,e,t)}},i=N.autoplay;e.extend(t,N),r.video=new a.piximedia.Video(W,{files:N.file,width:W.style.width,height:W.style.height,options:t}),D.autoplayVideo!==!1&&i!==!1&&r.video.play(),g.addEventListener("mouseout",function(){r.video.mute()}),n.on("play-allpapr-video",function(e){e.id_ad===r.pmData.adIdAlliance&&r.video.play(e.currentTime)}),n.on("pause-allpapr-video",function(e){e.id_ad===r.pmData.adIdAlliance&&r.video.pause()})})})}else W.style.left=0,W.style.top=0,W.style.width=0,W.style.height=0;if(r.pmData.allpapr_video){V.style.top=ue*(r.pmData.allpapr_custom.arch_height>r.pmData.allpapr_custom.arch_height_expand?r.pmData.allpapr_custom.arch_height:r.pmData.allpapr_custom.arch_height_expand)+"px";var t,i=r.pmData.allpapr_custom,o=r.pmData.allpapr_video,l=r.pmData;t=o.use_video_background&&o.use_video_background.video_background?{files:o.use_video_background.video_background.video_background_file,backup:o.use_video_background.video_background.video_background_backup,width:o.use_video_background.video_background.video_background_width,height:o.use_video_background.video_background.video_background_height}:{files:o.video_front_file,backup:o.video_front_backup,width:i.width,height:i.width*o.video_front_height/o.video_front_width},m.applyStyle(G,{position:"absolute",width:i.replay_button_width,height:i.replay_button_height,top:parseInt(i.replay_button_pos_y,10)*ae+"px",right:parseInt(i.replay_button_pos_x,10)*ae+"px",padding:"0px",zIndex:"1",cursor:"pointer"}),m.addEvent(G,"click",function(){_(!1,"show")});var d=g.createElement("div");d.id="replay_button_background",m.applyStyle(d,{background:i.replay_button_background,opacity:i.replay_button_opacity/100,filter:"alpha(opacity="+i.replay_button_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),G.appendChild(d);var p=g.createElement("div");if(p.id="replay_button_text",m.applyStyle(p,{position:"relative",textAlign:"center",color:i.replay_button_color,fontFamily:i.replay_button_font,fontSize:i.replay_button_fontsize,margin:"0px",padding:"0px"}),p.innerHTML=i.replay_button,G.appendChild(p),p.style.top=(i.replay_button_height-m.gbcr(p).height)/2+"px",m.applyStyle(X,{position:"absolute",width:parseInt(t.width,10)*ae+"px",height:parseInt(t.height,10)*ae+"px",top:"0px",left:"0px",zIndex:"2"}),m.applyStyle($,{position:"absolute",width:parseInt(t.width,10)*ae+"px",height:parseInt(t.height,10)*ae+"px",top:"0px",left:"0px",zIndex:"2",opacity:"0",filter:"alpha(opacity=0)",cursor:"pointer"}),m.applyStyle(K,{position:"absolute",background:"black",display:"block",width:"100%",height:"100%",top:"0px",left:"0px",opacity:"0.5",filter:"alpha(opacity=50)",zIndex:1,cursor:"pointer"}),o.use_video_background&&o.use_video_background.video_background_opacity&&m.applyStyle(K,{opacity:o.use_video_background.video_background_opacity/100,filter:"alpha(opacity="+o.use_video_background.video_background_opacity+")"}),o.use_video_background?m.addEvent(K,"click",function(){m.track(l,"AP_CLICK",i.position),U.onclick(),_(!1,"hide")}):(K.style.display="none",m.addEvent($,"click",function(){m.track(l,"AP_CLICK",i.position),U.onclick(),_(!1,"hide")})),m.applyStyle(Z,{position:"relative",width:parseInt(t.width,10)*ae+"px",height:parseInt(t.height,10)*ae+"px",top:"0px",left:"0px"}),o.image_top){m.applyStyle(Y,{position:"absolute",width:parseInt(o.image_top.image_top_width,10)*ae+"px",height:parseInt(o.image_top.image_top_height,10)*ae+"px",top:parseInt(o.image_top.image_top_position_from_top,10)*ae+"px",left:"50%",marginLeft:"-"+parseInt(o.image_top.image_top_width,10)*ae/2+"px",zIndex:"3",opacity:"0",filter:"alpha(opacity=0)"}),m.addEvent(Y,"click",function(){m.track(l,"AP_CLICK",i.position),U.onclick(),_(!1,"hide")});var h=g.createElement("img");h.id="my_image_top",h.src=o.image_top.image_top_file,h.style.position="relative",h.style.width="100%",h.style.height="100%",h.style.cursor="pointer",Y.appendChild(h)}m.applyStyle(Q,{position:"relative",width:"0px",height:parseInt(o.video_front_height,10)*ae+"px",top:parseInt(o.position_from_top,10)*ae+"px",zIndex:"3",overflow:"hidden",margin:"0 auto",mozBoxShadow:"0px 0px 30px #000000",webkitBoxShadow:"0px 0px 30px #000000",boxShadow:"0px 0px 30px #000000"}),m.applyStyle(ee,{position:"relative",width:parseInt(o.video_front_width,10)*ae+"px",height:parseInt(o.video_front_height,10)*ae+"px",top:"0px",left:"50%",marginLeft:"-"+parseInt(o.video_front_width,10)*ae/2+"px"}),m.applyStyle(ie,{position:"absolute",top:"20px",left:"50%",padding:"3px 0px",zIndex:"5",cursor:"pointer",display:"none"});var f=g.createElement("div");f.id="auto_open_button_background",m.applyStyle(f,{background:r.pmData.openmode_timer.openmode_background,opacity:r.pmData.openmode_timer.openmode_opacity/100,filter:"alpha(opacity="+r.pmData.openmode_timer.openmode_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),ie.appendChild(f);var x=g.createElement("div");x.id="auto_open_button_text",m.applyStyle(x,{position:"relative",textAlign:"center",color:r.pmData.openmode_timer.openmode_color,fontFamily:r.pmData.openmode_timer.openmode_font,fontSize:r.pmData.openmode_timer.openmode_fontsize,margin:"0px",padding:"0px 10px"}),x.innerHTML=r.pmData.openmode_timer.openmode_timer_text+r.pmData.openmode_timer.openmode_value,ie.appendChild(x),n.loadLibrary("video.js",function(){o.use_video_background&&(M=new a.piximedia.Video(Z,{files:t.files,poster:t.backup,id:o.video_background_id,baseUrl:"",width:100,height:100,unit:"%",options:{soundbutton:!1,threshold:0,nofullscreen:!0,controls:!1,hidecontrols:!0,rollover:!1,autoplay:!1,position:b,quartilePixels:l.quartilePixels||!1,loop:r.pmData.loop_video?!0:!1,resizeMode:o.use_video_background.video_background.resizeMode,background:o.use_video_background.video_background.video_background_color||"#000",align:o.use_video_background.video_background.video_align||"MM",onclick:function(){m.track(l,"AP_CLICK",i.position),U.onclick(),r.pmData.loop_video||_(!1,"hide")},track:function(e,t){m.track(l,e,t)}}})),R=new a.piximedia.Video(ee,{files:o.video_front_file,poster:o.video_front_backup,id:o.video_front_id,baseUrl:"",width:100,height:100,unit:"%",options:{threshold:0,nofullscreen:!0,controls:o.video_front_controls===!0||o.video_front_controls&&"full"===o.video_front_controls.type,soundbutton:o.video_front_controls&&o.video_front_controls.type&&"sound"===o.video_front_controls.type,hidecontrols:!0,rollover:o.video_front_sound_mode,autoplay:!1,position:b,quartilePixels:l.quartilePixels||!1,loop:r.pmData.loop_video?!0:!1,onclick:function(){m.track(l,"AP_CLICK",i.position),U.onclick(),r.pmData.loop_video||_(!1,"hide")},track:function(e,t){m.track(l,e,t)},onend:function(){r.pmData.loop_video||_(!1,"hide")}}}),r.pmData.openmode&&setTimeout(function(){_(!1,"show")},50)}),m.applyStyle(te,{position:"absolute",width:o.close_button_width,height:o.close_button_height,top:parseInt(o.close_button_pos_y,10)*ae+"px",right:parseInt(o.close_button_pos_x,10)*ae+"px",padding:"0px",zIndex:"4",cursor:"pointer"}),m.addEvent(te,"click",function(){_(!1,"close"),r.emit("close",w)});var k=g.createElement("div");k.id="close_button_background",m.applyStyle(k,{background:o.close_button_background,opacity:o.close_button_opacity/100,filter:"alpha(opacity="+o.close_button_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),te.appendChild(k);var S=g.createElement("div");S.id="close_button_text",m.applyStyle(S,{position:"relative",textAlign:"center",color:o.close_button_color,fontFamily:o.close_button_font,fontSize:o.close_button_fontsize,margin:"0px",padding:"0px"}),S.innerHTML=o.close_button,te.appendChild(S),S.style.top=(o.close_button_height-m.gbcr(S).height)/2+"px",X.style.display="none",te.style.display="none"}w.emit("resize",{wallpaper:!0,moveTop:me,width:he,height:fe,stickToTop:!!r.pmData.stickToTop,stickToTopFromTop:r.pmData.stickToTop&&r.pmData.stickToTop.stickToTopFromTop?parseFloat(r.pmData.stickToTop.stickToTopFromTop,10)*ue:void 0,moveTopOptions:{duration:ve},bodyBackgroundColor:r.pmData.enableBodyBackgroundColor?r.pmData.enableBodyBackgroundColor.bodyBackgroundColor:void 0}),u&&(U.style.opacity=1),setTimeout(function(){c||(c=!0,w.registerResponsiveCallback(function(){return g.close(),g.open(),u=!1,v(g,y,b,w)})),s?s.update({iframe:w,wallpaper:D,realWidth:he,realHeight:fe,realTop:me,pcWidth:ce,position:b}):s=r.createRichMedia({iframe:w,wallpaper:D,realWidth:he,realHeight:fe,realTop:me,pcWidth:ce,position:b})},ve),r.emit("complete",{document:g,window:y,wallpaper:D,background:B,backgroundMask:V,ratio:ue,realWidth:he,realHeight:fe,pcWidth:ce}),r.pmData&&r.pmData.externalScripts&&r.pmData.externalScripts.length>0&&m.each(r.pmData.externalScripts,function(e){var t=g.createElement("script");t.src=r.pmData.externalScripts[e],g.getElementsByTagName("head")[0].appendChild(t)})},u?ge():ye()}U.onclick=function(){if(m.track(r.pmData,"AP_CLICK"),r.onclick)return r.onclick();e.allpapr&&e.allpapr.wallpaper&&e.allpapr.wallpaper.anim&&n.emit("close-"+e.allpapr.wallpaper.anim,{id_ad:r.pmData.adIdAlliance});var t=r.pmData.allpapr?r.pmData.allpapr.clickAction:r.pmData.allpapr_video?r.pmData.allpapr_video.clickAction:void 0;if(t)return r.framedPam.emit(t,{id_ad:r.pmData.adIdAlliance});if(i&&i.openmode&&"click"!==i.openmode)n.emit("open-footer",{id_ad:e.adIdAlliance,index:1,newtab:!1});else{m.track(r.pmData,"CLICK_OOB");var a=r.pmData.allpapr_custom?r.pmData.allpapr_custom.clickindex:1,o=b.clickUrl+(r.pmData&&r.pmData.clickUrl&&r.pmData.clickUrl[a]&&r.pmData.clickUrl[a].tracking?r.pmData.clickUrl[a].tracking:"")+(b.advertiserClickUrl||(r.pmData&&r.pmData.clickUrl&&r.pmData.clickUrl[a]&&r.pmData.clickUrl[a].url?r.pmData.clickUrl[a].url:"")),s=y.open(o,"_blank");s||m.track(r.pmData,"POPUP_BLOCK"),n.startNavigationTracking&&n.startNavigationTracking({\npositionId:b.positionId,adIdAlliance:r.pmData.adIdAlliance,creativeIdAlliance:r.pmData.creativeIdAlliance})}}})})},t.prototype.animate=function(e){if(a.piximedia.PAM.isArray(e))for(var t=0;t<e.length;t++)this.animate(e[t]);else{var i=this,o=function(){i.framedPam.loadLibrary("sweetlib.js",function(){a.piximedia.SweetLib.coolDown(function(){return i[e].apply(i,arguments)})})};if(this[e]&&this.iframe&&this.iframe.iframe)return o();var n=setInterval(function(){return i[e]&&i.iframe&&i.iframe.iframe?(clearInterval(n),o()):void 0},50)}},t.prototype.flow=function(){this.animate("flow")},t.prototype.arch=function(){this.animate("arch")},t.prototype.glow=function(){this.animate("glow")},t.prototype.flip=function(){this.animate("flip")},t.prototype.zip=function(){this.animate("zip")},t.prototype.createRichMedia=function(t){var i=this,o=this.framedPam,h=t.iframe,f=t.wallpaper,v=t.realWidth,g=t.realHeight,y=t.realTop,b=t.pcWidth,w=t.position,x=new a.piximedia.PAM.EventEmitter;return o.loadLibrary("sweetlib.js",function(){o.waitDomMutable(function(){var t=a.piximedia.SweetLib;o.log("PC Width = "+b);var k=function(){if(i.onclick)return i.onclick();var e=w.clickUrl+(i.pmData&&i.pmData.clickUrl[1]?i.pmData.clickUrl[1].url:"");window.open(e,"_blank")},_=i.flow=function(n,r){var s=top.document;r=r||{};var l,d,p=r.transitionDuration||"0.2s",c=r.type||"rotateX",u=r.zIndex||t.LAYER_HIGHEST,m=r.position||"fixed",y=s.createElement("div"),b=s.createElement("div"),w=s.createElement("img");y.className="pmFlowContainer pmNozip",b.className="pmFlow",w.className="pmFlow",o.clearCSS(b),o.clearCSS(y),o.clearCSS(w),y.style.position=m,y.style.width=v+"px",y.style.cursor=r.cursor,y.style.height=g+"px",y.style.display="block",y.style.zIndex=u,y.onclick=k,b.style.cursor="pointer",b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",w.src=f.asset,w.style.position="relative",w.style.width=v+"px",w.style.height=g+"px",w.style.cursor=r.cursor;var x=function(){var e=t.gbcr(h.iframe);if(n){var i=t.gbcr(n);y.style.left=i.left+"px",y.style.top=i.top+"px",y.style.width=i.width+"px",y.style.height=i.height+"px",w.style.left=-(i.left-e.left)+"px",w.style.top=-(i.top-e.top)+"px"}else y.style.left=e.left+"px",y.style.top=e.top+"px"};x(),y.appendChild(b),b.appendChild(w),s.body.appendChild(y);var _;switch(c){case"rotateX":y.style.perspective=10*g+"px",b.style.transform="rotateZ(0) rotateX(270deg)",e(function(){a.console.log("Rotating",n),b.style.transition="transform "+p,b.style.transform="rotateZ(0) rotateX(360deg)"});break;case"opacity":b.style.opacity=0,_=t.animate(b,{opacity:1,duration:1e3*parseFloat(p,10)}),_.play();break;case"immediate":}r.absolute&&setTimeout(function(){l.absolute(r.absolute)},p);var S;return r.noReajustAfter||(S=setInterval(function(){x()},50)),l={container:y,interval:S,readjust:function(){S&&x()},remove:function I(e){e=e||{};var i=e.duration;void 0!==i&&_&&(_.duration=i),_?_.reverse(function(){_=void 0,I()}):void 0!==i?(y.style.opacity=1,y.style.transition="opacity "+i/1e3+"s",y.style.opacity=0,setTimeout(function(){I()},i)):(clearInterval(S),y.parentNode.removeChild(y)),d&&(d.style.opacity=1,t.animate(d,{opacity:0,duration:i}).play())},activateRoom:function(){if(f.room){d=s.createElement("div"),d.className="pmAllpaprRoom";var e=i.pmData.doNotScaleAllpapr?1:parseFloat(w.style.width,10)/f.width;d.style.position="absolute",d.style.left="50%",d.style.marginLeft=f.room.left*e-parseFloat(w.style.left,10)-parseFloat(w.style.width,10)/2+"px",d.style.top=f.room.top*e-parseFloat(w.style.top,10)+"px",d.style.width=f.room.width*e+"px",d.style.height=f.room.height*e+"px",b.appendChild(d),t.call(f.room.onactivated,[d])}},absolute:function(e){t.call(e.onready),clearInterval(S),e=e||{};var o=e.duration||250,n=t.gbcr(y),r=t.gbcr(b),s=t.getViewportSize();b.style.height="",b.style.width=r.width+"px",y.style.overflow="scroll","mobile"===t.device.name?(y.style.position="absolute",y.style.top=t.getPageScroll()[1]+"px"):(y.style.position="fixed",y.style.top=0),y.style.left="50%",y.style.width="16000px",y.style.marginLeft="-8000px",y.style.height=s[1]+"px",b.style.margin=n.top+"px auto";var d;d=e.scrollToTop?"0px":n.top+"px",b.style.backgroundSize="100% 100%",a.console.log(b),a.console.log(y);var p=i.pmData.doNotScaleAllpapr?1:Math.min(1,e.zoomToWidth/n.width);b.style.marginLeft="auto",b.style.marginRight="auto",w.style.marginLeft="auto",w.style.marginRight="auto",w.style.marginTop=b.style.marginTop,b.style.marginTop=0,t.animate(w,{duration:o,marginTop:d,width:p*v+"px",height:p*g+"px",onplayed:function(){e.activateRoom&&l.activateRoom()}}).play()}}},S=function(e){e=e||{};var i=top.document,a=e.duration||s,n=e.opacity||p,r=[],l=void 0===e.showAlpha?!0:e.showAlpha,d=i.createElement("div"),c=i.createElement("top"),u=i.createElement("div"),m=i.createElement("div"),f=h.iframe.parentNode;return o.clearCSS(d),o.clearCSS(c),o.clearCSS(u),o.clearCSS(m),d.className="pmLeft",c.className="pmTop",u.className="pmRight",m.className="pmAlpha",d.style.position="absolute",c.style.position="absolute",u.style.position="absolute",m.style.position="fixed",d.style.cursor="pointer",u.style.cursor="pointer",c.style.cursor="pointer",d.onclick=u.onclick=c.onclick=k,e.onclickAlpha&&(m.onclick=e.onclickAlpha),d.style.top=y+"px",d.style.left="0px",d.style.width=(v-b)/2+"px",d.style.height=g-y+"px",c.style.top="0px",c.style.left="0px",c.style.width=v+"px",c.style.height=y+"px",u.style.top=y+"px",u.style.right="0px",u.style.left="",u.style.width=(v-b)/2+"px",u.style.height=g-y+"px",m.style.top="0px",e.doubleWidthAlpha?(m.style.left="-50%",m.style.width="200%",m.style.height="200%"):(m.style.left="0px",m.style.width="100%",m.style.height="100%"),m.style.zIndex=t.LAYER_ALPHA,m.style.background="black",m.style.opacity="0.2",m.style.cursor="pointer",f.appendChild(d),f.appendChild(c),f.appendChild(u),r.push(_(d,{cursor:"pointer",type:"immediate",noReajustAfter:e.noReajustAfter})),r.push(_(c,{cursor:"pointer",type:"immediate",noReajustAfter:e.noReajustAfter})),r.push(_(u,{cursor:"pointer",type:"immediate",noReajustAfter:e.noReajustAfter})),l&&(top.document.body.appendChild(m),m.style.opacity=0,m.style.transition="opacity "+a/1e3+"s",setTimeout(function(){m.style.opacity=n},0)),{left:d,top:c,right:u,alpha:m,flowedElements:r,remove:function(e){e=e||{};var t=function(){d.parentNode.removeChild(d),c.parentNode.removeChild(c),u.parentNode.removeChild(u),l&&m.parentNode.removeChild(m)};if(void 0!==e.duration){var i=e.duration;l&&(m.style.opacity=n,m.style.transition="opacity "+i/1e3+"s",m.style.opacity=0);for(var a=0;a<r.length;a++)r[a].remove(e);setTimeout(t,i)}else{for(var o=0;o<r.length;o++)r[o].remove();t()}},readjust:function(){for(var e=0;e<r.length;e++)r[e].readjust()}}},I=function(e,o){e=e||{},o=o||function(){};var n=t.gbcr(h.iframe);i.loadAllVisnodes(top.document,{minimumTop:n.top,minimumSurface:8e3},function(e){e.push({bounds:n,node:h.iframe,surface:n.width*n.height}),e.sort(function(e,t){return e.surface<t.surface?-1:e.surface>t.surface?1:0});var t={flowedElements:[]},i=1,r=1,l=s/(i+r-1),d=Math.ceil(e.length/i),p=0,c=[],u=function(e){for(var t=0;t<c.length;t++){var i=c[t].bounds,a=e.bounds,o=!0;if(i.bottom<a.top&&(o=!1),i.right<a.left&&(o=!1),i.top>a.bottom&&(o=!1),i.left>a.right&&(o=!1),o)return!0}return!1},m=function(){a.console.log("** RUNNING ROUND ** "+new Date);for(var n=d*p;d*(p+1)>n&&n<e.length;n++){var s=e[n],h={transitionDuration:r*l/1e3+"s"};u(s)?h.type="opacity":(h.type="rotateX",c.push(s)),t.flowedElements.push(_(s.node,h))}++p===i?setTimeout(function(){o(t)},r*l):setTimeout(m,l)};setTimeout(m,0)})};i.maskOver=function(){var e,a,o,n,r,s,l,d,f,v=i.framedPam,g=top.document,y=!1,b=function(){};switch(f=function(){v.log("Enter"),e||(e=S({duration:c,opacity:p,onclick:d}),s=setTimeout(function(){s=void 0,e.remove({duration:m}),e=void 0},c))},l=function(){return y?v.log("Prevented leave"):(v.log("Leave"),e&&(e.remove({duration:m}),e=void 0),a&&(a.remove({duration:m}),a=void 0),o&&(o.remove({duration:m}),o=void 0),n&&(n.remove({duration:m}),n=void 0),r&&(r.remove({duration:m}),r=void 0),void setTimeout(function(){g.body.className=g.body.className.replace(/ pmMaskOver pmBodyAnimation/g,"")},m))},d=function(){v.log("Full"),y=!0,a&&(a.remove(),a=void 0),t.animate(g.body,{scrollTop:t.gbcrfp(i.iframe.iframe).top,duration:200,css:!1,forcejs:!0,onplayed:function(){n=t.makeClose("mobile"===t.device.name?{position:"absolute",top:t.getPageScroll()[1]+"px"}:{},function(e){t.preventDefault(e),y=!1,l()}),s?(e.readjust(),clearTimeout(s)):e=S({duration:c,opacity:p,onclick:d}),g.body.className+=" pmMaskOver pmBodyAnimation",r=t.makeUnderlay({},function(e){t.preventDefault(e),y=!1,l()});var i=t.getViewportSize()[0];o=_(h.iframe,{type:"opacity",absolute:{onready:function(){e&&(e.remove(),e=void 0)},zoomToWidth:i,scrollToTop:!0,duration:u,activateRoom:!0}}),t.mouseenter(o.container,b),t.mouseleave(o.container,l)}}).play()},i.onclick=d,t.device.name){case"tablet":case"mobile":t.addEvent(h.iframe,"click",d);break;default:t.mouseenter(h.iframe,f),x.on("mouseenter",f)}},i.arch=function(){var e=S();setTimeout(function(){e.alpha.parentNode.removeChild(e.alpha)},l)},i.glow=function(){var e=top.document,i=t.getViewportSize()[0],a=i+"px",o="50% 0",n=i-v+"px";t.createCSS("body.pmGlow","-webkit-perspective-origin: "+o+"; perspective-origin: "+o+"; perspective: "+a+"; -webkit-perspective: "+a),t.createCSS("body.pmGlow > *","-webkit-transition: -webkit-transform "+c/1e3+"s; transition: transform "+c/1e3+"s; transform: translateZ(0px); -webkit-transform: translateZ(0px)");var r=S({duration:c,opacity:p,noReajustAfter:!0,doubleWidthAlpha:!0});setTimeout(function(){return r.alpha.style.opacity=0,t.getPageScroll()[1]?(r.remove(),void setTimeout(function(){e.body.className=e.body.className.replace(/ pmGlow pmBodyAnimation/g,"")},1.5*c)):(e.body.className+=" pmGlow pmBodyAnimation",void setTimeout(function(){r.alpha.style.opacity=p,t.createCSS("body.pmGlow > *","transform: translateZ("+n+"); -webkit-transform: translateZ("+n+")"),setTimeout(function(){r.alpha.style.opacity=0,t.createCSS("body.pmGlow > *","transform: translateZ(0px); -webkit-transform: translateZ(0px)"),setTimeout(function(){r.remove(),setTimeout(function(){e.body.className=e.body.className.replace(/ pmGlow pmBodyAnimation/g,"")},1.5*c)},c)},3*c)},750))},2*c)},i.flip=function(){var e=top.document;t.animate(e.body,{scrollTop:t.gbcrfp(this.iframe.iframe).top,duration:200,css:!1,forcejs:!0,onplayed:function(){var e,i,a,o,n,r=function(){if(o)for(var t=0;t<o.flowedElements.length;t++)o.flowedElements[t].remove({duration:0});a&&a.remove({duration:d}),i&&i.remove({duration:d}),n&&(n.remove({duration:d}),n=void 0),e&&e.remove({duration:d})};a=S({duration:s,opacity:p,onclickAlpha:r}),I({},function(a){o=a,e=t.makeUnderlay({},function(e){t.preventDefault(e),r()}),i=t.makeClose({},r);var s=t.getViewportSize()[0];n=_(h.iframe,{type:"opacity",absolute:{zoomToWidth:s,duration:u,activateRoom:!0}})})}}).play()},i.zip=function(){var e=300,i=250,a=e-20,n=i-20,s=top.document;t.animate(s.body,{scrollTop:0,duration:250,css:!1,forcejs:!0,onplayed:function(){var l,d,p,c=s.createElement("div"),u=s.createElement("div"),m=t.getViewportSize(),f=m[0],g=m[1],y=s.body.style.overflow;s.body.style.overflow="hidden",l=S({noReajustAfter:!0,showAlpha:!1}),l.remove({duration:1e3}),d=_(h.iframe,{type:"immediate",noReajustAfter:!0,zIndex:-1}),c.className="pmClosezip pmNozip",u.className="pmClosetag pmNozip",o.clearCSS(c),o.clearCSS(u),u.style.position=c.style.position="fixed",u.style.display=c.style.display="inline-block",u.style.top=c.style.top=g-i+"px",u.style.left=c.style.left="0px",c.style.background="url(//resources.pm/sandbox/inline/closezip.png)",u.style.width=c.style.width=e+"px",u.style.height=c.style.height="250px",u.style.zIndex=t.LAYER_HIGHEST,c.style.zIndex="",u.style.cursor="pointer",s.body.insertBefore(c,s.body.firstChild),s.body.insertBefore(u,s.body.firstChild);var b=setInterval(function(){var o=t.getPageScroll(),l=t.gbcr(s.body),d=o[1],m=t.getViewportSize()[1],h=a/v*l.height,g=d+m-n,y="perspective: "+r*(a/v)+"px; perspective-origin: "+e*e/f+"px "+g*l.height/(l.height-h)+"px";y!==p&&(p=y,t.createCSS("body.pmZip",p));var b=m-i+"px";u.style.top!==b&&(u.style.top=c.style.top=b)},50);t.createCSS("body.pmZip > *","transition: transform 1s; transform: translateZ(-"+r+"px)"),t.createCSS("body.pmZip > *.pmNozip","transform: translateZ(0)"),s.body.className+=" pmZip pmBodyAnimation","fixed"===h.iframe.style.position&&(h.iframe.style.position=""),u.onclick=function(){clearInterval(b),d.remove({duration:1e3}),t.createCSS("body.pmZip > *","transition: transform 1s; transform: translateZ(0px)"),setTimeout(function(){s.body.className=s.body.className.replace(/ pmZip pmBodyAnimation/g,""),s.body.removeChild(c),s.body.removeChild(u),s.body.style.overflow=y},1e3)},setTimeout(function(){var e=t.getViewportSize()[0];d.absolute({scrollToTop:!0,zoomToWidth:e})},1e3)}}).play()},i.options.animate&&setTimeout(function(){i.animate(i.options.animate)},n),i.options.maskOver&&i.animate("maskOver"),t.mouseenter(i.injectedDocument.body,function(){x.emit("mouseenter")}),t.addEvent(i.injectedDocument.body,"mousemove",function(){x.emit("mousemove")})})}),{update:function(e){e.iframe&&(h=e.iframe),e.wallpaper&&(f=e.wallpaper),e.realWidth&&(v=e.realWidth),e.realHeight&&(g=e.realHeight),e.realTop&&(y=e.realTop),e.pcWidth&&(b=e.pcWidth),e.position&&(w=e.position),o.loadLibrary("sweetlib.js",function(){var e=a.piximedia.SweetLib;e.mouseenter(i.injectedDocument.body,function(){x.emit("mouseenter")}),e.addEvent(i.injectedDocument.body,"mousemove",function(){x.emit("mousemove")})})}}},t.prototype.loadAllVisnodes=function(e,t,i){this.framedPam.loadLibrary("sweetlib.js",function(){var o=a.piximedia.SweetLib,n=[];t=t||{};var r,s=void 0===t.minimumTop?0:t.minimumTop,l=o.getViewportSize()[1],d=t.minimumSurface||0;if(e.createTreeWalker)for(var p,c=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);p=c.nextNode();)r={node:p,bounds:o.gbcr(p)},r.bounds&&r.bounds.width&&r.bounds.height&&(r.surface=r.bounds.width*r.bounds.height,r.surface>=d&&!(p.className||"").match(/^pm/)&&!(p.className||"").match(/ pm/)&&r.bounds.top+r.bounds.height>=s&&r.bounds.top<=l&&o.isVisible(r.node)&&n.push(r));else{var u;if(e.querySelectorAll)u=e.querySelectorAll("*");else{var m=["DIV","SPAN","P","TABLE"];u=[];for(var h=0;h<m.length;h++)u=u.concat(e.getElementsByTagName(m[h]))}for(var f=0;f<u.length;f++){var v=u[f];r={node:v,bounds:o.gbcr(v)},r.bounds&&r.bounds.width&&r.bounds.height&&(r.surface=r.bounds.width*r.bounds.height,r.surface>=d&&!(v.className||"").match(/^pm/)&&!(v.className||"").match(/ pm/)&&r.bounds.top+r.bounds.height>=0&&r.bounds.top<=l&&o.isVisible(r.node)&&n.push(r))}}return i(n)})},a.piximedia.Allpapr=t,a.piximedia.libraryLoader&&a.piximedia.libraryLoader["allpapr.js"]&&(a.piximedia.libraryLoader["allpapr.js"].complete=!0)}(),function(){var e=window,t="allpapr.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var a=0;a<i.onloads.length;a++)i.onloads[a]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["allpapr.js"]=window.piximedia.libraryLoader["allpapr.js"]||{},window.piximedia.libraryLoader["allpapr.js"].loaded=!0,function(){"use strict";function e(e){i.console&&i.console.log&&(i.console.log.apply?i.console.log.apply(i.console,arguments):i.console.log(e))}function t(){var e;try{return e=top.document,e.piximediaiframetest=!0,top}catch(t){}try{return e=i.parent.parent.parent.document,e.piximediaiframetest=!0,i.parent.parent.parent.window}catch(t){}try{return e=i.parent.parent.document,e.piximediaiframetest=!0,i.parent.parent.window}catch(t){}try{return e=i.parent.document,e.piximediaiframetest=!0,i.parent.window}catch(t){}return window}var i=window,a=function(){};try{var o=t();o&&(o.name||"").match(/pmtimepos/)&&(a=function(e){var i=function(){try{var e,i=t();e=i.performance&&i.performance.timing&&i.performance.timing.responseStart?i.performance.timing.responseStart:new Date;var a=((new Date-e)/1e3).toString();return a.match(/\\..$/)&&(a+="00"),a.match(/\\...$/)&&(a+="0"),"[pam]["+a+"] "}catch(o){return"[pam] "}};window.console.debug(i()+e)})}catch(n){}a("Done loading lib.js"),i.piximedia.easyXDM=i.easyXDM.noConflict("piximedia"),i.piximedia.Lib={};var r="callbackLib";if(i._piximedia&&i._piximedia[r]){var s=i._piximedia[r];i._piximedia[r]=void 0;for(var l=0;l<s.length;l++){var d=s[l];if(d.window)try{d.window.piximedia=d.window.piximedia||i.piximedia}catch(n){}if(d.windows)for(var p=0;p<d.windows.length;p++){var c=d.windows[p];try{c.piximedia=c.piximedia||i.piximedia}catch(n){}}try{d()}catch(n){e("Error in callback: "+n)}}}}();',n=e(),r=n.document.getElementById("pmFiFLoader");
if(r)t=r.contentWindow,i=t.document;else{var s=n.document,l=s.getElementsByTagName("head")[0];r=s.createElement("iframe"),r.id="pmFiFLoader";var c=s.createElement("iframe"),d=s.createElement("iframe");c.id="pmFiFLoader_protect_before",d.id="pmFiFLoader_protect_after",c.className="this_should_be_empty web_designer",d.className="this_should_be_empty web_designer",l.appendChild(c),l.appendChild(r),l.appendChild(d);try{t=r.contentWindow,i=t.document}catch(p){try{var u=e(),m=u.document;r.src="javascript:document.write('<head><script>document.domain=\""+m.domain+"\";</script></head><body></body>')",t=r.contentWindow,i=t.document}catch(p){r.src="javascript:document.write('<head><script>document.domain=\""+r.ownerDocument.domain+"\";</script></head><body></body>')",t=r.contentWindow,i=t.document}}i.write("<html><head></head><body><script>setTimeout(function(){document.close();},0);</script></body></html>"),r.contentWindow._piximediaIsFiFLoader=!0,r.contentWindow._piximedia=a._piximedia}var h=i.createElement("script");h.appendChild(i.createTextNode(o)),i.body.appendChild(h)}();