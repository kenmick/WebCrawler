/*!CK:3841960344!*//*1460136107,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["KdfDG"]); }

__d("EmbeddedPostPluginActions",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={EMBEDDED_POSTS_COMMENT:"embedded_post_comment",EMBEDDED_POSTS_LIKE:"embedded_post_like",EMBEDDED_POSTS_SHARE:"embedded_post_share",EMBEDDED_POSTS_UNLIKE:"embedded_post_unlike"};},null);
__d("EmbeddedPostPluginActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLICK:"click"};},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d('EntstreamAttachmentRelatedShare',['csx','cx','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CSS','DOM','Event','XPubcontentInlinePhotoPivotsEventsController','ge','getOrCreateDOMID','tidyEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=2,k=3,l={loadRelatedAttachment:function(m,n,o){var p=null;if(typeof m==="string"){p=c('ge')(m);}else p=m;if(!p)return;var q=c('Event').listen(p,'click',function(){q.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:n,is_right_click:false,share_id:o});}),r=c('Event').listen(p,'mousedown',function(event){if(event.which===k||event.button===j){r.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:n,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(m,n){var o=c('ge')(m);if(!o)return;var p=c('Event').listen(o,'click',function(){p.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').PHOTO_CLICK,{attachment:o,storyid:n});});},loadRelatedGameAttachment:function(m,n){var o=null;if(typeof m==="string"){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:o,global_share_id:n});}));c('tidyEvent')(c('Event').listen(o,'mousedown',function(event){if(event.which===k||event.button===j)c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:o,global_share_id:n});}));},loadRelatedLSCVideoAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;var p="^div._4-u2",q=c('DOM').scry(o,p),r=c('Event').listen(o,'click',function(){r.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').VIDEO_CLICK,{attachment:o,global_share_id:n});});},loadRelatedLSCInlineVideoAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;c('Event').listen(o,'click',function(){var p="^div._4-u2",q="_1d8v",r=c('DOM').scry(o,p),s=r.length===1?r[0]:null,t=s.parentNode,u=t.previousSibling;while(!u){t=t.parentNode;u=t.previousSibling;}if(!c('CSS').hasClass(u,q)){var v=c('DOM').create('div',{className:q}),w=c('DOM').insertBefore(s.parentNode,v),x=w.length>=1?w[0]:null;}else x=u;var y=c('getOrCreateDOMID')(x);new (c('AsyncRequest'))().setURI('/ajax/flash/expand_inline.php').setData({share_id:n,target_div:y,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(o.parentNode).send();});},loadRelatedEventsPivotAttachment:function(m,n){var o=null;if(typeof m==="string"){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').EVENT_JOIN,{attachment:o,event_id:n});}));},loadRelatedProductAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,{attachment:o,product_id:n});}));},closeButton:function(m,n){c('Event').listen(m,'click',function(){c('DOM').remove(n);});},closeButtonPhotoPivots:function(m,n,o,p){c('Event').listen(m,'click',function(){var q=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),r={story_id:o,search_query_type:p,event:'hide'};new (c('AsyncRequest'))().setMethod('POST').setURI(q.getURI()).setData(r).send();c('DOM').remove(n);});},seeAllLinkPhotoPivots:function(m,n,o){c('Event').listen(m,'click',function(){var p=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),q={story_id:n,search_query_type:o,event:'see_all'};new (c('AsyncRequest'))().setMethod('POST').setURI(p.getURI()).setData(q).send();});},removeOldSuggestions:function(m){var n=c('ge')(m);if(!n)return;var o=c('DOM').scry(n.parentNode,"._5d73");for(var p=1;p<o.length;p++)c('DOM').remove(o[p]);setTimeout(function(){c('CSS').show(o[0]);},1000);},showHiddenSuggestions:function(m){var n=c('Event').listen(m,'click',function(){n.remove();var o="^._1ui8",p=c('DOM').scry(m,o);if(!p)return;c('CSS').hide(p[0]);var q=p[0].previousSibling;while(q){c('CSS').show(q);q=q.previousSibling;}});}};f.exports=l;},null);
__d('AsyncFormRequestUtils',['Arbiter'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={subscribe:function(i,j,k){c('Arbiter').subscribe('AsyncRequest/'+j,function(l,m){var n=m.request.relativeTo;if(n&&n===i)k(m);});}};f.exports=h;},null);
__d('PluginTabLoadMore',['CSS','Event'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={noMoreContent:function(){c('Event').fire(this.root,'noMoreContent');c('CSS').hide(this.spinner);},setCursor:function(i){c('Event').fire(this.root,'setCursor',i);},init:function(i,j){this.root=i;this.spinner=j;}};f.exports=h;},null);
__d('PluginFeedFooterActionLogger',['BanzaiLogger','DOM','Event','EmbeddedPostPluginActions','EmbeddedPostPluginActionTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={initializeClickLoggers:function(i,j,k,l,m,n,o,p,q){var r=function(s,t){try{var v=c('DOM').find(i,'.'+s);c('Event').listen(v,'click',function(w){c('BanzaiLogger').log('PostPluginActionsLoggerConfig',{embedded_post_action:t,embedded_post_action_type:c('EmbeddedPostPluginActionTypes').CLICK,embedded_post_source:n,story_token:o,referer_url:p,is_sdk:q});});}catch(u){}};r(j,c('EmbeddedPostPluginActions').EMBEDDED_POSTS_LIKE);r(k,c('EmbeddedPostPluginActions').EMBEDDED_POSTS_UNLIKE);r(l,c('EmbeddedPostPluginActions').EMBEDDED_POSTS_COMMENT);r(m,c('EmbeddedPostPluginActions').EMBEDDED_POSTS_SHARE);}};f.exports=h;},null);
__d('PluginFeedLikeButton',['Arbiter','AsyncFormRequestUtils','ClientIDs','CSS','DOM','DOMEventListener','FBFeedLocations','FormSubmit','Keys','PluginOptin','URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();window.resetConfirmStoryLike=function(i){c('CSS').show(c('DOM').find(document,'#likeStory_'+i));c('DOM').remove(c('DOM').find(document,'#confirmStory_'+i));};var h={addClientId:function(i){i.setAttribute('value',c('ClientIDs').getNewClientID());},loggedOutLikeButton:function(i,j,k){var l='';if(j===c('FBFeedLocations').EMBED){l='post';}else if(j===c('FBFeedLocations').PAGE_PLUGIN){l='page';}else throw new Error('Invalid FBFeedLocation type.');var m=new (c('PluginOptin'))(l).addReturnParams({act:'like_'+i});c('DOMEventListener').add(k,'click',m.start.bind(m));},init:function(i,j,k,l,m){var n=function(q){if(q.type==='keypress')if(q.keyCode===c('Keys').RETURN||q.keyCode===c('Keys').SPACE){c('FormSubmit').send(m);}else return;c('FormSubmit').send(m);};c('DOMEventListener').add(j,'click',n);c('DOMEventListener').add(k,'click',n);c('DOMEventListener').add(j,'keypress',n);c('DOMEventListener').add(k,'keypress',n);var o=l.getAttribute('value')==='1';c('AsyncFormRequestUtils').subscribe(m,'send',function(q){var r=l.getAttribute('value')==='1';c('CSS').conditionShow(k,r);c('CSS').conditionShow(j,!r);c('Arbiter').inform('embeddedUfiToggle',{isLike:r,storyToken:i});l.setAttribute('value',r?'':'1');});c('AsyncFormRequestUtils').subscribe(m,'response',function(q){var r=q.response.payload;if(r&&!r.success){var s=r.isLike;c('CSS').conditionShow(j,s);c('CSS').conditionShow(k,!s);c('Arbiter').inform('revertLike',{isLike:s,storyToken:i});l.setAttribute('value',s?'1':'');}});var p=new (c('URI'))(window.location.search).getQueryData();if(o&&p.act==='like_'+i)c('FormSubmit').send(m);}};f.exports=h;},null);