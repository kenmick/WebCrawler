function cp(t,e,n){var i="clck/lid="+t;Lego.params.statRoot&&(i+="/sid="+Lego.params.msid);try{if(n=n||{},n.host=Lego.params?Lego.params["click-host"]:null,window.mordaFromCache)return window.workerMessage("counter",{path:i}),!0;Lego.c(i,e,n)}catch(o){}}function cpr(t,e,n){try{Lego.cred(t,e,n)}catch(i){}}function cpt(t,e){t+=(document.getElementById("form").text.value?".full":".empty")+"/u="+(new Date).getTime(),cp(t,e)}function c0(t){try{Lego.c(t)}catch(e){}}function csh(t,e){try{cp(t,e)}catch(n){}}function csh_ifmsid(t,e){Lego.params.statRoot&&csh(t,e)}function cpa(t){return t&&"undefined"!=typeof Lego.params.msid?"onmousedown=\"Lego.cp('132','71946','"+t+"',this)\"":""}function statRedirect(t,e,n){var i,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===n?(i=$("<form />"),o=function(){var e,n,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(n=e[2].split("&"),o=n.length;o--;)r=n[o].split("="),i.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void i.attr({action:o,target:n}).appendTo($("body"))[0].submit()):void(location.href=t)}function statRedirect(t,e,n){var i,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===n?(i=$("<form />"),o=function(){var e,n,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(n=e[2].split("&"),o=n.length;o--;)r=n[o].split("="),i.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void i.attr({action:o,target:n}).appendTo($("body"))[0].submit()):void(location.href=t)}function getcss(t){setTimeout(function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head").item(0).appendChild(e)},0)}function MordaRT(){this.listRE={}}function CoversAPI(){this.current=null,this.currentStatus=0,this.area=null,this.shareInstance=null,this.fadeTimeout=600}function CAWBrowser(){var t,e=[],n=6,i=35;for(t=n;i>t;t++)e[t]=!1;var o=navigator.userAgent;this.msie=o&&parseFloat(navigator.appVersion)>=4&&o.indexOf("Opera")<0&&o.indexOf("MSIE 4")<0&&o.indexOf("MSIE")>=0,this.win=o&&(o.indexOf("Windows 95")>=0||o.indexOf("Windows NT")>=0||o.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==o.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==o.toLowerCase().indexOf("gecko")&&-1===o.indexOf("safari");var s=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(s)for(t=n;i>t;t++)e[t]=s,e[t]=parseInt(e[t].description.substring(e[t].description.indexOf(".")-2),10)>=t;else if(this.msie&&this.win&&!this.mac)for(t=n;i>t;t++)try{e[t]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t)}catch(r){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,t=n;i>t;t++)e[t]&&(this.flash=t);this.full_version=this.flash+"",s&&s.version&&(this.full_version=s.version+"")}function workerMessage(t,e){var n=home&&home.getData&&home.getData("worker-message.data");return n?(window.chrome&&window.chrome.runtime&&window.chrome.runtime.sendMessage(n.extensionId,{to:n.workerName,data:{type:"frommorda",message:t,params:e}}),!0):!1}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof global?global:this,function(t){var e=function(){};if(e.version="1.0.29",e.isDebug=!1,e.isArray=function(t){return t instanceof Array},e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t},e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.isFunction=function(){for(var t=0,e=arguments.length;e>t;t++)if(!(arguments[t]instanceof Function))return!1;return!0},e.isObject=function(t){return"object"==typeof t},e.isString=function(){for(var t=0,e=arguments.length;e>t;t++)if("string"!=typeof arguments[t])return!1;return!0},e.stringf=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return e.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");e.JSON=JSON,e.console={slog:function(){this.log(e.stringf.apply(this,arguments))},log:function(e){"undefined"!=typeof debug?debug(e):t.console&&t.console.log&&t.console.log(e)},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}},e.log=e.console.log,e.error=e.console.error;var n=/^https?:\/\/\S+/i;e.isURL=function(t){return"string"!=typeof t&&e.error("isURL expects string parameter instead "+typeof t),n.test(t)};var i=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,n){var i=[];return e.each(t,function(t,e){n(t,e,this)&&i.push(t)}),i};e.filter=function(t,n){return e.isArray(t)||e.error("first argument is expected to be an array instead of "+typeof t),e.isFunction(n)||e.error("second argument is expected to be a function instead of "+typeof n),i(t,n)},e.forEach=function(t,e,n){var i,o;for(n=n||t,i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);return this},e.indexOf=function(t,e,n){if(n=n||0,!(t instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return t.indexOf(e,n);for(var i=0,o=t.length;o>i;i++)if(t[i]===e&&i>=n)return i;return-1},e.map=function(t,n){var i=[];if(e.isArray(t)&&n instanceof Function)if(x.isFunction(t.map))i=t.map(n);else for(var o=0,s=t.length;s>o;o++)i[o]=n(t[o],o,t);return i},function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(e(t[n],n,t))return!0;return!1};e.some=function(n,i){return e.isArray(n)||e.error("first argument is expected to be an array instead of "+typeof n),e.isFunction(i)||e.error("second argument is expected to be a function instead of "+typeof i),t(n,i)}}();var o={};e.each=o.each=function(t,n,i){if(e.isArray(t))e.forEach.apply(this,arguments);else{var o,s=i||t;for(o in t)t.hasOwnProperty(o)&&n.call(s,t[o],o,t)}return this};var s,r;"function"==typeof Object.create?s=Object.create:(r=function(){},s=function(t){return r.prototype=t,new r}),e.beget=function(t,e){var n=s(t);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},e.getRandom=function(t){return Math.floor(Math.random()*(t||1e3))},e.getElementId=function(t){e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t);var n=t.getAttribute("id");return n||(n="_"+e.getRandom(1e16),t.setAttribute("id",n)),n};var a=function(t){for(var e=document.all,n=[],i=0,o=e.length;o>i;++i)"string"==typeof e[i].getAttribute(t)&&n.push(e[i]);return n};e.getElementsByAttr=function(e){var n=[],i=arguments[1]||t.document||null;if("getAttribute"in i&&i.getAttribute(e)&&n.push(i),i&&i.querySelectorAll)try{n=n.concat(Array.prototype.slice.call(i.querySelectorAll("["+e+"]")))}catch(o){}return n.length||(n=n.concat(a(e))),n};var u=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var n=typeof t;return"string"!==n&&e.error("Argument must be string but"+n+" passed"),t.trim instanceof Function?t.trim():t.replace(u,"")},e.stripSpaces=function(t){return t.split(" ").join("")},e.bind=function(t,e){return function(){return t.apply(e,arguments)}};e.query=function(t,e){for(var n=e||this||{},i=t.split("."),o=0;n[i[o]];)n=n[i[o++]];return o===i.length?n:null},e.getJPathValue=function(t,n){return x.bind(e.query,t)(n)},e.getObject=function(t){return t.beget=function(t){return e.beget(this,t)},e.beget(t)},e.bem={getAttributes:function(t){if(!t)return"";var e,n="";for(e in t)if(t.hasOwnProperty(e)){var i=t[e];(i||0===i)&&(i=i.toString().replace(/"/g,"&quot;"),n+=" "+e+'="'+i+'"')}return n},getClassname:function(t,e){var n,i=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),i)for(n in i)i.hasOwnProperty(n)&&(i[n]||0===i[n])&&(o+=" "+t+"_"+n+"_"+i[n]);return o},getBEMParams:function(t){return JSON.stringify(t).replace(/"/g,"&quot;")}},e.create=function(t){var e=function(){};return e.prototype=t,new e},e.constructURL=function(t,e){var n,i="",o=[],s=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),r=s&&s[3]?s[3]:"";if(s&&s[2])for(var a=s[2].split("&"),u=a.length;u--;)o.push(a[u]);for(n in e)e.hasOwnProperty(n)&&o.push(n+"="+e[n]);return i=s?s[1]+"?"+o.join("&")+r:t+"?"+o.join("&")+r};var c=/([a-z]{1})([A-Z]{1})/g;e.decamelCase=function(t){return t.replace(c,function(t,e,n){return e+"-"+n.toLowerCase()})},e.data=function(t,n){return e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t),t.getAttribute("data-"+n)},e.ComponentBase={data:function(t){var n=this.element;return n?e.data(n,t):void 0},setId:function(t){return this.id=t,this},baseInit:function(t,n){var i=this;this.element=n,e.each(e.dataset(n),function(t,e){i[x.decamelCase(e)]=t})}},e.Component=function(){var t=[],n=[],i={},o="data-xapp";return{extend:function(o){var s,r=t.length;if(e.isObject(o))s=e.beget(e.ComponentBase,o);else if(e.isString(o)&&e.isFunction(arguments[1]))s=e.beget(e.ComponentBase,{id:o,init:arguments[1]});else{if(!e.isString(o)||!e.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var a=arguments[1];s=e.beget(e.ComponentBase,{id:o,init:function(){var t=e.filter(a,function(t){return e.isString(t)});t=e.map(t,function(t){if(!n[t])throw new Error("Service "+t+" hasnt defined");return n[t]()});var i=e.filter(a,function(t){return e.isFunction(t)});if(i.length>1)throw new Error("Too much declaration functions");i[0].apply(this,t)}})}return s.id||e.error("extend method expects id field in description object"),t.push(s),i[s.id]=r,t[r]},factory:function(t,e){n[t]=e},initByHTML:function(t){var n=t||document,i=this,s=e.getElementsByAttr(o,n);return e.forEach(s,function(t){var n=e.data(t,"xapp");e.forEach(n.split(" "),function(n){i.initById(n,e.getElementId(t),t)})}),this},initById:function(e,n,o){var s=e in i?t[i[e]]:null;s&&("undefined"!=typeof n&&s.setId(n),s.baseInit(n,o),s.init(n))}}}();var l=/-([\da-z])/gi;e.camelCase=function(t){return t.replace(l,function(t,e){return e.toUpperCase()})},e.dataset=function(t){var n={};return e.isElement(t)&&(t.dataset&&"hasOwnProperty"in t.dataset&&e.isFunction(t.dataset.hasOwnProperty)?n=t.dataset:e.forEach(t.attributes,function(t){0===t.name.indexOf("data-")&&(n[x.camelCase(t.name.substr(5))]=t.value)})),n},e.generateId=function(){return String(Math.random()).substr(2)},e.ns=function(t,e,n){return t[e]||(t[e]={}),"undefined"!=typeof n&&n.call(t[e]),this},e.extend=function(t,e){var n=function(){};t.superclass=n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e)},e.Interface=function(t,n){var i=this;2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=t,e.forEach(n,function(t){"string"!=typeof t&&e.error("Interface constructor expects method names to be passed in as a string"),i.methods.push(t)})},e.Interface.ensureImplements=function(t,n){return 2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),e.forEach(n,function(n){n.constructor!==e.Interface&&e.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),e.forEach(n.methods,function(i){t[i]&&"function"==typeof t[i]||e.error("Function Interface.ensureImplements: object does not implement the "+n.name+" interface. Method "+i+" was not found.")})}),!0},e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{},this.re={parse:this.re.parse,rule:this.re.rule}},e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return t&&2===t.length?this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1]):void 0},parseRules:{l10n:function(t){return function(n){return e.isDebug&&!n.l10n(t)&&e.console.error("There is no translation for "+t),n.l10n?n.l10n(t):t}},jpath:function(t){return function(n){return e.getJPathValue(n,t)||""}},view:function(t){var e=this;return function(n){return e.get(t,n)}},bem:function(t){t=t.split(".");var n=t.pop(),i=t.pop(),o=t.pop();switch(n){case"class":return function(t){return e.bem.getClassname(i,(o?t[o]:t)||{})};case"attrs":return function(t){return e.bem.getAttributes(t[i||"attrs"])};case"js":return function(t){return e.bem.getBEMParams(t[i||"js"]||{})}}}},ruleFunction:function(t,n,i){var o=this;return this.getCustomRender(t)||function(s){var r=s&&s[t]||s&&s.views&&s.views.get(t,s)||"";return r||(r=i[t]?o.getContent(i[t],s):n?n[t]:""),e.isDebug&&!r&&e.console.log("Undefined variable "+t),r||""}},getContent:function(t,n){var i="";return i=e.isArray(t)?e.map(t,function(t){return"string"==typeof t?t:t(n)}).join(""):e.isFunction(t)?t(n):t.toString()},get:function(t,e){var n=this,i=e&&e.views?e.views.templates[t]:this.templates[t];return i?n.getContent(i,e):""}},e.View.prototype.let=function(t,n,i){var o=this.templates[t]=[],s=this,r=0;return e.isFunction(n)?this.templates[t]=n:(n.replace(this.re.parse,function(t,e,a){o.push(n.substr(r,a-r),s.ruleFunction(e,i,s.templates)),r=a+t.length}),r<n.length&&o.push(n.substr(r))),this},e.views=new e.View,e.getViewsForLangs=function(t,e){var n={},i=this;return t.forEach(function(t){var o;if(e){if(!(t in e))throw new Error('No lang "'+t+'" in base views.');o=e[t]}n[t]=new i.View(o)}),n},e.toArray=function(t){return Array.prototype.slice.call(t)};var d={},h={};return e.amd={define:function(t,e,n){return n=n||!0,d[t]=e,n&&(h[t]=!0),this},require:function(){var t=e.toArray(arguments).slice(0,arguments.length-1),n=arguments[arguments.length-1];return t=e.map(t,function(t){if(!d[t])throw new Error("Unmet dependency:"+t);return h[t]?(d[t]=e.isFunction(d[t])?d[t]():d[t],d[t]):d[t]()}),n.apply(this,t),this}},e.debounce=function(t,e,n){var i;return function(){var o=this,s=arguments,r=function(){i=null,n||t.apply(o,s)},a=n&&!i;clearTimeout(i),i=setTimeout(r,e),a&&t.apply(o,s)}},e.Set=function(){this.items=[]},e.Set.prototype={add:function(t){return this.has(t)||this.items.push(t),this},has:function(t){return-1!==x.indexOf(this.items,t)},remove:function(t){var e;return this.has(t)&&(e=this.items.splice(x.indexOf(this.items,t),1)),e},removeFirst:function(){var t;return this.isEmpty()||(t=this.items.splice(0,1)),t},iterate:function(t){for(var e=0,n=this.items.length;n>e;e++)t(this.items[e],e,this.items);return this},size:function(){return this.items.length},isEmpty:function(){return 0===this.items.length}},e.range=function(t,e){var n=t.split("..."),i=0,o=0;for(n[0]&&!isNaN(n[0])&&(i=n[0]),n[1]&&!isNaN(n[1])&&(o=n[1]);o>i;)e(i++)},"function"==typeof define&&define.amd&&define("franky",[],function(){return e}),t.x=t.franky=e,e}),function(t){t=t||{},t.oframebustMatchDomain=function(t,e){t="[object Array]"===Object.prototype.toString.call(t)?t:function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}();for(var n=0,i=t.length;i>n;n++){var o=t[n];if("string"==typeof o){if(/(\?|\*)/.test(o)){var s=o.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".{1}");if(new RegExp("^"+s+"$").test(e))return!0}else if(e===o)return!0}else try{if(o.test(e))return!0}catch(r){}}}}(window.Lego),function(t){t=t||{},t.oframebust=function(e){if(window.top.location!==window.location){var n=document.referrer.match(/^https?:\/\/([^:\/\s]+)\/?.*/);if(!n)return;!t.oframebustMatchDomain(e,n[1])&&(window.top.location=window.location)}}}(window.Lego),$(function(){x.Component.initByHTML()}),x.ns(this,"ya"),x.ns(this,"home"),function(t){function e(e,i,o){var r=!1;if(s){var a=[];t.each(u,function(){o.hasOwnProperty(this)&&(r=!0)&&a.push({name:this,val:o[this]})}),r&&(t.each(o,function(t){a.push({name:t,val:this})}),o=a)}t.each(o,function(o,s){if(r&&(o=s.name,s=s.val),t.isFunction(s)&&(!n||s.toString().indexOf(".__base")>-1)){var a=e[o]||function(){};i[o]=function(){var t=this.__base;this.__base=a;var e=s.apply(this,arguments);return this.__base=t,e}}else i[o]=s})}var n=function(){"_"}.toString().indexOf("_")>-1,i=function(){},o=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=!0,r={toString:""};for(var a in r)r.hasOwnProperty(a)&&(s=!1);var u=s?["toString","valueOf"]:null;t.inherit=function(){var n=arguments,s=t.isFunction(n[0]),r=s?n[0]:i,a=n[s?1:0]||{},u=n[s?2:1],c=a.__constructor||s&&r.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!s)return c.prototype=a,c.prototype.__self=c.prototype.constructor=c,t.extend(c,u);t.extend(c,r);var l=r.prototype,d=c.prototype=o(l);return d.__self=d.constructor=c,e(l,d,a),u&&e(r,c,u),c},t.inheritSelf=function(t,n,i){var o=t.prototype;return e(o,o,n),i&&e(t,t,i),t}}(jQuery),function(t){var e=0,n="__"+ +new Date,i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){t.isEmptyObject||(t.isEmptyObject=function(t){for(var e in t)return!1;return!0})}(jQuery),function(t){t.extend({debounce:function(t,e,n,i){3==arguments.length&&"boolean"!=typeof n&&(i=n,n=!1);var o;return function(){var s=arguments;i=i||this,n&&!o&&t.apply(i,s),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,s),o=null},e)}},throttle:function(t,e,n){var i,o,s;return function(){o=arguments,s=!0,n=n||this,i||function(){s?(t.apply(n,o),s=!1,i=setTimeout(arguments.callee,e)):i=null}()}}})}(jQuery),function(t){var e="__"+ +new Date+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,s,r,a){if("string"==typeof i){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var u,c=n(s,r),l=this[e]||(this[e]={}),d=i.split(" "),h=0;i=d[h++];)if(i=this.buildEventName(i),u=l[i]||(l[i]={ids:{},list:{}}),!(c in u.ids)){var p=u.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,u.ids[c]=p.last=f}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,s){if("string"==typeof i||"undefined"==typeof i){var r=this[e];if(r)if(i){for(var a,u=i.split(" "),c=0;i=u[c++];)if(i=this.buildEventName(i),a=r[i])if(o){var l=n(o,s),d=a.ids;if(l in d){var h=a.list,p=d[l],f=p.prev,m=p.next;f?f.next=m:p===h.first&&(h.first=m),m?m.prev=f:p===h.last&&(h.last=f),delete d[l]}}else delete this[e][i]}else delete this[e]}else{var g=this;t.each(i,function(t,e){g.un(t,e,s)})}return this},trigger:function(n,i){var o,s=this,r=s[e];if("string"==typeof n?n=t.Event(s.buildEventName(o=n)):n.type=s.buildEventName(o=n.type),n.target||(n.target=s),r&&(r=r[n.type]))for(var a,u=r.list.first;u;)n.data=u.data,a=u.fn.call(u.ctx||s,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),u.special&&u.special.one&&s.un(o,u.fn,u.ctx),u=u.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(e,i,o){t.isFunction(e)?i[n(o,"*","*")]=e:t.each(e,function(e,s){t.isFunction(s)?i[n(o,e,"*")]=s:t.each(s,function(t,s){i[n(o,e,t)]=s})})}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;o>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}var s=[],r={},a={};this.BEM=t.inherit(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,s=!1;1==o?(i="",n=t,t=e,s=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",s=!0));var r=this.getMod(t,n)===i;return s?!r:r},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache;return e in i?i[e]:i[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var n=t&&"string"!=typeof t,i=this,o=[].slice.call(arguments,n?1:0),s=i._extractMods(o,n?t:e);return n||(o.length?o.forEach(function(t){i._modCache[t]=s[t]}):i._modCache=s),s},setMod:function(n,i,o){"undefined"==typeof o&&(o=i,i=n,n=e);var s=this;if(!n||n[0]){var r=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[r])return s;var a,u=n?s._getElemMod(i,n,a=s.__self._extractElemNameFrom(n)):s.getMod(i);if(u===o)return s;this._processingMods[r]=!0;var c=!0,l=[i,o,u];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){c=s._callModFn(a,t[0],t[1],l)!==!1&&c}),!n&&c&&(s._modCache[i]=o),c&&s._afterSetMod(i,o,u,n,a),delete this._processingMods[r]}return s},_afterSetMod:function(){},toggleMod:function(t,n,i,o,s){"string"==typeof t&&(s=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,n);return(r==i||r==o)&&this.setMod(t,n,"boolean"==typeof s?s?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,s){var r=n(t,i,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},{_name:"i-bem",blocks:r,decl:function(n,s,a){if("string"==typeof n?n={block:n}:n.name&&(n.block=n.name),n.baseBlock&&!r[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';s||(s={}),s.onSetMod&&(i(s.onSetMod,s),delete s.onSetMod),s.onElemSetMod&&(t.each(s.onElemSetMod,function(t,e){i(e,s,t)}),delete s.onElemSetMod);var u=r[n.baseBlock||n.block]||this;if(n.modName){var c=o(n.modName,n.modVal);t.each(s,function(n,i){t.isFunction(i)&&(s[n]=function(){var t;if(c(this))t=i;else{var o=u.prototype[n];o&&o!==s[n]&&(t=this.__base)}return t?t.apply(this,arguments):e})})}if(a&&"boolean"==typeof a.live){var l=a.live;a.live=function(){return l}}var d;return n.block==u._name?(d=t.inheritSelf(u,s,a))._processLive(!0):((d=r[n.block]=t.inherit(u,s,a))._name=n.block,delete d._liveInitable),d},_processLive:function(){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;if(t)for(var e,n=s.splice(0,t);e=n.shift();)e.fn.call(e.ctx||this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(a[n]&&(a[n].un(),delete a[n])):a[n]||(a[n]=new t.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e})}(),function(){var t=Array.prototype,e=Object.prototype.toString,n={indexOf:function(t,e){e=+(e||0);var n=this,i=n.length;if(i>0&&i>e)for(e=0>e?Math.ceil(e):Math.floor(e),-i>e&&(e=0),0>e&&(e+=i);i>e;){if(e in n&&n[e]===t)return e;++e}return-1},forEach:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))},map:function(t,e){for(var n=-1,i=this,o=i.length,s=new Array(o);++n<o;)n in i&&(s[n]=e?t.call(e,i[n],n,i):t(i[n],n,i));return s},filter:function(t,e){for(var n=-1,i=this,o=i.length,s=[];++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))&&s.push(i[n]);return s},reduce:function(t,e){var n,i=-1,o=this,s=o.length;if(arguments.length<2){for(;++i<s;)if(i in o){n=o[i];break}}else n=e;for(;++i<s;)i in o&&(n=t(n,o[i],i,o));return n},some:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!0;return!1},every:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&!(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!1;return!0}};for(var i in n)t[i]||(t[i]=n[i]);Array.isArray||(Array.isArray=function(t){return"[object Array]"===e.call(t)})}(),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e,n){function i(t,e,n){n.push(r,t,r,e)}function o(t,e,n,o){o.push(t),n&&i(e,n,o)}function s(t,e,s,r,u){o(t,n,n,u),u.push(a,e),r&&i(s,r,u)}var r="_",a="__",u="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:u,MOD_DELIM:r,ELEM_DELIM:a,buildModPostfix:function(t,e,n){var o=n||[];return i(t,e,o),n?o:o.join("")},buildClass:function(t,e,i,r,a){var u=typeof i;if("string"==u?"string"!=typeof r&&"number"!=typeof r&&(a=r,r=i,i=e,e=n):"undefined"!=u?(a=i,i=n):e&&"string"!=typeof e&&(a=e,e=n),!(e||i||a))return t;var c=a||[];return e?s(t,e,i,r,c):o(t,i,r,c),a?c:c.join("")},buildClasses:function(t,i,r,a){i&&"string"!=typeof i&&(a=r,r=i,i=n);var u=a||[];return i?s(t,i,n,n,u):o(t,n,n,u),r&&e.each(r,function(e,n){n&&(u.push(" "),i?s(t,i,e,n,u):o(t,e,n,u))}),a?u:u.join("")}}}(BEM,jQuery),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function o(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function s(t,n){var i,o=e.isArray(n);return e.isArray(t)?o?i=t.concat(n):(i=t).push(n):o?(i=n).unshift(t):i=[t,n],i}function r(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,u=a.ELEM_DELIM,c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,d=a.buildClasses,h={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=h[t.block]||(h[t.block]={});n.onBlock&&i(s,"_block",o(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(s,"_elem",o(n.onElem,t)):e.each(n.onElem,function(e,n){i(s,"_elem"+("*"===e?"":u+e),o(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,o){var s=this,r=s._params;return"undefined"==typeof n?r[t]:(!i&&t in r?o&&(r[t]=e.extend(n,r[t])):r[t]=n,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var o=i._params.attrs;return o?(n||!(t in o))&&(o[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var o=i._params.mods;return o?(n||!(t in o))&&(o[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(i.mix=!e&&"mix"in i?i.mix.concat(t):t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){var e=this,n=e._params;return n.content=s(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=s(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var o=n._tParamsChanges||(n._tParamsChanges={});return t in o||(o[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,o=typeof i;if("string"===o||"number"===o)n.push(i);else if(e.isArray(i))for(var s,r,a=0,u=i.length;u>a;)t._params=s=i[a++],r=typeof s,"string"===r||"number"===r?n.push(s):s&&(s._pos=a,s._siblingsCount=u,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,o=n._params,s=o.tag||"div",a=o.block||o.elem,u=a&&(o.block||n._curBlock.block),h=!1;o.js&&((t={})[l(u,o.elem)]=o.js===!0?{}:o.js,h=!o.elem),i.push("<",s),(a||o.cls)&&(i.push(' class="'),a&&(d(u,o.elem,o.mods,i),o.mix&&e.each(o.mix,function(e,n){n&&(i.push(" "),d(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,h||(h=!n.elem)))})),o.cls&&i.push(a?" ":"",o.cls),h&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),c[s]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=h[t._curBlock.block];if(o){var s;if(i.elem?(s=o["_elem"+u+i.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var c=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,c){var l=t._tParams;e.each(c,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),function(t){if(!window.JSON){var e,n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:e=function(s){if(null===s)return"null";if("undefined"==typeof s)return t;switch(n.call(s)){case"[object String]":return i.lastIndex=0,'"'+(i.test(s)?s.replace(i,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):s)+'"';case"[object Number]":case"[object Boolean]":return""+s;case"[object Array]":for(var r,a="[",u=0,c=s.length;c>u;)r=e(s[u]),a+=(u++?",":"")+("undefined"==typeof r?"null":r);
return a+"]";case"[object Object]":if("[object Function]"===n.call(s.toJSON))return e(s.toJSON());var r,a="{",u=0;for(var l in s)s.hasOwnProperty(l)&&(r=e(s[l]),"undefined"!=typeof r&&(a+=(u++?",":"")+'"'+l+'":'+r));return a+"}";default:return t}},parse:function(t){return Function("return "+t)()}}}}(),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){i=decodeURIComponent(r.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+24*n.expires*60*60*1e3)):u=n.expires,a="; expires="+u.toUTCString()}var c=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,c,l,d].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(o){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(r,a){s(a,i,r,n);var u=f[a.uniqId];u?u.domElem.index(i)<0&&(u.domElem=u.domElem.add(t),e.extend(u._params,a)):o(r,t,a)})}function o(t,i,o,r,u){"boolean"==typeof o&&(u=r,r=o,o=n);var c=i[0];o=s(o||a(c)[t],c,t);var l=o.uniqId;if(f[l])return f[l]._init();p[l]=p[l]?p[l].add(i):i;var d=c.parentNode;d&&11!==d.nodeType||e.unique(p[l]);var h=v[t]||S.decl(t,{},{live:!0});if(!(h._liveInitable=!!h._processLive())||r||o.live===!1){r&&i.addClass("i-bem");var m=new h(p[l],o,!!r);return delete p[l],u&&u.apply(m,E.call(arguments,4)),m}}function s(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(n),r=m[s]||(m[s]={});return r[i]||(r[i]=t),t}function r(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=u(t))}function u(t){var n,i,o=t.getAttribute("data-bem");return o?JSON.parse(o):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),o=i.attr("onclick")||i.attr("ondblclick"),o&&(n=Function(o))),n?n():{})}function c(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var d=e(window),h=e(document),p={},f={},m={},g={},_={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,w=b.MOD_DELIM,x=b.ELEM_DELIM,k=b.buildClass,E=Array.prototype.slice,M=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var S=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},f[o._uniqId=n.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,s,r){if(!this.domElem)return[];s||(s=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,u="string"==typeof s,c=u?s:s.block||s.blockName,l="."+(u?k(c):k(c,s.modName,s.modVal))+(r?":first":""),d=a.filter(l);if(t&&(d=d.add(a[t](l))),r)return d[0]?o(c,d.eq(0),!0):null;var h=[],p={};return e.each(d,function(t,n){var i=o(c,e(n),!0);p[i._uniqId]||(p[i._uniqId]=!0,h.push(i))}),h},bindToDomElem:function(t,n,i){var o=this;return i?t.bind(o._buildEventName(n),function(t){return(t.data||(t.data={})).domElem=e(this),i.apply(o,arguments)}):e.each(n,function(e,n){o.bindToDomElem(t,e,n)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindToWin:function(t,e){var n,i,o=e;return"resize"===t&&(e=function(){var t=d.height(),e=d.width();(n!==t||i!==e)&&(n=t,i=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindTo:function(t,n,i){return!n||e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(h,t)},unbindFromWin:function(t){return this.unbindFromDomElem(d,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this,n=e._eventNameCache;if(t in n)return n[t];var i="."+e._uniqId;if(t.indexOf(".")<0)return n[t]=t+i;var o=".bem_"+e.__self._name;return n[t]=t.split(".").map(function(t,e){return 0==e?t+o:o+"_"+t}).join("")+i},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,n){var i=this,o=g[i.__self._buildCtxEventName(t.type)],s={};o&&i.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var u=e.identify(r,!0);if(u){if(s[u])break;var c=o.ctxs[u];c&&(e.each(c,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),s[u]=!0}r=r.parentNode}})},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem)[0];return o&&(i=o.className.match(this.__self._buildModValRE(t,n||e))),i?i[2]:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(w),i=t.substr(0,e-1).lastIndexOf(w);n[t.substr(i+1,e-i-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,s){if(!this._isDestructing){var r=this.__self,a=r._buildModClassPrefix(t,s),u=r._buildModValRE(t,s),c=""===n;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(u,c?"":"$1"+a+n):c||e(this).addClass(a+n)}),s&&this.dropElemCache(s,t,i).dropElemCache(s,t,n)}},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=e.map(function(t){return k(o,t,n,i)}),a=1===s.length,u="."+(a?s[0]:s.join(",.")),c=r(t,u);return 1===t.length&&this.domElem&&1===this.domElem.length&&t[0]===this.domElem[0]&&s.forEach(function(t,n){(this._elemCache[t]=a?c:c.filter("."+t)).__bemElemName=e[n]},this),c},_elem:function(t,e,n){return this._elemCache[k(this.__self.getName(),t,e,n)]||this.findElem(t,e,n)},elem:function(t,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]),s=this;return t.split(" ").forEach(function(t){o=o.add(s._elem(t,n,i))}),o},dropElemCache:function(t,e,n){if(t){var i=this.__self.getName();t.split(" ").forEach(function(t){delete this._elemCache[k(i,t,e,n)]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),u(t[0])[k(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=f[e.uniqId];i?i._isDestructing||l(i,n):delete p[e.uniqId]}),c(n)}),t||n.domElem.remove(),delete f[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base())}},{scope:null,doc:h,win:d,_processLive:function(t){var e=this,n=e._liveInitable;if("live"in e){var i="undefined"==typeof n;if(i^t){n=e.live()!==!1;var o=e.getName(),s=e.live;e.live=function(){return this.getName()===o?n:s.apply(this,arguments)}}}return n},init:function(t,n,o){(!t||e.isFunction(t))&&(o=n,n=t,t=h);var s=e.identify();return r(t,".i-bem").each(function(){i(e(this),s)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),M.call(r(i,".i-bem",o)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=f[e.uniqId];i?l(i,n):delete p[e.uniqId]}}),c(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){return this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){return this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){return this.init(e(n).appendTo(t))},prepend:function(t,n){return this.init(e(n).prependTo(t))},before:function(t,n){return this.init(e(n).insertBefore(t))},after:function(t,n){return this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var s=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){s._liveClassBind(t,e,i,o)});else{var r=_[n],a=e.identify(i);r||(r=_[n]={},h.bind(n,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(i,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=_[n];if(o)if(i){if(o=o[t]){var s=e.identify(i);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=_[t.type];if(n){var i=t.target,o=[];for(var s in n)n.hasOwnProperty(s)&&o.push(s);do for(var r=" "+i.className+" ",a=0;s=o[a++];)if(r.indexOf(" "+s+" ")>-1){for(var u,c=0,l=n[s].fns,d=!1;u=l[c++];)u.fn.call(e(i),t)===!1&&(d=!0);if(d&&t.preventDefault(),d||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(s){var r=[i._name,((s.data||(s.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?r.concat([t,s]):r);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,s){(!i||e.isFunction(i))&&(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(k(r._name,e,t.modName,t.modVal),i,o,s)}),r):r._liveClassBind(k(r._name,t.elem,t.modName,t.modVal),i,o,s)},liveUnbindFrom:function(t,i,o){(!i||e.isFunction(i))&&(o=i,i=t,t=n);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(k(s._name,t),i,o)}),s):s._liveClassUnbind(k(s._name,t),i,o)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[i](o);n&&s.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockInsideInit:function(t,e){return this.liveInitOnBlockInsideEvent("init",t,e)},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,s,r){var a=this;if("string"==typeof i)if(e.isFunction(o)&&(r=s,s=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var u=a._buildCtxEventName(i),c=g[u]||(g[u]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=c.ctxs[t];n||(n=c.ctxs[t]={},++c.counter),n[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){var s=this,r=g[n=s._buildCtxEventName(n)];return r&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=r.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],(!i||e.isEmptyObject(t))&&(r.counter--,delete r.ctxs[n]))}),r.counter||delete g[n]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:n},extractParams:u,_buildModClassPrefix:function(t,e){return k(this._name)+(e?x+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+w+t+w},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+x+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+k(this._name,t,e,n)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:d.width(),height:d.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var t=this.replace(/^\s\s*/,""),e=/\s/,n=t.length;e.test(t.charAt(--n)););return t.slice(0,n+1)})}(),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,$(function(){t.oframebust&&Lego.oframebust(t.oframebust)})}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return!!t.getCookie("yandex_login")}}(window.Lego),function(t){function e(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,n,i){i=i||{};var o=e(i.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,n,i){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+n+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(i?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],o=document.createElement("script");o.setAttribute("src",s(t,i.useLinkHref&&Object(n).href?n.href:location.href,"jclck")),e.insertBefore(o,e.firstChild)};if(n)if(n.className.match(/b-link_pseudo_yes/)||n.href&&n.href.match(/^mailto:/)||i.noRedirect===!0)r();else if(n.href){var a=n.href;n.href=s(t,a,"redir"),setTimeout(function(){n.href=a},500)}else if(n.form)if(n.type.match(/submit|button|image/)){var a=n.form.action;n.form.action=s(t,a,"redir",!0),setTimeout(function(){n.form.action=a},500)}else r();else{if(!n.action)throw"counter.js: not link and not form!";n.action=s(t,n.action,"redir",!0)}else r()}}(window.Lego),function(t,e){t||(t=window.Lego={}),t.cp=function(n,i,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+n+"/cid="+i+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)}}(window.Lego),function(t){t||(t=window.Lego={}),t.ch=function(e,n,i){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,n,i)}}(window.Lego),function(t){t.cred=function(t,e,n){var i,o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.setAttribute("src",t),e.insertBefore(n,e.firstChild)};if(e)if("A"===e.tagname&&!e.href||e.href&&e.href.match(/^mailto:/)||n&&n.noRedirect===!0)o();else if(e.href)i=e.href,e.href=t,setTimeout(function(){e.href=i},500);else if(e.form)e.type.match(/submit|button|image/)?(i=e.form.action,e.form.action=t,setTimeout(function(){e.form.action=i},500)):o();else{if(!e.action)throw"counter.js: not link and not form!";e.action=t}else o()}}(window.Lego),window.csh_ifgsid=csh_ifmsid,function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1===n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1===i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":n.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),t(function(){n.oframebust&&e.oframebust(n.oframebust)}),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",s=e.block[o];s&&!n.data(o)&&(s.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=!!t(document).ready(function(){e.blockInit()}))}(jQuery,window.Lego),function(t,e){var n=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?n=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(n=t.devicePixelRatio),"function"==typeof t.matchMedia){var o="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";i=t.matchMedia(o).matches}else i=n>=1.3;var s={};/msie|trident/i.test(e)?s.ie=parseInt(e.split(/msie|rv:/i)[1],10):t.opera&&(s.opera=parseInt(t.opera.version(),10));var r,a={},u={};(r=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?a.wp=r[1]:(r=e.match(/Android\s+([\d.]+)/))?a.android=r[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?a.android="2.3":(r=e.match(/iPhone\sOS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),u.iphone=!0):(r=e.match(/iPad.*OS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),u.ipad=!0):(r=e.match(/Bada\/([\d.]+)/))?a.bada=r[1]:(r=e.match(/MSIE\s9/))?a.wp="7.5":a.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(n){return t[n]&&(e=n)}),this.setMod("platform",e),t.hiDpi&&this.setMod("hi-dpi","yes")}}},{ios:a.ios,iphone:u.iphone,ipad:u.ipad,android:a.android,bada:a.bada,wp:a.wp,other:a.other,dpr:n,hiDpi:i,ua:e,ie:s.ie,opera:s.opera})}(window,navigator.userAgent),function(t){t||(t=window.Lego={}),t.messages=t.messages||{},t.message=function(e,n){return"ru"===t.params.locale?n:t.messages[e]||n}}(window.Lego),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),function(t){BEM.decl("i-visibilitychange",{init:function(){var e=t.document,n=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in e?e.addEventListener("visibilitychange",this.changeThis(function(){this.change(e.hidden)})):(this.hiddenProp="mozHidden")in e?e.addEventListener("mozvisibilitychange",n):(this.hiddenProp="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",n):(this.hiddenProp="msHidden")in e?e.addEventListener("msvisibilitychange",n):"onfocusin"in e?e.onfocusin=e.onfocusout=n:t.onpageshow=t.onpagehide=t.onfocus=t.onblur=n},normalize:function(e){var n,i=t.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};e=e||t.event,n=e.type in o?o[e.type]:i[this.hiddenProp],i.hidden=n,$(t).trigger("visibilitychange"),this.change(n)},change:function(t){this.channel("sys").trigger("visibilitychange",{hidden:t}),this.channel("sys").trigger(t?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window),function(){"undefined"!=typeof home&&(home.lang={},home.l10n=function(t){return x.query(t,home.lang)||""})}(),function(t){var e,n;try{e=t.localStorage,n="ya_ls_test",e.setItem(n,"1"),"1"!==e.getItem(n)?e=null:e.removeItem(n)}catch(i){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,n){return a(function(){return e.setItem(t,n)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),function(t){"use strict";for(var e=["ms","moz","webkit","o"],n=0;n<e.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[e[n]+"RequestAnimationFrame"];if(void 0===t.requestAnimationFrame){var i,o=[],s=+new Date,r=0,a=function(){var t=o;o=[],r=+new Date,i=0;for(var e=0,n=t.length;n>e;e++)t[e](r-s)};t.requestAnimationFrame=function(e){if(o.push(e),!i){var n=+new Date,s=Math.max(0,16-(n-r));i=t.setTimeout(a,s)}return i},t.requestAnimationFrame.fallback=!0}}(this),function(){"use strict";function t(t){this.parts="string"==typeof t?t.split("."):[]}t.prototype.isGreater=function(t){for(var e=Math.max(this.parts.length,t.parts.length),n=0;e>n;++n){if(void 0===t.parts[n]||this.parts[n]>t.parts[n])return!0;if(void 0===this.parts[n]||this.parts[n]<t.parts[n])return!1}return!1},t.prototype.isEqual=function(t){if(this.parts.length!==t.parts.length)return!1;for(var e=0;e<this.parts.length;++e)if(this.parts[e]!==t.parts[e])return!1;return!0},t.prototype.isGreaterOrEqual=function(t){return this.isEqual(t)||this.isGreater(t)},home.Version=t}(),home.getTouchEvents=function(t){var e=t.originalEvent;return e.touches&&e.touches.length?e.touches:e.changedTouches},home.getTouchEvent=function(t){var e,n,i,o=home.getTouchEvents(t);return e=o&&o.length?o[0]:t.originalEvent,n=e.pageX||e.clientX,i=e.pageY||e.clientY,{x:n,y:i}},BEM.DOM.decl("link",{getDefaultParams:function(){return{origTabindex:"0"}},onSetMod:{disabled:function(t,e){var n="yes"===e;this.domElem.attr({"aria-disabled":n,tabindex:n?-1:this.params.origTabindex})}}}),BEM.DOM.decl({name:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})},_onKeyUp:function(t){t.shiftKey||t.ctrlKey||t.altKey||(13===t.which||32===t.which)&&(this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")}))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick tap",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this._onKeyUp(t)})}}),function(){var t,e={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},n=function(){};BEM.decl("i-mda-auth",{},{authenticate:function(i){if(t=Lego.params["mda-auth-url"]||home.getData("i-mda-auth.url")||"",""===t)return!1;var o=Lego.params["mda-auth-delay"]||10;n=i||function(){},setTimeout(function(){var n=document.createElement("iframe");n.style.visibility="hidden",n.style.position="absolute",n.setAttribute("src",t),n.style.top=n.style.left=n.style.width=n.style.height=0,document.getElementsByTagName("body")[0].appendChild(n),e.isRequestSent=!0},o)},isRequestSent:function(){return e.isRequestSent},isFeedbackReceived:function(){return e.isFeedbackReceived},isAuthenticated:function(){return e.isAuthenticated},getUrl:function(){return t},registerFeedback:function(t){var i="success"===t;e.isFeedbackReceived=!0,e.isAuthenticated=i,n(i)}})}(),x.amd.define("statlog",function(){var t,e=null,n=null,i="/dtype",o="%s/session_id=%s/events=%s/*",s=!1,r={},a={statRoot:null,enabled:!0,showId:null,statDataAttr:"statlog",dataNoRedirKey:"statlog-noredir",doc:null,skipReadyKey:!1,sendAtWill:!1,dataReadyKey:"statlog-ready",statRedirEvent:"mousedown",statNoRedirEvent:"click",skipVisibleCheck:!1,clckDemonHost:"//clck.yandex.ru/",redirHost:"//clck.yandex.ru/",debounceDelay:1e3,logUniqueShow:!1,sendStartHandler:null,sendSuccessHandler:null,sendErrorHandler:null,clickCounter:function(t,e){e=e||null,window.cp(a.statRoot+"."+t,e)}},u=function(){return e||n},c=function(){var t=[];return u()?(e&&t.push({event:"show","parent-path":a.statRoot,blocks:e.children}),n&&t.push({event:"click","parent-path":a.statRoot,blocks:n.children}),JSON.stringify(t)):""},l=function(t,e){var n=e.prop("href");n.indexOf(a.redirHost)>-1?clearTimeout(e.data("statlog-timeout")):e.data("statlog-original-href",n).attr("href",a.redirHost+"redir/dtype=clck/lid="+t+"/sid="+a.showId+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(n.match(/^http/)?n:location.protocol+"//"+location.host+(n.match("^/")?n:"/"+n)))),e.data("statlog-timeout",setTimeout(function(){e.attr("href",e.data("statlog-original-href"))},500))},d=function(){s||(s=!0,a.enabled&&$(a.doc||document).on(a.statRedirEvent+" "+a.statNoRedirEvent,"*[data-"+a.statDataAttr+"]",function(t){var e=$(this),n=e.data(a.statDataAttr),i=a.statRoot+"."+n,o=e.attr("href"),s=e.data(a.dataNoRedirKey)||!o;n&&(s?t.type===a.statNoRedirEvent&&(window.cp?window.cp(i,null):p(n,"click")):o&&t.type===a.statRedirEvent&&l(i,e)),e.data("statlog-instant")&&m()}))},h=function(t,e){var n=t;x.forEach(e.split("."),function(t){var e=function(e){return e.ctag===t};n.children||(n.children=[]);var i=x.filter(n.children,e);i.length||n.children.push({ctag:t}),n=x.filter(n.children,e)[0]})},p=function(t,i){if(i||(i="show"),"undefined"!=typeof t&&a.enabled){if("show"===i){if(a.logUniqueShow&&t in r)return;e=e||{},r[t]=!0}else n=n||{};h("show"===i?e:n,t),a.sendAtWill&&g()}},f=function(t,e){$.ajax({type:"POST",url:a.clckDemonHost+"counter",data:i+"="+t,xhrFields:{withCredentials:!0},dataType:"text",complete:e,success:a.sendSuccessHandler,error:a.sendErrorHandler})},m=function(t){var e;u()&&a.showId?(e=x.stringf(o,"clck",a.showId,c()),_(),f(e,t)):t&&t()},g=function(){a.sendStartHandler&&a.sendStartHandler(),t||(t=x.debounce(m,a.debounceDelay)),t()},_=function(){e=null,n=null};return{isEnabled:function(){return a.enabled},getParams:function(){return a},configure:function(t){a=x.beget(a,t)},handleClicks:d,log:p,checkAndLog:function(){a.enabled&&this.logByFragment({})},logByFragment:function(t){var e=x.beget(a,t),n=this,i="data-"+e.statDataAttr,o=i.substr(5),s="*["+i+"]",r=e.doc?$(e.doc).find(s):$(s);$(r).each(function(){if(e.skipVisibleCheck||$(this).is(":visible")){if(!i.match(/^data-/))throw new Error("data attribute expected as statAttr");var t=$(this).data(o);(e.skipReadyKey||!$(this).data(e.dataReadyKey))&&(n.log(t),$(this).data(e.dataReadyKey,t))}})},dumpDATA:c,send:m,clearStatData:_}}),function(t){if(t.support.cors||!t.ajaxTransport||!window.XDomainRequest)return t;var e=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return t.ajaxTransport("* text html json",function(o,s){if(o.crossDomain&&o.async&&n.test(o.type)&&e.test(o.url)&&i.test(o.url)){var r=null;return{send:function(e,n){var i="",a=(s.dataType||"").toLowerCase();r=new XDomainRequest,/^\d+$/.test(s.timeout)&&(r.timeout=s.timeout),r.ontimeout=function(){n(500,"timeout")},r.onload=function(){var e="Content-Length: "+r.responseText.length+"\r\nContent-Type: "+r.contentType,i={code:200,message:"success"},o={text:r.responseText};try{if("html"===a||/text\/html/i.test(r.contentType))o.html=r.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(r.contentType))try{o.json=t.parseJSON(r.responseText)}catch(s){i.code=500,i.message="parseerror"}}catch(u){throw u}finally{n(i.code,i.message,o,e)}},r.onprogress=function(){},r.onerror=function(){n(500,"error",{text:r.responseText})},s.data&&(i="string"===t.type(s.data)?s.data:t.param(s.data)),r.open(o.type,o.url),r.send(i)},abort:function(){r&&r.abort()}}}}),t}(jQuery),function(){function t(t,e,s){n||(n=$('<iframe style="display:none" src="'+t+'"></iframe>'));var r=function(){n[0].contentWindow.postMessage&&n[0].contentWindow.postMessage({type:"params",params:e,labels:s},"*")};o?r():n.bind("load",function(){o=!0,r()}),i||($("body").append(n),i=!0)}function e(){return home&&home.getData&&home.getData("ga-counter.data")}var n=null,i=!1,o=!1;window.home=window.home||{},window.home.gaCounter={track:function(n){var i=e();i&&i.customLabels&&i.customLabels[n]&&t(i.iframeSrc,null,i.customLabels[n])},trackCancel:function(){this.track("cancel")},trackCancelPopup:function(){this.track("cancelPopup")}},$(document).ready(function(){function n(){var t=home.localStorage.getItem("gaCounterShowTime");return!t||Number(t)<o.ignoreLSBefore||+new Date-Number(t)>o.showTimeout?!0:!1}function i(){t(o.iframeSrc,o.params,o.labels),home.localStorage.setItem("gaCounterShowTime",+new Date)}var o=e();o&&n()&&setTimeout(function(){i()},o.timeout)})}(),x.amd.require("statlog",function(t){BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"ff"},{onSetMod:{js:function(){function t(){n.popup.hide(),$(document).unbind("focus",t),n.dragIcon.unbind("mousedown",e)}function e(){setTimeout(function(){$(document).focus(t)},500)}var n=this;n.dropdown=n.findBlockInside("dropdown"),n.popup=n.findBlockInside({block:"popup",modName:"sethome",modVal:"fx"}),n.dragIcon=$(".b-sethome__drag-icon"),n.popup.on({show:function(){n.dragIcon.bind("mousedown",e)},hide:function(){$(document).unbind("focus",t),n.dragIcon.unbind("mousedown",e)}})}}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"ie"},{onSetMod:{js:function(){var e=this;e.homeUrl=e.params.homeUrl,e._getHomePage(),e.bindTo("link","leftclick tap",function(){e._setHomePage()}),t.checkAndLog()}},_setHomePage:function(){try{return document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(this.homeUrl),this._getHomePage(),!1
}catch(t){}},_getHomePage:function(){var t=document.body,e=Lego.params["lang-zone"]||"ru";return t.style.behavior="url(#default#homepage)",t.isHomePage("http://yandex."+e+"/")||t.isHomePage("http://www.yandex."+e+"/")||t.isHomePage(this.homeUrl)?(this.setMod("show","bar"),!0):void 0}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"chrome"},{onSetMod:{js:function(){var e=this,n=this.params,i=n.statPath,o=n.bannerid,s=n.extLink,r=home.ds.decl(n.dsParts),a={link:i+".link",yes:i+".yes",no:i+".no",error:i+".error"};s&&e.bindTo("link","leftclick tap",function(){r.send("click"),t.log(a.link,"click");try{window.chrome.webstore.install(s,function(){e.domElem.addClass("i-hidden"),t.log(a.yes,"click"),r.send("install"),BEM.blocks["i-bannerid"].save(o)},function(){t.log(a.no,"click"),r.send("error"),window.home.gaCounter.trackCancel()}),t.log(a.yes),t.log(a.no)}catch(n){t.log(a.error,"click")}return!1})}}})}),BEM.KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9},function(){var t={};for(var e in BEM.KEYS)BEM.KEYS.hasOwnProperty(e)&&(t[BEM.KEYS[e]]=e);var n={CTRL:"ctrlKey",ALT:"altKet",SHIFT:"shiftKey",META:"metaKey"},i=function(e){var i=t[e.which]||"";for(var o in n)n.hasOwnProperty(o)&&e[n[o]]&&(i=o+"+"+i);return i};BEM.DOM.liveBindKey=function(t,e,o){var s={};return $.isFunction(e)&&(o=e,e=t,t=void 0),e.split(" ").forEach(function(t){var e=t.split("+");e.forEach(function(e){var i=e.toUpperCase();if(!(i in n||i in BEM.KEYS))throw"i-keys.js: Unknown key "+t}),s[t.toUpperCase()]=!0}),this.liveBindTo(t,"keydown",function(t){var e=i(t);e in s&&o.call(this,t)===!1&&t.preventDefault()})}}(),BEM.DOM.decl("dropdown",{onSetMod:{js:function(){var t=this,e=t.params,n=t._popup=t.findBlockOn(t.elem(e.popupElem),"popup");n.on("show",this._onPopupShow,this).on("hide",this._onPopupHide,this),e.popupMethods.map(function(e){t[e]=n[e].bind(n)});var i=t.params.switcherBlock,o=t.elem("switcher");i&&(t._switcher=t.findBlockOn(o,i).domElem),o.attr({"aria-haspopup":!0,"aria-expanded":!1})},action:function(t,e){var n="open"===e;this.elem("switcher").attr("aria-expanded",n),this._getButton()&&this._getButton().toggleMod("arrow","up","down",n)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}},destruct:function(){this._popup&&(this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem)),this.__base.apply(this,arguments)},_toggle:function(){this._popup.toggle(this._switcher)},_onSwitcherClick:function(){this._switcher||(this._switcher=this.elem("switcher")),this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase();"button"!==e&&("a"!==e&&13===t.which||32===t.which)&&(t.preventDefault(),this.params.switcherBlock||this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")}},{live:function(){this.liveBindTo("switcher","leftclick tap",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("dropdown",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._switcher=this._switcher||this.elem("switcher")}}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,n=this._repackDirParams(t.directions),i=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(i);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{tail:this._tailParamsHook}),t},this)},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e;var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(){if(this._isHiding)return this;if(this._isShown&&(this._isHiding=!0,this._childs.forEach(function(t){t.hide()}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no"))){var t=this;return this.beforeHide(function(){t.domElem&&t.delMod("visibility")}),this}return this.delMod("visibility")},toggle:function(t){return this._isShown&&!this._isHiding?this.hide():this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},repaintShadowIfNeeded:function(){return this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild(this),this},addChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),e.push(t)},removeChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return void e.splice(i,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this.bindToDoc("keydown",function(t){27===t.which&&0===this._childs.length&&this.hide()}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_onHidden:function(){this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this._detachUnder(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){(!this._lastFocused.is(this._scope)||this._lastFocused.is(t.target))&&(t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus()))},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,n){var i={},o=Object.prototype.hasOwnProperty;return n||(n={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(n,s)?n[s].call(this,t[s],e[s]):e[s];i[s]=!r||"object"!=typeof r||Array.isArray(r)?r:t[s]?this._mergeParams(t[s],r,n):r},this),i},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],n=e,i=t.length,o=[],s=0;i>s;s++)for(var r=t[s],a=r.length,u=0;a>u;u++)for(var c=e[s],l=c.length,d=0;l>d;d++)for(var h=n[s],p=h.length,f=0;p>f;f++)o.push({direction:r[u],axis:c[d],tail:{axis:h[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},n=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),n=t.map(function(t){if("string"==typeof t){var n=t.split("-");t={to:n[0],tail:{}},n[1]&&(t.axis=n[1]),n[2]&&(t.tail.axis=n[2])}var i=t.to;return e[i]||(e[i]=t),t.axis&&(i+="-"+t.axis),t.key=i,e[i]=t,i},this),{directions:e,keys:n}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,n=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;n>t;t++){var i=e[t],o=this._directions[i];this._resetPos(i)._pushPos(i,this._calcPos(o))._pushPos(i,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(i)._pushTailPos(i,this._calcTailPos(o))._pushTailPos(i,this._calcTailOffset(o))._pushPos(i,this._calcOffsetByTail(o)),this._pushPos(i,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[i],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),n=this.getOwnerSize(),i=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-i.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+n.width}}return r},_calcTop:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=i.top:"middle"===t?e+=i.top+o.height/2-n.height/2:"bottom"===t&&(e+=i.top+o.height-n.height),e},_calcLeft:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=i.left:"center"===t?e+=i.left+o.width/2-n.width/2:"right"===t&&(e+=i.left+o.width-n.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,n=this._cache.offset||(this._cache.offset={}),i=t.key,o=t.offset;if(n[i])return n[i];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(i){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return n[i]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,n){n!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),n):(n=e,Object.keys(t).forEach(function(e){this._sum(t[e],n)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(n){t[n]=(t[n]||0)+e[n]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,n,i=this._viewport,o=this._getSizeOf(i),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},u=this.hasMod("position","fixed")?{top:0,left:0}:{top:i.scrollTop(),left:i.scrollLeft()},c=r.top+a.top-u.top,l=r.left+a.left-u.left,d=l+s.width-o.width,h=c+s.height-o.height,p={height:s.height,width:s.width},f=100;return h>0&&(p.height-=h),0>c&&(p.height+=c),0>l&&(p.width+=l),d>0&&(p.width-=d),p.height<0||p.width<0?f=0:(n=Math.abs(p.height*p.width),e=s.height*s.width,e!==n&&(f=n/e*100)),f},_findParent:function(t){return this.findBlockOutside(t,"popup")},destruct:function(){return this._childs.forEach(function(t){BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this.__base.apply(this,arguments)},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","leftclick tap",function(){this.hide()})},_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var n="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(n=""),t.find(n+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),n=!0;return parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility")?!1:($(this).parentsUntil(e).each(function(){var t=$(this);return"none"===t.css("display")?n=!1:void 0}),n)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"leftclick tap",function(t){t.stopPropagation(),this.hide()}),this.bindTo(t,"mousedown",function(){this._skipReturnFocus=!0})),this.bindToDoc("leftclick tap",function(t){if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide()}}),this.bindToDoc("mousedown",function(){this._skipReturnFocus=!0})},_disableAutoclosable:function(){this.hasMod(this._under,"type","paranja")&&this.unbindFrom(this._under,"leftclick tap mousedown"),this.unbindFromDoc("leftclick tap mousedown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var n,i=this._childs.length;for(n=0;i>n;n++)if(this.containsDomElem.call({domElem:this._childs[n].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,n=this.getCurrPos(),i={opacity:1,top:n.top,left:n.left},o={opacity:0,top:n.top,left:n.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(i,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var n=e.to,i=this.getCurrPos(),o=this.domElem,s={top:i.top,left:i.left,opacity:0};return"bottom"===n?s.top+=10:"top"===n?s.top-=10:"left"===n?s.left-=10:"right"===n&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(){var t=[];BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}},isDivEnough:function(){return!1},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var e=t.pop();return e&&(this._underInPool=!1),this._under=e||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem):t.prependTo(this.domElem)},_detachUnder:function(){var e=this._under;t.push(e.detach()),this._under=null,this._underInPool=!0},destruct:function(){return this._underInPool&&t.pop(),this._under&&this._under.remove(),this.__base.apply(this,arguments)}})}(),BEM.DOM.decl("popup",{_createUnder:function(){var t,e,n=$(".i-ua_browser_yandexbrowser").length||$(".i-ua_browser_chromemobile").length||/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(n)return $("<div></div>");try{t=location.hostname!==document.domain}catch(i){t=!0}return e=$.browser&&$.browser.msie,$('<iframe aria-hidden="true" tabindex="-1"'+(e&&$.browser.version<9?' frameborder="0"':"")+(e&&t?" src=\"javascript:void(function(){document.open();document.write('&lt;script&gt;document.domain=\\'"+document.domain+"\\'&lt;/script&gt;');document.close();})()\"":"")+"/>")}}),function(t){if(t.dom)throw Error("$.dom namespace is already used");t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base(),this._tailPos={}}},_calcTailPos:function(t){var e=t.to,n=this._positions[t.key],i=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(i,n):("left"===e||"right"===e)&&(o.top=this._calcTailTop(i,n)),o},_calcTailTop:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,u=o.top-e.top,c=e.top+r.height-(o.top+i.height);return u>0&&(n+=u,a-=u),c>0&&(a-=c),"middle"===t?(a-=s,n+=a/2):"bottom"===t&&(a-=s,n+=a),0>n&&(n=0),n},_calcTailLeft:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,u=r.width,c=e.left+r.width-(o.left+i.width);return a>0&&(n+=a,u-=a),c>0&&(u-=c),"center"===t?(u-=s,n+=u/2):"right"===t&&(u-=s,n+=u),n},_calcOffsetByTail:function(t){var e=this.params.tail,n=e.height,i={};switch(t.to){case"top":i={top:-n};break;case"bottom":i={top:n};break;case"right":i={left:n};break;case"left":i={left:-n}}return i},_calcTailOffset:function(t){var e={},n=t.to,i=t.tail,o=i.offset,s=i.axis;return o?("top"===n||"bottom"===n?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):("left"===n||"right"===n)&&(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("button",{onSetMod:{js:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")},disabled:function(t,e){var n="yes"===e,i=this.domElem;n&&this.delMod("hovered"),this._href&&(n?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i.attr("disabled",n)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)})}}),BEM.DOM.decl("button",{onSetMod:{js:function(){this.__base.apply(this,arguments)},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&this.domElem.keyup()},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!==e&&32!==e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32===e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){this.__base.apply(this,arguments);var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}},e=8===BEM.blocks["i-ua"].ie;this.liveBindTo("mouseover mouseout mouseup focusin focusout",function(n){var i=t[n.type];this.setMod(i.name,i.val||""),!e||this._href||"mouseup"!==n.type&&"mouseout"!==n.type||this.domElem.height()}).liveBindTo("mousedown",function(e){var n=t[e.type];1===e.which&&this.setMod(n.name,n.val||"")})}}),function(){function t(){o=!0,setTimeout(setTimeout.bind(window,e))}function e(){o=!1}function n(){i.toggleClass("pointerfocus",o)}if(window.addEventListener){var i=$(document.documentElement),o=!1;addEventListener("mousedown",t,!0),addEventListener("mouseup",t,!0),addEventListener("click",t,!0),addEventListener("onfocusin"in window?"focusin":"focus",n,!0)}}(),$(function(){"use strict";var t=home.getData("i-bannerid.csl");BEM.decl("i-bannerid",{},{save:function(e){if(!t)throw new Error("i-bannerid: Cookie set link wasn't passed");if(!e)throw new Error("i-bannerid: Bannerid wasn't passed");var n=$(".i-bannerid"),i=x.stringf(t,e);n.length||(n=$('<iframe class="i-bannerid" style="display:none"/>'),$(document.body).append(n)),n.attr("src")!==i&&n.attr("src",i)}})}),function(){"use strict";function t(t,e,n){var i=BEM.blocks["i-global"],o="tech.portal-ads."+t.el,s=["-reqid="+i.param("msid"),"-eventtype="+t.e,"-productname="+t.p].join();i.param("distStat")&&Lego.cp(198,198,o,s,e,n)}t.decl=function(e){var n,i;if("object"==typeof e)n=e.el,i=e.p;else{if(2!==arguments.length)throw new Error("ds: incorrect params in decl");n=arguments[0],i=arguments[1]}return{send:function(e){if(!e)throw new Error("ds: there is no event passed");t({el:n,p:i,e:e})}}},home.ds=t}(),$(function(){function t(t){this.callback=t,this.items=0,this.results={}}if("undefined"!=typeof diskUploaderParams){t.prototype.add=function(t,e){var n=this;return this.items++,function(){var i=e.apply(e,arguments);n.check(t,i)}},t.prototype.check=function(t,e){this.results[t]=e,this.items--,0===this.items&&this.callback(this.results)},t.prototype.done=function(){this.callback(this.results)},views("b-disk-uploader__force_item",'<div class="b-disk-uploader__force_item"><label class="b-disk-uploader__force_label" for="[% id %]"><input type="checkbox" id="[% id %]" class="b-disk-uploader__force_box">[% text %]</label></div>'),views("b-disk-uploader__link",'<a href="[% href %]" class="b-link b-disk-uploader__go">[% text %]</a>');var e=function(){this.sk=diskUploaderParams.sk,this.files=[],this.statusesTimers={},this.areaShown=!1,this.wrapTimer=null,this.uploadQueue=[],this.maxSize=314572800,this.disabled=!1,this.goLink=views("b-disk-uploader__link",{href:diskUploaderParams.uploadLinkUrl,text:diskUploaderParams.uploadLinkText})};e.prototype.push=function(t){this.files.push({file:t,status:0})},e.prototype.store=function(){for(var e,n=new t(function(t){var e,n,o=[],s=0;for(n in t)t.hasOwnProperty(n)&&(e=t[n],2===e.status&&o.push(e),s+=e.file.size);if(o.length)i.showForceDialog(o);else{var r=home.rnd(),a=0;i.uploadQueue.push(r);for(n in t)t.hasOwnProperty(n)&&(t[n].queueId=r,a++);i.uploadFiles()}}),i=this,o=0,s=this.files.length;s>o;o++)e=this.files[o],(0===e.status||3===e.status)&&(e.id||(e.id=home.rnd()),this.storeFile(e,n.add(e.id,this.storeFileHandler)));i.hideArea()},e.prototype.storeFile=function(t,e){return 3===t.status?void e(t):($.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=store&upload_from_main=1&sk="+this.sk+"&path=/disk/"+t.file.name+(t.force?"&force=1":""),method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(n){n.oid&&n.upload_url?(t.status=3,t.oid=n.oid,t.upload_url=n.upload_url):47===n.code&&(t.status=2),e(t)},failure:function(){t.status=-1,e(t)}}),void(t.status=1))},e.prototype.storeFileHandler=function(t){return t},e.prototype.uploadFiles=function(){for(var t,e=0,n=0,i=this.files.length;i>n;n++)t=this.files[n],3===t.status&&(this.uploadFile(t),this.checkTimer(t,1e3,!1),e++);1===e?csh_ifmsid(diskUploaderParams.statUploadOne):e>1&&csh_ifmsid(diskUploaderParams.statUploadMany),this.updateStatuses()},e.prototype.uploadFile=function(t){var e=new FormData,n=this;e.append("file",t.file),t.xhr=$.ajax({url:t.upload_url,data:e,cache:!1,contentType:!1,processData:!1,type:"POST",error:function(){t.status>0&&(t.status=-1,n.updateStatuses())}}),t.status=4},e.prototype.showInfoDialog=function(t){this.disabled=!0,this.infoPopupTitle.text(diskUploaderParams[t?"incorrectFiles":"incorrectFilesPart"]),this.infoPopup.show()},e.prototype.showForceDialog=function(t){var e,n,i,o="";for(n=0,i=t.length;i>n;n++)e=t[n],o+=views("b-disk-uploader__force_item",{id:e.id,text:e.file.name});$(document).trigger("popupsClose.lego");var s=$(".popup_visibility_visible:not(.b-topbar__popup)"),r=$(".popup_visibility_visible");s.length&&s.bem("popup").hide(),r.length&&r.bem("popup").hide(),this.disabled=!0,this.forcePopupContent.html(o),this.forcePopup.show(),1===i&&($(".b-disk-uploader__force_box").attr("checked","checked").hide(),$(".b-disk-uploader__force_label").css("margin-left",0)),this.fixParanja()},e.prototype.collectForceFiles=function(){var t=this;$(".b-disk-uploader__force_box",this.forcePopupContent).each(function(){var e=t.gitFileInfo(this.id);e&&2===e.status&&(this.checked?(e.status=0,e.force=!0):e.status=-2)}),this.store(),this.forcePopup.hide()},e.prototype.gitFileInfo=function(t){for(var e=0,n=this.files.length;n>e;e++)if(this.files[e].id===t)return this.files[e];return null},e.prototype.checkTimer=function(t,e,n){var i=this;this.statusesTimers[t.id]=setTimeout(function(){n?i.checkFocus(t):i.checkStatus(t)},e)},e.prototype.focusEvents=function(){this.windowFocused=!0;var t=this;$.browser.msie?($(document).bind("focusout",function(){t.windowFocused=!1}),$(document).bind("focusin",function(){t.windowFocused=!0})):($(window).focus(function(){t.windowFocused=!0}),$(window).blur(function(){t.windowFocused=!1}))},e.prototype.checkFocus=function(t){var e=this;if(this.windowFocused)this.checkStatus(t);else{var n=function(){$.browser.msie?$(document).unbind("focusin",n):$(window).unbind("focus",n);var i=Math.round(4e3*Math.random());setTimeout(function(){e.checkStatus(t)},i)};$.browser.msie?$(document).bind("focusin",n):$(window).bind("focus",n)}},e.prototype.checkStatus=function(t){var e=this;$.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=status&sk="+this.sk+"&oid="+t.oid,method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(n){t.mpfs=n,t.status>0&&("WAITING"===t.mpfs.status||"EXECUTING"===t.mpfs.status?e.checkTimer(t,2e3,!0):"DONE"===t.mpfs.status?(t.status=5,t.mpfs.progress=100):t.status=-1,e.updateStatuses())},failure:function(){t.status=-1,e.updateStatuses()}})},e.prototype.updateStatuses=function(){for(var t,e,n,i=0,o=0,s=[],r=0,a=0,u=0,c="",l=0,d=this.uploadQueue.length;d>l;l++){e=this.getFilesByQueue(this.uploadQueue[l]),i+=e.length;for(var h=0,p=e.length;p>h;h++)n=e[h],4===n.status?(t=n.mpfs&&n.mpfs.progress?n.mpfs.progress:0,o+=t,s.push(n),r++):5===n.status?(o+=100,a++):-1===n.status&&(c=n.file.name,u++)}if(r>0)this.showStatusesWrap(),this.showBg(),this.showCancel(),this.progress.css("width",Math.floor(o/i)+"%"),this.title.removeClass("b-disk-uploader__statuses_title_error"),this.title.html(1===r?home.htmlFilter(home.cleverString.cutMiddleOfString(s[0].file.name,15,14)):diskUploaderParams.uploadingFiles.replace("%1",a).replace("%2",i));else{var f,m=!1;1===u?(f=diskUploaderParams.errorFile.replace("%1",home.htmlFilter(c)),m=!0):u>1?(f=diskUploaderParams.errorFiles,m=!0):f=diskUploaderParams.loaded,this.finishUpload(f,m)}},e.prototype.finishUpload=function(t,e){this.uploadQueue=[],this.hideStatusesWrap(),this.hideBg(),this.hideCancel(),this.title.removeClass("b-disk-uploader__statuses_title_error"),"undefined"!=typeof e&&e?this.title.addClass("b-disk-uploader__statuses_title_error"):t+=this.goLink,this.title.html(t)
},e.prototype.getFilesByQueue=function(t){for(var e=[],n=0,i=this.files.length;i>n;n++)this.files[n].queueId===t&&e.push(this.files[n]);return e},e.prototype.addCancelEvent=function(){var t,e=this;this.cancel.click(function(){for(var n=0,i=e.files.length;i>n;n++)t=e.files[n],t.xhr&&5!==t.status&&(t.status=-3,t.xhr.abort(),clearTimeout(e.statusesTimers[t.id]));return e.finishUpload(diskUploaderParams.cancel,!0),!1})},e.prototype.addCancelDialogEvent=function(){var t=this;this.infoPopup.on("hide",function(){t.disabled=!1}),this.forcePopup.on("hide",function(){t.disabled=!1,t.clearUploadQueue(),t.unfixParanja()}),$("#diskUploadCancel").click(function(){t.forcePopup.hide()})},e.prototype.clearUploadQueue=function(){for(var t,e=0,n=this.files.length;n>e;e++)t=this.files[e],(2===t.status||3===t.status)&&(t.status=-3)},e.prototype.fixParanja=function(){$(".popup__under_type_paranja").addClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".popup").addClass("b-disk-force-popup"),this.hideBanner()},e.prototype.unfixParanja=function(){$(".popup__under_type_paranja").removeClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".popup").removeClass("b-disk-force-popup"),this.showBanner()},e.prototype.checkFileTypes=function(t){if(!t.types)return!1;if($.browser.mozilla&&t.types.contains("application/x-moz-file-promise")&&!t.types.contains("application/x-moz-file"))return!1;var e=!1;if(t.types.length)for(var n=0,i=t.types.length;i>n;n++)"Files"===t.types[n]&&(e=!0);return e},e.prototype.checkFiles=function(e){if(e.files&&this.checkFileTypes(e)){var n=new t(function(t){var e=0,n=0;for(var o in t)t.hasOwnProperty(o)&&(++e,t[o].status!==!1&&(++n,i.push(t[o].file)));e===n&&e>0?i.store():i.showInfoDialog(0===n)}),i=this;if(e.files.length)for(var o=0,s=e.files.length;s>o;o++)this.isRegularFile(e.files[o],n.add("file"+o,this.checkFileHandler));else e.types.length&&n.done()}},e.prototype.isRegularFile=function(t,e){var n;try{n=t.size}catch(i){n=0}if(0===n)return void setTimeout(function(){e(!1,t)},0);if(t.size>102400)return void setTimeout(function(){e(!0,t)},0);if(!window.FileReader||window.opera&&navigator.platform.toLowerCase().indexOf("mac")>-1&&"12.00"===window.opera.version())setTimeout(function(){e(null,t)},0);else try{var o=new FileReader;o.onerror=function(){o.onloadend=o.onprogress=o.onerror=null,e(!1,t)},o.onloadend=o.onprogress=function(n){o.onloadend=o.onprogress=o.onerror=null,"loadend"!==n.type&&o.abort(),e(!0,t)},o.readAsDataURL(t)}catch(i){setTimeout(function(){e(!1,t)},0)}},e.prototype.checkFileHandler=function(t,e){return{file:e,status:t}},e.prototype.stopLeaveTimer=function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)},e.prototype.startLeaveTimer=function(){this.stopLeaveTimer(),this.leaveTimer=setTimeout(function(){this.hideArea()}.bind(this),50)},e.prototype.init=function(){if(window.File&&window.FileList&&window.FileReader&&$(".b-disk-uploader").length){this.uploaderArea=$(".b-disk-uploader"),this.innerArea=$(".b-disk-uploader__inner"),this.forcePopup=$(".b-disk-force").bem("popup"),this.forcePopupContent=$(".b-disk-uploader__force_content"),this.infoPopup=$(".b-disk-info").bem("popup"),this.infoPopupTitle=$(".b-disk-uploader__info_title"),this.statusesWrap=$(".b-disk-uploader__statuses_wrap"),this.progress=$(".b-disk-uploader__statuses_progress"),this.bg=$(".b-disk-uploader__statuses_bg"),this.title=$(".b-disk-uploader__statuses_title"),this.cancel=$("#diskCancel");var t=this;$(window).bind({dragenter:function(e){return!t.disabled&&t.checkFileTypes(e.originalEvent.dataTransfer)?(t.areaShown||t.showArea(),!1):void 0},dragover:function(){return t.stopLeaveTimer(),!1},dragleave:function(){return!1},drop:function(e){return t.disabled||t.checkFiles(e.originalEvent.dataTransfer),!1}}),this.uploaderArea.bind("dragleave",this.startLeaveTimer.bind(this)),this.uploaderArea.click(function(){return t.hideArea(),!1}),$(document).mouseout(function(e){var n=e.relatedTarget||e.toElement;n&&"HTML"!==n.nodeName||t.hideArea()}),$(document).mouseover(function(){t.areaShown&&t.hideArea()}),$("#diskUploadOk").click(function(){return t.collectForceFiles(),!1}),$("#diskUploadClose").click(function(){return t.disabled=!1,t.infoPopup.hide(),t.store(),!1}),this.focusEvents(),this.addCancelEvent(),this.addCancelDialogEvent()}},e.prototype.hideBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.hideBanner("b-disk-uploader")},e.prototype.showBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.showBanner("b-disk-uploader")},e.prototype.showArea=function(){this.areaShown||(this.uploaderArea.addClass("b-disk-uploader__highlighted"),this.hideBanner(),this.areaShown=!0)},e.prototype.hideArea=function(){this.areaShown&&(this.uploaderArea.removeClass("b-disk-uploader__highlighted"),this.showBanner(),this.areaShown=!1)},e.prototype.showStatusesWrap=function(){this.wrapTimer&&clearTimeout(this.wrapTimer),this.statusesWrap.hasClass("i-hidden")&&(this.statusesWrap.css({bottom:-44}).removeClass("i-hidden").animate({bottom:0},500),this.hideBanner())},e.prototype.hideStatusesWrap=function(){var t=this;this.statusesWrap.hasClass("i-hidden")||(this.wrapTimer=setTimeout(function(){t.statusesWrap.animate({bottom:-44},500,function(){t.statusesWrap.css({bottom:0}).addClass("i-hidden"),t.showBanner()})},1e4))},e.prototype.showBg=function(){this.bg.removeClass("i-hidden")},e.prototype.hideBg=function(){this.bg.addClass("i-hidden")},e.prototype.showCancel=function(){this.cancel.removeClass("i-hidden")},e.prototype.hideCancel=function(){this.cancel.addClass("i-hidden")};var n=new e;n.init()}}),function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}(),function(){"use strict";home.cleverString={};var t,e="";t=function(t,e){var n=t.charCodeAt(),i=e.charCodeAt();return n>=55296&&56319>=n&&i>=56320&&57343>=i},home.cleverString.length=function(e){if("undefined"==typeof e||null===e)return 0;for(var n=0,i=e.length,o=0;i>n;)++n<i&&t(e[n-1],e[n])&&++n,++o;return o},home.cleverString.substring=function(e,n,i){if("string"!=typeof e)return e;"number"!=typeof n&&(n=0),i||0===i||(i=1/0);for(var o,s=[],r="",a=n+i,u=0,c=e.split(r),l=c.length,d=0;l>=u;)o=1,l>u+1&&t(e[u],e[u+1])&&(o=2),d>=n&&a>d&&s.push(c.slice(u,u+o).join(r)),u+=o,++d;return s.join(r)},home.cleverString.cutMiddleOfString=function(t,n,i){var o=home.cleverString.length(t);return"string"!=typeof t||3>o||"number"!=typeof n||"number"!=typeof i?t:-1===n||-1===i?"":o>=n+1+i?home.cleverString.substring(t,0,n)+e+home.cleverString.substring(t,o-i):t},home.cleverString.cutEndOfString=function(t,e){return home.cleverString.cutMiddleOfString(t,e-1,0)},home.cleverString.cutStartOfString=function(t,e){return home.cleverString.cutMiddleOfString(t,0,e-1)}}(),function(){function t(){var t=document.visibilityState||document.webkitVisibilityState||document.msVisibilityState;return"prerender"===t}function e(){return BEM.blocks["i-global"].param("click-href")+"click"}function n(){var t,n="/dtype=stred/pid=1/cid=72202";n+="/reqid="+c.reqid,n+="/path=690.1033";var o={1036:l.domainLookupStart-d,1037:l.domainLookupEnd-l.domainLookupStart,1038:l.connectEnd-l.connectStart,1039:l.responseStart-l.requestStart,1040:l.responseEnd-l.responseStart,1040.318:l.responseEnd-d};l.secureConnectionStart>0&&(o[1676]=l.secureConnectionStart-l.connectStart);for(t in m)m[t]>0?o[t]=Math.min(h*f,m[t]):0===m[t]&&(o[t]=h*f);for(t in c.vars)c.vars.hasOwnProperty(t)&&(o[t]=c.vars[t]);for(t in o)o[t]<0&&delete o[t];o[1042]=encodeURIComponent(navigator.userAgent),n+="/vars="+i(o),n+="/slots="+(u("exp.data")||"")+"/*",(new Image).src=e()+n}function i(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+t[n]);return e.join(",")}function o(){var e=-1;if(t())return e;if(window.chrome&&"function"==typeof window.chrome.loadTimes&&d){var n=window.chrome.loadTimes();e=n.firstPaintTime?Math.floor(1e3*n.firstPaintTime)-d:0}return e}function s(){var e=-1;return t()?e:("undefined"!=typeof l.msFirstPaint&&(e=l.msFirstPaint?l.msFirstPaint-d:0,l.msFirstPaint&&l.responseStart&&l.msFirstPaint<l.responseStart&&(e=-1)),e)}function r(){if(m[1051]>0){if(m[1041.659]>0)return!0;if(m["1041.660"]>0)return!0}}function a(){++p,m[1041.659]=s(),m["1041.660"]=o(),m[1041.659]>0?m[1041.318]=m[1041.659]:m["1041.660"]>0&&(m[1041.318]=m["1041.660"]),m[1041.318]>0&&(m[1041.906]=m[1041.318]-(l.domainLookupStart-d),m[1041]=m[1041.318]-(l.responseStart-d)),c||(c=u("timing.data")),c&&(r()||p===f)?n():setTimeout(a,h)}function u(t){return home&&home.getData&&home.getData(t)}var c,l=window.performance&&window.performance.timing;if(l&&l.navigationStart){var d=l.navigationStart,h=1e3,p=0,f=100,m={1041.659:-1,"1041.660":-1,1041:-1,1041.906:-1,1041.318:-1,1051:0};$(function(){m[1051]=+new Date-d}),setTimeout(a,h)}}(),function(t){t.getData=function(e,n){var i,o,s,r,a="export",u=e.split("."),c=u.length;if(c>1){for(o=t[a]||{},s=0;c>s;s++)if(i=u[s],o=o[i],"undefined"==typeof o)return"undefined"==typeof o?n:o;return"undefined"==typeof o?n:o}return a="export",r=t&&t[a]&&t[a][e],"undefined"==typeof r?n:r}}(home),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,function(){"use strict";function t(){var t=home&&home.getData&&home.getData("i-change-url.data");if(t){var e=t.url;if(e&&ya.history){if(window.mordaFromCache){for(var n,i=String(location.search).replace(/^\?/,"").split("&"),o={},s=0,r=i.length;r>s;s++)n=i[s].split("="),2===n.length&&(o[n[0]]=n[1]);var a={clid:1,win:1,banerid:1};for(var u in a)a.hasOwnProperty(u)&&o[u]&&!$("form.search2 input[name='"+u+"']").length&&$("form.search2").append('<input type="hidden" name="'+u+'" value="'+o[u]+'">')}ya.history.navigate({data:{page:"morda"},url:e,replace:!0})}}}window.$?$(t):t()}(),function(){BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")})}(),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",u=~t.indexOf(a),c=function(){for(var e,n=/\&#\d+;/gi;e=n.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(u)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!u&&c(),s.forEach(function(e){n=o>e[0]?o:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(o,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,o=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(o))}),i}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this._val=this.elem("control").val()},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var n="yes"===e;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){if("undefined"==typeof t)return this._val;t=null===t?"":t.toString();var n=this.elem("control");return n.val()!==t&&n.val(t),this._val=t,this.trigger("change",e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)})}}),function(){var t,e=[],n=function(){e.forEach(function(t){t.val(t.elem("control").val())})};BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var i=this.elem("control"),o=$.dom.getActiveElement(),s=this.params.autoFocus&&!o.is("input, textarea");(o[0]===i[0]||s)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:n,idle:function(){t.un("tick",n)},wakeup:function(){t.on("tick",n)}})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&38===t.which&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},_focus:function(){var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--})}},{})}(),function(){var t,e=0,n=!1,i=0,o=BEM.channel("sys"),s=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var r=this;o.trigger("tick",{counter:e++}),!n&&(i+=s)>3e3&&(n=!0,o.trigger("idle")),t=setTimeout(function(){r._tick()},s)}}).start()}(),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onBoxClear:function(){this.hasMod("clear","visibility","visible")||this.hasMod("disabled","yes")||this.setMod("focused","yes")},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","mousedown",function(t){1===t.which&&this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","leftclick tap",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("box","leftclick tap",function(){this._onBoxClear()})}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},_bodyHandler:function(t){if(!this._isDestructing){var e=$(t.target),n=this.containsDomElem(e)||this.params.form.containsDomElem(e);n||(this._freezeInputFocus=!1)}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1,abortQueries:!1,sequentialQueriesTimeout:!1}},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},init:function(){var t=this;return t.params.form.on("submit",function(e,n){t._lastSubmitTime=(new Date).getTime(),t._isActualSearchCGIParams?t._isActualSearchCGIParams=!1:"suggest2-counter"!==n.data.block&&n.data.prevent!==!1&&this.removeHiddenInputs(),t._clear(),t._popup.hide()}),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t._inputValue=t._input.val(),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,n){2===n.code&&(t._popup.hide(),t._clear())}},t),t.bindToDoc("click tap leftclick",t._bodyHandler),t.bindEvents(),this._input.isFocused()&&this._doRequest(),t},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(t,e){var n=this.getMod("type");return t=t||{},("simple"===n||"all"===n)&&(t.simple="yes"),("advanced"===n||"all"===n)&&(t.advanced="yes"),BEM.create({block:"suggest2-view",mods:t||{}},e||{})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){t.trigger("preshow")},show:function(){t._onShow()},hide:function(e,n){t._onHide(n)}}),t.params.form&&t.params.form.on("button-press",t._onSearchButtonMousedown,t),BEM.blocks["suggest2-item"].on(t.domElem,{"link-click":function(e,n){t._counter&&"_self"===$(n.$e.target).attr("target")&&n.$e.preventDefault()}}),t},_onShow:function(){this.trigger("show")},_onHide:function(t){this.trigger("hide",t)},_onSearchButtonMousedown:function(){this._input.realVal(this._input.val()),this._popup.hide()},unbindAllEvents:function(){var t=this;return t.unbindFromDoc("click tap leftclick"),t._input.unbindAllEvents(),t.params.form.un("submit"),t._model.un("response").un("reject"),t._popup.un("preshow").un("show").un("hide"),t.params.form&&t.params.form.un("button-press",t._onSearchButtonMousedown,t),t},setItems:function(t,e){var n=this,i=e.data.items||[];return n._isFormSubmitDurinQuery()||!i.length?(n._popup.hide(),n._clear()):this.params.sequentialQueriesTimeout||n._input.val()===e.val?(n._text=e.val,n._pos=e.pos,n._meta=e.data.meta||{},n._popup.show(n._view.html(i,n._meta)).width(n.getPopupWidth()),n._items=n.findBlocksInside("suggest2-item"),n._clearItems().trigger("update",{val:n._text,pos:n._pos,items:n._items}),n):n._clear()},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur&&!this._isMouseDown},getPopupWidth:function(){},getInputWidth:function(){return 0},isNeedSubmitFormOnSelectItem:function(t){return this.params.submitBySelect&&"link"!==t.getMod("interact")},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime?(this._model.filterRequestsByVal(this._input.realVal()),this._model.isTimeInRequestInterval(this._lastSubmitTime)):!1},_onChange:function(t,e){this._inputValue!==this._input.val()&&(this._inputValue=this._input.val(),this._doRequest(e))},_doRequest:function(t){this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),t)},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._doRequest())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._lastBlurTime=(new Date).getTime(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var n=this,i=n._getItemIndex(t),o=t.onSelect(e),s=t.valOnSelect();return n._text=n._input.realVal(s),n._isBlur=!0,n._freezeInputFocus=!1,n._setSearchCGIParams(t),n.trigger("select",{val:n._text,pos:n._pos,item:t,meta:n._meta,itemIndex:i,byKeyboard:e,callbackOnSelect:o}),s!==!1&&(n._items=[],this.isNeedSubmitFormOnSelectItem(t)&&n.params.form.submit()),i},_isActualSearchCGIParams:!1,_setSearchCGIParams:function(t){this.params.form.removeHiddenInputs(),t.params.searchCGI&&(this._isActualSearchCGIParams=!0,this.params.form.appendHiddenInputs(t.params.searchCGI.map(function(t){return{name:t[0],value:t[1]}})))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0}}),BEM.DOM.decl("suggest2",{getInputLeft:function(){return 0},getInputWidth:function(){return 0},getContainerWidth:function(){return 0},getMetrics:function(){var t=this.getInputLeft(),e=this.getInputWidth(),n=this.getContainerWidth()-t;return{marginLeft:t,minWidth:e>=n?n:e,maxWidth:n}},adjustView:function(){return{}}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress,mousedown:function(){t._input.isFocused()&&t._onFocus()}},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e,n){var i=e.block.domElem[0];i===n.relatedTarget||$.contains(i,n.relatedTarget)||t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,n=t.which;!this._popup.isShown()||n!==e.up&&n!==e.down||(t.preventDefault(),this._enterByKeyboard(n))},_onKeyUp:function(t){var e=this.__self.keyboard;if((t.which===e.left||t.which===e.right)&&(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var n=this._items[this._enterItemIndex];n&&this.trigger("ahead",{item:n,val:"link"===n.getMod("interact")?n.elem("text").text():n.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,n=this._items.length,i=this._enterItemIndex+e;return-1===i||i===n?(this._enterItemIndex=i,this._unselectItems(this._items[i]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>i?i=n-1:i>=n&&(i=0),void this._onEnterItem(this._items[i],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.DOM.decl("suggest2",{_doRequest:function(){(this._ignoredFirstRequest||"request"===this.params.onFocus)&&this.__base.apply(this,arguments),this._ignoredFirstRequest=!0}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){e._popup.isShown()||(e._tabChange=!1,e._doRequest())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,e.unbindFromDoc("mouseup.suggest2")})}}),$(window).bind("keyboardOpened.lego",function(){e._popup&&e._popup.isShown()&&e._popup.get()&&e._popup.get().repaint()});var n=!0;$(window).on("focus",function(){var i;try{i=document.activeElement}catch(o){}n||(n=!0,i&&e._input.getControl()&&e._input.getControl().is(i)&&(e._tabChange=!0),t())}).on("blur",function(){n=!1,t()})},init:function(){this.__base.apply(this,arguments),this.trigger("model-ready")},_onChange:function(){return this._tabChange=!1,this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||this.__base.apply(this,arguments)}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2-item",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,n){var i=this,o={val:t,caretPosition:e,data:n};i._requests.push(o);var s=i._isNeedRequest(t,n);return s.need?(o.requestTime=(new Date).getTime(),i.trigger("request",{val:t,pos:e}),i.getProvider().get(t,e,function(t,e,n){o.responseTime=(new Date).getTime(),i._onResponse(t,e,n);var s=i._requests[i._requests.length-1];i.params.sequentialQueriesTimeout&&s.val!==t&&i.request(s.val,s.caretPosition,s.data)}),i):i.trigger("reject",{val:t,pos:e,code:s.code,reason:s.reason||{}})},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},filterRequestsByVal:function(t){this._requests=this._requests.filter(function(e){return e.val===t})},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};var n;if(this.params.sequentialQueriesTimeout)for(n=this._requests.length-1;n>=0;n--){var i=this._requests[n];if(void 0===i.responseTime&&(new Date).getTime()-i.requestTime<this.params.sequentialQueriesTimeout)return{need:!1,code:3,reason:{request:i}}}if(!e)return{need:!0};var o,s=this.getCancelRequestConditions();t:for(n=0;n<s.length;n++){o=s[n];for(var r in o)if(o.hasOwnProperty(r)&&o[r]!==e[r])continue t;return{need:!1,code:1,reason:{condition:o}}}return{need:!0}},_onResponse:function(t,e,n){var i={val:t,pos:e,data:n};BEM.channel("suggest2").trigger("response",i),this.trigger("response",i)}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this),this.__self.isSupportInlineSVG()||this.setMod("inlinesvg","no")}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},_isSupportInlineSVG:null,isSupportInlineSVG:function(){if(null!==this._isSupportInlineSVG)return this._isSupportInlineSVG;var t=document.createElement("div");return t.innerHTML="<svg/>",this._isSupportInlineSVG="http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI),this._isSupportInlineSVG}}),function(){"use strict";BEM.DOM.decl("suggest2-detect",{},{isSupportInlineSVG:function(){return void 0===this._isSupportInlineSVG2&&(this._isSupportInlineSVG2=$("html").hasClass("i-ua_inlinesvg_yes")),this._isSupportInlineSVG2}})}(),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},_lastQuery:null,get:function(t,e,n){var i=this,o=this.params.abortQueries,s=function(){n.call(i,t,e,i.convert(i._lastData))};return i._lastText===t?this._lastQuery.always(s):(i._lastText=t,o&&null!==this._lastQuery&&this._lastQuery.abort(),void(this._lastQuery=$.ajax(i._extendParamsData(i.getRequestData(t,e))).done(function(t){i._lastData=t,o&&s()}).fail(function(){i._lastData=[]}).always(function(){o||s()})))},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e){var n={};return BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&(n.svg=1),$.extend({part:t,pos:e},n)},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_lastText:void 0,_lastData:[]}),BEM.decl("suggest2-provider",{get:function(t,e,n){var i=this,o=i.params&&i.params.paramName||"part",s={pos:e};s[o]=t;var r=this._extendParamsData(s);"q"===r.paramName&&(r.dataType="json",r.xhrFields={withCredentials:!0}),$.ajax(r).done(function(o){i.params&&i.params.email?n.call(this,t,e,{orig:t,items:i._processEmailst(o),meta:{}}):n.call(this,t,e,{orig:o[0],items:o[1],meta:o[2]})}).error(function(){n.call(this,t,e,{items:[]})})},_processEmailst:function(t){for(var e=[],n=0,i=t.length;i>n;++n)e.push(["email",t[n].email,t[n].name]);return e}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",mods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),n=this.__self._getType(t,e),i="html"===n||"bemjson"===n?{}:{type:n};return this._getItemByType(t,e,n,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:i,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,n,i){var o=i.text,s=i.mods,r=i.js,a=i.props,u=i.content;return e.pers&&(s.personal="yes"),e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(r.searchCGI=e.search_cgi),0===u.length&&u.push(o),$.extend({block:"suggest2-item",mods:s,js:r,content:u},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var n=Array.isArray(t)?t[0]||"text":"text";return"icon"!==n||e.icon?n:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var n,i=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return i.length?(i.forEach(function(e){n=s>e[0]?s:e[0],o.push(t.slice(s,n)),o.push({elem:"highlight",content:t.slice(n,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl("suggest2-view",{_getItemByType:function(t,e,n,i){var o,s;return"email"===n?(o=[],s=i.js,s.email=t[1],o.push({elem:"name",content:BEM.blocks["i-common__string"].escapeHTML(t[2]||t[1])}),t[2]&&o.push({elem:"email",content:BEM.blocks["i-common__string"].escapeHTML(t[1])}),$.extend({block:"suggest2-item",mods:i.mods,js:s,content:o},i.props)):this.__base.apply(this,arguments)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this.bindSuggestEvents()
}}},show:function(){throw new Error("       _for")},hide:function(){throw new Error("       _for")},setContent:function(t){return this._popup.setContent(t),this},isShown:function(){throw new Error("       _for")},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){this._popup&&(this.unbindAllEvents(),this.__base.apply(this,arguments))},bindSuggestEvents:function(){return this.params.suggest.on({select:this._onSuggestSelect,update:this._onSuggestUpdate},this),this},_onSuggestSelect:function(t,e){this.hide(e)},_onSuggestUpdate:function(t,e){e.items.length||this.hide({response:"empty"})},unbindAllEvents:function(){return this.params.suggest.un("select").un("update"),this}}),BEM.decl("suggest2-popup",{pos:function(){return this.isShown()&&this._popup.repaint(),this}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this)}}},show:function(t){return this._popup.domElem?(t&&this._popup.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._popup.show(this.params.owner),this.trigger("show"),this)):this},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.isShown():!1}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,n){t._onChange(e,n)},clear:$.throttle(function(e,n){t._onClear(e,n)},300)}),t.bindSuggestEvents()}}},_onChange:function(t,e){this.trigger("change",e)},_onClear:function(t,e){this.trigger("clear",e)},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},get:function(){return this._input},isFocused:function(){return this._input.hasMod("focused")},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],n=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),t.text.length):"number"==typeof e.selectionStart?e.selectionStart:n},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("undefined"!=typeof t.createTextRange){var n=t.createTextRange();n.collapse(!1),n.select()}else"number"==typeof t.selectionStart&&(t.scrollLeft=999999,t.setSelectionRange(e,e));return this},disableBrowserAutocomplete:function(){var t=this._input.hasMod("focused");t&&this._input.delMod("focused"),this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"}),t&&this._input.setMod("focused","yes")},_bindedEventsNames:[],bindEvents:function(t,e){return Object.keys(t).forEach(function(n){-1===this._bindedEventsNames.indexOf(n)&&this._bindedEventsNames.push(n),this._eventsFilter(n).on(n,t[n].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._onSuggestItemTpah,select:this._onSuggestItemSelect,enter:this._onSuggestItemEnter},this),this},_onSuggestItemTpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},_onSuggestItemSelect:function(t,e){"link"!==t.block.getMod("interact")&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},_onSuggestItemEnter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},unbindAllEvents:function(){return this._input.domElem&&this._bindedEventsNames.forEach(function(t){var e=this._eventsFilter(t);e[e instanceof BEM.DOM?"un":"off"](t)},this),this._bindedEventsNames=[],this.params.suggest.un("out"),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){var n=e&&void 0!==e.val?e.val:this.realVal();this.val(n,$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(this,arguments),t.bindEvents({keydown:function(e){t._onKeyDown(e)}},t)}}},_onKeyDown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}}),BEM.DOM.decl("suggest2-item",{val:function(){if(void 0!==this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},valOnSelect:function(){return this.val()},valOnEnter:function(){return this.val()},valOnLeave:function(){return this.val()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.valOnEnter(),byKeyboard:t})},onLeave:function(t){return this.delMod("selected").triggerEvent("leave",{val:this.valOnLeave(),byKeyboard:t})},onSelect:function(t){this.triggerEvent("select",{val:this.valOnSelect(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)}).liveBindTo("link","leftclick",function(t){this.trigger("link-click",{$e:t})})}}),BEM.DOM.decl("suggest2-counter",{onSetMod:{js:{inited:function(){this.clear()}}},destruct:function(){this.unbindAllEvents()},getDefaultParams:function(){return{submitBySelect:!1,suggestReqID:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){var t=this;return t._params={user_input:"",text:""},t._times=[],t._renderTimes=[],t._renderTime=0,t._path={service:t.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},t._ratio={len:0,queryLen:0,actionsCount:0},t._firstChange=0,t._lastChange=0,t._sinceChange={first:0,last:0},t._selectedText="",t._session=0,t._reqID=0,t._meta={},t._afterSendAjaxCallback,t},submit:function(t){var e=this,n=e.params.suggest.params["suggest2-input"],i=n.val();e._params.text=i,e._params.pos=n.getCaretPosition(),e.params.suggestReqID&&e.attachReqID(),e.sendAjax(e.getUrl(),$.extend({submitForm:!0,afterSendAjaxCallback:function(){}},t)),e.trigger("submit",e._getSubmitEventData()).clear(),e._params.prev_query=i},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._times,render_times:t._renderTimes,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,suggest_reqid:t._reqID,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this.params.timeout,cache:!0}).always(this._sendAjaxAlways.bind(this,e)),this},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_sendAjaxAlways:function(t){this.params.preventSubmit&&t.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),t.afterSendAjaxCallback(),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,n){return e.concat(t._getParams(n))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession(),{suggest_reqid:t._reqID}]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},attachReqID:function(){this._reqID=this.__self._generateReqID(),this.params.form.appendHiddenInputs([{name:"suggest_reqid",value:this._reqID}])},bindEvents:function(){var t=this,e=t.params,n=e.suggest,i=e.form,o=n.getModel(),s=n.params["suggest2-input"],r=n.params["suggest2-popup"];return i.on({"button-click":t._onFormButtonClick,submit:t._onFormSubmit},t),o.on({request:t._onModelRequest,response:t._onModelResponse},t),s.on({change:t._onInputChange,enter:t._onInputEnter},t),r.on({show:t._onPopupShow,hide:t._onPopupHide},t),BEM.blocks["suggest2-item"].on(n.domElem,"enter",t._onSuggestItemEnter,t),n.on({update:t._onSuggestUpdate,select:t._onSuggestSelect},t),t},_onFormButtonClick:function(){"keyboard"!==this._path.submit&&(this._path.submit="button_by_mouse")},_onFormSubmit:function(t,e){e.data.block!==this.__self.getName()&&e.data.prevent!==!1&&(this.params.preventSubmit&&(e.stopImmediatePropagation(),e.preventDefault()),this.submit())},_onModelRequest:function(){this._requestTime=new Date},_onModelResponse:function(t,e){e.data.items&&(this._path.personal=this._hasPersonal(e.data.items)?"nah_not_used":"nah_not_shown",this._meta=e.data.meta||{},this._addTime(new Date-this._requestTime),this._renderTime=new Date,this._setMetaProps(e))},_onInputChange:function(t,e){e&&"clear"!==e.source||(this._params.user_input=t.block.val(),this[this._firstChange?"_lastChange":"_firstChange"]=new Date),this._selectedText&&(this._path.state="edit"),this._ratio.actionsCount++},_onInputEnter:function(){this._path.submit="keyboard"},_onPopupShow:function(){this._path.state="not_used"},_onPopupHide:function(t,e){"empty"===e.response&&(this._path.state="not_shown")},_onSuggestItemEnter:function(t,e){e.byKeyboard&&this.params.suggest.params.updateOnEnterByKeyboard&&(this._selectedText=e.val,this._path.state="suggest")},_onSuggestUpdate:function(){this._addRenderTime(new Date-this._renderTime)},_onSuggestSelect:function(t,e){var n=this;n._path.state=e.byKeyboard?"keyboard":"mouse",n._path.index=e.itemIndex+1,n._selectedText=e.val,e.item.hasMod("personal")&&(n._path.personal="nah_used"),n.params.submitBySelect&&(n._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",n._params.pos=e.pos,n._params.text=this._selectedText),n.params.suggest.isNeedSubmitFormOnSelectItem(e.item)||n.submit({submitForm:!1,afterSendAjaxCallback:e.callbackOnSelect})},unbindAllEvents:function(){var t=this.params,e=t.suggest,n=t.form;return n.un("button-click").un("submit"),e.getModel().un("request").un("response"),e.params["suggest2-input"].un("change").un("enter"),e.params["suggest2-popup"].un("show").un("hide"),e.un("select"),this},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,n){return""===t[n]?e:(e.push(n+"="+encodeURIComponent(t[n]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){return{since_first_change:this._getSinceTime("first"),since_last_change:this._getSinceTime("last")}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addTime:function(t){return this._times.push(t),this._params.times=this._times.join("."),this},_addRenderTime:function(t){return this._renderTimes.push(t),this._params.render_times=this._renderTimes.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}},{_generateReqID:function(){var t=BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("yandexuid")?BEM.blocks["i-global"].param("yandexuid"):this._random(9)+this._random(9);return t+(+new Date).toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)}}),function(){"use strict";var t=15,e=396;BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"email"},{getPopupWidth:function(){var t=this._input.width();return t+6},init:function(){this.__base.apply(this,arguments),this.on("show",this._onShow),this.on("hide",this._onHide)},_onShow:function(){this._updateMaxWidth(),this.bindToDomElem($(window),"resize",this._updateMaxWidth)},_onHide:function(){this.unbindFromDomElem($(window),"resize")},_updateMaxWidth:function(){var n=$(window).width(),i=this._input.get().domElem.outerWidth(),o=this._input.get().domElem.offset().left,s=Math.max(e,n-o-t);this._popup.get().domElem.css({"max-width":s,"min-width":i+6}),this._popup.pos()}})}(),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,n){var i=n.data,o=i.items&&i.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&r.match("^"+BEM.blocks["i-common__string"].escapeRegExp(s.toLowerCase())+"(.*)$");i.val=n.val,e.params.aheadFromServer?e._input.get().setAhead(s,i.meta&&i.meta["continue"]||"",i):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(s,e.params.showFullPhrase?a[1]:a[1].split(" ")[0],{val:n.val}):e._input.get().unsetAhead()}),e._input.on("change",function(){e._input.get().unsetAhead()}),e._input.get().onPopupShow&&e._popup.on("show",function(){e._input.get().onPopupShow()}),e._popup.on("hide",function(){e._input.get().onPopupHide()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this._nodes=this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},destruct:function(){this._nodes.forEach(function(t){t.suggest.domElem&&BEM.DOM.destruct(t.suggest.domElem),this.unbindFormEvents(t),t.counter&&t.counter.destruct(),t.proxies.input.destruct(),t.proxies.popup.destruct()},this),this.__base.apply(this,arguments)},getOwner:function(){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();return t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t}),t},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,n=e.params;return n.input=t.input,n.button=t.button,n.form=this,t.proxies={},t.proxies.popup=n["suggest2-popup"]=BEM.create({block:"suggest2-popup",mods:{"for":this.params.popupName}},{suggest:e,popup:e.findBlockOn(this.params.popupName),owner:this.getOwner(t)||n.input}),t.proxies.input=n["suggest2-input"]=BEM.create("suggest2-input",{suggest:e,input:n.input,updateOnEnterByKeyboard:n.updateOnEnterByKeyboard}),t.counter&&(t.counter.params.suggest=e,t.counter.params.form=this,n.counter=t.counter),this.bindFormEvents(t),t},this)},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click press",function(t){e._onButtonClick(t)}),e.bindTo("submit",function(t,n){e.onSubmit(t,n)}),e},_onButtonClick:function(t){this.trigger("button-click",t)},unbindFormEvents:function(t){var e=this;return t.button&&t.button.un("click press"),e.unbindFrom("submit"),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(n,i){var o=$(i),s=t.findBlockInside(o,"suggest2"),r={input:t.findElem(o,"input"),button:t.findElem(o,"button")};e.push({node:o,suggest:s,counter:t.findBlockOn("suggest2-counter"),input:t.findBlockOn(r.input,t.params.inputName),button:t.findBlockOn(r.button,t.params.buttonName),popup:s.findBlockOn(t.params.popupName)})}),e},appendHiddenInputs:function(t){return BEM.DOM.append(this.domElem,BEMHTML.apply(t.map(function(t){return{block:this.__self.getName(),elem:"hidden-input",tag:"input",attrs:{type:"hidden",name:t.name,value:t.value}}},this))),this},removeHiddenInputs:function(){return BEM.DOM.destruct(this.findElem(this.domElem,"hidden-input")),this}},{live:function(){this.liveInitOnBlockInsideEvent("click tap change focus","input")}}),BEM.DOM.decl({block:"suggest2-item",modName:"type",modVal:"email"},{val:function(){return this.params.email}}),$(document).ready(function(){function t(n){a.push(n),e(),i=s>=n?setTimeout(function(){t(n+o)},o):null}function e(){if(!window.defaultMetrikaCounter)return void(+new Date<r&&setTimeout(e,100));for(;a.length;){var t=a.pop(),i={};i["time-"+n.content]={},i["time-"+n.content][n.type]={},i["time-"+n.content][n.type][t]=1,window.defaultMetrikaCounter.params(i)}}var n=home&&home.getData&&home.getData("time-count.data");if(n){var i=null,o=n.timeout,s=3e5,r=+new Date+s,a=[];document.hidden||t(0),BEM.channel("sys").on("hidden",function u(){i&&(clearTimeout(i),i=null),BEM.channel("sys").un("hidden",u)})}}),BEM.DOM.decl("xiva-notif",{onSetMod:{js:function(){window.WebSocket&&this.params.url&&this._connect()}},_changeNumbers:function(t,e,n){t=parseInt(t,10),this.channel("mail").trigger("update",{uid:n,value:t}),this.channel("mail").trigger("fresh",{uid:n,value:parseInt(e,10)})},_update:function(t){if("insert"===t.operation)this._isItFreshMsg(t)&&this._changeNumbers(t.message.new_messages,t.message.fresh_count,t.uid);else{var e=t.message;e&&"reset fresh"===e.operation&&this._isItFreshMsg(t)&&this.channel("mail").trigger("fresh",{uid:t.uid,value:0})}},_isItFreshMsg:function(t){var e=t.uid;if(e)return e in this.last||(this.last[e]=0),this.last[e]<t.lcn?(this.last[e]=t.lcn,!0):void 0},_connect:function(){var t=this,e=new WebSocket(this.params.url),n=!1;return this.last={},this.connectAttempts=0,e.onopen=function(){n=!0,setTimeout(function(){n&&(t.connectAttempts=0)},5e3)},e.onmessage=function(e){try{var n=JSON.parse(e.data);t._update(n)}catch(i){}},e.onclose=function(e){t.connectAttempts++;var i=6e4;n=!1,t.connectAttempts<=5?i=3e3:t.connectAttempts<=15&&(i=1e4),4e3===e.code&&(i=3e5),4401!==e.code&&setTimeout(function(){t._connect()},i)},this}}),MordaRT.prototype.siteInDomainList=function(t,e){for(var n,i=0,o=t.length;o>i;i++)if(n=t[i],this.listRE[n]||(this.listRE[n]=new RegExp("^"+n.replace(/\./g,"\\.").replace(/\*/g,"[^.]+")+"$")),e.match(this.listRE[n]))return!0;return!1},MordaRT.prototype.getHostname=function(t){var e=document.createElement("a");return e.href=t,e.hostname},MordaRT.prototype.getEntries=function(t,e){if(!window.performance||!window.performance.getEntries)return{resources:{},resourcesCount:0};try{var n,i,o=window.performance.getEntries("resources"),s={},r=0;if(o&&o.length)for(var a=0,u=o.length;u>a;a++)if(n=o[a].initiatorType||"unknown",i=this.getHostname(o[a].name),-1!==i.indexOf(".")&&!this.siteInDomainList(t,i)){s[n]||(s[n]={});var c=e?this.quote(o[a].name):i;s[n][c]?s[n][c]++:s[n][c]=1,r++}return{resources:s,resourcesCount:r}}catch(l){return{resources:{},resourcesCount:0}}},MordaRT.prototype.quote=function(t){return t.replace(/"|%22/g,"&quot;")},$(document).ready(function(){function t(){var t=null;"flash"===u.type?t=u.custom.flashV&&(new CAWBrowser).flash>=u.custom.flashV?e():n():"img"===u.type?t=n():"html"!==u.type&&(t=i());var r=o(),c=s();r&&t?$.extend(t,r):r&&(t=r),c&&t?$.extend(t,c):c&&(t=c),a(t)}function e(){var t=$("#banner > object:eq(0)").attr("classid"),e=$("#banner > #bc > noscript").length,n=$("#banner").children().length,i=$("#banner > #bc").children().length;return t&&"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"===t&&1===e&&2===n&&1===i?null:{horizontal:{flash:1}}}function n(){var t=$("#banner > #bc > noscript").length,e=$("#banner > #bc").children().length,n="",i="";return u.custom.gif?n=$("#banner > img").attr("src"):(i=$("#banner > a").attr("href"),n=$("#banner > a > img").attr("src")),n!==u.custom.img||!u.custom.gif&&i!==u.custom.href||1!==t||1!==e?u.custom.img?{horizontal:{img:1}}:{horizontal:{none:1}}:null}function i(){var t=$(".b-line_adv");return t.length&&0===t.children().length?null:3===$(".main").children().length?null:{horizontal:{none:1}}}function o(){var t=$("img"),e=[],n=!1;if(t.each(function(){var t=$(this).parents("a");this.src&&t.length&&e.push(t.attr("href"))}),e.length)for(var i=0,o=e.length;o>i;i++)if(!r(e[i])){n=!0;break}return n?{image:1,ignore:1}:null}function s(){var t=$("html")[0].style.cssText;return t?{html:1}:null}function r(t){if(!t||"#"===t||0===$.trim(t).indexOf("javascript"))return!0;var e=c.getHostname(t);return c.siteInDomainList(l,e)}function a(t){if(t&&!t.ignore){var e=$('<iframe style="display:none"></iframe>');$("body").append(e),e.attr("src",u.url)}var n=null,i={check:1};if(t&&t.ignore&&delete t.ignore,t){u.all&&delete i.check,n={},n["consistency-"+u.content]=$.extend(t,i);var o=c.getEntries(l),s=c.getEntries(l,!0);o.resourcesCount&&(n["resources-consistency-"+u.content]=o.resources),s.resourcesCount&&o.resources.script&&(n["resources-src-consistency-"+u.content]=s.resources.script)}else u.all||(n={},n["consistency-"+u.content]=i);n&&window.defaultMetrikaCounter&&window.defaultMetrikaCounter.params(n)}var u=home&&home.getData&&home.getData("consistency.data"),c=new MordaRT;if(u){var l=["*.*.yandex.*","*.yandex.*","yandex.*","yastatic.net","*.tns-counter.ru","*.hit.gemius.pl"];setTimeout(function(){t()},u.timeout)}}),$(function(){var t=home&&home.getData&&home.getData("consistencyPopup.data");if(t){var e=1e5+Math.floor(1e3*Math.random());views("consistency-popup",'<div [% className %] style="position:fixed;z-index:'+e+';bottom:16px;right:16px;width:340px;color:#FFF;background-color:#E26A68;padding:16px;"><div style="font-size:120%;margin-top:5px;margin-bottom:10px;">[% title %]</div><div style="line-height: 18px;">[% text %]</div><div style="margin-top: 30px;text-align: right"><a class="button_theme_cpopup" style="margin-right: 16px;" role="button" href="[% yesLink %]"><div class="button_theme_cpopup__text b-inline" style="background-color: #EB9796;">[% yesButton %]</div></a><a class="button_theme_cpopup" role="button" href="[% noLink %]"><div class="button_theme_cpopup__text b-inline">[% noButton %]</div></a></div><div class="button_theme_cpopup__close"><div class="button_theme_cpopup__close_img"></div></div></div>'),setTimeout(function(){var e=$(views("consistency-popup",t));$("a:last",e).click(function(){return(new Image).src=t.noLink,e.remove(),!1}),$(".button_theme_cpopup__close",e).click(function(){return(new Image).src=t.closeLink,e.remove(),!1}),$("body").append(e),(new Image).src=t.pixel},t.timeout)}}),function(t){function e(t){var e=[],o=[],s=t.replace(i,function(t,n,i){return n&&(e.push(n),o.push(0)),i&&(e.push(i),o.push(1)),""});return s&&e.push(s),function(){for(var t="",i=0,s=e.length;s>i;i++){var r=e[i],a=o[i];switch(a){case 1:if(void 0!==this[r])t+=this[r];else{var u=n[r];u&&(t+=u.apply(this))}break;case 0:default:t+=r}}return t}}var n={},i=/([\s\S]*?)\[%\s+([^\s%]+)\s+%\]/g;t.views=function(t,i){return t in n?n[t].call(i):void(n[t]="string"==typeof i?e(i):i)}}(this),function(){var t="//yastatic.net/browser-cookie/_fc.js",e='<div style="height:0;overflow:hidden;" aria-hidden="true"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" id="fco" ><param name="movie" value="//yastatic.net/browser-cookie/flash-cookie.swf"/><param name="allowScriptAccess" value="Always"/><embed src="//yastatic.net/browser-cookie/flash-cookie.swf" allowScriptAccess="Always" width="1" height="1" id="fce"></embed></object></div>';setTimeout(function(){window.mordaCookieCopy&&$.getScript(t,function(){$("body").append(e)})},5e3)}(),$(document).ready(function(){var t=home&&home.getData&&home.getData("yandcache.data");t&&window.setTimeout(function(){var e=navigator.userAgent.toLowerCase();/crios/.test(e)&&(/ipad/.test(e)||/ipod/.test(e)||/iphone/.test(e))||($.ajaxSetup({cache:!0}),$.getScript(t.url),$.ajaxSetup({cache:!1}))},t.timeout)}),BEM.DOM.decl("promo-button",{onSetMod:{js:function(){var t=this.domElem;t.is(":disabled")&&this.setMod("disabled","yes");var e=this.isDisabled();this._href=t.attr("href"),this._href&&e&&t.removeAttr("href"),t.attr("disabled",e),this._isFocusable="a button".indexOf(t[0].tagName.toLowerCase())>-1},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isFocusable&&!this._isControlFocused()&&this.domElem.focus(),void this.trigger("focus"))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isFocusable&&this._isControlFocused()&&this.domElem.blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(t,e){var n="yes"==e,i=this.domElem;this._href&&(n?i.removeAttr("href"):i.attr("href",this._href)),n&&i.keyup(),this.afterCurrentEvent(function(){i.attr("disabled",n)})},pressed:function(t,e){this.setMod("focused","yes"),this.isDisabled()&&this.trigger("yes"==e?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(t){return this.isDisabled()&&"hovered pressed".indexOf(t)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_isControlFocused:function(){try{return this.containsDomElem($(document.activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!=e&&32!=e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(t){this._onClick(t)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(e){var n=t[e.type];this.setMod(n.name,n.val||"")}).liveBindTo("mousedown",function(e){var n=t[e.type];1==e.which&&this.setMod(n.name,n.val||""),this._isControlFocused()&&e.preventDefault()})}}),BEM.DOM.decl("promo-button",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("tap",function(t){this._onClick(t)})}}),BEM.DOM.decl("input",{onSetMod:{disabled2:function(t,e){var n="yes"===e,i=this.elem("input");n&&(this._origTabIndex=i.attr("tabindex")||null),i.attr("disabled",n?"disabled":null).attr("aria-disabled",n?"true":null).attr("tabindex",n?"-1":this._origTabIndex)}}}),$(document).ready(function(){var t=home&&home.getData&&home.getData("szm.data");if(t){var e=function(t,e,n){for(var i in e)if(e.hasOwnProperty(i)&&String(t[i])!==String(e[i])&&!(n&&"viewportY"===i&&e[i]<t[i]&&t[i]-e[i]<100))return!1;return!0};setTimeout(function(){var n,i=window.devicePixelRatio,o=screen.width,s=screen.height,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=home.getData("szm.data.szm",{}),c=home.getData("szm.data.touch")||!1,l=home.getData("szm.data.swap")||!1;if(i){s>o!==l&&(n=o,o=s,s=n,n=r,r=a,a=n);var d={dpr:i,screenX:o,screenY:s,viewportX:r,viewportY:a};if(!e(u,d,c)){var h=t.url+(i+":"+o+"x"+s+":"+r+"x"+a);$(document.body).append('<iframe style="display:none" aria-hidden="true" tabindex="-1" src="'+h+'"></iframe>')}}},t.timeout)}}),BEM.decl("i-inline-install",{init:function(){if(!this.params||!this.params.url)throw new Error("Inline installation requires url of extension");return this.root=BEM.DOM.scope,this._message=null,this._messageData=home.getData("i-inline-install.data"),this.params.paranja&&this._messageData&&(this._messageData.theme=this.params.paranja,this._messageData.offset=this.__self._getOffset({theme:this._messageData.theme,isNewLayout:this._messageData.isNewLayout,gap:this.params.gap}),this._message=this._prepareMessage(this._messageData)),this.__self._appendToHead(this.params.url),this},request:function(){var t=this,e=this.params,n=e.url,i=e.statPath,o=e.paranja,s=e.bannerid,r=e.callbacks||{},a=e.metrika||{},u={yes:i+".yes",no:i+".no",error:i+".error",bad_ua:i+".bad_ua",bad_ext_url:i+".bad_ext_url"},c=$.Deferred();return x.amd.require("statlog",function(e){if(!t.__self.check())return e.log(u.bad_ua,"click"),void c.reject();try{window.chrome.webstore.install(n,function(){c.resolve(),e.log(u.yes,"click"),t._reachGoal(a.yes),r.yes&&r.yes(),o&&t._hideParanja(),s&&BEM.blocks["i-bannerid"].save(s)},function(){c.resolve(),e.log(u.no,"click"),t._reachGoal(a.no),r.no&&r.no(),o&&t._hideParanja(),window.home.gaCounter.trackCancel()}),o&&t._showParanja(),e.log(u.yes),e.log(u.no)}catch(i){c.reject(),"string"==typeof i&&0===i.indexOf("Invalid")?e.log(u.bad_ext_url,"click"):e.log(u.error,"click")}}),c.promise()},_reachGoal:function(t){var e=this.params.metrika&&this.params.metrika.id&&window["yaCounter"+this.params.metrika.id];e&&e.reachGoal&&t&&e.reachGoal(t)},_prepareMessage:function(t){return this.__self._getMessage(t).appendTo("body")},_showParanja:function(){var t,e=this._message,n=this._messageData.offset,i=this.root,o=this.params.paranja;i.addClass("i-inline-install__paranja i-inline-install__paranja_theme_"+o),t="white"===o?function(){e.bem("popup").show({left:0,top:n.top})}:function(){e.show().animate({top:"-=10px",opacity:1},100)},setTimeout(t,500),setTimeout(function(){i.addClass("i-inline-install__paranja_on")},100)},_hideParanja:function(){var t=this.params.paranja;this.root.removeClass("i-inline-install__paranja i-inline-install__paranja_theme_white i-inline-install__paranja_theme_black i-inline-install__paranja_on"),"white"===t?this._message.bem("popup").hide():"black"===t&&this._message.css({top:"+=10px",opacity:0}).hide()}},{check:function(){return!!window.chrome&&window.chrome.webstore&&window.chrome.webstore.install},_appendToHead:function(t){$(document.head).append($("<link />").attr({rel:"chrome-webstore-item",href:t}))},_getOffset:function(t){var e,n=t.theme,i=t.isNewLayout,o=t.gap;return"white"===n?e={top:315,left:235}:"black"===n&&(e={top:375,left:225}),"s"===o?e.top+=20:"m"===o?e.top+=40:"l"===o&&(e.top+=60),i&&(e.top-=55,e.left-=50),e},_getMessage:function(t){var e="white"===t.theme?this._getMessageInPopup(t):this._getMessageWithArrow(t);return $(BEMHTML.apply(e))},_getMessageWithArrow:function(t){return{block:"i-inline-install",elem:"message",mods:{theme:"black"},attrs:{style:"top:"+t.offset.top+"px"},content:[{block:"i-inline-install",elem:"arrow",attrs:{style:"left:"+t.offset.left+"px"}},{block:"i-inline-install",elem:"header",content:t.langs.header},{block:"i-inline-install",elem:"line",content:t.langs.line1},{block:"i-inline-install",elem:"line",content:t.langs.line2}]}
},_getMessageInPopup:function(t){return{block:"popup",mods:{adaptive:"yes",focusevents:"no",theme:"hint",autoclosable:"yes",position:"fixed"},mix:[{block:"i-inline-install",elem:"popup-message",mods:{theme:"white"}}],js:{directions:[{to:"bottom",axis:"middle",tail:{axis:"right",offset:t.offset.left}}]},content:[{elem:"tail"},{elem:"under"},{elem:"content",mix:[{block:"i-inline-install",elem:"content"}],content:[{block:"i-inline-install",elem:"header",content:t.langs.header},{block:"i-inline-install",elem:"line",content:t.langs.line1},{block:"i-inline-install",elem:"line",content:t.langs.line2}]}]}}}),BEM.DOM.decl("universal-stripe",{onSetMod:{js:function(){"use strict";var t=this.params;this.bindTo("text1","leftclick tap",this._text1Handler),this.bindTo("text2","leftclick tap",this._text2Handler),this.bindTo("table","leftclick tap",this._tableHandler),this.bindTo("col_close","leftclick tap",this._closeHandler),t.background_color_file2&&((new Image).src=t.background_color_file2,this.bindTo("text2",{mouseover:function(){this.elem("image").attr("src",t.background_color_file2)},mouseout:function(){this.elem("image").attr("src",t.background_image)}}))},state:{closed:function(){this.channel("popups").trigger("hide")}}},_text1Handler:function(t){t.stopPropagation(),this._close()},_text2Handler:function(t){t.stopPropagation(),this._close()},_tableHandler:function(){var t=this.params;this._close(),window.statRedirect(t.void_url,t.void_v12counter,t.void_target)},_closeHandler:function(t){t.preventDefault(),t.stopPropagation(),this.params.close_v12counter&&csh_ifmsid(this.params.close_v12counter),this.params.close_counter&&((new Image).src=this.params.close_counter),this._close()},_close:function(){this.setMod("state","closed")}}),BEM.DOM.decl({block:"universal-stripe",modName:"auto-close",modVal:"yes"},{onSetMod:{js:function(){this.__base();var t=this,e=this.params;e.auto_close&&setTimeout(function(){t.setMod("state","closed")},1e3*this.params.auto_close)}}}),BEM.DOM.decl({block:"universal-stripe",modName:"agreement",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("table",{mouseover:this._showAgreement,mouseout:this._hideAgreement}),this.bindTo("close",{mouseover:this._hardHideAgreement,mouseout:this._hardShowAgreement}),this.bindTo("agreement-link","click",function(t){t.stopPropagation()})}},_showAgreement:function(){this.elem("agreement").addClass("universal-stripe__agreement_visible")},_hideAgreement:function(){this.elem("agreement").removeClass("universal-stripe__agreement_visible")},_hardShowAgreement:function(){this.domElem.removeClass("universal-stripe_hide-agreement")},_hardHideAgreement:function(){this.domElem.addClass("universal-stripe_hide-agreement")}}),BEM.DOM.decl({block:"universal-stripe",modName:"animated",modVal:"yes"},{onSetMod:{js:function(){this.__base();var t=this,e=this.params,n=e.animation_duration;n&&(this.domElem.css({"-webkit-transition":"opacity "+n+"s",transition:"opacity "+n+"s"}),setTimeout(function(){t.setMod("state","showed")},50))}},_showAgreement:function(){this.elem("agreement").addClass("universal-stripe__agreement_visible")},_hideAgreement:function(){this.elem("agreement").removeClass("universal-stripe__agreement_visible")},_hardShowAgreement:function(){this.domElem.removeClass("universal-stripe_hide-agreement")},_hardHideAgreement:function(){this.domElem.addClass("universal-stripe_hide-agreement")}}),BEM.DOM.decl({block:"universal-stripe",modName:"install",modVal:"inline"},{onSetMod:{js:function(){this.__base();var t=this,e=this.params,n=e.inline,i=n.product||"unknown",o=n.creative||"00",s=n.url,r="clck_"+i+"_no",a="clck_"+i+"_yes",u="head.unistripe.inline."+i+"."+o;this._inlineInstallInstance=BEM.create("i-inline-install",{url:s,statPath:u,callbacks:{yes:function(){t.setMod("state","closed"),n.counter&&((new Image).src=n.counter)}},bannerid:e.bannerid,metrika:{id:e.metrika,yes:a,no:r}}).init()}},_text1Handler:function(){return(new Image).src=this.elem("text1").attr("href"),this._inlineHandler(),!1},_text2Handler:function(){return(new Image).src=this.elem("text2").attr("href"),this._inlineHandler(),!1},_tableHandler:function(){var t=this.params;return(new Image).src=t.void_url,csh_ifmsid(t.void_v12counter),this._inlineHandler(),!1},_inlineHandler:function(){var t=this;this._inlineInstallInstance.request().fail(function(){t._close()})}}),BEM.DOM.decl("edge-stripe",{_close:function(){if(this.domElem.hide(),$(window).trigger("popupredraw.lego"),this.params.close){var t=new Image;t.src=this.params.close}}},{live:function(){this.liveInitOnEvent("close","click",function(){this._close()})}}),BEM.DOM.decl({block:"edge-stripe",modName:"position",modVal:"down"},{_close:function(){this.__base.apply(this,arguments),$("body").removeClass("edge-stripe__bodymargin")}}),BEM.DOM.decl("dist-stripe",{onSetMod:{js:function(){this.bindTo("close","leftclick tap",function(){return this.hide(),!1}),this.bindTo("button","leftclick tap",function(){return this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl),this._action()}),this.params.bkShowUrl&&((new Image).src=this.params.bkShowUrl)},state:{hidden:function(){setTimeout(function(){$(window).trigger("popupredraw.lego")},100),this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl)}}},hide:function(){this.setMod("state","hidden")},_action:function(){return!0}}),BEM.DOM.decl({block:"dist-stripe",modName:"install",modVal:"inline"},{_action:function(){this.__base();var t=this.params;return this._inlineInstallInstance||(this._inlineInstallInstance=BEM.create("i-inline-install",{url:t.inlineLink,statPath:t.statPath+".inline",callbacks:{yes:this.changeThis(this.hide)},paranja:t.paranja,bannerid:t.bannerid,metrika:t.metrika?{id:t.metrika.id,yes:t.metrika.yes,no:t.metrika.no}:""}).init()),this._inlineInstallInstance.request(),!1}}),BEM.DOM.decl({block:"dist-stripe",modName:"product",modVal:"yabrwin10"},{_action:function(){return this.__base(),this.hide(),!0}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),function(){"use strict";x.ns(window,"home"),home.delayManager=function(){var t={},e={},n=function(n,i){t[n]||(t[n]=[]),e[n]?i():t[n].push(i)},i=function(e){if(t[e])for(var n=t[e].length,i=0;n>i;i++)t[e].shift().call()};return{add:function(t,e){n(t,e)},runQueue:function(t){e[t]=!0,i(t)}}}()}(),$(document).ready(function(){function t(t,e){var n=new Date(1e3*t);return e.replace("%day",n.getDate()).replace("%month",i.monthNames[n.getMonth()]).replace("%year",n.getFullYear())}function e(){$(".b-sethome-stripe").hide(),$(".b-https-stripe").hide();var t=$(".popup_visibility_visible:not(.b-topbar__popup)");t.length&&t.bem("popup").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100)}function n(e,n){r=e.html(),a=new Date(1e3*n).getFullYear()===new Date(1e3*i.timestamp).getFullYear()?i.dateFormatShort:i.dateFormatLong,r=r.replace("%local_date","<b>("+t(n,a)+")</b>").replace("%current_date","<b>("+t(i.timestamp,a)+")</b>"),e.html(r)}var i=home&&home.getData&&home.getData("b-time-banner.data");if(!i||i.empty)return void home.delayManager.runQueue("timeBanner.notshown");var o,s,r,a,u,c,l=$(".b-time-banner"),d=Math.round((new Date).getTime()/1e3);i.WrongDateFatal.show&&(i.WrongDateFatal.till_ts>d||i.WrongDateFatal.from_ts&&i.WrongDateFatal.from_ts<d)?(o=i.WrongDateFatal,s=$(".b-time-banner_mode_fatal .b-time-banner__text"),n(s,d),$(".b-time-banner_mode_fatal").show(),c=i.showFatalCounter,u=o.show_url,e()):i.WrongDateAlert.show&&(i.WrongDateAlert.till_ts>d||i.WrongDateAlert.from_ts&&i.WrongDateAlert.from_ts<d)?(o=i.WrongDateAlert,s=$(".b-time-banner_mode_alert .b-time-banner__text"),n(s,d),$(".b-time-banner_mode_alert").show(),c=i.showAlertCounter,u=o.show_url,e()):home.delayManager.runQueue("timeBanner.notshown"),u&&((new Image).src=u),c&&csh_ifgsid(c),$(".attention-stripe__close").click(function(t){(new Image).src=o.close_url,csh_ifgsid($(t.target).hasClass("attention-stripe__close_alert")?i.closeAlertCounter:i.closeFatalCounter),l.hide(),t.preventDefault(),e()})}),function(){$(document).ready(function(){function t(t){var e=document.createElement("iframe");e.style.visibility="hidden",e.style.position="absolute",e.setAttribute("src",t),e.style.top=e.style.left=e.style.width=e.style.height=0,document.getElementsByTagName("body")[0].appendChild(e)}if(home.getData("b-https-stripe.data.show")){var e=home.getData("b-https-stripe.data.close_url"),n=home.getData("b-https-stripe.data.counter_url");t(n),Lego.params.statEnabled&&cp(home.getData("b-https-stripe.counters.show")),$(".b-https-stripe .attention-stripe__close").click(function(n){t(e),Lego.params.statEnabled&&cp(home.getData("b-https-stripe.counters.close")),$(".b-https-stripe").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100),n.preventDefault()})}})}(),BEM.DOM.decl("content-tabs",{onSetMod:{js:{inited:function(){var t,e=this.params.storeClientTabs,n=this.__self._selectedTabs;e&&(e in n&&(t=$("#"+n[this.params.storeClientTabs],this.domElem),t.length&&this.switchTo(t)),this.on("switch",function(t,i){n[e]=i}))}}},onClick:function(t,e){var n=e.closest(".content-tabs__head-item");this.hasMod(n,"active","true")||(this.switchTo(n),t.preventDefault())},toggleTab:function(t,e){var n=t.data("stat"),i=t.find(".content-tabs__link");this.toggleMod(t,"active","true","false",e),i.attr("aria-selected",e?"true":"false"),e?i.removeAttr("tabindex"):i.attr("tabindex","-1"),this.saveTab(t),n&&e&&csh_ifmsid(n)},togglePanel:function(t,e){this.toggleMod(t,"active","true","false",e),t.attr("aria-hidden",e?"false":"true")},switchTo:function(t){var e=t.attr("id");this.toggleTab(this.elem("head-item","active","true"),!1),this.toggleTab(t,!0),this.togglePanel(this.elem("items","active","true"),!1),this.togglePanel(this.domElem.find("#"+e+"c"),!0),t.find(".content-tabs__link").focus(),this.trigger("switch",e),x.amd.require("statlog",function(t){t.checkAndLog()})},getFrame:function(){var t=this.elem("frame");return t&&t.length||(t=$('<iframe style="display:none" class="content-tabs__frame"></frame>'),this.domElem.append(t),this.dropElemCache("frame")),t},saveTab:function(t){var e=t.data("save-url");if(e){var n=this.getFrame();n.attr("src",e)}},selectRelative:function(t){var e=this.elem("head-item"),n=this.elem("head-item","active","true"),i=$.inArray(n[0],e)+t;if(!(0>i||i>=e.length))return this.switchTo(e.eq(i)),!1}},{_selectedTabs:{},live:function(){this.liveBindTo("link","leftclick tap",function(t){this.onClick(t,t.data.domElem)}),this.liveBindKey("link","left",function(){return this.selectRelative(-1)}),this.liveBindKey("link","right",function(){return this.selectRelative(1)})}}),function(){"use strict";var t=!1,e=function(){t||(t=!0,views("datetime__date",home.getData("datetime.data.template")))};BEM.DOM.decl("datetime",{onSetMod:{js:{inited:function(){var t=this;this._initDate(),this._prevDay=null,this._settedHour="",this._settedMin="",this._serverDate&&"Invalid Date"!==this._serverDate.toString()&&!isNaN(this._serverDate)&&(this.afterCurrentEvent(this._iterate),this._interval=setInterval(function(){t._iterate(),t._blink()},1e3))}}},destruct:function(){clearInterval(this._interval),this.__base.apply(this,arguments)},_initDate:function(){this._serverDate=new Date(this.params.timestamp+" GMT+0000"),this._loadDate=new Date},_iterate:function(){var t=new Date,e=new Date(this._serverDate.getTime()+(t.getTime()-this._loadDate.getTime()));this._proceedNewDate(e,t)},_proceedNewDate:function(t){var e,n;0===t.getUTCHours()&&0===t.getUTCMinutes()&&this._proceedNextDay(t),e=this._format(t.getUTCHours()),n=this._format(t.getUTCMinutes()),(e!==this._settedHour||n!==this._settedMin)&&(this._settedHour=e,this._settedMin=n,this.elem("hour").text(e),this.elem("min").text(n))},_proceedNextDay:function(t){var e=t.getDay();this._prevDay===e||this.hasMod("time-only","yes")||(this._drawNextDay(t,e),this._prevDay=e)},_drawNextDay:function(t,n){var i=this.findElem("date"),o=home.getData("datetime.data"),s=this.hasMod("short","yes")?o.monthShortArr:o.monthArr;i.length&&(e(),i.replaceWith(views("datetime__date",{day:t.getDate(),month:s[t.getMonth()],wday:o.weekArr[n]})))},_format:function(t){return t>9?""+t:"0"+t},_blink:function(){this.toggleMod("time-hidden","yes")}})}(),BEM.DOM.decl("inline-stocks",{onSetMod:{js:function(){this.bindMouseEvents(),this.xivainitTimer=setTimeout(this.changeThis(this.initXiva),6e4)}},bindMouseEvents:function(){if(!window.device){var t={root:{name:"hovered",val:"yes"},item:{name:"hint",val:"visible",elem:".inline-stocks__item"}};this.bindTo("mouseenter",this.getOnmouseenter(t.root)),this.bindTo("mouseleave",this.getOnmouseleave(t.root)),this.bindTo("item","mouseenter",this.getOnmouseenter(t.item)),this.bindTo("item","mouseleave",this.getOnmouseleave(t.item))}},getOnmouseenter:function(t){return function(e){var n=this;t.countdown||(t.countdown=setTimeout(function(){if(t.countdown=null,t.elem){var i=$(e.target).closest(t.elem);n.setMod(i,t.name,t.val)}else n.setMod(t.name,t.val)},t.delay||250))}},getOnmouseleave:function(t){return function(e){var n=this;if(clearTimeout(t.countdown),t.countdown=null,t.elem){var i=$(e.target).closest(t.elem);n.delMod(i,t.name)}else n.delMod(t.name)}},initXiva:function(){var t=home.getData("inline-stocks.xivas")||[],e=this;t.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,function(t){e.updateFunc(t.dt)})})},updateFunc:function(t){if(t&&t.id){var e=t.id,n=this.elem("item","id",e);if(n.length){t=t.data&&t.data[0],$(".inline-stocks__value_inner",n).html(t.value);var i=this.findElem(n,"cell","type","delta"),o=this.findElem(n,"cell","type","delta-label");t.delta?(i.html(t.delta).removeClass("i-hidden"),o.html(t.delta.replace("","-")),this.setMod(i,"delta",t.is_hot?"hot":"small")):(i.addClass("i-hidden"),o.html(""));var s=home.getData("inline-stocks.alts")||{};s[e]&&$(".inline-stocks__item__baloon_inner",n).html(s[e].replace("%d",t.date).replace("%t",t.time))}}}}),function(){var t;t=function(){var t=document,e=window,n={},i=function(){};i.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var i=this._listeners[t];-1===n.arrIndexOf(i,e)&&i.push(e)},i.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var i=this._listeners[t],o=n.arrIndexOf(i,e);return-1!==o?void(i.length>1?this._listeners[t]=i.slice(0,o).concat(i.slice(o+1)):delete this._listeners[t]):void 0}},i.prototype.dispatchEvent=function(t){var e=t.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,n),this._listeners&&e in this._listeners)for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].apply(this,n)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var n=this[e];"function"==typeof n&&(n="[function]"),t.push(e+"="+n)}return"SimpleEvent("+t.join(", ")+")"};var s=function(t){var e=this;e._events=t||[],e._listeners={}};s.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var n=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,n),t in e._listeners)for(var i=0;i<e._listeners[t].length;i++)e._listeners[t][i].apply(e,n)}},s.prototype.on=function(t,e){var n=this;n._verifyType(t),n._nuked||(t in n._listeners||(n._listeners[t]=[]),n._listeners[t].push(e))},s.prototype._verifyType=function(t){var e=this;-1===n.arrIndexOf(e._events,t)&&n.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},s.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(t,e){e=e||r.length;var n,i=[];for(n=0;t>n;n++)i.push(r.substr(Math.floor(Math.random()*e),1));return i.join("")},n.random_number=function(t){return Math.floor(Math.random()*t)},n.random_number_string=function(t){var e=(""+(t-1)).length,i=Array(e+1).join("0");return(i+n.random_number(t)).slice(-e)},n.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},n.isSameOriginUrl=function(t,n){return n||(n=e.location.href),t.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},n.objectExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var a="_jp";n.polluteGlobalNamespace=function(){a in e||(e[a]={})},n.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},n.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},n.countRTO=function(t){var e;return e=t>100?3*t:t+200},n.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},n.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},n.amendUrl=function(e){var i=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!n.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=i.protocol+e),0===e.indexOf("/")&&(e=i.protocol+"//"+i.host+e),e=e.replace(/[/]+$/,"")},n.arrIndexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.arrSkip=function(t,e){var i=n.arrIndexOf(t,e);if(-1===i)return t.slice();var o=t.slice(0,i);return o.concat(t.slice(i+1))},n.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},n.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var u,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,h=JSON&&JSON.stringify||function(t){return c.lastIndex=0,c.test(t)&&(t=t.replace(c,function(t){return l[t]})),'"'+t+'"'},p=function(t){var e,n={},i=[];for(e=0;65536>e;e++)i.push(String.fromCharCode(e));return t.lastIndex=0,i.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n};n.quote=function(t){var e=h(t);return d.lastIndex=0,d.test(e)?(u||(u=p(d)),e.replace(d,function(t){return u[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var n=f[e];t[n]=E[n]&&E[n].enabled()}return t},n.detectProtocols=function(t,e,n){var i={},o=[];e||(e=f);for(var s=0;s<e.length;s++){var r=e[s];i[r]=t[r]}var a=function(t){var e=t.shift();i[e]?o.push(e):t.length>0&&a(t)};return n.websocket!==!1&&a(["websocket"]),i["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";n.createHook=function(){var t="a"+n.random_string(8);if(!(m in e)){var i={};e[m]=function(t){return t in i||(i[t]={id:t,del:function(){delete i[t]}}),i[t]}}return e[m](t)},n.attachMessage=function(t){n.attachEvent("message",t)},n.attachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.addEventListener(n,i,!1):(t.attachEvent("on"+n,i),e.attachEvent("on"+n,i))},n.detachMessage=function(t){n.detachEvent("message",t)},n.detachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.removeEventListener(n,i,!1):(t.detachEvent("on"+n,i),e.detachEvent("on"+n,i))};var g={},_=!1,v=function(){for(var t in g)g[t](),delete g[t]},b=function(){_||(_=!0,v())};n.attachEvent("unload",b),n.unload_add=function(t){var e=n.random_string(8);return g[e]=t,_&&n.delay(v),e},n.unload_del=function(t){t in g&&delete g[t]},n.createIframe=function(e,i){var o,s,r=t.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(t){}r.onerror=null},u=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),n.unload_del(s))},c=function(t){r&&(u(),i(t))},l=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(n){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){c("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},t.body.appendChild(r),o=setTimeout(function(){c("timeout")},15e3),s=n.unload_add(u),{post:l,cleanup:u,loaded:a}},n.createHtmlfile=function(t,i){var o,s,r,u=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},l=function(){u&&(c(),n.unload_del(s),r.parentNode.removeChild(r),r=u=null,CollectGarbage())},d=function(t){u&&(l(),i(t))},h=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(n){}};u.open(),u.write('<html><script>document.domain="'+document.domain+'";</script></html>'),u.close(),u.parentWindow[a]=e[a];var p=u.createElement("div");return u.body.appendChild(p),r=u.createElement("iframe"),p.appendChild(r),r.src=t,o=setTimeout(function(){d("timeout")},15e3),s=n.unload_add(l),{post:h,cleanup:l,loaded:c}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(t,i,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(t,i,!0)}catch(u){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var c in s.headers)r.xhr.setRequestHeader(c,s.headers[c]);r.xhr.onreadystatechange=function(){if(r.xhr){var t=r.xhr;switch(t.readyState){case 3:try{var e=t.status,n=t.responseText}catch(t){}1223===e&&(e=204),n&&n.length>0&&r.emit("chunk",e,n);break;case 4:var e=t.status;1223===e&&(e=204),r.emit("finish",e,t.responseText),r._cleanup(!1)}}},r.xhr.send(o)},y.prototype._cleanup=function(t){var e=this;if(e.xhr){if(n.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(i){}e.unload_ref=e.xhr=null}},y.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=n.XHRCorsObject=function(){var t=this,e=arguments;n.delay(function(){t._start.apply(t,e)})};w.prototype=new y;var x=n.XHRLocalObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i,{no_credentials:!0})})};x.prototype=new y;var k=n.XDRObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i)})};k.prototype=new s(["chunk","finish"]),k.prototype._start=function(t,e,i){var o=this,s=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(i)}catch(a){r()}},k.prototype._cleanup=function(t){var e=this;if(e.xdr){if(n.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(i){}e.unload_ref=e.xdr=null}},k.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},n.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:j.enabled()?3:4};var E=function(t,i,o){if(this===e)return new E(t,i,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(r._options,o),r._base_url=n.amendUrl(t),r._server=r._options.server||n.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof i&&i.length>0?[i]:n.isArray(i)?i:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=E.CONNECTING,r._ir=U(r._base_url),r._ir.onfinish=function(t,e){r._ir=null,t?(r._options.info&&(t=n.objectExtend(t,r._options.info)),r._options.rtt&&(e=r._options.rtt),r._applyInfo(t,e,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};E.prototype=new i,E.version="0.3.4",E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},E.prototype._dispatchOpen=function(){var t=this;t.readyState===E.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=E.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},E.prototype._dispatchMessage=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("message",{data:t}))},E.prototype._dispatchHeartbeat=function(){var t=this;t.readyState===E.OPEN&&t.dispatchEvent(new o("heartbeat",{}))},E.prototype._didClose=function(t,e,i){var s=this;if(s.readyState!==E.CONNECTING&&s.readyState!==E.OPEN&&s.readyState!==E.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:t,reason:e,wasClean:n.userSetCode(t)});if(!n.userSetCode(t)&&s.readyState===E.CONNECTING&&!i){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=E.CLOSED,n.delay(function(){s.dispatchEvent(r)})},E.prototype._didMessage=function(t){var e=this,n=t.slice(0,1);switch(n){case"o":e._dispatchOpen();break;case"a":for(var i=JSON.parse(t.slice(1)||"[]"),o=0;o<i.length;o++)e._dispatchMessage(i[o]);break;case"m":var i=JSON.parse(t.slice(1)||"null");e._dispatchMessage(i);break;case"c":var i=JSON.parse(t.slice(1)||"[]");e._didClose(i[0],i[1]);break;case"h":e._dispatchHeartbeat()}},E.prototype._try_next_protocol=function(e){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+e),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var o=i.protocol=i._protocols.shift();if(!o)return!1;if(E[o]&&E[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return i._protocols.unshift(o),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(E[o]&&E[o].enabled(i._options)){var s=E[o].roundTrips||1,r=(i._options.rto||0)*s||5e3;i._transport_tref=n.delay(r,function(){i.readyState===E.CONNECTING&&i._didClose(2007,"Transport timeouted")});var a=n.random_string(8),u=i._base_url+"/"+i._server+"/"+a;return i._debug("Opening transport:",o," url:"+u," RTO:"+i._options.rto),i._transport=new E[o](i,u,i._base_url),!0}i._debug("Skipping transport:",o)}},E.prototype.close=function(t,e){var i=this;if(t&&!n.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==E.CONNECTING&&i.readyState!==E.OPEN?!1:(i.readyState=E.CLOSING,i._didClose(t||1e3,e||"Normal closure"),!0)},E.prototype.send=function(t){var e=this;if(e.readyState===E.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===E.OPEN&&e._transport.doSend(n.quote(""+t)),!0},E.prototype._applyInfo=function(e,i,o){var s=this;s._options.info=e,s._options.rtt=i,s._options.rto=n.countRTO(i),s._options.info.null_origin=!t.domain;var r=n.probeProtocols();s._protocols=n.detectProtocols(r,o,e)};var M=E.websocket=function(t,i){var o=this,s=i+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=t,o.url=s;var r=e.WebSocket||e.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};M.prototype.doSend=function(t){this.ws.send("["+t+"]")},M.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),n.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},M.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},M.roundTrips=2;var S=function(){};S.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},S.prototype.doSend=function(t){var e=this;
e.send_buffer.push(t),e.send_stop||e.send_schedule()},S.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},S.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,n){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+n):t.send_schedule_wait()}),t.send_buffer=[]}},S.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var I=function(e,i,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=t.createElement("form"),a=s._send_area=t.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),t.body.appendChild(r)}var r=s._send_form,a=s._send_area,u="a"+n.random_string(8);r.target=u,r.action=e+"/jsonp_send?i="+u;var c;try{c=t.createElement('<iframe name="'+u+'">')}catch(l){c=t.createElement("iframe"),c.name=u}c.id=u,r.appendChild(c),c.style.display="none";try{a.value=i}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}r.submit();var h=function(){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=h,c.onreadystatechange=function(){"complete"==c.readyState&&h()},h},C=function(t){return function(e,n,i){var o=new t("POST",e+"/xhr_send",n);return o.onfinish=function(t){i(200===t||204===t,"http status "+t)},function(t){i(!1,t)}}},T=function(e,i){var o,s,r=t.createElement("script"),a=function(t){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,i(t),i=null)},u=!1,c=null;if(r.id="a"+n.random_string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(){c||(c=setTimeout(function(){u||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){u=!0;try{r.onclick()}catch(t){}}r&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))s=t.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(l){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=t.getElementsByTagName("head")[0];return d.insertBefore(r,d.firstChild),s&&d.insertBefore(s,d.firstChild),a},B=E["jsonp-polling"]=function(t,e){n.polluteGlobalNamespace();var i=this;i.ri=t,i.trans_url=e,i.send_constructor(I),i._schedule_recv()};B.prototype=new S,B.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=D(t.trans_url+"/jsonp",T,e)},B.enabled=function(){return!0},B.need_body=!0,B.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var D=function(t,i,o){var s="a"+n.random_string(6),r=t+"?c="+escape(a+"."+s),u=0,c=function(t){switch(u){case 0:delete e[a][s],o(t);break;case 1:o(t),u=2;break;case 2:delete e[a][s]}},l=i(r,c);e[a][s]=l;var d=function(){e[a][s]&&(u=1,e[a][s](n.closeFrame(1e3,"JSONP user aborted read")))};return d},P=function(){};P.prototype=new S,P.prototype.run=function(t,e,n,i,o){var s=this;s.ri=t,s.trans_url=e,s.send_constructor(C(o)),s.poll=new Y(t,i,e+n,o)},P.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var $=E["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",ie,n.XHRCorsObject)};$.prototype=new P,$.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},$.roundTrips=2,$.need_body=!0;var O=E["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",ie,n.XDRObject)};O.prototype=new P,O.enabled=function(){return!!e.XDomainRequest},O.roundTrips=2;var F=E["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",ie,n.XHRCorsObject)};F.prototype=new P,F.enabled=$.enabled,F.roundTrips=2;var A=E["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",ie,n.XDRObject)};A.prototype=new P,A.enabled=O.enabled,A.roundTrips=2;var j=function(){};j.prototype.i_constructor=function(t,e,i){var o=this;o.ri=t,o.origin=n.getOrigin(i),o.base_url=i,o.trans_url=e;var s=i+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=n.random_string(8),s+="#"+o.window_id,o.iframeObj=n.createIframe(s,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},j.prototype.doCleanup=function(){var t=this;if(t.iframeObj){n.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},j.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var n=t.data.slice(0,8),i=t.data.slice(8,9),o=t.data.slice(9);if(n===e.window_id)switch(i){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([E.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},j.prototype.postMessage=function(t,e){var n=this;n.iframeObj.post(n.window_id+t+(e||""),n.origin)},j.prototype.doSend=function(t){this.postMessage("m",t)},j.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var N,L=function(t,i){parent!==e?parent.postMessage(N+t+(i||""),"*"):n.log("Can't postMessage, no parent window.",t,i)},R=function(){};R.prototype._didClose=function(t,e){L("t",n.closeFrame(t,e))},R.prototype._didMessage=function(t){L("t",t)},R.prototype._doSend=function(t){this._transport.doSend(t)},R.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,E.bootstrap_iframe=function(){var i;N=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=t.origin),t.origin===n.parent_origin)){var o=t.data.slice(0,8),s=t.data.slice(8,9),r=t.data.slice(9);if(o===N)switch(s){case"s":var a=JSON.parse(r),u=a[0],c=a[1],l=a[2],d=a[3];if(u!==E.version&&n.log('Incompatibile SockJS! Main site uses: "'+u+'", the iframe: "'+E.version+'".'),!n.flatUrl(l)||!n.flatUrl(d))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(l)||!n.isSameOriginUrl(d))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,l,d])+")");i=new R,i._transport=new R[c](i,l,d);break;case"m":i._doSend(r);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(o),L("s")};var W=function(t,e){var i=this;n.delay(function(){i.doXhr(t,e)})};W.prototype=new s(["finish"]),W.prototype.doXhr=function(t,e){var i=this,o=(new Date).getTime(),s=new e("GET",t+"/info"),r=n.delay(8e3,function(){s.ontimeout()});s.onfinish=function(t,e){if(clearTimeout(r),r=null,200===t){var n=(new Date).getTime()-o,s=JSON.parse(e);"object"!=typeof s&&(s={}),i.emit("finish",s,n)}else i.emit("finish")},s.ontimeout=function(){s.close(),i.emit("finish")}};var z=function(e){var i=this,o=function(){var t=new j;t.protocol="w-iframe-info-receiver";var n=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var n=JSON.parse(e.substr(1)),o=n[0],s=n[1];i.emit("finish",o,s)}else i.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:n,_didMessage:n};t.i_constructor(o,e,e)};t.body?o():n.attachEvent("load",o)};z.prototype=new s(["finish"]);var H=function(){var t=this;n.delay(function(){t.emit("finish",{},2e3)})};H.prototype=new s(["finish"]);var U=function(t){if(n.isSameOriginUrl(t))return new W(t,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new W(t,n.XHRLocalObject);case 2:return new W(t,n.XDRObject);case 3:return new z(t);default:return new H}},q=R["w-iframe-info-receiver"]=function(t,e,i){var o=new W(i,n.XHRLocalObject);o.onfinish=function(e,n){t._didMessage("m"+JSON.stringify([e,n])),t._didClose()}};q.prototype.doCleanup=function(){};var V=E["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};V.prototype=new j,V.enabled=function(){return"EventSource"in e&&j.enabled()},V.need_body=!0,V.roundTrips=3;var K=R["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Z,n.XHRLocalObject)};K.prototype=new P;var G=E["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};G.prototype=new j,G.enabled=function(){return e.XMLHttpRequest&&j.enabled()},G.need_body=!0,G.roundTrips=3;var J=R["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",ie,n.XHRLocalObject)};J.prototype=new P;var Q=E["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};Q.prototype=new j,Q.enabled=function(){return j.enabled()},Q.need_body=!0,Q.roundTrips=3;var X=R["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",ne,n.XHRLocalObject)};X.prototype=new P;var Y=function(t,e,n,i){var o=this;o.ri=t,o.Receiver=e,o.recv_url=n,o.AjaxObject=i,o._scheduleRecv()};Y.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),n=0;e.onmessage=function(e){n+=1,t.ri._didMessage(e.data)},e.onclose=function(n){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===n.reason?t.ri._didClose(1006,"Polling error ("+n.reason+")"):t._scheduleRecv())}},Y.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Z=function(t){var e=this,i=new EventSource(t);i.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=i.onerror=function(t,s){var r=s?"user":2!==i.readyState?"network":"permanent";e.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){e.dispatchEvent(new o("close",{reason:r}))})}};Z.prototype=new i,Z.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var te,ee=function(){if(void 0===te)if("ActiveXObject"in e)try{te=!!new ActiveXObject("htmlfile")}catch(t){}else te=!1;return te},ne=function(t){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+i.id);var s,r=ee()?n.createHtmlfile:n.createIframe;e[a][i.id]={start:function(){s.loaded()},message:function(t){i.dispatchEvent(new o("message",{data:t}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(t,n){s.cleanup(),i.iframe_close=s=null,delete e[a][i.id],i.dispatchEvent(new o("close",{reason:n}))},s=r(t,function(){i.iframe_close({},"permanent")})};ne.prototype=new i,ne.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var ie=function(t,e){var n=this,i=0;n.xo=new e("POST",t,null),n.xo.onchunk=function(t,e){if(200===t)for(;;){var s=e.slice(i),r=s.indexOf("\n");if(-1===r)break;i+=r+1;var a=s.slice(0,r);n.dispatchEvent(new o("message",{data:a}))}},n.xo.onfinish=function(t,e){n.xo.onchunk(t,e),n.xo=null;var i=200===t?"network":"permanent";n.dispatchEvent(new o("close",{reason:i}))}};return ie.prototype=new i,ie.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},E.getUtils=function(){return n},E.getIframeTransport=function(){return j},E}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return t}),function(){"use strict";var e,n,i,o={},s=!1,r=0,a=!1,u=!0,c=[],l=!0;BEM.decl("i-xiva",{},{listen:function(t,e,n){var i=!o[t];i&&(o[t]={handlers:[]}),o[t].ts=e,o[t].handlers.push(n),this._init(),i&&this._subscribe()},connect:function(){u=!0,this._connect()},disconnect:function(t){u=t,e&&e.close&&e.close()},_sendQueue:function(){var t,e,n;for(t=0,e=c.length;e>t;++t)(n=c[t].handler)(c[t].data);c=[]},_toggleFocus:function(t){l=t,l&&this._sendQueue()},_initFocusEvents:function(){var t=this;$.browser.msie?$(document).bind("focusout",function(){t._toggleFocus(!1)}).bind("focusin",function(){t._toggleFocus(!0)}):$(window).focus(function(){t._toggleFocus(!0)}).blur(function(){t._toggleFocus(!1)})},_bindOnUnload:function(){var t=this;$(window).on("beforeunload",function(){t.disconnect(!1)})},_init:function(){if(!s){s=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this);var t=this;setTimeout(function(){t.connected||t._connect()},6e4)}},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var n=BEM.blocks["i-global"].param("xivaUrl"),i=this;this.connected=!0,this._hasXivaSupport()&&n&&(e=new t("//"+n+"/xiva",null,{protocols_whitelist:["websocket"]}),e.onopen=function(){i._connected=!0,i._subscribe(),i._checkConnection()},e.onmessage=i._onMessage,e.onclose=function(){i._connected=!1,i._reconnect()})},_reconnect:function(){this._stopConnectionTimer(),u&&(r++,5>=r?setTimeout(this._connect,3e3):15>=r?setTimeout(this._connect,1e4):setTimeout(this._connect,6e4))},_stopConnectionTimer:function(){n&&(clearTimeout(n),n=null)},_checkConnection:function(){this._stopConnectionTimer(),n=setTimeout(function(){a&&(r=0)},5e3)},_subscribe:function(){var t=this;i&&clearTimeout(i),i=setTimeout(function(){t._subscribeSend()},100)},_subscribeSend:function(){var t;if(this._connected){t={subscribe:{}};for(var n in o)o.hasOwnProperty(n)&&(t.subscribe[n]=o[n].ts);e.send(JSON.stringify(t))}},_onMessage:function(t){var e,n,i,s,r=$.trim(t.data);try{if(e=JSON.parse(r),i=e.ch+"_"+e.key,o[i]&&(n=parseInt(e.ts),o[i].ts<n)){o[i].ts=n,s=o[i].handlers;for(var a=0,u=s.length;u>a;++a)l?s[a](e):c.push({handler:s[a],data:e})}}catch(d){}}})}()}(),x.amd.require("statlog",function(t){var e=6e4;BEM.DOM.decl({block:"inline-stocks",modName:"new",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("more","click",this.toggleMore),this.bindTo("more","keydown",this._keydown),this.getPopup()._owner=this.domElem}},_keydown:function(t){if(!(t.altKey||t.metaKey||t.ctrlKey||t.shiftKey))switch(t.which){case 32:t.preventDefault();case 13:this.toggleMore()}},toggleMore:function(){var t=this.getPopup();t.isShown()||this.onShow(t),t.toggle(this.domElem)},getPopup:function(){return this.__self._popup||(this.__self._popup=this.createPopup())},onShow:function(n){var i=this;return!this.data||this.data&&this.datats&&Number(new Date-this.datats)>e?(i.toggleState("load"),$.ajax({url:this.params.stocksUrl,dataType:"json",success:function(t){return t&&t.Stocks?(i.datats=Number(new Date),i.data=t,i.createTable(t,n),void i.onShow(n)):void i.toggleState("error")},error:function(){i.toggleState("error")}})):(this.toggleState("tables"),t.logByFragment({doc:n.domElem,skipVisibleCheck:!0}),this.getPopup()._unbindFocusEvents(),void this.getPopup()._bindFocusEvents())},createPopup:function(){var t=this.params.editShow,e=$(BEM.HTML.build({block:"popup",mods:{theme:"ffffff",autoclosable:"yes","has-close":"yes",animate:"yes",adaptive:"yes"},cls:"inline-stocks__popup-wrap",js:{directions:[{to:"bottom",axis:"left",offset:{left:-25,top:-25}}]},content:[{elem:"under"},{block:"inline-stocks",elem:"tune",tag:"a",cls:"b-widget__control"+(t?"":" inline-stocks__tune_hidden"),content:'<i class="b-ico b-ico-widget-prefs"></i>',attrs:{href:"?edit=1#open=_stocks","data-statlog":"news_rates_manual.popup.tune"}},{elem:"close",attrs:{"data-statlog":"news_rates_manual.popup.close"}},{elem:"content",mods:{padded:"old"}}]}));return e=this.findBlockOn(e,"popup"),this.__self.popup=this.elem("popup"),e.elem("content").append(this.__self.popup),this.getInstance()&&this.bindTo(this.findElem(e.domElem,"tune"),"click",this.showForm),e.on("show hide",function(){this.isShown()?this.elem("more").attr("aria-expanded","true"):this.elem("more").attr("aria-expanded","false")}),e.on("outside-click",function(t,e){return $(e.target).closest("#widget_pref_form").length?!1:void 0}),e},templates:{val:function(t){return'<td><i class="inline-stocks__cell">'+t.value+"</i></td>"},delta:function(t,e){var n,i=home.getData("inline-stocks.alts");return e&&i&&(n=i.bigdiff.replace(/%d%(%)/,e+"$1")),t.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(t.is_hot?"hot":"small")+'"'+(n&&t.is_hot?' title="'+n+'"':"")+' aria-hidden="true">'+t.delta+'</i><span class="a11y-hidden">'+String(t.delta).replace("","-")+"</span></td>":""},date:function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}},rowsByType:{cash:function(t){return t.map(this.templates.val).join("")},currency:function(t,e){return t.map(function(t,n){return(n?this.templates.delta(t,e):"")+this.templates.val(t)},this).join("")},indexes:function(t,e){var n=t[0];return this.templates.date(n)+this.templates.delta(n,e)+this.templates.val(n)}},createTable:function(t){var e=this,n=home.view("inline-stocks__tables",t.Stocks),i=this.findElem(this.__self.popup,"tables");i.html(n),this.findElem(i,"table").each(function(){e.toggleTommorrowTitleVisibility($(this))})},toggleTommorrowTitleVisibility:function(t){var e=this.getMod(t,"type");if("indexes"!==e){var n=t.find("tr:not(.inline-stocks__head)"),i=0;n.each(function(){var t=$(this).find("td").length;t>i&&(i=t)});var o="hide";(i>3&&"currency"===e||i>2&&"cash"===e)&&(o="show"),t.find(".inline-stocks__head .inline-stocks__cell:last")[o]()}},updateFunc:function(t){this.__base(t)},replaceCaps:function(t){return t.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,n){switch(e){case"c":return'<span class="b-stocks__caps">'+n+"</span>";case"d":return'<span class="b-stocks__numbers">'+n+"</span>";default:return t}})},toggleState:function(t){this.setMod(this.__self.popup,"state",t)},getId:function(){return"_stocks-1"},getInstance:function(){return window.Widget&&Widget.Framework.get("_stocks-1")},showForm:function(t){var e=this;t.preventDefault(),this.toggleMore(),$(".b-wdgt-preferences").bem("b-wdgt-preferences").show($("#wd-wrapper-"+this.getId()).bem("widget"),function(){e.data=null,e.toggleMore()})}})}),CoversAPI.prototype._init=function(){var t=this;this.params=home.getData("coversAPI.data"),(this.params.forced||this.params.settings.autoload)&&$(function(){t.load({autostart:!0}),t.sendStats("forced.show")}),$(".covers-logo").click(function(){0===t.currentStatus?(t.load({autostart:!0}),t.sendStats("logo.show")):4===t.currentStatus&&(t.stop({fromEvent:!0}),t.sendStats("logo.hide"))})},CoversAPI.prototype._setParams=function(t){this.params=t},CoversAPI.prototype._set=function(t){this.current&&this.stop(),home.covers[t.name]&&(this.current=t.name,this.currentStatus=0)},CoversAPI.prototype._getShare=function(t){var e=this;t&&!e.shareInstance&&($("body").append('<div id="covers-share"></div>'),$.getScript("//yastatic.net/share2/share.js").done(function(){e.shareInstance=new Ya.share2("covers-share",t)}))},CoversAPI.prototype.load=function(t){if(this.current&&0===this.currentStatus){if(!this.area&&!this.close){this.area=$('<div class="covers-parent"></div>');var e=!1;this.params.settings&&"white"===this.params.settings.close&&(e=!0),this.close=$('<a title="'+this.params.closeTitle+'" class="covers-close '+(e?"covers-close_white":"")+'"></a>'),$("body").append(this.area,this.close),this.close.on("click",$.proxy(function(){this.stop(),this.sendStats("close.hide")},this))}this._getShare(this.params.shareParams),$("body").addClass("covers-fade"),this.params.parent=this.area,this.currentStatus=1;var n=this;home.covers[this.current].load(this.params,function(e){n._loadHandler(e,t)})}},CoversAPI.prototype._loadHandler=function(t,e){t.status>0?(this.currentStatus=2,e.autostart&&this.start(e)):this.currentStatus=0},CoversAPI.prototype.start=function(t){if(2===this.currentStatus){this.currentStatus=3;var e=this;this.params.settings.noHide||($(".i-ua_browser_touch").length?$(".rows").css({overflowX:"hidden"}):$("body").addClass("covers-overflow"),$("body").addClass("covers-fade-on"),$(".covers-search").addClass("i-hidden")),this.params.settings.noSearchPhrase||$("input[name='text']").parents(".input").bem("input").val(this.params.text,{suggest:!1}),home.covers[e.current].start(e.params,function(n){e._startHandler(n,t)})}},CoversAPI.prototype._startHandler=function(t){this.currentStatus=t.status>0?4:0},CoversAPI.prototype.stop=function(t){if(4===this.currentStatus){this.currentStatus=5;var e=this;home.covers[this.current].stop(this.params,function(n){e.stopHandler(n,t)})}},CoversAPI.prototype.stopHandler=function(){this.area.remove(),this.close.remove(),this.area=null,this.close=null,$(".i-ua_browser_touch").length?$(".rows").css({overflowX:"visible"}):$("body").removeClass("covers-overflow"),$(".covers-search").removeClass("i-hidden"),$("body").removeClass("covers-fade covers-white_close covers-fade-on"),this.currentStatus=0},CoversAPI.prototype.sendStats=function(t){this.params.stat&&csh_ifgsid(this.params.stat+"."+t)},home.coversAPI=new CoversAPI,home.covers={},BEM.decl("videoplayer",{init:function(){return this.scope=BEM.DOM.scope,this.win=BEM.DOM.win,this.lastProgress=null,this.$html=$(BEMHTML.apply({cls:"videoplayer__wrapper",content:{tag:"iframe",cls:"videoplayer__video",attrs:this.params}})),this},show:function(){return this.scope.append(this.$html),this.scope.on("click",".videoplayer__wrapper",function(){x.amd.require("statlog",function(t){t.log("videoplayer.paranja","click")}),this.hide()}.bind(this)),this.win.on("keydown",this.changeThis(this._escHandler)),this._addCheckEndHandler(),x.amd.require("statlog",function(t){t.log("videoplayer.paranja"),t.log("videoplayer.actions.show","click")}),this},hide:function(){return this.$html.detach(),this.scope.off("click",".videoplayer__wrapper"),this.win.off("keydown",this.changeThis(this._escHandler)),this.lastProgress=null,this._removeCheckEndHandler(),x.amd.require("statlog",function(t){t.log("videoplayer.actions.hide","click")}),this},_addCheckEndHandler:function(){window.addEventListener&&window.addEventListener("message",this.changeThis(this._checkEndHandler))},_removeCheckEndHandler:function(){window.removeEventListener&&window.removeEventListener("message",this.changeThis(this._checkEndHandler))},_checkEndHandler:function(t){var e=t.data;if(e&&"status"===e.action){if(0===e.progress&&this.lastProgress>95)return x.amd.require("statlog",function(t){t.log("videoplayer.events.end","click")}),void this.hide();this.lastProgress=e.progress}},_escHandler:function(t){var e=t.keyCode||t.which;27===e&&(x.amd.require("statlog",function(t){t.log("videoplayer.events.esc","click")}),this.hide())}}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"==i)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","leftclick tap",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl("home-tabs",{onSetMod:{js:function(){var t=this;this._searchInput=this.findBlockOutside($(".suggest2-form__input"),"input"),this._popup=this.findBlockInside("popup"),this._$elems=this.elem("search"),this._searchInput.on("change",$.debounce(function(){t._updateUrls(this.val())},300)),this._popup&&this._popup.on("show",function(){x.amd.require("statlog",function(t){t.checkAndLog()}),this.afterCurrentEvent(function(){t._popup.findBlockInside("columns")})})}},_updateUrls:function(t){var e=this.params[t?"search":"href"],n=encodeURIComponent(t);this._$elems.each(function(t,i){$(i).attr("href",x.stringf(e[$(i).data("id")],n))})}}),BEM.DOM.decl("columns",{onSetMod:{js:function(){var t=this.params,e=this;this.__self.hasCSSColumnSupport()||(this.hasMod("count")?this._count=this.getMod("count"):(this._count=t.count,this.setMod("count",this._count)),this._popup=this.findBlockOutside("popup"),this._items=null,this._visibleItems=null,this._visibleItemsLen=null,this._cols=null,this._colLen=null,this._balancer=$.debounce(function(){e._updateItems()},100),this._items||(this._items=this.domElem.children()),this._getItems(),this._pushItems(),this._bindBalancer(),this._popup.on("show",this._bindBalancer),this._popup.on("hide",this._unbindBalancer))}},_getItems:function(){this._visibleItems=this._items.children(":visible").parent(),this._colLen=Math.ceil(this._visibleItems.length/this._count)},_hasChanges:function(){return this._visibleItemsLen===this._visibleItems.length?!1:(x.log("update"),this._visibleItemsLen=this._visibleItems.length,!0)},_pushItems:function(){this._cols=[];for(var t=0;t<this._count;t++)this._cols[t]=this._visibleItems.slice(t*this._colLen,(t+1)*this._colLen),this._cols[t].wrapAll('<div class="columns__col"/>');setTimeout(function(){this._popup.repaint()}.bind(this),200)},_updateItems:function(){this._getItems(),this._hasChanges()&&(this._cols.forEach(function(t){$(t).unwrap()}),this._pushItems())},_bindBalancer:function(){$(window).bind("resize",this._balancer)},_unbindBalancer:function(){$(window).unbind("resize",this._balancer)}},{hasCSSColumnSupport:function(){var t=$("<div/>")[0],e=["columnCount","MozColumnCount","WebkitColumnCount"].some(function(e){return e in t.style});return e},live:function(){return!0}}),BEM.DOM.decl("search2",{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside("input"),this.input&&this.input.setMod("no-sample-focus","true"),this.input&&this.input.on("sample-click",function(){var e=t.domElem.find("input[name='nl']");t.params.nl&&!e.length&&(e=$('<input type="hidden" name="nl" value="1"/>').insertAfter(t.input.domElem));var n=$("body").hasClass("edit-mode")||$("body").hasClass("b-page_skins-calatog");n||setTimeout(function(){t.domElem.submit()},500)})}}}),function(){var t=function(t){var e=t.charCode||t.keyCode||t.which||0,n=t.ctrlKey||t.altKey||t.metaKey,i=e>=48&&57>=e,o=e>=96&&105>=e,s=[e>=65&&90>=e,e>=1025&&1071>=e,0===e,231===e,186===e,String.fromCharCode(e).toLowerCase()!==String.fromCharCode(e).toUpperCase()].some(Boolean);return!n&&(i||o||s)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(e){var n;if(!($(".popup_visibility_visible").filter(":not(.b-topbar__popup, .suggest2)").length||(n=$(".v_sform_bg"),n.length&&"none"!==n.css("display")||$(".left-banner-opened").length))){var i,o;try{i=document.activeElement.tagName.toLowerCase(),o=document.activeElement.getAttribute("contenteditable")}catch(s){}if(t(e)&&"input"!==i&&"textarea"!==i&&!o){var r=this.elem("control")[0],a=this.val();if(a.length>0&&" "!==a.slice(-1)&&(a+=" ",this.val(a)),r.createTextRange){var u=r.createTextRange();u.collapse(!1),u.select()}else r.selectionStart&&(r.focus(),r.setSelectionRange(a.length,a.length));this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=$.browser.opera&&$.browser.version<12.1?"keypress":"keydown",e=this;this.__base(),this._ahead=this.buildAhead(),this._intent=!1,this._text=this.val(),this._preventAhead=!1,this._lastBackspace=0,this._filler="",this._hint="",this.on("change",this._onTextChange).bindTo("click",function(t){if(!this._preventAhead&&this.elem("input").is(t.target)){var n=t.pageX-this.domElem.offset().left-parseInt(this.elem("input").css("padding-left"),10),i=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();n>i&&o>n&&(this.trigger("ahead-click"),setTimeout(function(){e._fill({usage:"mouse"})},0))}}).bindTo(t,this._onKeyDown),this.elem("ahead-hint").on("focus",function(){e.elem("input").focus()})}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:!this._isPopupShown||t.ctrlKey||t.altKey||(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault()}},setAhead:function(t,e,n){return this._preventAhead?!1:n.items&&t===n.items[0]||n.val!==this.val()?this._clearAhead():(this.elem("ahead-hintholder").text(e),void(this._intent=this._showAhead(t,t+e)))},unsetAhead:function(){this._clearAhead(),this._intent=!1},onPopupShow:function(){this._isPopupShown=!0},onPopupHide:function(){this._isPopupShown=!1,this._preventAhead=!0,this._clearAhead()},_onTextChange:function(){var t=this._text.length-(this._text=this.val()).length;t>0&&this.shiftAhead(t),this._intent&&!this._intent.match("^"+BEM.blocks["i-common__string"].escapeRegExp(this.val()))&&this._clearAhead()},_fill:function(t){var e=$.extend(t,{chars:this._intent.length-this._text.length});if("string"==typeof this._intent&&e.chars>0){try{var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._text.length,this._input.dispatchEvent(n)}catch(i){var o=this.elem("control").get(0);if(this.val(this._intent),o.createTextRange){var s=o.createTextRange();s.moveEnd("character",this._text.length),s.collapse(!1),s.select()}else try{o.selectionEnd=o.selectionStart=this._text.length}catch(r){}}this.trigger("ahead-fill",e)}return e.chars>0},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},buildAhead:function(){return this._ahead=$(BEMHTML.apply({block:"input",elem:"ahead"})),BEM.DOM.before(this.elem("control"),this._ahead),this._ahead},_setAhead:function(t,e){return this.elem("ahead-filler").text(!this._preventAhead&&(this._filler=t)||""),this.elem("ahead-hint").val(!this._preventAhead&&(this._hint=e)||""),this.elem("ahead-hintholder").text(!this._preventAhead&&e||""),e},_showAhead:function(t,e){return"undefined"==typeof t&&this._clearAhead(),this._setAhead(t,e)},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){var e=this._filler.slice(0,-t);return this._setAhead(e,this._hint)}}),BEM.DOM.decl({name:"input",modName:"count",modVal:"yes"},{onSetMod:{js:function(){if(this.__base.apply(this,arguments),Lego.params.statRoot){var t=Lego.params.statRoot,e=0,n=0,i={actions:!1,effortIsCounted:!1,inputIsCleared:!1},o={effort:function(e){e?i.effortIsCounted||(cp(t+".fade.in"),i.effortIsCounted=!0,i.actions=!0):i.effortIsCounted=!1},cleared:function(){i.inputIsCleared||(cp(t+".fade.cleared"),i.inputIsCleared=!0)}};this.on("change",function(){n=this.val().length,0===n&&e?o.cleared():i.inputIsCleared=!1,o.effort(Boolean(n)),e=n
}).on("focus",function(){o.effort(Boolean(this.val().length))}),this.elem("control").one("click",function(){i.actions||cp(t+".fade.control")})}}}}),BEM.DOM.decl({name:"input",modName:"count",modVal:"yes"},{_countKeys:function(t){var e=Lego.params.statRoot;8===t.keyCode?e&&cp(e+".searchKeys.backspace"):46===t.keyCode&&e&&cp(e+".searchKeys.delete")}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("control","keydown",function(t){this.val()||this._countKeys(t)})}}),BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis(function(){this.setMod("focused","yes")._focused=!0}))}},onElemSetMod:{clear:{visibility:function(t,e,n){this.hasMod("clear","yes")&&this.toggleMod("keyboard-visibility","hidden","visible"===n)}}}}),BEM.DOM.decl("keyboard-loader",{onSetMod:{js:function(){var t=this;Lego.block["keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",function(){t.params.statOpen&&cp(t.params.statOpen)}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&t.params.statClose&&cp(t.params.statClose)})}}}),function(t,e){e.block["keyboard-loader"]=function(n){function i(n){t("body").removeClass("b-page_keyboard");var i=n?"addClass":"toggleClass",o=u.find(".b-keyboard-popup");if(o.length){if(u.find(".b-keyboard-popup__gap")[i]("i-hidden"),u.find(".b-keyboard-popup")[i]("i-hidden").hasClass("i-hidden")){c.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego");var s=e.block["b-keyboard"]._lastFocusedIn;void 0!==s&&s.focus()}else c.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(){f||(e.cp(0,70873,BEM.blocks["i-global"].param("id")+"."+(n.autoLoad?"auto":"manual")),f=!0)}function s(t){return r()[t]}function r(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function a(e,n){var i=r(),o=[];i[e]=n,t.each(i,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var u=t(document.body),c=t(window),l=this,d=t(".b-topbar__popup.popup_behavior_snap"),h=d.length?d.bem("popup"):null;l.click(function(o){o.preventDefault(),h&&h._unbindFromResize();var s=(this.className.match(/keyboard-loader_lang_(\w+)/)||["",""])[1];if(u.find(".b-keyboard")[0])i(),h&&h._bindToResize();else{var r=BEM.blocks["i-global"].param("keyboard-path"),a=[r+"b-keyboard/_keyboard.js"],l=t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",d=[r+"b-keyboard/_keyboard"+l+".css"];t.xLazyLoader({name:"b-keyboard",js:a,css:d,success:function(){e.block["b-keyboard-popup"]({lang:s,"for":n["for"]}),u.append('<div class="b-keyboard i-bem" data-bem=\'{&quot;b-keyboard&quot;: { &quot;lang&quot;:&quot;'+s+"&quot;}}'></div>"),BEM.DOM.init(t(".b-keyboard")),c.trigger("keyboardOpened.lego",{afterLoad:!0}),t(".b-keyboard").on("click",".b-keyboard__key",function(){var e,n=t("*:focus").offset();n&&(e=n.top,t(".b-keyboard-popup").offset().top<e+30&&window.scrollTo(0,e-20))})}})}}),c.bind("keyboardOpen.lego",function(){l.click()}).bind("keyboardClose.lego",i),n["for"]&&c.bind("keyboardOpened.lego",function(e,i){!(i&&i.afterLoad&&n.autoLoad)&&t(n["for"]).focus()}),c.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var n=l.find(".keyboard-loader__flag");n[0]&&("tt"===e&&(e="ru"),n.attr("src",n.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),n.storeState=n.storeState!==!1,n.storeState&&c.bind("keyboardOpened.lego",function(){a("keyboard_state","open");var e=s("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){t("body").removeClass("b-page_keyboard"),a("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){a("keyboard_lang",e)});var p="#kb"===window.location.hash;(n.autoLoad||n.storeState&&"open"===s("keyboard_state")||p)&&l.click();var f;c.bind("keyboardOpened.lego",function(){o(),t("input:focus").focus(),t("body").addClass("b-page_keyboard")})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"===t?h.push(e):d.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function i(t){r.complete(t,d,h),r[t]("error"===t?h:d),clearTimeout(a),clearTimeout(u)}function o(){d.length===p.length?i("success"):d.length+h.length===p.length&&i("error")}function s(){h.push(this.src),o()}var r,a,u,c,l=this,d=[],h=[],p=[];this.init=function(n){if(n){if(r=t.extend({},t.xLazyLoader.defaults,n),c={js:r.js,css:r.css,img:r.img},t.each(c,function(t,e){"string"==typeof e&&(e=e.split(",")),p=p.concat(e)}),!p.length)return void i("error");r.timeout&&(a=setTimeout(function(){var e=d.concat(h);t.each(p,function(n,i){-1===t.inArray(i,e)&&h.push(i)}),i("error")},r.timeout)),t.each(c,function(n,i){t.isArray(i)?t.each(i,function(t,i){e(n,i)}):"string"==typeof i&&e(n,i)})}},this.js=function(e,i){var o=t('script[src*="'+e+'"]');if(o.length)return void(o.attr("pending")?o.bind("scriptload",i):i());var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),r.setAttribute("pending",1),r.onerror=s,t(r).bind("scriptload",function(){t(this).removeAttr("pending"),i(),setTimeout(function(){t(r).unbind("scriptload")},10)});var a=!1;r.onload=r.onreadystatechange=function(){a||this.readyState&&!/loaded|complete/.test(this.readyState)||(a=!0,r.onload=r.onreadystatechange=null,t(r).trigger("scriptload"))},n.appendChild(r)},this.css=function(e,i){if(t('link[href*="'+e+'"]').length)return void i();var o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),t.browser.msie?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&i()}:t.browser.opera?o.onload=i:!function(){o&&o.sheet?i():u=setTimeout(arguments.callee,20)}(),n.appendChild(o)},this.img=function(t,e){var n=new Image;n.onload=e,n.onerror=s,n.src=t},this.disable=function(e){t("#lazy-loaded-"+e,n).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,n).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,n).remove()}}t.xLazyLoader=function(t,n){"object"==typeof t&&(n=t,t="init"),(new e)[t](n)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var n=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"flat"},{getPopupWidth:function(){var t=this._input.width();return this._input.get().hasMod("theme","normal")?t-2:t+2}}),BEM.decl({block:"suggest2-view",modName:"advanced",modVal:"yes"},{_getItemByType:function(t,e,n,i){var o=i.js,s=i.content;switch(n){case"html":o.val=t[1],s.push(e.body);break;case"bemjson":o.val=t[1],s.push.apply(s,Array.isArray(e.bemjson)?e.bemjson:[e.bemjson])}return this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){var e=this;e.__base.apply(e,arguments);var n=e.elem("link");return t||"_self"===n.attr("target")?function(){e._locationChange(n.attr("href"))}:void 0},_locationChange:function(t){window.location=t},valOnSelect:function(){return!1}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._boundResizeHandler=this._resizeHandler.bind(this),this.__self._bindToWinResize(this._boundResizeHandler)},_resizeHandler:function(){this._popup.width(this.getPopupWidth())},destruct:function(){this.__self._unbindFromWinResize(this._boundResizeHandler),this._boundResizeHandler=null,this.__base.apply(this,arguments)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{_minWidth:0,_maxWidth:0,_resizeHandler:function(){this.__base.apply(this),this.hasMod("theme","large")&&this.adjustView()},_onShow:function(){this.__base.apply(this),this.hasMod("theme","large")&&this._applyMetricsToContent()},adjustView:function(){this.__base.apply(this,arguments);var t=this.getMetrics(),e=t.minWidth,n=t.maxWidth,i=!1;return e!==this._minWidth&&(this._minWidth=e,i=!0),n!==this._maxWidth&&(this._maxWidth=n,i=!0),i&&this._popup.isShown()&&this._applyMetricsToContent(),t},_applyMetricsToContent:function(){var t=this.findElem("content");this._minWidth&&t.css("min-width",this._minWidth),this._maxWidth&&t.css("max-width",this._maxWidth)}}),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"stats",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._bindCounters()}}},_prepareCounterStats:function(t){var e=[];try{e.push(t.since_last_change),e.push(t.since_first_change),e.push(t.user_input.length),e.push(t.ratio.actionsCount),e.push(t.path.index),e.push("button_by_mouse"===t.path.submit?"1":"0"),e.push("edit"===t.path.state?"1":"0")}catch(n){return""}return e.join(",")},_bindCounters:function(){var t,e=this,n=e.findBlockInside("suggest2"),i=n.getCounter();i&&i.on("submit",function(n,i){var o;t&&t.remove(),o=e._prepareCounterStats(i),o&&(t=$("<input>",{type:"hidden",name:"csg",value:o}),e.domElem.append(t))})}})}(),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"prefetch",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.append('<input type="hidden" name="suggest_reqid" value="'+BEM.blocks["suggest2-counter"]._generateReqID()+'">'),this._bindPrefetch()}}},_prefetchQuery:function(t){var e=this._getParams(t),n=this;n._prefetchStarted[t]||(n._prefetchStarted[t]=!0,$.ajax({url:n.domElem.attr("action")+n._serializeFormParams(e),success:function(){n._prefetchLoaded[t]=!0},cache:!0}))},_bindPrefetch:function(){var t=this,e=!1;t._input=t.findBlockInside("input"),t._prefetchStarted={},t._prefetchLoaded={};try{if(window.sessionStorage.setItem("test","1"),"1"!==window.sessionStorage.getItem("test"))return;window.sessionStorage.removeItem("test")}catch(n){return}t.domElem.on("submit",function(){var n=t._input.val();t._prefetchStarted[n]&&(e||(e=!0,t.domElem.append('<input type="hidden" name="prefetch" value="1">'),t._prefetchLoaded[n]||t.domElem.append('<input type="hidden" name="unfinished" value="1">')));try{window.sessionStorage.setItem("x",(new Date).getTime())}catch(i){}}),t.findBlockInside("suggest2").getModel().on("response",function(e,n){var i=n&&n.data,o=i&&i.meta&&"yes"===i.meta.instant;if(o&&i.meta.prefetch)for(var s=0,r=i.meta.prefetch.length;r>s;++s)t._prefetchQuery(i.meta.prefetch[s])})},_getParams:function(t){var e=this.domElem.find("input"),n=[];return e.each(function(){var e=$(this),i=e.prop("name");i&&n.push({name:e.prop("name"),value:"text"===i?t:e.val()})}),n.push({name:"prefetch",value:1}),n},_serializeFormParams:function(t){for(var e=[],n=0;n<t.length;++n)e.push(encodeURIComponent(t[n].name)+"="+encodeURIComponent(t[n].value));return"?"+e.join("&")}})}(),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(n){n.setMod(t,e)})}},_onSampleClick:function(t){var e=t.target.domElem,n=this.elemParams(e);this.val("val"in n?n.val:e.text(),{source:"sample"})}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnBlockInsideEvent("click","link",function(t){-1!==this.elem("sample").index(t.block.domElem)&&this._onSampleClick(t)})}}),function(){"use strict";var t={SPACE:32,ENTER:13};BEM.DOM.decl("input",{_onSampleClick:function(t){x.log("_onSampleClick");var e=t.target.domElem,n=this.elemParams(e);this.val("val"in n?n.val:e.text(),{source:"sample"}),this.hasMod("no-sample-focus")||(this.noSuggest=!0,this.setMod("focused","yes"),this.noSuggest=!1),this.trigger("sample-click")},_onSampleKeyDown:function(e){return e.which===t.SPACE||e.which===t.ENTER?(this._onSampleClick({target:{domElem:$(e.target).closest(".link")}}),!1):void 0}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("sample","keydown",function(t){return this._onSampleKeyDown(t)})}})}(),BEM.HTML.decl("b-link",{onBlock:function(t){t.tag("a").attr("href",t.param("url"));for(var e,n=["title","target"];e=n.pop();)t.param(e)&&t.attr(e,t.param(e))}}),BEM.DOM.decl("dist-link",{onSetMod:{js:function(){this.distStat=home.ds.decl(this.params.dsParts),this.bindTo("link","leftclick tap",function(){return this._action()})}},_action:function(){return!0}}),BEM.DOM.decl({block:"dist-link",modName:"install",modVal:"inline"},{_action:function(){this.__base();var t=this,e=this.params;return this.distStat.send("click"),this._inlineInstallInstance||(this._inlineInstallInstance=BEM.create("i-inline-install",{url:e.inlineLink,statPath:e.statPath+".inline",callbacks:{yes:function(){t.distStat.send("install")},no:function(){t.distStat.send("error")}},paranja:e.paranja,bannerid:e.bannerid,metrika:e.metrika}).init()),this._inlineInstallInstance.request(),!1}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"expand",modVal:"simple"},{afterShow:function(){var t=this.domElem,e=this;this._addBg(),t.stop(!0).css(this._getTransitionParams()),setTimeout(function(){t.addClass("popup_expand_transition-on").css(e._getClearParams()),setTimeout(function(){e._addContent()},e.params.duration)},0),(new Image).src=this.params.banner.showStat,this._addResizeEvent()},beforeHide:function(t){var e=this.domElem,n=this;e.stop(!0,!0).css(this._getTransitionParams()),setTimeout(function(){e.css(n._getClearParams()).removeClass("popup_expand_transition-on"),n._removeContent(),t()},this.params.duration),(new Image).src=this.params.banner.closeStat},_moveToContainer:function(){this._inContainer=!0},_getBannerCoords:function(){return $(".banner-iframe")[0].getBoundingClientRect()},_getPopupCoords:function(){return this.domElem[0].getBoundingClientRect()},_addBg:function(){$(".banner__expand_popup-inner",this.domElem).css({"background-color":this.params.banner.bg})},_addResizeEvent:function(){var t=this,e=function(){t.hide(),$(window).unbind("resize orientationchange",e)};$(window).bind("resize orientationchange",e)},_addContent:function(){var t=$(".banner__expand_popup-inner",this.domElem),e=location.protocol||"http:",n="100%",i="100%",o=this.params.banner.src,s=this.params.banner.vars,r="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+e+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+n+" height="+i+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+o+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+s+'" ><EMBED src="'+o+'"  flashvars="'+s+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+n+" HEIGHT="+i+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+e+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>';t.children().length||t.append(r)},_removeContent:function(){this.params.banner.eraseContent&&$(".banner__expand_popup-inner",this.domElem).html("")},_getTransitionParams:function(){var t=this._getBannerCoords(),e=this._getPopupCoords(),n=t.height/e.height,i=t.left+t.width/2-(e.left+e.width/2),o=t.top+t.height/2-(e.top+e.height/2);return{transform:"translate3d("+i+"px, "+o+"px, 0) scale("+n+","+n+")",opacity:0}},_getClearParams:function(){return{transform:"translate3d(0, 0, 0) scale(1, 1)",opacity:1}}});var AwapsJsonAPI={Json:{}};AwapsJsonAPI.Json=function(t,e,n,i,o,s,r,a){"undefined"==typeof a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=e,this.h=n;for(var u=String(n);u.length<4;)u="0"+u;for(u=e+u;u.length<8;)u="0"+u;o||(o="awaps.yandex.ru"),i=i?"&charset="+i:"",s=s?"&subsection="+s:"",this.object_name=r?r:"aw_json";var c=Math.round(65535*Math.random());this.json_awaps_url=a+"//"+o+"/10/"+t+"/"+u+".?charset="+i+"&callback="+this.object_name+".awaps_callback&rnd="+c+i+s,this.gif_code='<a href="'+a+"//"+o+"/1/"+t+"/"+u+'.gif" target="_blank"  ><img src="'+a+"//"+o+"/0/"+t+"/"+u+".gif?rnd="+c+'" width="'+e+'" height="'+n+'" border="0" ></A>',this.awaps_div_code='<div id="awaps_ad_div" width="'+e+'" height="'+n+'"></div>'},AwapsJsonAPI.Json.prototype.setID=function(t){t&&(this.html_cont_id=document.getElementById(t))},AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},AwapsJsonAPI.Json.prototype.callJson=function(t){if(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=t,e.appendChild(n)}},AwapsJsonAPI.Json.prototype.showAwapsJson=function(t){var e=t.media[0],n=this.getHTML(e);this.html_cont_id&&(this.html_cont_id.innerHTML=n)},AwapsJsonAPI.Json.prototype.awaps_callback=function(t){var e=t.media,n=e&&e[0]&&(e[0].bnImg||e[0].bnHtm);n&&this.showAwapsJson(t)},AwapsJsonAPI.Json.prototype.getHTML=function(t){var e=function(t){var e=Math.round(65535*Math.random()),n=new Image,i=String(t).replace("%aw_random%",e);n.src=i};if(t.bnCounts&&t.bnCounts.length>0)for(var n=0,i=t.bnCounts.length;i>n;n++)e(t.bnCounts[n]);else t.bnCount&&e(t.bnCount);var o=t.iframe_src||t.small_swiffy_iframe_src;if(o)return'<iframe class="banner-iframe" src="'+o+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"  width="728" height="90"></iframe>';if(t.bnHtm)return t.bnHtm;var s="";if(this.checkFlash(t)){var r=location.protocol||"http:";0===r.toLowerCase().indexOf("https")&&(t.bnFlash+="&cache=1"),s="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+r+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+t.bnW+" height="+t.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+t.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+t.flashvars+'" ><EMBED src="'+t.bnFlash+'"  flashvars="'+t.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+t.bnW+" HEIGHT="+t.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+r+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'}else s='<img src="'+t.bnImg+'" width="'+t.bnW+'" height="'+t.bnH+'" border=0 alt="'+t.bnAlt+'" >',t.gif_tizer||(s='<a href="'+t.bnHref+'" target=_blank >'+s+"</a>");return s},AwapsJsonAPI.Json.prototype.checkFlash=function(t){var e=new CAWBrowser,n=e.flash>=t.flashV&&(t.bnFlash||t.swf_big_show_url);return t.minFlashVersion&&e.full_version&&!new home.Version(e.full_version).isGreaterOrEqual(new home.Version(t.minFlashVersion))&&(n=!1),n},AwapsJsonAPI.Json.prototype.expand=function(t){if(t.swf_big_show_url&&($("#banner").append('<div class="banner__expand_innerclick"></div>'),$(".banner__expand_innerclick").click(function(){window.open(t.click_url,"_blank")}),this.checkFlash(t))){$("#banner").addClass("banner__expand").append('<div class="banner__expand_inner"></div>');var e=$(".banner__expand_popup"),n=e?e.bem("popup"):null;home.expandableBannerAPI={close:function(){n&&n.hide()}},$(".banner__expand_inner").click(function(){if(n){var i=$(window).height(),o=$(window).width(),s=Math.min(1200,Math.floor(o-t._gapW)),r=Math.floor(9*s/16);return r>i-t._gapH&&(s=s*(i-t._gapH)/r,r=i-t._gapH),640>s||360>r?void window.open(t.click_url,"_blank"):($(".banner__expand_popup-inner",e).css({width:s,height:r}),n.show(),!1)}$(window).trigger("bannerpopup.show")})}};var rootDomain=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain=rootDomain}catch(e){}BEM.DOM.decl("widgets",{onSetMod:{js:function(){window.Widget&&($(".i-ua_browser_msie8").length&&(this.oldIe=!0),this.history=[],this.historyAcceptedPosition=0,this.personalSettings=this.params.settings,this.initWapi(),this.channel("widget").on("abort-add",this.changeThis(function(t,e){this.onAbortAdd(e)})),this.channel("widget").on("commit",this.changeThis(function(t,e){this.commit(e)})),this.channel("widget").on("tuned",this.changeThis(function(t,e){this.history.push(e)})),this.bindToWin("beforeunload",function(){return this.history.length!==this.historyAcceptedPosition&&this.hasMod("drag")?"\n"+home.l10n("informationsMessages.settingsNotSaved")+"\n":void 0}),this.params.editMode&&(this.collectWidgetsOnPage(),this.setMod("drag","on")),this.params.add&&this.isNewPattern()&&(this.collectWidgetsOnPage(),this.addWidget(this.params.add)))},drag:function(t,e,n){e?n||(Widget.Framework.setEdit(!0),this.recalculateWidgetCoords(),this.getParanja().appendTo(this.domElem[0]),this.oldIe||this.bindDrag(),this.processHistoryState()):(Widget.Framework.setEdit(!1),this.getParanja().detach(),this.unbindDrag())}},initWapi:function(){var t=this.params,e=t.prototype,n={wauth:t.auth,layoutFixed:!t.editMode,addUrl:"/adddata/",formUrl:"/form.html?json=1",patternId:t.patternid,yu:t.yu,domain:t.domain,locale:t.locale,prototype:e,widgetStyle:t.widgetStyle,showPreferencesHandler:this.changeThis(this.showPrefs),gsid:this.params.gsid};e&&(n[e+"_prototype"]=e),t.geoid&&(n.geoid=Number(t.geoid)),Widget.Init(n)},showPrefs:function(t){this.findBlockOutside(t.$(),"widget").showPrefs()},showError:function(t){this.channel("catalog").trigger("error",t)},hideError:function(){this.channel("catalog").trigger("error")},collectWidgetsOnPage:function(){var t=Widget.Framework.all(),e={};t.forEach(function(t){t.params.is_default&&(e[t.classId]=!0)},this),this.widgetsOnPage=e},getMoved:function(){var t={};return this.history.forEach(function(e){if("drag"===e.type&&e.from!==e.to){var n=e.id;t[n]?t[n].from===e.to?t[n]=null:t[n].to=e.to:t[n]={from:e.from,to:e.to}}},this),t},collectData:function(){var t=Widget.Framework.all(),e=this.getMoved(),n=t.map(function(t){return t.params.removed?{id:t.id,removed:!0}:(t.markChanged(t.id in e),{id:t.id,coord:t.params.position,usrCh:t.params.usrCh})},this);return this.personalSettings=$.extend(!0,{},this.personalSettings),delete this.personalSettings.newpattern,{save:JSON.stringify({psettings:this.personalSettings,widgets:n})}},save:function(){var t=this.collectData();this.wsave(t,!0)},revert:function(){try{this.historyAcceptedPosition=this.history.length,window.location.href="/?ncrnd="+Math.random()}catch(t){}},reset:function(){window.confirm(home.l10n("informationsMessages.beforeReset"))&&this.wsave({"delete":1})},wsave:function(t,e,n){$.ajax({url:"/wsave",data:$.extend(t,{wauth:this.params.auth||this.params.wpAuth,yu:this.params.yu,prototype:this.params.prototype}),traditional:!0,type:"post",dataType:"json",success:this.changeThis(function(t){if(n||(this.historyAcceptedPosition=this.history.length),"ok"===t.result){if(!e){var i=window.location;setTimeout(function(){window.location="//"+i.host},500)}}else this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})})},updatePersonalSettings:function(t,e){null===e?delete this.personalSettings[t]:this.personalSettings[t]=e,this.wsave({save:JSON.stringify({psettings:this.personalSettings})},!0,!0)},addWidget:function(t){var e=$("<div></div>");Widget.Framework.add(t,e,{success:this.changeThis(function(t){var n;n=t.params.smart&&t.params.defplace&&t.params.defplace.match(/\d:\d/)&&this.checkInsertPosition(t.params.defplace)?t.params.defplace:this.getInsertPosition(),this.insertAt(n,e),t.params.position=n,t.markChanged(!t.params.defplace||t.params.defplace!==n||t.classId in this.widgetsOnPage),t.init(),this.recalculateWidgetCoords();var i=this.findBlockInside(e,"widget");this.hasMod("drag")||this.setMod("drag","add"),this.findBlocksInside({block:"widget",modName:"state",modVal:"add"}).forEach(function(t){t.accept()});var o=i.domElem.offset();window.scrollTo(0,o.top),i.setMod("state","add"),this.history.push({type:"beforeAdd",elem:i}),t.params.open_settings_on_add&&1===t.params.havePrefsFrom&&this.showPrefs(t)}),error:this.changeThis(function(){this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})})},onAbortAdd:function(){},commit:function(){this.save()},processHistoryState:function(){var t=window.location.hash,e=t.match(/^#open=(.+)/);if(e&&e[1])for(var n=this.findBlocksInside("widget"),i=0;i<n.length;i++)if(0===n[i].getId().indexOf(e[1]))return void n[i].showPrefs();if(window.history&&history.replaceState){var o=location.toString().replace(/([?&])add=(?:[^&]+)(&)?/,function(t,e,n){return"?"===e&&n?"?":n||""});history.replaceState(null,null,o)}else window.location.hash="m"+this.params.patternid},isNewPattern:function(){var t=window.location.hash;return t!=="#m"+this.params.patternid},bindDrag:function(){var t,e,n;window.PointerEvent?(t="pointerdown",e="pointermove",n="pointerup pointercancel"):window.navigator.msPointerEnabled?(t="MSPointerDown",e="MSPointerMove",n="MSPointerUp MSPointerCancel"):void 0!==window.ontouchstart?(t="touchstart",e="touchmove",n="touchend touchcancel"):(t="mousedown",e="mousemove",n="mouseup"),this.bindToDoc(t,function(t){var e=$(t.target).closest(".widget");if(e.length&&$(t.target).closest(".widget__drag").length&&!this.dragItem&&("mousedown"!==t.type||1===t.which)){var n=e.width(),i=e.height(),o=e.offset(),s=this.getDragPlace().show(),r=home.getTouchEvent(t);return s.css({height:e.outerHeight()+parseInt(e.css("marginBottom"),10)}),e.before(s).css({position:"absolute",left:o.left,top:o.top,width:n,height:i,"z-index":10,"margin-top":0,"box-shadow":"0 0 10px #aaa"}),this.dragWidth=e.outerWidth(),this.dragItem=e.appendTo("body"),this.dragPos={x:o.left-r.x,y:o.top-r.y},this.mouseY=r.y,this.widgetHeightHalf=i/2,this.recalculateParams(),this.placeRowIndex=s.index(),this.placeColumnIndex=this.getColumnFromChild(s).index,this.scrollAnimation=this.changeThis(function(){this.scroll(),this.scrollAnimation&&window.requestAnimationFrame(this.scrollAnimation)}),this.scrollAnimation(),!1}}),this.bindToDoc(e,function(t){if(this.dragItem){if("mousemove"===t.type&&1!==t.which)return this.onMouseUp();var e=home.getTouchEvent(t),n=$(".rows"),i=n.width(),o=n.height();this.dragPos.x+e.x+this.dragWidth>i&&(e.x=i-this.dragWidth-this.dragPos.x),this.dragPos.x+e.x<0&&(e.x=-this.dragPos.x),this.dragPos.y+e.y>o&&(e.y=o-this.dragPos.y),this.mouseY=e.y,this.dragItem.css({left:this.dragPos.x+e.x,top:this.dragPos.y+e.y});var s=this.getColumn(e.x,e.y);if(s){var r=s.widgets,a=this.getDragPlace();if(r.length){if(s.index<3&&r[0].elem[0]!==this.dragItem[0])return;for(var u,c=0,l=r.length,d=this.dragPos.y+e.y+this.widgetHeightHalf;l>c&&d>r[c].center;)c++;u=r[0].elem.index()+c,(u!==this.placeRowIndex||s.index!==this.placeColumnIndex)&&(this.placeRowIndex=u,this.placeColumnIndex=s.index,0===c?a.insertBefore(r[0].elem):a.insertAfter(r[c-1].elem))}else a.appendTo(s.elems);return!1}}}),this.bindToDoc(n,this.onMouseUp),this.dragEvents=t+" "+e+" "+n},unbindDrag:function(){this.unbindFromDoc(this.dragEvents)},scroll:function(){var t,e=$(window),n=e.height(),i=e.scrollTop(),o=.2*n,s=20,r=0;this.mouseY&&(t=this.mouseY-i,o>t?r+=t-o:t>n-o&&(r+=o-n+t),i+=r*s/o,r&&i>0&&i+n<$(document).height()&&e.scrollTop(i))},onMouseUp:function(){if(this.dragItem){var t=this.elem("drag-place"),e=this.dragItem;t.before(this.dragItem).hide(),this.dragItem.attr("style",""),this.dragItem=this.dragPos=null;var n=this.findBlockOn(e,"widget"),i=n.getInstance(),o=i.params.position;return this.recalculateWidgetCoords(),i.params.position!==o&&this.commit({type:"drag",id:n.getId(),from:o,to:i.params.position}),this.mouseY=0,this.scrollAnimation=null,$(window).trigger("DragEnd"),!1}},checkInsertPosition:function(t){t=t.split(":");var e=Number(t[0]),n=this.elem("col","td",e).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),i=n.length;return 3>e&&i?!1:!0},getColumn:function(t,e){for(var n,i=-1,o=0;o<this.colParams.length;o++){var s=this.colParams[o],r=t<s.left?s.left-t:t>s.right?t-s.right:0,a=e<s.top?s.top-e:e>s.bottom?e-s.bottom:0,u=Math.max(r,a);(i>u||-1===i)&&(i=u,n=s)}return n},getColumnFromChild:function(t){for(var e=t.closest(".widgets__col"),n=0;n<this.colParams.length;n++){var i=this.colParams[n];if(i.elems.is(e))return i}return void 0},getColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").map(function(){var t=$(this),e=t.offset();return{elem:t,center:e.top+t.height()/2}}).toArray()},getAllColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes)").map(function(){return{elem:$(this)}}).toArray()},getDragPlace:function(){return this.dragPlace||($(this.domElem[0]).append('<div class="widgets__drag-place"></div>'),this.dropElemCache("drag-place"),this.dragPlace=this.elem("drag-place")),this.dragPlace},getInsertPosition:function(){var t,e,n=-1;return[3,4,5].forEach(function(i){var o,s=this.elem("col","td",i).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),r=s.length;o=s.reduce(function(t,e){return t+$(e).height()},0),(-1===n||n>o)&&(n=o,t=i,e=r+1)},this),t+":"+e},getParanja:function(){return this.paranja||(this.paranja=$('<div class="widgets__paranja"></div>')),this.paranja},getWidgetById:function(t){return this.findBlockOn($("#wd-wrapper-"+t),"widget")},getWidgets:function(){if(!this.widgets){var t=this.elem("col");this.widgets=this.findBlocksInside(t,"widget")}return this.widgets},recalculateParams:function(t){return this.colParams=[1,2,3,4,5].map(function(e){var n=this.elem("col","td",e),i=n.offset();return i.index=e,i.elems=n,i.height=n.height(),i.bottom=i.top+i.height,i.width=n.width(),i.right=i.left+i.width,i.widgets=t?this.getAllColumnWidgets(n):this.getColumnWidgets(n),i},this),this},recalculateWidgetCoords:function(){this.recalculateParams(!0),this.colParams.forEach(function(t,e){t.widgets.forEach(function(t,n){var i=this.findBlockOn(t.elem,"widget").getInstance();i.params.position=e+1+":"+(n+1)},this)},this)},insertAt:function(t,e){t=t.split(":");var n=this.elem("col","td",t[0]),i=n.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)"),o=i.length,s=Number(t[1])-1;o?0===s?$(i[0]).before(e):(s>o&&(s=o),$(i[s-1]).after(e)):n.append(e)}}),BEM.DOM.decl("widget",{onSetMod:{js:function(){this.tuned=!1,this.createControl(),this.listenToXiva(),this.bindTo("mouseenter",this.changeThis(function(){this.setMod("hovered","yes")})),this.bindTo("mouseleave",this.changeThis(function(){this.delMod("hovered")})),this.channel("widget").on("hidePreferences",this.onHidePreferences,this)},hovered:{yes:function(){},"":function(){}},drag:{on:function(){this.createDrag(),this.getInstance().stopAutoReload()},"":function(){this.getInstance().queueAutoReload()}},removed:function(t,e){var n=this.getInstance(),i="yes"===e;n&&(n.params.removed=i),this.channel("widget").trigger("commit",{type:i?"remove":"recover",id:this.getId()}),i?this.getInstance().stopAutoReload():this.getInstance().queueAutoReload()},state:{add:function(){this.getSaveButtons().appendTo(this.domElem),this.setMod("drag","on"),this.getInstance().stopAutoReload(),this.bindToWin("widgetLoaded",function(t){t.id===this.getId()&&this.elem("accept").focus()
})},remove:function(){var t=this.__self.getRmPopup(),e=this.changeThis(function(){this.setMod("removed","yes")}),n=this.changeThis(function(){this.delMod("state")});t.show(this,e,n)},"":function(){this.elem("buttons").detach(),this.getInstance().queueAutoReload(),this.unbindFromWin("widgetLoaded")}}},destruct:function(){this.channel("widget").un("hidePreferences",this.onHidePreferences,this),this.__base.apply(this,arguments)},onHidePreferences:function(t,e){this===e.elem&&this.hasMod("state","add")&&!this.tuned&&this.abortAdd()},createControl:function(){if(!this.control){var t,e,n,i,o=this.getInstance(),s={};if(o)s=o.params,i=$(".widget[id*="+s.intclassid+"]:visible").length>1,t=!s.is_default||s.default_removable||i,e=!s.is_default&&s.isWidgetWorkNormal,n=s.havePrefsFrom&&s.isWidgetWorkNormal;else{var r=this.getId();n="_afisha"!==r&&"_teaser"!==r&&"_geo"!==r,s.prefsUrl="/?edit=1#open="+this.params.id}this.control=$(BEMHTML.apply({block:"widget",elem:"control",content:[n?{elem:"control-icon",href:s.prefsUrl,icon:"widget-prefs",cls:"widget__prefs",attrs:{title:home.l10n("widgetcontrol.setup")}}:"",e?{elem:"control-icon",icon:"widget-share",cls:"widget__share",attrs:{title:home.l10n("widgetcontrol.share")}}:"",{elem:"control-icon",icon:"widget-rm",cls:"widget__remove"+(t?"":" widget__remove-shy"),attrs:{title:home.l10n("widgetcontrol.delete")}}]})),this.domElem.append(this.control),this.bindTo("remove","click",this.remove),this.bindTo("share","click",this.share),this.bindTo("prefs","click",this.showPrefs)}},createDrag:function(){return this.elem("drag").length||(this.domElem.append('<div class="widget__drag"></div>'),this.dropElemCache("drag")),this.elem("drag")},getInstance:function(){return this.instance||(this.instance=Widget.Framework.getByWrapperId(this.domElem.attr("id"))),this.instance},getId:function(){return this.params.id||this.getInstance().id},markChanged:function(t,e){var n=this.getInstance();n&&n.markChanged(t,e),e&&(this.tuned=!0,this.channel("widget").trigger("tuned",{type:"tuned",elem:this}))},remove:function(){this.hasMod("drag","on")?this.setMod("removed","yes"):this.setMod("state","remove")},share:function(){this.__self.queryShare(this)},showPrefs:function(){return this.hasMod("mode","plain")?void 0:(this.__self.queryPrefs(this),!1)},accept:function(){this.channel("widget").trigger("commit",{type:"add",id:this.getId()}),this.delMod("state")},getSaveButtons:function(){var t=this.elem("buttons");return t.length||(this.dropElemCache("buttons"),t=$(BEMHTML.apply({block:"widget",elem:"buttons",content:[{cls:"buttons-line buttons-line_borders_horizontal",content:[{block:"button",mods:{size:"m"},cls:"widget__reject",content:home.l10n("widgetbaloon.cancel")},{block:"button",mods:{theme:"action",size:"m"},cls:"widget__accept",content:home.l10n("widgetbaloon.keep")}]},this.hasMod("yandex")?"":{elem:"warn",content:home.l10n("securityMessages.noYandexWidgetAddedA")}]}))),t},abortAdd:function(){var t=this.getInstance();t&&(t.params.removed=!0),this.channel("widget").trigger("abort-add",{elem:this}),this.destruct()},listenToXiva:function(){var t=this.getInstance();this.params.xivas&&t&&t.params.rebind&&this.params.xivas.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,this.changeThis(function(){this.reloading||(this.reloading=!0,this.getInstance().iReload(this.changeThis(function(){this.reloading=!1})))}))},this)}},{live:function(){return this.liveInitOnEvent("mouseover",function(){this.createControl(),this.afterCurrentEvent(function(){this.setMod("hovered","yes")})}),this.liveBindTo("force-remove","click",function(){this.setMod("removed","yes")}),this.liveBindTo("accept","click",function(){this.accept()}),this.liveBindTo("reject","click",function(){this.abortAdd()}),!1},queryPrefs:function(t){var e=this.getPrefsPopup();e.show(t,function(){this.getInstance().reload()})},queryShare:function(t){var e=t.getInstance();e&&this.getSharePopup().show(e)},getRmPopup:function(){return this.rmPopup||(this.rmPopup=$(".b-wdgt-remove").bem("b-wdgt-remove")),this.rmPopup},getSharePopup:function(){return this.sharePopup||(this.sharePopup=$(".b-wdgt-share").bem("b-wdgt-share")),this.sharePopup},getPrefsPopup:function(){return this.prefsPopup||(this.prefsPopup=$(".b-wdgt-preferences").bem("b-wdgt-preferences")),this.prefsPopup}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"on"},{_afterSetMod:function(t,e){this.__base.apply(this,arguments),"drag"===t&&"on"===e&&(this.getWidgets().forEach(function(t){t.setMod("drag","on")}),this.bindToEvents(),this.eventsToUndo=this.history.filter(function(t){return"remove"===t.type}).length)},onSetMod:{drag:{"":function(){this.__base.apply(this,arguments),this.getWidgets().forEach(function(t){t.delMod("drag")}),this.channel("catalog").trigger("hide"),this.unbindFromEvents()}}},commit:function(t){"recover"!==t.type&&this.history.push(t),"remove"===t.type&&this.toggleUndoButton(++this.eventsToUndo)},undo:function(){for(var t;this.history.length&&(!t||"remove"!==t.type);)t=this.history.pop();this.toggleUndoButton(--this.eventsToUndo);var e=this.getWidgetById(t.id),n=e.getInstance().params;this.checkInsertPosition(n.position)?e.setMod("removed"):(e.markChanged(!0),this.insertAt(this.getInsertPosition(),e.domElem),e.delMod("removed"),this.recalculateWidgetCoords())},save:function(){if(this.history.length){var t=this.collectData();this.wsave(t)}else{var e=window.location;window.location="//"+e.host}},revert:function(){this.__base.apply(this,arguments),this.delMod("drag")},toggleUndoButton:function(t){this.channel("catalog").trigger("toggleUndo",t)},bindToEvents:function(){this.channel("catalog").on("save",this.save,this).on("revert",this.revert,this).on("reset",this.reset,this).on("undo",this.undo,this).on("add",function(t,e){this.addWidget(e)},this)},unbindFromEvents:function(){this.channel("catalog").un("save revert reset undo add")}}),BEM.DOM.decl("catalog",{onSetMod:{js:function(){this.channel("catalog").on("hide",this.hide,this),this.channel("catalog").on("show",this.show,this),this.channel("catalog").on("toggleUndo",this.toggleUndo,this),this.channel("catalog").on("error",this.error,this),this.hasMod("hidden")||this.show()},state:function(t,e){["add","save"].forEach(function(t){this.findBlockOn(t,"button").setMod("disabled",e?"yes":"no")},this),$("body").css({overflow:e?"hidden":""}),e&&(window.wg={addWidget:this.changeThis(function(t){return this.delMod("state"),this.channel("catalog").trigger("add",t),!1})})}},hide:function(){this.setMod("hidden","yes")},show:function(){this.delMod("hidden")},toggleUndo:function(t,e){this.findBlockOn("undo","button").setMod("visible",e?"":"no")},error:function(t,e){e?this.elem("error").html(e).show():this.elem("error").hide()},_createCatalog:function(){var t=this.elem("panel");return t.length||(this.dropElemCache("panel"),t=$(BEMHTML.apply({block:"catalog",elem:"panel",content:[{block:"spin2",mods:{progress:"yes"}},{tag:"iframe",elem:"frame",attrs:{src:this.params.url,frameborder:0}},{elem:"close",cls:"b-ico-widget-rm"}]})),t.appendTo(this.domElem)),t}},{live:function(){return this.liveBindTo("add","click",function(){this._createCatalog(),this.afterCurrentEvent(function(){this.setMod("state","opened")})}),this.liveBindTo("undo","click",this._getEmitFunction("undo")),this.liveBindTo("revert","click",this._getEmitFunction("revert")),this.liveBindTo("reset","click",this._getEmitFunction("reset")),this.liveBindTo("save","click",this._getEmitFunction("save")),this.liveBindTo("close","click",function(){this.delMod("state")}),!1},_getEmitFunction:function(t){return function(){this.channel("catalog").trigger(t)}}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"add"},{onAbortAdd:function(t){this.showReturnButton(t.elem.domElem),this.delMod("drag")},commit:function(t){if("drag"!==t.type)if("add"===t.type){var e=this.getWidgetById(t.id);this.save(),this.showReturnButton(e.domElem),this.delMod("drag"),e.delMod("drag")}else this.__base(t)},showReturnButton:function(t){if(this.params.retpath){var e=this.elem("button");e.length||(this.dropElemCache("button"),e=$(BEMHTML.apply({block:"button",mods:{theme:"normal",size:"m"},cls:"widgets__return",url:this.params.retpath,content:home.l10n("catalog.returnToCatalog")}))),e.insertAfter(t).show()}}}),BEM.DOM.decl("w-rss",{onSetMod:{js:function(){var t=this,e=this.domElem,n=this.params.feedID,i=this.params.newsTimestamp,o=e.find(".w-rss__list"),s=e.parent().parent().find("h2.b-widget__title,.widget__title"),r=e.find(".w-rss__gradient"),a=e.find(".w-rss__gradient-up"),u=e.find(".w-rss__informer"),c=e.parent().find(".w-rss__arrow_type_up"),l=e.parent().find(".w-rss__arrow_type_down"),d=0===$(".i-ua_browser_touch").length,h=0,p=0,f=(new Date).getTime(),m=(new Date).getTime(),g=3e4,_=3e4,v=250,b=!1,y=!0,w=function(t,e){var n="up"===t?c:l,i="w-rss__arrow_hovered-"+("up"===t?"up":"down")+"_yes";e&&!n.get(0).clickable?(n.get(0).clickable=!0,n.css({cursor:"pointer"}),n.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup").bind("click",function(){$.browser.safari&&window.getSelection&&window.getSelection().empty();try{Lego.c("stred/pid=132/cid=71588/path="+C.widget.id+"."+t)}catch(e){}O.scroll(t)}),d&&n.bind("mouseenter",function(){n.addClass(i)}).bind("mouseleave",function(){clearTimeout(p),clearInterval(h),n.removeClass(i)}).bind("mousedown",function(){return p=setTimeout(function(){clearInterval(h),h=setInterval(function(){O.scroll(t)},250)},400),$.browser.opera?!1:void 0}).bind("mouseup",function(){clearTimeout(p),clearInterval(h)})):!e&&n.get(0).clickable&&(n.get(0).clickable=!1,n.removeClass(i),n.css({cursor:"default"}),clearTimeout(p),clearInterval(h),n.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup"))},x=100,k=!1,E=[],M=[],S=function(t){return window.wg&&wg.isColumnWide?!!wg.isColumnWide(t):1==t},I=function(t){return window.wg&&wg.isColumnNarrow?wg.isColumnNarrow(t):2==t},C=function(){var t,n=(e.closest(".b-widget-data").attr("id")+"").substr(3),i=Widget.Framework.get(n),o=i.params.position.split(":")[0];return t=e.hasClass("w-rss_type_text-img")?"text-img":e.hasClass("w-rss_type_magazine")?"magazine":"text",{widget:i,col:o,layout:S(o)?"horiz":"vert",mode:{compact:2==i._prefs.wht,large:3==i._prefs.wht},isHeightAuto:!i._prefs.wht,type:t}}(),T=C.widget.news.length,B=function(){if("vert"===C.layout&&e.hasClass("w-rss_layout_horiz")?(e.removeClass("w-rss_layout_horiz"),e.addClass("w-rss_layout_vert")):"horiz"===C.layout&&e.hasClass("w-rss_layout_vert")&&(e.removeClass("w-rss_layout_vert"),e.addClass("w-rss_layout_horiz")),C.isHeightAuto&&(parseInt(C.widget._prefs.n,10)>8?(e.find(".w-rss__body").addClass("w-rss__body_height_large"),C.mode.large=!0):"horiz"===C.layout||I(C.col)||parseInt(C.widget._prefs.n,10)<=5||5>=T?(e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0):"vert"!==C.layout||I(C.col)||(e.find(".w-rss__body").removeClass("w-rss__body_height_compact"),C.mode.compact=!1)),"text-img"!==C.type||I(C.col))return o;var t=e.parent().find(".l-rss_type_"+C.layout).clone();return t.appendTo(o),t.find("tbody").html("")},D=B(),P=function(){return D.find("text-img"!==C.type||I(C.col)?"div.w-rss__item":"tr")},O=function(){var e=0;return{scroll:function(n){K();var i=P().toArray(),o=i.length-1,s=$(i[o]),r="up"===n?-1:1,u=-t.elem("list").position().top,c=t.elem("body").height(),l=s.position().top+s.height()-c+50,d=$(i[e]).position().top,h=0>r&&u>d?e:e+r,p=!1;h=Math.max(0,Math.min(o,h));var f=$(i[h]).position().top;p=r*(f-u)>c-30,e===o&&r>0&&(p=!0),p?(u+=r*(c-60),e=Math.min(e,h)):(u=f,e=h),u=Math.max(0,Math.min(l,u)),t.elem("list").animate({top:-u},x),p?a.removeClass("i-hidden"):a.addClass("i-hidden"),w("up",u>0),w("down",l>u),r>0&&c>l-u&&!k&&W()},reset:function(){e=0,o.animate({top:0},x)}}}(),F=function(){var t=e.parent().find(".w-rss__item").clone().remove();return function(e){var n=t.clone(),i=e.url;i=i.replace(/^https?:/,""),n.find(".w-rss__title").attr("href",i).html(e.title).addClass(home.getData("b-rss.linkTheme","")),n.find(".w-rss__date").addClass("text_gray_yes").html(e.date),e.descr?n.find(".w-rss__description").html(e.descr):n.find(".w-rss__description").remove();var o=n.find(".w-rss__preview");if(e.img){var s="magazine"===C.type&&C.mode.compact&&e.imgCompact||e.img;s=s.replace(/^https?:/,""),o.attr("href",i),o.css({"background-image":"url("+s+")"})}else n.addClass("w-rss__item_previewable_no"),o.remove();return n.show(),n}}(),A=e.parent().find(".l-rss_type_vert").find("tr:first").clone().remove(),j=e.parent().find(".l-rss_type_horiz").find("tr:first").clone().remove(),N=function(t){var e=[];if("text-img"!==C.type||I(C.col))for(var n=0,i=t.length;i>n;n++)t[n]&&(E.push(t[n]),$.merge(e,F(t[n])));else{var o,s=function(e,n){if(""===$(n).html()){var i=t.shift();i&&($(n).html('<div class="w-rss__item">'+F(i).html()+"</div>"),E.push(i))}},r=D.find("tr:last").eq(0);for(1===r.length&&r.find("td:not(.l-rss__gap)").each(s);t.length>0;)o="vert"===C.layout?A.clone():j.clone(),o.find("td:not(.l-rss__gap)").each(s),$.merge(e,o)}D.append(e)},L=function(t,e){k=!0;var o={feed_id:n,num:12,start:E.length+1,type:C.widget._prefs.type,"no-text":C.widget._prefs["no-text"]};"object"==typeof t&&$.extend(o,t),$.ajax({url:C.widget.params.src,dataType:"json",data:o,success:function(t){t&&t.news&&t.news.length>0&&(t.tstamp&&(i=t.tstamp),e(t))},complete:function(){k=!1,G()}})},R=function(t){return t.length>E.length||t[0].title!==E[0].title||t[0].date!==E[0].date?!0:!1},W=function(){L({tstamp:i},function(t){N(t.news),w("down",!0)})},z=function(t){t=t||E,O.reset(),o.html(""),D=B(),E=[],N(t),w("down",!0),q()},H=function(t){for(var n,i=P(),o=parseInt(i.eq(0).css("paddingBottom"),10),s=0,a=0;t>s&&100>a;){if(n=$(i[a]).height(),s+n+o>t){t-s>n/2&&(s+=n);break}s+=n+o,a++}100>a&&a>0&&($(".w-rss__body",e).height(s),r.addClass("i-hidden"))},U=function(){if(!e.get(0).isInited){e.get(0).isInited=!0;var t=e.height();if(o.height()>t){"magazine"===!C.type&&H(t);var n=!0;e.closest(".b-widget-fixed").mouseenter(function(){l.removeClass("w-rss__arrow_visibility_hidden"),c.removeClass("w-rss__arrow_visibility_hidden")}).mouseleave(function(){l.addClass("w-rss__arrow_visibility_hidden"),c.addClass("w-rss__arrow_visibility_hidden")}).mousemove(function(){n&&(n=!1,K(),setTimeout(function(){n=!0},250))}),w("down",!0),w("up",!0),w("up",!1)}else C.isHeightAuto&&(e.find(".w-rss__body").removeClass("w-rss__body_height_large"),e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0,C.mode.large=!1,C.isHeightAuto=!1,z(),e.get(0).isInited=!1,U())}},q=function(){if("magazine"===C.type){var t=D.find("div.w-rss__item").eq(0);t.hasClass("w-rss__item_previewable_no")||t.addClass("w-rss__item_position_first")}U()},V=function(){return Math.round(2e3*Math.random()+3e3)},K=function(){m=(new Date).getTime()},G=function(){f=(new Date).getTime()};C.widget._onDropcallback=function(t){var e=t.split(":")[0];e!=C.col&&(S(e)!==C.layout==="horiz"||"text-img"===C.type&&(I(e)||I(C.col)))&&(C.col=e,C.layout=S(e)?"horiz":"vert",z()),C.col=e},$(document).bind("mousemove keydown",function(){y&&!b&&(y=!1,setTimeout(function(){y=!0},v),(new Date).getTime()-f>g&&(u.hasClass("w-rss__informer_visibility_hidden")?(b=!0,setTimeout(function(){L({start:0},function(t){b=!1,t.news.length>0&&R(t.news)&&((new Date).getTime()-m>_?z(t.news):(u.removeClass("w-rss__informer_visibility_hidden"),M=t.news))})},V())):(new Date).getTime()-m>_&&M.length>0&&(G(),z(M),M=[],u.addClass("w-rss__informer_visibility_hidden"))))}),s.append(u),s.addClass("b-widget__title_type_rss"),N(C.widget.news),q(),$.browser.msie&&"text-img"===C.type&&setTimeout(function(){var t=e.find(".w-rss__preview"),n=e.find("table td").eq(0).width();t.each(function(t,e){var i=$(e);i.hide(),i.css({width:n+"px"}),i.css({heigth:"70px"}),i.show()}),e.hide(),e.css({zoom:1}),e.show()},600),setTimeout(function(){0===e.height()&&(e.parent().hide(),setTimeout(function(){e.parent().show()},200))},2e3),u.click(function(){M.length>0&&(z(M),M=[]),K(),u.addClass("w-rss__informer_visibility_hidden")})}}}),y5Url=function(){function t(t,e){return f[e]||t}function e(e){return e.replace(/%([A-Fa-f0-9]{2})/g,t)}function n(t){var n=t.replace(/\+/g,"%20");try{var i=decodeURIComponent(n);if(void 0==i)throw"malformed URI sequence";return i}catch(o){try{return decodeURIComponent(e(n))}catch(o){return unescape(n)}}}function i(t){try{var n=decodeURI(t);if(void 0==n)throw"malformed URI sequence";return n}catch(i){try{return decodeURI(e(t))}catch(i){return unescape(t)}}}function o(t,e,n){c.undef(t[e])&&(t[e]=[]),c.array(n)?t[e]=t[e].concat(n):t[e].push(n)}function s(t,e){for(var n=t[e],i=n.length,o=new Array(i),s=m(e),r=0;i>r;r++)o[r]=s+"="+m(n[r]);return o}function r(t){for(var e,i,s,r={},a=t.replace(/\+/g,"%20").split("&"),u=0,c=a.length;c>u;u++)e=a[u].split("="),i=e.shift(),i&&(s=e.length>1?e.join("="):e[0]||"",o(r,n(i),n(s)));return r}var a={UNDEF:"undefined"};a.Types={UNDEF:1,UNDEFINED:1,OBJECT:2,FUNCTION:4,NUMBER:8,STRING:16,BOOLEAN:32,DATE:1024,REGEXP:2048,ARRAY:4096,NULL:8192,EVENT:16384,NODE:32768,TYPES:{undefined:1,object:2,"function":4,number:8,string:16,"boolean":32},type:function(t){var e=this.TYPES[typeof t];if(null===t)return this.NULL;if(e==this.OBJECT&&(t.nodeName||this.document(t)))return this.NODE;if(e==this.OBJECT||e==this.FUNCTION)switch(t.constructor){case Array:return this.ARRAY;case RegExp:return this.REGEXP;case Date:return this.DATE}return this.event(t)?this.EVENT:e},test:function(t,e){return!!(this.type(t)&e)},def:function(t){return typeof t!=u},undef:function(t){return typeof t==u},object:function(t){return"object"==typeof t},func:function(t){return"function"==typeof t},nativeFunc:function(t){return this.func(t)&&isNativeFunc.test(t.toString())},number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},bool:function(t){return"boolean"==typeof t},nul:function(t){return null===t},array:function(t){return t instanceof Array},regexp:function(t){return t instanceof RegExp},date:function(t){return t instanceof Date},event:function(t){return t&&typeof t.type!=u&&typeof(t.stopPropagation||t.cancelBubble)!=u},element:function(t){return checkDomNode(t,Node.ELEMENT_NODE)},attribute:function(t){return checkDomNode(t,Node.ATTRIBUTE_NODE)},text:function(t){return checkDomNode(t,Node.TEXT_NODE)},document:function(t){return t&&typeof t.documentElement!=u||!1},comment:function(t){return checkDomNode(t,Node.COMMENT_NODE)},node:function(t){return t&&typeof t.nodeType!=u}};for(var u=a.UNDEF,c=a.Types,l=/^((((\w+):)\/\/)?(([\w\-\.]+\.\w+|localhost)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,d=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,h="E9F6F3EAE5EDE3F8F9E7F5FAF4FBE2E0EFF0EEEBE4E6FDFFF7F1ECE8F2FCE1FEB8C9D6D3CAC5CDC3D8D9C7D5DAD4DBC2C0CFD0CECBC4C6DDDFD7D1CCC8D2DCC1DEA8".match(/../g),p="%D0%B9%D1%86%D1%83%D0%BA%D0%B5%D0%BD%D0%B3%D1%88%D1%89%D0%B7%D1%85%D1%8A%D1%84%D1%8B%D0%B2%D0%B0%D0%BF%D1%80%D0%BE%D0%BB%D0%B4%D0%B6%D1%8D%D1%8F%D1%87%D1%81%D0%BC%D0%B8%D1%82%D1%8C%D0%B1%D1%8E%D1%91%D0%99%D0%A6%D0%A3%D0%9A%D0%95%D0%9D%D0%93%D0%A8%D0%A9%D0%97%D0%A5%D0%AA%D0%A4%D0%AB%D0%92%D0%90%D0%9F%D0%A0%D0%9E%D0%9B%D0%94%D0%96%D0%AD%D0%AF%D0%A7%D0%A1%D0%9C%D0%98%D0%A2%D0%AC%D0%91%D0%AE%D0%81".match(/.{6}/g),f={},m=encodeURIComponent,g=[".xml",".html",".xhtml",".jpg",".gif",".png",".css",".js",".xsl",".php",".py",".pl"],_=0,v=h.length,b=/%3B|%2C|%2F|%3F|%3A|%40|%26|%3D|%2B|%24/gi;v>_;_++)f[h[_]]=p[_];a.URL=function(t){t=c.def(t)?t.toString():window.location.href;var e=t.match(l);if(e){if(this.Host=e[6]||"",this.Path=e[9]||"",e[6]){var o=e[6].substring(e[6].lastIndexOf(".")),s=$.inArray(o,g);-1!=s&&(this.Path=e[6],this.Host="")}this.Href=e[0],this.Proto=e[4]||"",this.Port=e[8]||0,this.Path=i(this.Path),this.Query=r(e[11]||""),this.Hash=n(e[13]||"")}},a.URL.prototype={go:function(){window.location.href=this.toString()},toString:function(){var t="";if((this.Proto||this.Host)&&this.Host&&(t+=(this.Proto||"http")+"://"+this.Host,this.Port&&(t+=":"+this.Port)),this.Path){this.Host&&0!=this.Path.indexOf("/")&&(t+="/"),b.lastIndex=0;for(var e,n=0,i=[];e=b.exec(this.Path);)b.lastIndex>n&&e[0]&&(i.push(this.Path.slice(n,e.index)),i.push(e[0]),n=e.index+e[0].length);n!==this.Path.length&&i.push(this.Path.slice(n)),i[0]=encodeURI(i[0]);for(var o=[],s=0;s<i.length;s++)o[s]=s%2?i[s]:encodeURI(i[s]);t+=o.join("")}for(var r="",s=0;s<r.length;s++){var a=r.charAt(s),u=encodeURIComponent(encodeURIComponent(a)),c=encodeURIComponent(encodeURIComponent(a.toUpperCase()));t.indexOf(u)>-1&&(t=t.replace(new RegExp(u,"g"),a)),t.indexOf(c)>-1&&(t=t.replace(new RegExp(c,"g"),a))}var l=this.query();return l&&(t+="?"+l),this.Hash&&(t+="#"+m(this.Hash)),t},clone:function(){return new a.URL(this.toString())},proto:function(){},host:function(){},port:function(){},path:function(){},hash:function(){},query:function(t){if(c.def(t))return this.clearQuery(),c.string(t)?this.Query=r(t):this.replaceParams(t),this;var e=[];for(var n in this.Query)e=e.concat(s(this.Query,n));return e.join("&")},queryKeys:function(){var t=[];for(var e in this.Query)t.push(e);return t.sort()},addParam:function(t,e){return o(this.Query,t,e),this},addParams:function(t){for(var e in t)o(this.Query,e,t[e]);return this},removeParams:function(t){for(var e=0,n=t.length;n>e;e++)delete this.Query[t[e]];return this},replaceParams:function(t){var e=[];for(var n in t)e.push(n);return this.removeParams(e),this.addParams(t),this},clearQuery:function(){return this.Query={},this},getParam:function(t){var e=this.Query[t];return e?e[0]:null},getParams:function(t){return this.Query[t]||[]}};var y=a.URL,w=y.prototype,x={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"};for(_ in x)w[_]=function(t){return function(e){return c.def(e)?(this[t]=e,this):this[t]}}(x[_]);return w.get=w.toString,a.Url=function(t){return new y(t)},y.isValid=function(t){return d.test(t)},a.Url}();var WTimer=function(t,e,n){function i(t){return n?s=setTimeout(r,t):(s=setInterval(r,t),c=!0),s}function o(){c&&(u?clearTimeout(s):clearInterval(s),c=!1)}var s,r=t,a=e,u=n||!1,c=!1;return{start:function(){return i(a)},restart:function(t){return o(),i(t)},stop:function(){o()}}},WTimersHandler=function(){function t(t,n){return t in e&&n in e[t]?!0:!1}var e={};return{add:function(n,i,o){("undefined"===e[n]||"object"!=typeof e[n])&&(e[n]={});var o=o||{},s=new WTimer(i.fn,864e5,i.runOnce),r=s.start();if(e[n][r]=s,"startTimerOn"in o){var a=function(){var o=n,s=r,a=i.delay;return function(){t(o,s)&&e[o][s].restart(a)}}(),u=o.startTimerOn;setTimeout(a,u)}else e[n][r].restart(i.delay);if("stopTimerOn"in o){var c=function(){var i=n,o=r;return function(){t(i,o)&&(e[i][o].stop(),delete e[i][o])}}(),l=o.stopTimerOn;setTimeout(c,l)}return r},remove:function(n,i){return t(n,i)?(e[n][i].stop(),delete e[n][i],!0):!1}}};if("undefined"==typeof Widget&&(this.Widget=function(t,e){this._(t,e)},document.Widget=Widget,function($){var wTimersHandler=new WTimersHandler;Widget.prototype={undef:function(t){return t},_:function(t,e){this._prefs={};var n=e.src?e.src:!1,i=e.wauth?e.wauth:!1,o=e.type?e.type:"raw";this.params=e,this.type=o,this.id=t,this.classId=t.replace(/-[0-9]+$/i,""),this.intClassId=e.intclassid,this.instanceId=t.replace(/^(.*)-([0-9]+)$/i,"$2"),this.htmlId=t,this.src=n,this.onLoad=this.onload=!1,this.bound=!1,""!==i&&this.setValue("wauth",i),this.savedUsrCh=this.params.usrCh},init:function(){var t=this;if(!this.bound){this.bound=!0;var e=function(){t.loadFromSrc({isBinding:!0})};if(Widget.Framework.register(this),"iframe-inside"!==this.type&&new Widget.Wrapper(this),this.params.prefs)for(var n=0;n<this.params.prefs.length;n++)this.params.prefs[n]!==!1&&this.setValue(this.params.prefs[n][0],this.params.prefs[n][1]);var i=Widget.Framework.widgetPrefs[this.id];if(i){for(var o in this._prefs)i[o]||(i[o]=this._prefs[o]);this._prefs=i}"iframe"===this.type&&(this._stylescallback=function(){t.loadFromSrc({isBinding:!0})}),this.params.css&&"iframe"!==this.type&&this.css(this.params.css),this.params.js&&"iframe"!==this.type?this.library(this.params.js,e):e()}},showPreloader:function(t){function e(){n.$().html(Widget.Framework.params.preloader)}var n=this;t?e():window.setTimeout(function(){(n._inlineLoading||n._inlinePending)&&e()},100)},loadFromSrc:function(t){if(t||(t={noPreloader:!1,isBinding:!1}),!("inline"===this.type&&this.src===!1&&t.isBinding||(("inline"===this.type||"iframe"===this.type||"json"===this.type)&&(!t.noPreloader&&Widget.Framework._domloaded&&this.showPreloader("now"),this[this.type+"From"](this.src)),t.isBinding))){var e=Widget.Framework.params.rawBodyUrl+this.getWidgetId()+"?ncrnd="+Math.random()+"&prototype="+Widget.Framework.params.prototype;"raw"===this.type&&this.rawFrom(e+"&wauth="+this.getAuth()),"inline"===this.type&&this.src===!1&&this.inlineFrom(e)}},_autoValue:function(t,e){return parseInt(t,10)>0?parseInt(t,10)+"px":e},iframeElement:function(t,e,n){var i,o,s;t=this._createLoadUrl.apply(this,arguments),n?(i=this._autoValue(this.params.prefs_width,Widget.Framework.params.iframeWidth),o=this._autoValue(this.params.prefs_height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("prefs")):(i="100%",o=this._autoValue(this.params.height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("iframe"));var r=$.browser.msie&&"9.0"===$.browser.version,a=$('<iframe style="border:none" allowTransparency="true" frameborder="0"></iframe>').attr({id:s,src:r?"":t}).css({width:0,"min-width":i,height:o,margin:0,padding:0});if($(document.documentElement).hasClass("m-sandbox")&&a.attr("sandbox","allow-scripts allow-popups allow-forms allow-same-origin"),$.browser.msie){var u=function(){a.unbind("load",u).css({position:"",visibility:""})};a.css({position:"absolute",visibility:"hidden"}).bind("load",u)}return r&&setTimeout(function(){a.attr("src",t)},50),a},iframeFrom:function(t){var e=this;$(document).ready(function(){var n=function(){e.$().html("");try{var n=e.iframeElement(t,[]),i=n[0].src.split("#secure:");$.browser.mozilla||$.browser.safari?n.attr({src:i[0]+"&rnd="+Math.random()+(i.length>1?"#secure:"+i[1]:"")}).appendTo(e.$()):n.appendTo(e.$())}catch(o){window.console&&console.error(o)}},i=function(){e.$().length?n():setTimeout(function(){i()},100)};i()})},jsonFrom:function(){var t=this._createLoadUrl.apply(this,arguments);$.getScript(t+"&ncrnd="+Math.random())},inlineFrom:function(){var t=this._createLoadUrl.apply(this,arguments),e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e.wrapper.$().css("height",""),e._inlineFromHtml(t)})},rawFrom:function(t){var e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e._inlineFromHtml(t)})},_inlineFromJson:function(t){return Widget.Framework.inlineLoading(1),this._inlineFromHtml(t)},_inlineLoading:!1,_inlinePending:"",_inlineFromHtml:function(html){if(!Widget.Framework._domloaded)return this._inlineLoading=!1,void(this._inlinePending=html);Widget.Framework.inlineLoading(-1);var styleRe=/(<style[^>]*>((?:\s|\S)*?)<\/style>)/gim,scriptRe=/<script[^>]*>(?!<\/script>)((?:\s|\S)*?)<\/script>/gim,match;this.wrapper.$().hasClass("b-widget-fixed")&&this.wrapper.$().addClass("b-widget-fixed"),0===this.$().length&&$("<div />").attr({id:this.$$(),"class":"b-widget-data"}).appendTo(this.wrapper.$()),this.$().html(html.replace(scriptRe,"").replace(Widget.Framework.params.idTemplate,this.id));for(var root=document.getElementsByTagName("head")[0]||document.documentElement;null!==(match=styleRe.exec(html));){var newSS=document.createElement("link");newSS.rel="stylesheet",newSS.href="data:text/css,"+escape(match[2]),root.appendChild(newSS)}scriptRe.lastIndex=0;for(var widget=this;null!==(match=scriptRe.exec(html));)eval(match[1]);this._inlineLoading=!1,this._inlinePending=!1,Widget.Framework._domloaded&&this.finalize()},_createLoadUrl:function(t,e,n){var i=[{locale:this.getLocale()}];if(i.concat(e),window.toCat&&window.toReg||i.push({frommorda:1}),t=this._addParams(t,i,n||"iframe"===this.type,n),this.params.prefs_secure){for(var o=[],s=0;s<this.params.prefs_secure.length;s++)this.params.prefs_secure[s][1]&&o.push(this.params.prefs_secure[s][0]+"="+this.params.prefs_secure[s][1]);o.length&&(t+="#secure:"+o.join(","))}return t},_addParams:function(t,e,n,i){if(n&&(this._prefs["."]=Widget.Framework.params.fullproxyDomain?Widget.Framework.params.fullproxyDomain+"|"+Widget.Framework.params.proxyDomain:location.protocol+"//"+location.host+"|"+document.domain,!i)){var o=this.getWidgetStyle()||{};o.bg&&(this._prefs.widgetBg=o.bg),o.text&&(this._prefs.widgetText=o.text),o.link&&(this._prefs.widgetLink=o.link),o.hover&&(this._prefs.widgetHover=o.hover),o.decor&&(this._prefs.widgetDecor=o.decor),this._moving&&(this._prefs.widgetMoving=1)}for(var s=[e,[this._prefs]],r=y5Url(location.href),a={},u=0;u<s.length;u++)for(var c=0;c<s[u].length;c++){var l;if(s[u][c]instanceof Array)for(l=0;l<s[u][c].length;l++)null!==r.getParam(s[u][c][l])&&(a[s[u][c][l]]=r.getParam(s[u][c][l]));else for(l in s[u][c])"function"!=typeof s[u][c][l]&&"object"!=typeof s[u][c][l]&&(a[l]=s[u][c][l])}return y5Url(t).addParams(a).toString()},_disableAutoStats:!1,hookStats:function(){return Widget.Framework.hookStats(this)},disableAutoStats:function(){this._disableAutoStats=!0},onload:function(){},resetAuth:function(){this._splitterAuth=!1},getAuth:function(){return this.getValue("wauth")},_splittedAuth:!1,splitAuth:function(){return this._splittedAuth||(this._splittedAuth=Widget.Framework.splitAuth(this.getAuth())),this._splittedAuth},getWidgetId:function(){return this.splitAuth().id},getOwner:function(){return this.splitAuth().owner},getViewer:function(){return this.splitAuth().viewer},setValue:function(t,e){this._prefs[t]=e,"wauth"===t&&Widget.Framework.registerWauth(this)},getValue:function(t){return this._prefs[t]?this._prefs[t]:this.undef()},getBoolean:function(t){var e=this.getValue(t);return e===!0||"true"===e},_encodeValues:function(t){t===this.undef()&&(t=this._prefs);var e=y5Url("");return e.query(t),e.query()},setValues:function(t){for(var e in t)"function"!=typeof t[e]&&"object"!=typeof t[e]&&this.setValue(e,t[e])},saveValues:function(t,e){t===this.undef()&&(t=this._prefs),this.markChanged(!1,!0),this.setValues(t),$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),usrCh:this.params.usrCh,s:this._encodeValues(t)},dataType:"json",success:e})},dropValues:function(t){var e=this;$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),s:"DROP"},dataType:"json",success:function(n){Widget.Framework.widgetPrefs[e.id]=!1,t&&t(n)}})},reload:function(t,e){if(!this.pauseReload){$(".b-wdgt-control").appendTo("body");var n=this,i=function(){t&&t(),n.onload&&n.onload()};if(this.wrapper)return"undefined"!=typeof e&&(this._prefs.showAnyway=e),Widget.Framework.reload(this,i,e);var o=location.host;o.indexOf("/")===o.length-1&&(o=o.substr(0,o.length-1));var s=location.pathname;0===s.indexOf("/")&&(s=s.substr(1)),location.href=this._addParams("//"+o+"/"+s,[],"isIframe")}},setTitle:function(t){this.wrapper?this.wrapper.setTitle(t):Widget.Framework.xframe(this,"Widget::setTitle",t)},savePreferences:function(t){this.saveValues(t),this._updateOnHide=!0},dropPreferences:function(t){var e=this.getAuth();this._prefs={},this.setValue("wauth",e),this.wrapper?(this.dropValues(t),$(window).trigger({type:"widgetSettingsClosed",id:this.id})):Widget.Framework.xframe(this,"Widget::dropPreferences","",t)},showPreferences:function(){this.wrapper?this.wrapper.showPreferences():Widget.Framework.xframe(this,"Widget::showPreferences")},hidePreferences:function(){this.wrapper?(this._updateOnHide&&(this.loadFromSrc(),Widget.Framework.params.notifyChangesHandler(this)),this.wrapper.hidePreferences()):Widget.Framework.xframe(this,"Widget::hidePreferences",this._updateOnHide?"<>"+this._encodeValues():""),this._updateOnHide=!1
},setIFrameHeight:function(t){this.wrapper?this.wrapper.setIFrameHeight(t):Widget.Framework.xframe(this,"Widget::setIFrameHeight",t)},setIFrameWidth:function(t){this.wrapper?this.wrapper.setIFrameWidth(t):Widget.Framework.xframe(this,"Widget::setIFrameWidth",t)},setIFrameSize:function(t,e){this.wrapper?this.wrapper.setIFrameSize(t,e):Widget.Framework.xframe(this,"Widget::setIFrameSize",t+","+e)},setPreferencesFormWidth:function(t){this.wrapper?this.wrapper.setPreferencesFormWidth(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormWidth",t)},setPreferencesFormHeight:function(t){this.wrapper?this.wrapper.setPreferencesFormHeight(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormHeight",t)},setPreferencesFormSize:function(t,e){this.wrapper?this.wrapper.setPreferencesFormSize(t,e):Widget.Framework.xframe(this,"Widget::setPreferencesFormSize",t+","+e)},_calculateCss:function(t,e){var n=t.css(e),i=n.replace(/(\.[0-9]+)?px$/,"");return"height"!==e||"auto"!==n&&0!==parseInt(n,10)?n!==i?parseInt(n,10):0:document.body.scrollHeight},_sumCss:function(t,e){for(var n=0,i=0;i<e.length;i++)n+=this._calculateCss(t,e[i]);return n},adjustIFrameHeight:function(){var t=this;window.clearTimeout(this._adjustIFrameHeightTimeout),this._adjustIFrameHeightTimeout=window.setTimeout(function(){t._adjustIFrameHeight()},100)},_adjustIFrameHeightPrevious:-1,_adjustIFrameHeightTimeout:!1,_adjustIFrameHeight:function(){var t;t="iframe-inside"===this.type?$("body"):this.$(),t.css("overflow","hidden");var e=!1;t.css("margin-left")===t.css("margin-right")&&t.css("margin-right")===t.css("margin-top")&&t.css("margin-top")===t.css("margin-bottom")&&"0px"===t.css("margin-bottom")&&t.css("padding-left")===t.css("padding-right")&&t.css("padding-right")===t.css("padding-top")&&t.css("padding-top")===t.css("padding-bottom")&&"0px"===t.css("padding-bottom")&&(e=!0);var n=this._sumCss(t,["marginTop","marginBottom","height"]);e&&t.css("padding","1px");var i=this._sumCss(t,["marginTop","marginBottom","height"]);return i>n&&(n=i),n!==this._adjustIFrameHeightPrevious?($.browser.opera&&(n+=20),this._adjustIFrameHeightPrevious=n,this.setIFrameHeight(n)):void 0},library:function(t,e){var n=this;this._libraryLoading=!0,Widget.Framework.library(t,function(){n._libraryLoading=!1,e?e():n.finalize()})},css:function(t){return Widget.Framework.css(t)},iReload:function(t){var e=this;if(this.stopAutoReload(),Widget.Framework.focused)Widget.Framework.addToReloadQueue(e,t),Widget.Framework.reloadQueueTimer&&clearTimeout(Widget.Framework.reloadQueueTimer),Widget.Framework.reloadQueueTimer=setTimeout(function(){Widget.Framework.processReloadQueue()},Widget.Framework.reloadQueueTimeout);else{var n=function(){$.browser.msie?$(document).unbind("focusin",n):$(window).unbind("focus",n),Widget.Framework.processReloadQueue()};Widget.Framework.addToReloadQueue(e,t),$.browser.msie?$(document).bind("focusin",n):$(window).bind("focus",n)}},stopAutoReload:function(){Widget.Framework.unsetAutoreload(this)},queueAutoReload:function(){Widget.Framework.setAutoreload(this)},finalize:function(){this.queueAutoReload(),this.onload&&this.onload(),this.onLoad&&this.onLoad(),this._disableAutoStats||this.hookStats(),$(window).trigger({type:"widgetLoaded",id:this.id})},countShow:function(t,e){csh_ifgsid&&!this._isNotReloaded&&csh_ifgsid(t,e)},addTimer:function(t,e){return wTimersHandler.add(this.id,t,e)},removeTimer:function(t){wTimersHandler.remove(this.id,t)},getWidgetStyle:function(){var t=this.params.position,e=Widget.Framework.params.widgetStyle;if(t||(t=window.wg&&wg._addedWidgetPosition),e&&t){var n=parseInt(t.split(":")[0],10),i={};e[t]?i=e[t]:e.top&&2>=n?i=e.top:e.bottom&&n>2?i=e.bottom:e.all&&(i=e.all);for(var o in e.def)e.def.hasOwnProperty(o)&&(i[o]||(i[o]=e.def[o]));return i}return""},appendStyle:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),document.getElementsByTagName("head").item(0).appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))},addWidgetStyles:function(){try{var t=$("script[nowidgetstyles='true']").length;if(t)return;"iframe-inside"===this.type&&this._prefs&&(this._prefs.widgetLink&&this.appendStyle(":link {color:#"+this._prefs.widgetLink+" !important;}"),this._prefs.widgetHover&&this.appendStyle(":link:hover {color:#"+this._prefs.widgetHover+" !important;}"),this._prefs.widgetText&&this.appendStyle("body {color:#"+this._prefs.widgetText+" !important;}"),this._prefs.widgetDecor&&this.appendStyle(":link {text-decoration: none! important;}"))}catch(e){window.console&&window.console.log&&console.log("unable to append widget styles",this._prefs.widgetBg,this._prefs.widgetText,this._prefs.widgetLink,this._prefs.widgetHover,this._prefs.widgetDecor)}},markChanged:function(t,e){this.params.usrCh|=(t?1:0)+(e?2:0)},$:function(t){return $("#"+this.$$(t))},$$:function(t){return Widget.Framework.params.idPrefix+this.id+(t===this.undef()?"":t)},getLocale:function(){return Widget.Framework.getLocale()},end:!0}}(jQuery)),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Wrapper&&!function(t){Widget.Wrapper=function(t){this._(t)},Widget.Wrapper.prototype={undef:function(t){return t},_:function(t){this.widget=t,this.widget.wrapper=this,Widget.Framework._wrappers[this.$$()]=t},$:function(e){return t("#"+this.$$(e))},$$:function(t){return Widget.Framework.params.wrapperPrefix+(t==this.undef()?"wrapper":t)+Widget.Framework.params.wrapperPostfix+this.widget.id},setTitle:function(t){this.$("title").html((""+t).replace(/</g,"&lt;"))},getWindowSize:function(){var e=function(){return document[t.support.boxModel?"documentElement":"body"]},n=window;if("undefined"!=typeof n.innerWidth)return{width:n.innerWidth,height:n.innerHeight};var i=e();return{width:i.clientWidth,height:i.clientHeight}},_px:function(t){return(""+t).match("^[0-9]+$")&&(t+="px"),t},setIFrameHeight:function(t){this.$().css("height",""),this.$("iframe").css("height",this._px(t))},setIFrameWidth:function(t){this.$("iframe").css("width",this._px(t))},setIFrameSize:function(t,e){this.$("iframe").css("height",this._px(e)).css("width",this._px(t))},setPreferencesFormWidth:function(t){var e=this.getWindowSize().width,t=2>e/t?e/2:t;this.$("prefs").css("width",this._px(t))},setPreferencesFormHeight:function(t){var e=this.getWindowSize().height,t=2>e/t?e/2:t;this.$("prefs").css("height",this._px(t))},setPreferencesFormSize:function(t,e){this.setPreferencesFormWidth(t),this.setPreferencesFormHeight(e)},showPreferences:function(){Widget.Framework.params.showPreferencesHandler(this.widget)},hidePreferences:function(){Widget.Framework.params.hidePreferencesHandler(this.widget)},showEditForm:function(t){return Widget.Framework.showEditForm(this.widget.id,t)}}}(jQuery),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Framework){var widget,widgetTiming=1e3;!function(t){Widget.Framework={undef:function(t){return t},params:!1,_id:{},_wauth:{},_no:{},_widgets:[],_wrappers:{},_callbacks:{},_callbackId:1,widgetAutoReloadTimers:{},widgetReloadQueue:{},reloadQueueTimeout:5e3,reloadQueueTimer:null,widgetPrefs:{},getLocale:function(){return this.params.locale},getDomain:function(){return this.params.domain},get:function(t){return Widget.Framework._id[t]},getByWauth:function(t){return Widget.Framework._wauth[t]},getByWrapperId:function(t){return Widget.Framework._wrappers[t]},getByClass:function(t){if(this._no[t]===this.undef())return[];for(var e=[],n=0;n<this._widgets.length;n++)this._widgets[n].classId===t&&(e[e.length]=this._widgets[n]);return e},updateNo:function(t,e){var n=parseInt((""+e).replace(/^[^\-]+-/,""),10);return this._no[t]===this.undef()&&(this._no[t]=0),this._no[t]<=n&&(this._no[t]=n+1),this._no[t]},register:function(t){this.registerWauth(t),this._id[t.id]=t,this.updateNo(t.classId,t.instanceId),t.intClassId&&this.updateNo(t.intClassId,t.instanceId),this._widgets=[];for(var e in this._id)this._id.hasOwnProperty(e)&&(this._widgets[this._widgets.length]=this._id[e])},registerWauth:function(t){var e=t.getValue("wauth");""!==e&&(this._wauth[e]=t),t.resetAuth()},all:function(){return this._widgets},bindIframe:function(){var t=y5Url(location.href).getParam("wauth");if(t){this.inIframe=!0;var e=this.splitAuth(t),n=this.bind(e.id,{type:"iframe-inside",wauth:t});return this.setValuesFromUrl(n),n.addWidgetStyles(),document.documentElement.id=this.params.idPrefix+n.id,n}return this.inIframe=!1,!1},setEdit:function(t){return arguments.length?(t=!!t,void(this.params.edit!==t&&(t?this.unsetAutoreload():this.setAutoreload(),this.params.edit=t))):this.params.edit},getValuesFromUrl:function(t){var e=[];try{var n,i,o=y5Url(location.href);t!==this.undef()&&o.query(t);var s=o.queryKeys();for(n=0;n<s.length;n++)e[e.length]=o.getParam(s[n])===this.undef()?[s[n],""]:[s[n],o.getParam(s[n])];if(o.Hash){var r,a=o.Hash.replace("secure:","").split(",");for(n=0,i=a.length;i>n;n++)r=a[n].split("="),e[e.length]=r}}catch(u){}return e},setValuesFromUrl:function(t){var e,n=this.getValuesFromUrl();try{e=location.protocol}catch(i){e="http:"}for(var o=0;o<n.length;o++)if("."===n[o][0]){var s=n[o][1].split("|");this.params.saveDomain=s[0].replace(/(http:|https:)/,e),this.params.fullproxyDomain=s[0],this.params.fullproxyUrl=this.params.saveDomain+this.params.proxyUrl,this.params.proxyDomain=s[1]}else if("locale"===n[o][0])this.params.locale=n[o][1];else{var r=n[o][1],a=n[o][0];r="prefs_get"===a?JSON.parse(r):r,t.setValue(a,r)}},_inlineLoadingCount:0,inlineLoading:function(t){this._inlineLoadingCount+=t,this.onInlineLoadingChange(this._inlineLoadingCount,t)},onInlineLoadingChange:function(){},bind:function(t,e){var n=this.prebind(t,e);return n.init(),n},prebind:function(t,e){return new Widget(t,e)},init:function(t){if(this.params===!1)this.params=t;else for(var e in t)t.hasOwnProperty(e)&&t[e]!==this.undef()&&(this.params[e]=t[e]);this.params.preloader=this.params.preloader.replace("#dataLoading#",this.params.dataLoadingText)},_insertData:function(e,n,i,o){var s=null;if(!window.wg||!wg.isDrag){if(o){var r,a;if(t(n).hasClass("widget")&&(r=t(n).bem("widget"),a=r.getMods()),BEM.DOM.replace(n,e),n=widget.$()[0].parentNode,a){r=t(n).bem("widget");for(var u in a)a.hasOwnProperty(u)&&"js"!==u&&r.setMod(u,a[u])}}else BEM.DOM.append(n,e);s=n.firstChild}return widget.bound&&("raw"===widget.type||"inline"===widget.type&&widget.src===!1)&&widget.finalize(),i&&i(widget,s),widget},insert:function(t,e,n){return this._insertData(e,t,n)},replace:function(t,e,n){return this._insertData(e,t.wrapper.$(),n,"is_replace")},reload:function(e,n,i){i&&(e._prefs.showAnyway=i);var o={wauth:e.getAuth(),wid:e.id,usrCh:e.params.usrCh,fixed:this.params.layoutFixed?"1":"",showanyway:e._prefs.showAnyway?1:0,prefs_get:e.params.prefs_get?JSON.stringify(e.params.prefs_get):"",locale:this.getLocale(),prototype:Widget.Framework.params.prototype};this.params.gsid&&(o.g_sid=this.params.gsid),"undefined"!=typeof e.params.is_default&&(o.is_default=e.params.is_default===!0?1:0),Widget.Framework.widgetPrefs[e.id]=Widget.Framework.widgetPrefs[e.id]!==!1?e._prefs:null,"iframe"===e.type&&(o["."]=this.params.fullproxyDomain+"|"+this.params.proxyDomain),t.get(this.params.addUrl,o,function(t){var i=e.params.position,o=e.params.removed,s=Widget.Framework.replace(e,t,n);s.params.position=i,s.params.removed=o})},add:function(e,n,i,o){var s=this.updateNo(e,"_topnews"===e?0:1);this.updateNo(e,s);var r,a;"function"==typeof i?r=i:(r=i.success,a=i.error),o=o?o:{fixed:!1};var u={wauth:this.params.wauth,wid:e+"-"+s,smart:o.smart?"1":"",fixed:o.fixed?"1":"",locale:this.getLocale(),isAddition:1,prototype:this.params.prototype};this.params.gsid&&(u.g_sid=this.params.gsid),o.settings&&(u.settings=o.settings),o.sign&&(u.sign=o.sign),o.showanyway&&(u.showanyway=o.showanyway),t.ajax({url:this.params.addUrl,data:u,success:function(t){Widget.Framework.insert(n,t,r)},error:a})},fromJson:function(t,e){var n=this.getByWauth(t);n&&n._inlineFromJson(e)},splitAuth:function(t){var e=t.split(".");return e.length>4?{id:e[3],owner:e[6],viewer:e[5]}:{id:e[0],owner:e[1],viewer:e[2]}},scripts:{},library:function(e,n){var i=this.prepareLibrary(e),o=0,s=this,r=function(e){if(e!==s.undef()&&"loaded"!==s.scripts[e]){for(var a=0;a<s.scripts[e].length;a++)s.scripts[e][a]();s.scripts[e]="loaded"}if(o>=i.length)return void(n!==s.undef()&&n());var u=i[o];o++,s.scripts[u]===s.undef()&&u!==!1?(s.scripts[u]=[],t.getScript(u,function(t){return function(){r(t)}}(u))):"loaded"===s.scripts[u]?r():s.scripts[u].push(r)};r()},prepareLibrary:function(t){var e=[];if(t instanceof Array)for(var n=0;n<t.length;n++)e=e.concat(t[n]instanceof Array?this.prepareLibrary(t[n][0],t[n][1]):this.prepareLibrary(t[n]));return t!==!1&&(e=t),e},_css:{},css:function(e){e instanceof Array?this.loadCss(e):(e.any instanceof Array&&this.loadCss(e.any),t.browser.msie&&e.msie instanceof Array&&this.loadCss(e.msie),!t.browser.msie&&e.non_msie instanceof Array&&this.loadCss(e.non_msie))},loadCss:function(t){for(var e=0;e<t.length;e++)if(!this._css[t[e]]){this._css[t[e]]=!0;var n=document.createElement("link");n.rel="stylesheet",n.href=t[e];var i=document.getElementsByTagName("head")[0]||document.documentElement;i.appendChild(n)}},_click:function(e){var n="//yandex.ru/clck/jclck/dtype=stred/pid="+this.params.statParams.pid+"/cid="+this.params.statParams.cid+"/path="+e+"/rnd="+Math.random()+"/*"+location.href.replace(/^[^\/]+\/+/,"");try{t.getScript(n)}catch(i){}},_counter:function(){var e=t(this),n=widget.classId+".anchors";if(e.attr("rev")){var i=e.attr("rev");if("none"===i)return;n=n+"."+i}Widget.Framework._click(n)},hookStats:function(e){var n=this;if("iframe-inside"===e.type)t("a, input[type=button], input[type=submit], button").live("mousedown",function(){n._click(e.classId+".anchors")});else if(e.wrapper.$("title").not(".yandex-hook-stat").mousedown(function(){n._click(e.classId+".title")}).addClass("yandex-hook-stat"),e.wrapper.$().length>0&&"raw"!==e.type){var i="#"+e.wrapper.$().attr("id")+" a:not(.yandex-hook-stat),";i+="#"+e.wrapper.$().attr("id")+" input[type=button],",i+="#"+e.wrapper.$().attr("id")+" input[type=submit],",i+="#"+e.wrapper.$().attr("id")+" button";try{t(i).die("mousedown").live("mousedown",function(){var i=t(this),o=e.classId+".anchors";if(i.attr("rev")){var s=i.attr("rev");if("none"===s)return;o=o+"."+s}n._click(o)})}catch(o){}}},_domloaded:!1,domLoaded:function(){if(this._domloaded)return!1;this._domloaded=!0;for(var t=0;t<this._widgets.length;t++)this._widgets[t]._inlineLoading?this._widgets[t].showPreloader():this._widgets[t]._inlinePending?this._widgets[t]._inlineFromHtml(this._widgets[t]._inlinePending):this._widgets[t].finalize()},setAutoreload:function(t){if(this.params.edit!==!0)if(t){var e=this.widgetAutoReloadTimers;if(t.params.rebind&&!e[t.id]){var n=t.params.rebind*widgetTiming,i=function(){e[t.id]=null,t.iReload()};e[t.id]=setTimeout(i,n)}}else for(var o=0;o<this._widgets.length;o++)this.setAutoreload(this._widgets[o])},unsetAutoreload:function(t){if(t){var e=this.widgetAutoReloadTimers,n=e[t.id];n&&(clearTimeout(n),e[t]=null)}else for(var i=0;i<this._widgets.length;i++)this.unsetAutoreload(this._widgets[i])},_storeCallback:function(t){return this._callbacks[this._callbackId]=t,this._callbackId++},_freeCallback:function(t){var e=this._callbacks[t];return delete this._callbacks[t],e},_postMessageTransport:function(t,e,n){var i={action:"message",wauth:t.getValue("wauth"),params:{message:e}},o=this.params.fullproxyDomain;n&&(i.params.callbackId=this._storeCallback(n)),window.parent.postMessage(JSON.stringify(i),o)},_iframeTransport:function(t,e,n){var i=this.params.fullproxyUrl;if(0===i.indexOf("http:")||0===i.indexOf("https:")||"/"===i.charAt(0)){this._xframe&&document.body.removeChild(this._xframe);var o=document.createElement("iframe");o.style.visibility="hidden",o.style.position="absolute",o.style.top=o.style.left=o.style.width=o.style.height=0,this._xframe=document.body.insertBefore(o,document.body.firstChild),this.xframeSrc(this._xframe,i+"#"+e,n)}},xframe:function(t,e,n,i){try{var o,s=y5Url();s.clearQuery(),s.addParams({wauth:t.getAuth(),name:e,value:n}),s.hash(encodeURIComponent(s.query())),s.clearQuery(),o=this.params.proxyDomain+"&"+s.hash(),"postMessage"in window?this._postMessageTransport(t,o,i):this._iframeTransport(t,o,i)}catch(r){}},_isCorrectWauth:function(t){var e=this.splitAuth(t),n=this.get(e.id);return n?n.getValue("wauth")===t:!1},onWindowMessage:function(t){var e,n;try{e=JSON.parse(t.data)}catch(i){return}e&&("callback"===e.action?e.params&&e.params.callbackId&&(n=this._freeCallback(e.params.callbackId),n&&n()):e.wauth&&this._isCorrectWauth(e.wauth)&&e.params&&e.params.message&&(this.xframeGet(e.params.message),e.params.callbackId&&t.source.postMessage(JSON.stringify({action:"callback",params:{callbackId:e.params.callbackId}}),t.origin)))},xframeGet:function(e){if(!this.inIframe){e.indexOf("wauth%3D")>0&&(e=decodeURIComponent(e));var n=new y5Url;n.query(e.replace(/^#/,""));var i=this.splitAuth(n.getParam("wauth")),o=this.get(i.id),s=n.getParam("value");if(o)switch(n.getParam("name")){case"Widget::setTitle":o.setTitle(s);break;case"Widget::setIFrameHeight":o.setIFrameHeight(s);break;case"Widget::setPreferencesFormWidth":o.setPreferencesFormWidth(s);break;case"Widget::setPreferencesFormHeight":o.setPreferencesFormHeight(s);break;case"Widget::setPreferencesFormSize":var r=s.split(",");o.setPreferencesFormSize(r[0],r[1]);break;case"Widget::showPreferences":o.showPreferences();break;case"Widget::hidePreferences":var a,u="<>",c=decodeURIComponent(e).split(u);for(s=[],a=1;a<c.length;a++)s[s.length]=c[a];s=s.join(u);var l={},d=this.getValuesFromUrl(s);for(a=0;a<d.length;a++)l[d[a][0]]=d[a][1];(n.Query.wauth||[])[0]===o.getAuth()&&(""!==n.getParam("value")&&o.setValues(l),setTimeout(function(){o.loadFromSrc()},200),this.params.notifyChangesHandler(o)),t(window).trigger({type:"widgetSettingsTuned",id:o.id}),o.hidePreferences();break;case"Widget::dropPreferences":o.dropPreferences()}}},xframeSrc:function(e,n,i){var o;if(t.browser.msie){o=e.cloneNode(!0),o.style.position="absolute",o.style.visibility="hidden",o.id="";var s=function(){t(o).unbind("load",s),o.style.position="",o.style.visibility="",i&&i()};t(o).bind("load",s),o.src=n+"&rnd="+Math.random();try{document.body.appendChild(o)}catch(r){}}else t(e).one("load",function(){i&&i()}),e.src=n+"&rnd="+Math.random()},addToReloadQueue:function(t,e){t.id&&(this.widgetReloadQueue[t.id]={flag:!0,widget:t,callback:e})},processReloadQueue:function(){var t,e=function(t,e){var n=Math.round(4e3*Math.random());setTimeout(function(){t.reload(e),t._isNotReloaded=!0},n)};for(var n in this.widgetReloadQueue)this.widgetReloadQueue.hasOwnProperty(n)&&(t=this.widgetReloadQueue[n],t.flag&&(e(t.widget,t.callback),t.flag=!1))},showEditForm:function(e,n,i){var o=this.get(e);if(o.params.prefs_src!==this.undef()&&""!==o.params.prefs_src){var s=o.iframeElement(o.params.prefs_src,[],!0),r=s.attr("src");t(n).empty().append(s),s.attr("src",r+"&rnd="+Math.random()),s.bind("load",i)}else t.get(this.params.formUrl,{widget:o.getWidgetId(),wauth:o.getAuth(),dataType:"json",prefs_get:o.params.prefs_get?JSON.stringify(o.params.prefs_get):""},i)},end:!0},Widget.Framework.init({jsonUrl:"",addUrl:"/adddata/",rawBodyUrl:"/inline/",formUrl:"/form.html",proxyUrl:"/xframeproxy.html",wauth:!1,idTemplate:/WIDGETID/g,idPrefix:"wd-",wrapperPrefix:"wd-",wrapperPostfix:"-",iframeHeight:"auto",iframeWidth:400,layoutFixed:!1,statParams:{pid:132,cid:2947},patternId:!1,yu:!1,is_default:!1,geoid:!1,region:!1,havePrefsFrom:!1,isWidgetNormal:!1,open_settings_on_add:!1,title:"",prefs_get:!1,locale:"ru",domain:"ru",dataLoadingText:" ",showPreferencesHandler:function(){},hidePreferencesHandler:function(){},notifyChangesHandler:function(){},preloader:"<div>#dataLoading#</div>"})}(jQuery),Widget.GetInstance=function(t){return Widget.Framework.get(t)},Widget.GetInstanceByWauth=function(t){return Widget.Framework.getByWauth(t)},Widget.Init=function(t){return Widget.Framework.init(t)},Widget.Bind=function(t,e){return Widget.Framework.bind(t,e)},Widget.BindOnAdd=function(t,e){return Widget.Framework.prebind(t,e)},$(document).ready(function(){Widget.Framework.domLoaded()}),Widget.Framework.focused=!0,$.browser.msie?($(document).bind("focusout",function(){Widget.Framework.focused=!1}),$(document).bind("focusin",function(){Widget.Framework.focused=!0})):($(window).focus(function(){Widget.Framework.focused=!0}),$(window).blur(function(){Widget.Framework.focused=!1})),widget=Widget.Framework.bindIframe(),widget||(window.WidgetMessaging=function(t){Widget.Framework.xframeGet(t)}),"postMessage"in window&&$(window).bind("message",function(t){Widget.Framework.onWindowMessage(t.originalEvent)})}!function(){"use strict";function t(t){var e=$(".etrains__track",t),n=$(".etrains__direction",t);n.length>1&&n.unbind("click").click(function(){e.toggleClass("i-hidden");var t=$(this).data("stat");t&&csh_ifmsid(t)}),$(".etrains__track-time",t).unbind("mouseover").mouseover(function(){var t=this.onclick().id;$("#"+t).removeClass("i-hidden")}).unbind("mouseout").mouseout(function(){var t=this.onclick().id;$("#"+t).addClass("i-hidden")})}window.initEtrains=t}(),function(){"use strict";home.htmlFilter=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},home.ltgtFilter=function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;")},home.urlFilter=function(t){return t.replace(/./g,function(t){return t.match(/[&@\/;:=+?$]/)?t:encodeURIComponent(t)})},home.capitalize=function(t){return t?t[0].toUpperCase()+t.substr(1):""},home.decline=function(t,e){return e&&e.length?0===t&&e[3]?e[3]:e[1]||e[2]?e[2]?(t%=100,t>=20&&(t%=10),1===t?e[0]:t>1&&5>t?e[1]:e[2]):t>=0&&1>=t?e[0]:e[1]:e[0]:e},home.isWebpSupported=function(t){return t?!t.isMobile&&("WebKit"===t.BrowserEngine&&("Chrome"===t.BrowserName||"YandexBrowser"===t.BrowserName||"Opera"===t.BrowserName)||"Presto"===t.BrowserEngine&&t.BrowserVersion>11.1):!1},home.isXivaSupported=function(t){return!t.EditMode&&t.XivaUrl&&!t.isOldIE&&!t.isMSIE9},home.encodeParams=function(t){return JSON.stringify(t).replace(/"/g,"'")},home.getJPathValue=function(t,e){for(var n=t,i=e.split("."),o=0;n&&void 0!==n[i[o]];)n=n[i[o++]];return n instanceof Object?"":n},home.getBEMParams=function(t){return home.htmlFilter(JSON.stringify(t))},home.getBEMClassname=function(t,e){var n,i=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),i)for(n in i)i.hasOwnProperty(n)&&(i[n]||0===i[n])&&(o+=" "+t+"_"+n+"_"+i[n]);return o},home.getAttributes=function(t){if(!t)return"";var e,n="";for(e in t)if(t.hasOwnProperty(e)){var i=t[e];(i||0===i)&&(i=i.toString().replace(/"/g,"&quot;"),n+=" "+e+'="'+i+'"')}return n},home.formatNumber=function(t,e,n){if(isNaN(t))return t;t+="",e=e||",",n=n||"&nbsp;";var i=t.lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==i?s=e+t.substr(i+1):i=t.length;--i>-1;)a=t[i]+a,r++,3===r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(n)+s},home.deepExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(e[n]instanceof Array||"object"!=typeof e[n]?t[n]=e[n]:(t[n]=t[n]||{},home.deepExtend(t[n],e[n])));return t},home.rnd=function(){return String(Math.random()).substr(2)},home.randomInteger=function(t,e){var n=t+Math.random()*(e+1-t);return Math.floor(n)},home.getJPathValue=function(t,e){for(var n=t,i=e.split("."),o=0;n&&void 0!==n[i[o]];)n=n[i[o++]];return n instanceof Object?"":n}}(),function(){"use strict";var t=150,e=!!detector.getCSS3TransformProperty();BEM.DOM.decl("domik2",{onSetMod:{js:function(){this.__base(this),this._shown=this.hasMod("expanded","yes"),this._logged=this.hasMod("logged","yes"),$(this.changeThis(function(){0===this.domElem.find(".domik2__dropdown-wrapper").length&&BEM.DOM.append(this.domElem,".domik2__dropdown-wrapper"),this._bindEvents()}))}},_bindEvents:function(){this._initUsermenu(),this._initSizes(),this._initToggle(),this._initSocial(),this._initMultiauthPromo(),this._initStale(),this._initMailCountUpdate()},_initToggle:function(){this.bindTo("toggler","mousedown",this._preventSelection),this.bindTo("toggler","click",this._toggleExpanded)},_initSocial:function(){this.bindTo("social-more","mousedown",this._preventSelection),this.bindTo("social-more","click",this._toggleSocialExpander),this.bindTo("dropdown-wrapper","scroll",function(){this.elem("dropdown-wrapper").scrollLeft(0)})},_preventSelection:function(t){t.preventDefault()},_initMultiauthPromo:function(){var t,e,n="doNotShowMultiAuthPromo",i=home.getData("domik2.multiauth");i&&(i.close&&((new Image).src=i.close),home.localStorage.getItem(n)||(t=$(i.html),this._appendSlide(t),e=function(){home.localStorage.setItem(n,1),this._nextSlide()},this.bindTo("dropdown-skip-multiauth","click",e),this.bindTo("dropdown-multiauth-close","click",e),this._afterAnimation(function(){x.amd.require("statlog",function(e){e.logByFragment({doc:t})})})))},_initStale:function(){var t=this.findBlockInside("stale-not-me","button");t&&t.on("click",this.changeThis(function(){var t=this.findBlockInside("auth");t.logout(),this._nextSlide()}))},_initMailCountUpdate:function(){$(window).on("mailcount",this.changeThis(this._updateMailCounter)),this.params.uid&&this.channel("mail").on("update",this.changeThis(function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}))},_initUsermenu:function(){this._usermenu=this.findBlockInside("usermenu-popup","popup"),this._usermenu&&this._usermenu.on("hide",this.changeThis(function(){this.elem("usermenu-trigger").attr("aria-expanded","false")}))},_initSizes:function(){this._collapsedNotificationsWidth=!this.hasMod("expanded","yes")&&this.hasMod("logged","yes")?this.elem("collapsed-notifications").width():0,this.elem("dropdown").css("height",this.elem("slide","type","current").height())},_afterAnimation:function(n,i){var o=this;!e||void 0!==i&&i!==!0?n.call(this):setTimeout(function(){n.call(o)},t)},_toggleExpanded:function(){var t,e=this.hasMod("expanded","yes");e=!e,this._shown=e,e&&!this._collapsedNotificationsWidth&&this.hasMod("logged","yes")&&(this._collapsedNotificationsWidth=this.elem("collapsed-notifications").width()),this._collapsedNotificationsWidth&&this.elem("collapsed-notifications").css("max-width",e?0:this._collapsedNotificationsWidth),this.toggleMod("expanded","yes",e),this._toggleBodyClass(),e||(t=this.findBlockInside("auth"),t&&t.hideError(),this.delMod(this.elem("collapsed-notifications"),"clickable")),this.trigger(e?"expanded":"collapsed"),this._afterAnimation(function(){this.elem("user-block").attr("tabindex",e?-1:null),e&&this.setMod(this.elem("collapsed-notifications"),"clickable","no"),this._saveState(e),this._sendStat(e?"expand":"collapse"),"undefined"!=typeof workerMessage&&workerMessage("update",{name:"domik",visible:this._shown})})},_saveState:function(t){var e=t?"setOn":"setOff",n=this.params[e];if(n)try{var i=$(".domik2__frame");i.length||(i=$('<iframe class="domik2__frame" style="display:none"></iframe>'),$("body").append(i)),i.attr("src",n)}catch(o){}},_sendStat:function(t){var e=this.params.counters&&this.params.counters[t];e&&cp(e)},_toggleSocialExpander:function(){var t=!this.hasMod("social-expanded","yes");return this.toggleMod("social-expanded","yes"),this._sendStat("socialExpand"),this.setMod("social-expanded",t?"yes":"no"),this.elem("social-more").attr("aria-checked",t?"true":"false"),this.elem("auth-button").attr("tabindex",t?-1:106),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this.elem("dropdown").css("height",e.height()),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})},_appendSlide:function(t){if(t){var e=this.elem("slider"),n=this.elem("slide","type","current");t.prependTo(e),this.setMod(t,"type","current"),this.setMod(n,"type","next"),this.elem("dropdown").css("height",t.height())}},_updateMailCounter:function(t,e){var n=!1,i=e.value;isNaN(i)||this._count===i||(this._count=i,n=!0),n&&this.elem("notification","type","mail").find(".domik2__notification-info").text(i)},_toggleBodyClass:function(){var t=this.hasMod("expanded","yes");$("body").toggleClass("b-page_domik_visible",t)},_showUserMenu:function(t){return this._usermenu.toggle(this.domElem),$(t.target).closest(".domik2__usermenu-trigger").attr("aria-expanded","true"),this._sendStat("userMenu"),!1}},{live:function(){return this.liveBindKey("social-more","space",function(){return this._toggleSocialExpander()}),this.liveBindTo("usermenu-trigger","click",function(t){return this._showUserMenu(t)}),this.liveBindKey("usermenu-trigger","space",function(t){return this._showUserMenu(t)}),!1}})}(),BEM.DOM.decl({block:"input",modName:"forgot",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateForgot)._updateForgot()}},_updateForgot:function(){this.toggleMod(this.elem("forgot"),"visible","no","yes",!!this._val)}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").prop("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(t,e){return this.isDisabled()?!1:(this.elem("control").prop("checked","yes"===e),this.afterCurrentEvent(function(){this.trigger("change",{checked:"yes"===e})}),void this.setMod(this.elem("box"),"checked",e))},disabled:function(t,e){this.elem("control").prop("disabled","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onClick:function(){this.isDisabled()||this.setMod("focused","yes")},_onChange:function(t){t.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(t){this.setMod("focused","focusin"===t.type?"yes":"")},_onMouseOverMouseOut:function(t){this.isDisabled()||this.setMod("hovered","mouseover"===t.type?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("control","focusin focusout",function(t){this._onFocusInFocusOut(t)}).liveBindTo("mouseover mouseout",function(t){this._onMouseOverMouseOut(t)})}}),function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){cp(this.params.stat)})}}})}(),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input").on("change",this._onInputChange,this),this._password=this.findBlockInside("password","input").on("change",this._onInputChange,this),this._button=this.findBlockInside("button","button"),this._error=null,this._errorOwner=null,this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},_checkInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var n=t();return Array.isArray(n)?(e.showError(n[0],BEM.I18N("auth",n[1])),n[0].elem("control").attr("aria-invalid",!0),!1):!0});return i&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),i
},_onInputChange:function(){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(){if(this.disableButton(),this.elem("retpath").val(this.__self._getRetpath()),!this._timestamp){var t=this.__self._timestampName;this._timestamp=$('<input type="hidden" name="'+t+'"/>').appendTo(this.domElem)}this._timestamp.val(+new Date);var e=this.domElem.attr("action");e&&this.domElem.attr("action",e.replace(/^(https?:)?/,"https:"))},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var n=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,n.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){var t,e=this.__self;return this._onInputChange(),t=this.findBlockInside("register","button"),t&&t.url(e._getRegisterURL()),t=this.findBlockInside("remember","button"),t&&t.url(e._getRememberURL()),this}},{_fromName:"from",_retpathName:"retpath",_timestampName:"timestamp",_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[---A-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_getRetpath:function(){return BEM.blocks["i-global"].param("retpath")},_getPassportURL:function(t){var e=BEM.blocks["i-global"],n=e.param("passport-host"),i=e.param("passport-msg"),o=this._getRetpath();return[n,"/passport?mode=",t,i?"&"+this._fromName+"="+encodeURIComponent(i):"",o?"&"+this._retpathName+"="+encodeURIComponent(o):""].join("")},_getRegisterURL:function(){return this._getPassportURL("register")},_getRememberURL:function(){return this._getPassportURL("restore")},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,n,i){var o=i.checkEmpty,s=this;return[function(){return o&&0===e.length?[t._username,"fill-input"]:!0},function(){return o&&0===n.length?[t._password,"fill-input"]:!0},function(){return/[--]/.test(n)?[t._password,"wrong-keyboard-layout"]:!0},function(){return s._isUsernameValid(e,!o)?!0:[t._username,"wrong-characters"]},function(){return s._isPasswordValid(n)?!0:[t._password,"wrong-characters"]},function(){return n&&n===e?[t._password,"wrong-password"]:!0}]}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(t,arguments);var e=document.createElement("b");e.innerHTML="<!--[if IE 9]><i></i><![endif]-->",1===e.getElementsByTagName("i").length&&t._username.elem("control").add(t._password.elem("control")).keydown(function(e){return 13===e.which?(t.submit(),!1):void 0})}}}}),BEM.DOM.decl("auth",{logout:function(){if(this.params.logout){var t="frame"+parseInt(1e4*Math.random(),10),e=$('<form style="display:none" target="'+t+'" method="post" action="'+this.params.logout+'"></form>'),n=$('<iframe style="display:none" name="'+t+'"></iframe>');$("body").append(e,n),e.submit()}}}),BEM.DOM.decl("auth",{_onInputChange:function(){this.__base.apply(this),this._silentCheckInput(!0)?this.setMod(this.elem("button"),"color","yellow"):this.delMod(this.elem("button"),"color")},_silentCheckInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var e=t();return Array.isArray(e)?!1:!0});return i}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._initSocialProviders()}}},destruct:function(){var t=this._socialDropdown;t&&t.domElem&&t.desruct(),this.__base.apply(this,arguments)},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),n=this;if(e)n._createSocial(e);else{var i=t.param("social-host");if(!i)return;n._getSocialProviders(i,function(t){n._createSocial(t)})}},_getSocialProviders:function(t,e){var n=this.elem("social");n.css("height",this.__self._socialStubHeight),$.getJSON(this.__self._getProvidersURL(t),function(t){n.css("height",""),e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"];this._socialDropdown&&this._socialDropdown.hide(),BEM.blocks["social-broker"].start(function(){e.param("retpath")&&top.location.href!==e.param("retpath")?top.location.href=e.param("retpath"):top.location.reload()},function(){},{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","leftclick tap",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||32===t.keyCode&&this._onSocialClick(t)}),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var n,i,o=[];if(t=t.filter(function(t){return t.enabled}),n=t.filter(function(t){return t.primary}).map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},mix:[{elem:"social-icon",elemMods:{code:t.code}}],title:t.display_name}}),o=o.concat(n),i=t.map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},title:t.display_name,content:[{elem:"social-icon",elemMods:{code:t.code}},t.display_name]}}),n.length<t.length){var s=BEM.I18N("auth","more");o.push({block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:s,"aria-label":s},content:"  "},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:e}}],content:i}}]})}return o},_socialStubHeight:28}),function(){"use strict";var t={SPACE:32};BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),Lego.params.statRoot&&this._socialDropdown&&this._socialDropdown.bindTo("switcher","click",function(){cp(Lego.params.statRoot+".mail.logout.domik.social_more")})}}},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],n=this.elemParams(t.data.domElem),i=n.provider;return this._socialDropdown&&this._socialDropdown.hide(),Lego.params.statRoot&&cp(Lego.params.statRoot+".mail.logout.domik.social_login."+i),n.url?(window.location=n.url,!1):void BEM.blocks["social-broker"].start(function(){var t,n=e.param("retpath");return n&&top.location.href!==n?(t=setTimeout(function(){top.location.href=n},5e3),void $.ajax({url:Lego.params["pass-host"]+"/services",data:{locale:BEM.blocks["i-global"].param("lang"),yu:$.cookie("yandexuid")},dataType:"jsonp",success:function(e){clearTimeout(t);for(var i=0,o=e.length;o>i;i++){var s=e[i].url&&(e[i].url.match(/^(?:https?:)?\/\/([^\/]+)/)||[])[1]||"";if(-1!==n.indexOf(s))return void(top.location.href=n)}top.location.reload()}})):void top.location.reload()},function(){},{provider:i})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","keydown",function(e){e.which===t.SPACE&&this._onSocialClick(e)}),!1},_buildSocial:function(t){var e=this.__base.apply(this,arguments),n=e[e.length-1];"dropdown"===n.block&&(n.content[0].content="",n.content[0].attrs={"aria-haspopup":"true","aria-expanded":"false","aria-label":BEM.I18N("auth","more")},n.content[1].js={directions:{to:"bottom",axis:"right",offset:{left:10}}});var i={};return x.each(t,function(t){i[t.code]=t.display_name}),x.each(e,function(t){"social-link"===t.elem&&(t.attrs=t.attrs||{},t.attrs.title=t.attrs["aria-label"]=i[t.js.provider],t.attrs.role="button")}),e}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,n){var i,o,s,r,a=this;if(this._cleanup(),this._onSuccess=t,this._onFailure=e,n=$.extend({},a._getDefaultParams(),n),i=n.startUrl+"?",r=n.popupName,delete n.startUrl,delete n.popupName,o=n.display,s=n.retpath,o&&"popup"!==o&&(n.retpath=n.retnopopup||n.retpath||window.location.href,delete n.retnopopup),i+=Object.keys(n).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e])),t},[]).join("&"),o&&"popup"!==o)return void this._navigate(i);this._salt=(~~(1e9*Math.random())).toString(16);var u=r+"_"+this._salt;this._lsLoginStatusKey="login_status_from_"+u,this._window=window.open(i,u,this._getPopupParams(),!1),this._window&&(this._window.focus(),clearInterval(this._timer),this._timer=setInterval(function(){var t=window.localStorage.getItem(a._lsLoginStatusKey);if(a.isClosed()&&(clearInterval(a._timer),!t))return void a.onFailure({status:"error"});if(t){var e=a._deserialize(t);a._handleStatus(e)===!1&&a.onFailure({status:"error"})}},500))},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(n){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status?(this.onFailure(t),!0):!1},isClosed:function(){if(!this._window)return!0;try{return this._window.closed}catch(t){return!0}},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,n,i){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",n,", height=",i].join("")},_getPopupParams:function(){var t,e,n=this._windowWidth,i=this._windowHeight;return window.opera?(t=(screen.availWidth-n)/2,e=(screen.availHeight-i)/2):(t=(window.innerWidth-n)/2,e=(window.innerHeight-i)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,n,i)},_cleanup:function(){clearInterval(this._timer),this._lsLoginStatusKey&&window.localStorage.removeItem(this._lsLoginStatusKey),this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}},{start:function(){this._current&&this._current.destruct(),this._current=BEM.create("social-broker"),Lego.block["i-social"]={broker:this._current},this._current.start.apply(this._current,arguments)},onSuccess:function(){this._current.onSuccess.apply(this._current,arguments)},onFailure:function(){this._current.onFailure.apply(this._current,arguments)}}),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"serverside",modValue:"yes"},{onSetMod:{js:function(){var t=this;t._button=t.findBlockInside("button","button"),t._username=t.findBlockInside("username","input"),t._password=t.findBlockInside("password","input"),t._password.on("change",t._onInputChange,t),t._username.on("change",t._onInputChange,t),t.redraw(),t._errorOn=null,t.bindTo("submit",t._onBeforeSubmit)}},_createSocial:function(){}})}(),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"hint",modValue:"yes"},{_checkInput:function(t){var e=this,n=e.__self,i=e._username.val(),o=e._password.val();if(t){if(0===i.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return n._isUsernameValid(i)?(e.hideError(),!0):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)}},{_isUsernameValid:function(t){return!/\s/.test(t)},_buildError:function(){var t=this.__base();return t.mods.theme="hint",t.mods["tail-size"]="xs",t.js.directions={to:"left",axis:"middle",offset:{left:-15}},t}})}(),BEM.DOM.decl("user",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("leftclick tap",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e,n=this.__self,i=n._buildTypePopup(this._uniqId,this.params.mods,this.params.js),o=$(BEMHTML.apply(i)),s=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,o),e=this._popup=o.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),s){var r=s.domElem;t.getUsernameBlock().val(r.find("input[name=login]").change().val()),t.getPasswordBlock().val(r.find("input[name=passwd]").change().val()),delete this.params.hidden,s.destruct()}return this._created=!0,this},open:function(){var t=this;return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){t._form.getUsernameBlock().setMod("focused","yes"),t._form.redraw()}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,n){var i=(n||{}).explain;return{block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},n),mods:$.extend({type:"popup"},e),content:[i?{elem:"explain",content:i}:"",{block:"auth",mods:{content:"auto"}}]}}}}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&9===t.which&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),n=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",n?"&yu="+n:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=window.devicePixelRatio,this._isRetina>1&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n,o=[t,"/get-yapic/",e,i,"?rnd=",+new Date].join("");return o},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){var t=this._getIconPath();this._setIconBackground(t)},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}},_getIconSize:function(){return"middle"},redraw:function(){return this}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this._isRetina&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n;return[t,"/get-yapic/",e,i,"?rnd=",+new Date].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this._setIconBackground(this._getIconPath())},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("notice",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},setCount:function(t){t>=0||(t=0);var e=$(BEMHTML.apply({block:"notice",elem:"value",count:t,maxCount:this.params.maxCount})).text();return this._count=t,this.elem("value").text(e),this},getCount:function(){return this._count}}),function(){var t,e={};BEM.DOM.decl("notice",{onSetMod:{js:function(){var e=home.getData("notice.enabled");if(e){var n=this.getUid();n&&(this.updateByInit(),t||(t=!0,this.channel("mail").on("fresh",this.changeThis(this.updateByXiva))),this.valueFromCache(),this.channel("notice").on("up",this.changeThis(this.valueFromCache)))}}},getUid:function(){if(!this.uid){var t=this.findBlockOutside("user");this.uid=String(t.domElem.data("uid")||t.params.uid||"")}return this.uid},updateByInit:function(){var t=this.getUid();e[t]=this.params.count||0,this.channel("notice").trigger("up")},updateByXiva:function(t,n){if(n){var i=n.uid;i in e&&(e[i]=n.value,this.channel("notice").trigger("up"))}},needShowDot:function(){for(var t in e)if(e.hasOwnProperty(t)&&e[t]>0)return!0;return!1},valueFromCache:function(){var t=this.getUid();this.value(e[t])},value:function(t){t?this.delMod("state"):this.hasMod("mode","all")&&this.needShowDot()?this.setMod("state","dot"):this.setMod("state","off"),this.domElem.html(t||"")}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu")||0,this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem(this.elem("icon").length?"icon":"name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){return this.__base.apply(this,arguments),this._menu||(this._menu=!0,this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||32===t.which&&this.domElem.click()})),!1}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._dropdown&&this._dropdown.on("show",function(){this.unbindFromWin("scroll")}.bind(this))}}}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){var t=this;t.updateInformer(t.onUpdateSuccess,t.onUpdateError)}}},updateInformer:function(t,e){var n=this;n._getExporter().get({key:$.cookie("yandexuid")},function(n){n.unread?t.apply(this,arguments):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=parseInt(t.unread,10)||0,n=this.params.unreadMax;e&&n&&e>n&&(e=n+"+");var i=e?e+" ":"";BEM.DOM.update(this.domElem,i+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(),cache:!1,callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(){return BEM.blocks["i-global"].param("export-host")+"/for/unread.xml?callback=?"}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(t,e,n,i){$.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i))},_get:function(e,n,i,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,r.data[s])},this):this._do(e,n,i,o)},_do:function(){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(n,e);o.data[s]=i,o.keys.push(s)},dropCache:function(){delete t[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,s,r){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(s,r)&&e.apply(i.callbackCtx,n)}),u=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,s)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(i.paramsToSettings||[]),function(t,e){r[e]=i[e]}),$.ajax(r).done(a).fail(u)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.DOM.decl({block:"user",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.channel("auth").on("notme",function(){this.delMod("login")},this)}}}),BEM.DOM.decl("usermenu",{_getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},_selectUser:function(t){var e=t.closest(".usermenu__user").data("uid");if(e)return this._getEmbeddedAuth().setData({uid:e},this.changeThis(this._switchResponse,this)).submit(),!1},_switchResponse:function(t){switch(t.status){case"ok":case"action-not-required":return void window.location.reload();default:window.location.href=this.params.passport}}},{live:function(){var t=function(t){return this._selectUser($(t.target))};this.liveBindTo({elem:"user",modName:"clickable",modVal:"yes"},"leftclick tap",t),this.liveBindKey({elem:"user",modName:"clickable",modVal:"yes"},"enter",t)}}),BEM.decl("i-embeddedauth",{addCallback:function(t){var e="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[e]=t,e},addQueryParam:function(t,e){var n=t.split("?"),i=n[1]?n[1].split("&"):[];return i.push(e),n[1]=i.join("&"),n.join("?")},bindCallback:function(){var t=this;window.mordaAuth={onResponse:function(e){if(!e)return void t.processResponse();for(var n=e.split("?")[1].split("&"),i={},o=0,s=n.length;s>o;o++){var r=n[o].split("=");i[r.shift()]=decodeURIComponent(r.join("="))}t.processResponse(i)}}},submit:function(){this.getForm().trigger("submit")},setData:function(t,e){if(t=$.extend({},this.params.params||{},t),this.idkey&&(t.idkey=this.idkey),e){var n=this.addCallback(e);t.retpath=this.addQueryParam(t.retpath,"from="+n)}return this.getForm().html(this.stringifyParams(t)),this},setDomain:function(){var t=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain!==t&&(document.domain=t)}catch(e){}},stringifyParams:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=this.getInputHtml(n,t[n]));return e},getInputHtml:function(t,e){return'<input name="'+t+'" value="'+e+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var t="embeddedauthframe"+parseInt(1e4*Math.random(),10);return this.form=$('<form style="display:none" target="'+t+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+t+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(t){var e=function(){};if(!t)return void this.trigger("no-data");switch(t.from&&this.callbacks[t.from]&&(e=this.callbacks[t.from],this.callbacks[t.from]=!1),this.idkey=t.idkey,t.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return e(t),void this.trigger("data-received",t);case"internal-exception":return this.idkey="",this._interr?(e(t),void this.trigger("data-received",t)):(this._interr=!0,t.from&&(this.callbacks[t.from]=e),void this.submit());default:t.url?window.location=t.url:(e(t),this.trigger("data-received",t))}}}),$(function(){function t(t){var e;i=!0,e=t.bem("popup"),e.show(n)}function e(e,o){var s=$(".geosuggest"),r=$(o),a=$(e),u=s.find(".geosuggest__header")[0],c=u?u.onclick():{};s.length>0&&setTimeout(function(){var e;if("1"===c.ispopup){if(n=a,0===n.length)return!1;t(s)}else if(n=r,0===n.length)return!1;e=function(){t(s)},n.click(e),$(document).keydown(function(t){"27"===t.keyCode&&s.bem("popup").hide()}),s.bem("popup").on("hide",function(){i=!1}),"1"===c.ispopup&&s.bem("popup").on("hide",function(){n.unbind("click",e)}),$(window).resize(function(){setTimeout(function(){if(i){s.bem("popup")._isShowed=!1,s.bem("popup").show(n),i=!0;try{document.body.focus()}catch(t){}}},142)}),$(".b-region__ajax-action").click(function(){return $(document.body).append('<iframe style="display:none" src="'+this.href+'"></iframe>'),s.bem("popup").hide(),!1})},1e3)}var n,i=!1;e(".link_geosuggest_yes",".link_geosuggest_yes")}),BEM.DOM.decl("headline-mail",{onSetMod:{js:function(){this.params.uid&&this.channel("mail").on("update",this.changeThis(this.update))}},update:function(t,e){e.uid===this.params.uid&&this.elem("count").html(e.value)}}),x.amd.require("statlog",function(t){BEM.DOM.decl("themes-promo",{onSetMod:{js:function(){var e,n=this,i=this.params,o=i.promos,s=i.stat;this.expires=new Date;for(var r=0,a=o.length;a>r;r+=1)if(this._canShow(o[r])){e=this.promo=o[r];break}if(e){this.elem("link").attr({href:"/themes/"+(e["default"]||"")+"#tab="+(e.group||"all"),title:e.text,"data-statlog":s?n._getStatAttr(e.counter+".preview"):""});var u=$('<img class="themes-promo__img" usemap="#theme-promo"/>');u.one("error",function(){$(this).hide()}),u.one("load",this.changeThis(function(){this.elem("image").append(u),e.show_url&&((new Image).src=e.show_url),this.setMod("state","shown"),s&&t.logByFragment({doc:this.domElem[0]})})),u.attr("src",i.imgRoot+e.counter+".jpg")}},state:{shown:function(){this.findBlockOutside("footer").setMod("themes","promo"),this._hasStorage()&&this.bindTo("link","click",function(){this._banPromo(this.promo.counter,Number(this.expires.setMonth(this.expires.getMonth()+3)))})}}},_canShow:function(t){return this._checkConditions(t)&&this._checkLS("hot")&&this._checkLS(t.counter)},_checkConditions:function(t){return!t["default"]||t["default"]!==this.params.skin},_checkLS:function(t){if(!this._hasStorage())return!0;var e,n=Number(new Date),i=this._getUnlockDate(t);return i?(e=i-n,e>0?!1:(this._cleanGarbage(t),!0)):!0},_banPromo:function(t,e){home.localStorage.setItem("tp:"+t,e)},_cleanGarbage:function(t){home.localStorage.removeItem("tp:"+t)},_getUnlockDate:function(t){var e=home.localStorage.getItem("tp:"+t);return null!==e?Number(e):null},_getStatAttr:function(t){return"head.skinpromo."+t},_link:function(t){return(t.url?'<a href="'+t.url+'"':"<span")+' class="b-link i-bem'+(t.mix?" "+t.mix:"")+'"'+(t.stat?" "+t.stat:"")+'onclick="return{'+(t.js||"'b-link':{}")+'}">'+(t.text||"")+(t.url?"</a>":"</span>")},_hasStorage:function(){return!home.disabledLS}})}),BEM.DOM.decl("themes-touch-promo",{onSetMod:{js:function(){var t=this.__self.LS_KEY,e=$(window),n=this;!home.localStorage||home.disabledLS||home.localStorage.getItem(t)||e.width()>=951&&e.height()>=520&&setTimeout(function(){home.localStorage.setItem(t,"1"),n.setMod("visible","yes"),n.bindTo("close","click",function(){n._close(),cp(n.params.counters.close)}),setTimeout(n.changeThis(n._close),15e3),cp(n.params.counters.show)},1e3)}},_close:function(){this.delMod("visible")}},{LS_KEY:"themesTouchPromoShown"}),$(document).ready(function(){!function(){function t(){return $(".b-mobile-balloon")[0].onclick()}$(".b-mobile-balloon__button_yes").click(function(){document.location.href=t().url}),$(".b-mobile-balloon__button_no").click(function(){var e=t().statNo;(new Image).src=t().closeurl,e&&cp(e),$(".b-mobile-balloon").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100)})}()}),function(){function t(t){return home&&home.getData&&home.getData(t)}function e(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+t[n]);return e.join(",")}function n(){return s||BEM.blocks["i-global"].param("click-href")+"click"}function i(i,o,s){var r=t("timing.data")||t("b-timing.data");if(r){var a,u=i.startTime,c="/dtype=stred/pid=1/cid=72202";
c+="/reqid="+r.reqid,c+="/path=690.2044";var l={1040.318:Math.round(i.responseEnd-u)};i.domainLookupStart&&(l[1036]=Math.round(i.domainLookupStart-u),l[1037]=Math.round(i.domainLookupEnd-i.domainLookupStart),l[1038]=Math.round(i.connectEnd-i.connectStart),l[1039]=Math.round(i.responseStart-i.requestStart),l[1040]=Math.round(i.responseEnd-i.responseStart)),i.secureConnectionStart>0&&(l[1676]=i.secureConnectionStart-i.connectStart);for(a in r.vars)r.vars.hasOwnProperty(a)&&(l[a]=r.vars[a]);for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a]);for(a in l)l[a]<0&&delete l[a];l[1042]=encodeURIComponent(navigator.userAgent),c+="/vars="+e(l),o&&(c+="/cdn="+o),c+="/slots="+(t("exp.data")||"")+"/*",(new Image).src=n()+c}}function o(t,e){return window[t]?void e():void setTimeout(function(){o(t,e)},r)}if(!window.performance||!window.performance.getEntries)return void(home.resourcesTiming={setClckHost:function(){},wait:function(){},send:function(){}});var s="",r=1e3;home.resourcesTiming={setClckHost:function(t){s=t},send:function(t,e,n){try{var o=window.performance.getEntries("resources");if(o&&o.length)for(var s=0,r=o.length;r>s;s++)if(o[s].name.indexOf(t)>-1)return void i(o[s],e,n)}catch(a){return}},wait:function(t,e){o(t,e)}}}(),$(document).ready(function(){var t=home&&home.getData&&home.getData("nearestjs.data");t&&setTimeout(function(){var e="//yastatic.net/"+t.file;$.getScript(e),home.resourcesTiming.wait("YaStaticRegion",function(){home.resourcesTiming.send(e,window.YaStaticRegion,{143:t.name})})},t.timeout)}),BEM.DOM.decl("b-votes",{onSetMod:{js:function(){this.bindTo("cross","leftclick tap",function(){return this.setMod("state","hidden"),$(window).trigger("popupredraw.lego"),this.params.closeUrl&&((new Image).src=this.params.closeUrl),!1})}}}),BEM.DOM.decl({block:"b-votes",modName:"ie",modVal:"true"},{onSetMod:{js:function(){this.__base(),this.updateSelectors(),this.bindToWin("resize",$.debounce(this.updateSelectors,150))}},updateSelectors:function(){var t=BEM.DOM.win.width(),e=[],n=[];[1e3,1070,1140,1210,1280].forEach(function(i){var o="b-votes_gte_"+i;t>=i?e.push(o):n.push(o)}),this.domElem.removeClass(n.join(" ")),this.domElem.addClass(e.join(" "))}}),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function n(t,e){return" "+t+'="'+e+'"'}function i(t,e,n){var i=t.match(e);return i&&i[n+1?n:1]||""}function o(){return i(h.cookie,new RegExp("fuid"+u+"=([^;]+)"))}function s(){var t=h.domain;return t&&i(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,u,c,l=t.host||"kiks.yandex",d=window,h=document,p=navigator,f=p.userAgent,m=p.mimeTypes,g=9,_=f&&/gecko/i.test(f),v=f&&/MSIE/.test(f)&&/Win/.test(f),b=_?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",x="//"+l+".ru/fu",k="//"+l+".ru/fu",E="application/x-shockwave-flash",M="style",S="position:absolute;margin-left:-999em;top:0;",I=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',C="allowScriptAccess",T="always",B="height",D="wmode",P="window",$="width",O="bgcolor",F="#FFFFFF",A="ya_fc",j=n(M,S)+n($,1)+n(B,1)+n("id",A)+n("tabindex","-1")+n("aria-hidden","true"),N=!1;d.ya_fc_external=function(t,i,l,d){r=t,a=i,u=l,c=d||"fc";var h,p=m&&m[E]?m[E].enabledPlugin:0,f=N,y=0,M=o()?w.replace("%d",a).replace("%s",c):x.replace("%s",s());if(p)y=p.description.split("Shockwave Flash ")[1],f=parseInt(y,10)>=g;else if(v){f=N;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+g)}catch(B){}}return h=f?_?'<div style="'+S+'"><'+b+j+n("src",M)+n(D,P)+n(O,F)+n(C,T)+n("type",E)+"/></div>":(v?"<"+b+I+j+">"+e("movie",M):"<"+b+j+n("type",E)+n("data",M)+">")+e(D,P)+e(O,F)+e(C,T)+"</"+b+">":'<img src="'+k.replace("%s",s())+'" style="'+S+'" />'},d.ya_fc_requestData=function(){var t=h.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},d.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),h.cookie="fuid"+u+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},d.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),n=h.createElement("iframe"),i=h.getElementsByTagName("body")[0],o="40px;";n.src=e,n.style.cssText=$+o+B+o+"border:0;"+S,n.frameBorder=0,n.setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),i&&i.insertBefore(n,i.firstChild)};var L=this,R=arguments.callee.load=function(t){var e,n;t.mode?(e="00",n="kfc"):e="07",L.replaceWith(d.ya_fc_external("07_2",e,"01",n))};L.hasClass("i-flashcookie_autoload_no")||R(t)};Lego.block["i-flashcookie"]=function(n){var i=this.hasClass("i-flashcookie_type_inline")?e:t;i&&i.call(this,n)}}(),window.ya_fc_complete=function(){setTimeout(function(){var t=document.getElementById("ya_fc");t&&t.parentNode.removeChild(t)},0)},$(function(){function t(){var t=n.height(),e=i.height(),a=$(window).height();o||(o=t,s=t-e),i.css(o+r>a?{height:Math.max(a-r-s,200),overflowY:"auto",marginRight:7}:{height:"auto",overflowY:"visible",marginRight:0})}function e(e){var i=e.is(".b-disaster")?e:$(".b-disaster",e);i.bind("leftclick tap",function(){if(n){var e=n.bem("popup");x.amd.require("statlog",function(t){e.isShown()?e.hide():(e.show(),t.logByFragment(e.domElem)),e.on("hide",function(){t.log("head.disaster.popup.closed")})})}t(),$(window).trigger("disasterpopup.show")})}var n=$(".b-disaster-popup"),i=$(".b-disaster-popup__content"),o=0,s=0,r=70;n.find(".b-disaster-content").each(function(){var t=this.onclick()||{};t=t.content||"",$(this).replaceWith(t)}),window.initDisasterPopup=e,$(window).resize(function(){t()})}),function(){"use strict";x.amd.require("statlog",function(t){x.Component.extend({id:"statlogger",init:function(){t.configure({statRoot:this.statroot,showId:this.showid,enabled:"true"===this.enabled,sendAtWill:!0,redirHost:this.redirhost,clckDemonHost:this.clckhost}),t.handleClicks(),t.isEnabled()&&(t.checkAndLog(),$(window).on("resize",function(){t.checkAndLog()}))}})})}(home),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=u.call(arguments,1),c=0,d=0,h=0,p=0,f=0,m=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(h=-1*r.detail),"wheelDelta"in r&&(h=r.wheelDelta),"wheelDeltaY"in r&&(h=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in r&&(h=-1*r.deltaY,c=h),"deltaX"in r&&(d=r.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===r.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,h*=g,d*=g}else if(2===r.deltaMode){var _=t.data(this,"mousewheel-page-height");c*=_,h*=_,d*=_}if(p=Math.max(Math.abs(h),Math.abs(d)),(!s||s>p)&&(s=p,i(r,p)&&(s/=40)),i(r,p)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/s),d=Math[d>=1?"floor":"ceil"](d/s),h=Math[h>=1?"floor":"ceil"](h/s),l.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();f=e.clientX-v.left,m=e.clientY-v.top}return e.deltaX=d,e.deltaY=h,e.deltaFactor=s,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,d,h),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){s=null}function i(t,e){return l.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(t.event.fixHooks)for(var c=r.length;c;)t.event.fixHooks[r[--c]]=t.event.mouseHooks;var l=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",l.getLineHeight(this)),t.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(){"use strict";BEM.DOM.decl("b-themes-catalog",{onSetMod:{js:{inited:function(){this._vars={scrollItemsCount:5,scrollSpeed:300,tabsScrollWidth:100,themeItemWidth:this.elem("theme-item").outerWidth(!0),leftGapWidth:this.elem("theme-item-gap").outerWidth(!0),rightGapWidth:this.elem("theme-item-gap").outerWidth(!0),bodyWidth:0,visibleThemesCount:0,buttonsWidth:0,categoriesTabsWidth:0,categoriesScrollWidth:0,notLoadThemes:this.elem("theme-img").toArray()};var t=this.getLocationHash(),e=this.elem("theme-item","id",this.params.activeTheme).position().left-this._vars.leftGapWidth,n=t.group||t.tab;this.updateResize(),this.setMod("active-theme",this.params.activeTheme),n&&this.elem("tab","name",n).length?this.setMod("current-group",n):this.setMod("current-group","all"),"groups_scroll_position"in t&&this.elem("tabs-scroll").scrollLeft(parseInt(t.groups_scroll_position)||0),"themes_scroll_position"in t&&(e=parseInt(t.themes_scroll_position||0)),this.elem("body").scrollLeft(e),this.updateView(),this.bindToWin("resize",$.throttle(function(){this.updateResize(),this.updateView(),this.loadImgPreview()}),100),this.bindTo("tab","click",function(t){this.setMod("current-group",this.getMod($(t.target),"name"))}),this.bindTo(this.elem("arrow","scroll","left"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount+this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"-="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll","right"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount-this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"+="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll-tab","left"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"-="+this._vars.tabsScrollWidth},"fast")}),this.bindTo(this.elem("arrow","scroll-tab","right"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"+="+this._vars.tabsScrollWidth},"fast")}),this.bindTo("body","mousewheel",function(t){return this.elem("body").scrollLeft(this.elem("body").scrollLeft()-t.deltaFactor*(t.deltaY-t.deltaX)),!1}),this.bindTo("body","scroll",this.updateView),this.bindTo("body","scroll",this.loadImgPreview),this.bindTo("tabs-scroll","scroll",this.updateView),this.bindTo("tabs-scroll","mousewheel",function(t){return this.elem("tabs-scroll").scrollLeft(this.elem("tabs-scroll").scrollLeft()-t.deltaFactor*(t.deltaY-t.deltaX)),!1}),this.bindTo("theme-item","click",function(t){return $(t.target).parents(".b-themes-catalog__theme-item_active_true").length?(t.preventDefault(),!0):(t.preventDefault(),void this.addHashAndGo($(t.currentTarget).attr("href"),{group:this.getMod("current-group"),groups_scroll_position:this.elem("tabs-scroll").scrollLeft(),themes_scroll_position:this.elem("body").scrollLeft()}))}),this.setMod(this.elem("bg"),"hidden","true"),this.loadImgPreview(),window.Ya&&window.Ya.share2||$.getScript("//yastatic.net/share2/share.js",function(){this.setMod(this.elem("theme-item-share"),"enable","true")}.bind(this))}},"current-group":function(t,e){var n=this.elem("tab"),i=this.elem("tab","name",e),o=this.elem("theme-item"),s=this.elem("theme-item","group-"+e,"true");this.setMod(n,"active","false"),this.setMod(i,"active","true"),o.addClass("i-hidden"),s.removeClass("i-hidden"),this._vars.visibleThemesCount=s.length,this.elem("body").scrollLeft(0),this.updateView(),this.loadImgPreview()},"active-theme":function(t,e){this.setMod(this.elem("theme-item"),"active","false"),this.setMod(this.elem("theme-item","id",e),"active","true")}},updateResize:function(){this._vars.bodyWidth=this.elem("body").width(),this._vars.buttonsWidth=0,this.elem("btn").each(function(t,e){this._vars.buttonsWidth+=$(e).outerWidth(!0)}.bind(this)),this._vars.categoriesTabsWidth=this.elem("categories-general").outerWidth(!0)+this.elem("categories-other").outerWidth(!0),this._vars.categoriesScrollWidth=this._vars.bodyWidth-this._vars.buttonsWidth},updateView:function(){var t=this._vars.visibleThemesCount*this._vars.themeItemWidth+this._vars.leftGapWidth+this._vars.rightGapWidth;this.setMod(this.elem("arrow","scroll","left"),"hidden",(this.elem("body").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll","right"),"hidden",(this.elem("body").scrollLeft()+this._vars.bodyWidth===t||this._vars.bodyWidth>t).toString()),this.elem("tabs-scroll").css({width:this._vars.categoriesScrollWidth+"px"}),this.setMod(this.elem("arrow","scroll-tab","left"),"hidden",(this.elem("tabs-scroll").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll-tab","right"),"hidden",(this.elem("tabs-scroll").width()>this._vars.categoriesTabsWidth||this.elem("tabs-scroll").scrollLeft()+this._vars.categoriesScrollWidth>=this._vars.categoriesTabsWidth).toString())},loadImgPreview:function(){this._vars.notLoadThemes.length&&(this._vars.notLoadThemes=this._vars.notLoadThemes.filter(function(t){var e=$(t),n=e.offset().left;return!e.parent().hasClass("i-hidden")&&n+this._vars.themeItemWidth>0&&n<this._vars.bodyWidth?(e.prepend($("<img />").attr("src",e.data("preview_url"))),!1):!0},this))},getLocationHash:function(){for(var t,e=window.location.hash?window.location.hash.substr(1).split("&"):[],n={},i=0;i<e.length;i++)t=e[i].split("="),n[t[0]]="undefined"!=typeof t[1]?t[1]:null;return n},addHashAndGo:function(t,e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+"="+e[i]);return n.length&&(t+=(-1!==t.indexOf("#")?"":"#")+n.join("&")),location.href=t,!1}})}(),function(){var t={9:"tab",13:"enter",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow",46:"delete"},e={27:"escape"};BEM.DOM.decl({block:"i-ua",modName:"interaction",modVal:"yes"},{onSetMod:{js:{inited:function(){this.bindTo("mousedown",this._onPointer).bindTo("keydown",this._onKeyboard)}}},_onPointer:function(){this.interaction="pointer",this.domElem.attr("data-interaction","pointer"),this.unbindFrom("mousedown")},_onKeyboard:function(n){var i=n.keyCode;return e[i]?void this._onPointer():void(t[i]&&"keyboard"!==this.interaction&&(this.domElem.attr("data-interaction","keyboard"),this.interaction="keyboard",this.bindTo("mousedown",this._onPointer)))}})}(),function(){var t={9:"tab",13:"enter",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow",46:"delete"},e={27:"escape"};BEM.DOM.decl({block:"i-ua",modName:"interaction",modVal:"yes"},{_onPointer:function(){this.interaction="pointer",this.domElem.attr("data-interaction","pointer"),this.__self.liveUnbindFrom("mousedown",this._onPointer)},_onKeyboard:function(n){var i=n.keyCode;return e[i]?void this._onPointer():void(t[i]&&"keyboard"!==this.interaction&&(this.domElem.attr("data-interaction","keyboard"),this.interaction="keyboard",this.__self.liveBindTo("mousedown",this._onPointer)))}},{live:function(){this.liveBindTo("mousedown",this.prototype._onPointer).liveBindTo("keydown",this.prototype._onKeyboard)}})}(),BEM.DOM.decl("dist-popup",{onSetMod:{js:function(){this.__base(),this.popup=this.findBlockOn("popup"),setTimeout(this.changeThis(this.initAfterSleep),1e3)}},initAfterSleep:function(){var t=this.params,e=this.popup.params;this.popup.hasMod("source","export")&&(this._fromExport=1),"top"===e.position?this.popup.show({top:12,left:18}):"bottom"===e.position&&(this.popup.setMod("visibility","visible"),this.popup.afterShow()),t.counters.outside&&this.popup.on("outside-click",function(){this._processCounter(t.counters.outside)},this),this._fromExport&&(this.distStat=home.ds.decl(t.distCountersParts),this.distStat.send("show")),this._processCounter(t.counters.show),this._bindActions()},_yes:function(){return this._closeBkFlag(),this.hasMod("install","inline")?(this._processCounter(this.params.counters.yes),this._fromExport&&this.distStat.send("click"),this._install()):void 0},_no:function(){this.popup.hide(),this._closeBkFlag(),this._processCounter(this.params.counters.no),this._fromExport&&this.distStat.send("cancel"),setTimeout(this.changeThis(this.popup.destruct,this.popup),1e3),window.home.gaCounter.trackCancelPopup()},_closeBkFlag:function(){this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl)},_bindActions:function(){this.bindTo("no","leftclick tap",this.changeThis(this._no)),this.bindTo("yes","leftclick tap",this.changeThis(this._yes))},_processCounter:function(t){t&&t.length&&t.forEach(function(t){"path"===t.type?csh_ifmsid(t.content):"image"===t.type&&((new Image).src=t.content)})}}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"inline"},{_install:function(){this.__base();var t=this,e=this.params;return this._inlineInstallInstance||(this._inlineInstallInstance=BEM.create("i-inline-install",{url:e.url,statPath:e.statPath+".inline",gap:e.gap,callbacks:{yes:this.changeThis(function(){this._fromExport?this.distStat.send("install"):this._processCounter(e.counters.install),this.popup.hide()}),no:this.changeThis(function(){this._fromExport&&this.distStat.send("error"),this.popup.hide()})},paranja:e.paranja,bannerid:e.bannerid,metrika:e.metrika}).init()),this._inlineInstallInstance.request().fail(function(){t.hide()}),!1}}),BEM.DOM.decl({block:"popup",modName:"at",modVal:"right-bottom"},{afterShow:function(){this.domElem.stop(!0).css({opacity:0,bottom:16}).animate({opacity:1,bottom:26},this.params.duration)},beforeHide:function(t){var e=this.domElem;return e.stop(!0,!0).animate({opacity:0,bottom:16},this.params.duration,function(){t(),e.css("opacity","")})}}),BEM.DOM.decl("news-popup",{onSetMod:{js:function(){this.popup=this.findBlockOn(this.domElem,"popup"),this.$customTabLink=$(".news__custom-tab"),this.$tab=this.$customTabLink.closest(".content-tabs__head-item"),this.news=this.findBlockOn(this.$tab.closest(".content-tabs"),"content-tabs"),this.widget=this.news.findBlockOutside("widget"),this.turnReloadOff(),this.popup.on("show",function(){x.amd.require("statlog",function(t){t.checkAndLog()})}),this.bindTo("add","click",this.add),this.bindTo("cancel","click",this.cancel),this.popup.on("hide",this.changeThis(this.hideTab)),this.show()}},show:function(){this.popup.setRelativeContainer(this.widget),this.popup.show(this.$customTabLink),this.channel("widget").on("showPreferences",this.hideOnOpenSettings,this),$(window).scrollTop(this.$tab.offset().top),this.elem("add").focus()},hide:function(){this.popup.hide()},add:function(){this.saveNewPattern(),this.saveWidgetSettings()},cancel:function(){this.hide()},hideTab:function(){var t=this.widget.getInstance();this.actualData||t._prefs.customCatId||(this.news.hasMod(this.$tab,"active","true")&&this.news.selectRelative(-1),this.$tab.hide()),this.turnReloadOn()},hideOnOpenSettings:function(t,e){e.elem.instance===this.widget.getInstance()&&this.hide()},saveNewPattern:function(){var t=this.widget.findBlockOutside("widgets");t.params.settings&&t.params.settings.newpattern&&t.save()},saveWidgetSettings:function(){var t=this.widget.getInstance(),e=this.params.customId,n=t._prefs;n.customCatId=e,t.saveValues(n,this.afterSave.bind(this))},afterSave:function(t){"ok"===t.result&&((new Image).src=this.params.coockieUrl,this.actualData=!0),this.hide()},turnReloadOff:function(){this.widget.getInstance().pauseReload=!0},turnReloadOn:function(){var t=this.widget.getInstance();t.pauseReload=!1,!this.actualData&&t._prefs.customCatId?t.reload():Widget.Framework.addToReloadQueue(t,t.onload)}},{live:!1}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"relative"},{setRelativeContainer:function(t){this._parentContainer=t},_findParent:function(){return this._parentContainer},setParent:function(t){return this._parent=t,this}}),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.decl({name:"dataprovider-geo",baseBlock:"input__dataprovider"},{get:function(t,e){return this.__base(t,function(t){e.call(this,t.items.map(function(t){return["geo"].concat(t)}),t.meta)})}}),BEM.DOM.decl("b-wdgt-preferences",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.delMod("position"),this.bindTo("save","click",this.save),this.bindTo("cancel","click",this.cancel),this.bindTo("reset","click",this.reset),Widget.Init({hidePreferencesHandler:this.changeThis(function(){this.hide()})}),this.bindToWin("widgetSettingsTuned",function(e){t.widget&&e.id===t.widget.getId()&&t.widget.markChanged(!1,!0)}),this.popup.on("show",function(){this._skipReturnFocus=!0}),this.popup.on("hide",function(){this.channel("widget").trigger("hidePreferences",{elem:t.widget}),t._resetPopup()}),this.popup.on("show",function(){this.channel("widget").trigger("showPreferences",{elem:t.widget})})}},show:function(t,e){this.widget=t,this.callback=e||function(){},this.setMod("loading","yes"),BEM.DOM.destruct(this.elem("form"),!0),Widget.Framework.showEditForm(t.getId(),this.elem("form"),this.changeThis(this.updateForm)),this.popup.show(this._setPopupParams()),this.bindToWin("resize",$.debounce(this.changeThis(function(){this.popup.repaint(this._setPopupParams())}),100))},hide:function(){this.widget=null,this.callback=null,this.popup.hide()},_resetPopup:function(){this.unbindFromWin("resize")},_getPopupPos:function(){var t=this.domElem.width(),e=this.domElem.height(),n=$(window).height();return{left:($(window).width()-t)/2,top:Math.max(50,$(window).scrollTop()+(n-e)/2)}},_setPopupParams:function(){var t=this._getPopupPos();return this.popup.params.top=t.top,this.popup.params.left=t.left,t},updateForm:function(t){var e;t&&(this.delMod("loading"),t.form?e=t.form:t.prefs&&(e=this.buildForm(t.prefs)),e?(BEM.DOM.update(this.elem("form"),e),BEM.DOM.init(this.elem("form")),this.elem("controls").show()):this.elem("controls").hide(),this.popup.repaint(this._setPopupParams()))},buildForm:function(t){return BEMHTML.apply({block:"b-wdgt-preferences",elem:"data",list:t})},save:function(){for(var t=this.elem("form").find("form")[0],e={},n=0;n<t.length;n++){var i=t[n];i.name&&(e[i.name]="checkbox"===i.type?!!i.checked:i.value)}this.widget.markChanged(!1,!0);var o=this.widget.getInstance();o.saveValues(e,this.callback.bind(this.widget)),this.hide()},cancel:function(){this.hide()},reset:function(){var t=this.widget.getInstance();t.dropValues(this.callback.bind(this.widget)),this.hide()}},{live:!0}),BEM.DOM.decl({block:"popup",modName:"wrapped",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.__base(),this._wrap()},"":function(){this.__base(),this._unwrap()}},wrapped:{"":function(){this._unwrap()}}},_wrap:function(){this._wrapper||(this._wrapper=this.elem("wrapper").detach()),this._wrapper&&this.domElem.wrap(this._wrapper)},_unwrap:function(){this._wrapper&&this.domElem.unwrap()},destruct:function(){this._unwrap(),this.__base()}}),BEM.DOM.decl({block:"popup",modName:"behaviour",modVal:"scrollable"},{getDefaultParams:function(){var t=this.__base();return t.top=20,t}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{getDefaultParams:function(){var t=this.__base();return t.offsetWithoutTail=5,t},repaint:function(){return this._saveDefault(),this.__base(),this.domElem.css({maxWidth:this.size.width,height:this.size.height}),this},_saveDefault:function(){this._defSize||(this._defSize=this.getPopupSize())},_resetDefault:function(){return this._defSize=null,this.domElem.css({maxWidth:"",height:""}),this},_getAvailableSpace:function(t){return this._owner?{width:this._getAvailableWidth(t),height:this._getAvailableHeight(t)}:$.extend({},this._defSize)},_getAvailableWidth:function(t){var e=BEM.DOM.getWindowSize(),n=e.width,i=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"left":n=o.left,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n+=i.left),i.right&&(n-=i.right));break;case"right":n=e.width-o.right,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n-=i.left),i.right&&(n+=i.right))}return("left"===t.to||"right"===t.to)&&(n-=this._tailPos?2*this.params.tail.width:this.params.offsetWithoutTail),Math.min(s.width,n)},_getAvailableHeight:function(t){var e=BEM.DOM.getWindowSize(),n=e.height,i=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"bottom":n=e.height-o.bottom,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n+=i.bottom),i.top&&(n-=i.top));break;case"top":n=o.top,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n-=i.bottom),i.top&&(n+=i.top))}return("bottom"===t.to||"top"===t.to)&&(n-=this._tailPos?2*this.params.tail.height:this.params.offsetWithoutTail),Math.min(s.height,n)},_calcTop:function(t){var e,n=this.__base(t),i=$(window).scrollTop(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(o.height+i,r.top+a.height),n+s.height>e&&(n=e-s.height),n},_calcLeft:function(t){var e,n=this.__base(t),i=$(window).scrollLeft(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(o.width+i,r.left+a.width),n+s.width>e&&(n=e-s.width),n},getPlacingSize:function(){return this._availSizes},_calcPlacingSize:function(t){return this._availSizes=this._getAvailableSpace(t),this._availSizes},_calcVisibilityFactor:function(){var t=this._defSize,e=this.getPlacingSize(),n=e.height*e.width,i=t.height*t.width;return n/i*100}}),BEM.DOM.decl("select",{onSetMod:{js:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")},disabled:function(t,e){var n="yes"===e;this.elem("control").attr("disabled",n),this._getButton().setMod(t,e),n&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled","yes")?!1:(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var n,i=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(n=$(this).parent("optgroup")[0],!(n&&n.disabled))&&(i=e)}),i>-1&&this._selectedIndex(i,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var n=this._getSelectedIndex();return"undefined"==typeof t||t===n?n:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:n},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){return this._isParentPopup()&&this._popup._parent.repaint(),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=38===t.keyCode,n=40===t.keyCode,i=13===t.keyCode,o=32===t.keyCode;if(e||n){if(t.preventDefault(),!this.isOpened())return this.open();var s=this._items.length,r=this._curItemIndex;if(e&&0===r||n&&r>s-2)return;if(s){var a=n?1:-1,u=0;for(u=r;u>=0&&s>=u;)if(u+=a,this._isSelectableItem(this._items.eq(u))){r=u;break}this._onEnterItem(this._items.eq(r),!0)}}(i||o)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,n){this.elem("button").attr("aria-activedescendant",t.attr("id"));var i=this._curItemIndex,o=this._getItemIndex(t),s=this._items;i>-1&&this.delMod(s.eq(i),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),n&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=this.hasMod(t,"disabled","yes")||this.hasMod(t,"label","yes")?!1:!0},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)
},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()}).liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()})},useNativeControl:null,_buildOption:function t(e){var n={};return"option"===e.item?(n={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(n.attrs.disabled="disabled"),e.selected&&(n.attrs.selected="selected")):"optgroup"===e.item&&(n={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(n.attrs.disabled="disabled"),n.content=Array.isArray(e.content)?e.content.map(function(e,n){return t(e,n)}):e.content),n.block="select",n}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}}),BEM.DOM.decl("select",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initButton()}},_initButton:function(){},_redrawList:function(){var t,e=this,n=this._getPopup().domElem;return BEM.DOM.update(this.findElem(n,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(n,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this}},{_buildItemsHtml:function(t){function e(t,e,n){var i={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||" &nbsp; "},elemMods:{}};return n&&(i.elemMods=n),i}function n(t,i){var u=t.length;if(u){var c=0;do{var l=$(t[c]),d=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&c>0&&s.push(o),r.push(s),s=[],s.push(e(l,l.attr("label"),$.extend({label:"yes"},d,i))),n(l.children(),$.extend({inner:"yes"},d,i));var h=s;s=r.pop(),s.push({block:"select",elem:"group",content:h})}else s.push(e(l,l.html(),$.extend(d,l.is(":selected")&&{selected:"yes"},i)))}while(++c<u||(a=!1))}}var i="select",o={block:i,elem:"separator",tag:"i"},s=[],r=[],a=!1;return n(t),BEMHTML.apply(s)}}),BEM.DOM.decl("select",{_redrawList:function(){this.__base();var t=this;this.bindTo(t._items,{mouseup:function(e){1===e.which&&(e.preventDefault(),t._onSelectItem(e.data.domElem))},mouseover:function(e){t._onEnterItem(e.data.domElem)},mouseout:function(e){t._onLeaveItem(e.data.domElem)}})}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled","yes"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,n=t.__self.getName(),i=this._getPopupContent(n),o=this._getPopupMix(n),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:i}}));return(t._popup=t.findBlockOn(a,"popup")).on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,n){t._isOutsideClicked(e,n)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,n){t._popup.containsDomElem($(n.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10)||!1;if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var e=parseInt(this._getPopup().domElem.css("height"),10);if(e>t*this._rowHeight)this._getPopup().setSize({height:t*this._rowHeight}),this.setMod(this.findElem(this._getPopup().domElem,"popup"),"scrollable","yes");else{var n=t*this._rowHeight+"px";this._getPopup().domElem.css("height")!==n&&this._getPopup().setSize({height:n})}}else this._getPopup().setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,n=this._popupContent,i=n.scrollTop(),o=e-i,s=2*this._rowHeight;o>n.height()-s?t=e-s:i&&s>o&&(t=e-n.height()+s),t&&n.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl({block:"select",modName:"layout",modVal:"content"},{_calcPopupDimensions:function(){this.__base.apply(this,arguments),this._popupContent.css("width",this._getButton().domElem.outerWidth()-2*this.__self.FOCUS_OFFSET_HORIZ)}},{FOCUS_OFFSET_HORIZ:1}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(){}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){this.liveBindTo("mouseover mouseout mousedown mouseup",function(t){this.trigger(t.type)})}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),n=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",t.param("pers")?"yes":!1).content(BEM.blocks["i-common__string"].highlight(n,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"geo"},{val:function(){return this.elem("reg").text()},enter:function(){},select:function(){$(".input__geo").val(this.domElem.data("id"))}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){var e=38===t.which||40===t.which;if(e&&!t.shiftKey){t.preventDefault();var n=this._items.length,i=!1;if(n){var o=t.which-39,s=this._curItemIndex,r=0;do i=(0===s&&-1===o||s+o>=n)&&this._onLeaveItem(this._items[s],!0),s+=o,0>s?s=n-1:s>=n&&(s=0);while(!i&&this._onEnterItem(this._items[s],!0)===!1&&++r<n)}}},_onKeyPress:function(t){13===t.which&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),n=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],i=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&n.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),i.push({block:e,elem:"popup",mods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:i,js:o,content:{elem:"content",content:n}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({mouseover:t._onEnterItem,mouseout:t._onLeaveItem,"mousedown touchstart":t._onSelectItem,"mouseup touchend":t._onItemMouseUp},function(e,n){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){n.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var n=this._items,i=this._curItemIndex;i>-1&&n[i].delMod("hovered"),i=this._getItemIndex(t),i>-1&&n[i].setMod("hovered","yes"),this._curItemIndex=i,this._isCurItemEnteredByKeyboard=!!e,e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(t.enter()!==!1?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var n=this._curItemIndex;return n>-1&&n===this._getItemIndex(t)&&(this._items[n].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var n=t.select(e||!1),i="object"==typeof n?n.needUpdate:n!==!1,o="object"==typeof n&&n.needEvent;this._preventRequest=!0,i&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("mouseup touchend",this._onDocMouseUp),i||(this._preventHide=!0),this.afterCurrentEvent(function(){this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(i||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("mouseup touchend").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var n=t._getPopup(),i=e.items||e;t.foot&&i.length&&-1===$.inArray(t.foot,i)&&i.push(t.foot),i.length?(t._curItemIndex=-1,BEM.DOM.update(n.elem("items"),t._buildItemsHtml(i),function(){n.isShown()||(n.show(t.elem("box")),t._setWidth()),t._items=n.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):n.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t){var n,i={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(i,n),i}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),function(){function t(t,e){if(t&&e)for(var n=i.length;n--;){var o=i[n];t.css(o,e.css(o))}return t}var e=[],n=-1;BEM.DOM.decl({name:"input",modName:"width",modVal:"content"},{onSetMod:{js:function(){this.__base(),this.domElem.append($(BEMHTML.apply({block:this.__self.getName(),elem:"width-ruler",tag:"s"}))),this._initFont()._initShift().on("change",this._setWidth).bindToWin("resize",this._resetMaxWidth).bindTo("box","leftclick tap",function(t){t.target===this.elem("clear")[0]||t.target===this.elem("input")[0]||this.findBlockOutside($(t.target),"b-search-filter")||this.setMod("focused","yes")})}},_initFont:function(){return t(this.elem("width-ruler"),this.elem("input")),this},_initShift:function(){return this._shiftWidth=parseFloat(this.elem("width-ruler").css("paddingRight"))+parseFloat(this.elem("input").css("paddingLeft")),this.elem("width-ruler").css("paddingRight",0),this._setShiftWidth()._updateInsetsWidth()},_setWidth:function(){if(n>=0){var t=this.elem("width-ruler").text(this._val).width();if(this._maxWidth>t){if(e.length>n+1&&e[n+1].width<this._maxWidth-t)return this._showHiddenInset();this._setShiftWidth()}else{if(n&&e.length>1)return this._hideLastInset();t=this._maxWidth-this._shiftWidth,this._setShiftWidth(this._shiftWidth)}t+=this._shiftWidth,this.elem("input").width(Math.floor(t))}else{if(e.length)return this._showHiddenInset();this.elem("input").width("100%")}return this},_setShiftWidth:function(t){return this.elem("input").css("marginRight",t||0),this},_resetMaxWidth:function(){this.elem("input").hide();var t=this.elem("box").width()-this._shiftWidth-this._insetsWidth;return this.elem("input").show().focus(),this._maxWidth!==t&&(this._maxWidth=t,this._setWidth()),this},_updateInsetsWidth:function(t){return this._insetsWidth=(this._insetsWidth||0)+(t?t:0),this._resetMaxWidth()},_hideLastInset:function(){return e[n].isVisible=!1,e[n].delMod("visibility"),n--,this._updateInsetsWidth(-e[n+1].width)},_showHiddenInset:function(){return n++,e[n].isVisible=!0,e[n].setMod("visibility","visible"),this._updateInsetsWidth(e[n].width)},appendInset:function(t){var i,o=this.findBlockOn($(t),"b-search-filter").setMod("visibility","visible"),s=o.domElem;return this.elem("box").append(s),i=Math.ceil(.5+s.outerWidth(!0)+parseFloat(s.css("marginLeft"))+parseFloat(s.css("marginRight"))),o.width=i,o.isVisible=!0,e.unshift(o),n++,this._updateInsetsWidth(i),this},removeInset:function(t,i){var o=this,s=t.bem("b-search-filter").params.uniqId;$.each(e,function(r){if(e[r].domElem.bem("b-search-filter").params.uniqId===s){var a=e[r].isVisible,u=e[r].width;return BEM.DOM.destruct(t,i),t.remove(),e.splice(r,1),a&&(n--,o._updateInsetsWidth(-u)),a&&o._setWidth(),!1}})},removeInsets:function(){return this._updateInsetsWidth(-this._insetsWidth)},resetWidth:function(){return this._resetMaxWidth()}});var i=["font-size","font-family"]}(),BEM.DOM.decl("multiselect",{onSetMod:{js:function(){var t=this.elem("selected").val().split(","),e={};t.forEach(function(t){""!==t&&(e[t]=!0)}),this._lockUnlock(t),this.selected=e}},_onChange:function(t,e){var n=this.selected,i=[];n[t.val()]=e.checked;for(var o in n)n.hasOwnProperty(o)&&n[o]&&i.push(o);this._lockUnlock(i),this.elem("selected").val(i.join(","))},_lockUnlock:function(t){1===t.length?(this._locked=this.findBlockInside({block:"checkbox",modName:"checked",modVal:"yes"}),this._locked.setMod("disabled","yes")):this._locked&&(this._locked.delMod("disabled"),this._locked=null)}},{live:function(){return this.liveInitOnBlockInsideEvent("change","checkbox",function(t,e){this._onChange(t.target,e)}),!1}}),BEM.DOM.decl("b-wdgt-remove",{onSetMod:{js:function(){this.popup=this.findBlockOn("popup"),this.bindTo("do","click",this.yes),this.popup.on("hide",this.no,this),this.bindTo("cancel","click",this.hide),this.findBlockInside("blame","link").bindTo("click",this.changeThis(this.complain))}},show:function(t,e,n){return this.accepted=!1,this.yes=e,this.no=n,this.popup.show(t.domElem),this.updateBlameUrl(t),this},hide:function(){this.popup.hide(),this._complainUrl=""},updateBlameUrl:function(t){var e=this.findBlockInside("blame","link"),n=t.getInstance();this._complainUrl="/wcomplain/?wauth="+n.getAuth(),e.domElem.attr("href","https://yandex.ru/support/widgets/troubleshooting.xml?form2523-widget_id="+n.classId)},no:function(){return this.accepted||this.no(),this.no=this.yes=null,this},yes:function(){return this.yes(),this.accepted=!0,this.popup.hide(),this},complain:function(){if(this._complainUrl){var t=this.findBlockInside("blame","link").domElem.attr("href");return $.get(this._complainUrl,function(){window.location=t}),!1}}},{live:!0}),BEM.DOM.decl("b-wdgt-share",{onSetMod:{js:function(){this.bindTo("close","click",this.hide),this.bindTo("link","click",this.linkClick)}},show:function(t){this.updateLinks(t);var e=this.getPopup();e.show(),x.amd.require("statlog",function(t){t.logByFragment({doc:e.domElem})})},hide:function(){this.getPopup().hide()},updateLinks:function(t){var e=t.id.substr(0,t.id.lastIndexOf("-")),n=location.protocol+"//www.yandex.#d#/?add=#id#&from=shared".replace(/#d#/,document.domain.replace(/yandex\./,"")).replace(/#id#/,e),i=this.params.shareText;this.findBlockOn("url","input").val(n),this.elem("link").each(function(){var e=$(this),o=e.data("service"),s=e.data("title")||i;e.attr("href","//share.yandex.ru/go.xml?service="+encodeURIComponent(o)+"&url="+encodeURIComponent(n)+"&title="+encodeURIComponent(s.replace("%s",""+t.params.title+"").replace("(URL)",n)))})},linkClick:function(t){var e=t.currentTarget;if("_blank"!==e.target)return window.open(e.href,"shareWindow","status=1, toolbar=0, menubar=0, resizable=1, scrollbars=1, width=800px, height=500px"),!1},getPopup:function(){return this.popup||(this.popup=this.findBlockOn(this.domElem,"popup"))}},{live:!0}),x.amd.require("statlog",function(t){"use strict";function e(t){return t?new Date(t).getTime():(new Date).getTime()}function n(t,e){return t.reverse().splice(0,e).reverse()}var i=12096e5,o=3,s="#hs"===window.location.hash,r=home.localStorage,a=!home.disabledLS&&r,u=$(window);a&&(u.bind("beforeunload",function(){"#hs"===location.hash&&(location.hash="")}),BEM.DOM.decl("b-hs-balloon",{onSetMod:{js:function(){var t=this;if(s)return void t._setDoNotShowFlag();if(!t._getDoNotShowFlag()&&90!==Math.abs(window.orientation)){var e=t._getData();e.length<o&&(t.show(),t._updateShownDates(e)),t.adjustBalloonPosition(),t._bindScroll(),t.elem("close").on("click",function(){t.forceHideBalloon()})}}},adjustBalloonPosition:function(){var t=u.scrollTop();this.domElem.css("top",t)},_bindScroll:function(){u.on("scroll.balloon",this.changeThis(this.adjustBalloonPosition))},_unbindScroll:function(){u.off("scroll.balloon")},show:function(){var e=this;window.setTimeout(function(){e.setMod("display","yes"),e.adjustBalloonPosition(),e.setMod("opacity","visible"),t.checkAndLog()},0),window.setTimeout(function(){e.hide()},15e3),window.location.hash="hs"},hide:function(){var t=this;this.setMod("opacity","hidden"),setTimeout(function(){t._unbindScroll(),t.setMod("display","no")},500)},immediateHide:function(){this._unbindScroll(),this.setMod("display","no"),this.setMod("opacity","hidden")},forceHideBalloon:function(){this._setDoNotShowFlag(),this.hide()},_getData:function(){var t;try{t=JSON.parse(r.getItem("balloonShownDates")).filter(function(t){return!isNaN(e(t))&&e()-e(t)<i})}catch(n){t=[]}return t},_updateShownDates:function(t){t.push(e());var i=n(t,o);r.setItem("balloonShownDates",JSON.stringify(i))},_setDoNotShowFlag:function(){r.setItem("doNotShowHSBalloon",1)},_getDoNotShowFlag:function(){return r.getItem("doNotShowHSBalloon")}}))}),function(t,e){function n(){p&&f&&console.log.apply(console,arguments)}function i(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?c+t.elem:"")+(t.modName?u+t.modName+u+t.modVal:"")}function o(t){var e={};return t.split(c).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(u).forEach(function(t,n){e[i[n]]=t})}),e}function s(t){return t?h.push(t):!1}function r(){return h.length&&h.pop()}function a(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var u="_",c="__",l="ru",d={},h=[],p=!1,f="undefined"!=typeof console&&"function"==typeof console.log;a.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&s(this._keyset),this._keyset=i(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=o(this._keyset),n="i-tanker"===e.block?"tanker":this._prj,i=e.elem||this._keyset,s=this._key;n=i18n[n]||(i18n[n]={}),i=n[i]||(n[i]={}),i[s]="function"==typeof t?t:function(){return t};var r=d[this._lang]||(d[this._lang]={}),a=r[this._keyset]||(r[this._keyset]={});a[s]=t},val:function(t,e){var i=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",o),"";i=i[this._key];var s=typeof i;return"undefined"===s?(n("[I18N_NO_VALUE] %s",o),""):"string"===s?i:(e||(e=this),i.call(e,t))},_cache:function(){return d}},e.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,s=this._proto;return s.lang(this._lang).key(t),i=s.val.call(s,n,e),o=r(),o&&s.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){p=!!t},e.lang(l),e}(new a)}(this,"undefined"==typeof BEM?{}:BEM),BEM.I18N.decl("auth",{auth:"","fill-input":"  ",login:"",logon:"",more:"",password:"",permanent:" ",register:"",remember:" ","social-log-in":"    ",temporary:" ","wrong-characters":" ","wrong-keyboard-layout":" ","wrong-password":"     "},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:""},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"",advertising:"",afisha:"",all:"",api:"API",appsearch:"",auto:"",avia:"",aziada:"",ba:"",backapv:" .",balance:"",bar:"","bar-ie":"","bar-ie9":"9",bayan:" ",blogs:"",books:"",browser:"",calendar:"",captcha:"...",catalogwdgt:" ",chrome:"   ",city:"",cityday:" ",collection:"",company:"",contest:"Contest",desktop:" ",direct:"","direct.market":"",disk:"",ege:"",expert:"",feedback:" ",feedback2:" ",ff:"  ",fotki:"",fresh:"",games:"",geocontext:"",goroda:"",help:"",i:"",ie:"  ",images:"","images-com":"",interests:"",internet:"",kassa:"",keyboard:"",kraski:"",kuda:"",large:"  ",legal:" ",lenta:"",libra:"",literacy:"   ",local:"",lost:"",love:"13",mail:"",maps:"","maps-wiki":" ",market:"","market.advertising":"",master:"",metrika:"",metro:"",mobile:"",moikrug:"",money:"",museums:"",music:"","music-partner":": ",nahodki:"",nano:"",newhire:"",news:"",notifications:" ",oauth:"",online:"",openid:"OpenID",opera:"Opera Software",opinion:"",partners:"",partnersearch:"  ",passport:"",pdd:"  ",peoplesearch:"",perevod:"",probki:"",pulse:": ",punto:"Puntoswitcher",pvo:"",rabota:"",ramazan:"",rasp:"",realty:"",referats:"",rk:"?",root:".  Unix ",school:"",search:"",server:"",shtrafi:"",site:"",slovari:"",so:"",social:"",soft:"",sport:"",sprav:"",start:" ",stat:"",subs:"",taxi:"",terms:"",tests:"  ",tickets:"",time:".",toster:"",translate:"",tune:"",tv:"",uslugi:"",video:"","video-com":"",vno:"",wdgt:"",weather:"",webmaster:"",widgets:"",wordstat:"",wow:".",www:"",xmlsearch:"XML",yaca:"",yamb:" ",zakladki:""},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,n=e%10,i=e%100;return 1==n&&11!=i?t.one:n>1&&5>n&&(10>i||i>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("notice",{notifications:""},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"","search-input-label":"","search-service-label":"  ","search-web-label":"  "},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"",group:" ",nah:" ",nav:"",text:"",traffic:"",weather:""},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":" "},{lang:"ru"}),BEM.I18N.decl("user",{enter:"",exit:"",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" ",some:" ",many:" ",none:"  "})},letter_compose:" ",passport:"",tune:"",upload_files:" "},{lang:"ru"}),BEM.I18N.lang("ru");var BEMHTML=function(){function t(t){return t._mode=n,t.block=i,t.elem=o,t.elemMods=s,t.mods=r,t}function e(t,e){var a=n;n=e._mode;var u=i;i=e.block;var c=o;o=e.elem;var l=s;s=e.elemMods;var d=r;r=e.mods;var h=t(e);return n=a,i=u,o=c,s=l,r=d,h}var n,i,o,s,r,a,u={},c=function(u){function c(){return l(this)}function l(u){function c(){if("no-follow"===this.ctx.link)return void 0;var t=this._links[this.ctx.link];return p=this.ctx,this.ctx=t,f=e(l,this),this.ctx=p,f}function d(t,e,n){if(0===e.length)return void 0;if(Array.isArray(n)){for(var i=t,o=0;o<n.length-1;o++)i=i[n[o]];n=i[n[o]]}for(var s,r=t,o=0;o<e.length-1;o++)r=r[e[o]];return s=r[e[o]],r[e[o]]=n,s}function h(t,e){return(t||"")+"__"+(e||"")}var p,f,m,g,_,v,b,y,w,x,k,E,M,S,I,C,T,B,D,P,$,O,F,A,j,N;if("multiselect"===i&&"selected"===o&&"attrs"===n)return{type:"hidden",name:u.ctx.name,value:u.ctx.selected};if("multiselect"===i&&"selected"===o&&"tag"===n)return"input";if("multiselect"===i&&"item"===o&&"content"===n)return{block:"checkbox",checkboxAttrs:{value:u.ctx.value},mods:{size:r.size,theme:r.theme,checked:u.__selected[u.ctx.value]?"yes":""},content:{elem:"label",content:u.ctx.label}};if("multiselect"===i&&"group"===o&&"content"===n){var L=u.ctx.label?{elem:"label",content:u.ctx.label}:"",R=3,W=[],z=Math.ceil(u.ctx.options.length/R);return u.ctx.options.forEach(function(t,e){var n=Math.floor(e/z);W[n]||(W[n]=[]),t.elem="item",t.size=this.mods.size,t.theme=this.mods.theme,W[n].push(t)},t(u)),[L,{elem:"items",cls:"row",content:W.map(function(t){return{elem:"column",cls:"col",content:t}})}]}if(!!o==!1&&"multiselect"===i&&!(u.__$anflg50!==!0)==!1&&"default"===n){var H=u.ctx.selected.split(","),U={};H.forEach(function(t){U[t]=!0}),u.__selected=U;var q=u.ctx.groups||[{options:u.ctx.options}];u.ctx.content=q.map(function(t){return t.elem="group",t}).concat({elem:"selected",name:u.ctx.name,selected:H});var p=u.__$anflg50;u.__$anflg50=!0;var f=u.ctx;u.ctx=u.ctx;var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg50=p)}if(!!o==!1&&"multiselect"===i&&"js"===n)return!0;if(!!o==!1&&"b-autocomplete-item"===i&&!(r&&"geo"===r.type)==!1&&"content"===n){var V=u.ctx.data,K=V[3],G=BEM.blocks["i-common__string"];return[{tag:"span",elem:"reg",content:G.escapeHTML(V[1])},K?{tag:"span",elem:"details",mix:K[1]?{elem:"full"}:!1,content:" ("+G.escapeHTML(K[0])+")"}:!1]}if(!!o==!1&&"b-autocomplete-item"===i&&!(r&&"geo"===r.type)==!1&&"attrs"===n)return{"data-id":u.ctx.data&&u.ctx.data[2],wtf:"4"};if(!!o==!1&&"b-autocomplete-item"===i&&"content"===n){var J=u.ctx.data,Q=BEM.blocks["i-common__string"],X=Q.escapeHTML(u._.isArray(J)?J[1]:J);return Q.highlight(X,u.ctx.hl)}if(!!o==!1&&"b-autocomplete-item"===i&&"mix"===n)return[{mods:{pers:u.ctx.pers?"yes":""}}];if(!!o==!1&&"b-autocomplete-item"===i&&"js"===n)return!0;if("b-autocomplete-item"===i&&!u.ctx.search_cgi==!1&&!u._.isArray(u.ctx.search_cgi)==!1&&"js"===n)return{cgi:u.ctx.search_cgi};if(!!o==!1&&"b-autocomplete-item"===i&&"tag"===n)return"li";if("select"===i&&"control"===o&&"attrs"===n){for(var Y,Z=["id","name","tabindex"],te={};Y=Z.pop();)u._controlAttrs[Y]&&(te[Y]=u._controlAttrs[Y]);return"yes"===r.disabled&&(te.disabled="disabled"),te.tabindex=-1,te["aria-hidden"]=!0,u.ctx.controlAttrs||te}if("select"===i&&"control"===o&&"tag"===n)return"select";if("select"===i&&"control"===o&&!u._initValue==!1&&!(u.__$anflg49!==!0)==!1&&"default"===n){var ee=u.ctx;ee.attrs=u.extend(ee.attrs,{value:u._initValue});var p=u.__$anflg49;return u.__$anflg49=!0,l(u),void(u.__$anflg49=p)}if(!!o==!1&&"button"===i&&!u._formSelect==!1&&"mix"===n)return[{block:u._formSelect.block,elem:"button"}];if(!!o==!1&&"button"===i&&!u._formSelect==!1&&!(u.__$anflg48!==!0)==!1&&"default"===n){var ne=u.ctx,ie=u._formSelect.mods,oe=(u._formSelect.tabindex,ne.mods||{});oe.arrow="down",ie.theme&&(oe.theme=ie.theme),ie.size&&(oe.size=ie.size),"yes"===ie.disabled&&(oe.disabled="yes"),ne.mods=oe,u._initText&&(ne.content=u._initText);var p=u.__$anflg48;u.__$anflg48=!0;var f=u.ctx,m=f._theme;return f._theme=!0,l(u),f._theme=m,void(u.__$anflg48=p)}if(!!o==!1&&"button"===i&&!u._formSelect==!1&&!(u.__$anflg47!==!0)==!1&&"attrs"===n){var se=(p=u.__$anflg47,u.__$anflg47=!0,f=l(u),u.__$anflg47=p,f||{});se.role="listbox",se.type="button",se["aria-haspopup"]=!0,se["aria-expanded"]=!1;var re=u._formSelect.tabindex;return"undefined"!=typeof re&&(se.tabindex=re),se}if("select"===i&&"item"===o&&!(u.__$anflg46!==!0)==!1&&"attrs"===n){var ae=(p=u.__$anflg46,u.__$anflg46=!0,f=l(u),u.__$anflg46=p,f||{});return"yes"===(u.ctx.elemMods||{}).label&&(u._labelId&&(ae.id=u._labelId),ae["aria-hidden"]=!0),ae}if("select"===i&&"item"===o&&"attrs"===n)return{id:u.generateId()};if(!!o==!1&&"select"===i&&!(u.__$anflg44!==!0&&u.__$anflg45!==!0)==!1&&"default"===n){var ue=u.ctx,ce=(p=n,n="js",f=l(u),n=p,f||{}).live;if(ce){var le=ue.content.filter(function(t){return"control"===t.elem})[0].content;if(le.length){var de=function(t){for(var e,n,i=0;i<t.length&&(e=t[i],"option"===e.elem&&Object(e.attrs).selected?n=e:"option-group"===e.elem&&(n=de(e.content)),!n);i++);return n},he=de(le);return he||(he=le[0],"option-group"===he.elem&&(he=he.content[0])),m=u.__$anflg44,u.__$anflg44=!0,g=u._initValue,u._initValue=he.attrs.value,_=u._initText,u._initText=he.content,v=l(u),u._initValue=g,u._initText=_,b=v,u.__$anflg44=m,b}}var y=u.__$anflg45;return u.__$anflg45=!0,l(u),void(u.__$anflg45=y)}if("select"===i&&"text"===o&&"tag"===n)return"span";if("select"===i&&"option-group"===o&&"tag"===n)return"optgroup";if("select"===i&&"option"===o&&"tag"===n)return"option";if(!!o==!1&&"select"===i&&"tag"===n)return"span";if(!!o==!1&&"select"===i&&"js"===n)return u.extend({live:!1},u.ctx.js);if(!!o==!1&&"select"===i&&!(u.__$anflg43!==!0)==!1&&"default"===n){var pe=u.ctx,fe=pe.id||u.generateId(),p=u.__$anflg43;
u.__$anflg43=!0;var f=u._controlAttrs;u._controlAttrs={id:fe,name:pe.name||fe};var m=u._formSelect;return u._formSelect={block:i,mods:r,tabindex:pe.tabindex},l(u),u._controlAttrs=f,u._formSelect=m,void(u.__$anflg43=p)}if(!!o==!1&&"popup"===i&&!(r&&"scrollable"===r.behaviour)==!1&&!(u.__$anflg42!==!0)==!1&&"default"===n){u.ctx.mods.wrapped="yes",u.ctx.mods["body-scroll"]="no",u.ctx.wrapperMods={behaviour:"scrollable"};var p=u.__$anflg42;return u.__$anflg42=!0,l(u),void(u.__$anflg42=p)}if(!!o==!1&&"popup"===i&&!(r&&"yes"===r.wrapped)==!1&&!(u.__$anflg41!==!0)==!1&&"content"===n)return[(p=u.__$anflg41,u.__$anflg41=!0,f=l(u),u.__$anflg41=p,f),{elem:"wrapper",elemMods:u.ctx.wrapperMods}];if("popup"===i&&"close"===o&&"tag"===n)return"i";if(!!o==!1&&"popup"===i&&!(r&&"yes"===r["has-close"])==!1&&!(u.__$anflg40!==!0)==!1&&"content"===n)return[(p=u.__$anflg40,u.__$anflg40=!0,f=l(u),u.__$anflg40=p,f),{elem:"close"}];if("b-wdgt-preferences"===i&&"pref"===o&&"text"===u.ctx.type&&"content"===n)return[{elem:"pref-label",tag:"td",content:u.ctx.label},{tag:"td",elem:"pref-col",content:{block:"input",mods:{size:"s"},content:{elem:"control",attrs:{name:u.ctx.name,value:u.ctx.value||u.ctx["default"]}}}}];if("b-wdgt-preferences"===i&&"pref"===o&&!("geoselect"===u.ctx.type||"geo"===u.ctx.type||"text"===u.ctx.type)==!1&&"content"===n)return[{elem:"pref-label",tag:"td",content:u.ctx.label},{tag:"td",elem:"pref-col",content:{block:"input",mods:{size:"s",suggest:"yes",width:"content"},js:{dataprovider:{name:"dataprovider-geo",url:"https://tune."+document.domain+"/api/search/3/search.xml"}},content:[{elem:"control",attrs:{value:u.ctx.geoname}},{elem:"geo",tag:"input",attrs:{type:"hidden",name:u.ctx.name,value:u.ctx.value||u.ctx["default"]}}]}}];if("b-wdgt-preferences"===i&&"pref"===o&&"multi"===u.ctx.type&&"content"===n)return{tag:"td",elem:"pref-col",attrs:{colspan:2},content:[{elem:"pref-label",tag:"span",content:u.ctx.label},{block:"multiselect",name:u.ctx.name,mods:{theme:"normal",size:"s"},selected:u.ctx.value,groups:u.ctx.groups,options:u.ctx.options}]};if("b-wdgt-preferences"===i&&"pref"===o&&"list"===u.ctx.type&&"content"===n)return[{elem:"pref-label",tag:"td",content:u.ctx.label},{tag:"td",elem:"pref-col",content:{block:"select",name:u.ctx.name,mods:{theme:"normal",size:"s",layout:"content"},js:{live:!0},content:[{block:"button",content:""},{elem:"control",content:u.ctx.options.map(function(t){return{elem:"option",attrs:{value:t.value,selected:t.value==(this.ctx.value||this.ctx["default"])?"selected":void 0},content:t.label}},t(u))}]}},u.ctx.comment?{elem:"comment-line",tag:"tr",content:{elem:"comment-cell",tag:"td",attrs:{colspan:2},content:{elem:"comment-title",tag:"span",content:u.ctx.comment}}}:null];if("b-wdgt-preferences"===i&&"pref"===o&&!("bool"===u.ctx.type||"boolean"===u.ctx.type)==!1&&"content"===n)return{tag:"td",elem:"pref-col",attrs:{colspan:2},content:{block:"checkbox",mods:{size:"s",checked:"true"===u.ctx.value?"yes":""},checkboxAttrs:{value:1,name:u.ctx.name},content:{elem:"label",content:u.ctx.label}}};if("b-wdgt-preferences"===i&&"pref"===o&&"hidden"===u.ctx.type&&"attrs"===n)return{type:"hidden",name:u.ctx.name,value:u.ctx.value};if("b-wdgt-preferences"===i&&"pref"===o&&"hidden"===u.ctx.type&&"tag"===n)return"input";if("b-wdgt-preferences"===i&&"pref"===o&&"content"===n)return[u.ctx.name,u.ctx.value,u.ctx.label,u.ctx.type].join(", ");if("b-wdgt-preferences"===i&&"pref"===o&&"tag"===n)return"tr";if("b-wdgt-preferences"===i&&"data"===o&&"content"===n)return{tag:"table",content:u.ctx.list.filter(function(t){return t.elem="pref",t.name})};if("b-wdgt-preferences"===i&&"data"===o&&"tag"===n)return"form";if("widget"===i&&"control-icon"===o&&"content"===n)return{cls:"b-ico b-ico-"+u.ctx.icon};if("widget"===i&&"control-icon"===o&&"attrs"===n){var me=u.ctx.attrs||{};return u.ctx.href&&(me.href=u.ctx.href),me}if("widget"===i&&"control-icon"===o&&"tag"===n)return u.ctx.href?"a":"span";if("user"===i&&"name"===o&&"js"===n)return{maxLength:u._maxLength,maxLengthRelative:u._maxLengthRelative,isUglyUserName:u._isUglyUserName};if("user"===i&&"name"===o&&"content"===n)return p=n,n="pre-content",f=u.ctx,u.ctx=u.xmlEscape(u.cleverSubstring(u._userName,u._maxLength,u._maxLengthRelative)),m=l(u),n=p,u.ctx=f,m;if("user"===i&&"name"===o&&"pre-content"===n){var ge=u.ctx;return[{elem:"first-letter",tag:"span",content:ge.charAt(0)},ge.slice(1)]}if("user"===i&&"name"===o&&!(u.__$anflg39!==!0)==!1&&"default"===n){var _e=u.ctx,ve=u["i-global"],be=_e.content||_e.login||u._login||(ve.displayName||{}).name,ye=!1;be||(/^uid-/.test(ve.login)?(be="",ye=!0):be=ve.login);var p=u.__$anflg39;u.__$anflg39=!0;var f=u._maxLength;u._maxLength=_e.hasOwnProperty("maxLength")?_e.maxLength:16;var m=u._maxLengthRelative;u._maxLengthRelative=_e.hasOwnProperty("maxLengthRelative")?_e.maxLengthRelative:3;var g=u._userName;u._userName=be;var _=u._isUglyUserName;return u._isUglyUserName=_e.isUglyUserName||ye,l(u),u._maxLength=f,u._maxLengthRelative=m,u._userName=g,u._isUglyUserName=_,void(u.__$anflg39=p)}if("user"===i&&"name"===o&&"tag"===n)return"span";if(!!o==!1&&"user-menu-update"===i&&"js"===n)return!0;if("b-menu-horiz"===i&&!r==!1&&"item-selector"===o&&"tag"===n)return"span";if("b-menu-horiz"===i&&!r==!1&&"layout-unit"===o&&"mix"===n){var we=[];return u.isFirst()&&we.push({elemMods:{position:"first"}}),u.isLast()&&we.push({elemMods:{position:"last"}}),we}if("b-menu-horiz"===i&&!r==!1&&"item"===o&&!(u.__$anflg38!==!0)==!1&&"default"===n){var p=u.__$anflg38;u.__$anflg38=!0;var f=n;n="";var m=u.position;u.position=u.position-1;var g=u.ctx;return u.ctx={elem:"layout-unit",content:u.ctx},l(u),n=f,u.position=m,u.ctx=g,void(u.__$anflg38=p)}if(!!o==!1&&"b-menu-horiz"===i&&!r==!1&&"js"===n)return!0;if("dropdown-menu"===i&&"switcher"===o&&!(u.__$anflg37!==!0)==!1&&"default"===n){var xe=u.ctx.content;xe.mix=(xe.mix||[]).concat([{block:"dropdown-menu",elem:"switcher"}]);var p=u.__$anflg37;u.__$anflg37=!0;var f=u.ctx;u.ctx=xe;var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg37=p)}if("dropdown-menu"===i&&"popup"===o&&!(u.__$anflg36!==!0)==!1&&"default"===n){var ke=u.ctx,p=u.__$anflg36;u.__$anflg36=!0;var f=u.ctx;u.ctx={block:"dropdown",elem:"popup",js:u.ctx.js,mix:(ke.mix||[]).concat({block:"dropdown-menu",elem:"popup",mods:u._.extend({size:u.dropdownMenuSize},ke.mods)}),attrs:ke.attrs,content:{block:"dropdown-menu",elem:"menu",title:ke.menuTitle,type:ke.type,mods:ke.menuMods,mix:ke.menuMix,content:ke.content}};var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg36=p)}if(!("b-menu-vert"===i||"b-menu-horiz"===i)==!1&&!u._inDropdownMenu==!1&&"item"===o&&"attrs"===n)return{role:"menuitem"};if(!("b-menu-vert"===i||"b-menu-horiz"===i)==!1&&!u._inDropdownMenu==!1&&!!o==!1&&"attrs"===n)return{role:"menu"};if("dropdown-menu"===i&&"menu"===o&&!(u.__$anflg35!==!0)==!1&&"default"===n){var Ee=u.ctx,Me=Ee.type||"vert",Se=Ee.mods||{};Se.theme||(Se.theme="ffffff");var p=u.__$anflg35;u.__$anflg35=!0;var f=u.ctx;u.ctx={block:"b-menu-"+Me,mix:(Ee.mix||[]).concat({block:"dropdown-menu",elem:"menu",mods:Se}),title:Ee.title,content:Ee.content};var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg35=p)}if(!!o==!1&&"dropdown-menu"===i&&!(u.__$anflg34!==!0)==!1&&"default"===n){var Ie=u.ctx,Ce=Ie.mods||(Ie.mods={});Ce.theme||(Ce.theme="ffffff"),u.dropdownMenuSize=Ce.size,u._inDropdownMenu=!0;var p=u.__$anflg34;u.__$anflg34=!0;var f=u.ctx;u.ctx=Ie;var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg34=p)}if(!!o==!1&&"dropdown-menu"===i&&"js"===n)return!0;if("b-menu-vert"===i&&"title"===o&&"tag"===n)return"h3";if("b-menu-vert"===i&&"submenu"===o&&"tag"===n)return"ul";if("b-menu-vert"===i&&"item-selector"===o&&"tag"===n)return"span";if("b-menu-vert"===i&&"layout-unit"===o&&"mix"===n){var Te=[];return u.isFirst()&&Te.push({elemMods:{position:"first"}}),u.isLast()&&Te.push({elemMods:{position:"last"}}),Te}if("b-menu-vert"===i&&"layout-unit"===o&&"tag"===n)return"li";if("b-menu-vert"===i&&"item"===o&&!(u.__$anflg33!==!0)==!1&&"default"===n){var p=u.__$anflg33;u.__$anflg33=!0;var f=n;n="";var m=u.position;u.position=u.position-1;var g=u.ctx;return u.ctx={elem:"layout-unit",content:[u.ctx,u.ctx["item-content"]]},l(u),n=f,u.position=m,u.ctx=g,void(u.__$anflg33=p)}if("b-menu-vert"===i&&"layout"===o&&"tag"===n)return"ul";if(!!o==!1&&"b-menu-vert"===i&&"content"===n)return[u.ctx.title,{elem:"layout",content:u.ctx.content}];if(!!o==!1&&"user"===i&&!(r&&"yes"===r.menu)==!1&&!u["i-global"].login==!1&&!(u.__$anflg32!==!0)==!1&&"default"===n){var Be=(p=n,n="user-menu",f=l(u),n=p,f);return m=u.__$anflg32,u.__$anflg32=!0,g=n,n="",_=u.ctx,u.ctx={block:"dropdown-menu",mods:{user:"yes"},content:[{block:"user",mods:u.ctx.mods,js:u.ctx.js,counter:u.ctx.counter,content:u.ctx.content},{elem:"popup",mods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:Be}]},v=l(u),n=g,u.ctx=_,b=v,u.__$anflg32=m,b}if(!!o==!1&&"user"===i&&!(r&&"yes"===r.menu)==!1&&"user-menu"===n){var De=(p=n,n="exit-url",f=l(u),n=p,f),Pe=u.ctx.counters||{};return[{elem:"item",type:"mail",content:{block:"link",mods:Pe.mail?{counter:"yes"}:{},url:u["i-services"].serviceUrl("mail"),counter:Pe.mail,content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:!0}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(t(u))}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:Pe.write?{counter:"yes"}:{},content:BEM.I18N("user","letter_compose"),url:u["i-services"].serviceUrl("mail")+"/compose",counter:Pe.write}},{elem:"item",type:"disk",content:{block:"link",url:u["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",mods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:Pe.settings?{counter:"yes"}:{},content:BEM.I18N("user","tune"),url:u["i-services"].serviceUrl("tune"),counter:Pe.settings}},{elem:"item",type:"passport",content:{block:"link",mods:Pe.passport?{counter:"yes"}:{},content:BEM.I18N("user","passport"),url:u["i-services"].serviceUrl("passport"),counter:Pe.passport}},{elem:"item",type:"logout",content:{block:"link",mods:Pe.logout?{counter:"yes"}:{},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:De,counter:Pe.logout}}]}if(!!o==!1&&"user"===i&&!(r&&"yes"===r.menu)==!1&&"exit-url"===n){var $e=u["i-global"],Oe="/passport?mode=";return Oe+="logout&yu="+($e.yandexuid||""),$e.retpath&&(Oe+="&retpath="+encodeURIComponent($e.retpath)),$e["passport-host"]+Oe}if(!!o==!1&&"user"===i&&!(r&&"yes"===r.menu)==!1&&!(u.__$anflg31!==!0)==!1&&"attrs"===n){var Fe=(p=u.__$anflg31,u.__$anflg31=!0,f=l(u),u.__$anflg31=p,f||{});return Fe.role="button",Fe.tabindex=0,Fe["aria-haspopup"]=!0,Fe["aria-expanded"]=!1,Fe}if("notice"===i&&"value"===o&&"content"===n)return p=n,n="format-value",f=l(u),n=p,f;if("notice"===i&&"value"===o&&"format-value"===n){var Ae,je,Ne=u.ctx;return Ae=parseInt(Ne.count,10),je=Ne.maxCount?Ne.maxCount:99,Ae>je?je+"+":Ae}if("notice"===i&&"value"===o&&"tag"===n)return"span";if("notice"===i&&"text"===o&&"content"===n)return BEM.I18N("notice","notifications");if("notice"===i&&"text"===o&&"mix"===n)return[{block:"a11y-hidden"}];if("notice"===i&&"text"===o&&"tag"===n)return"span";if("notice"===i&&"count"===o&&"content"===n)return[{elem:"text"},{elem:"value",maxCount:u.ctx.maxCount,count:u.ctx.content}];if("notice"===i&&"count"===o&&!u.ctx.url==!1&&"attrs"===n)return{href:u.ctx.url};if("notice"===i&&"count"===o&&!u.ctx.url==!1&&"tag"===n)return"a";if("notice"===i&&"count"===o&&!!u.ctx.url==!1&&"mix"===n)return[{elem:"plain"}];if("notice"===i&&"count"===o&&"tag"===n)return"span";if(!!o==!1&&"notice"===i&&!("undefined"!=typeof u.ctx.count)==!1&&"content"===n)return{elem:"count",url:u.ctx.url,maxCount:u.ctx.maxCount,content:u.ctx.count};if(!!o==!1&&"notice"===i&&!("undefined"!=typeof u.ctx.count)==!1&&"js"===n)return{count:u.ctx.count};if(!!o==!1&&"notice"===i&&"attrs"===n)return{role:"alert","aria-live":"assertive","aria-atomic":!0};if(!!o==!1&&"notice"===i&&"tag"===n)return"span";if("user"===i&&"notice"===o&&!(u.__$anflg30!==!0)==!1&&"default"===n){var p=u.__$anflg30;u.__$anflg30=!0;var f=u.ctx;u.ctx={block:"notice",mix:[{block:"user",elem:"notice"}],count:u.ctx.count,content:u.ctx.content};var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg30=p)}if(!!o==!1&&"i-services"===i&&"service-url"===n)return{serp:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},mail:function(t){return"ru"===t?"https://mail.yandex.ru":"ua"===t?"https://mail.yandex.ua":"by"===t?"https://mail.yandex.by":"kz"===t?"https://mail.yandex.kz":"com"===t?"https://mail.yandex.com":"tr"===t?"https://mail.yandex.com.tr":"https://mail.yandex.ru"},pdd:function(t){return"ru"===t?"http://pdd.yandex.ru":"http://pdd.yandex.ru"},zakladki:function(t){return"ru"===t?"http://zakladki.yandex.ru":"http://zakladki.yandex.ru"},fotki:function(t){return"ru"===t?"http://fotki.yandex.ru":"http://fotki.yandex.ru"},moikrug:function(t){return"ru"===t?"http://moikrug.ru":"http://moikrug.ru"},direct:function(t){return"ru"===t?"http://direct.yandex.ru":"ua"===t?"http://direct.yandex.ua":"by"===t?"http://direct.yandex.by":"kz"===t?"http://direct.yandex.kz":"com"===t?"http://direct.yandex.com":"http://direct.yandex.ru"},money:function(t){return"ru"===t?"https://money.yandex.ru":"https://money.yandex.ru"},lenta:function(t){return"ru"===t?"http://lenta.yandex.ru":"http://lenta.yandex.ru"},market:function(t){return"ru"===t?"//market.yandex.ru":"ua"===t?"//market.yandex.ua":"by"===t?"//market.yandex.by":"kz"===t?"//market.yandex.kz":"tr"===t?"//market.yandex.com.tr":"//market.yandex.ru"},"market.advertising":function(t){return"ru"===t?"http://welcome.advertising.yandex.ru/market/":"http://welcome.advertising.yandex.ru/market/"},wow:function(t){return"ru"===t?"http://my.ya.ru":"http://my.ya.ru"},tv:function(t){return"ru"===t?"http://tv.yandex.ru":"ua"===t?"http://tv.yandex.ua":"by"===t?"http://tv.yandex.by":"kz"===t?"http://tv.yandex.kz":"http://tv.yandex.ru"},afisha:function(t){return"ru"===t?"http://afisha.yandex.ru":"ua"===t?"http://afisha.yandex.ua":"by"===t?"http://afisha.yandex.by":"kz"===t?"http://afisha.yandex.kz":"tr"===t?"http://afis.yandex.com.tr":"http://afisha.yandex.ru"},calendar:function(t){return"ru"===t?"http://calendar.yandex.ru":"http://calendar.yandex.ru"},nahodki:function(t){return"ru"===t?"http://nahodki.yandex.ru":"ua"===t?"http://nahodki.yandex.ua":"kz"===t?"http://nahodki.yandex.kz":"http://nahodki.yandex.ru"},weather:function(t){return"ru"===t?"http://pogoda.yandex.ru":"ua"===t?"http://pogoda.yandex.ua":"by"===t?"http://pogoda.yandex.by":"kz"===t?"http://pogoda.yandex.kz":"tr"===t?"http://hava.yandex.com.tr":"http://pogoda.yandex.ru"},kuda:function(t){return"ru"===t?"http://kuda.yandex.ru":"http://kuda.yandex.ru"},video:function(t){return"ru"===t?"http://www.yandex.ru/video/":"ua"===t?"http://www.yandex.ua/video/":"by"===t?"http://www.yandex.by/video/":"kz"===t?"http://www.yandex.kz/video/":"com"===t?"http://www.yandex.com/video/":"tr"===t?"http://www.yandex.com.tr/video/":"http://yandex.ru/video/"},"video-com":function(t){return"ru"===t?"http://video.yandex.com":"http://video.yandex.com"},music:function(t){return"ru"===t?"//music.yandex.ru":"ua"===t?"//music.yandex.ua":"by"===t?"//music.yandex.by":"kz"===t?"//music.yandex.kz":"//music.yandex.ru"},"music-partner":function(t){return"ru"===t?"http://music-partner.yandex.ru":"http://music-partner.yandex.ru"},www:function(t){return"ru"===t?"http://www.yandex.ru":"ua"===t?"http://www.yandex.ua":"com"===t?"http://www.yandex.com":"by"===t?"http://www.yandex.by":"kz"===t?"http://www.yandex.kz":"tr"===t?"http://www.yandex.com.tr":"http://www.yandex.ru"},search:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"com"===t?"http://yandex.com":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"tr"===t?"http://yandex.com.tr":"http://yandex.ru"},review:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},fresh:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},news:function(t){return"ru"===t?"http://news.yandex.ru":"ua"===t?"http://news.yandex.ua":"by"===t?"http://news.yandex.by":"kz"===t?"http://news.yandex.kz":"tr"===t?"http://haber.yandex.com.tr":"http://news.yandex.ru"},"news-com":function(t){return"ru"===t?"http://news.yandex.com":"http://news.yandex.com"},maps:function(t){return"ru"===t?"//maps.yandex.ru":"ua"===t?"//maps.yandex.ua":"tr"===t?"//harita.yandex.com.tr":"//maps.yandex.ru"},"maps-com":function(t){return"ru"===t?"http://maps.yandex.com":"http://maps.yandex.com"},probki:function(t){return"ru"===t?"http://probki.yandex.ru":"ua"===t?"http://probki.yandex.ua":"http://probki.yandex.ru"},slovari:function(t){return"ru"===t?"//slovari.yandex.ru":"ua"===t?"//slovari.yandex.ua":"by"===t?"//slovari.yandex.by":"kz"===t?"//slovari.yandex.kz":"//slovari.yandex.ru"},images:function(t){return"ru"===t?"http://www.yandex.ru/images/":"ua"===t?"http://www.yandex.ua/images/":"by"===t?"http://www.yandex.by/images/":"kz"===t?"http://www.yandex.kz/images/":"com"===t?"http://www.yandex.com/images/":"tr"===t?"http://www.yandex.com.tr/gorsel/":"http://yandex.ru/images/"},"images-com":function(){return"http://www.yandex.com/images/"},blogs:function(t){return"ru"===t?"http://blogs.yandex.ru":"ua"===t?"http://blogs.yandex.ua":"by"===t?"http://blogs.yandex.by":"kz"===t?"http://blogs.yandex.kz":"http://blogs.yandex.ru"},auto:function(t){return"ru"===t?"http://auto.yandex.ru":"ua"===t?"http://auto.yandex.ua":"http://auto.yandex.ru"},adresa:function(t){return"ru"===t?"http://adresa.yandex.ru":"http://adresa.yandex.ru"},games:function(t){return"ru"===t?"http://games.yandex.ru":"http://games.yandex.ru"},yaca:function(t){return"ru"===t?"http://yaca.yandex.ru":"ua"===t?"http://yaca.yandex.ua":"by"===t?"http://yaca.yandex.by":"http://yaca.yandex.ru"},rasp:function(t){return"ru"===t?"http://rasp.yandex.ru":"ua"===t?"http://rasp.yandex.ua":"by"===t?"http://rasp.yandex.by":"kz"===t?"http://rasp.yandex.kz":"tr"===t?"http://seferler.yandex.com.tr":"http://rasp.yandex.ru"},avia:function(t){return"ru"===t?"https://avia.yandex.ru":"ua"===t?"https://avia.yandex.ua":"https://avia.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},pvo:function(t){return"ru"===t?"http://ask.yandex.ru":"http://ask.yandex.ru"},online:function(t){return"ru"===t?"http://online.yandex.ru":"http://online.yandex.ru"},books:function(t){return"ru"===t?"http://books.yandex.ru":"http://books.yandex.ru"},site:function(t){return"ru"===t?"http://site.yandex.ru":"ua"===t?"http://site.yandex.ua":"tr"===t?"http://ozel.yandex.com.tr":"http://site.yandex.ru"},bar:function(t){return"ru"===t?"http://bar.yandex.ru":"ua"===t?"http://bar.yandex.ua":"by"===t?"http://bar.yandex.by":"kz"===t?"http://bar.yandex.kz":"tr"===t?"http://bar.yandex.com.tr":"http://bar.yandex.ru"},widgets:function(t){return"ru"===t?"http://widgets.yandex.ru":"ua"===t?"http://widgets.yandex.ua":"by"===t?"http://widgets.yandex.by":"kz"===t?"http://widgets.yandex.kz":"tr"===t?"http://widgets.yandex.com.tr":"http://widgets.yandex.ru"},wdgt:function(t){return"ru"===t?"http://wdgt.yandex.ru":"ua"===t?"http://wdgt.yandex.ua":"by"===t?"http://wdgt.yandex.by":"kz"===t?"http://wdgt.yandex.kz":"tr"===t?"http://wdgt.yandex.com.tr":"http://wdgt.yandex.ru"},interests:function(t){return"ru"===t?"http://interests.yandex.ru":"http://interests.yandex.ru"},kraski:function(t){return"ru"===t?"http://kraski.yandex.ru":"http://kraski.yandex.ru"},local:function(t){return"ru"===t?"http://local.yandex.ru":"http://local.yandex.ru"},museums:function(t){return"ru"===t?"http://18.yandex.ru":"http://18.yandex.ru"},collection:function(t){return"ru"===t?"http://collection.yandex.ru":"http://collection.yandex.ru"},company:function(t){return"ru"===t?"http://company.yandex.ru":"com"===t?"http://company.yandex.com":"tr"===t?"http://company.yandex.com.tr":"http://company.yandex.ru"},tests:function(t){return"ru"===t?"http://tests.yandex.ru":"http://tests.yandex.ru"},referats:function(t){return"ru"===t?"http://referats.yandex.ru":"http://referats.yandex.ru"},terms:function(t){return"ru"===t?"http://terms.yandex.ru":"http://terms.yandex.ru"},tune:function(t){return"ru"===t?"http://tune.yandex.ru":"ua"===t?"http://tune.yandex.ua":"com"===t?"http://tune.yandex.com":"by"===t?"http://tune.yandex.by":"kz"===t?"http://tune.yandex.kz":"tr"===t?"http://tune.yandex.com.tr":"http://tune.yandex.ru"},api:function(t){return"ru"===t?"http://api.yandex.ru":"com"===t?"http://api.yandex.com":"http://api.yandex.ru"},punto:function(t){return"ru"===t?"http://punto.yandex.ru":"http://punto.yandex.ru"},opinion:function(t){return"ru"===t?"http://opinion.yandex.ru":"http://opinion.yandex.ru"},perevod:function(t){return"ru"===t?"http://perevod.yandex.ru":"http://perevod.yandex.ru"},rabota:function(t){return"ru"===t?"http://rabota.yandex.ru":"ua"===t?"http://rabota.yandex.ua":"by"===t?"http://rabota.yandex.by":"kz"===t?"http://rabota.yandex.kz":"http://rabota.yandex.ru"},sprav:function(t){return"ru"===t?"http://sprav.yandex.ru":"ua"===t?"http://sprav.yandex.ua":"by"===t?"http://sprav.yandex.by":"kz"===t?"http://sprav.yandex.kz":"tr"===t?"http://rehber.yandex.com.tr":"http://sprav.yandex.ru"},realty:function(t){return"ru"===t?"http://realty.yandex.ru":"ua"===t?"http://realty.yandex.ua":"by"===t?"http://realty.yandex.by":"kz"===t?"http://realty.yandex.kz":"http://realty.yandex.ru"},advertising:function(t){return"ru"===t?"http://advertising.yandex.ru":"ua"===t?"http://advertising.yandex.ua":"com"===t?"http://advertising.yandex.com":"by"===t?"http://advertising.yandex.by":"kz"===t?"http://advertising.yandex.kz":"http://advertising.yandex.ru"},expert:function(t){return"ru"===t?"http://expert.yandex.ru":"http://expert.yandex.ru"},"direct.market":function(t){return"ru"===t?"http://partner.market.yandex.ru/yandex.market/":"http://partner.market.yandex.ru/yandex.market/"},ba:function(t){return"ru"===t?"http://ba.yandex.ru":"ua"===t?"http://ba.yandex.ua":"com"===t?"http://ba.yandex.com":"by"===t?"http://ba.yandex.by":"kz"===t?"http://ba.yandex.kz":"http://ba.yandex.ru"},bayan:function(t){return"ru"===t?"http://bayan.yandex.ru":"http://bayan.yandex.ru"},partners:function(t){return"ru"===t?"http://partner.yandex.ru":"ua"===t?"http://partner.yandex.ua":"com"===t?"http://partner.yandex.com":"by"===t?"http://partner.yandex.by":"kz"===t?"http://partner.yandex.kz":"http://partner.yandex.ru"},metrika:function(t){return"ru"===t?"https://metrika.yandex.ru":"ua"===t?"https://metrika.yandex.ua":"com"===t?"https://metrica.yandex.com":"by"===t?"https://metrika.yandex.by":"kz"===t?"https://metrika.yandex.kz":"tr"===t?"https://metrica.yandex.com.tr":"https://metrika.yandex.ru"},balance:function(t){return"ru"===t?"http://balance.yandex.ru":"http://balance.yandex.ru"},wordstat:function(t){return"ru"===t?"http://wordstat.yandex.ru":"http://wordstat.yandex.ru"},webmaster:function(t){return"ru"===t?"http://webmaster.yandex.ru":"ua"===t?"http://webmaster.yandex.ua":"com"===t?"http://webmaster.yandex.com":"tr"===t?"http://webmaster.yandex.com.tr":"http://webmaster.yandex.ru"},server:function(t){return"ru"===t?"http://company.yandex.ru/technology/server/":"http://company.yandex.ru/technology/server/"},stat:function(t){return"ru"===t?"http://stat.yandex.ru":"ua"===t?"http://stat.yandex.ua":"by"===t?"http://stat.yandex.by":"http://stat.yandex.ru"},mobile:function(t){return"ru"===t?"http://mobile.yandex.ru":"ua"===t?"http://mobile.yandex.ua":"tr"===t?"http://mobil.yandex.com.tr":"http://mobile.yandex.ru"},help:function(t){return"ru"===t?"http://help.yandex.ru":"ua"===t?"http://help.yandex.ua":"com"===t?"http://help.yandex.com":"tr"===t?"http://yardim.yandex.com.tr":"http://help.yandex.ru"},feedback:function(t){return"ru"===t?"http://feedback.yandex.ru":"ua"===t?"http://feedback.yandex.ua":"com"===t?"http://feedback.yandex.com":"by"===t?"http://feedback.yandex.by":"kz"===t?"http://feedback.yandex.kz":"tr"===t?"http://contact.yandex.com.tr":"http://feedback.yandex.ru"},feedback2:function(t){return"ru"===t?"http://feedback2.yandex.ru":"ua"===t?"http://feedback2.yandex.ua":"com"===t?"http://feedback2.yandex.com":"by"===t?"http://feedback2.yandex.by":"kz"===t?"http://feedback2.yandex.kz":"tr"===t?"http://contact2.yandex.com.tr":"http://feedback2.yandex.ru"},start:function(t){return"ru"===t?"http://help.yandex.ru/start/":"ua"===t?"http://help.yandex.ua/start/":"com"===t?"http://help.yandex.com/start/":"tr"===t?"http://yardim.yandex.com.tr/start":"http://help.yandex.ru/start/"},cityday:function(t){return"ru"===t?"http://cityday.yandex.ru":"http://cityday.yandex.ru"},openid:function(t){return"ru"===t?"http://openid.yandex.ru":"http://openid.yandex.ru"},oauth:function(t){return"ru"===t?"https://oauth.yandex.ru":"com"===t?"https://oauth.yandex.com":"https://oauth.yandex.ru"},nano:function(t){return"ru"===t?"http://nano.yandex.ru":"http://nano.yandex.ru"},partnersearch:function(t){return"ru"===t?"http://yandex.ru":"http://yandex.ru"},city:function(t){return"ru"===t?"https://gorod.yandex.ru":"ua"===t?"https://gorod.yandex.ua":"com"===t?"https://city.yandex.com":"by"===t?"https://gorod.yandex.by":"kz"===t?"https://gorod.yandex.kz":"tr"===t?"https://city.yandex.com.tr":"https://gorod.yandex.ru"},goroda:function(t){return"ru"===t?"http://goroda.yandex.ru":"http://goroda.yandex.ru"},toster:function(t){return"ru"===t?"http://toster.yandex.ru":"http://toster.yandex.ru"},love:function(t){return"ru"===t?"http://love.yandex.ru":"http://love.yandex.ru"},rk:function(t){return"ru"===t?"http://rk.yandex.ru":"http://rk.yandex.ru"},lost:function(t){return"ru"===t?"http://lost.yandex.ru":"http://lost.yandex.ru"},soft:function(t){return"ru"===t?"http://soft.yandex.ru":"ua"===t?"http://soft.yandex.ua":"tr"===t?"http://soft.yandex.com.tr":"http://soft.yandex.ru"},passport:function(t){return"ru"===t?"https://passport.yandex.ru":"com"===t?"https://passport.yandex.com":"tr"===t?"https://passport.yandex.com.tr":"https://passport.yandex.ru"},"maps-wiki":function(t){return"ru"===t?"http://nk.yandex.ru":"http://nk.yandex.ru"},404:function(t){return"ru"===t?"http://404.yandex.ru":"ua"===t?"http://404.yandex.ua":"com"===t?"http://404.yandex.com":"by"===t?"http://404.yandex.by":"kz"===t?"http://404.yandex.kz":"tr"===t?"http://404.yandex.com.tr":"http://404.yandex.ru"},i:function(t){return"ru"===t?"http://i.yandex.ru":"http://i.yandex.ru"},desktop:function(t){return"ru"===t?"http://desktop.yandex.ru":"http://desktop.yandex.ru"},ff:function(t){return"ru"===t?"http://ff.yandex.ru":"http://ff.yandex.ru"},fx:function(t){return"ru"===t?"http://fx.yandex.ru":"ua"===t?"http://fx.yandex.ua":"tr"===t?"http://fx.yandex.com.tr":"http://fx.yandex.ru"},ie:function(t){return"ru"===t?"http://ie.yandex.ru":"ua"===t?"http://ie.yandex.ua":"tr"===t?"http://ie.yandex.com.tr":"http://ie.yandex.ru"},"bar-ie":function(t){return"ru"===t?"http://bar.yandex.ru/ie":"ua"===t?"http://bar.yandex.ua/ie":"com"===t?"http://bar.yandex.com/ie":"by"===t?"http://bar.yandex.by/ie":"kz"===t?"http://bar.yandex.kz/ie":"tr"===t?"http://bar.yandex.com.tr/ie":"http://bar.yandex.ru/ie"},"bar-ie9":function(t){return"ru"===t?"http://bar.yandex.ru/ie":"ua"===t?"http://bar.yandex.ua/ie":"com"===t?"http://bar.yandex.com/ie":"by"===t?"http://bar.yandex.by/ie":"kz"===t?"http://bar.yandex.kz/ie":"tr"===t?"http://bar.yandex.com.tr/ie":"http://bar.yandex.ru/ie"},internet:function(t){return"ru"===t?"http://internet.yandex.ru":"com"===t?"http://internet.yandex.com":"tr"===t?"http://internet.yandex.com.tr":"http://internet.yandex.ru"},keyboard:function(t){return"ru"===t?"http://www.yandex.ru/index_engl_qwerty.html":"http://www.yandex.ru/index_engl_qwerty.html"},metro:function(t){return"ru"===t?"http://metro.yandex.ru":"http://metro.yandex.ru"},pulse:function(t){return"ru"===t?"http://blogs.yandex.ru/pulse":"ua"===t?"http://blogs.yandex.ua/pulse":"by"===t?"http://blogs.yandex.by/pulse":"kz"===t?"http://blogs.yandex.kz/pulse":"http://blogs.yandex.ru/pulse"},school:function(t){return"ru"===t?"http://school.yandex.ru":"http://school.yandex.ru"},so:function(t){return"ru"===t?"http://so.yandex.ru":"http://so.yandex.ru"},time:function(t){return"ru"===t?"http://time.yandex.ru":"ua"===t?"http://time.yandex.ua":"com"===t?"http://time.yandex.com":"by"===t?"http://time.yandex.by":"kz"===t?"http://time.yandex.kz":"tr"===t?"http://saat.yandex.com.tr":"http://time.yandex.ru"},xmlsearch:function(t){return"ru"===t?"http://xml.yandex.ru":"ua"===t?"http://xml.yandex.ua":"com"===t?"http://xml.yandex.com":"by"===t?"http://xml.yandex.by":"kz"===t?"http://xml.yandex.kz":"tr"===t?"http://xml.yandex.com.tr":"http://xml.yandex.ru"},catalogwdgt:function(t){return"ru"===t?"http://www.yandex.ru/catalog":"http://www.yandex.ru/catalog"},opera:function(t){return"ru"===t?"http://opera.yandex.ru":"tr"===t?"http://opera.yandex.com.tr":"http://opera.yandex.ru"},uslugi:function(t){return"ru"===t?"http://uslugi.yandex.ru":"http://uslugi.yandex.ru"},backapv:function(t){return"ru"===t?"http://backapv.yandex.ru":"http://backapv.yandex.ru"},chrome:function(t){return"ru"===t?"http://chrome.yandex.ru":"http://chrome.yandex.ru"},browser:function(t){return"ru"===t?"//browser.yandex.ru":"ua"===t?"//browser.yandex.ua":"com"===t?"//browser.yandex.com":"by"===t?"//browser.yandex.by":"kz"===t?"//browser.yandex.kz":"tr"===t?"//browser.yandex.com.tr":"//browser.yandex.ru"},aziada:function(t){return"ru"===t?"http://aziada2011.yandex.kz":"http://aziada2011.yandex.kz"},translate:function(t){return"ru"===t?"//translate.yandex.ru":"ua"===t?"//translate.yandex.ua":"com"===t?"//translate.yandex.com":"by"===t?"//translate.yandex.by":"kz"===t?"//translate.yandex.kz":"tr"===t?"//ceviri.yandex.com.tr":"//translate.yandex.ru"},subs:function(t){return"ru"===t?"http://subs.yandex.ru":"http://subs.yandex.ru"},all:function(t){return"ru"===t?"http://www.yandex.ru/all":"ua"===t?"http://www.yandex.ua/all":"com"===t?"http://www.yandex.com/all":"by"===t?"http://www.yandex.by/all":"kz"===t?"http://www.yandex.kz/all":"tr"===t?"http://www.yandex.com.tr/all":"http://www.yandex.ru/all"},large:function(t){return"ru"===t?"http://large.yandex.ru":"http://large.yandex.ru"},geocontext:function(t){return"ru"===t?"http://geocontext.yandex.ru":"http://geocontext.yandex.ru"},root:function(t){return"ru"===t?"http://root.yandex.ru":"http://root.yandex.ru"},yamb:function(t){return"ru"===t?"https://yamb.yandex.ru":"https://yamb.yandex.ru"},legal:function(t){return"ru"===t?"http://legal.yandex.ru":"ua"===t?"http://legal.yandex.ua":"com"===t?"http://legal.yandex.com":"tr"===t?"http://legal.yandex.com.tr":"http://legal.yandex.ru"},taxi:function(t){return"ru"===t?"https://taxi.yandex.ru":"https://taxi.yandex.ru"},social:function(t){return"ru"===t?"https://social.yandex.ru":"ua"===t?"https://social.yandex.ua":"com"===t?"https://social.yandex.ru":"by"===t?"https://social.yandex.by":"kz"===t?"https://social.yandex.kz":"tr"===t?"https://social.yandex.com.tr":"https://social.yandex.ru"},contest:function(t){return"ru"===t?"http://contest.yandex.ru":"com"===t?"http://contest.yandex.com":"http://contest.yandex.ru"},peoplesearch:function(t){return"ru"===t?"http://people.yandex.ru":"ua"===t?"http://people.yandex.ua":"http://people.yandex.ru"},disk:function(t){return"ru"===t?"https://disk.yandex.ru":"com"===t?"https://disk.yandex.com":"ua"===t?"https://disk.yandex.ua":"kz"===t?"https://disk.yandex.kz":"by"===t?"https://disk.yandex.by":"tr"===t?"https://disk.yandex.com.tr":"https://disk.yandex.ru"
},sport:function(t){return"ru"===t?"http://sport.yandex.ru":"by"===t?"http://sport.yandex.by":"ua"===t?"http://sport.yandex.ua":"kz"===t?"http://sport.yandex.kz":"tr"===t?"http://spor.yandex.com.tr":"http://sport.yandex.ru"},literacy:function(t){return"ru"===t?"http://literacy.yandex.ru":"http://literacy.yandex.ru"},appsearch:function(t){return"ru"===t?"//appsearch.yandex.ru":"//appsearch.yandex.ru"},ege:function(t){return"ru"===t?"//ege.yandex.ru":"//ege.yandex.ru"},vno:function(t){return"ru"===t?"//zno.yandex.ua":"//zno.yandex.ua"},notifications:function(t){return"ru"===t?"https://notifications.yandex.ru":"ua"===t?"https://notifications.yandex.ua":"by"===t?"https://notifications.yandex.by":"kz"===t?"https://notifications.yandex.kz":"com"===t?"https://notifications.yandex.com":"tr"===t?"https://notifications.yandex.com.tr":"https://notifications.yandex.ru"},kassa:function(t){return"ru"===t?"https://money.yandex.ru/start":"https://money.yandex.ru/start/"},shtrafi:function(t){return"ru"===t?"https://money.yandex.net/debts":"http://money.yandex.net/debts"},master:function(t){return"ru"===t?"https://master.yandex.ru":"https://master.yandex.ru"}};if("i-services"===i&&"default"===n&&"url"===o)return void u._buf.push(u["i-services"].serviceUrl(u.ctx.id,u.ctx.region));if("i-services"===i&&"default"===n&&"name"===o)return void u._buf.push(u["i-services"].serviceName(u.ctx.id));if("i-services"===i&&"default"===n&&!o==!1)return"";if(""===n&&!u["i-global"]==!1&&!!u["i-services"]==!1){var Le=u["i-services"]={},Re=t(u);return Le._data=(p=i,i="i-services",f=n,n="service-url",m=l(u),i=p,n=f,m),Le.serviceName=function(t){return BEM.I18N("i-services",t||Re["i-global"].id)},Le.serviceUrl=function(t,e){var n=Re["i-global"];return t||(t=n.id),Le._data[t](e||n["content-region"])},void l(u)}if("user"===i&&"icon"===o&&"iconSize"===n)return"middle";if("user"===i&&"icon"===o&&!u._uid==!1&&!u.ctx._icon==!1&&"attrs"===n)return{style:"background-image: url("+u.ctx._icon+");"};if("user"===i&&"icon"===o&&!u._uid==!1&&"icon"===n)return[(p=n,n="host",f=l(u),n=p,f),"/get-yapic/",u._uid,"/islands-",(m=n,n="iconSize",g=l(u),n=m,g),"?rnd=",+new Date].join("");if("user"===i&&"icon"===o&&!u._uid==!1&&"host"===n)return"//avatars.yandex.net";if("user"===i&&"icon"===o&&!u._uid==!1&&"tag"===n)return"span";if("user"===i&&"icon"===o&&!u._uid==!1&&!(u.__$anflg29!==!0)==!1&&"default"===n){var We=(p=n,n="icon",f=l(u),n=p,f),m=u.__$anflg29;u.__$anflg29=!0;var g=u.ctx,_=g._icon;return g._icon=We,l(u),g._icon=_,void(u.__$anflg29=m)}if(!!o==!1&&"user"===i&&"content"===n){var ze=u._login||u["i-global"].login||(u["i-global"].displayName||{}).name;return ze?[u.ctx.content]:{elem:"enter"}}if(!!o==!1&&"user"===i&&"attrs"===n){var He=u["i-global"],Ue=u._login||He.login,qe=Ue&&/^uid-/.test(Ue),Ve={href:qe?He["social-host"]:He["passport-host"]+"/passport?mode=passport"},Ke=u.ctx.counter||(u.ctx.counters||{}).user;return Ke&&(Ve.onmousedown=Ke),Ve}if(!!o==!1&&"user"===i&&!(u.__$anflg28!==!0)==!1&&"js"===n)return u.extend({uid:u._uid,login:u._login||u["i-global"].login},(p=u.__$anflg28,u.__$anflg28=!0,f=l(u),u.__$anflg28=p,f));if(!!o==!1&&"user"===i&&"tag"===n)return"a";if(!!o==!1&&"user"===i&&!(u.__$anflg27!==!0)==!1&&"default"===n){var Ge=u.ctx.js||{},Je=Ge.uid||u.ctx.uid||u["i-global"].uid,Qe=u.ctx.login,p=u.__$anflg27;u.__$anflg27=!0;var f=u._uid;u._uid=Je;var m=u._login;return u._login=Qe,l(u),u._uid=f,u._login=m,void(u.__$anflg27=p)}if("checkbox"===i&&"label"===o&&"attrs"===n){var Xe=u.ctx.attrs||{};return Xe["for"]=u._checkboxAttrs.id,Xe.id=u._labelId,Xe["aria-hidden"]=!0,Xe}if("checkbox"===i&&"label"===o&&"tag"===n)return"label";if("checkbox"===i&&"control"===o&&"attrs"===n){var Ye=u.ctx.attrs||{};return Ye.id=u._checkboxAttrs.id,Ye.type="checkbox",Ye.autocomplete="off",r.disabled&&(Ye.disabled="disabled"),"yes"==r.checked&&(Ye.checked="checked"),Ye["aria-labelledby"]=u._labelId,Ye}if("checkbox"===i&&"control"===o&&"tag"===n)return"input";if(!!o==!1&&"checkbox"===i&&"content"===n)return[{elem:"box",tag:"span",elemMods:"yes"===r.checked?{checked:"yes"}:"",content:[{elem:"control",attrs:u.ctx.checkboxAttrs||{}},{elem:"tick",tag:"i"}]},u.ctx.content];if(!!o==!1&&"checkbox"===i&&!(u.__$anflg26!==!0)==!1&&"default"===n){var Ze=u.ctx,tn=Ze.checkboxAttrs||{},en=tn.id||u.generateId(),nn=Ze.mods||{};nn.theme=nn.theme||"normal";var p=u.__$anflg26;u.__$anflg26=!0;var f=u._checkboxAttrs;u._checkboxAttrs=tn.id?tn:{id:"id"+en};var m=u._labelId;u._labelId="label"+en;var g=u.ctx,_=g.mods;return g.mods=nn,l(u),u._checkboxAttrs=f,u._labelId=m,g.mods=_,void(u.__$anflg26=p)}if(!!o==!1&&"checkbox"===i&&"js"===n)return u.extend({live:!1},u.ctx.js);if(!!o==!1&&"checkbox"===i&&"tag"===n)return"span";if("dropdown"===i&&"popup"===o&&!(u.__$anflg25!==!0)==!1&&"default"===n){var on=u.ctx,sn=[{block:"dropdown",elem:"popup"}];on.mix&&(sn=sn.concat(on.mix));var p=u.__$anflg25;u.__$anflg25=!0;var f=u.ctx;u.ctx={block:"popup",mix:sn,mods:on.mods,underMods:on.underMods,attrs:on.attrs,js:on.js,content:[{elem:"tail"},{elem:"content",content:on.content}]};var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg25=p)}if(!!o==!1&&"dropdown"===i&&"mix"===n)return[{mods:{action:"closed"}}];if(!!o==!1&&"dropdown"===i&&"js"===n)return!0;if("auth"===i&&"social-link"===o&&"attrs"===n)return{role:"button",tabindex:0,title:u.ctx.title,"aria-label":u.ctx.title};if("auth"===i&&"social-link"===o&&"tag"===n)return"a";if("auth"===i&&"social"===o&&"attrs"===n)return{role:"group","aria-label":BEM.I18N("auth","social-log-in")};if("auth"===i&&!!u.ctx.content==!1&&"register"===o&&"content"===n)return{block:"button",mods:{theme:"pseudo",size:"s"},url:u.ctx.url||[u._passportHost,"/passport?mode=register",u._paramFrom,u._paramRetpath].join(""),content:BEM.I18N("auth","register")};if("auth"===i&&!!u.ctx.content==!1&&"remember"===o&&"content"===n)return{block:"button",mods:{theme:"pseudo",size:"s"},url:u.ctx.url||[u._passportHost,"/passport?mode=restore",u._paramFrom,u._paramRetpath].join(""),content:BEM.I18N("auth","remember")};if("auth"===i&&!!u.ctx.content==!1&&"button"===o&&"content"===n)return{block:"button",type:"submit",mods:{theme:"action",size:"m"},content:BEM.I18N("auth","logon")};if("auth"===i&&!!u.ctx.content==!1&&"haunter"===o&&"content"===n)return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{id:"auth-haunter",autocomplete:"off",name:"twoweeks",value:"no"},content:{elem:"label",content:BEM.I18N("auth","temporary")}};if("auth"===i&&!!u.ctx.content==!1&&"password"===o&&"content"===n)return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":!0}}]};if("auth"===i&&!!u.ctx.content==!1&&"username"===o&&"content"===n)return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":!0}}]};if(!!o==!1&&"auth"===i&&!!u.ctx.content==!1&&"auto-content"===n)return[{elem:"username"},{elem:"password"},{elem:"row",mods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}];if("popup"===i&&"tail"===o&&"tag"===n)return"i";if("auth"===i&&"retpath"===o&&"attrs"===n)return{type:"hidden",name:"retpath",value:u._retpath||""};if("auth"===i&&"retpath"===o&&"tag"===n)return"input";if("auth"===i&&"retpath"===o&&!(u.__$anflg24!==!0)==!1&&"default"===n){var p=u.__$anflg24;u.__$anflg24=!0;var f=u._retpath;return u._retpath=BEM&&BEM.blocks?BEM.blocks["i-global"].param("retpath"):u["i-global"].retpath,l(u),u._retpath=f,void(u.__$anflg24=p)}if(!!o==!1&&"auth"===i&&!(u.__$anflg23!==!0)==!1&&"default"===n){var rn,an,un,cn;BEM&&BEM.blocks?(cn=BEM.blocks["i-global"],rn=cn.param("passport-host"),an=cn.param("retpath"),un=cn.param("passport-msg")):(cn=u["i-global"],rn=cn["passport-host"],an=cn.retpath,un=cn["passport-msg"]);var p=u.__$anflg23;u.__$anflg23=!0;var f=u._passportHost;u._passportHost=rn;var m=u._paramRetpath;u._paramRetpath=an?"&retpath="+encodeURIComponent(an):"";var g=u._paramFrom;return u._paramFrom=un?"&from="+encodeURIComponent(un):"",l(u),u._passportHost=f,u._paramRetpath=m,u._paramFrom=g,void(u.__$anflg23=p)}if(!!o==!1&&"auth"===i&&"content"===n)return[u.ctx.content||(p=n,n="auto-content",f=l(u),n=p,f),{elem:"retpath"}];if(!!o==!1&&"auth"===i&&"auto-content"===n)return[];if(!!o==!1&&"auth"===i&&"action"===n){var ln,dn;return BEM&&BEM.blocks?(ln=BEM.blocks["i-global"],dn=ln.param("passport-msg")):(ln=u["i-global"],dn=ln["passport-msg"]),[u._passportHost,"/auth?twoweeks=yes",dn?"&from="+encodeURIComponent(dn):""].join("")}if(!!o==!1&&"auth"===i&&"attrs"===n)return{method:"POST",action:u.ctx.url||(p=n,n="action",f=l(u),n=p,f),role:"form","aria-label":BEM.I18N("auth","auth")};if(!!o==!1&&"auth"===i&&"tag"===n)return"form";if(!!o==!1&&"auth"===i&&"js"===n)return!0;if(!!o==!1&&"domik"===i&&!(r&&"hidden"===r.type)==!1&&!(u.__$anflg22!==!0)==!1&&"default"===n)return p=u.__$anflg22,u.__$anflg22=!0,f=u.ctx,u.ctx={block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]},m=n,n="",g=l(u),u.ctx=f,n=m,_=g,u.__$anflg22=p,_;if(!!o==!1&&"domik"===i&&!(r&&"hidden"===r.type)==!1&&"js"===n)return!1;if(!!o==!1&&"domik"===i&&!(r&&"popup"===r.type)==!1&&!(u.__$anflg21!==!0)==!1&&"attrs"===n){var hn=(p=u.__$anflg21,u.__$anflg21=!0,f=l(u),u.__$anflg21=p,f||{});return hn.role="dialog",hn}if("domik"===i&&"logo"===o&&"tag"===n)return"i";if("domik"===i&&"roof-body"===o&&"tag"===n)return"i";if("domik"===i&&"roof-border"===o&&"tag"===n)return"i";if(!!o==!1&&"domik"===i&&"content"===n)return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:u.ctx.content}];if(!!o==!1&&"domik"===i&&"default"===n&&!!(u.ctx.mods||{}).logo==!1){var pn,fn;BEM.blocks?(fn=BEM.blocks["i-global"],pn=fn.param("lang")):(fn=u["i-global"],pn=fn.lang);var p=u.ctx,f=p.mods;return p.mods=u.extend(u.ctx.mods||{},{logo:~["en","tr"].indexOf(pn)?"en":"ru"}),l(u),void(p.mods=f)}if(!!o==!1&&"button"===i&&!(r&&"yes"===r.pseudo)==!1&&!(u.__$anflg20!==!0)==!1&&"default"===n){u.ctx.mods=u.extend({theme:"pseudo"},u.ctx.mods);var p=u.__$anflg20;return u.__$anflg20=!0,l(u),void(u.__$anflg20=p)}if(!!o==!1&&"button"===i&&!(r&&"yes"===r.disabled)==!1&&!(u.__$anflg19!==!0)==!1&&"attrs"===n){var mn=u.ctx,gn={};return mn.url?gn["aria-disabled"]=!0:gn.disabled="disabled",u.extend((p=u.__$anflg19,u.__$anflg19=!0,f=l(u),u.__$anflg19=p,f),gn)}if(!!o==!1&&"button"===i&&"content"===n)return{elem:"text",tag:"span",content:u.ctx.content};if(!!o==!1&&"button"===i&&"attrs"===n&&!(u.__$anflg18!==!0)==!1&&!!u.ctx.url==!1){var _n=u.ctx,vn=(p=u.__$anflg18,u.__$anflg18=!0,f=l(u),u.__$anflg18=p,f),bn={type:_n.type||"button",name:_n.name,value:_n.value};return u.extend(vn,bn)}if(!!o==!1&&"button"===i&&"attrs"===n&&!(u.__$anflg17!==!0)==!1&&!u.ctx.url==!1){var yn=u.ctx,wn=(p=u.__$anflg17,u.__$anflg17=!0,f=l(u),u.__$anflg17=p,f),xn={href:yn.url,target:yn.target};return u.extend(wn,xn)}if(!!o==!1&&"button"===i&&"attrs"===n){var kn=u.ctx,En={role:"button"};return En.tabindex=kn.tabindex,En}if(!!o==!1&&"button"===i&&!(u.__$anflg16!==!0)==!1&&"default"===n){u.ctx.mods=u.extend({theme:"normal"},u.ctx.mods);var p=u.__$anflg16;return u.__$anflg16=!0,l(u),void(u.__$anflg16=p)}if(!!o==!1&&"button"===i&&"js"===n)return!0;if(!!o==!1&&"button"===i&&!u.ctx.url==!1&&"tag"===n)return"a";if(!!o==!1&&"button"===i&&"tag"===n)return"button";if(!!o==!1&&"image"===i&&"attrs"===n){var Mn,Sn=u.ctx,In={src:"//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},Cn=["alt","width","height"];for(Sn.url&&(In.src=Sn.url);Mn=Cn.shift();)Sn[Mn]&&(In[Mn]=Sn[Mn]);return In}if(!!o==!1&&"image"===i&&"tag"===n)return"img";if("user"===i&&"enter-label"===o&&"content"===n)return BEM.I18N("user","enter");if("user"===i&&"enter-label"===o&&"attrs"===n)return{"aria-hidden":!0};if("user"===i&&"enter-label"===o&&"tag"===n)return"span";if("user"===i&&"enter"===o&&!(u.__$anflg15!==!0)==!1&&"default"===n){var Tn=BEM.I18N("user","enter"),p=u.__$anflg15;u.__$anflg15=!0;var f=u.ctx;u.ctx=[{block:"button",mods:{pseudo:"yes",size:"m"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:Tn,"aria-label":Tn},content:[{block:"image",mix:[{block:"button",elem:"icon",mods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}];var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg15=p)}if("suggest2-item"===i&&"text"===o&&!(s&&"green-url"===s.type)==!1&&"tag"===n)return"div";if("suggest2-item"===i&&"text"===o&&!(s&&"title-url"===s.type)==!1&&"tag"===n)return"div";if("suggest2-item"===i&&"img"===o&&!(u.__$anflg14!==!0)==!1&&"default"===n){var Bn=u.ctx.attrs||{};u.ctx.src&&(Bn.style="background-image: url('"+u.ctx.src+"');"+(Bn.style||""));var p=u.__$anflg14;u.__$anflg14=!0;var f=u.ctx,m=f.attrs;return f.attrs=Bn,l(u),f.attrs=m,void(u.__$anflg14=p)}if("suggest2-item"===i&&"thumb-img"===o&&"tag"===n)return"img";if("suggest2-item"===i&&"thumb"===o&&!!u.ctx.content==!1&&"content"===n)return{elem:"thumb-wrapper",attrs:{style:u.ctx.bgColor?"background-color: "+u.ctx.bgColor+";border: none;":""},content:{elem:"thumb-img",attrs:{src:u.ctx.src,alt:u.ctx.alt}}};if("suggest2-item"===i&&"icon"===o&&!s.weather==!1&&!(u.__$anflg13!==!0)==!1&&"default"===n){var Dn=s.weather.replace("-","minus-").replace("+","plus-").replace(/_/g,"-"),p=u.__$anflg13;u.__$anflg13=!0;var f=u.ctx,m=f.autoType;f.autoType="weather."+Dn+".";var g=s,_=g.weather;return g.weather=Dn,l(u),f.autoType=m,g.weather=_,void(u.__$anflg13=p)}if("suggest2-item"===i&&"icon"===o&&!s.traffic==!1&&!(u.__$anflg12!==!0)==!1&&"default"===n){var p=u.__$anflg12;u.__$anflg12=!0;var f=u.ctx,m=f.autoType;return f.autoType="traffic."+s.traffic+".",l(u),f.autoType=m,void(u.__$anflg12=p)}if("suggest2-item"===i&&"icon"===o&&"tag"===n)return"span";if("suggest2-item"===i&&"icon"===o&&!(u.__$anflg11!==!0)==!1&&"default"===n){var Pn=BEM.blocks["suggest2-detect"]&&BEM.blocks["suggest2-detect"].isSupportInlineSVG()?"svg":"png";u.ctx.autoType&&(u.ctx[Pn]="//yastatic.net/suggest-flag-icons/icon."+u.ctx.autoType+Pn);var $n=u.ctx.png&&u.ctx.svg?u.ctx[Pn]:u.ctx.svg||u.ctx.png;$n&&(u.ctx.attrs=u.extend(Object(u.ctx.attrs),{style:'background-image:url("'+$n+'");'+(Object(u.ctx.attrs).style||"")}));var p=u.__$anflg11;return u.__$anflg11=!0,l(u),void(u.__$anflg11=p)}if("suggest2-item"===i&&"link"===o&&"attrs"===n)return{href:u.ctx.url,target:u.ctx.target};if("suggest2-item"===i&&"link"===o&&"tag"===n)return"a";if("suggest2-item"===i&&!(r&&"link"===r.interact)==!1&&!("nav"===r.type||"icon"===r.type)==!1&&"text"===o&&"mix"===n)return{mods:{type:"url"}};if(!!o==!1&&"suggest2-item"===i&&!(r&&"link"===r.interact)==!1&&"content"===n)return{elem:"link",url:u.ctx.url,target:u.ctx.target||"_blank",content:u.ctx.content};if("suggest2-item"===i&&!(r&&"nav"===r.type)==!1&&"fact"===o&&"content"===n)return u.xmlEscape(u.ctx.content);if("suggest2-item"===i&&"bullet"===o&&"attrs"===n)return{"aria-hidden":!0};if("suggest2-item"===i&&"bullet"===o&&"tag"===n)return"span";if("suggest2"===i&&"a11y"===o&&"tag"===n)return"span";if("suggest2-item"===i&&"fact"===o&&"content"===n)return[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},u.escapeContent===!1?u.ctx.content:u.xmlEscape(u.ctx.content)];if("suggest2-item"===i&&"fact"===o&&!u.ctx.color==!1&&!(u.__$anflg10!==!0)==!1&&"default"===n){u.ctx.attrs=u.extend(Object(u.ctx.attrs),{style:";color:"+u.ctx.color+";"+(Object(u.ctx.attrs).style||"")});var p=u.__$anflg10;return u.__$anflg10=!0,l(u),void(u.__$anflg10=p)}if("suggest2"===i&&!(r&&"normal"===r.theme)==!1&&"content"===o&&"tag"===n)return"ul";if("suggest2-item"===i&&"highlight"===o&&"content"===n)return u.xmlEscape(u.ctx.content);if("suggest2-item"===i&&"highlight"===o&&"bem"===n)return!1;if("suggest2-item"===i&&"highlight"===o&&"tag"===n)return"b";if("suggest2-item"===i&&"fact"===o&&"tag"===n)return"span";if("suggest2-item"===i&&"text"===o&&"content"===n)return Array.isArray(u.ctx.content)?u.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},t(u)):u.xmlEscape(u.ctx.content);if("suggest2-item"===i&&"text"===o&&"tag"===n)return u.ctx.tag||"span";if(!!o==!1&&"suggest2-item"===i&&"js"===n)return!0;if(!!o==!1&&"suggest2-item"===i&&"tag"===n)return"li";if("i-bem"===i&&"i18n"===o&&"default"===n){if(!u.ctx)return"";var On=u.ctx,Fn=On.keyset,An=On.key,jn=On.params||{};if(!Fn&&!An)return"";if(On.content){var Nn;jn.content=(Nn=[],p=u._buf,u._buf=Nn,f=n,n="",m=u.ctx,u.ctx=On.content,g=l(u),u._buf=p,n=f,u.ctx=m,Nn.join(""))}return void u._buf.push(BEM.I18N(Fn,An,jn))}if("suggest2"===i&&"items"===o&&"tag"===n)return"ul";if(!!o==!1&&"popup"===i&&"content"===n)return[{elem:"under",mods:u.ctx.underMods},u.ctx.content];if(!!o==!1&&"popup"===i&&"default"===n&&!!u._popupDefaults==!1){var Ln=u.ctx;if(Ln.mods=r=u.extend({theme:"ffffff",autoclosable:"yes",adaptive:"yes",animate:"yes"},r),Ln.zIndex){var Rn=Ln.attrs||(Ln.attrs={});Rn.style=(Rn.style||"")+";z-index:"+Ln.zIndex+";"}var p=u._popupDefaults;return u._popupDefaults=!0,l(u),void(u._popupDefaults=p)}if(!!o==!1&&"popup"===i&&""===n&&!u._popupDefaults==!1)return delete u._popupDefaults,void l(u);if("input"===i&&"ahead-hint"===o&&"attrs"===n)return{readonly:"readonly",tabindex:"-1"};if("input"===i&&"ahead-hint"===o&&"tag"===n)return"input";if("input"===i&&"ahead-hint"===o&&"mix"===n)return[{block:"input",elem:"control"}];if("input"===i&&"ahead-filler"===o&&"tag"===n)return"span";if("input"===i&&"ahead"===o&&"content"===n)return[{elem:"ahead-filler"},{elem:"ahead-hint"},{elem:"ahead-hintholder"}];if(!!o==!1&&"link"===i&&!(r&&"yes"===r.disabled)==!1&&!(u.__$anflg9!==!0)==!1&&"attrs"===n)return u.extend((p=u.__$anflg9,u.__$anflg9=!0,f=l(u),u.__$anflg9=p,f),{tabindex:-1,"aria-disabled":!0});if("link"===i&&"inner"===o&&"tag"===n)return"span";if(!!o==!1&&"link"===i&&"attrs"===n){var Wn=u.ctx,zn=Wn.url,Hn={};if(["title","target","id","tabindex"].forEach(function(t){Wn[t]&&(Hn[t]=Wn[t])}),zn)if(u.isSimple(zn))Hn.href=zn;else{var Un=[],p=n;n="";var f=u._buf;u._buf=Un;var m=u.ctx;u.ctx=zn,l(u),n=p,u._buf=f,u.ctx=m,Hn.href=Un.join("")}else Hn.role="button",Hn.tabindex||(Hn.tabindex=0);return Hn}if(!!o==!1&&"link"===i&&"js"===n&&!u.ctx.tabindex==!1)return{origTabindex:u.ctx.tabindex};if(!!o==!1&&"link"===i&&"tag"===n)return u.ctx.url?"a":"span";if("input"===i&&"hint"===o&&!!u._value==!1&&!(0!==u._value)==!1&&!(u.__$anflg8!==!0)==!1&&"default"===n){var qn=u.ctx,Vn=qn.elemMods||(qn.elemMods={});Vn.visibility="visible";var p=u.__$anflg8;return u.__$anflg8=!0,l(u),void(u.__$anflg8=p)}if("input"===i&&"hint"===o&&"attrs"===n)return{id:u._hintId,"for":u._inputId,"aria-hidden":!0};if("input"===i&&"hint"===o&&"tag"===n)return"label";if("input"===i&&"clear"===o&&"content"===n&&!!u.ctx.content==!1)return"";if("input"===i&&"clear"===o&&"attrs"===n)return{unselectable:"on"};if("input"===i&&"clear"===o&&"tag"===n)return"span";if("input"===i&&"control"===o&&!(u.__$anflg7!==!0)==!1&&"default"===n){var p=u.__$anflg7;u.__$anflg7=!0;var f=u.ctx;u.ctx=[u._placeholder?{elem:"hint",elemMods:{fallback:"yes"},content:u._placeholder}:"",{elem:"box",content:u.ctx}];var m=n;return n="",l(u),u.ctx=f,n=m,void(u.__$anflg7=p)}if("input"===i&&"control"===o&&"attrs"===n){var Kn=u.extend({id:u._inputId,name:u._name,placeholder:u._placeholder},u.ctx.controlAttrs);return(u._value||0===u._value)&&(Kn.value=u._value),r.disabled&&(Kn.disabled="disabled"),u._live&&(Kn.autocomplete="off"),Kn["aria-labelledby"]=u._labelId+" "+u._hintId,Kn}if("input"===i&&"control"===o&&"tag"===n)return"input";if("input"===i&&"box"===o&&!!r.clear==!1&&!(u.__$anflg6!==!0)==!1&&"content"===n)return[(p=u.__$anflg6,u.__$anflg6=!0,f=l(u),u.__$anflg6=p,f),{elem:"clear",elemMods:u._value||0===u._value?{visibility:"visible"}:void 0}];if("input"===i&&"box"===o&&"tag"===n)return"span";if("input"===i&&"ahead-hint"===o&&"tag"===n)return"span";if("input"===i&&"ahead-filler"===o&&"tag"===n)return"span";if("input"===i&&"ahead"===o&&"content"===n)return[{elem:"ahead-filler"},{elem:"ahead-hint"}];if("input"===i&&"ahead"===o&&"mix"===n)return[{block:"input",elem:"input"}];if("input"===i&&!!o==!1&&"value"===n&&!u.isSimple(u.ctx)==!1)return u.ctx;if("input"===i&&!!o==!1&&"value"===n&&!u.ctx==!1){var Gn=[],p=u._buf;u._buf=Gn;var f=n;return n="",l(u),u._buf=p,n=f,Gn.join("")}if("input"===i&&!!o==!1&&"value"===n)return"";if("input"===i&&!!o==!1&&!(u.__$anflg5!==!0)==!1&&"default"===n){var Jn,Qn=(p=n,n="value",f=u.ctx,u.ctx=u.ctx.value,m=l(u),n=p,u.ctx=f,m),Xn=u.ctx.id||u.generateId(),Yn=u.ctx.mods||{},Zn=(g=n,n="getLive",_=l(u),n=g,_);Yn.theme=Yn.theme||"normal",u.ctx.hasOwnProperty("placeholder")&&(v=n,n="value",b=u.ctx,u.ctx=u.ctx.placeholder,y=l(u),n=v,u.ctx=b,Jn=y);var w=u.__$anflg5;u.__$anflg5=!0;var x=u._inputId;u._inputId=Xn;var k=u._labelId;u._labelId="label"+Xn;var E=u._hintId;u._hintId="hint"+Xn;var M=u._name;u._name=u.ctx.name||"";var S=u._value;u._value=Qn;var I=u._inputLink;u._inputLink=!0;var C=u._disabled;u._disabled=r.disabled;var T=u._live;u._live=Zn;var B=u._placeholder;u._placeholder=Jn;var D=u.ctx,P=D.mods;return D.mods=Yn,l(u),u._inputId=x,u._labelId=k,u._hintId=E,u._name=M,u._value=S,u._inputLink=I,u._disabled=C,u._live=T,u._placeholder=B,D.mods=P,void(u.__$anflg5=w)}if("input"===i&&!!o==!1&&"js"===n)return{live:u._live};if("input"===i&&!!o==!1&&"getLive"===n){var ti=(p=n,n="live",f=l(u),n=p,f),ei=u.ctx.js,ni=u.ctx.mods,ii={autofocus:"yes",width:"content","tap-ahead":"yes"};if(ei){if(ei.autoFocus&&ei.live)throw new Error('input block can\'t have both "live" and "autoFocus" enabled');ei.hasOwnProperty("live")&&(ti=ei.live);var oi=Object.keys(ii).some(function(t){return ni[t]===ii[t]});(oi||ei.autoFocus)&&(ti=!1)}return ti}if("input"===i&&!!o==!1&&"live"===n)return!1;if("input"===i&&!!o==!1&&"tag"===n)return"span";if(""===n&&!u._==!1&&!!u._.cleverSubstring==!1)return u._.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"":t},void l(u);if(!!o==!1&&"i-ua"===i&&!(u.__$anflg4!==!0)==!1&&"content"===n){var si=(p=u.__$anflg4,u.__$anflg4=!0,f=l(u),u.__$anflg4=p,f);return si+=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("")}if("i-global"===i&&"public-params"===n&&!o==!1)return{id:1,lang:1,tld:1,"content-region":1,"user-region":1,login:1,displayName:1,index:1,yandexuid:1,"passport-host":1,"pass-host":1,"passport-msg":1,"static-host":1,"lego-static-host":1,"social-host":1,clck:1,"click-host":1,"export-host":1,"i-host":1,"social-retpath":1,"lego-path":1,sid:1,retpath:1,uid:1}[o]||!1;if("i-global"===i&&"default"===n&&"lego-static-host"===o)return"//yastatic.net/lego/2.10-142";if("i-global"===i&&"default"===n&&"export-host"===o)return"https://export.yandex.ru";if("i-global"===i&&"default"===n&&"social-host"===o)return"https://social.yandex.ru";if("i-global"===i&&"default"===n&&"pass-host"===o)return"https://pass.yandex.ru";if("i-global"===i&&"default"===n&&"passport-host"===o)return"https://passport.yandex.ru";if("i-global"===i&&"default"===n&&"click-host"===o)return"//clck.yandex.ru";if("i-global"===i&&"default"===n&&"content-region"===o)return"ru";if("i-global"===i&&"default"===n&&"tld"===o)return"ru";if("i-global"===i&&"default"===n&&"lang"===o)return"ru";if("i-global"===i&&"default"===n&&!o==!1)return"";if(!!o!=!1||"i-global"!==i||"default"!==n){if(!!o==!1&&"i-global"===i&&"env"===n)return{};if(""===n&&!(u.__$anflg3!==!0)==!1&&!!u["i-global"]==!1){for(var ri,ai={},ui=["lang","tld","content-region","click-host","passport-host","pass-host","social-host","export-host","login","lego-static-host"];ri=ui.shift();)ai[ri]=(p=n,n="default",f=i,i="i-global",m=o,o=ri,g=l(u),n=p,i=f,o=m,g);var ci=(_=n,n="env",v=i,i="i-global",b=l(u),n=_,i=v,b),y=u.__$anflg3;u.__$anflg3=!0;var w=u["i-global"];return u["i-global"]=u.extend(ai,ci),l(u),u["i-global"]=w,void(u.__$anflg3=y)}if("b-page"===i&&"js"===o&&"attrs"===n)return{src:u.ctx.url,nonce:u.ctx.nonce||u._nonce};if("b-page"===i&&"js"===o&&"tag"===n)return"script";if("b-page"===i&&"js"===o&&"bem"===n)return!1;if(!!o==!1&&"i-jquery"===i&&!(u.__$anflg2!==!0)==!1&&"default"===n)return p=u.__$anflg2,u.__$anflg2=!0,f=u.ctx,u.ctx={block:"b-page",elem:"js",nonce:u.ctx.nonce||u._nonce,url:u.ctx.url||(u.ctx.protocol?u.ctx.protocol+":":"")+"//yastatic.net/jquery/"+r.version+"/jquery.min.js"},m=n,n="",g=l(u),u.ctx=f,n=m,_=g,u.__$anflg2=p,_;if(!!o==!1&&"i-ua"===i&&!(u.__$anflg1!==!0)==!1&&"content"===n){var li=(p=u.__$anflg1,u.__$anflg1=!0,f=l(u),u.__$anflg1=p,f);return li+=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}if(!!o==!1&&"i-ua"===i&&"content"===n)return[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");if(!!o==!1&&"i-ua"===i&&"attrs"===n)return{nonce:u.ctx.nonce||u._nonce};if(!!o==!1&&"i-ua"===i&&"bem"===n)return!1;if(!!o==!1&&"i-ua"===i&&"tag"===n)return"script";if("content"===n)return u.ctx.content;if("mix"===n)return void 0;if("bem"===n)return void 0;if("jsAttr"===n)return void 0;if("js"===n)return void 0;if("cls"===n)return void 0;if("attrs"===n)return void 0;if("tag"===n)return void 0;if(!u.ctx==!1&&!!u._.isSimple(u.ctx)==!1&&!u.ctx.link==!1){if(!a||!u._cacheLog)return c.call(t(u));var di=u._buf.slice(u._cachePos).join("");u._cachePos=u._buf.length,u._cacheLog.push(di,{log:u._localLog.slice(),link:u.ctx.link});var hi=c.call(t(u));return u._cachePos=u._buf.length,hi}if(!a==!1&&!u.ctx==!1&&!u.ctx.cache==!1){var pi;if(pi=a.get(u.ctx.cache)){var fi=u._links;u.ctx.links&&(u._links=u.ctx.links);for(var mi=0;mi<pi.log.length;mi++)if("string"!=typeof pi.log[mi]){var gi,_i=pi.log[mi];gi=_i.log.map(function(t){return{key:t[0],value:d(this,t[0],t[1])}},t(u)).reverse();var p=u.ctx,f=p.cache;p.cache=null;var m=u._cacheLog;u._cacheLog=null;var g=u.ctx,_=g.link;g.link=_i.link,l(u),p.cache=f,u._cacheLog=m,g.link=_,gi.forEach(function(t){d(this,t.key,t.value)},t(u))}else u._buf.push(pi.log[mi]);return u._links=fi,pi.res}var vi,bi=[],v=u.ctx,b=v.cache;v.cache=null;var y=u._cachePos;u._cachePos=u._buf.length;var w=u._cacheLog;u._cacheLog=bi;var x=u._localLog;u._localLog=[],vi=l(u);var yi=u._buf.slice(u._cachePos).join("");return yi&&bi.push(yi),v.cache=b,u._cachePos=y,u._cacheLog=w,u._localLog=x,a.set(u.ctx.cache,{log:bi,res:vi}),vi}if("default"!==n){if(""===n&&!u._.isSimple(u.ctx)==!1){u._listLength--;var wi=u.ctx;return void((wi&&wi!==!0||0===wi)&&u._buf.push(wi))}if(""===n&&!!u.ctx==!1)return void u._listLength--;if(""===n&&!u._.isArray(u.ctx)==!1){var xi=u.ctx,ki=xi.length,Ei=0,Mi=u.position,Si=u._notNewList;for(Si?u._listLength+=ki-1:(u.position=0,u._listLength=ki),u._notNewList=!0;ki>Ei;){var Ii=xi[Ei++],p=u.ctx;u.ctx=null==Ii?"":Ii,l(u),u.ctx=p}return void(Si||(u.position=Mi))}if(""===n){var Ci=u.ctx.block,Ti=u.ctx.elem,Bi=u._currBlock||i;u.ctx||(u.ctx={});var p=n;n="default";var f=u._links;u._links=u.ctx.links||u._links;var m=i;i=Ci||(Ti?Bi:void 0);var g=u._currBlock;u._currBlock=Ci||Ti?void 0:Bi;var _=o;o=u.ctx.elem;var v=r;r=Ci?u.ctx.mods||(u.ctx.mods={}):r;var b=s;return s=u.ctx.elemMods||{},i||o?u.position=(u.position||0)+1:u._listLength--,l(u),n=p,u._links=f,i=m,u._currBlock=g,o=_,r=v,void(s=b)}}else{var Di,Pi=u.BEM,$i=u.ctx,Oi=u._buf;if(p=n,n="tag",f=l(u),n=p,Di=f,"undefined"!=typeof Di||(Di=$i.tag),"undefined"!=typeof Di||(Di="div"),Di){var Fi,Ai;i&&$i.js!==!1&&(_=n,n="js",v=l(u),n=_,Ai=v,Ai=Ai?u._.extend($i.js,Ai===!0?{}:Ai):$i.js===!0?{}:$i.js,Ai&&((Fi={})[Pi.INTERNAL.buildClass(i,$i.elem)]=Ai)),Oi.push("<",Di);var ji=(b=n,n="bem",y=l(u),n=b,y);"undefined"!=typeof ji||(ji="undefined"!=typeof $i.bem?$i.bem:$i.block||$i.elem);var Ni=(w=n,n="cls",x=l(u),n=w,x);Ni||(Ni=$i.cls);var Li=$i.block&&Fi&&!$i.elem;if(ji||Ni){if(Oi.push(' class="'),ji){Pi.INTERNAL.buildClasses(i,$i.elem,$i.elemMods||$i.mods,Oi);var Ri=(k=n,n="mix",E=l(u),n=k,E);if($i.mix&&(Ri=Ri?[].concat(Ri,$i.mix):$i.mix),Ri){var Wi={};Wi[h(i,o)]=!0,u._.isArray(Ri)||(Ri=[Ri]);for(var zi=0;zi<Ri.length;zi++){var Hi=Ri[zi];if(Hi){var Ui=Hi.block||Hi.elem,qi=Hi.block||Hi._block||i,Vi=Hi.elem||Hi._elem||o,Ki=Hi.mods||r,Gi=Hi.elemMods||{};if(Ui&&Oi.push(" "),Pi.INTERNAL[Ui?"buildClasses":"buildModsClasses"](qi,Hi.elem||Hi._elem||(Hi.block?void 0:o),Hi.elemMods||Hi.mods,Oi),Hi.js&&((Fi||(Fi={}))[Pi.INTERNAL.buildClass(qi,Hi.elem)]=Hi.js===!0?{}:Hi.js,Li||(Li=qi&&!Hi.elem)),Ui&&!Wi[h(qi,Vi)]){Wi[h(qi,Vi)]=!0;var Ji=(M=i,i=qi,S=o,o=Vi,I=r,r=Ki,C=s,s=Gi,T=n,n="mix",B=l(u),i=M,o=S,r=I,s=C,n=T,B);if(Ji)for(var Qi=0;Qi<Ji.length;Qi++){var Xi=Ji[Qi];(Xi.block||Xi.elem)&&Wi[h(Xi.block,Xi.elem)]||(Xi._block=qi,Xi._elem=Vi,Ri.splice(zi+1,0,Xi))}}}}}}Ni&&Oi.push(ji?" ":"",Ni),Li&&Oi.push(" i-bem"),Oi.push('"')}if(Fi){var Yi=($=n,n="jsAttr",O=l(u),n=$,O);Oi.push(" ",Yi||"data-bem",'="',u._.attrEscape(JSON.stringify(Fi)),'"')}var Zi=(F=n,n="attrs",A=l(u),n=F,A);if(Zi=u._.extend(Zi,$i.attrs)){var to;for(to in Zi)void 0!==Zi[to]&&Oi.push(" ",to,'="',u._.attrEscape(Zi[to]),'"')}}if(u._.isShortTag(Di))Oi.push("/>");else{Di&&Oi.push(">");var eo=(j=n,n="content",N=l(u),n=j,N);if(eo||0===eo){var ji=i||o,no=u._notNewList;u._notNewList=!1;var io=u.position;u.position=ji?1:u.position;var oo=u._listLength;u._listLength=ji?1:u._listLength;var so=u.ctx;u.ctx=eo;var ro=n;n="",l(u),u._notNewList=no,u.position=io,u._listLength=oo,u.ctx=so,n=ro}Di&&Oi.push("</",Di,">")}}}else{var ao,uo,co,lo=u.ctx.params||{},ho=u["i-global"],po=lo.tld&&lo.tld!==ho.tld;po&&(ao=lo.tld,uo="tr"===ao?"yandex.com.tr":"yandex."+ao,co=-1!=["ua","by","kz"].indexOf(ao)?"yandex.ru":uo,ho["content-region"]=ao,ho["click-host"]="//clck."+co,ho["passport-host"]="https://passport."+co,ho["pass-host"]="https://pass."+uo,ho["social-host"]="https://social."+uo,ho["export-host"]="https://export."+uo);for(var fo in lo)ho[fo]=lo[fo]}}return!function(){!function(t,e){if(e.I18N)return void 0;t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){return void 0}}(this,"undefined"==typeof BEM?{}:BEM)}(),!function(){function t(t){this.apply=t,this._buf=null,this.ctx=null,this._=this,this._start=!0,this._listLength=0,this._notNewList=!1,this._inside=!1,this.position=0}var e={},n=Object.prototype.toString,i={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};!function(t,e){function n(t,e,n){n.push(s,t,s,e)}function i(t,e,i,o){o.push(t),i&&n(e,i,o)}function o(t,o,s,a,u){i(t,e,e,u),u.push(r,o),a&&n(s,a,u)}var s="_",r="__",a="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:a,MOD_DELIM:s,ELEM_DELIM:r,buildModPostfix:function(t,e,i){var o=i||[];return n(t,e,o),i?o:o.join("")},buildClass:function(t,n,s,r,a){var u=typeof s;if("string"==u?"string"!=typeof r&&(a=r,r=s,s=n,n=e):"undefined"!=u?(a=s,s=e):n&&"string"!=typeof n&&(a=n,n=e),!(n||s||a))return t;var c=a||[];return n?o(t,n,s,r,c):i(t,s,r,c),a?c:c.join("")},buildModsClasses:function(t,e,n,s){var r=s||[];if(n){var a;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];null!=u&&(u=n[a]+"",u&&(r.push(" "),e?o(t,e,a,u,r):i(t,a,u,r)))}}return s?r:r.join("")},buildClasses:function(t,n,s,r){var a=r||[];return n?o(t,n,e,e,a):i(t,e,e,a),this.buildModsClasses(t,n,s,r),r?a:a.join("")}}}(e),t.prototype.reinit=function(t){this.ctx=null===typeof t?"":t,this._buf=[],this._start=!0,this._listLength=0,this._notNewList=!1,this.position=0},t.prototype.isArray=Array.isArray?function(t){return Array.isArray(t)
}:function(t){return"[object Array]"===n.call(t)},t.prototype.isSimple=function(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e},t.prototype.isShortTag=function(t){return i.hasOwnProperty(t)},t.prototype.extend=function(t,e){if(!t||!e)return t||e;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},t.prototype.identify=function(){var t=0,n=e.__id=+new Date,i="__"+n,o=function(){return"uniq"+n+ ++t};return function(t,e){return t?e||t[i]?t[i]:t[i]=o():o()}}(),t.prototype.xmlEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.prototype.attrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.prototype.BEM=e,t.prototype.isFirst=function(){return 1===this.position},t.prototype.isLast=function(){return this.position===this._listLength},t.prototype.generateId=function(){return this.identify(this.ctx)},u.apply=t.apply=function(){var e=new t(c);return e.reinit(this),e.apply(),e._buf.join("")}}(),u}("undefined"==typeof u?{}:u);return function(t){var e=this;return t||(t={}),a=t.cache,function(){return e===this?(e=void 0,n="",i="",o="",s="",r=""):(n="",i="",o="",s="",r=""),c.apply.call([e])}.call(null)}}();"undefined"==typeof exports||(exports.BEMHTML=BEMHTML),home.lang={informationsMessages:{settingsNotSaved:"      .",beforeReset:" ,       ?     .",cannotSaveSettings:",     .  ."},widgetcontrol:{setup:"",share:" ","delete":""},widgetbaloon:{cancel:"",keep:""},securityMessages:{noYandexWidgetAddedA:"       ."},catalog:{returnToCatalog:"  "},rates:{newalt:{kurs:"%s:  ",index:"%s:  ",korz:" ",ceni:"%s:  "}}},function(){function t(e,i){var o=n[e];return o?o(i,t)||"":""}function e(t,i,o){i&&(n[t]=i instanceof Function?function(t,e){return i.call(t,e)}:home.templateGenerator(i,o,t,e))}!function(){"use strict";home.templateRe=/([\s\S]*?)\[%\s+(.+?)\s+%\]/g,home.parseRules={l10n:function(t,e){return this.l10n||home.error("Can't proccess 'l10n:"+e+"', check context of template"),t.l10n&&t.l10n(e)},jpath:function(t,e){var n="";return x.each(e.split("+"),function(e){n+=home.getJPathValue(t,e)||""}),n},baseViews:function(t,e){return t.baseViews(e,this)},bem:function(t,e){e=e.split("."),t=t||{};var n=e.pop(),i=e.pop(),o=e.pop();switch(n){case"class":return home.getBEMClassname(i,(o?t[o]:t)||{});case"js":return home.getBEMParams(t[i||"js"]||{});case"attrs":return home.getAttributes(t[i||"attrs"])}}};var t=function(t){return t.replace(/(["\\])/g,"\\$&").replace(/\n/g,"\\n")},e=function(e,n){e.push('"'+t(n.contents)+'"')},n=function(t,e){t.push('home.parseRules["'+e.name+'"](data,"'+e.expr+'")')},i=function(e,n,i){var o=n.key;e.push(i&&o in i?'(data["'+o+'"]!==undefined?data["'+o+'"]:(execView("'+o+'",data)||"'+t(i[o])+'"||""))':'(data["'+o+'"]!==undefined?data["'+o+'"]:(execView("'+o+'",data)||""))')},o={};o.string=e,o.parsed=n,o.subCall=i;var s=function(t,e,n,i){var s=[],r=[];return n=n&&n.replace(/\-/g,"_")||"viewTemplate",t.forEach(function(t){o[t.type](r,t,e)}),s.push("return function "+n+" (data,execView){"),s.push("return "),s.push(r.join("+")),s.push(";"),s.push("};"),new Function("views",s.join(""))(i)};home.templateGenerator=function(t,e,n,i){var o=[],r=t.replace(home.templateRe,function(t,e,n){if(e&&o.push({type:"string",contents:e}),n){var i=n.replace(/\s/g,"").split(":");o.push(i.length>1?{type:"parsed",name:i[0],expr:i[1]}:{type:"subCall",key:n})}return""});return r&&o.push({type:"string",contents:r}),s(o,e,n,i)}}();var n={},i={l10n:home.l10n,stat:{logShow:function(){},getAttr:function(){return""}},settingsJs:{add:function(t,e,n){home["export"][n]||(home["export"][n]={}),home["export"][n][t]=e}},beget:function(t){return x.beget(this,t)}};home.view=function(e,n){for(var o in i)o in n||(n[o]=i[o]);return t(e,n)},e("b-link",function(){var t=this.mods||{},e=this.mix||"",n=this.attrs||"",i=this.href?"a":"span";return"object"==typeof n&&(n=home.getAttributes(n)),this.mod&&(e+=this.mod),this.href?n+=home.getAttributes({href:this.href}):t.pseudo="yes",this.counter?n+=" "+this.counter:this.stat&&(n+=" "+this.stat),"<"+i+' class="'+home.getBEMClassname("b-link",{mods:t,mix:e})+'"'+n+">"+this.content+"</"+i+">"}),e("inline-stocks__tables",function(t){var e,n=this.blocks;return n?(e=n.map(function(e,n){return e.i=n,t("inline-stocks__block-content",this.beget(e))},this),t("inline-stocks__grid",{data:e})):""}),e("inline-stocks__grid",function(){var t,e=this.data,n=e.length/2,i="",o="";for(t=0;n>t;t++)i+='<div class="inline-stocks__grid-item inline-stocks__grid-item_first">'+e[2*t]+"</div>",o+=e[2*t+1]?'<div class="inline-stocks__grid-item">'+e[2*t+1]+"</div>":"";return'<tr class="inline-stocks__grid-row"><td>'+i+"</td><td>"+o+"</td></tr>"}),e("inline-stocks__block-content",function(t){for(var e="",n=this.rows,i=0,o=n.length;o>i;i++){var s=n[i],r=this.l10n("rates.newalt."+s.alt).replace(/%s/,s.text);e+='<tr class="inline-stocks__row_id_'+s.id+'" data-klimit="'+s.klimit+'"><td class="inline-stocks__row-title"><a href ="'+s.href+'" class="link link_blue_yes"'+(r?' title="'+r+'"':"")+' data-statlog="news_rates_manual.popup.'+s.id+'">'+t("inline-stocks__replaceCaps",{text:s.text_caps})+"</a></td>"+t("inline-stocks__rows-by-type",this.beget({type:this.type,rows:s.data,klimit:s.klimit}))+"</tr>"}return'<h2 class="inline-stocks__table-title">'+this.text+'</h2><table class="inline-stocks__table inline-stocks__table_type_'+this.type+" inline-stocks__table_id_"+this.i+'">'+t("inline-stocks__t-title",this)+e+"</table>"}),e("inline-stocks__replaceCaps",function(){return this.text.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,n){switch(e){case"c":return'<span class="inline-stocks__caps">'+n+"</span>";case"d":return'<span class="inline-stocks__numbers">'+n+"</span>";default:return t}})}),e("inline-stocks__rows-by-type",function(t){var e=this.klimit;switch(this.type){case"cash":return this.rows.map(function(e){return t("inline-stocks__val",e)}).join("");case"currency":return this.rows.map(function(n,i){return(i?t("inline-stocks__delta",this.beget({data:n,klimit:e})):"")+t("inline-stocks__val",n)},this).join("");case"indexes":var n=this.rows[0];return t("inline-stocks__date",n)+t("inline-stocks__delta",this.beget({data:n,klimit:e}))+t("inline-stocks__val",n)}}),e("inline-stocks__val",'<td><i class="inline-stocks__cell">[% value %]</i></td>'),e("inline-stocks__delta",function(){var t,e=this.data;return this.klimit&&(t="     %d%%".replace(/%d%(%)/,this.klimit+"$1")),e.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(e.is_hot?"hot":"small text_gray_yes")+'"'+(t&&e.is_hot?' title="'+t+'"':"")+' aria-hidden="true">'+e.delta+'</i><span class="a11y-hidden">'+String(e.delta).replace("","-")+"</span></td>":""}),e("inline-stocks__date",function(){var t=this.datetime||this.time||this.date;return t?'<td><i class="inline-stocks__cell_datetime">'+t+"</i></td>":""}),e("inline-stocks__t-title",function(t){var e,n;switch(this.type){case"currency":e="",n="";break;case"cash":e="",n=""}return t("inline-stocks__head",{col2:e,col4:n})}),e("inline-stocks__head",function(){if(!this.col2&&!this.col4)return"";for(var t=[this.col2,this.col4],e="",n=0;n<t.length;n++)t[n]&&(e+='<th class="inline-stocks__cell" colspan="2">'+t[n]+"</th>");return'<tr class="inline-stocks__head">'+e+"</tr>"}),e("etrains__track",'<span[% trackClass %]>[% direction %]<ul class="etrains__times-list">[% times %]</ul><div class="etrains__hints_list">[% hints %]</div></span>'),e("etrains__trackEmpty",'<div class="etrains__track">[% text %]</div>'),e("etrains__time",'<li class="etrains__track-time" onclick="return {id:\'[% id %]\'}"><a href="[% href %]"[% timeClass %][% stat %][% target %]>[% time %]</a></li>'),e("etrains__directionLayout",'<a href="javascript:void(0)" data-stat="[% stat %]"class="etrains__direction link link_black_yes" onclick="return false;">&#8203;[% stfrom %]&nbsp; [% stto %]</a>'),e("etrains__hint",'<div id="[% id %]" class="i-hidden etrains__hint">[% express %][% name %]</div>')}();