/*
 Copyright 2008-2013 Adometry, Inc.
*/
var DMTRY=DMTRY||{};
(function(){new function(){try{DMTRY.ctx=DMTRY.ctx||[];DMTRY.ctx.push(this);DMTRY.namespace=function(a){var b=DMTRY;a=a.split(".");var d;"DMTRY"===a[0]&&(a=a.slice(1));for(d=0;d<a.length;d++)"undefined"===typeof b[a[d]]&&(b[a[d]]={}),b=b[a[d]];return b};var l=DMTRY.namespace("ADO"),A=!1,B=new function(a){var b=[];this.checkpoint=function(d){for(d=d||-1;b.length>=a;)b.shift();b.push(d)};this.toString=function(){return"track:"+b.toString()}}(50),h=B.checkpoint,s={dl:{desc:"DataLogix",propName:"ddl",
actionCode:"ddl",logMutator:function(a,b){return a.replace(g.HOSTNAME,"adometry.nexac.com/dlp")}}},u=new function(){var a=this;a.hasFocus=!0;a.onblur=function(){a.hasFocus=!1};a.onfocus=function(){a.hasFocus=!0}},m=function(a,b,d,e){this.type=a;this.description=b;this.requiredProps=d;this.appendCustomValues=e;this.logMutator=null};m.DEFINED={IMP:new m("i","Imp",["echo","sz"],!0),LOAD:new m("ol","Load","csync ds dsf if mbl ols sf sn sz ta tp vd x y".split(" ")),SEEN:new m("sn","Seen",["sn","ta","tp",
"vd"]),POST:new m("p","Post",["ta","tp","vd"])};m.DEFINED.IMP.logMutator=function(a,b){var d=a;!1!==b.cookie&&(d=a.replace(g.HOSTNAME,g.HOSTNAME+"/redir"));return d};var C=[],v;for(v in s)if(s.hasOwnProperty(v)){var r=s[v];m.DEFINED[r.actionCode]=new m(r.actionCode,r.desc,[]);C.push(r.propName);null!=m.DEFINED[r.actionCode]&&(m.DEFINED[r.actionCode].logMutator=r.logMutator)}m.DEFINED.LOAD.requiredProps=C.concat(m.DEFINED.LOAD.requiredProps);l.Action=l.Action||m;var p=function(){this.scriptElement=
null;this.protocol="";this.dgVendors=[];this.position=this.adSize="";this.csync=this.cookie=!0;this.echo="";this.passthru={};for(var a=p.INCOMING_PARAM_ORDER,b=0;b<a.length;b++)this[a[b]]=0};p.INCOMING_PARAM_ORDER="bid gid pid cid aid srcid advid".split(" ");p.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};p.loadActivator=function(a,b,d){b=b.toLowerCase();var e=null;if("csync"===b)0===Number(d)&&(a.csync=!1);else if("debug"===b)1===Number(d)&&(A=!0);else if("echo"===b)a.echo=d;else if("nc"===
b)1===Number(d)&&(a.cookie=1===Number(d)?!1:!0);else if("pos"===b)e=d.match(/(\w{2})$/i),null!=e&&(a.position=e[0]);else if("scheme"===b)e=d.match(/^https?$/i),null!=e&&(a.protocol=e[0].toLowerCase());else if("sz"===b)e=d.match(/(\d+x\d+)/),null!=e&&(a.adSize=e[0]);else for(var f in s)s.hasOwnProperty(f)&&b===f.toLowerCase()&&1===Number(d)&&a.dgVendors.push(f)};p.parseScriptUrl=function(a){h(1);var b=new p,d=document.getElementsByTagName("script");a=RegExp(a);for(var e,f,c,k=0;k<d.length;k++)if(e=
d[k],f=e.src||"X",h("2:"+f),f=f.replace(/^\s\s*/,"").replace(/\s\s*$/,""),c=f.search(a),-1<c&&10>=c&&null===e.getAttribute("data-dmtry-readby"))return h(3),e.setAttribute("data-dmtry-readby","ADO"),b.scriptElement=d[k],d=f.replace(/^[^\?]+\??/,""),p.processQueryString(b,d),b};p.processQueryString=function(a,b){if(""!==b){for(var d=b.split("&"),e=1;e<d.length;e++){var f=d[e],c=f.indexOf("="),k;-1<c?(k=f.substring(0,c),f=decodeURIComponent(f.substring(c+1))):(k=f,f=null);p.passthruValidator(k)?a.passthru[k]=
f:p.loadActivator(a,k,f)}e=d[0].split("_");k=p.INCOMING_PARAM_ORDER;if(2<=e.length){h(4);for(d=0;d<e.length&&d<k.length;d++)if(null!=e[d]&&""!=e[d]){if("gid"===k[d]&&!p.isNumber(e[d]))throw Error("Invalid Campaign: "+e[d]);a[k[d]]=e[d]}}else throw Error("Script param error: "+d[0]);}};p.passthruValidator=function(a){return-1<a.search(/^cus\./)?!0:!1};var E=function(){var a={sf:!1};try{$sf&&$sf.ext&&(a.sf=!0)}catch(b){}this.isSafeFrame=function(){return a.sf};return this};l.AntennaManager=l.AntennaManager||
{};l.AntennaManager.antennas=l.AntennaManager.antennas||[];l.AntennaManager.imageElems=l.AntennaManager.imageElems||[];l.AntennaManager.scriptElems=l.AntennaManager.scriptElems||[];l.AntennaManager.create=function(a){h(20);if(null==a||!a.bid||!a.gid||a&&"object"==typeof a&&a.constructor!=p)return null;var b=l.AntennaManager,d=g,e=b.antennas,b=b.imageElems,f=e.length,c="ADO_track_"+f,k=null,D=A?5:0;if(null==k){h(21);document.write('<img width="0" height="0" border="'+D+'" id="'+c+'" data-dmtry-found="0">');
var n=document.getElementById(c);null!==n&&(n.setAttribute("data-dmtry-found",1),k=n)}if(null==k&&(h(22),n=a.scriptElement,null!=n))try{k=document.createElement("img"),k.id=c,k.width=0,k.height=0,k.border=D,k.setAttribute("data-dmtry-found",1),n.parentNode.insertBefore(k,n)}catch(F){k=null}h(23);null!=k?(b[f]=k,e[f]=new d(a,m.DEFINED.IMP,f)):d.sendError(a,"noImage");h(24);return e[f]};l.AntennaManager.shutdownAntennas=function(){var a=l.AntennaManager.antennas;if(a&&0<a.length){var b;for(b=0;b<a.length;b++)a[b].sendResponse(m.DEFINED.POST),
a[b].timerID&&(clearInterval(a[b].timerID),a[b].timerID=null)}};var w=new function(){var a=this;a.isSupported=function(){return"undefined"!==typeof window.mozInnerScreenX?!0:!1};a.getRootViewportRectFromScreenOrigin=function(){return b(!1)};a.getRootViewportRectFromViewportOrigin=function(){return b(!0)};a.getFrameCoordsFromViewportOrigin=function(){var d=a.getRootViewportRectFromScreenOrigin(),e=a.getCurrentFrameRectFromScreenOrigin(),f=-1*d.left,d=-1*d.top,e=new q(e.right+f,e.bottom+d,e.left+f,
e.top+d);return new t(e.left,e.top)};a.getCurrentFrameRectFromScreenOrigin=function(){var a=window;return new q(a.mozInnerScreenX+a.innerWidth,a.mozInnerScreenY+a.innerHeight,a.mozInnerScreenX,a.mozInnerScreenY)};var b=function(a){var e=window,f;f=window.top;var c=80,b=10;try{c=f.mozInnerScreenY-f.screenY,b=f.outerHeight-(c+f.innerHeight)}catch(h){}var n=f=0,e={x1:e.screenX,y1:e.screenY+c,x2:e.screenX+e.outerWidth,y2:e.screenY+e.outerHeight-b};null!=a&&a&&(f=-1*e.x1,n=-1*e.y1);e={x1:e.x1+f,y1:e.y1+
n,x2:e.x2+f,y2:e.y2+n};return new q(e.x2,e.y2,e.x1,e.y1)};return a},t=function(a,b){this.x=a;this.y=b;return this};t.prototype.isDefined=function(){var a=!1;null!=this.x&&null!=this.y&&(a=!0);return a};t.prototype.isWithin=function(a){var b=!1;null!=a&&(a.isDefined()&&a.left<=this.x&&a.right>=this.x&&a.top<=this.y&&a.bottom>=this.y)&&(b=!0);return b};var q=function(a,b,d,e){this.right=a;this.bottom=b;this.left=d||0;this.top=e||0;return this};q.prototype.isDefined=function(){var a=!1;null!=this.top&&
(null!=this.right&&null!=this.bottom&&null!=this.left)&&(a=!0);return a};q.prototype.getArea=function(){var a=null;this.isDefined()&&(a=this.getWidth()*this.getHeight());return a};q.prototype.getHeight=function(){var a=null;this.isDefined()&&(a=this.bottom-this.top);return a};q.prototype.getWidth=function(){var a=null;this.isDefined()&&(a=this.right-this.left);return a};q.prototype.intersects=function(a){if(this.isDefined()&&a.isDefined()&&(this.top<=a.top&&a.top<=this.bottom||this.top<=a.bottom&&
a.bottom<=this.bottom||a.top<=this.top&&this.bottom<=a.bottom))if(this.left<=a.left&&a.left<=this.right||this.left<=a.right&&a.right<=this.right||a.left<=this.left&&this.right<=a.right)return!0;return!1};q.prototype.getIntersectingRect=function(a){return this.isDefined()&&a.isDefined()&&this.intersects(a)?new q(this.right<a.right?this.right:a.right,this.bottom>a.bottom?a.bottom:this.bottom,this.left>a.left?this.left:a.left,this.top<a.top?a.top:this.top):null};q.prototype.percentIntersect=function(a){var b=
0;if(this.isDefined()&&a.isDefined()){a=this.getIntersectingRect(a);a=null!=a?a.getArea():null;var d=this.getArea();null!=a&&null!=d&&(b=Math.round(100*(a/d)))}return b};var x=new function(){var a=this,b={};a.frameClimbInfo=function(d){if(b.frameClimbInfo&&!d)return b.frameClimbInfo;var e={url:document.referrer,toTop:-1,friendLevel:0,inFrame:!1,nonFriendlyPresent:!1,winStack:[]},f=window;d=0;for(var e=e.url,c=!1,k=!1,h=[],n=window,g=0;;n=n.parent,g++){h.push(n);if(20==g){g=-1;break}try{n.document?
(f=n,d=g):k=!0}catch(l){k=!0}if(n==n.parent)break;else c=!0}n=g;try{e=d==n?f.location.href:f.document.referrer}catch(m){}f=a.isMobileAppEnvDetected();return e=b.frameClimbInfo={url:e,toTop:n,friendLevel:d,inFrame:c,nonFriendlyPresent:k||f,inMobile:f,winStack:h}};a.getViewportRect=function(d,e){var f=new q(0,0,0,0);try{d=null==d?window:d;if(null!=d.innerWidth)f.right=d.innerWidth,f.bottom=d.innerHeight;else{var c=d.document;f.right=c.documentElement&&c.documentElement.clientWidth?c.documentElement.clientWidth:
c.body.clientWidth||0;f.bottom=c.documentElement&&c.documentElement.clientHeight?c.documentElement.clientHeight:c.body.clientHeight||0}if(!0!=e){var b=a.getScrollOffsets(d);f.left+=b.left;f.right+=b.left;f.top+=b.top;f.bottom+=b.top}}catch(h){}return f};a.getRootViewportRect=function(d){d=!0==d;var e=null,f=a.frameClimbInfo(),c=f.winStack;f.nonFriendlyPresent||(e=a.getViewportRect(c[c.length-1],d));return e};a.getLocationCoords=function(d,e,f,c){var b=new t(0,0),h=window,n=a.frameClimbInfo();e=e&&
"viewport"===e.toLowerCase();var g=a.getViewportRect(h,e),l=new t(null,null),m;m=document.readyState&&"loaded"!=document.readyState&&"interactive"!=document.readyState&&"complete"!=document.readyState?!1:!0;if(!m||(isNaN(g.getWidth())||isNaN(g.getHeight())||0>=g.getWidth()||0>=g.getHeight())||!e&&n.nonFriendlyPresent)return l;if(d){d=e?a.elemLocationInFrameViewPort(h,d):a.elemLocationInFrame(h,d);b.x+=d.x;b.y+=d.y;if(n.inFrame)if(w.isSupported())n=w.getFrameCoordsFromViewportOrigin(),b.x+=n.x||0,
b.y+=n.y||0;else{if(n.nonFriendlyPresent)return l;for(d=0;d<n.winStack.length;d++)h=n.winStack[d],l=h.frameElement,null!=l&&(h=e?a.elemLocationInFrameViewPort(h.parent,l):a.elemLocationInFrame(h.parent,l),b.x+=h.x,b.y+=h.y)}n=80;e=-1;g=0;d=50;h=-1;m=0;g=Math.round;l=Math.abs;null!=c&&c.isDefined()&&(null!=c.getWidth()&&!isNaN(c.getWidth())&&(n=g(c.getWidth()/2)),null!=c.getHeight()&&!isNaN(c.getHeight())&&(d=g(c.getHeight()/2)));null!=f&&(e=-1<f.indexOf("l")?1:-1,h=-1<f.indexOf("t")?1:-1);g=e*n;m=
h*d;b.x+=l(g)<l(b.x)?g:0;b.y+=l(m)<l(b.y)?m:0}return b};a.getLocationPercentages=function(a,e,b){b=null!=b?b:!1;var c=null,h;if(null!=a&&a.isDefined()&&null!=e&&e.isDefined())return c=e.left,h=e.top,c={x:Math.round(100*((a.x-c)/e.getWidth())),y:Math.round(100*((a.y-h)/e.getHeight()))},b&&(c.x=0>c.x?0:c.x,c.y=0>c.y?0:c.y),c};a.elemLocationInFrame=function(a,e){for(var b=e,c={x:0,y:0,fixedElem:!1};null!=b;){c.x+=b.offsetLeft+b.clientLeft;c.y+=b.offsetTop+b.clientTop;if(null!=b&&null!=b.style){var h=
b.style.position;if(null!=h&&"fixed"===h.toLowerCase()){c.fixedElem=!0;break}}b=b.offsetParent}c.x=0<c.x?c.x:0;c.y=0<c.y?c.y:0;return c};a.elemLocationInFrameViewPort=function(b,e){var f=a.elemLocationInFrame(b,e),c=null;f.fixedElem||(c=a.getScrollOffsets(b),f.x-=c.left,f.y-=c.top);return f};a.isMobileAppEnvDetected=function(){var a=!1,b=window.screen;try{null!=b&&(0===b.width&&0===b.height&&0<b.colorDepth)&&(a=!0)}catch(f){}return a};a.getScrollOffsets=function(a){var b={left:0,top:0};b.left=a.pageXOffset||
a.document.body.scrollLeft||a.document.documentElement.scrollLeft||0;b.top=a.pageYOffset||a.document.body.scrollTop||a.document.documentElement.scrollTop||0;return b};return a},g=function(a,b,d){h(100);var e=g,f=l.AntennaManager,c=this;c.version=g.VERSION+"";c.timerInterval=1;c.timerID=null;c.startTime=new Date;c.inFrame=!1;c.nfPresent=!1;c.forElement=null;c.props=[];c.rImages=[];c.size=null;c.cookie=!0;c.frameClimbData=null;var k=function(a,c){setTimeout(function(){var c=a,b=(new Date).getTime(),
e=document.readyState,c=null!=c?c:b;"undefined"!==typeof e?"interactive"===e?3E3<=b-c?p(1):k(c):"complete"===e?p(c===b?2:0):k():p(8)},c||250)},p=function(b){h(110);if(1!==c.props.sn){c.props.ols=b;c.props["if"]=c.nfPresent?1:0;c.nfPresent&&(b=new E,c.props.sf=b.isSafeFrame()?1:0);c.props.mbl=c.frameClimbData.inMobile?1:0;c.props.ta=c.nfPresent&&!w.isSupported()?"na":0;b=x.getRootViewportRect(!1);c.props.ds=null==b?"-1x-1":b.getWidth()+"x"+b.getHeight();h(111);b=x.getViewportRect(window,!1);c.props.dsf=
null==b?"-1x-1":b.getWidth()+"x"+b.getHeight();h(112);c.props.vd=c.nfPresent&&!w.isSupported()?0:1;r(!1);if(null!=c.props.x&&null!=c.props.y&&("na"==c.props.x||"na"==c.props.y))if((b=v("document"))&&null!=b.x&&null!=b.y)c.props.x=b.x,c.props.y=b.y;h(113);if(null!=a.dgVendors){b=a.dgVendors;for(var e=0;e<b.length;e++){var d=s[b[e]];c.props[d.propName]=1;c.sendResponse(m.DEFINED[d.actionCode])}}h(114);c.sendResponse(m.DEFINED.LOAD)}},n=function(){var a=function(){try{u.hasFocus&&(t("viewport")&&(c.props.ta+=
c.timerInterval),r())}catch(a){c.timerID&&(clearInterval(c.timerID),c.timerID=null)}},b=1E3*c.timerInterval;a();c.timerID=setInterval(a,b)},r=function(a){if(null===a||"boolean"!=typeof a)a=!0;var b=!1,e=u.hasFocus,d=t("viewport"),f=t("document");if(e&&(f||d))b=!0;b&&(null!==c.props.sn&&0===c.props.sn)&&(c.props.sn=1,a&&c.sendResponse(m.DEFINED.SEEN))},t=function(a){var c=-1,b=-1;if(a=v(a))c=a.x,b=a.y;return null==c||null==b||0>c||100<c||0>b||100<b?!1:!0},v=function(b){var e={x:null,y:null},h="viewport"===
b,g=c.forElement;null==g&&(g=c.forElement=f.imageElems[d]);b=x.getLocationCoords(g,b,a.position);g=w.isSupported()?w.getRootViewportRectFromViewportOrigin():x.getRootViewportRect(h);null!=b&&(b.isDefined()&&null!=g&&g.isDefined())&&(e=x.getLocationPercentages(b,g,!h));return e},y=function(a,b,e){var d="";void 0===b&&(b=null);void 0===e&&(e=!0);if("function"!=typeof c.props[a]){if(!1!==e)try{b=encodeURIComponent(b)}catch(f){b=escape(b)}d=a+"="+b+"&"}return d},z=function(b){if(!b)return null;var d;
d="?"+y("at",b.type);d+=y("d",b.description);if(b.requiredProps)if(b.requiredProps.constructor==Array){for(var f="",h="",g=[],k=0,g=g.concat(b.requiredProps),g=g.concat(e.QS_ALWAYS),k=0;k<g.length;k++)f=g[k],!e.arrayContains(e.PATHORDER,f)&&"url"!=f.toLowerCase()&&(h=c.props[f],d+=y(f,h));if(b.appendCustomValues)for(f in g=a.passthru,g)g.hasOwnProperty(f)&&(h=g[f],d+=y(f,h,!1))}else return null;else return d;if((b=c.props.bf)&&0<b.length)d+=y("bf",b),c.props.bf="";d+=y("url",c.props.url);return d.substring(0,
d.length-1)},A=/^[A-Za-z0-9\.\+\-]*$/;this.sendResponse=function(b){h(200);var d=null;if(null===b||null===b.type)return null;var f=new Image;f.border="0";f.height=1;f.width=1;f.vspace=0;f.hspace=0;if(f){c.props.rand=e.generateRandom(999998);c.props.tp=Math.round(((new Date).getTime()-c.startTime.getTime())/1E3);for(var d=e.PATHORDER,g="/",k,l=0;l<d.length;l++){k=d[l];var m=c.props[d[l]];k=null!=k?k+"":k;var m=null!=m?m+"":m,p=c.props,q=p.bf;p.bf=q?q:"";if(null==m||!A.test(m))p.bf+=k+":"+m+";",m="_X_";
1>m.length&&45<m.length&&(p.bf+=k+":trim;",m=m.substring(0,45));k=m;g+=k+"/"}d=g+"1.ver";g=z(b);l=a.protocol?a.protocol+":":"";d=l+="//"+e.HOSTNAME+d+g;null!=b.logMutator&&"function"==typeof b.logMutator&&(d=b.logMutator(d,this));null!=d&&(d.length>e.MAX_URL_LENGTH&&(d=d.substring(0,e.MAX_URL_LENGTH)),0<d.length&&(f.src=d,c.rImages.push(f)))}"ol"==b.type.toLowerCase()&&n();return d};h(50);(function(){h(101);c.props.bid=a.bid;c.props.gid=a.gid;c.props.pid=a.pid;c.props.cid=a.cid;c.props.aid=a.aid;
c.props.srcid=a.srcid;c.props.advid=a.advid;c.props.sid=e.generateRandom(999998);h(102);var f,g=f=null,l;null!=a&&(null!=a.adSize&&""!=a.adSize)&&(l=a.adSize.split("x"),null!=l&&2===l.length&&(f=Number(l[0]),g=Number(l[1])));f=new q(f,g);c.size=f;c.props.sz=null!=c.size&&c.size.isDefined()?c.size.getWidth()+"x"+c.size.getHeight():"na";h(103);c.cookie="undefined"!==typeof a.cookie?a.cookie:!0;c.props.nc=!1===c.cookie?1:0;h(104);c.props.csync="undefined"!==typeof a.csync&&!1===a.csync?0:1;c.props.echo=
a.echo;c.frameClimbData=x.frameClimbInfo();c.inFrame=c.frameClimbData.inFrame;c.nfPresent=c.frameClimbData.nonFriendlyPresent;c.props.url=c.frameClimbData.url;c.props.jt=c.frameClimbData.toTop;c.props.jf=c.frameClimbData.friendLevel;h(105);c.props.ols="na";c.props["if"]="na";c.props.num=d;c.props.sr=e.getScreenRes();c.props.ds="na";c.props.dsf="na";c.props.tz=e.getTimeZone();c.props.sf="na";c.props.vd=0;c.props.sn=0;c.props.tp=0;c.props.ta=0;c.props.x="na";c.props.y="na";c.props.bf="";c.props.jsv=
c.version;for(var m in s)s.hasOwnProperty(m)&&(c.props[s[m].propName]=0);c.props.oc="ADO";h(106);k();h(115);null!=b&&"undefined"!=typeof b&&c.sendResponse(b);h(116)})()};g.VERSION="4.5.0";g.MAX_URL_LENGTH=1999;g.HOSTNAME="log.dmtry.com";g.PATHORDER="rand bid gid pid cid sid aid srcid advid".split(" ");g.QS_ALWAYS="jf jt jsv oc nc num sr tz url".split(" ");g.sendError=function(a,b){var d=new Image,e="/";if(null!=a)for(var f=g.PATHORDER,c=0;c<f.length;c++)e=null!=a[f[c]]?e+a[f[c]]:e+0,e+="/";d.src=
"//"+g.HOSTNAME+e+"1.ver?at=e&d="+escape(b+" ["+B.toString()+"]")+"&jsv="+g.VERSION};g.arrayContains=function(a,b){for(var d=0;d<a.length;d++)if(a[d]==b)return!0;return!1};g.generateRandom=function(a){return Math.floor(Math.random()*a)+2};g.getScreenRes=function(){try{return screen.width+"x"+screen.height+"x"+screen.colorDepth}catch(a){return"na"}};g.getTimeZone=function(){try{return(new Date).getTimezoneOffset()/60}catch(a){return"na"}};(function(){try{var a=p.parseScriptUrl("//(js|log).dmtry.com/antenna2.js");
null!=a&&l.AntennaManager.create(a)||g.sendError(a,"Antenna object COULD NOT be created.")}catch(b){g.sendError(null,b.message)}window.addEventListener?(1==l.AntennaManager.antennas.length&&window.addEventListener("unload",l.AntennaManager.shutdownAntennas,!1),window.addEventListener("focus",u.onfocus,!1),window.addEventListener("blur",u.onblur,!1)):(1==l.AntennaManager.antennas.length&&window.attachEvent("onunload",l.AntennaManager.shutdownAntennas),document.attachEvent("onfocusin",u.onfocus),document.attachEvent("onfocusout",
u.onblur))})()}catch(z){try{g.sendError(null,"Global Catch: "+z.name+":"+z.number+": "+z.message)}catch(G){}}}})();
